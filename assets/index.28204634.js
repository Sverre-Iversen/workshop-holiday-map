const rL=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function i(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerpolicy&&(d.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?d.credentials="include":l.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(l){if(l.ep)return;l.ep=!0;const d=i(l);fetch(l.href,d)}};rL();const sL="modulepreload",Gx={},nL="./",fe=function(t,i){return!i||i.length===0?t():Promise.all(i.map(s=>{if(s=`${nL}${s}`,s in Gx)return;Gx[s]=!0;const l=s.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${d}`))return;const y=document.createElement("link");if(y.rel=l?"stylesheet":sL,l||(y.as="script",y.crossOrigin=""),y.href=s,document.head.appendChild(y),l)return new Promise((g,x)=>{y.addEventListener("load",g),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};function v(e,t,i,s){var l,d=arguments.length,y=d<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,i):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(e,t,i,s);else for(var g=e.length-1;g>=0;g--)(l=e[g])&&(y=(d<3?l(y):d>3?l(t,i,y):l(t,i))||y);return d>3&&y&&Object.defineProperty(t,i,y),y}let gl;function pe(e){return typeof gl[e]=="function"?gl[e]=gl[e](globalThis):gl[e]}var SI,$I,MI,II;gl=((SI=globalThis.dojoConfig)==null?void 0:SI.has)||(($I=globalThis.esriConfig)==null?void 0:$I.has)?{...(MI=globalThis.dojoConfig)==null?void 0:MI.has,...(II=globalThis.esriConfig)==null?void 0:II.has}:{},pe.add=(e,t,i,s)=>((s||gl[e]===void 0)&&(gl[e]=t),i&&pe(e)),pe.cache=gl,pe.add("esri-deprecation-warnings",!0),(()=>{var t;pe.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window!="undefined"&&typeof location!="undefined"&&typeof document!="undefined"&&window.location===location&&window.document===document;if(pe.add("host-browser",e),pe.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),pe.add("dom",e),pe("host-browser")){const i=navigator,s=i.userAgent,l=i.appVersion,d=parseFloat(l);if(pe.add("wp",parseFloat(s.split("Windows Phone")[1])||void 0),pe.add("msapp",parseFloat(s.split("MSAppHost/")[1])||void 0),pe.add("khtml",l.includes("Konqueror")?d:void 0),pe.add("edge",parseFloat(s.split("Edge/")[1])||void 0),pe.add("opr",parseFloat(s.split("OPR/")[1])||void 0),pe.add("webkit",!pe("wp")&&!pe("edge")&&parseFloat(s.split("WebKit/")[1])||void 0),pe.add("chrome",!pe("edge")&&!pe("opr")&&parseFloat(s.split("Chrome/")[1])||void 0),pe.add("android",!pe("wp")&&parseFloat(s.split("Android ")[1])||void 0),pe.add("safari",!l.includes("Safari")||pe("wp")||pe("chrome")||pe("android")||pe("edge")||pe("opr")?void 0:parseFloat(l.split("Version/")[1])),pe.add("mac",l.includes("Macintosh")),!pe("wp")&&s.match(/(iPhone|iPod|iPad)/)){const y=RegExp.$1.replace(/P/,"p"),g=s.match(/OS ([\d_]+)/)?RegExp.$1:"1",x=parseFloat(g.replace(/_/,".").replace(/_/g,""));pe.add(y,x),pe.add("ios",x)}pe.add("trident",parseFloat(l.split("Trident/")[1])||void 0),pe("webkit")||(!s.includes("Gecko")||pe("wp")||pe("khtml")||pe("trident")||pe("edge")||pe.add("mozilla",d),pe("mozilla")&&pe.add("ff",parseFloat(s.split("Firefox/")[1]||s.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&pe.add("esri-mobile",t),i&&pe.add("esri-iPhone",i),pe.add("esri-geolocation",!!navigator.geolocation)}pe.add("esri-canvas-svg-support",!pe("trident")),pe.add("esri-wasm","WebAssembly"in globalThis),pe.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),pe.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),pe.add("esri-atomics","Atomics"in globalThis),pe.add("esri-workers","Worker"in globalThis),pe.add("web-feat:cache","caches"in globalThis),pe.add("esri-workers-arraybuffer-transfer",!pe("safari")||Number(pe("safari"))>=12),pe.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),pe.add("featurelayer-simplify-payload-size-factors",[1,1,4]),pe.add("featurelayer-snapshot-enabled",!0),pe.add("featurelayer-snapshot-point-min-threshold",8e4),pe.add("featurelayer-snapshot-point-max-threshold",4e5),pe.add("featurelayer-snapshot-point-coverage",.1),pe.add("featurelayer-advanced-symbols",!1),pe.add("featurelayer-pbf",!0),pe.add("featurelayer-pbf-statistics",!1),pe.add("feature-layers-workers",!0),pe.add("feature-polyline-generalization-factor",1),pe.add("mapview-transitions-duration",200),pe.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),pe.add("mapserver-pbf-enabled",!1),pe.add("mapimagelayer-popup-identify-max-tolerance",20),pe.add("heatmap-allow-raster-fallback",!0),pe.add("heatmap-force-raster",!1),pe("host-webworker")||pe("host-browser")&&(pe.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),pe.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{pe.add("esri-image-decode",!0,!0,!0)}).catch(()=>{pe.add("esri-image-decode",!1,!0,!0)})}return!1}),pe.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const oL=null;function Y(e){return e!=null}function he(e){return e==null}function ho(e,t){return Y(e)?t(e):oL}function Upe(e){return e}function aL(e,t){if(he(e))throw new Error(t);return e}function dv(e,t){return Y(e)?e:typeof t=="function"?t():t}function Bpe(e,t){return Y(e)?e:t}function Vs(e){return Y(e)&&e.destroy(),null}function Hpe(e){return Y(e)&&e.dispose(),null}function ps(e){return Y(e)&&e.remove(),null}function bb(e){return Y(e)&&e.abort(),null}function Wpe(e){return Y(e)&&e.release(),null}function lL(e,t,i){return Y(e)&&Y(t)?Y(i)?i(e,t):e.equals(t):e===t}function uL(e){return null}function Jpe(e,t){const i=new Array;for(const s of e)i.push(Rd(s,null,t));return i}function Kpe(e,t){for(const i of e)ho(i,t)}function Rd(e,t,i){return Y(e)?i(e):t}function Ype(e){return e.filter(t=>Y(t))}function CI(e,...t){let i=e;for(let s=0;s<t.length&&i;++s)i=i[t[s]];return i}function Xpe(e){return e}class Mn{constructor(t=1){this._seed=t}set seed(t){this._seed=t==null?Math.random()*Mn._m:t}getInt(){return this._seed=(Mn._a*this._seed+Mn._c)%Mn._m,this._seed}getFloat(){return this.getInt()/(Mn._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const s=i-t;return t+this.getInt()/Mn._m*s}}Mn._m=2147483647,Mn._a=48271,Mn._c=0;function hL(e,t){return t?e.filter((i,s,l)=>l.findIndex(t.bind(null,i))===s):e.filter((i,s,l)=>l.indexOf(i)===s)}function e4(e,t,i){if(he(e)&&he(t))return!0;if(he(e)||he(t)||e.length!==t.length)return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function Zpe(e,t){let i=e.length!==t.length;e.length=t.length;for(let s=0;s<t.length;++s)e[s]!==t[s]&&(e[s]=t[s],i=!0);return i}function Qpe(e,t,i){let s,l;return i?(s=t.filter(d=>!e.some(y=>i(y,d))),l=e.filter(d=>!t.some(y=>i(y,d)))):(s=t.filter(d=>!e.includes(d)),l=e.filter(d=>!t.includes(d))),{added:s,removed:l}}function ede(e){return e&&typeof e.length=="number"}const cL=!!Array.prototype.fill;function tde(e,t){if(cL)return new Array(e).fill(t);const i=new Array(e);for(let s=0;s<e;s++)i[s]=t;return i}function ide(e,t){t===void 0&&(t=e,e=0);const i=new Array(t-e);for(let s=e;s<t;s++)i[s-e]=s;return i}function pL(e){return e.reduce((t,i)=>t.concat(i||[]),[])}class PI{constructor(){this.last=0}}const NI=new PI;function RI(e,t,i,s){s=s||NI;const l=Math.max(0,s.last-10);for(let y=l;y<i;++y)if(e[y]===t)return s.last=y,y;const d=Math.min(l,i);for(let y=0;y<d;++y)if(e[y]===t)return s.last=y,y;return-1}function jI(e,t,i,s){const l=i==null?e.length:i,d=RI(e,t,l,s);if(d!==-1)return e[d]=e[l-1],i==null&&e.pop(),t}const Ys=new Set;function dL(e,t,i=e.length,s=t.length,l,d){if(s===0||i===0)return i;Ys.clear();for(let g=0;g<s;++g)Ys.add(t[g]);l=l||NI;const y=Math.max(0,l.last-10);for(let g=y;g<i;++g)if(Ys.has(e[g])&&(d&&d.push(e[g]),Ys.delete(e[g]),e[g]=e[i-1],--i,--g,Ys.size===0||i===0))return Ys.clear(),i;for(let g=0;g<y;++g)if(Ys.has(e[g])&&(d&&d.push(e[g]),Ys.delete(e[g]),e[g]=e[i-1],--i,--g,Ys.size===0||i===0))return Ys.clear(),i;return Ys.clear(),i}new Mn;function fL(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function rde(e,t){if(e.forEach)e.forEach(t);else for(let i=0;i<e.length;i++)t(e[i],i,e)}function yL(e,t,i){if(e.slice)return e.slice(t,i);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),i===void 0?i=e.length:(i<0&&(i+=e.length),i=Math.min(e.length,Math.max(0,i)));const s=Math.max(0,i-t),l=new e.constructor(s);for(let d=0;d<s;d++)l[d]=e[t+d];return l}function sde(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function mL(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function gL(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function vL(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function wL(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function bL(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function _L(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function xL(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function SL(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function $L(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function LI(e,t){let i;if(t)for(i in e)e.hasOwnProperty(i)&&(e[i]===void 0?delete e[i]:e[i]instanceof Object&&LI(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function ie(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=VI(e);if(Y(t))return t;if(FI(e))return e.clone();if(DI(e))return e.map(ie);if(zI(e))return e.clone();const i={};for(const s of Object.getOwnPropertyNames(e))i[s]=ie(e[s]);return i}function _b(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=VI(e);if(Y(t))return t;if(DI(e)){let i=!0;const s=e.map(l=>{const d=_b(l);return l!=null&&d==null&&(i=!1),d});return i?s:null}if(FI(e))return e.clone();if(!zI(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const s of Object.getOwnPropertyNames(e)){const l=e[s],d=_b(l);if(l!=null&&d==null)return null;i[s]=d}return i}return null}function FI(e){return typeof e.clone=="function"}function DI(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function zI(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function qx(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function VI(e){if(mL(e)||gL(e)||vL(e)||wL(e)||bL(e)||_L(e)||xL(e)||SL(e)||$L(e))return yL(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((i,s)=>{t.set(s,ie(i))}),t}if(e instanceof Set){const t=new Set;return e.forEach(i=>{t.add(ie(i))}),t}return null}function t4(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function ML(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&e4(e,t):e instanceof Set?t instanceof Set&&TL(e,t):e instanceof Map?t instanceof Map&&EL(e,t):!!qx(e)&&qx(t)&&IL(e,t))}function IL(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const s of i)if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1;return!0}function TL(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function EL(e,t){if(e.size!==t.size)return!1;for(const[i,s]of e){const l=t.get(i);if(l!==s||l===void 0&&!t.has(i))return!1}return!0}function GI(e,t,i=!1){return UI(e,t,i)}function Np(e,t){if(t!=null)return t[e]||qI(e.split("."),!1,t)}function Xi(e,t,i){const s=e.split("."),l=s.pop(),d=qI(s,!0,i);d&&l&&(d[l]=t)}function qI(e,t,i){let s=i;for(const l of e){if(s==null)return;if(!(l in s)){if(!t)return;s[l]={}}s=s[l]}return s}function UI(e,t,i){return t?Object.keys(t).reduce((s,l)=>{let d=s[l],y=t[l];return d===y?s:d===void 0?(s[l]=ie(y),s):(Array.isArray(y)||Array.isArray(s)?(d=d?Array.isArray(d)?s[l]=d.concat():s[l]=[d]:s[l]=[],y&&(Array.isArray(y)||(y=[y]),i?y.forEach(g=>{d.includes(g)||d.push(g)}):s[l]=y.concat())):y&&typeof y=="object"?s[l]=UI(d,y,i):s.hasOwnProperty(l)&&!t.hasOwnProperty(l)||(s[l]=y),s)},e||{}):e}var TI;const vt={apiKey:void 0,applicationUrl:(TI=globalThis.location)==null?void 0:TI.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(GI(vt,globalThis.esriConfig,!0),delete vt.has),!vt.assetsPath){const e="4.24.7";vt.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}vt.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(vt,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),vt.request.corsEnabledServers=[],vt.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const AL=/\{([^\}]+)\}/g;function Ux(e){return e==null?"":e}function fo(e,t){return e.replace(AL,typeof t=="object"?(i,s)=>Ux(Np(s,t)):(i,s)=>Ux(t(s)))}function BI(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>t&&t.includes(i)?i:`\\${i}`)}function i4(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function nde(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const Bx={info:0,warn:1,error:2,none:3};class Me{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Me._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Me.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const i=Me._loggers;return Me._loggers=t,i},set throttlingDisabled(t){Me._throttlingDisabled=t}}}static getLogger(t){let i=Me._loggers[t];return i||(i=new Me({module:t})),i}_log(t,i,...s){if(!!this._matchLevel(t)){if(i!=="always"&&!Me._throttlingDisabled){const l=this._argsToKey(s),d=this._loggedMessages[t].get(l);if(i==="once"&&d!=null||i==="oncePerTick"&&d&&d>=Me._tickCounter)return;this._loggedMessages[t].set(l,Me._tickCounter),Me._scheduleTickCounterIncrement()}for(const l of vt.log.interceptors)if(l(t,this.module,...s))return;this._inheritedWriter()(t,this.module,...s)}}_parentWithMember(t,i){let s=this;for(;Y(s);){const l=s[t];if(Y(l))return l;s=s.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,i,...s){console[t](`[${i}]`,...s)}_matchLevel(t){const i=vt.log.level?vt.log.level:"warn";return Bx[this._parentWithMember("level",i)]<=Bx[t]}_argsToKey(...t){const i=(s,l)=>typeof l!="object"||Array.isArray(l)?l:"[Object]";return i4(JSON.stringify(t,i))}static _scheduleTickCounterIncrement(){Me._tickCounterScheduled||(Me._tickCounterScheduled=!0,Promise.resolve().then(()=>{Me._tickCounter++,Me._tickCounterScheduled=!1}))}}Me._loggers={},Me._tickCounter=0,Me._tickCounterScheduled=!1,Me._throttlingDisabled=!1;function fv(e,t){for(const[i,s]of e)if(t(s,i))return!0;return!1}function HI(e,t,i){const s=e.get(t);if(s!==void 0)return s;const l=i();return e.set(t,l),l}const rp=Me.getLogger("esri.core.Accessor");function kL(e){return e==null?e:new Date(e)}function OL(e){return e==null?e:!!e}function zf(e){return e==null?e:e.toString()}function Gs(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function r4(e){return e==null?e:Math.round(parseFloat(e))}function WI(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function Km(e,t){return t!=null&&e&&!(t instanceof e)}function JI(e){return e&&"isCollection"in e}function Hx(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function CL(e,t){if(!t||!t.constructor||!JI(t.constructor))return xb(e,t)?t:new e(t);const i=Hx(e.prototype.itemType),s=Hx(t.constructor.prototype.itemType);return i?s?i===s?t:i.prototype.isPrototypeOf(s.prototype)?new e(t):(xb(e,t),t):new e(t):t}function xb(e,t){return!!WI(t)&&(rp.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+yv(e)+"'"),!0)}function s4(e,t){return t==null?t:JI(e)?CL(e,t):Km(e,t)?xb(e,t)?t:new e(t):t}function yv(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const PL=new WeakMap;function NL(e){switch(e){case Number:return Gs;case Ft:return r4;case Boolean:return OL;case String:return zf;case Date:return kL;default:return HI(PL,e,()=>s4.bind(null,e))}}function ni(e,t){const i=NL(e);return arguments.length===1?i:i(t)}function lf(e,t,i){return arguments.length===1?lf.bind(null,e):t&&(Array.isArray(t)?t.map(s=>e(s,i)):[e(t,i)])}function RL(e,t){return arguments.length===1?lf(ni.bind(null,e)):lf(ni.bind(null,e),t)}function KI(e,t,i){return t!==0&&Array.isArray(i)?i.map(s=>KI(e,t-1,s)):e(i)}function Ym(e,t,i){if(arguments.length===2)return Ym.bind(null,e,t);if(!i)return i;let s=t,l=i=KI(e,t,i);for(;s>0&&Array.isArray(l);)s--,l=l[0];if(l!==void 0)for(let d=0;d<s;d++)i=[i];return i}function jL(e,t,i){return arguments.length===2?Ym(ni.bind(null,e),t):Ym(ni.bind(null,e),t,i)}function YI(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function Sb(e,t){if(arguments.length===2)return Sb(e).call(null,t);const i=new Set,s=e.filter(g=>typeof g!="function"),l=e.filter(g=>typeof g=="function");for(const g of e)typeof g!="string"&&typeof g!="number"||i.add(g);let d=null,y=null;return(g,x)=>{if(g==null)return g;const $=typeof g,E=$==="string"||$==="number";return E&&(i.has(g)||l.some(O=>$==="string"&&O===String||$==="number"&&O===Number))||$==="object"&&l.some(O=>!Km(g,O))?g:(E&&s.length?(d||(d=s.map(O=>typeof O=="string"?`'${O}'`:`${O}`).join(", ")),rp.error("Accessor#set",`'${g}' is not a valid value for this property, only the following values are valid: ${d}`)):typeof g=="object"&&l.length?(y||(y=l.map(O=>yv(O)).join(", ")),rp.error("Accessor#set",`'${g}' is not a valid value for this property, value must be one of ${y}`)):rp.error("Accessor#set",`'${g}' is not a valid value for this property`),x&&(x.valid=!1),null)}}function yo(e,t){if(arguments.length===2)return yo(e).call(null,t);const i={},s=[],l=[];for(const x in e.typeMap){const $=e.typeMap[x];i[x]=ni($),s.push(yv($)),l.push(x)}const d=()=>`'${s.join("', '")}'`,y=()=>`'${l.join("', '")}'`,g=typeof e.key=="string"?x=>x[e.key]:e.key;return x=>{if(e.base&&!Km(e.base,x)||x==null)return x;const $=g(x)||e.defaultKeyValue,E=i[$];if(!E)return rp.error("Accessor#set",`Invalid property value, value needs to be one of ${d()}, or a plain object that can autocast (having .type = ${y()})`),null;if(!Km(e.typeMap[$],x))return x;if(typeof e.key=="string"&&!WI(x)){const O={};for(const P in x)P!==e.key&&(O[P]=x[P]);return E(O)}return E(x)}}class Ft{}const ode={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function LL(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function XI(e){switch(e.type){case"native":return ni(e.value);case"array":return lf(XI(e.value));case"one-of":return FL(e);default:return null}}function FL(e){let t=null;return(i,s)=>Mb(i,e)?i:(t==null&&(t=$b(e)),rp.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),s&&(s.valid=!1),null)}function $b(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ft:return"integer";case Date:return"date";default:return yv(e.value)}case"array":return`array of ${$b(e.value)}`;case"one-of":{const t=e.values.map(i=>$b(i));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function Mb(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ft:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!Mb(i,t.value));case"one-of":return t.values.some(i=>Mb(e,i))}}function mv(e){return Rp(()=>e.forEach(t=>Y(t)&&t.remove()))}function Rp(e){return{remove:()=>{e&&(e(),e=void 0)}}}function cr(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function DL(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function Py(e,t,i){return i?Xm(e,t,{policy:i,path:""}):Xm(e,t,null)}function Xm(e,t,i){return t?Object.keys(t).reduce((s,l)=>{let d=null,y="merge";if(i&&(d=i.path?`${i.path}.${l}`:l,y=i.policy(d)),y==="replace")return s[l]=t[l],s;if(s[l]===void 0)return s[l]=ie(t[l]),s;let g=s[l],x=t[l];if(g===x)return s;if(Array.isArray(x)||Array.isArray(s))g=g?Array.isArray(g)?s[l]=g.concat():s[l]=[g]:s[l]=[],x&&(Array.isArray(x)||(x=[x]),x.forEach($=>{g.includes($)||g.push($)}));else if(x&&typeof x=="object")if(i){const $=i.path;i.path=d,s[l]=Xm(g,x,i),i.path=$}else s[l]=Xm(g,x,null);else s.hasOwnProperty(l)&&!t.hasOwnProperty(l)||(s[l]=x);return s},e||{}):e}function ZI(e){return Array.isArray(e)?e:e.split(".")}function Wx(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function zL(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...Wx(i));return t}return Wx(e)}function QI(e,t,i,s){const l=zL(t);if(l.length!==1){const d=l.map(y=>s(e,y,i));return mv(d)}return s(e,l[0],i)}function eT(e){let t=!1;return()=>{t||(t=!0,e())}}function tT(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const l=parseInt(i,10);if(!isNaN(l))return Array.isArray(t)?t[l]:t.getItemAt(l)}const s=cr(t);return DL(s,i)?s.get(i):t[i]}function iT(e,t,i){if(e==null)return e;const s=tT(t[i],e);return!s&&i<t.length-1?void 0:i===t.length-1?s:iT(s,t,i+1)}function Vf(e,t,i=0){return typeof t!="string"||t.includes(".")?iT(e,ZI(t),i):tT(t,e)}function Zm(e,t){return Vf(e,t)}function Jx(e,t){return Vf(t,e)!==void 0}class Kx{constructor(t){this.autoDestroy=!1,this.properties=t}}function Gf(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){const s=Object.create(t.properties),l=t.autoDestroy;for(const d in s)s[d]=ie(s[d]);t=new Kx(s),t.autoDestroy=l,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new Kx({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function VL(e){return Gf(e).properties}function gv(e,t){const i=VL(e);let s=i[t];return s||(s=i[t]={}),s}function GL(e,t){return Py(e,t,UL)}const qL=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function UL(e){return qL.test(e)?"replace":"merge"}function BL(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,s)=>{if(s==="")return"$";const l=Np(s,t),d=l==null?"":l;if(d===void 0)throw new Error(`could not find key "${s}" in template`);return d.toString()})}class vv{constructor(t,i,s){this.name=t,this.details=s,this.message=void 0,this instanceof vv&&(this.message=i&&BL(i,s)||"")}toString(){return"["+this.name+"]: "+this.message}}class te extends vv{constructor(t,i,s){if(super(t,i,s),!(this instanceof te))return new te(t,i,s)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return ie(i)}catch{return"[object]"}}))}}catch(t){throw Me.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new te(t.name,t.message,t.details)}}te.prototype.type="error";function Qm(e,t,i){if(e&&t)if(typeof t=="object")for(const s of Object.getOwnPropertyNames(t))Qm(e,s,t[s]);else{if(t.includes(".")){const l=t.split("."),d=l.splice(l.length-1,1)[0];return void Qm(Zm(e,l),d,i)}const s=e.__accessor__;s!=null&&HL(t,s),e[t]=i}}function HL(e,t){if(pe("esri-unknown-property-errors")&&!WL(e,t))throw new te("set:unknown-property",JL(e,t))}function WL(e,t){return t.metadatas[e]!=null}function JL(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}Me.getLogger("esri.core.accessorSupport.set");function _(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const s=Object.getOwnPropertyDescriptor(t,i),l=gv(t,i);s&&(s.get||s.set?(l.get=s.get||l.get,l.set=s.set||l.set):"value"in s&&("value"in e&&Me.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),l.value=e.value=s.value)),e.readOnly!=null&&(l.readOnly=e.readOnly);const d=e.aliasOf;if(d){const x=typeof d=="string"?d:d.source,$=typeof d=="string"?null:d.overridable===!0;let E;l.dependsOn=[x],l.get=function(){let O=Zm(this,x);if(typeof O=="function"){E||(E=x.split(".").slice(0,-1).join("."));const P=Zm(this,E);P&&(O=O.bind(P))}return O},l.readOnly||(l.set=$?function(O){O!==void 0?this._override(i,O):this._clearOverride(i)}:function(O){Qm(this,x,O)})}const y=e.type,g=e.types;l.cast||(y?l.cast=KL(y):g&&(Array.isArray(g)?l.cast=lf(yo(g[0])):l.cast=yo(g))),e.range&&(l.cast=YL(l.cast,e.range)),GL(l,e)}}function rT(e,t,i){const s=gv(e,i);s.json||(s.json={});let l=s.json;return t!==void 0&&(l.origins||(l.origins={}),l.origins[t]||(l.origins[t]={}),l=l.origins[t]),l}function KL(e){let t=0,i=e;if(LL(e))return XI(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const s=i;if(YI(s))return t===0?Sb(s):Ym(Sb(s),t);if(t===1)return RL(s);if(t>1)return jL(s,t);const l=e;return l.from?l.from:ni(l)}function YL(e,t){return i=>{let s=+e(i);return t.step!=null&&(s=Math.round(s/t.step)*t.step),t.min!=null&&(s=Math.max(t.min,s)),t.max!=null&&(s=Math.min(t.max,s)),s}}var co;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(co||(co={}));var kt;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(kt||(kt={}));let eg,jd=[];const XL=Me.getLogger("esri.core.Accessor");function it(e){eg!==void 0&&eg.onObservableAccessed(e)}let Ny=!1,Ry=!1;function la(e,t,i){if(Ny)return n4(e,t,i);sT(e);const s=t.call(i);return nT(),s}function ZL(e,t){return la(void 0,e,t)}function n4(e,t,i){const s=Ny;Ny=!0,sT(e);let l=null;try{l=t.call(i)}catch(d){Ry&&XL.error(d)}return nT(),Ny=s,l}function sT(e){eg=e,jd.push(e)}function nT(){const e=jd.pop();eg=jd.length>0?jd[jd.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function oT(e,t){if(t.flags&kt.DepTrackingInitialized)return;const i=Ry;Ry=!1,t.flags&kt.AutoTracked?n4(t,t.metadata.get,e):aT(e,t),Ry=i}const QL=[];function aT(e,t){t.flags&kt.ExplicitlyTracking||(t.flags|=kt.ExplicitlyTracking,n4(t,()=>{const i=t.metadata.dependsOn||QL;for(const s of i)if(typeof s!="string"||s.includes(".")){const l=ZI(s);for(let d=0,y=e;d<l.length&&y!=null&&typeof y=="object";++d)y=Yx(y,l[d],d!==l.length-1)}else Yx(e,s,!1)}),t.flags&=~kt.ExplicitlyTracking)}function Yx(e,t,i){var d;const s=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const y=parseInt(s,10);if(!isNaN(y))return Array.isArray(e)?e[y]:e.getItemAt(y)}const l=(d=cr(e))==null?void 0:d.properties.get(s);return l&&(it(l),oT(e,l)),i?e[s]:void 0}function eF(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const s in i)if(t[s]){const l=t[s];i[s].forEach(d=>{t[d]=l}),delete t[s]}}}class Er extends vv{constructor(t,i,s){if(super(t,i,s),!(this instanceof Er))return new Er(t,i,s)}}Er.prototype.type="warning";function lT(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Ib=Me.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Xx(e,t,i){var s,l;e&&(!i&&!t.read||((s=t.read)==null?void 0:s.reader)||((l=t.read)==null?void 0:l.enabled)===!1||rF(e)&&Xi("read.reader",jp(e),t))}function jp(e){var i,s,l;const t=(i=e.ndimArray)!=null?i:0;if(t>1)return iF(e);if(t===1)return Zx(e);if("type"in e&&hT(e.type)){const d=(l=(s=e.type.prototype)==null?void 0:s.itemType)==null?void 0:l.Type,y=Zx(typeof d=="function"?{type:d}:{types:d});return(g,x,$)=>{const E=y(g,x,$);return E&&new e.type(E)}}return o4(e)}function o4(e){return"type"in e?tF(e.type):sF(e.types)}function tF(e){return e.prototype.read?(t,i,s)=>{if(t==null)return t;const l=typeof t;if(l!=="object")return void Ib.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${l}'`);const d=new e;return d.read(t,s),d}:e.fromJSON}function uT(e,t,i,s){return s!==0&&Array.isArray(t)?t.map(l=>uT(e,l,i,s-1)):e(t,void 0,i)}function iF(e){var l;const t=o4(e),i=uT.bind(null,t),s=(l=e.ndimArray)!=null?l:0;return(d,y,g)=>{if(d==null)return d;d=i(d,g,s);let x=s,$=d;for(;x>0&&Array.isArray($);)x--,$=$[0];if($!==void 0)for(let E=0;E<x;E++)d=[d];return d}}function Zx(e){const t=o4(e);return(i,s,l)=>{if(i==null)return i;if(Array.isArray(i)){const y=[];for(const g of i){const x=t(g,void 0,l);x!==void 0&&y.push(x)}return y}const d=t(i,void 0,l);return d!==void 0?[d]:void 0}}function hT(e){if(!lT(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?a4(t.Type):cT(t.Type))}function rF(e){return"types"in e?cT(e.types):a4(e.type)}function a4(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||hT(e))}function cT(e){for(const t in e.typeMap)if(!a4(e.typeMap[t]))return!1;return!0}function sF(e){var s;let t=null;const i=(s=e.errorContext)!=null?s:"type";return(l,d,y)=>{if(l==null)return l;const g=typeof l;if(g!=="object")return void Ib.error(`Expected JSON value of type 'object' to deserialize, but got '${g}'`);t||(t=nF(e));const x=e.key;if(typeof x!="string")return;const $=l[x],E=$?t[$]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!E){const P=`Type '${$||"unknown"}' is not supported`;return y&&y.messages&&l&&y.messages.push(new Er(`${i}:unsupported`,P,{definition:l,context:y})),void Ib.error(P)}const O=new E;return O.read(l,y),O}}function nF(e){var i,s;const t={};for(const l in e.typeMap){const d=e.typeMap[l],y=Gf(d.prototype);if(typeof e.key=="function")continue;const g=y.properties[e.key];if(!g)continue;((i=g.json)==null?void 0:i.type)&&Array.isArray(g.json.type)&&g.json.type.length===1&&typeof g.json.type[0]=="string"&&(t[g.json.type[0]]=d);const x=(s=g.json)==null?void 0:s.write;if(!x||!x.writer){t[l]=d;continue}const $=x.target,E=typeof $=="string"?$:e.key,O={};x.writer(l,O,E),O[E]&&(t[O[E]]=d)}return t}function oF(e){if(e.json||(e.json={}),e7(e.json),t7(e.json),Qx(e.json),e.json.origins)for(const t in e.json.origins)e7(e.json.origins[t]),t7(e.json.origins[t]),Qx(e.json.origins[t]);return!0}function Qx(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function e7(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function t7(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const aF=Me.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function i7(e,t){var s;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(s=e==null?void 0:e.ndimArray)!=null?s:0;e&&(i===1||"type"in e&&lT(e.type))?t.write.writer=hF:i>1?t.write.writer=cF(i):t.types?Array.isArray(t.types)?t.write.writer=uF(t.types[0]):t.write.writer=lF(t.types):t.write.writer=uf}function lF(e){return(t,i,s,l)=>t?pT(t,e,l)?uf(t,i,s,l):void 0:uf(t,i,s,l)}function pT(e,t,i){var s,l;for(const d in t.typeMap)if(e instanceof t.typeMap[d])return!0;if(i!=null&&i.messages){const d=(s=t.errorContext)!=null?s:"type",y=`Values of type '${(l=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?l:"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new te(`${d}:unsupported`,y,{definition:e,context:i})),aF.error(y)}return!1}function uF(e){return(t,i,s,l)=>!t||!Array.isArray(t)?uf(t,i,s,l):uf(t.filter(d=>pT(d,e,l)),i,s,l)}function uf(e,t,i,s){Xi(i,tg(e,s),t)}function tg(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?ig(e):e}function ig(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function hF(e,t,i,s){let l;e===null?l=null:e&&typeof e.map=="function"?(l=e.map(d=>tg(d,s)),typeof l.toArray=="function"&&(l=l.toArray())):l=[tg(e,s)],Xi(i,l,t)}function dT(e,t,i){return i!==0&&Array.isArray(e)?e.map(s=>dT(s,t,i-1)):tg(e,t)}function cF(e){return(t,i,s,l)=>{let d;if(t===null)d=null;else{d=dT(t,l,e);let y=e,g=d;for(;y>0&&Array.isArray(g);)y--,g=g[0];if(g!==void 0)for(let x=0;x<y;x++)d=[d]}Xi(s,d,i)}}function Tb(e,t){return l4(e,"read",t)}function fT(e,t){return l4(e,"write",t)}function l4(e,t,i){let s=e&&e.json;if(e&&e.json&&e.json.origins&&i){const l=e.json.origins[i.origin];l&&(t==="any"||t in l)&&(s=l)}return s}function pF(e){const t=dF(e);if(e.json.origins)for(const i in e.json.origins){const s=e.json.origins[i],l=s.types?fF(s):t;Xx(l,s,!1),s.types&&!s.write&&e.json.write&&e.json.write.enabled&&(s.write={...e.json.write}),i7(l,s)}Xx(t,e.json,!0),i7(t,e.json)}function dF(e){return e.json.types?Eb(e.json):e.type?yT(e):Eb(e)}function fF(e){return e.type?yT(e):Eb(e)}function yT(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!YI(i);)i=i[0],t++;return{type:i,ndimArray:t}}function Eb(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function yF(e){oF(e)&&(eF(e),pF(e))}const N2=new Set,R2=new Set;function H(e){return t=>{t.prototype.declaredClass=e,gF(t);const i=[],s=[];let l=t.prototype;for(;l;)l.hasOwnProperty("initialize")&&!N2.has(l.initialize)&&(N2.add(l.initialize),i.push(l.initialize)),l.hasOwnProperty("destroy")&&!R2.has(l.destroy)&&(R2.add(l.destroy),s.push(l.destroy)),l=Object.getPrototypeOf(l);N2.clear(),R2.clear();class d extends t{constructor(...g){if(super(...g),this.constructor===d&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let x=i.length-1;x>=0;x--)i[x].call(this)}}),s.length){let x=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!x){x=!0;for(let $=0;$<s.length;$++)s[$].call(this)}}})}this.postscript(...g)}}}return d.__accessorMetadata__=Gf(t.prototype),d.prototype.declaredClass=e,d}}function mF(e,t){return t.get==null?function(){const i=this.__accessor__.properties.get(e);if(i===void 0)return;it(i);const s=this.__accessor__.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const i=this.__accessor__.properties.get(e);if(i!==void 0)return i.getComputed()}}function gF(e){const t=e.prototype,i=Gf(t).properties,s={};for(const l of Object.getOwnPropertyNames(i)){const d=i[l];yF(d),s[l]={enumerable:!0,configurable:!0,get:mF(l,d),set(y){const g=this.__accessor__;if(g!==void 0){if(!Object.isFrozen(this)){if(g.initialized&&d.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${l}' of ${this.declaredClass}`);if(g.lifecycle===co.CONSTRUCTED&&d.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${l}' of ${this.declaredClass}`);g.set(l,y)}}else Object.defineProperty(this,l,{enumerable:!0,configurable:!0,writable:!0,value:y})}}}Object.defineProperties(e.prototype,s)}function ade(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function lde(e,t){for(const i of e)if(i!=null&&t(i))return i}function Ab(e){return e!=null&&typeof e[Symbol.iterator]=="function"}function vF(e){return e&&e.release&&typeof e.release=="function"}function wF(e){return e&&e.acquire&&typeof e.acquire=="function"}class Pn{constructor(t,i,s,l=1,d=0){if(this.ctor=t,this.acquireFunction=i,this.releaseFunction=s,this.allocationSize=l,this._pool=new Array(d),this._initialSize=d,this.ctor)for(let y=0;y<d;y++)this._pool[y]=new this.ctor;this.allocationSize=Math.max(l,1)}destroy(){this.prune(0)}acquire(...t){let i;if(Pn.test.disabled)i=new this.ctor;else{if(this._pool.length===0){const s=this.allocationSize;for(let l=0;l<s;l++)this._pool[l]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...t):wF(i)&&i.acquire(...t),i}release(t){t&&!Pn.test.disabled&&(this.releaseFunction?this.releaseFunction(t):vF(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const s=this._pool[i];this._dispose(s)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}Pn.test={disabled:!1};var ct;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(ct||(ct={}));const kb=ct.USER+1;function vl(e){switch(e){case"defaults":return ct.DEFAULTS;case"service":return ct.SERVICE;case"portal-item":return ct.PORTAL_ITEM;case"web-scene":return ct.WEB_SCENE;case"web-map":return ct.WEB_MAP;case"user":return ct.USER}}function rg(e){switch(e){case ct.DEFAULTS:return"defaults";case ct.SERVICE:return"service";case ct.PORTAL_ITEM:return"portal-item";case ct.WEB_SCENE:return"web-scene";case ct.WEB_MAP:return"web-map";case ct.USER:return"user"}return void 0}function bF(e){return rg(e)}class mT{constructor(t,i){this._observers=t,this._observer=i}remove(){fL(this._observers,this._observer)}}class r7{constructor(t,i,s){this.properties=t,this.propertyName=i,this.metadata=s,this._observers=null,this._accessed=null,this._handles=null,this.flags=kt.Dirty|(s.nonNullable?kt.NonNullable:0)|(s.hasOwnProperty("value")?kt.HasDefaultValue:0)|(s.get===void 0?kt.DepTrackingInitialized:0)|(s.dependsOn===void 0?kt.AutoTracked:0)}destroy(){if(this.flags&kt.Dirty&&this._observers){const t=this._observers.slice();for(const i of t)i.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){it(this);const t=this.properties.store,i=this.propertyName,s=this.flags,l=t.get(i);if(s&kt.Computing||~s&kt.Dirty&&t.has(i))return l;this.flags|=kt.Computing;const d=this.properties.host;let y;s&kt.AutoTracked?y=la(this,this.metadata.get,d):(aT(d,this),y=this.metadata.get.call(d)),t.set(i,y,ct.COMPUTED);const g=t.get(i);return g===l?this.flags&=~kt.Dirty:ZL(this.commit,this),this.flags&=~kt.Computing,g}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=kt.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let i=this._handles;i===null&&(i=this._handles=[]);for(let s=0;s<t.length;++s)i.push(t[s].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new mT(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&kt.Overriden&&(this.flags|=kt.Dirty);const t=this._observers;if(t!==null)for(let i=0;i<t.length;++i)t[i].onInvalidated()}commit(){this.flags&=~kt.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let i=0;i<t.length;++i)t[i].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}}class u4{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new u4;return this._values.forEach((s,l)=>{t&&t.has(l)||i.set(l,ie(s))}),i}get(t){return this._values.get(t)}originOf(){return ct.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function S1(e,t,i){return e!==void 0}function s7(e,t,i,s){return e!==void 0&&(!(i==null&&e.flags&kt.NonNullable)||(s.lifecycle,co.INITIALIZING,!1))}function _F(e){return e&&typeof e.destroy=="function"}Me.getLogger("esri.core.accessorSupport.Properties");class xF{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=co.INITIALIZING,this.store=new u4,this._origin=ct.USER;const i=this.host.constructor.__accessorMetadata__,s=i.properties;for(const l in s){const d=new r7(this,l,s[l]);this.properties.set(l,d)}this.metadatas=s,this._autoDestroy=i.autoDestroy}initialize(){this.lifecycle=co.CONSTRUCTING}constructed(){this.lifecycle=co.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,i]of this.properties){const s=this.internalGet(t);s&&_F(s)&&(s.destroy(),~i.flags&kt.NonNullable&&this._internalSet(i,null)),i.destroy()}else for(const[t,i]of this.properties)i.destroy()}get initialized(){return this.lifecycle!==co.INITIALIZING}get(t){const i=this.properties.get(t);if(i.metadata.get)return i.getComputed();it(i);const s=this.store;return s.has(t)?s.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const s=this.properties.get(t);if(s!==void 0&&s.flags&kt.HasDefaultValue)return"defaults"}return rg(i)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const i=this.properties.get(t);if(S1(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const s=this.properties.get(t);S1(s)&&this._internalSet(s,i)}getDependsInfo(t,i,s){const l=this.properties.get(i);if(!S1(l))return"";const d=new Set,y=la({onObservableAccessed:x=>d.add(x),onTrackingEnd:()=>{}},()=>{var x;return(x=l.metadata.get)==null?void 0:x.call(t)});let g=`${s}${t.declaredClass.split(".").pop()}.${i}: ${y}
`;if(d.size===0)return g;s+="  ";for(const x of d){if(!(x instanceof r7))continue;const $=x.properties.host,E=x.propertyName,O=cr($);g+=O?O.getDependsInfo($,E,s):`${s}${E}: undefined
`}return g}setAtOrigin(t,i,s){const l=this.properties.get(t);if(S1(l))return this._setAtOrigin(l,i,s)}isOverridden(t){const i=this.properties.get(t);return i!==void 0&&!!(i.flags&kt.Overriden)}clearOverride(t){const i=this.properties.get(t);i!==void 0&&i.flags&kt.Overriden&&(i.flags&=~kt.Overriden,i.notifyChange())}override(t,i){const s=this.properties.get(t);if(!s7(s,t,i,this))return;const l=s.metadata.cast;if(l){const d=this._cast(l,i),{valid:y,value:g}=d;if(j2.release(d),!y)return;i=g}s.flags|=kt.Overriden,this._internalSet(s,i)}set(t,i){const s=this.properties.get(t);if(!s7(s,t,i,this))return;const l=s.metadata.cast;if(l){const y=this._cast(l,i),{valid:g,value:x}=y;if(j2.release(y),!g)return;i=x}const d=s.metadata.set;d?d.call(this.host,i):this._internalSet(s,i)}setDefaultOrigin(t){this._origin=vl(t)}getDefaultOrigin(){return rg(this._origin)}notifyChange(t){const i=this.properties.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.properties.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.properties.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const s=this.lifecycle!==co.INITIALIZING?this._origin:ct.DEFAULTS;this._setAtOrigin(t,i,s)}_setAtOrigin(t,i,s){const l=this.store,d=t.propertyName;l.has(d,s)&&t4(i,l.get(d))&&~t.flags&kt.Overriden&&s===l.originOf(d)||(t.invalidate(),l.set(d,i,s),t.commit(),oT(this.host,t))}_cast(t,i){const s=j2.acquire();return s.valid=!0,s.value=i,t&&(s.value=t.call(this.host,i,s)),s}}class SF{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const j2=new Pn(SF);function $F(e){e.length=0}class Sr{constructor(t=50,i=50){this._pool=new Pn(Array,void 0,$F,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return L2.acquire()}static release(t){return L2.release(t)}static prune(){L2.prune()}}const L2=new Sr(100);class gT extends Pn{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=uL(this._set)}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const $1=[];function sg(e){$1.push(e),$1.length===1&&queueMicrotask(()=>{const t=$1.slice();$1.length=0;for(const i of t)i()})}const MF=29;class R0{constructor(t,i=MF){this.name=t,this._counter=0,this._items=new Array(i)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,i)=>t-i)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,i)=>t+i,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var Ob;(function(e){const t=(d,y,g,x)=>{let $=y,E=y;const O=g>>>1,P=d[$-1];for(;E<=O;){E=$<<1,E<g&&x(d[E-1],d[E])<0&&++E;const R=d[E-1];if(x(R,P)<=0)break;d[$-1]=R,$=E}d[$-1]=P},i=(d,y)=>d<y?-1:d>y?1:0;function s(d,y,g,x){y===void 0&&(y=0),g===void 0&&(g=d.length),x===void 0&&(x=i);for(let E=g>>>1;E>y;E--)t(d,E,g,x);const $=y+1;for(let E=g-1;E>y;E--){const O=d[y];d[y]=d[E],d[E]=O,t(d,$,E,x)}}function*l(d,y,g,x){y===void 0&&(y=0),g===void 0&&(g=d.length),x===void 0&&(x=i);for(let E=g>>>1;E>y;E--)t(d,E,g,x),yield;const $=y+1;for(let E=g-1;E>y;E--){const O=d[y];d[y]=d[E],d[E]=O,t(d,$,E,x),yield}}e.sort=s,e.iterableSort=l})(Ob||(Ob={}));const n7=Ob,IF=1.5,TF=1.1;class lh{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new PI,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>o7(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let s=0;s<this._length;s++){const l=this.data[s];t(l)&&i.push(l)}return i}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,i){const s=this.data.indexOf(t,i);return s!==-1&&s<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let s=0;s<i;s++)this.data[this._length++]=t[s]}fill(t,i){for(let s=0;s<i;s++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,o7(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=RI(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){const i=jI(this.data,t,this.length,this._hint);return i!==void 0&&(this.length=this.length-1),this._shrink(),i}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,s){this.length=dL(this.data,t,this.length,i,this._hint,s),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){t>=this.length||i>=this.length||t===i||([this.data[t],this.data[i]]=[this.data[i],this.data[t]])}sort(t){n7.sort(this.data,0,this.length,t)}iterableSort(t){return n7.iterableSort(this.data,0,this.length,t)}some(t,i){for(let s=0;s<this.length;++s)if(t.call(i,this.data[s],s,this.data))return!0;return!1}filterInPlace(t,i){let s=0;for(let l=0;l<this._length;++l){const d=this.data[l];t.call(i,d,l,this.data)&&(this.data[l]=this.data[s],this.data[s]=d,s++)}if(this._deallocator)for(let l=s;l<this._length;l++)this.data[l]=this._deallocator(this.data[l]);return this._length=s,this._shrink(),this}forAll(t,i){const s=this.length,l=this.data;for(let d=0;d<s;++d)t.call(i,l[d],d,l)}forEach(t,i){for(let s=0;s<this.length;++s)t.call(i,this.data[s],s,this.data)}map(t,i){const s=new Array(this.length);for(let l=0;l<this.length;++l)s[l]=t.call(i,this.data[l],l,this.data);return s}reduce(t,i){let s=i;for(let l=0;l<this.length;++l)s=t(s,this.data[l],l,this.data);return s}has(t){const i=this.length,s=this.data;for(let l=0;l<i;++l)if(s[l]===t)return!0;return!1}}function o7(e){e.data.length>IF*e.length&&(e.data.length=Math.floor(e.length*TF))}function EF(e){return{setTimeout:(t,i)=>{const s=e.setTimeout(t,i);return{remove:()=>e.clearTimeout(s)}}}}const qf=EF(globalThis),a7=new Set;function AF(e,t,i=!1){i&&a7.has(t)||(i&&a7.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function kF(e,t,i={}){if(pe("esri-deprecation-warnings")){const{moduleName:s}=i;vT(e,`Property: ${(s?s+"::":"")+t}`,i)}}function vT(e,t,i={}){if(pe("esri-deprecation-warnings")){const{replacement:s,version:l,see:d,warnOnce:y}=i;let g=t;s&&(g+=`
	\u{1F6E0}\uFE0F Replacement: ${s}`),l&&(g+=`
	\u2699\uFE0F Version: ${l}`),d&&(g+=`
	\u{1F517} See ${d} for more details.`),AF(e,g,y)}}function wv(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function bv(e,t,i){if(!wv(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,i);if(Array.isArray(t)){const s=t.slice();for(const l of s)e.addEventListener(l,i);return{remove(){for(const l of s)e.removeEventListener(l,i)}}}return e.addEventListener(t,i),{remove(){e.removeEventListener(t,i)}}}function wT(e,t,i){if(!wv(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const s=bv(e,t,l=>{s.remove(),i.call(e,l)});return{remove(){s.remove()}}}const OF={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function ju({key:e}){return OF[e]||e}function pi(e="Aborted"){return new te("AbortError",e)}function bi(e,t="Aborted"){if(Nn(e))throw pi(t)}function _v(e){return Y(e)?"aborted"in e?e:e.signal:e}function Nn(e){const t=_v(e);return Y(t)&&t.aborted}function Uf(e){if(bs(e))throw e}function Cb(e){if(!bs(e))throw e}function Rn(e,t){const i=_v(e);if(!he(i)){if(!i.aborted)return wT(i,"abort",()=>t());t()}}function h4(e,t){const i=_v(e);if(!he(i))return bi(i),wT(i,"abort",()=>t(pi()))}function CF(e,t){const i=_v(t);return he(i)?e:new Promise((s,l)=>{let d=Rn(t,()=>l(pi()));const y=()=>d=ps(d);e.then(y,y),e.then(s,l)})}function bs(e){return e&&e.name==="AbortError"}async function Pb(e){try{return await e}catch(t){if(!bs(t))throw t}}function ua(){let e=null;const t=new Promise((i,s)=>{e={promise:void 0,resolve:i,reject:s}});return e.promise=t,e}async function qi(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),s=i.map(y=>e[y]),l=await qi(s),d={};return i.map((y,g)=>d[y]=l[g]),d}const t=e;return new Promise(i=>{const s=[];let l=t.length;l===0&&i(s),t.forEach(d=>{const y={promise:d||Promise.resolve(d)};s.push(y),y.promise.then(g=>{y.value=g}).catch(g=>{y.error=g}).then(()=>{--l,l===0&&i(s)})})})}async function PF(e){return(await qi(e)).filter(t=>!!t.value).map(t=>t.value)}function c4(e,t,i){const s=new AbortController;return Rn(i,()=>s.abort()),new Promise((l,d)=>{let y=setTimeout(()=>{y=0,l(t)},e);Rn(s,()=>{y&&(clearTimeout(y),d(pi()))})})}function fa(e){return e&&typeof e.then=="function"}function Nb(e){return fa(e)?e:Promise.resolve(e)}function xv(e,t=-1){let i,s,l,d,y=null;const g=(...x)=>{if(i){s=x,d&&d.reject(pi()),d=ua();const P=d.promise;if(y){const R=y;y=null,R.abort()}return P}if(l=d||ua(),d=null,t>0){const P=new AbortController;i=Nb(e(...x,P.signal));const R=i;c4(t).then(()=>{i===R&&(d?P.abort():y=P)})}else i=1,i=Nb(e(...x));const $=()=>{const P=s;s=l=i=y=null,P!=null&&g(...P)},E=i,O=l;return E.then($,$),E.then(O.resolve,O.reject),O.promise};return g}function NF(){let e,t;const i=new Promise((l,d)=>{e=l,t=d}),s=l=>{e(l)};return s.resolve=l=>e(l),s.reject=l=>t(l),s.timeout=(l,d)=>qf.setTimeout(()=>s.reject(d),l),s.promise=i,s}function bT(e,t){let i,s=new AbortController;const l=e(s.signal);let d={promise:l,finished:!1,abort:()=>{s&&(s.abort(),s=null)}};const y=()=>{d&&(d.finished=!0,d=null),Y(i)&&(i.remove(),i=null),s=null};return l.then(y,y),i=Rn(t,()=>{Y(d)&&d.abort()}),d}async function l7(e){await Promise.resolve(),bi(e)}function ude(e){return e}class RF{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class jF{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let Rb=0;const ud={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},jb=["prepare","preRender","render","postRender","update","finish"],Lb=[],mh=new lh;class LF{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const ng={frameTasks:mh,willDispatch:!1,clearFrameTasks:FF,dispatch:ST,executeFrameTasks:DF};function Lp(e){const t=new jF(e);return Lb.push(t),ng.willDispatch||(ng.willDispatch=!0,sg(ST)),t}function yp(e){const t=new RF(e);return mh.push(t),og==null&&(Rb=performance.now(),og=requestAnimationFrame(_T)),new LF(t)}let og=null;function FF(e=!1){mh.forAll(t=>{t.removed=!0}),e&&xT()}function _T(){const e=performance.now();og=null,og=mh.length>0?requestAnimationFrame(_T):null,ng.executeFrameTasks(e)}function DF(e){const t=e-Rb;Rb=e;const i=1e3/60,s=Math.max(0,t-i);for(let l=0;l<jb.length;l++){const d=performance.now(),y=jb[l];mh.forAll(g=>{var x;g.paused||g.removed||(l===0&&g.ticks++,g.phases[y]&&(ud.time=e,ud.deltaTime=g.ticks===0?0:t,ud.elapsedFrameTime=performance.now()-e,ud.frameDuration=i-s,(x=g.phases[y])==null||x.call(g,ud)))}),zF[l].record(performance.now()-d)}xT(),VF.record(performance.now()-e)}const M1=new lh;function xT(){mh.forAll(e=>{e.removed&&M1.push(e)}),mh.removeUnorderedMany(M1.data,M1.length),M1.clear()}function ST(){for(;Lb.length;){const e=Lb.shift();e.isActive&&e.callback()}ng.willDispatch=!1}function hde(e=1,t){const i=NF(),s=()=>{Nn(t)?i.reject(pi()):e===0?i():(--e,sg(()=>s()))};return s(),i.promise}const zF=jb.map(e=>new R0(e)),VF=new R0("total");function GF(e,t){for(const i of e.entries())if(t(i[0]))return!0;return!1}let qF=0;function j0(){return++qF}class Sv{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,i=this._accessed;for(let s=0;s<i.length;++s)t.push(i[s].observe(this));i.length=0}clear(){const t=this._handles;for(let i=0;i<t.length;++i)t[i].remove();t.length=0}}let sp=!1;const ag=[];function $T(e,t){let i=new Sv(d),s=null,l=!1;function d(){if(!i||l)return;if(sp)return void TT(d);const g=s;i.clear(),sp=!0,l=!0,s=la(i,e),l=!1,sp=!1,t(s,g),ET()}function y(){i&&(i.destroy(),i=null,s=null)}return l=!0,s=la(i,e),l=!1,{remove:y}}function MT(e,t){let i=new Sv(l),s=null;function l(){t(s,y)}function d(){i&&(i.destroy(),i=null),s=null}function y(){return i?(i.clear(),s=la(i,e),s):null}return y(),{remove:d}}function IT(e){let t=new Sv(s),i=!1;function s(){t&&!i&&(sp?TT(s):(t.clear(),sp=!0,i=!0,la(t,e),i=!1,sp=!1,ET()))}function l(){t&&(t.destroy(),t=null)}return i=!0,la(t,e),i=!1,{remove:l}}function TT(e){ag.includes(e)||ag.unshift(e)}function ET(){for(;ag.length;)ag.pop()()}var L0;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(L0||(L0={}));class hf{constructor(){this.uid=j0(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,s,l,d){return this.pool.acquire(L0.Untracked,t,i,s,l,d,t4)}static acquireTracked(t,i,s,l){return this.pool.acquire(L0.Tracked,t,i,s,null,null,l)}notify(t,i){this.type===L0.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i)}acquire(t,i,s,l,d,y,g){this.uid=j0(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=s,this.getValue=l,this.target=d,this.path=y,this.equals=g}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=j0(),this.removed=!0}}hf.pool=new gT(hf);const jy=new Sr,sa=new Set;let lg;function ug(e){sa.delete(e),sa.add(e),lg||(lg=Lp(HF))}function UF(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function BF(e){for(const t of sa.values())t.target===e&&(t.removed=!0)}function HF(){let e=10;for(;lg&&e--;){lg=null;const t=WF(),i=jy.acquire();for(const s of t){const l=s.uid;UF(s),l===s.uid&&s.removed&&i.push(s)}for(const s of sa)s.removed&&(i.push(s),sa.delete(s));for(const s of i)hf.pool.release(s);jy.release(i),jy.release(t),Fb.forEach(s=>s())}}function WF(){const e=jy.acquire();e.length=sa.size;let t=0;for(const i of sa)e[t]=i,++t;return sa.clear(),e}const Fb=new Set;function JF(e){return Fb.add(e),{remove(){Fb.delete(e)}}}function KF(e,t,i){let s=QI(e,t,i,(l,d,y)=>{let g,x,$=MT(()=>Vf(l,d),(E,O)=>{l.__accessor__.destroyed||g&&g.uid!==x?s.remove():(g||(g=hf.acquireUntracked(E,y,O,l,d),x=g.uid),ug(g))});return{remove:eT(()=>{$.remove(),g&&(g.uid!==x||g.removed||(g.removed=!0,ug(g)),g=null),s=$=null})}});return s}function YF(e,t,i){const s=QI(e,t,i,(l,d,y)=>{let g=!1;return $T(()=>Vf(l,d),(x,$)=>{l.__accessor__.destroyed?s.remove():g||(g=!0,t4($,x)||y.call(l,x,$,d,l),g=!1)})});return s}function XF(e,t,i,s=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:s?YF(e,t,i):KF(e,t,i)}function ZF(e,t,i){let s,l,d=MT(e,(y,g)=>{s&&s.uid!==l?d.remove():(s||(s=hf.acquireTracked(y,t,g,i),l=s.uid),ug(s))});return{remove:eT(()=>{d.remove(),s&&(s.uid!==l||s.removed||(s.removed=!0,ug(s)),s=null),d=null})}}function QF(e,t,i){let s=!1;return $T(e,(l,d)=>{s||(s=!0,i(d,l)||t(l,d),s=!1)})}function eD(e,t,i=!1,s=ML){return i?QF(e,t,s):ZF(e,t,s)}function u7(e){return GF(sa,t=>t.oldValue===e)}var AT;function tD(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return((t=e.constructor)==null?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Ld=Symbol("Accessor-Handles");class ze{constructor(...t){if(this[AT]=null,this.constructor===ze)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new xF(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:s,constructor:l}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const d=this;class y extends d{constructor(...x){super(...x),this.inherited=null,l&&l.apply(this,x)}}Gf(y.prototype);for(const g in t){const x=t[g];y.prototype[g]=typeof x=="function"?function(...$){const E=this.inherited;let O;this.inherited=function(...P){if(d.prototype[g])return d.prototype[g].apply(this,P)};try{O=x.apply(this,$)}catch(P){throw this.inherited=E,P}return this.inherited=E,O}:t[g]}for(const g in i){const x=tD(i[g]);_(x)(y.prototype,g)}return H(s)(y)}postscript(t){const i=this.__accessor__,s=i.ctorArgs||t;i.initialize(),s&&(this.set(s),i.ctorArgs=null),i.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(ho(this[Ld],t=>{t.forEach(i=>i.remove())}),this[Ld]=null,BF(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===co.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return Zm(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return Qm(this,t,i),this}watch(t,i,s){return XF(this,t,i,s)}own(t){let i=this[Ld];if(he(i)&&(i=this[Ld]=new Set),Ab(t))for(const s of t)i.add(s);else i.add(t)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,i){return this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}}AT=Ld;class p4{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new p4;return this._values.forEach((s,l)=>{t&&t.has(l)||i.set(l,ie(s.value),s.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const s=this._values.get(t);return i==null||(s==null?void 0:s.origin)===i?s==null?void 0:s.value:void 0}originOf(t){var i,s;return(s=(i=this._values.get(t))==null?void 0:i.origin)!=null?s:ct.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(s=>{var l;return((l=this._values.get(s))==null?void 0:l.origin)===t})}set(t,i,s){if((s=this._normalizeOrigin(s))===ct.DEFAULTS){const l=this._values.get(t);if(l&&l.origin!=null&&l.origin>s)return}this._values.set(t,new iD(i,s))}delete(t,i){var s;(i=this._normalizeOrigin(i))!=null&&((s=this._values.get(t))==null?void 0:s.origin)!==i||this._values.delete(t)}has(t,i){var s;return(i=this._normalizeOrigin(i))!=null?((s=this._values.get(t))==null?void 0:s.origin)===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},s)=>t(i,s))}_normalizeOrigin(t){if(t!=null)return t===ct.DEFAULTS?t:ct.USER}}class iD{constructor(t,i){this.value=t,this.origin=i}}function kT(e,t,i){t.keys().forEach(l=>{i.set(l,t.get(l),ct.DEFAULTS)});const s=e.metadatas;Object.keys(s).forEach(l=>{e.internalGet(l)&&i.set(l,e.internalGet(l),ct.DEFAULTS)})}function rD(e,t,i){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const s=e.read.source;if(typeof s=="string"){if(s===t||s.includes(".")&&s.indexOf(t)===0&&Jx(s,i))return!0}else for(const l of s)if(l===t||l.includes(".")&&l.indexOf(t)===0&&Jx(l,i))return!0;return!1}function sD(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function nD(e,t,i,s,l){let d=Tb(t[i],l);sD(d)&&(e[i]=!0);for(const y of Object.getOwnPropertyNames(t))d=Tb(t[y],l),rD(d,i,s)&&(e[y]=!0)}function oD(e,t,i,s){const l=i.metadatas,d=l4(l[t],"any",s),y=d&&d.default;if(y===void 0)return;const g=typeof y=="function"?y.call(e,t,s):y;g!==void 0&&i.set(t,g)}const OT={origin:"service"};function CT(e,t,i=OT){if(!t||typeof t!="object")return;const s=cr(e),l=s.metadatas,d={};for(const y of Object.getOwnPropertyNames(t))nD(d,l,y,t,i);s.setDefaultOrigin(i.origin);for(const y of Object.getOwnPropertyNames(d)){const g=Tb(l[y],i).read,x=g&&g.source;let $;$=x&&typeof x=="string"?Vf(t,x):t[y],g&&g.reader&&($=g.reader.call(e,$,t,i)),$!==void 0&&s.set(y,$)}if(!i||!i.ignoreDefaults){s.setDefaultOrigin("defaults");for(const y of Object.getOwnPropertyNames(l))d[y]||oD(e,y,s,i)}s.setDefaultOrigin("user")}function PT(e,t,i,s=OT){var d;const l={...s,messages:[]};i(l),(d=l.messages)==null||d.forEach(y=>{y.type!=="warning"||e.loaded?s&&s.messages&&s.messages.push(y):e.loadWarnings.push(y)})}const aD=Me.getLogger("esri.core.accessorSupport.write");function lD(e,t,i,s,l){var y,g;const d={};return(g=(y=t.write)==null?void 0:y.writer)==null||g.call(e,s,d,i,l),d}function NT(e,t,i,s,l,d){if(!s||!s.write)return!1;const y=e.get(i);if(!l&&s.write.overridePolicy){const g=s.write.overridePolicy.call(e,y,i,d);g!==void 0&&(l=g)}if(l||(l=s.write),!l||l.enabled===!1)return!1;if((y===null&&!l.allowNull&&!l.writerEnsuresNonNull||y===void 0)&&l.isRequired){const g=new te("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return g&&d&&d.messages?d.messages.push(g):g&&!d&&aD.error(g.name,g.message),!1}return!(y===void 0||y===null&&!l.allowNull&&!l.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(i)===ct.DEFAULTS)&&uD(e,i,d,s,y)||!l.ignoreOrigin&&d&&d.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<vl(d.origin))}function uD(e,t,i,s,l){const d=s.default;if(d===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(l);if(typeof d=="function"){if(Array.isArray(l)){const y=d.call(e,t,i);return e4(y,l)}return!1}return d===l}function hD(e,t,i,s){const l=cr(e),d=l.metadatas,y=fT(d[t],s);return!!y&&NT(e,l,t,y,i,s)}function RT(e,t,i){var d,y;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Py(t,e.toJSON(i));const s=cr(e),l=s.metadatas;for(const g in l){const x=fT(l[g],i);if(!NT(e,s,g,x,void 0,i))continue;const $=e.get(g),E=lD(e,x,x.write&&typeof x.write.target=="string"?x.write.target:g,$,i);Object.keys(E).length>0&&(t=Py(t,E),(y=(d=i==null?void 0:i.resources)==null?void 0:d.pendingOperations)!=null&&y.length&&Promise.all(i.resources.pendingOperations).then(()=>Py(t,E)),i&&i.writtenProperties&&i.writtenProperties.push({target:e,propName:g,oldOrigin:bF(s.store.originOf(g)),newOrigin:i.origin}))}return t}const Fp=e=>{let t=class extends e{constructor(...i){super(...i);const s=cr(this),l=s.store,d=new p4;s.store=d,kT(s,l,d)}read(i,s){CT(this,i,s)}write(i={},s){return RT(this,i,s)}toJSON(i){return this.write({},i)}static fromJSON(i,s){return cD.call(this,i,s)}};return t=v([H("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function cD(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}let ce=class extends Fp(ze){};ce=v([H("esri.core.JSONSupport")],ce);function $e(e,t,i){let s,l;return t===void 0||Array.isArray(t)?(l=e,i=t,s=[void 0]):(l=t,s=Array.isArray(e)?e:[e]),(d,y)=>{const g=d.constructor.prototype;s.forEach(x=>{const $=rT(d,x,l);$.read&&typeof $.read=="object"||($.read={}),$.read.reader=g[y],i&&($.read.source=($.read.source||[]).concat(i))})}}function Ee(e,t,i){let s,l;return t===void 0?(l=e,s=[void 0]):typeof t!="string"?(l=e,s=[void 0],i=t):(l=t,s=Array.isArray(e)?e:[e]),(d,y)=>{const g=d.constructor.prototype;for(const x of s){const $=rT(d,x,l);$.write&&typeof $.write=="object"||($.write={}),i&&($.write.target=i),$.write.writer=g[y]}}}var gh;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(gh||(gh={}));let I;const U={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(I=2e3;I<=2045;I++)U[I]=0;for(I=2056;I<=2065;I++)U[I]=0;for(I=2067;I<=2135;I++)U[I]=0;for(I=2137;I<=2154;I++)U[I]=0;for(I=2161;I<=2170;I++)U[I]=0;for(I=2172;I<=2193;I++)U[I]=0;for(I=2195;I<=2198;I++)U[I]=0;for(I=2200;I<=2203;I++)U[I]=0;for(I=2205;I<=2217;I++)U[I]=0;for(I=2222;I<=2224;I++)U[I]=1;for(I=2225;I<=2250;I++)U[I]=2;for(I=2251;I<=2253;I++)U[I]=1;for(I=2257;I<=2264;I++)U[I]=2;for(I=2274;I<=2279;I++)U[I]=2;for(I=2280;I<=2282;I++)U[I]=1;for(I=2283;I<=2289;I++)U[I]=2;for(I=2290;I<=2292;I++)U[I]=0;for(I=2308;I<=2313;I++)U[I]=0;for(I=2315;I<=2491;I++)U[I]=0;for(I=2494;I<=2866;I++)U[I]=0;for(I=2867;I<=2869;I++)U[I]=1;for(I=2870;I<=2888;I++)U[I]=2;for(I=2891;I<=2895;I++)U[I]=2;for(I=2896;I<=2898;I++)U[I]=1;for(I=2902;I<=2908;I++)U[I]=2;for(I=2915;I<=2920;I++)U[I]=2;for(I=2921;I<=2923;I++)U[I]=1;for(I=2924;I<=2930;I++)U[I]=2;for(I=2931;I<=2962;I++)U[I]=0;for(I=2964;I<=2968;I++)U[I]=2;for(I=2969;I<=2973;I++)U[I]=0;for(I=2975;I<=2991;I++)U[I]=0;for(I=2995;I<=3051;I++)U[I]=0;for(I=3054;I<=3079;I++)U[I]=0;for(I=3081;I<=3088;I++)U[I]=0;for(I=3092;I<=3101;I++)U[I]=0;for(I=3106;I<=3138;I++)U[I]=0;for(I=3146;I<=3151;I++)U[I]=0;for(I=3153;I<=3166;I++)U[I]=0;for(I=3168;I<=3172;I++)U[I]=0;for(I=3174;I<=3203;I++)U[I]=0;for(I=3294;I<=3358;I++)U[I]=0;for(I=3367;I<=3403;I++)U[I]=0;for(I=3408;I<=3416;I++)U[I]=0;for(I=3417;I<=3438;I++)U[I]=2;for(I=3441;I<=3446;I++)U[I]=2;for(I=3447;I<=3450;I++)U[I]=0;for(I=3451;I<=3459;I++)U[I]=2;for(I=3460;I<=3478;I++)U[I]=0;for(I=3554;I<=3559;I++)U[I]=0;for(I=3560;I<=3570;I++)U[I]=2;for(I=3571;I<=3581;I++)U[I]=0;for(I=3594;I<=3597;I++)U[I]=0;for(I=3601;I<=3604;I++)U[I]=0;for(I=3637;I<=3639;I++)U[I]=0;for(I=3665;I<=3667;I++)U[I]=0;for(I=3693;I<=3695;I++)U[I]=0;for(I=3701;I<=3727;I++)U[I]=0;for(I=3728;I<=3739;I++)U[I]=2;for(I=3740;I<=3751;I++)U[I]=0;for(I=3753;I<=3760;I++)U[I]=2;for(I=3761;I<=3773;I++)U[I]=0;for(I=3775;I<=3777;I++)U[I]=0;for(I=3779;I<=3781;I++)U[I]=0;for(I=3783;I<=3785;I++)U[I]=0;for(I=3788;I<=3791;I++)U[I]=0;for(I=3797;I<=3802;I++)U[I]=0;for(I=3814;I<=3816;I++)U[I]=0;for(I=3825;I<=3829;I++)U[I]=0;for(I=3832;I<=3841;I++)U[I]=0;for(I=3844;I<=3852;I++)U[I]=0;for(I=3873;I<=3885;I++)U[I]=0;for(I=3890;I<=3893;I++)U[I]=0;for(I=3907;I<=3912;I++)U[I]=0;for(I=3942;I<=3950;I++)U[I]=0;for(I=3968;I<=3970;I++)U[I]=0;for(I=3973;I<=3976;I++)U[I]=0;for(I=3986;I<=3989;I++)U[I]=0;for(I=3994;I<=3997;I++)U[I]=0;for(I=4048;I<=4051;I++)U[I]=0;for(I=4056;I<=4063;I++)U[I]=0;for(I=4093;I<=4096;I++)U[I]=0;for(I=4390;I<=4398;I++)U[I]=0;for(I=4399;I<=4413;I++)U[I]=2;for(I=4418;I<=4433;I++)U[I]=2;for(I=4455;I<=4457;I++)U[I]=2;for(I=4484;I<=4489;I++)U[I]=0;for(I=4491;I<=4554;I++)U[I]=0;for(I=4568;I<=4589;I++)U[I]=0;for(I=4652;I<=4656;I++)U[I]=0;for(I=4766;I<=4800;I++)U[I]=0;for(I=5014;I<=5016;I++)U[I]=0;for(I=5069;I<=5072;I++)U[I]=0;for(I=5105;I<=5130;I++)U[I]=0;for(I=5173;I<=5188;I++)U[I]=0;for(I=5253;I<=5259;I++)U[I]=0;for(I=5269;I<=5275;I++)U[I]=0;for(I=5292;I<=5311;I++)U[I]=0;for(I=5329;I<=5331;I++)U[I]=0;for(I=5343;I<=5349;I++)U[I]=0;for(I=5355;I<=5357;I++)U[I]=0;for(I=5387;I<=5389;I++)U[I]=0;for(I=5459;I<=5463;I++)U[I]=0;for(I=5479;I<=5482;I++)U[I]=0;for(I=5518;I<=5520;I++)U[I]=0;for(I=5530;I<=5539;I++)U[I]=0;for(I=5550;I<=5552;I++)U[I]=0;for(I=5562;I<=5583;I++)U[I]=0;for(I=5623;I<=5625;I++)U[I]=2;for(I=5631;I<=5639;I++)U[I]=0;for(I=5649;I<=5653;I++)U[I]=0;for(I=5663;I<=5680;I++)U[I]=0;for(I=5682;I<=5685;I++)U[I]=0;for(I=5875;I<=5877;I++)U[I]=0;for(I=5896;I<=5899;I++)U[I]=0;for(I=5921;I<=5940;I++)U[I]=0;for(I=6050;I<=6125;I++)U[I]=0;for(I=6244;I<=6275;I++)U[I]=0;for(I=6328;I<=6348;I++)U[I]=0;for(I=6350;I<=6356;I++)U[I]=0;for(I=6366;I<=6372;I++)U[I]=0;for(I=6381;I<=6387;I++)U[I]=0;for(I=6393;I<=6404;I++)U[I]=0;for(I=6480;I<=6483;I++)U[I]=0;for(I=6511;I<=6514;I++)U[I]=0;for(I=6579;I<=6581;I++)U[I]=0;for(I=6619;I<=6624;I++)U[I]=0;for(I=6625;I<=6627;I++)U[I]=2;for(I=6628;I<=6632;I++)U[I]=0;for(I=6634;I<=6637;I++)U[I]=0;for(I=6669;I<=6692;I++)U[I]=0;for(I=6707;I<=6709;I++)U[I]=0;for(I=6720;I<=6723;I++)U[I]=0;for(I=6732;I<=6738;I++)U[I]=0;for(I=6931;I<=6933;I++)U[I]=0;for(I=6956;I<=6959;I++)U[I]=0;for(I=7005;I<=7007;I++)U[I]=0;for(I=7057;I<=7070;I++)U[I]=2;for(I=7074;I<=7082;I++)U[I]=0;for(I=7109;I<=7118;I++)U[I]=0;for(I=7119;I<=7127;I++)U[I]=1;for(I=7374;I<=7376;I++)U[I]=0;for(I=7528;I<=7586;I++)U[I]=0;for(I=7587;I<=7645;I++)U[I]=2;for(I=7692;I<=7696;I++)U[I]=0;for(I=7755;I<=7787;I++)U[I]=0;for(I=7791;I<=7795;I++)U[I]=0;for(I=7799;I<=7801;I++)U[I]=0;for(I=7803;I<=7805;I++)U[I]=0;for(I=7825;I<=7831;I++)U[I]=0;for(I=7845;I<=7859;I++)U[I]=0;for(I=8013;I<=8032;I++)U[I]=0;for(I=8065;I<=8068;I++)U[I]=1;for(I=8518;I<=8529;I++)U[I]=2;for(I=8533;I<=8536;I++)U[I]=2;for(I=8538;I<=8540;I++)U[I]=2;for(I=8677;I<=8679;I++)U[I]=0;for(I=8836;I<=8840;I++)U[I]=0;for(I=8857;I<=8859;I++)U[I]=0;for(I=8908;I<=8910;I++)U[I]=0;for(I=9154;I<=9159;I++)U[I]=0;for(I=9205;I<=9218;I++)U[I]=0;for(I=9271;I<=9273;I++)U[I]=0;for(I=9295;I<=9297;I++)U[I]=0;for(I=9356;I<=9360;I++)U[I]=0;for(I=9404;I<=9407;I++)U[I]=0;for(I=9476;I<=9482;I++)U[I]=0;for(I=9487;I<=9494;I++)U[I]=0;for(I=9697;I<=9699;I++)U[I]=0;for(I=20002;I<=20032;I++)U[I]=0;for(I=20062;I<=20092;I++)U[I]=0;for(I=20135;I<=20138;I++)U[I]=0;for(I=20248;I<=20258;I++)U[I]=0;for(I=20348;I<=20358;I++)U[I]=0;for(I=20436;I<=20440;I++)U[I]=0;for(I=20822;I<=20824;I++)U[I]=0;for(I=20904;I<=20932;I++)U[I]=0;for(I=20934;I<=20936;I++)U[I]=0;for(I=21004;I<=21032;I++)U[I]=0;for(I=21035;I<=21037;I++)U[I]=0;for(I=21095;I<=21097;I++)U[I]=0;for(I=21148;I<=21150;I++)U[I]=0;for(I=21207;I<=21264;I++)U[I]=0;for(I=21307;I<=21364;I++)U[I]=0;for(I=21413;I<=21423;I++)U[I]=0;for(I=21453;I<=21463;I++)U[I]=0;for(I=21473;I<=21483;I++)U[I]=0;for(I=21780;I<=21782;I++)U[I]=0;for(I=21891;I<=21894;I++)U[I]=0;for(I=21896;I<=21899;I++)U[I]=0;for(I=22171;I<=22177;I++)U[I]=0;for(I=22181;I<=22187;I++)U[I]=0;for(I=22191;I<=22197;I++)U[I]=0;for(I=22234;I<=22236;I++)U[I]=0;for(I=22521;I<=22525;I++)U[I]=0;for(I=22991;I<=22994;I++)U[I]=0;for(I=23028;I<=23038;I++)U[I]=0;for(I=23830;I<=23853;I++)U[I]=0;for(I=23866;I<=23872;I++)U[I]=0;for(I=23877;I<=23884;I++)U[I]=0;for(I=23886;I<=23894;I++)U[I]=0;for(I=23946;I<=23948;I++)U[I]=0;for(I=24311;I<=24313;I++)U[I]=0;for(I=24342;I<=24347;I++)U[I]=0;for(I=24370;I<=24374;I++)U[I]=10;for(I=24375;I<=24381;I++)U[I]=0;for(I=24718;I<=24721;I++)U[I]=0;for(I=24817;I<=24821;I++)U[I]=0;for(I=24877;I<=24882;I++)U[I]=0;for(I=24891;I<=24893;I++)U[I]=0;for(I=25391;I<=25395;I++)U[I]=0;for(I=25828;I<=25838;I++)U[I]=0;for(I=26191;I<=26195;I++)U[I]=0;for(I=26391;I<=26393;I++)U[I]=0;for(I=26701;I<=26722;I++)U[I]=0;for(I=26729;I<=26799;I++)U[I]=2;for(I=26801;I<=26803;I++)U[I]=2;for(I=26811;I<=26813;I++)U[I]=2;for(I=26847;I<=26870;I++)U[I]=2;for(I=26891;I<=26899;I++)U[I]=0;for(I=26901;I<=26923;I++)U[I]=0;for(I=26929;I<=26946;I++)U[I]=0;for(I=26948;I<=26998;I++)U[I]=0;for(I=27037;I<=27040;I++)U[I]=0;for(I=27205;I<=27232;I++)U[I]=0;for(I=27258;I<=27260;I++)U[I]=0;for(I=27391;I<=27398;I++)U[I]=0;for(I=27561;I<=27564;I++)U[I]=0;for(I=27571;I<=27574;I++)U[I]=0;for(I=27581;I<=27584;I++)U[I]=0;for(I=27591;I<=27594;I++)U[I]=0;for(I=28191;I<=28193;I++)U[I]=0;for(I=28348;I<=28358;I++)U[I]=0;for(I=28402;I<=28432;I++)U[I]=0;for(I=28462;I<=28492;I++)U[I]=0;for(I=29118;I<=29122;I++)U[I]=0;for(I=29168;I<=29172;I++)U[I]=0;for(I=29177;I<=29185;I++)U[I]=0;for(I=29187;I<=29195;I++)U[I]=0;for(I=29900;I<=29903;I++)U[I]=0;for(I=30161;I<=30179;I++)U[I]=0;for(I=30491;I<=30494;I++)U[I]=0;for(I=30729;I<=30732;I++)U[I]=0;for(I=31251;I<=31259;I++)U[I]=0;for(I=31265;I<=31268;I++)U[I]=0;for(I=31275;I<=31279;I++)U[I]=0;for(I=31281;I<=31297;I++)U[I]=0;for(I=31461;I<=31469;I++)U[I]=0;for(I=31491;I<=31495;I++)U[I]=0;for(I=31917;I<=31922;I++)U[I]=0;for(I=31965;I<=32e3;I++)U[I]=0;for(I=32001;I<=32003;I++)U[I]=2;for(I=32005;I<=32031;I++)U[I]=2;for(I=32033;I<=32060;I++)U[I]=2;for(I=32064;I<=32067;I++)U[I]=2;for(I=32074;I<=32077;I++)U[I]=2;for(I=32081;I<=32086;I++)U[I]=0;for(I=32107;I<=32130;I++)U[I]=0;for(I=32133;I<=32158;I++)U[I]=0;for(I=32164;I<=32167;I++)U[I]=2;for(I=32180;I<=32199;I++)U[I]=0;for(I=32201;I<=32260;I++)U[I]=0;for(I=32301;I<=32360;I++)U[I]=0;for(I=32601;I<=32662;I++)U[I]=0;for(I=32664;I<=32667;I++)U[I]=2;for(I=32701;I<=32761;I++)U[I]=0;for(I=53001;I<=53004;I++)U[I]=0;for(I=53008;I<=53019;I++)U[I]=0;for(I=53021;I<=53032;I++)U[I]=0;for(I=53034;I<=53037;I++)U[I]=0;for(I=53042;I<=53046;I++)U[I]=0;for(I=53074;I<=53080;I++)U[I]=0;for(I=54001;I<=54004;I++)U[I]=0;for(I=54008;I<=54019;I++)U[I]=0;for(I=54021;I<=54032;I++)U[I]=0;for(I=54034;I<=54037;I++)U[I]=0;for(I=54042;I<=54046;I++)U[I]=0;for(I=54048;I<=54053;I++)U[I]=0;for(I=54074;I<=54080;I++)U[I]=0;for(I=54098;I<=54101;I++)U[I]=0;for(I=102001;I<=102040;I++)U[I]=0;for(I=102042;I<=102063;I++)U[I]=0;for(I=102065;I<=102067;I++)U[I]=0;for(I=102070;I<=102117;I++)U[I]=0;for(I=102122;I<=102216;I++)U[I]=0;for(I=102221;I<=102377;I++)U[I]=0;for(I=102382;I<=102388;I++)U[I]=0;for(I=102389;I<=102398;I++)U[I]=2;for(I=102399;I<=102444;I++)U[I]=0;for(I=102445;I<=102447;I++)U[I]=2;for(I=102448;I<=102458;I++)U[I]=0;for(I=102459;I<=102468;I++)U[I]=2;for(I=102469;I<=102499;I++)U[I]=0;for(I=102500;I<=102519;I++)U[I]=1;for(I=102520;I<=102524;I++)U[I]=0;for(I=102525;I<=102529;I++)U[I]=2;for(I=102530;I<=102588;I++)U[I]=0;for(I=102590;I<=102598;I++)U[I]=0;for(I=102601;I<=102603;I++)U[I]=0;for(I=102605;I<=102628;I++)U[I]=0;for(I=102629;I<=102646;I++)U[I]=2;for(I=102648;I<=102700;I++)U[I]=2;for(I=102701;I<=102703;I++)U[I]=0;for(I=102707;I<=102730;I++)U[I]=2;for(I=102733;I<=102758;I++)U[I]=2;for(I=102767;I<=102900;I++)U[I]=0;for(I=102901;I<=102933;I++)U[I]=2;for(I=102934;I<=102950;I++)U[I]=13;for(I=102951;I<=102955;I++)U[I]=0;for(I=102961;I<=102963;I++)U[I]=0;for(I=102965;I<=102969;I++)U[I]=0;for(I=102971;I<=102973;I++)U[I]=0;for(I=102975;I<=102989;I++)U[I]=0;for(I=102990;I<=102992;I++)U[I]=1;for(I=102997;I<=103002;I++)U[I]=0;for(I=103003;I<=103008;I++)U[I]=2;for(I=103009;I<=103011;I++)U[I]=0;for(I=103012;I<=103014;I++)U[I]=2;for(I=103019;I<=103021;I++)U[I]=0;for(I=103022;I<=103024;I++)U[I]=2;for(I=103029;I<=103031;I++)U[I]=0;for(I=103032;I<=103034;I++)U[I]=2;for(I=103065;I<=103068;I++)U[I]=0;for(I=103074;I<=103076;I++)U[I]=0;for(I=103077;I<=103079;I++)U[I]=1;for(I=103080;I<=103082;I++)U[I]=0;for(I=103083;I<=103085;I++)U[I]=2;for(I=103090;I<=103093;I++)U[I]=0;for(I=103097;I<=103099;I++)U[I]=0;for(I=103100;I<=103102;I++)U[I]=2;for(I=103107;I<=103109;I++)U[I]=0;for(I=103110;I<=103112;I++)U[I]=2;for(I=103113;I<=103116;I++)U[I]=0;for(I=103117;I<=103120;I++)U[I]=2;for(I=103153;I<=103157;I++)U[I]=0;for(I=103158;I<=103162;I++)U[I]=2;for(I=103163;I<=103165;I++)U[I]=0;for(I=103166;I<=103168;I++)U[I]=1;for(I=103169;I<=103171;I++)U[I]=2;for(I=103186;I<=103188;I++)U[I]=0;for(I=103189;I<=103191;I++)U[I]=2;for(I=103192;I<=103195;I++)U[I]=0;for(I=103196;I<=103199;I++)U[I]=2;for(I=103200;I<=103224;I++)U[I]=0;for(I=103225;I<=103227;I++)U[I]=1;for(I=103232;I<=103237;I++)U[I]=0;for(I=103238;I<=103243;I++)U[I]=2;for(I=103244;I<=103246;I++)U[I]=0;for(I=103247;I<=103249;I++)U[I]=2;for(I=103254;I<=103256;I++)U[I]=0;for(I=103257;I<=103259;I++)U[I]=2;for(I=103264;I<=103266;I++)U[I]=0;for(I=103267;I<=103269;I++)U[I]=2;for(I=103300;I<=103375;I++)U[I]=0;for(I=103381;I<=103383;I++)U[I]=0;for(I=103384;I<=103386;I++)U[I]=1;for(I=103387;I<=103389;I++)U[I]=0;for(I=103390;I<=103392;I++)U[I]=2;for(I=103397;I<=103399;I++)U[I]=0;for(I=103400;I<=103471;I++)U[I]=2;for(I=103476;I<=103478;I++)U[I]=0;for(I=103479;I<=103481;I++)U[I]=2;for(I=103486;I<=103488;I++)U[I]=0;for(I=103489;I<=103491;I++)U[I]=2;for(I=103492;I<=103495;I++)U[I]=0;for(I=103496;I<=103499;I++)U[I]=2;for(I=103528;I<=103543;I++)U[I]=0;for(I=103544;I<=103548;I++)U[I]=2;for(I=103549;I<=103551;I++)U[I]=0;for(I=103552;I<=103554;I++)U[I]=1;for(I=103555;I<=103557;I++)U[I]=2;for(I=103558;I<=103560;I++)U[I]=0;for(I=103571;I<=103573;I++)U[I]=0;for(I=103574;I<=103576;I++)U[I]=2;for(I=103577;I<=103580;I++)U[I]=0;for(I=103581;I<=103583;I++)U[I]=2;for(I=103595;I<=103694;I++)U[I]=0;for(I=103696;I<=103699;I++)U[I]=0;for(I=103700;I<=103793;I++)U[I]=2;for(I=103794;I<=103887;I++)U[I]=0;for(I=103900;I<=103971;I++)U[I]=2;const pD={102113:!0,102100:!0,3857:!0,3785:!0},dD={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},h7='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',I1=[-20037508342788905e-9,20037508342788905e-9],T1=[-20037508342787e-6,20037508342787e-6],jT={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:I1,origin:T1,dx:1e-5},102100:{wkTemplate:h7,valid:I1,origin:T1,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:I1,origin:T1,dx:1e-5},3857:{wkTemplate:h7,valid:I1,origin:T1,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function dr(e,t){return!he(e)&&!he(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||vh(e)&&vh(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function An(e){return pr(e)&&e.wkid&&jT[e.wkid]||null}function LT(e){return!!pr(e)&&(e.wkid?U[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function fD(e){return!($v(e)||Mv(e))}function cf(e){return pr(e)&&e.wkid===4326}function cde(e){return pr(e)&&e.wkid===gh.CGCS2000}function vh(e){return pr(e)&&e.wkid!=null&&pD[e.wkid]===!0}function yD(e){return pr(e)&&e.wkid===32662}function d4(e){return e===gh.GCSMARS2000||e===gh.GCSMARS2000_SPHERE}function $v(e){return pr(e)&&e.wkid!=null&&d4(e.wkid)}function f4(e){return e===gh.GCSMOON2000}function Mv(e){return pr(e)&&e.wkid!=null&&f4(e.wkid)}function mD(e){return pr(e)&&e.wkid!=null&&dD[e.wkid]===!0}function pr(e){return Y(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const gD={wkid:4326,wkt:fo(jT[4326].wkTemplate,{Central_Meridian:"0.0"})},vD={wkid:102100,latestWkid:3857},wD={wkid:32662};var Gn;let Nt=Gn=class extends ce{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Gn.WebMercator;if(e.wkid===4326)return Gn.WGS84}const t=new Gn;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return cf(this)}get isWebMercator(){return vh(this)}get isGeographic(){return LT(this)}get isWrappable(){return mD(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Gn.WGS84)return Gn.WGS84;if(this===Gn.WebMercator)return Gn.WebMercator;const e=new Gn;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=ie(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:s}=e.imageCoordinateSystem,l=this.imageCoordinateSystem;return t==null||s?JSON.stringify(l)===JSON.stringify(e.imageCoordinateSystem):i?l.id===t&&l.referenceServiceName===i:l.id===t}return dr(this,e)}toJSON(e){return this.write(void 0,e)}};Nt.GCS_NAD_1927=null,Nt.WGS84=null,Nt.WebMercator=null,Nt.PlateCarree=null,v([_({readOnly:!0})],Nt.prototype,"isWGS84",null),v([_({readOnly:!0})],Nt.prototype,"isWebMercator",null),v([_({readOnly:!0})],Nt.prototype,"isGeographic",null),v([_({readOnly:!0})],Nt.prototype,"isWrappable",null),v([_({type:Ft,json:{write:!0}})],Nt.prototype,"latestWkid",void 0),v([_({type:Ft,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Nt.prototype,"wkid",void 0),v([_({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Nt.prototype,"wkt",void 0),v([Ee("wkt"),Ee("web-scene","wkt")],Nt.prototype,"writeWkt",null),v([_({type:Ft,json:{write:!0}})],Nt.prototype,"vcsWkid",void 0),v([_({type:Ft,json:{write:!0}})],Nt.prototype,"latestVcsWkid",void 0),v([_()],Nt.prototype,"imageCoordinateSystem",void 0),Nt=Gn=v([H("esri.geometry.SpatialReference")],Nt),Nt.prototype.toJSON.isDefaultToJSON=!0,Nt.GCS_NAD_1927=new Nt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Nt.WGS84=new Nt(gD),Nt.WebMercator=new Nt(vD),Nt.PlateCarree=new Nt(wD),Object.freeze&&(Object.freeze(Nt.GCS_NAD_1927),Object.freeze(Nt.WGS84),Object.freeze(Nt.WebMercator));const Ye=Nt;let qn=class extends ce{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ye.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof Ye)return e;if(e!=null){const i=new Ye;return i.read(e,t),i}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};v([_()],qn.prototype,"type",void 0),v([_({readOnly:!0})],qn.prototype,"cache",null),v([_({readOnly:!0})],qn.prototype,"extent",null),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qn.prototype,"hasM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qn.prototype,"hasZ",void 0),v([_({type:Ye,json:{write:!0}})],qn.prototype,"spatialReference",void 0),v([$e("spatialReference")],qn.prototype,"readSpatialReference",null),qn=v([H("esri.geometry.Geometry")],qn);const Jr=qn,bD=Object.prototype.toString;function _D(e){const t="__accessorMetadata__"in e?ni(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return xD.apply(this,i)}}function xD(e,t,i,s){gv(e,t).cast=s}function SD(e){return(t,i)=>{gv(t,e).cast=t[i]}}function mt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&bD.call(e[0])==="[object Function]"?_D(e[0]):e.length===1&&typeof e[0]=="string"?SD(e[0]):void 0}function $D(e,t,i,s){var l;return e.x=e.x+t,e.y=e.y+i,s!=null&&(e.z=((l=e.z)!=null?l:0)+s),e}function MD(e,t){const i=e.x-t.x,s=e.y-t.y,l=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(i*i+s*s+l*l)}class y4{constructor(t,i,s,l){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=s;const d=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*d,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=l||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const Ut=new y4(6378137,1/298.257223563,3e5,.006694379990137799),na=new y4(3396190,1/169.8944472236118,23e4),Ol=new y4(1737400,0,0),ID=57.29577951308232,TD=.017453292519943;function c7(e){return e*ID}function p7(e){return e*TD}function pde(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Ut.radius))}function Db(e){return e.wkid!=null||e.wkt!=null}const F2=[0,0];function hg(e,t,i,s,l){const d=e,y=l;if(y.spatialReference=i,"x"in d&&"x"in y)[y.x,y.y]=t(d.x,d.y,F2,s);else if("xmin"in d&&"xmin"in y)[y.xmin,y.ymin]=t(d.xmin,d.ymin,F2,s),[y.xmax,y.ymax]=t(d.xmax,d.ymax,F2,s);else if("paths"in d&&"paths"in y||"rings"in d&&"rings"in y){const g="paths"in d?d.paths:d.rings,x=[];let $;for(let E=0;E<g.length;E++){const O=g[E];$=[],x.push($);for(let P=0;P<O.length;P++)$.push(t(O[P][0],O[P][1],[0,0],s)),O[P].length>2&&$[P].push(O[P][2]),O[P].length>3&&$[P].push(O[P][3])}"paths"in y?y.paths=x:y.rings=x}else if("points"in d&&"points"in y){const g=d.points,x=[];for(let $=0;$<g.length;$++)x[$]=t(g[$][0],g[$][1],[0,0],s),g[$].length>2&&x[$].push(g[$][2]),g[$].length>3&&x[$].push(g[$][3]);y.points=x}return l}function Ly(e,t){const i=e&&(Db(e)?e:e.spatialReference),s=t&&(Db(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!s)&&(!!dr(s,i)||vh(s)&&cf(i)||vh(i)&&cf(s))}function Iv(e,t){if(he(e))return null;const i=e.spatialReference,s=t&&(Db(t)?t:t.spatialReference);return Ly(i,s)?dr(i,s)?ie(e):vh(s)?hg(e,Jc,Ye.WebMercator,!1,ie(e)):cf(s)?hg(e,F0,Ye.WGS84,!1,ie(e)):null:null}function Jc(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const s=p7(t);return i[0]=p7(e)*Ut.radius,i[1]=Ut.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),i}function F0(e,t,i=[0,0],s=!1){const l=c7(e/Ut.radius);return i[0]=s?l:l-360*Math.floor((l+180)/360),i[1]=c7(Math.PI/2-2*Math.atan(Math.exp(-t/Ut.radius))),i}function oa(e,t=!1,i=ie(e)){return hg(e,Jc,Ye.WebMercator,t,i)}function Wu(e,t=!1,i=ie(e)){return hg(e,F0,Ye.WGS84,t,i)}var Fy;const hd=[0,0];function d7(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const E1=Me.getLogger("esri.geometry.Point");let mr=Fy=class extends Jr{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(i)?i:i.clone())}normalizeCtorArgs(e,t,i,s,l){let d;if(Array.isArray(e))d=e,l=t,e=d[0],t=d[1],i=d[2],s=d[3];else if(e&&typeof e=="object"){if(d=e,e=d.x!=null?d.x:d.longitude,t=d.y!=null?d.y:d.latitude,i=d.z,s=d.m,(l=d.spatialReference)&&l.declaredClass!=="esri.geometry.SpatialReference"&&(l=new Ye(l)),d.longitude!=null||d.latitude!=null){if(d.longitude==null)E1.warn(".longitude=","Latitude was defined without longitude");else if(d.latitude==null)E1.warn(".latitude=","Longitude was defined without latitude");else if(!d.declaredClass&&l&&l.isWebMercator){const g=Jc(d.longitude,d.latitude,hd);e=g[0],t=g[1]}}}else d7(i)?(l=i,i=null):d7(s)&&(l=s,s=null);const y={x:e,y:t};return y.x==null&&y.y!=null?E1.warn(".y=","Y coordinate was defined without an X coordinate"):y.y==null&&y.x!=null&&E1.warn(".x=","X coordinate was defined without a Y coordinate"),l!=null&&(y.spatialReference=l),i!=null&&(y.z=i),s!=null&&(y.m=s),y}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:i}=this;if(e){if(e.isWebMercator)return F0(t,i,hd)[1];if(e.isGeographic)return i}return null}set latitude(e){const{spatialReference:t,x:i}=this;t&&(t.isWebMercator?this._set("y",Jc(i,e,hd)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:i}=this;if(i){if(i.isWebMercator)return F0(e,t,hd)[0];if(i.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:i}=this;i&&(i.isWebMercator?this._set("x",Jc(e,t,hd)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Fy;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Fy.copy(e,this),this}equals(e){if(he(e))return!1;const{x:t,y:i,z:s,m:l,spatialReference:d}=this,{z:y,m:g}=e;let{x,y:$,spatialReference:E}=e;if(!d.equals(E))if(d.isWebMercator&&E.isWGS84)[x,$]=Jc(x,$),E=d;else{if(!d.isWGS84||!E.isWebMercator)return!1;[x,$]=F0(x,$),E=d}return t===x&&i===$&&s===y&&l===g&&d.wkid===E.wkid}offset(e,t,i){return $D(this,e,t,i)}normalize(){if(!this.spatialReference)return this;const e=An(this.spatialReference);if(!e)return this;let t=this.x;const[i,s]=e.valid,l=2*s;let d;return t>s?(d=Math.ceil(Math.abs(t-s)/l),t-=d*l):t<i&&(d=Math.ceil(Math.abs(t-i)/l),t+=d*l),this._set("x",t),this}distance(e){return MD(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};v([_({readOnly:!0})],mr.prototype,"cache",null),v([_({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],mr.prototype,"hasM",null),v([_({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],mr.prototype,"hasZ",null),v([_({type:Number})],mr.prototype,"latitude",null),v([_({type:Number})],mr.prototype,"longitude",null),v([_({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),mt(e=>isNaN(e)?e:Gs(e))],mr.prototype,"x",void 0),v([Ee("x")],mr.prototype,"writeX",null),v([$e("x")],mr.prototype,"readX",null),v([_({type:Number,json:{write:!0}})],mr.prototype,"y",void 0),v([_({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],mr.prototype,"z",void 0),v([_({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],mr.prototype,"m",void 0),mr=Fy=v([H("esri.geometry.Point")],mr),mr.prototype.toJSON.isDefaultToJSON=!0;const He=mr,D2=[0,0];function Tv(e,t){return!!Y(t)&&br(e,t.x,t.y,t.z)}function dde(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!mp(e,i))return!1;return!0}function ED(e,t){const{xmin:i,ymin:s,zmin:l,xmax:d,ymax:y,zmax:g}=t;return e.hasZ&&t.hasZ?br(e,i,s,l)&&br(e,i,y,l)&&br(e,d,y,l)&&br(e,d,s,l)&&br(e,i,s,g)&&br(e,i,y,g)&&br(e,d,y,g)&&br(e,d,s,g):br(e,i,s)&&br(e,i,y)&&br(e,d,y)&&br(e,d,s)}function mp(e,t){return br(e,t[0],t[1])}function AD(e,t){return br(e,t[0],t[1],t[2])}function br(e,t,i,s){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(s==null||!e.hasZ||s>=e.zmin&&s<=e.zmax)}function FT(e,t){return D2[1]=t.y,D2[0]=t.x,kD(e,D2)}function kD(e,t){return DT(e.rings,t)}function DT(e,t){if(!e)return!1;if(OD(e))return f7(!1,e,t);let i=!1;for(let s=0,l=e.length;s<l;s++)i=f7(i,e[s],t);return i}function OD(e){return!Array.isArray(e[0][0])}function f7(e,t,i){const[s,l]=i;let d=e,y=0;for(let g=0,x=t.length;g<x;g++){y++,y===x&&(y=0);const[$,E]=t[g],[O,P]=t[y];(E<l&&P>=l||P<l&&E>=l)&&$+(l-E)/(P-E)*(O-$)<s&&(d=!d)}return d}function CD(e,t){return Tv(e,t)}function PD(e,t){const i=e.hasZ&&t.hasZ;let s,l,d;if(e.xmin<=t.xmin){if(s=t.xmin,e.xmax<s)return!1}else if(s=e.xmin,t.xmax<s)return!1;if(e.ymin<=t.ymin){if(l=t.ymin,e.ymax<l)return!1}else if(l=e.ymin,t.ymax<l)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(d=t.zmin,e.zmax<d)return!1}else if(d=e.zmin,t.zmax<d)return!1}return!0}function ND(e,t){const{points:i,hasZ:s}=t,l=s?AD:mp;for(const d of i)if(l(e,d))return!0;return!1}const wh=[0,0],bh=[0,0],_h=[0,0],xh=[0,0],RD=[wh,bh,_h,xh],zT=[[_h,wh],[wh,bh],[bh,xh],[xh,_h]];function jD(e,t){return LD(e,t.rings)}function LD(e,t){wh[0]=e.xmin,wh[1]=e.ymax,bh[0]=e.xmax,bh[1]=e.ymax,_h[0]=e.xmin,_h[1]=e.ymin,xh[0]=e.xmax,xh[1]=e.ymin;for(const i of RD)if(DT(t,i))return!0;for(const i of t){if(!i.length)continue;let s=i[0];if(mp(e,s))return!0;for(let l=1;l<i.length;l++){const d=i[l];if(mp(e,d)||VT(s,d,zT))return!0;s=d}}return!1}function FD(e,t){wh[0]=e.xmin,wh[1]=e.ymax,bh[0]=e.xmax,bh[1]=e.ymax,_h[0]=e.xmin,_h[1]=e.ymin,xh[0]=e.xmax,xh[1]=e.ymin;const i=t.paths;for(const s of i){if(!i.length)continue;let l=s[0];if(mp(e,l))return!0;for(let d=1;d<s.length;d++){const y=s[d];if(mp(e,y)||VT(l,y,zT))return!0;l=y}}return!1}const Fi=[0,0];function DD(e){for(let t=0;t<e.length;t++){const i=e[t];for(let l=0;l<i.length-1;l++){const d=i[l],y=i[l+1];for(let g=t+1;g<e.length;g++)for(let x=0;x<e[g].length-1;x++){const $=e[g][x],E=e[g][x+1];if(zb(d,y,$,E,Fi)&&!(Fi[0]===d[0]&&Fi[1]===d[1]||Fi[0]===$[0]&&Fi[1]===$[1]||Fi[0]===y[0]&&Fi[1]===y[1]||Fi[0]===E[0]&&Fi[1]===E[1]))return!0}}const s=i.length;if(!(s<=4))for(let l=0;l<s-3;l++){let d=s-1;l===0&&(d=s-2);const y=i[l],g=i[l+1];for(let x=l+2;x<d;x++){const $=i[x],E=i[x+1];if(zb(y,g,$,E,Fi)&&!(Fi[0]===y[0]&&Fi[1]===y[1]||Fi[0]===$[0]&&Fi[1]===$[1]||Fi[0]===g[0]&&Fi[1]===g[1]||Fi[0]===E[0]&&Fi[1]===E[1]))return!0}}}return!1}function VT(e,t,i){for(let s=0;s<i.length;s++)if(zb(e,t,i[s][0],i[s][1]))return!0;return!1}function zb(e,t,i,s,l){const[d,y]=e,[g,x]=t,[$,E]=i,[O,P]=s,R=O-$,L=d-$,z=g-d,V=P-E,K=y-E,ee=x-y,se=V*z-R*ee;if(se===0)return!1;const oe=(R*K-V*L)/se,ne=(z*K-ee*L)/se;return oe>=0&&oe<=1&&ne>=0&&ne<=1&&(l&&(l[0]=d+oe*(g-d),l[1]=y+oe*(x-y)),!0)}function zD(e){switch(e){case"esriGeometryEnvelope":case"extent":return PD;case"esriGeometryMultipoint":case"multipoint":return ND;case"esriGeometryPoint":case"point":return CD;case"esriGeometryPolygon":case"polygon":return jD;case"esriGeometryPolyline":case"polyline":return FD}}var As;function VD(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function va(e,t,i){return t==null?i:i==null?t:e(t,i)}let Ai=As=class extends Jr{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,s,l){return VD(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ye.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:s,spatialReference:l==null?Ye.WGS84:l}}static fromBounds(e,t){return new As({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new As({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new He({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new As;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Ly(t,i)&&(e=t.isWebMercator?oa(e):Wu(e,!0)),e.type==="point"?Tv(this,e):e.type==="extent"&&ED(this,e)}equals(e){if(this===e)return!0;if(he(e))return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Ly(t,i)&&(e=t.isWebMercator?oa(e):Wu(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,s=this.height*t;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){const l=(this.zmax-this.zmin)*t;this.zmin+=l,this.zmax-=l}if(this.hasM){const l=(this.mmax-this.mmin)*t;this.mmin+=l,this.mmax-=l}return this}intersects(e){if(he(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&Ly(t,i)&&(e=t.isWebMercator?oa(e):Wu(e,!0)),zD(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=va(Math.min,this.zmin,e.zmin),this.zmax=va(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=va(Math.min,this.mmin,e.mmin),this.mmax=va(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:he(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=va(Math.max,this.zmin,e.zmin),this.zmax=va(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=va(Math.max,this.mmin,e.mmin),this.mmax=va(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=An(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const s=t.isWebMercator?Wu(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(s.x=this._normalizeX(s.x,e).x),this.spatialReference=new Ye(fo(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(e){let t=null;const[i,s]=e.valid,l=this.xmin,d=this.xmax;return l>=i&&l<=s&&d>=i&&d<=s||(t=this.center),t}_normalize(e,t,i){const s=this.spatialReference;if(!s)return this;if(!(i=i||An(s)))return this;const l=this._getParts(i).map(g=>g.extent);if(l.length<2)return l[0]||this;if(l.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return l;let d=!0,y=!0;return l.forEach(g=>{g.hasZ||(d=!1),g.hasM||(y=!1)}),{rings:l.map(g=>{const x=[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]];if(d){const $=(g.zmax-g.zmin)/2;for(let E=0;E<x.length;E++)x[E].push($)}if(y){const $=(g.mmax-g.mmin)/2;for(let E=0;E<x.length;E++)x[E].push($)}return x}),hasZ:d,hasM:y,spatialReference:s}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:l,ymax:d,spatialReference:y}=this,g=this.width,x=this.xmin,$=this.xmax;let E;e=e||An(y);const[O,P]=e.valid;E=this._normalizeX(this.xmin,e);const R=E.x,L=E.frameId;E=this._normalizeX(this.xmax,e);const z=E.x,V=E.frameId,K=R===z&&g>0;if(g>2*P){const ee=new As(x<$?R:z,l,P,d,y),se=new As(O,l,x<$?z:R,d,y),oe=new As(0,l,P,d,y),ne=new As(O,l,0,d,y),ae=[],Ie=[];ee.contains(oe)&&ae.push(L),ee.contains(ne)&&Ie.push(L),se.contains(oe)&&ae.push(V),se.contains(ne)&&Ie.push(V);for(let Se=L+1;Se<V;Se++)ae.push(Se),Ie.push(Se);t.push({extent:ee,frameIds:[L]},{extent:se,frameIds:[V]},{extent:oe,frameIds:ae},{extent:ne,frameIds:Ie})}else R>z||K?t.push({extent:new As(R,l,P,d,y),frameIds:[L]},{extent:new As(O,l,z,d,y),frameIds:[V]}):t.push({extent:new As(R,l,z,d,y),frameIds:[L]});this.cache._parts=t}const i=this.hasZ,s=this.hasM;if(i||s){const l={};i&&(l.zmin=this.zmin,l.zmax=this.zmax),s&&(l.mmin=this.mmin,l.mmax=this.mmax);for(let d=0;d<t.length;d++)t[d].extent.set(l)}return t}_normalizeX(e,t){const[i,s]=t.valid,l=2*s;let d,y=0;return e>s?(d=Math.ceil(Math.abs(e-s)/l),e-=d*l,y=d):e<i&&(d=Math.ceil(Math.abs(e-i)/l),e+=d*l,y=-d),{x:e,frameId:y}}};v([_({readOnly:!0})],Ai.prototype,"cache",null),v([_({readOnly:!0})],Ai.prototype,"center",null),v([_({readOnly:!0})],Ai.prototype,"extent",null),v([_({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ai.prototype,"hasM",null),v([_({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Ai.prototype,"hasZ",null),v([_({readOnly:!0})],Ai.prototype,"height",null),v([_({readOnly:!0})],Ai.prototype,"width",null),v([_({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Ai.prototype,"xmin",void 0),v([_({type:Number,json:{write:!0}})],Ai.prototype,"ymin",void 0),v([_({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ai.prototype,"mmin",void 0),v([_({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ai.prototype,"zmin",void 0),v([_({type:Number,json:{write:!0}})],Ai.prototype,"xmax",void 0),v([_({type:Number,json:{write:!0}})],Ai.prototype,"ymax",void 0),v([_({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Ai.prototype,"mmax",void 0),v([_({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Ai.prototype,"zmax",void 0),Ai=As=v([H("esri.geometry.Extent")],Ai),Ai.prototype.toJSON.isDefaultToJSON=!0;const xt=Ai;function gp(e,t,i=!1){let{hasM:s,hasZ:l}=e;Array.isArray(t)?t.length!==4||s||l?t.length===3&&i&&!s?(l=!0,s=!1):t.length===3&&s&&l&&(s=!1,l=!1):(s=!0,l=!0):(l=!l&&t.hasZ&&(!s||t.hasM),s=!s&&t.hasM&&(!l||t.hasZ)),e.hasZ=l,e.hasM=s}var Vb;function y7(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function GD(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Pa=Vb=class extends Jr{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):GD(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const s=i.points&&i.points[0];return s&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=s.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=s.length>3:i.hasM===void 0&&(i.hasM=s.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new xt,i=this.hasZ,s=this.hasM,l=i?3:2,d=e[0],y=y7(Math.min),g=y7(Math.max);let x,$,E,O,[P,R]=d,[L,z]=d;for(let V=0,K=e.length;V<K;V++){const ee=e[V],[se,oe]=ee;if(P=y(P,se),R=y(R,oe),L=g(L,se),z=g(z,oe),i&&ee.length>2){const ne=ee[2];x=y(x,ne),E=g(E,ne)}if(s&&ee.length>l){const ne=ee[l];$=y($,ne),O=g(O,ne)}}return t.xmin=P,t.ymin=R,t.xmax=L,t.ymax=z,t.spatialReference=this.spatialReference,i?(t.zmin=x,t.zmax=E):(t.zmin=null,t.zmax=null),s?(t.mmin=$,t.mmax=O):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=ie(this.points)}addPoint(e){return gp(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:ie(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new Vb(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let s=2;return this.hasZ&&(i.z=t[2],s=3),this.hasM&&(i.m=t[s]),new He(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new He(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(gp(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};v([_({readOnly:!0})],Pa.prototype,"cache",null),v([_()],Pa.prototype,"extent",null),v([_({type:[[Number]],json:{write:{isRequired:!0}}})],Pa.prototype,"points",void 0),v([Ee("points")],Pa.prototype,"writePoints",null),Pa=Vb=v([H("esri.geometry.Multipoint")],Pa),Pa.prototype.toJSON.isDefaultToJSON=!0;const Nh=Pa;function qD(e,t){const i=t[0]-e[0],s=t[1]-e[1];if(e.length>2&&t.length>2){const l=e[2]-t[2];return Math.sqrt(i*i+s*s+l*l)}return Math.sqrt(i*i+s*s)}function UD(e,t,i){const s=e[0]+i*(t[0]-e[0]),l=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[s,l,e[2]+i*(t[2]-e[2])]:[s,l]}function BD(e,t,i,s){const[l,d]=t,[y,g]=i[s],[x,$]=i[s+1],E=x-y,O=$-g,P=E*E+O*O,R=(l-y)*E+(d-g)*O,L=Math.min(1,Math.max(0,R/P));return e[0]=y+E*L,e[1]=g+O*L,e}function HD(e,t){return UD(e,t,.5)}function m4(e,t,i){const s=e.length;let l=0,d=0,y=0;for(let g=0;g<s;g++){const x=e[g],$=e[(g+1)%s];let E=2;l+=x[0]*$[1]-$[0]*x[1],x.length>2&&$.length>2&&i&&(d+=x[0]*$[2]-$[0]*x[2],E=3),x.length>E&&$.length>E&&t&&(y+=x[0]*$[E]-$[0]*x[E])}return l<=0&&d<=0&&y<=0}function fde(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!m4(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function yde(e){if("rings"in e)for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function mde(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function WD(e){return e?JD(e.rings,e.hasZ):null}function JD(e,t){if(!e||!e.length)return null;const i=[],s=[],l=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let d=0,y=e.length;d<y;d++){const g=KD(e[d],t,l);g&&s.push(g)}if(s.sort((d,y)=>{let g=d[2]-y[2];return g===0&&t&&(g=d[4]-y[4]),g}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<l[0]||i[0]>l[1]||i[1]<l[2]||i[1]>l[3]||t&&(i[2]<l[4]||i[2]>l[5]))&&(i.length=0)),!i.length){const d=e[0]&&e[0].length?YD(e[0],t):null;if(!d)return null;i[0]=d[0],i[1]=d[1],t&&d.length>2&&(i[2]=d[2])}return i}function KD(e,t,i){let s=0,l=0,d=0,y=0,g=0;const x=e.length?e[0][0]:0,$=e.length?e[0][1]:0,E=e.length&&t?e[0][2]:0;for(let P=0;P<e.length;P++){const R=e[P],L=e[(P+1)%e.length],[z,V,K]=R,ee=z-x,se=V-$,oe=t?K-E:void 0,[ne,ae,Ie]=L,Se=ne-x,Pe=ae-$,Re=t?Ie-E:void 0,De=ee*Pe-Se*se;if(y+=De,s+=(ee+Se)*De,l+=(se+Pe)*De,t&&R.length>2&&L.length>2){const Le=ee*Re-Se*oe;d+=(oe+Re)*Le,g+=Le}z<i[0]&&(i[0]=z),z>i[1]&&(i[1]=z),V<i[2]&&(i[2]=V),V>i[3]&&(i[3]=V),t&&(K<i[4]&&(i[4]=K),K>i[5]&&(i[5]=K))}if(y>0&&(y*=-1),g>0&&(g*=-1),!y)return null;y*=.5,g*=.5;const O=[s/(6*y)+x,l/(6*y)+$,y];return t&&(i[4]===i[5]||g===0?(O[3]=(i[4]+i[5])/2,O[4]=0):(O[3]=d/(6*g)+E,O[4]=g)),O}function YD(e,t){const i=t?[0,0,0]:[0,0],s=t?[0,0,0]:[0,0];let l=0,d=0,y=0,g=0;for(let x=0,$=e.length;x<$-1;x++){const E=e[x],O=e[x+1];if(E&&O){i[0]=E[0],i[1]=E[1],s[0]=O[0],s[1]=O[1],t&&E.length>2&&O.length>2&&(i[2]=E[2],s[2]=O[2]);const P=qD(i,s);if(P){l+=P;const R=HD(E,O);d+=P*R[0],y+=P*R[1],t&&R.length>2&&(g+=P*R[2])}}}return l>0?t?[d/l,y/l,g/l]:[d/l,y/l]:e.length?e[0]:null}function GT(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function qT(e){return e.points!==void 0}function UT(e){return e.x!==void 0&&e.y!==void 0}function BT(e){return e.paths!==void 0}function HT(e){return e.rings!==void 0}function WT(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}const wl=WT(Math.min),bl=WT(Math.max);function gde(e,t){return BT(t)?vp(e,t.paths,!1,!1):HT(t)?vp(e,t.rings,!1,!1):qT(t)?g4(e,t.points,!1,!1,!1,!1):GT(t)?JT(e,t):(UT(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function vde(e,t){return BT(t)?vp(e,t.paths,!0,!1):HT(t)?vp(e,t.rings,!0,!1):qT(t)?g4(e,t.points,!0,!1,!0,!1):GT(t)?JT(e,t,!0,!1,!0,!1):(UT(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function vp(e,t,i,s){const l=i?3:2;if(!t.length||!t[0].length)return null;let d,y,g,x,[$,E]=t[0][0],[O,P]=t[0][0];for(let R=0;R<t.length;R++){const L=t[R];for(let z=0;z<L.length;z++){const V=L[z],[K,ee]=V;if($=wl($,K),E=wl(E,ee),O=bl(O,K),P=bl(P,ee),i&&V.length>2){const se=V[2];d=wl(d,se),y=bl(y,se)}if(s&&V.length>l){const se=V[l];g=wl(d,se),x=bl(y,se)}}}return i?s?(e[0]=$,e[1]=E,e[2]=d,e[3]=g,e[4]=O,e[5]=P,e[6]=y,e[7]=x,e.length=8,e):(e[0]=$,e[1]=E,e[2]=d,e[3]=O,e[4]=P,e[5]=y,e.length=6,e):s?(e[0]=$,e[1]=E,e[2]=g,e[3]=O,e[4]=P,e[5]=x,e.length=6,e):(e[0]=$,e[1]=E,e[2]=O,e[3]=P,e.length=4,e)}function JT(e,t,i,s,l,d){const y=t.xmin,g=t.xmax,x=t.ymin,$=t.ymax;let E=t.zmin,O=t.zmax,P=t.mmin,R=t.mmax;return l?(E=E||0,O=O||0,d?(P=P||0,R=R||0,e[0]=y,e[1]=x,e[2]=E,e[3]=P,e[4]=g,e[5]=$,e[6]=O,e[7]=R,e):(e[0]=y,e[1]=x,e[2]=E,e[3]=g,e[4]=$,e[5]=O,e)):d?(P=P||0,R=R||0,e[0]=y,e[1]=x,e[2]=P,e[3]=g,e[4]=$,e[5]=R,e):(e[0]=y,e[1]=x,e[2]=g,e[3]=$,e)}function g4(e,t,i,s,l,d){const y=i?3:2,g=s&&d,x=i&&l;if(!t.length||!t[0].length)return null;let $,E,O,P,[R,L]=t[0],[z,V]=t[0];for(let K=0;K<t.length;K++){const ee=t[K],[se,oe]=ee;if(R=wl(R,se),L=wl(L,oe),z=bl(z,se),V=bl(V,oe),x&&ee.length>2){const ne=ee[2];$=wl($,ne),E=bl(E,ne)}if(g&&ee.length>y){const ne=ee[y];O=wl($,ne),P=bl(E,ne)}}return l?($=$||0,E=E||0,d?(O=O||0,P=P||0,e[0]=R,e[1]=L,e[2]=$,e[3]=O,e[4]=z,e[5]=V,e[6]=E,e[7]=P,e):(e[0]=R,e[1]=L,e[2]=$,e[3]=z,e[4]=V,e[5]=E,e)):d?(O=O||0,P=P||0,e[0]=R,e[1]=L,e[2]=O,e[3]=z,e[4]=V,e[5]=P,e):(e[0]=R,e[1]=L,e[2]=z,e[3]=V,e)}function XD(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function ZD(e){return e.points!==void 0}function QD(e){return e.x!==void 0&&e.y!==void 0}function ez(e){return e.paths!==void 0}function tz(e){return e.rings!==void 0}const v4=[];function KT(e,t,i,s){return{xmin:e,ymin:t,xmax:i,ymax:s}}function YT(e,t,i,s,l,d){return{xmin:e,ymin:t,zmin:i,xmax:s,ymax:l,zmax:d}}function XT(e,t,i,s,l,d){return{xmin:e,ymin:t,mmin:i,xmax:s,ymax:l,mmax:d}}function ZT(e,t,i,s,l,d,y,g){return{xmin:e,ymin:t,zmin:i,mmin:s,xmax:l,ymax:d,zmax:y,mmax:g}}function w4(e,t=!1,i=!1){return t?i?ZT(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):YT(e[0],e[1],e[2],e[3],e[4],e[5]):i?XT(e[0],e[1],e[2],e[3],e[4],e[5]):KT(e[0],e[1],e[2],e[3])}function wde(e){return e?XD(e)?e:QD(e)?rz(e):tz(e)?QT(e):ez(e)?eE(e):ZD(e)?iz(e):null:null}function iz(e){const{hasZ:t,hasM:i,points:s}=e;return w4(g4(v4,s,t,i),t,i)}function rz(e){const{x:t,y:i,z:s,m:l}=e,d=l!=null;return s!=null?d?ZT(t,i,s,l,t,i,s,l):YT(t,i,s,t,i,s):d?XT(t,i,l,t,i,l):KT(t,i,t,i)}function QT(e){const{hasZ:t,hasM:i,rings:s}=e,l=vp(v4,s,t,i);return l?w4(l,t,i):null}function eE(e){const{hasZ:t,hasM:i,paths:s}=e,l=vp(v4,s,t,i);return l?w4(l,t,i):null}var Dy;function m7(e){return!Array.isArray(e[0])}let Un=Dy=class extends Jr{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),i=e.spatialReference;let s=!1,l=!1;for(const y of t)y.hasZ&&(s=!0),y.hasM&&(l=!0);const d={rings:t.map(y=>{const g=[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]];if(s&&y.hasZ){const x=y.zmin+.5*(y.zmax-y.zmin);for(let $=0;$<g.length;$++)g[$].push(x)}if(l&&y.hasM){const x=y.mmin+.5*(y.mmax-y.mmin);for(let $=0;$<g.length;$++)g[$].push(x)}return g}),spatialReference:i};return s&&(d.hasZ=!0),l&&(d.hasM=!0),new Dy(d)}normalizeCtorArgs(e,t){let i,s,l=null,d=null;return e&&!Array.isArray(e)?(l=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),i=e.hasZ,s=e.hasM):l=e,l=l||[],t=t||Ye.WGS84,l.length&&l[0]&&l[0][0]!=null&&typeof l[0][0]=="number"&&(l=[l]),d=l[0]&&l[0][0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=d.length>3):i===void 0?i=s?d.length>3:d.length>2:s===void 0&&(s=i?d.length>3:d.length>2)),{rings:l,spatialReference:t,hasZ:i,hasM:s}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=WD(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new He;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=QT(this);if(!t)return null;const i=new xt(t);return i.spatialReference=e,i}get isSelfIntersecting(){return DD(this.rings)}writeRings(e,t){t.rings=ie(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(m7(e)){const s=[];for(let l=0,d=e.length;l<d;l++)s[l]=e[l].toArray();t[i]=s}else t[i]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Dy;return e.spatialReference=this.spatialReference,e.rings=ie(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(he(e))return!1;const t=this.spatialReference,i=e.spatialReference;if(Y(t)!==Y(i)||Y(t)&&Y(i)&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const s=([l,d,y,g],[x,$,E,O])=>l===x&&d===$&&(y==null&&E==null||y===E)&&(g==null&&O==null||g===O);for(let l=0;l<this.rings.length;l++){const d=this.rings[l],y=e.rings[l];if(!e4(d,y,s))return!1}return!0}contains(e){if(!e)return!1;const t=Iv(e,this.spatialReference);return FT(this,Y(t)?t:e)}isClockwise(e){let t;return t=m7(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e,m4(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],s=this.hasZ,l=this.hasM;return s&&!l?new He(i[0],i[1],i[2],void 0,this.spatialReference):l&&!s?new He(i[0],i[1],void 0,i[2],this.spatialReference):s&&l?new He(i[0],i[1],i[2],i[3],this.spatialReference):new He(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(gp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new He(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,s=t.map(l=>new He(l,i));return this.notifyChange("rings"),s}setPoint(e,t,i){return this._validateInputs(e,t)?(gp(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const s=this.rings[e];if(i&&(t<0||t>s.length)||!i&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};v([_({readOnly:!0})],Un.prototype,"cache",null),v([_({readOnly:!0})],Un.prototype,"centroid",null),v([_({readOnly:!0})],Un.prototype,"extent",null),v([_({readOnly:!0})],Un.prototype,"isSelfIntersecting",null),v([_({type:[[[Number]]],json:{write:{isRequired:!0}}})],Un.prototype,"rings",void 0),v([Ee("rings")],Un.prototype,"writeRings",null),Un=Dy=v([H("esri.geometry.Polygon")],Un),Un.prototype.toJSON.isDefaultToJSON=!0;const gs=Un;var Gb;function sz(e){return!Array.isArray(e[0])}let Na=Gb=class extends Jr{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let i,s,l=null,d=null;return e&&!Array.isArray(e)?(l=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),i=e.hasZ,s=e.hasM):l=e,l=l||[],t=t||Ye.WGS84,l.length&&l[0]&&l[0][0]!=null&&typeof l[0][0]=="number"&&(l=[l]),d=l[0]&&l[0][0],d&&(i===void 0&&s===void 0?(i=d.length>2,s=!1):i===void 0?i=!s&&d.length>3:s===void 0&&(s=!i&&d.length>3)),{paths:l,spatialReference:t,hasZ:i,hasM:s}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=eE(this);if(!t)return null;const i=new xt(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=ie(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(sz(e)){const s=[];for(let l=0,d=e.length;l<d;l++)s[l]=e[l].toArray();t[i]=s}else t[i]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new Gb;return e.spatialReference=this.spatialReference,e.paths=ie(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],s=this.hasZ,l=this.hasM;return s&&!l?new He(i[0],i[1],i[2],void 0,this.spatialReference):l&&!s?new He(i[0],i[1],void 0,i[2],this.spatialReference):s&&l?new He(i[0],i[1],i[2],i[3],this.spatialReference):new He(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(gp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,s=t.map(l=>new He(l,i));return this.notifyChange("paths"),s}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new He(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(gp(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const s=this.paths[e];if(i&&(t<0||t>s.length)||!i&&(t<0||t>=s.length))return!1}return!0}toJSON(e){return this.write({},e)}};v([_({readOnly:!0})],Na.prototype,"cache",null),v([_({readOnly:!0})],Na.prototype,"extent",null),v([_({type:[[[Number]]],json:{write:{isRequired:!0}}})],Na.prototype,"paths",void 0),v([Ee("paths")],Na.prototype,"writePaths",null),Na=Gb=v([H("esri.geometry.Polyline")],Na),Na.prototype.toJSON.isDefaultToJSON=!0;const $r=Na;class tt{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=i,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=s=>this.fromJSON(s),this.write=(s,l,d)=>{const y=this.toJSON(s);y!==void 0&&Xi(d,y,l)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const i=this.apiToJSON[t];return this.options.useNumericKeys?+i:i}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const i={};for(const s in t)i[t[s]]=s;return i}_getKeysSorted(t){const i=[];for(const s in t)i.push(s);return i.sort(),i}}function tr(){return function(e,t){return new tt(e,{ignoreUnknown:!0,...t})}}const b4=tr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),g7=tr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function tE(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function _4(e){return e.points!==void 0}function x4(e){return e.x!==void 0&&e.y!==void 0}function S4(e){return e.paths!==void 0}function uh(e){return e.rings!==void 0}function ha(e){return he(e)?null:e instanceof Jr?e:x4(e)?He.fromJSON(e):S4(e)?$r.fromJSON(e):uh(e)?gs.fromJSON(e):_4(e)?Nh.fromJSON(e):tE(e)?xt.fromJSON(e):null}function Dp(e){return e?x4(e)?"esriGeometryPoint":S4(e)?"esriGeometryPolyline":uh(e)?"esriGeometryPolygon":tE(e)?"esriGeometryEnvelope":_4(e)?"esriGeometryMultipoint":null:null}const nz={esriGeometryPoint:He,esriGeometryPolyline:$r,esriGeometryPolygon:gs,esriGeometryEnvelope:xt,esriGeometryMultipoint:Nh};function iE(e){return e&&nz[e]||null}const Ll={base:Jr,key:"type",typeMap:{extent:xt,multipoint:Nh,point:He,polyline:$r,polygon:gs}};yo(Ll);class np{constructor(){this._emitter=new np.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(l=null){this.target=l,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(l,d){const y=this._listenersMap&&this._listenersMap.get(l);if(!y)return!1;const g=this.target||this;return[...y].forEach(x=>{x.call(g,d)}),y.length>0}on(l,d){if(Array.isArray(l)){const g=l.map(x=>this.on(x,d));return mv(g)}if(l.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const y=this._listenersMap.get(l)||[];return y.push(d),this._listenersMap.set(l,y),{remove:()=>{const g=this._listenersMap&&this._listenersMap.get(l)||[],x=g.indexOf(d);x>=0&&g.splice(x,1)}}}once(l,d){const y=this.on(l,g=>{y.remove(),d.call(null,g)});return y}hasEventListener(l){const d=this._listenersMap&&this._listenersMap.get(l);return d!=null&&d.length>0}}e.EventEmitter=t,e.EventedMixin=s=>{let l=class extends s{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(d,y){return this._emitter.emit(d,y)}on(d,y){return this._emitter.on(d,y)}once(d,y){return this._emitter.once(d,y)}hasEventListener(d){return this._emitter.hasEventListener(d)}};return l=v([H("esri.core.Evented")],l),l};let i=class extends ze{constructor(){super(...arguments),this._emitter=new np.EventEmitter(this)}destroy(){this._emitter.clear()}emit(s,l){return this._emitter.emit(s,l)}on(s,l){return this._emitter.on(s,l)}once(s,l){return this._emitter.once(s,l)}hasEventListener(s){return this._emitter.hasEventListener(s)}};i=v([H("esri.core.Evented")],i),e.EventedAccessor=i})(np||(np={}));const Fl=np;var Tt;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Tt||(Tt={}));function $4(e){return(t,i)=>{t[i]=e}}class rE{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new mT(this._observers,t)}notify(){const t=this._observers.slice();for(let i=0;i<t.length;++i){const s=t[i];s.onInvalidated(),s.onCommitted()}}}var Qo;class oz{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const $s=new Pn(oz,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),az=()=>{};function z2(e){return e?e instanceof Lu?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function V2(e){if(e&&e.length)return e[0]}function lz(e,t,i,s){const l=Math.min(e.length-i,t.length-s);let d=0;for(;d<l&&e[i+d]===t[s+d];)d++;return d}function sE(e,t,i,s){t&&t.forEach((l,d,y)=>{e.push(l),sE(e,i.call(s,l,d,y),i,s)})}const wa=new Set,ba=new Set,_a=new Set,G2=new Map;let uz=0,Lu=Qo=class extends Fl.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new rE,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:uz++})}static isCollection(e){return e!=null&&e instanceof Qo}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Qo?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return it(this._observable),this._items}set items(e){this._emitBeforeChanges(Tt.ADD)||(this._splice(0,this.length,z2(e)),this._emitAfterChanges(Tt.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const i=this._chgListeners,s={removed:!1,callback:t};return i.push(s),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=az,s.removed=!0,i.splice(i.indexOf(s),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if(it(this._observable),this._emitBeforeChanges(Tt.ADD))return this;const i=this.getNextIndex(t!=null?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(Tt.ADD),this}addMany(e,t=this._items.length){if(it(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Tt.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,z2(e)),this._emitAfterChanges(Tt.ADD),this}at(e){if(it(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(it(this._observable),!this.length||this._emitBeforeChanges(Tt.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Tt.REMOVE),e}clone(){return it(this._observable),this._createNewInstance({items:this._items.map(ie)})}concat(...e){it(this._observable);const t=e.map(z2);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(it(this._observable),!this.length||this._emitBeforeChanges(Tt.REMOVE))return;const i=this._splice(0,this.length),s=i.length;for(let l=0;l<s;l++)e.call(t,i[l],l,i);this._emitAfterChanges(Tt.REMOVE)}every(e,t){return it(this._observable),this._items.every(e,t)}filter(e,t){let i;return it(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return it(this._observable),this._items.find(e,t)}findIndex(e,t){return it(this._observable),this._items.findIndex(e,t)}flatten(e,t){it(this._observable);const i=[];return sE(i,this,e,t),new Qo(i)}forEach(e,t){return it(this._observable),this._items.forEach(e,t)}getItemAt(e){return it(this._observable),this._items[e]}getNextIndex(e){it(this._observable);const t=this.length;return(e=e==null?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return it(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return it(this._observable),this._items.indexOf(e,t)}join(e=","){return it(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return it(this._observable),this._items.lastIndexOf(e,t)}map(e,t){it(this._observable);const i=this._items.map(e,t);return new Qo({items:i})}reorder(e,t=this.length-1){it(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(Tt.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(Tt.MOVE)}return e}}pop(){if(it(this._observable),!this.length||this._emitBeforeChanges(Tt.REMOVE))return;const e=V2(this._splice(this.length-1,1));return this._emitAfterChanges(Tt.REMOVE),e}push(...e){return it(this._observable),this._emitBeforeChanges(Tt.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Tt.ADD)),this.length}reduce(e,t){it(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){it(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return it(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(it(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Tt.REMOVE))return;const t=V2(this._splice(e,1));return this._emitAfterChanges(Tt.REMOVE),t}removeMany(e){if(it(this._observable),!e||!e.length||this._emitBeforeChanges(Tt.REMOVE))return[];const t=e instanceof Qo?e.toArray():e,i=this._items,s=[],l=t.length;for(let d=0;d<l;d++){const y=t[d],g=i.indexOf(y);if(g>-1){const x=1+lz(t,i,d+1,g+1),$=this._splice(g,x);$&&$.length>0&&s.push.apply(s,$),d+=x-1}}return this._emitAfterChanges(Tt.REMOVE),s}reverse(){if(it(this._observable),this._emitBeforeChanges(Tt.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Tt.MOVE),this}shift(){if(it(this._observable),!this.length||this._emitBeforeChanges(Tt.REMOVE))return;const e=V2(this._splice(0,1));return this._emitAfterChanges(Tt.REMOVE),e}slice(e=0,t=this.length){return it(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return it(this._observable),this._items.some(e,t)}sort(e){if(it(this._observable),!this.length||this._emitBeforeChanges(Tt.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Tt.MOVE),this}splice(e,t,...i){it(this._observable);const s=(t?Tt.REMOVE:0)|(i.length?Tt.ADD:0);if(this._emitBeforeChanges(s))return[];const l=this._splice(e,t,i)||[];return this._emitAfterChanges(s),l}toArray(){return it(this._observable),this._items.slice()}toJSON(){return it(this._observable),this.toArray()}toLocaleString(){return it(this._observable),this._items.toLocaleString()}toString(){return it(this._observable),this._items.toString()}unshift(...e){return it(this._observable),!e.length||this._emitBeforeChanges(Tt.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Tt.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const s=this._items,l=this.itemType;let d,y;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Lp(()=>this._dispatchChange())),t){if(y=s.splice(e,t),this.hasEventListener("before-remove")){const g=$s.acquire();g.target=this,g.cancellable=!0;for(let x=0,$=y.length;x<$;x++)d=y[x],g.reset(d),this.emit("before-remove",g),g.defaultPrevented&&(y.splice(x,1),s.splice(e,0,d),e+=1,x-=1,$-=1);$s.release(g)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const g=$s.acquire();g.target=this,g.cancellable=!1;const x=y.length;for(let $=0;$<x;$++)g.reset(y[$]),this.emit("after-remove",g);$s.release(g)}}if(i&&i.length){if(l){const E=[];for(const O of i){const P=l.ensureType(O);P==null&&O!=null||E.push(P)}i=E}const g=this.hasEventListener("before-add"),x=this.hasEventListener("after-add"),$=e===this.length;if(g||x){const E=$s.acquire();E.target=this,E.cancellable=!0;const O=$s.acquire();O.target=this,O.cancellable=!1;for(const P of i)g?(E.reset(P),this.emit("before-add",E),E.defaultPrevented||($?s.push(P):s.splice(e++,0,P),this._set("length",s.length),x&&(O.reset(P),this.emit("after-add",O)))):($?s.push(P):s.splice(e++,0,P),this._set("length",s.length),O.reset(P),this.emit("after-add",O));$s.release(O),$s.release(E)}else{if($)for(const E of i)s.push(E);else s.splice(e,0,...i);this._set("length",s.length)}}return(i&&i.length||y&&y.length)&&this._notifyChangeEvent(i,y),y}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=$s.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,$s.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=$s.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),$s.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;wa.clear(),ba.clear(),_a.clear();for(const{added:x,removed:$}of i){if(x)if(_a.size===0&&ba.size===0)for(const E of x)wa.add(E);else for(const E of x)ba.has(E)?(_a.add(E),ba.delete(E)):_a.has(E)||wa.add(E);if($)if(_a.size===0&&wa.size===0)for(const E of $)ba.add(E);else for(const E of $)wa.has(E)?wa.delete(E):(_a.delete(E),ba.add(E))}const s=Sr.acquire();wa.forEach(x=>{s.push(x)});const l=Sr.acquire();ba.forEach(x=>{l.push(x)});const d=this._items,y=t.items,g=Sr.acquire();if(_a.forEach(x=>{y.indexOf(x)!==d.indexOf(x)&&g.push(x)}),t.listeners&&(s.length||l.length||g.length)){const x={target:this,added:s,removed:l,moved:g},$=t.listeners.length;for(let E=0;E<$;E++){const O=t.listeners[E];O.removed||O.callback.call(this,x)}}Sr.release(s),Sr.release(l),Sr.release(g)}wa.clear(),ba.clear(),_a.clear()}};Lu.ofType=e=>{if(!e)return Qo;if(G2.has(e))return G2.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const s in e.typeMap){const l=e.typeMap[s].prototype.declaredClass;t?t+=` | ${l}`:t=l}let i=class extends Qo{};return v([$4({Type:e,ensureType:typeof e=="function"?ni(e):yo(e)})],i.prototype,"itemType",void 0),i=v([H(`esri.core.Collection<${t}>`)],i),G2.set(e,i),i},v([_()],Lu.prototype,"length",void 0),v([_()],Lu.prototype,"items",null),Lu=Qo=v([H("esri.core.Collection")],Lu);const Ge=Lu;var wp;function hz(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,s="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>s)return wp.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(i=>i==null||i.code!==t))return wp.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(wp||(wp={}));let q2;function ca(){return q2||(q2=(async()=>{const e=await fe(()=>import("./arcadeUtils.cc514ea1.js").then(function(t){return t.t}),[]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),q2}const bde=(e,t,i)=>Bf.create(e,t,i,null,["$feature"]),_de=(e,t,i)=>Bf.create(e,t,i,null,["$feature","$view"]),cz=(e,t,i,s)=>Bf.create(e,t,i,s,["$feature","$view"]);class Bf{constructor(t,i,s,l,d,y,g,x){this.script=t,this.evaluate=d;const $=Array.isArray(g)?g:g.fields;this.fields=$,this._syntaxTree=l,this._arcade=i,this._arcadeDictionary=s,this._arcadeFeature=y,this._spatialReference=x,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,s,l,d,y){const{arcade:g,Feature:x,Dictionary:$}=await ca(),E=Ye.fromJSON(i),O=g.parseScript(t,y),P=d.reduce((ne,ae)=>({...ne,[ae]:null}),{});let R=null;Y(l)&&(R=new $(l),R.immutable=!0,P.$config=null);const L=g.scriptUsesGeometryEngine(O)&&g.enableGeometrySupport(),z=g.scriptUsesFeatureSet(O)&&g.enableFeatureSetSupport(),V=g.scriptIsAsync(O)&&g.enableAsyncSupport(),K={vars:P,spatialReference:E,useAsync:!!V},ee=new $;ee.immutable=!1,ee.setField("scale",0);const se=g.compileScript(O,K),oe=ne=>("$view"in ne&&ne.$view&&(ee.setField("scale",ne.$view.scale),ne.$view=ee),R&&(ne.$config=R),se({vars:ne,spatialReference:E}));return await Promise.all([L,z,V]),new Bf(t,g,$,O,oe,new x,s,E)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const pz=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],dz=["field","normalizationField"];function cg(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(v7(pz,i,t),"visualVariables"in i&&i.visualVariables)for(const s of i.visualVariables)v7(dz,s,t)}}function v7(e,t,i){if(e)for(const s of e){const l=Np(s,t),d=l&&typeof l!="function"&&i.get(l);d&&Xi(s,d.name,t)}}function M4(e,t){if(e!=null&&(t==null?void 0:t.fields.length))if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=i&&i.name||null,e.endField=s&&s.name||null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=s&&s.name||null}}const U2=new Set;function nE(e,t){return e&&t?(U2.clear(),pf(U2,e,t),Array.from(U2).sort()):[]}function pf(e,t,i){var s;if(i)if((s=t==null?void 0:t.fields)!=null&&s.length)if(i.includes("*"))for(const{name:l}of t.fields)e.add(l);else for(const l of i)Hs(e,t,l);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const l of i)e.add(l)}}function Hs(e,t,i){if(typeof i=="string")if(t){const s=t.get(i);s&&e.add(s.name)}else e.add(i)}function xde(e,t){return he(t)||he(e)?[]:t.includes("*")?e.fields.map(i=>i.name):t}async function Ar(e,t,i){var d;if(!i)return;const{arcadeUtils:s}=await ca(),l=s.extractFieldNames(i,(d=t==null?void 0:t.fields)==null?void 0:d.map(y=>y.name));for(const y of l)Hs(e,t,y)}async function oE(e,t,i){if(i&&i!=="1=1"){const s=(await fe(()=>import("./WhereClause.0db16567.js"),[])).WhereClause.create(i,t);if(!s.isStandardized)throw new te("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});pf(e,t,s.fieldNames)}}function fz({displayField:e,fields:t}){return e||(t&&t.length?B2(t,"name-or-title")||B2(t,"unique-identifier")||B2(t,"type-or-category")||yz(t):null)}function yz(e){for(const t of e){if(!t||!t.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function B2(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function Sde(e,t){if(!t)return;const i=Np("elevationInfo.featureExpressionInfo",t);return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}async function mz(e,t,i){i.outStatistic.onStatisticValueExpression?Ar(e,t,i.outStatistic.onStatisticValueExpression):e.add(i.outStatistic.onStatisticField)}async function $de(e,t,i){var l,d;if(!t||!i||!("fields"in i))return;const s=[];if((l=i.popupTemplate)!=null&&l.expressionInfos&&s.push(...i.popupTemplate.expressionInfos.map(y=>Ar(e,t.fieldsIndex,y.expression))),Array.isArray((d=i.popupTemplate)==null?void 0:d.content)){const y=i.popupTemplate.content;for(const g of y)g.type==="expression"&&g.expressionInfo&&s.push(Ar(e,t.fieldsIndex,g.expressionInfo.expression))}i.fields&&s.push(...i.fields.map(y=>mz(e,t.fieldsIndex,y))),await Promise.all(s)}async function Mde(e,t,i){t&&(t.timeInfo&&Y(i)&&i.timeExtent&&pf(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&pf(e,t.fieldsIndex,[t.floorInfo.floorField]),Y(i)&&Y(i.where)&&await oE(e,t.fieldsIndex,i.where))}async function Ide(e,t,i){t&&i&&await Promise.all(i.map(s=>gz(e,t,s)))}async function gz(e,t,i){t&&i&&(i.valueExpression?await Ar(e,t.fieldsIndex,i.valueExpression):i.field&&Hs(e,t.fieldsIndex,i.field))}function Tde(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?nE(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function Ede(e,t){const{labelingInfo:i,fieldsIndex:s}=t;i&&i.length&&await Promise.all(i.map(l=>vz(e,s,l)))}async function vz(e,t,i){if(!i)return;const s=i.getLabelExpression(),l=i.where;if(s.type==="arcade")await Ar(e,t,s.expression);else{const d=s.expression.match(/{[^}]*}/g);d&&d.forEach(y=>{Hs(e,t,y.slice(1,-1))})}await oE(e,t,l)}function wz(e){const t=e.defaultValue;return t!==void 0&&uE(e,t)?t:e.nullable?null:void 0}function aE(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function bz(e){return e===null||aE(e)}const I4="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function _z(e){return e===null||I4(e)}function lE(e){return e!=null&&typeof e=="string"}function xz(e){return e===null||lE(e)}function Sz(){return!0}function uE(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?_z:I4;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?bz:aE;break;case"string":case"esriFieldTypeString":i=e.nullable?xz:lE;break;default:i=Sz}return arguments.length===1?i:i(t)}const $z=["integer","small-integer","single","double"],Mz=new Set([...$z,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function T4(e){return e!=null&&Mz.has(e.type)}function Ade(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var pg,dg;function kde(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Ode(e,t){return e.nullable&&t===null?null:T4(e)&&!Iz(e.type,Number(t))?pg.OUT_OF_RANGE:uE(e,t)?e.domain?hz(e.domain,t):null:dg.INVALID_TYPE}function Iz(e,t){const i=typeof e=="string"?hE(e):e;return!!i&&(i.isInteger?I4(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}function hE(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Tz;case"esriFieldTypeInteger":case"integer":return Ez;case"esriFieldTypeSingle":case"single":return Az;case"esriFieldTypeDouble":case"double":return kz}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(pg||(pg={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(dg||(dg={}));const Tz={min:-32768,max:32767,isInteger:!0},Ez={min:-2147483648,max:2147483647,isInteger:!0},Az={min:-34e37,max:12e37,isInteger:!1},kz={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Cde(e,t,i){switch(e){case wp.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case wp.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case dg.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case pg.OUT_OF_RANGE:{const{min:s,max:l}=hE(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${s} to ${l}`}}}function Oz(e,t){return!Cz(e,t,null)}function Cz(e,t,i){if(!t||!t.attributes||!e){if(Y(i))for(const d of e)i.add(d);return!0}const s=t.attributes;let l=!1;for(const d of e)if(!(d in s)){if(l=!0,!Y(i))break;i.add(d)}return l}function cE(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let zy=class extends ce{constructor(e){super(e),this.type=null}};v([_({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],zy.prototype,"type",void 0),zy=v([H("esri.popup.content.Content")],zy);const Rh=zy;var qb;let Zl=qb=class extends Rh{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new qb({description:this.description,displayType:this.displayType,title:this.title})}};v([_({type:String,json:{write:!0}})],Zl.prototype,"description",void 0),v([_({type:["auto","preview","list"],json:{write:!0}})],Zl.prototype,"displayType",void 0),v([_({type:String,json:{write:!0}})],Zl.prototype,"title",void 0),v([_({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Zl.prototype,"type",void 0),Zl=qb=v([H("esri.popup.content.AttachmentsContent")],Zl);const df=Zl;var Ub;let Ql=Ub=class extends Rh{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new Ub({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ie(this.outFields):null})}};v([_()],Ql.prototype,"creator",void 0),v([_()],Ql.prototype,"destroyer",void 0),v([_()],Ql.prototype,"outFields",void 0),v([_({type:["custom"],readOnly:!0})],Ql.prototype,"type",void 0),Ql=Ub=v([H("esri.popup.content.CustomContent")],Ql);const Pz=Ql;var Bb;let tc=Bb=class extends ce{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Bb({title:this.title,expression:this.expression})}};v([_({type:String,json:{write:!0}})],tc.prototype,"title",void 0),v([_({type:String,json:{write:!0}})],tc.prototype,"expression",void 0),v([_({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],tc.prototype,"returnType",void 0),tc=Bb=v([H("esri.popup.ElementExpressionInfo")],tc);const pE=tc;var Hb;let Fd=Hb=class extends Rh{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new Hb({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};v([_({type:pE,json:{write:!0}})],Fd.prototype,"expressionInfo",void 0),v([_({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Fd.prototype,"type",void 0),Fd=Hb=v([H("esri.popup.content.ExpressionContent")],Fd);const E4=Fd;function Fe(e,t={}){var l;const i=e instanceof tt?e:new tt(e,t),s={type:(l=t==null?void 0:t.ignoreUnknown)==null||l?i.apiValues:String,json:{type:i.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(s.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(s.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(s.json.name=t.name),_(s)}const ff=tr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});ff.toJSON.bind(ff);ff.fromJSON.bind(ff);let D0;var EI,AI,kI;const H2=(kI=(EI=globalThis.esriConfig)==null?void 0:EI.locale)!=null?kI:(AI=globalThis.dojoConfig)==null?void 0:AI.locale;function dE(){var e,t;return(t=H2!=null?H2:(e=globalThis.navigator)==null?void 0:e.language)!=null?t:"en"}function ds(){return D0===void 0&&(D0=dE()),D0}const z0=[];function Nz(e){return z0.push(e),{remove(){z0.splice(z0.indexOf(e),1)}}}const Wb=[];function A4(e){return Wb.push(e),{remove(){z0.splice(Wb.indexOf(e),1)}}}function Rz(){const e=dE();D0!==e&&(D0=e,[...Wb].forEach(t=>{t.call(null,e)}),[...z0].forEach(t=>{t.call(null,e)}))}var OI;(OI=globalThis.addEventListener)==null||OI.call(globalThis,"languagechange",Rz);const zn={year:"numeric",month:"numeric",day:"numeric"},cd={year:"numeric",month:"long",day:"numeric"},pd={year:"numeric",month:"short",day:"numeric"},dd={year:"numeric",month:"long",weekday:"long",day:"numeric"},ks={hour:"numeric",minute:"numeric"},Xs={...ks,second:"numeric"},k4={"short-date":zn,"short-date-short-time":{...zn,...ks},"short-date-short-time-24":{...zn,...ks,hour12:!1},"short-date-long-time":{...zn,...Xs},"short-date-long-time-24":{...zn,...Xs,hour12:!1},"short-date-le":zn,"short-date-le-short-time":{...zn,...ks},"short-date-le-short-time-24":{...zn,...ks,hour12:!1},"short-date-le-long-time":{...zn,...Xs},"short-date-le-long-time-24":{...zn,...Xs,hour12:!1},"long-month-day-year":cd,"long-month-day-year-short-time":{...cd,...ks},"long-month-day-year-short-time-24":{...cd,...ks,hour12:!1},"long-month-day-year-long-time":{...cd,...Xs},"long-month-day-year-long-time-24":{...cd,...Xs,hour12:!1},"day-short-month-year":pd,"day-short-month-year-short-time":{...pd,...ks},"day-short-month-year-short-time-24":{...pd,...ks,hour12:!1},"day-short-month-year-long-time":{...pd,...Xs},"day-short-month-year-long-time-24":{...pd,...Xs,hour12:!1},"long-date":dd,"long-date-short-time":{...dd,...ks},"long-date-short-time-24":{...dd,...ks,hour12:!1},"long-date-long-time":{...dd,...Xs},"long-date-long-time-24":{...dd,...Xs,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":ks,"long-time":Xs},yf=tr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});yf.apiValues;yf.toJSON.bind(yf);yf.fromJSON.bind(yf);const jz={ar:"ar-u-nu-latn-ca-gregory"};let Vy=new WeakMap,fE=k4["short-date-short-time"];function Lz(e){const t=e||fE;if(!Vy.has(t)){const i=ds(),s=jz[ds()]||i;Vy.set(t,new Intl.DateTimeFormat(s,t))}return Vy.get(t)}function O4(e){return k4[e]||null}function pa(e,t){return Lz(t).format(e)}A4(()=>{Vy=new WeakMap,fE=k4["short-date-short-time"]});const Fz={ar:"ar-u-nu-latn"};let Gy=new WeakMap,yE={};function Dz(e){const t=e||yE;if(!Gy.has(t)){const i=ds(),s=Fz[ds()]||i;Gy.set(t,new Intl.NumberFormat(s,e))}return Gy.get(t)}function mE(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Cl(e,t){return e===-0&&(e=0),Dz(t).format(e)}A4(()=>{Gy=new WeakMap,yE={}});var Jb;let eu=Jb=class extends ce{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new Jb({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?pa(e,{...O4(this.dateFormat),...this.dateTimeFormatOptions}):Cl(e,mE(this))}formatRasterPixelValue(e){let t,i;return e.trim().includes(",")?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(";")?(t=";",i=t+" ",this._formatDelimitedString(e,t,i,this)):e.trim().includes(" ")?(t=i=" ",this._formatDelimitedString(e,t,i,this)):this.format(Number(e))}_formatDelimitedString(e,t,i,s){return e&&t&&i&&s?e.trim().split(t).map(l=>this.format(Number(l))).join(i):e}};v([Fe(ff)],eu.prototype,"dateFormat",void 0),v([_({type:Object,json:{read:!1}})],eu.prototype,"dateTimeFormatOptions",void 0),v([_({type:Boolean,json:{write:!0}})],eu.prototype,"digitSeparator",void 0),v([_({type:Ft,json:{write:!0}})],eu.prototype,"places",void 0),eu=Jb=v([H("esri.popup.support.FieldInfoFormat")],eu);const Kc=eu;var Kb;let sn=Kb=class extends ce{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new Kb({fieldName:this.fieldName,format:this.format?ie(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};v([_({type:String,json:{write:!0}})],sn.prototype,"fieldName",void 0),v([_({type:Kc,json:{write:!0}})],sn.prototype,"format",void 0),v([_({type:Boolean,json:{write:!0,default:!1}})],sn.prototype,"isEditable",void 0),v([_({type:String,json:{write:!0}})],sn.prototype,"label",void 0),v([Fe(new tt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],sn.prototype,"stringFieldOption",void 0),v([_({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],sn.prototype,"statisticType",void 0),v([_({type:String,json:{write:!0}})],sn.prototype,"tooltip",void 0),v([_({type:Boolean,json:{write:!0}})],sn.prototype,"visible",void 0),sn=Kb=v([H("esri.popup.FieldInfo")],sn);const Hf=sn;var Yb;let ko=Yb=class extends Rh{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new Yb(ie({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};v([_({type:Object,json:{write:!0}})],ko.prototype,"attributes",void 0),v([_({type:String,json:{write:!0}})],ko.prototype,"description",void 0),v([_({type:[Hf]})],ko.prototype,"fieldInfos",void 0),v([Ee("fieldInfos")],ko.prototype,"writeFieldInfos",null),v([_({type:String,json:{write:!0}})],ko.prototype,"title",void 0),v([_({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],ko.prototype,"type",void 0),ko=Yb=v([H("esri.popup.content.FieldsContent")],ko);const bp=ko;let tu=class extends ce{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};v([_({type:String,json:{write:!0}})],tu.prototype,"altText",void 0),v([_({type:String,json:{write:!0}})],tu.prototype,"caption",void 0),v([_({type:String,json:{write:!0}})],tu.prototype,"title",void 0),v([_({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],tu.prototype,"type",void 0),tu=v([H("esri.popup.content.mixins.MediaInfo")],tu);const C4=tu;var Xb;let ic=Xb=class extends ze{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new Xb({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};v([_()],ic.prototype,"fieldName",void 0),v([_()],ic.prototype,"tooltip",void 0),v([_()],ic.prototype,"value",void 0),ic=Xb=v([H("esri.popup.content.support.ChartMediaInfoValueSeries")],ic);const gE=ic;var Zb;let iu=Zb=class extends ce{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Zb({fields:ie(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};v([_({type:[String],json:{write:!0}})],iu.prototype,"fields",void 0),v([_({type:String,json:{write:!0}})],iu.prototype,"normalizeField",void 0),v([_({type:[gE],json:{read:!1}})],iu.prototype,"series",void 0),v([_({type:String,json:{write:!0}})],iu.prototype,"tooltipField",void 0),iu=Zb=v([H("esri.popup.content.support.ChartMediaInfoValue")],iu);const zz=iu;let Dd=class extends C4{constructor(e){super(e),this.type=null,this.value=null}};v([_({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Dd.prototype,"type",void 0),v([_({type:zz,json:{write:!0}})],Dd.prototype,"value",void 0),Dd=v([H("esri.popup.content.mixins.ChartMediaInfo")],Dd);const Ev=Dd,Av=tr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var Qb;let qy=Qb=class extends Ev{constructor(e){super(e),this.type="bar-chart"}clone(){return new Qb({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([_({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:Av.write}})],qy.prototype,"type",void 0),qy=Qb=v([H("esri.popup.content.BarChartMediaInfo")],qy);const vE=qy;var e3;let Uy=e3=class extends Ev{constructor(e){super(e),this.type="column-chart"}clone(){return new e3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([_({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:Av.write}})],Uy.prototype,"type",void 0),Uy=e3=v([H("esri.popup.content.ColumnChartMediaInfo")],Uy);const wE=Uy;var t3;let zd=t3=class extends ce{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new t3({linkURL:this.linkURL,sourceURL:this.sourceURL})}};v([_({type:String,json:{write:!0}})],zd.prototype,"linkURL",void 0),v([_({type:String,json:{write:!0}})],zd.prototype,"sourceURL",void 0),zd=t3=v([H("esri.popup.content.support.ImageMediaInfoValue")],zd);const Vz=zd;var i3;let rc=i3=class extends C4{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new i3({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};v([_({type:Number,json:{write:!0}})],rc.prototype,"refreshInterval",void 0),v([_({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],rc.prototype,"type",void 0),v([_({type:Vz,json:{write:!0}})],rc.prototype,"value",void 0),rc=i3=v([H("esri.popup.content.ImageMediaInfo")],rc);const bE=rc;var r3;let By=r3=class extends Ev{constructor(e){super(e),this.type="line-chart"}clone(){return new r3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([_({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:Av.write}})],By.prototype,"type",void 0),By=r3=v([H("esri.popup.content.LineChartMediaInfo")],By);const _E=By;var s3;let Hy=s3=class extends Ev{constructor(e){super(e),this.type="pie-chart"}clone(){return new s3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};v([_({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:Av.write}})],Hy.prototype,"type",void 0),Hy=s3=v([H("esri.popup.content.PieChartMediaInfo")],Hy);const xE=Hy,SE={base:C4,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":vE,"column-chart":wE,"line-chart":_E,"pie-chart":xE,image:bE}};var n3;let nn=n3=class extends Rh{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?bE.fromJSON(t):t.type==="barchart"?vE.fromJSON(t):t.type==="columnchart"?wE.fromJSON(t):t.type==="linechart"?_E.fromJSON(t):t.type==="piechart"?xE.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new n3(ie({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};v([_()],nn.prototype,"activeMediaInfoIndex",void 0),v([_({type:Object,json:{write:!0}})],nn.prototype,"attributes",void 0),v([_({type:String,json:{write:!0}})],nn.prototype,"description",void 0),v([_({types:[SE]})],nn.prototype,"mediaInfos",void 0),v([$e("mediaInfos")],nn.prototype,"readMediaInfos",null),v([Ee("mediaInfos")],nn.prototype,"writeMediaInfos",null),v([_({type:String,json:{write:!0}})],nn.prototype,"title",void 0),v([_({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],nn.prototype,"type",void 0),nn=n3=v([H("esri.popup.content.MediaContent")],nn);const mf=nn;var o3;let Vd=o3=class extends Rh{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new o3({text:this.text})}};v([_({type:String,json:{write:!0}})],Vd.prototype,"text",void 0),v([_({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Vd.prototype,"type",void 0),Vd=o3=v([H("esri.popup.content.TextContent")],Vd);const _p=Vd,Gz={base:null,key:"type",typeMap:{attachment:df,media:mf,text:_p,expression:E4,field:bp}};var a3;let ru=a3=class extends ce{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new a3({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([_({type:String,json:{write:!0}})],ru.prototype,"name",void 0),v([_({type:String,json:{write:!0}})],ru.prototype,"title",void 0),v([_({type:String,json:{write:!0}})],ru.prototype,"expression",void 0),v([_({type:["string","number"],json:{write:!0}})],ru.prototype,"returnType",void 0),ru=a3=v([H("esri.popup.ExpressionInfo")],ru);const $E=ru;var l3;let Gd=l3=class extends ce{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new l3({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};v([_({type:Boolean,json:{write:!0}})],Gd.prototype,"returnTopmostRaster",void 0),v([_({type:Boolean,json:{write:!0}})],Gd.prototype,"showNoDataRecords",void 0),Gd=l3=v([H("esri.popup.LayerOptions")],Gd);const qz=Gd;var u3;let qd=u3=class extends ce{constructor(e){super(e),this.field=null,this.order=null}clone(){return new u3({field:this.field,order:this.order})}};v([_({type:String,json:{write:!0}})],qd.prototype,"field",void 0),v([_({type:["asc","desc"],json:{write:!0}})],qd.prototype,"order",void 0),qd=u3=v([H("esri.popup.support.RelatedRecordsInfoFieldOrder")],qd);const ME=qd;var h3;let Ud=h3=class extends ce{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new h3({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ie(this.orderByFields):null})}};v([_({type:Boolean,json:{write:!0}})],Ud.prototype,"showRelatedRecords",void 0),v([_({type:[ME],json:{write:!0}})],Ud.prototype,"orderByFields",void 0),Ud=h3=v([H("esri.popup.RelatedRecordsInfo")],Ud);const Uz=Ud;let Bz=0;const kv=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Bz++})}};return t=v([H("esri.core.Identifiable")],t),t};let w7=class extends kv(class{}){};w7=v([H("esri.core.Identifiable")],w7);var c3;let on=c3=class extends kv(ze){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new c3({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};v([_()],on.prototype,"active",void 0),v([_()],on.prototype,"className",void 0),v([_()],on.prototype,"disabled",void 0),v([_()],on.prototype,"id",void 0),v([_()],on.prototype,"indicator",void 0),v([_()],on.prototype,"title",void 0),v([_()],on.prototype,"type",void 0),v([_()],on.prototype,"visible",void 0),on=c3=v([H("esri.support.actions.ActionBase")],on);const Ov=on;var p3;let Wy=p3=class extends Ov{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new p3({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};v([_()],Wy.prototype,"image",void 0),Wy=p3=v([H("esri.support.Action.ActionButton")],Wy);const zp=Wy;var d3;let Bd=d3=class extends Ov{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new d3({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};v([_()],Bd.prototype,"image",void 0),v([_()],Bd.prototype,"value",void 0),Bd=d3=v([H("esri.support.Action.ActionToggle")],Bd);const IE=Bd;var f3;const Hz=Ge.ofType({key:"type",defaultKeyValue:"button",base:Ov,typeMap:{button:zp,toggle:IE}}),Wz={base:Rh,key:"type",typeMap:{media:mf,custom:Pz,text:_p,attachments:df,fields:bp,expression:E4}},TE="esri.PopupTemplate",Jz=Me.getLogger(TE),Kz=["attachments","fields","media","text","expression"];let xi=f3=class extends ce{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>yo(Wz,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||fa(e)?e:(Jz.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:i}=t;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,i,s){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(l=>Kz.includes(l.type)).map(l=>l&&l.toJSON(s)),t.popupElements.forEach(l=>{l.type==="attachments"?this._writeAttachmentContent(t):l.type==="media"?this._writeMediaContent(l,t):l.type==="text"&&this._writeTextContent(l,t)})):t.description=e}writeFieldInfos(e,t,i,s){const{content:l}=this,d=Array.isArray(l)?l:null;if(e){const y=d?d.filter(x=>x.type==="fields"):[],g=y.length&&y.every(x=>{var $;return($=x.fieldInfos)==null?void 0:$.length});t.fieldInfos=e.filter(Boolean).map(x=>{const $=x.toJSON(s);return g&&($.visible=!1),$})}if(d)for(const y of d)y.type==="fields"&&this._writeFieldsContent(y,t)}writeLayerOptions(e,t,i,s){t[i]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(s)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?ie(e.toArray()):[];return new f3({actions:t,content:Array.isArray(this.content)?ie(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?ie(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?ie(this.fieldInfos):null,layerOptions:this.layerOptions?ie(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?ie(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?ie(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...i,...this._getContentExpressionInfos(this.content,i)]),pf(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const i=ie(e.fieldInfos);Array.isArray(t.fieldInfos)?i.forEach(s=>{const l=t.fieldInfos.find(d=>d.fieldName.toLowerCase()===s.fieldName.toLowerCase());l?l.visible=!0:t.fieldInfos.push(s)}):t.fieldInfos=i}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const i=ie(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...i]:t.mediaInfos=i}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:i}){const s={description:!1,mediaInfos:!1};return i.map(l=>l.type==="media"?(l.mediaInfos||!t||s.mediaInfos||(l.mediaInfos=t,s.mediaInfos=!0),mf.fromJSON(l)):l.type==="text"?(l.text||!e||s.description||(l.text=e,s.description=!0),_p.fromJSON(l)):l.type==="attachments"?df.fromJSON(l):l.type==="fields"?bp.fromJSON(l):l.type==="expression"?E4.fromJSON(l):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:i}){const s=[];return e?s.push(new _p({text:e})):s.push(new bp),Array.isArray(t)&&t.length&&s.push(mf.fromJSON({mediaInfos:t})),i&&s.push(df.fromJSON({displayType:"auto"})),s.length?s:e}_getContentElementFields(e){const t=e==null?void 0:e.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const i=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...i.reduce((s,l)=>[...s,...this._getMediaInfoFields(l)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:i,value:s}=e,l=s||{},{fields:d=[],normalizeField:y,tooltipField:g,sourceURL:x,linkURL:$}=l,E=[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(x),...this._extractFieldNames($),...d];return y&&E.push(y),g&&E.push(g),E}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,i)=>[...t,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(e,t,i){i&&await Promise.all(i.map(s=>Ar(e,t,s.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.includes("relationships/")&&!t.includes("expression/")):[]}_getActionsFields(e){return e?e.toArray().reduce((t,i)=>[...t,...this._getActionFields(i)],[]):[]}_getActionFields(e){const{className:t,title:i,type:s}=e,l=s==="button"||s==="toggle"?e.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(t),...this._extractFieldNames(l)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,i=e.match(t);if(!i)return[];const s=/\{(\w+):.+\}/,l=i.filter(d=>!(d.indexOf("{relationships/")===0||d.indexOf("{expression/")===0)).map(d=>d.replace(s,"{$1}"));return l?l.map(d=>d.slice(1,-1)):[]}};v([_({type:Hz})],xi.prototype,"actions",void 0),v([_()],xi.prototype,"content",void 0),v([mt("content")],xi.prototype,"castContent",null),v([$e("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],xi.prototype,"readContent",null),v([Ee("content",{popupElements:{type:Ge.ofType(Gz)},showAttachments:{type:Boolean},mediaInfos:{type:Ge.ofType(SE)},description:{type:String}})],xi.prototype,"writeContent",null),v([_({type:[$E],json:{write:!0}})],xi.prototype,"expressionInfos",void 0),v([_({type:[Hf]})],xi.prototype,"fieldInfos",void 0),v([Ee("fieldInfos")],xi.prototype,"writeFieldInfos",null),v([_({type:qz})],xi.prototype,"layerOptions",void 0),v([Ee("layerOptions")],xi.prototype,"writeLayerOptions",null),v([_({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],xi.prototype,"lastEditInfoEnabled",void 0),v([_()],xi.prototype,"outFields",void 0),v([_()],xi.prototype,"overwriteActions",void 0),v([_()],xi.prototype,"returnGeometry",void 0),v([_({json:{type:String}})],xi.prototype,"title",void 0),v([Ee("title")],xi.prototype,"writeTitle",null),v([_({type:Uz,json:{write:!0}})],xi.prototype,"relatedRecordsInfo",void 0),xi=f3=v([H(TE)],xi);const Vp=xi,fg={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function EE(e){return fg[e]||fg[e.toLowerCase()]}function P4(e){var t;return(t=fg[e])!=null?t:fg[e.toLowerCase()]}function Yz(e){return[...P4(e)]}function W2(e,t,i){i<0&&++i,i>1&&--i;const s=6*i;return s<1?e+(t-e)*s:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function AE(e,t,i,s=1){const l=(e%360+360)%360/360,d=i<=.5?i*(t+1):i+t-i*t,y=2*i-d;return[Math.round(255*W2(y,d,l+1/3)),Math.round(255*W2(y,d,l)),Math.round(255*W2(y,d,l-1/3)),s]}function Xz(e){const t=e.length>5,i=t?8:4,s=(1<<i)-1,l=t?1:17,d=t?e.length===9:e.length===5;let y=Number("0x"+e.substr(1));if(isNaN(y))return null;const g=[0,0,0,1];let x;return d&&(x=y&s,y>>=i,g[3]=l*x/255),x=y&s,y>>=i,g[2]=l*x,x=y&s,y>>=i,g[1]=l*x,x=y&s,y>>=i,g[0]=l*x,g}function bo(){return[0,0,0]}function Zz(e){return[e[0],e[1],e[2]]}function Gp(e,t,i){return[e,t,i]}function Qz(e){const t=bo(),i=Math.min(3,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function eV(e,t){return new Float64Array(e,t,3)}function kE(){return bo()}function OE(){return Gp(1,1,1)}function CE(){return Gp(1,0,0)}function PE(){return Gp(0,1,0)}function NE(){return Gp(0,0,1)}const tV=kE(),RE=OE(),iV=CE(),rV=PE(),sV=NE();Object.freeze(Object.defineProperty({__proto__:null,create:bo,clone:Zz,fromValues:Gp,fromArray:Qz,createView:eV,zeros:kE,ones:OE,unitX:CE,unitY:PE,unitZ:NE,ZEROS:tV,ONES:RE,UNIT_X:iV,UNIT_Y:rV,UNIT_Z:sV},Symbol.toStringTag,{value:"Module"}));const et=1e-6,_l=Math.random,nV=Math.PI/180,oV=180/Math.PI;function N4(e){return e*nV}function aV(e){return e*oV}function lV(e,t){return Math.abs(e-t)<=et*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:et,RANDOM:_l,toRadian:N4,toDegree:aV,equals:lV},Symbol.toStringTag,{value:"Module"}));function R4(e){const t=e[0],i=e[1],s=e[2];return Math.sqrt(t*t+i*i+s*s)}function y3(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function jE(e,t,i,s){return e[0]=t,e[1]=i,e[2]=s,e}function uV(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function LE(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function FE(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function DE(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function hV(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function cV(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function pV(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function dV(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function fV(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function yV(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function mV(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function zE(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function gV(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e}function VE(e,t){const i=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2];return Math.sqrt(i*i+s*s+l*l)}function GE(e,t){const i=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2];return i*i+s*s+l*l}function qE(e){const t=e[0],i=e[1],s=e[2];return t*t+i*i+s*s}function vV(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function wV(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function m3(e,t){const i=t[0],s=t[1],l=t[2];let d=i*i+s*s+l*l;return d>0&&(d=1/Math.sqrt(d),e[0]=t[0]*d,e[1]=t[1]*d,e[2]=t[2]*d),e}function UE(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bV(e,t,i){const s=t[0],l=t[1],d=t[2],y=i[0],g=i[1],x=i[2];return e[0]=l*x-d*g,e[1]=d*y-s*x,e[2]=s*g-l*y,e}function _V(e,t,i,s){const l=t[0],d=t[1],y=t[2];return e[0]=l+s*(i[0]-l),e[1]=d+s*(i[1]-d),e[2]=y+s*(i[2]-y),e}function xV(e,t,i,s,l,d){const y=d*d,g=y*(2*d-3)+1,x=y*(d-2)+d,$=y*(d-1),E=y*(3-2*d);return e[0]=t[0]*g+i[0]*x+s[0]*$+l[0]*E,e[1]=t[1]*g+i[1]*x+s[1]*$+l[1]*E,e[2]=t[2]*g+i[2]*x+s[2]*$+l[2]*E,e}function SV(e,t,i,s,l,d){const y=1-d,g=y*y,x=d*d,$=g*y,E=3*d*g,O=3*x*y,P=x*d;return e[0]=t[0]*$+i[0]*E+s[0]*O+l[0]*P,e[1]=t[1]*$+i[1]*E+s[1]*O+l[1]*P,e[2]=t[2]*$+i[2]*E+s[2]*O+l[2]*P,e}function $V(e,t){t=t||1;const i=2*_l()*Math.PI,s=2*_l()-1,l=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*l,e[1]=Math.sin(i)*l,e[2]=s*t,e}function MV(e,t,i){const s=t[0],l=t[1],d=t[2];return e[0]=i[0]*s+i[4]*l+i[8]*d+i[12],e[1]=i[1]*s+i[5]*l+i[9]*d+i[13],e[2]=i[2]*s+i[6]*l+i[10]*d+i[14],e}function IV(e,t,i){const s=t[0],l=t[1],d=t[2];return e[0]=s*i[0]+l*i[3]+d*i[6],e[1]=s*i[1]+l*i[4]+d*i[7],e[2]=s*i[2]+l*i[5]+d*i[8],e}function TV(e,t,i){const s=i[0],l=i[1],d=i[2],y=i[3],g=t[0],x=t[1],$=t[2];let E=l*$-d*x,O=d*g-s*$,P=s*x-l*g,R=l*P-d*O,L=d*E-s*P,z=s*O-l*E;const V=2*y;return E*=V,O*=V,P*=V,R*=2,L*=2,z*=2,e[0]=g+E+R,e[1]=x+O+L,e[2]=$+P+z,e}function EV(e,t,i,s){const l=[],d=[];return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],d[0]=l[0],d[1]=l[1]*Math.cos(s)-l[2]*Math.sin(s),d[2]=l[1]*Math.sin(s)+l[2]*Math.cos(s),e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function AV(e,t,i,s){const l=[],d=[];return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],d[0]=l[2]*Math.sin(s)+l[0]*Math.cos(s),d[1]=l[1],d[2]=l[2]*Math.cos(s)-l[0]*Math.sin(s),e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function kV(e,t,i,s){const l=[],d=[];return l[0]=t[0]-i[0],l[1]=t[1]-i[1],l[2]=t[2]-i[2],d[0]=l[0]*Math.cos(s)-l[1]*Math.sin(s),d[1]=l[0]*Math.sin(s)+l[1]*Math.cos(s),d[2]=l[2],e[0]=d[0]+i[0],e[1]=d[1]+i[1],e[2]=d[2]+i[2],e}function OV(e,t){y3(A1,e),y3(k1,t),m3(A1,A1),m3(k1,k1);const i=UE(A1,k1);return i>1?0:i<-1?Math.PI:Math.acos(i)}const A1=bo(),k1=bo();function CV(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function PV(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function NV(e,t){if(e===t)return!0;const i=e[0],s=e[1],l=e[2],d=t[0],y=t[1],g=t[2];return Math.abs(i-d)<=et*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-y)<=et*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-g)<=et*Math.max(1,Math.abs(l),Math.abs(g))}function RV(e,t,i){const s=i[0]-t[0],l=i[1]-t[1],d=i[2]-t[2];let y=s*s+l*l+d*d;return y>0?(y=1/Math.sqrt(y),e[0]=s*y,e[1]=l*y,e[2]=d*y,e):(e[0]=0,e[1]=0,e[2]=0,e)}const jV=LE,LV=FE,FV=DE,DV=VE,zV=GE,VV=R4,GV=qE;Object.freeze(Object.defineProperty({__proto__:null,length:R4,copy:y3,set:jE,add:uV,subtract:LE,multiply:FE,divide:DE,ceil:hV,floor:cV,abs:pV,sign:dV,min:fV,max:yV,round:mV,scale:zE,scaleAndAdd:gV,distance:VE,squaredDistance:GE,squaredLength:qE,negate:vV,inverse:wV,normalize:m3,dot:UE,cross:bV,lerp:_V,hermite:xV,bezier:SV,random:$V,transformMat4:MV,transformMat3:IV,transformQuat:TV,rotateX:EV,rotateY:AV,rotateZ:kV,angle:OV,str:CV,exactEquals:PV,equals:NV,direction:RV,sub:jV,mul:LV,div:FV,dist:DV,sqrDist:zV,len:VV,sqrLen:GV},Symbol.toStringTag,{value:"Module"}));function qV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function UV(e,t,i,s,l){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e}function BV(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function BE(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function HE(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function WE(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function HV(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function WV(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function JV(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function KV(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function YV(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function XV(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function ZV(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e}function JE(e,t){const i=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2],d=t[3]-e[3];return Math.sqrt(i*i+s*s+l*l+d*d)}function KE(e,t){const i=t[0]-e[0],s=t[1]-e[1],l=t[2]-e[2],d=t[3]-e[3];return i*i+s*s+l*l+d*d}function YE(e){const t=e[0],i=e[1],s=e[2],l=e[3];return Math.sqrt(t*t+i*i+s*s+l*l)}function XE(e){const t=e[0],i=e[1],s=e[2],l=e[3];return t*t+i*i+s*s+l*l}function QV(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function eG(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function tG(e,t){const i=t[0],s=t[1],l=t[2],d=t[3];let y=i*i+s*s+l*l+d*d;return y>0&&(y=1/Math.sqrt(y),e[0]=i*y,e[1]=s*y,e[2]=l*y,e[3]=d*y),e}function iG(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ZE(e,t,i,s){const l=t[0],d=t[1],y=t[2],g=t[3];return e[0]=l+s*(i[0]-l),e[1]=d+s*(i[1]-d),e[2]=y+s*(i[2]-y),e[3]=g+s*(i[3]-g),e}function rG(e,t){let i,s,l,d,y,g;t=t||1;do i=2*_l()-1,s=2*_l()-1,y=i*i+s*s;while(y>=1);do l=2*_l()-1,d=2*_l()-1,g=l*l+d*d;while(g>=1);const x=Math.sqrt((1-y)/g);return e[0]=t*i,e[1]=t*s,e[2]=t*l*x,e[3]=t*d*x,e}function sG(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3];return e[0]=i[0]*s+i[4]*l+i[8]*d+i[12]*y,e[1]=i[1]*s+i[5]*l+i[9]*d+i[13]*y,e[2]=i[2]*s+i[6]*l+i[10]*d+i[14]*y,e[3]=i[3]*s+i[7]*l+i[11]*d+i[15]*y,e}function nG(e,t,i){const s=t[0],l=t[1],d=t[2],y=i[0],g=i[1],x=i[2],$=i[3],E=$*s+g*d-x*l,O=$*l+x*s-y*d,P=$*d+y*l-g*s,R=-y*s-g*l-x*d;return e[0]=E*$+R*-y+O*-x-P*-g,e[1]=O*$+R*-g+P*-y-E*-x,e[2]=P*$+R*-x+E*-g-O*-y,e[3]=t[3],e}function oG(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function aG(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function lG(e,t){const i=e[0],s=e[1],l=e[2],d=e[3],y=t[0],g=t[1],x=t[2],$=t[3];return Math.abs(i-y)<=et*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(s-g)<=et*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-x)<=et*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(d-$)<=et*Math.max(1,Math.abs(d),Math.abs($))}const uG=BE,hG=HE,cG=WE,pG=JE,dG=KE,fG=YE,yG=XE;Object.freeze(Object.defineProperty({__proto__:null,copy:qV,set:UV,add:BV,subtract:BE,multiply:HE,divide:WE,ceil:HV,floor:WV,min:JV,max:KV,round:YV,scale:XV,scaleAndAdd:ZV,distance:JE,squaredDistance:KE,length:YE,squaredLength:XE,negate:QV,inverse:eG,normalize:tG,dot:iG,lerp:ZE,random:rG,transformMat4:sG,transformQuat:nG,str:oG,exactEquals:aG,equals:lG,sub:uG,mul:hG,div:cG,dist:pG,sqrDist:dG,len:fG,sqrLen:yG},Symbol.toStringTag,{value:"Module"}));const b7=new Float32Array(1);function Pde(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Kr(e,t,i){return Math.min(Math.max(e,t),i)}function Nde(e){return(e&e-1)==0}function Rde(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function jde(e,t,i){return e+(t-e)*i}function mG(e){return e*Math.PI/180}function QE(e){return 180*e/Math.PI}function Lde(e){return Math.acos(Kr(e,-1,1))}function eA(e){return Math.asin(Kr(e,-1,1))}function J2(e,t,i=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=i}function Fde(e){return tA(Math.max(-_7,Math.min(e,_7)))}function tA(e){return b7[0]=e,b7[0]}function Dde(e,t){const i=R4(e),s=eA(e[2]/i),l=Math.atan2(e[1]/i,e[0]/i);return jE(t,i,s,l),t}function zde(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],s=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(J2(t,1)&&J2(i,1)&&J2(s,1))}const _7=tA(34028234663852886e22);function O1(e){return Kr(r4(e),0,255)}function C1(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}class vi{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,i,s,l=new vi){return l.r=Math.round(t.r+(i.r-t.r)*s),l.g=Math.round(t.g+(i.g-t.g)*s),l.b=Math.round(t.b+(i.b-t.b)*s),l.a=t.a+(i.a-t.a)*s,l._sanitize()}static fromRgb(t,i){const s=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(s){const l=s[2].split(/\s*,\s*/),d=s[1];if(d==="rgb"&&l.length===3||d==="rgba"&&l.length===4){const y=l[0];if(y.charAt(y.length-1)==="%"){const g=l.map(x=>2.56*parseFloat(x));return l.length===4&&(g[3]=parseFloat(l[3])),vi.fromArray(g,i)}return vi.fromArray(l.map(g=>parseFloat(g)),i)}if(d==="hsl"&&l.length===3||d==="hsla"&&l.length===4)return vi.fromArray(AE(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100,parseFloat(l[3])),i)}return null}static fromHex(t,i=new vi){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const s=t.length===4?4:8,l=(1<<s)-1;let d=Number("0x"+t.substr(1));return isNaN(d)?null:(["b","g","r"].forEach(y=>{const g=d&l;d>>=s,i[y]=s===4?17*g:g}),i.a=1,i)}static fromArray(t,i=new vi){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const s=EE(t)?P4(t):null;return s&&vi.fromArray(s,i)||vi.fromRgb(t,i)||vi.fromHex(t,i)}static fromJSON(t){return t&&new vi([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return Y(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return Y(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){var i,s,l,d;return typeof t=="string"?vi.fromString(t,this):Array.isArray(t)?vi.fromArray(t,this):(this._set((i=t.r)!=null?i:0,(s=t.g)!=null?s:0,(l=t.b)!=null?l:0,(d=t.a)!=null?d:1),t instanceof vi||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),i=this.g.toString(16),s=this.b.toString(16);return`#${t.length<2?"0"+t:t}${i.length<2?"0"+i:i}${s.length<2?"0"+s:s}`}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=vi.AlphaMode.ALWAYS){const i=O1(this.r),s=O1(this.g),l=O1(this.b);return t===vi.AlphaMode.ALWAYS||this.a!==1?[i,s,l,O1(255*this.a)]:[i,s,l]}clone(){return new vi(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return Y(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(C1(this.r,0,255)),this.g=Math.round(C1(this.g,0,255)),this.b=Math.round(C1(this.b,0,255)),this.a=C1(this.a,0,1),this}_set(t,i,s,l){this.r=t,this.g=i,this.b=s,this.a=l}}vi.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(vi||(vi={}));const Je=vi,x7=new tt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let gG=0,sc=class extends ce{constructor(e){super(e),this.id="sym"+gG++,this.type=null,this.color=new Je([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};v([_({type:x7.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:x7.write}}})],sc.prototype,"type",void 0),v([_({type:Je,json:{write:{allowNull:!0}}})],sc.prototype,"color",void 0),v([$e("color")],sc.prototype,"readColor",null),sc=v([H("esri.symbols.Symbol")],sc);const Yr=sc;var g3;let Ra=g3=class extends Yr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const i in e)t[i]=e[i]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const s=i.map(l=>{const d=l.valueExpressionInfo;return Ar(e,t,d.expression)});await Promise.all(s)}}}clone(){return new g3({data:ie(this.data)})}hash(){return i4(JSON.stringify(this.data)).toString()}};v([_({json:{write:!1}})],Ra.prototype,"color",void 0),v([_({json:{write:!0}})],Ra.prototype,"data",void 0),v([$e("data",["symbol"])],Ra.prototype,"readData",null),v([Ee("data",{})],Ra.prototype,"writeData",null),v([Fe({CIMSymbolReference:"cim"},{readOnly:!0})],Ra.prototype,"type",void 0),Ra=g3=v([H("esri.symbols.CIMSymbol")],Ra);const Wf=Ra;let nc=class extends ce{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,i){e||(t[i]=e)}};v([_({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],nc.prototype,"enabled",void 0),v([Ee("enabled")],nc.prototype,"writeEnabled",null),v([_({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],nc.prototype,"type",void 0),nc=v([H("esri.symbols.Symbol3DLayer")],nc);const _o=nc,vG=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,wG="screenUtils.toPt: input not recognized!",iA=96;function rA(e){return e?e/72*iA:0}function mo(e){return e?72*e/iA:0}function _t(e){if(typeof e=="string"){const t=e.match(vG);if(t){const i=Number(t[1]),s=t[3]&&t[3].toLowerCase(),l=e.charAt(0)==="-",d=s==="px"?mo(i):i;return l?-d:d}return console.warn(wG),null}return e}function Ur(e=0,t=0){return{x:e,y:t}}function Vde(e=0,t=0){return[e,t]}function Cv(e){const t=r4(100*(1-e));return Math.max(0,Math.min(t,100))}function gf(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function bG(e,t){const i=t.transparency!=null?gf(t.transparency):1,s=t.color;return s&&Array.isArray(s)?new Je([s[0]||0,s[1]||0,s[2]||0,i]):null}function _G(e,t){t.color=e.toJSON().slice(0,3);const i=Cv(e.a);i!==0&&(t.transparency=i)}const Dl={type:Je,json:{type:[Ft],default:null,read:{source:["color","transparency"],reader:bG},write:{target:{color:{type:[Ft]},transparency:{type:Ft}},writer:_G}}},go={type:Number,cast:_t,json:{write:!0}};let su=class extends ce{constructor(e){super(e),this.color=new Je([0,0,0,1]),this.extensionLength=0,this.size=mo(1)}clone(){}cloneProperties(){return{color:ie(this.color),size:this.size,extensionLength:this.extensionLength}}};v([_({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],su.prototype,"type",void 0),v([_(Dl)],su.prototype,"color",void 0),v([_({...go,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],su.prototype,"extensionLength",void 0),v([_(go)],su.prototype,"size",void 0),su=v([H("esri.symbols.edges.Edges3D")],su);const j4=su;var v3;let Jy=v3=class extends j4{constructor(e){super(e),this.type="sketch"}clone(){return new v3(this.cloneProperties())}};v([Fe({sketch:"sketch"},{readOnly:!0})],Jy.prototype,"type",void 0),Jy=v3=v([H("esri.symbols.edges.SketchEdges3D")],Jy);const xG=Jy;var w3;let Ky=w3=class extends j4{constructor(e){super(e),this.type="solid"}clone(){return new w3(this.cloneProperties())}};v([Fe({solid:"solid"},{readOnly:!0})],Ky.prototype,"type",void 0),Ky=w3=v([H("esri.symbols.support.SolidEdges3D")],Ky);const SG=Ky,sA={types:{key:"type",base:j4,typeMap:{solid:SG,sketch:xG}},json:{write:!0}};var b3;let fs=b3=class extends ce{constructor(e){super(e),this.color=null}clone(){const e={color:Y(this.color)?this.color.clone():null};return new b3(e)}};v([_(Dl)],fs.prototype,"color",void 0),fs=b3=v([H("esri.symbols.support.Symbol3DMaterial")],fs);var _3;let ja=_3=class extends _o{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new _3({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:Y(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};v([Fe({Extrude:"extrude"},{readOnly:!0})],ja.prototype,"type",void 0),v([_({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],ja.prototype,"size",void 0),v([_({type:fs,json:{write:!0}})],ja.prototype,"material",void 0),v([_({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ja.prototype,"castShadows",void 0),v([_(sA)],ja.prototype,"edges",void 0),ja=_3=v([H("esri.symbols.ExtrudeSymbol3DLayer")],ja);const nA=ja;let Hd=class extends Yr{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};v([Fe({esriSLS:"simple-line"},{readOnly:!0})],Hd.prototype,"type",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],Hd.prototype,"width",void 0),Hd=v([H("esri.symbols.LineSymbol")],Hd);const $G=Hd,MG=["begin","end","begin-end"],oA=["arrow","circle","square","diamond","cross","x"];var x3;let Bn=x3=class extends ce{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,s){t[i]=(s==null?void 0:s.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,s){(s==null?void 0:s.origin)==="web-map"||(t[i]=e)}clone(){return new x3({color:ie(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};v([_({type:["begin","end","begin-end"],json:{write:!0}})],Bn.prototype,"placement",void 0),v([Fe({"line-marker":"line-marker"},{readOnly:!0}),_({json:{origins:{"web-map":{write:!1}}}})],Bn.prototype,"type",void 0),v([_({type:oA})],Bn.prototype,"style",void 0),v([Ee("style")],Bn.prototype,"writeStyle",null),v([_({type:Je,value:null,json:{write:{allowNull:!0}}})],Bn.prototype,"color",null),v([$e("color")],Bn.prototype,"readColor",null),v([Ee("color")],Bn.prototype,"writeColor",null),Bn=x3=v([H("esri.symbols.LineSymbolMarker")],Bn);const IG=Bn;var S3;const K2=new tt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Oo=S3=class extends $G{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,s,l,d){if(e&&typeof e!="string")return e;const y={};return e!=null&&(y.style=e),t!=null&&(y.color=t),i!=null&&(y.width=_t(i)),s!=null&&(y.cap=s),l!=null&&(y.join=l),d!=null&&(y.miterLimit=_t(d)),y}clone(){var e;return new S3({color:ie(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};v([Fe({esriSLS:"simple-line"},{readOnly:!0})],Oo.prototype,"type",void 0),v([_({type:K2.apiValues,json:{read:K2.read,write:K2.write}})],Oo.prototype,"style",void 0),v([_({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],Oo.prototype,"cap",void 0),v([_({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&(i==null||i.origin==null)})}}})],Oo.prototype,"join",void 0),v([_({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":IG}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Oo.prototype,"marker",void 0),v([_({type:Number,json:{read:!1,write:!1}})],Oo.prototype,"miterLimit",void 0),Oo=S3=v([H("esri.symbols.SimpleLineSymbol")],Oo);const _s=Oo;let Wd=class extends Yr{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};v([_({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":_s}},json:{default:null,write:!0}})],Wd.prototype,"outline",void 0),v([_({type:["simple-fill","picture-fill"],readOnly:!0})],Wd.prototype,"type",void 0),Wd=v([H("esri.symbols.FillSymbol")],Wd);const aA=Wd;let Yy=class extends ce{constructor(e){super(e)}clone(){}};v([_({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Yy.prototype,"type",void 0),Yy=v([H("esri.symbols.patterns.LinePattern3D")],Yy);const lA=Yy,TG=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var $3;const EG=tr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Jd=$3=class extends lA{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new $3(e)}};v([_({type:["style"]})],Jd.prototype,"type",void 0),v([Fe(EG),_({type:TG})],Jd.prototype,"style",void 0),Jd=$3=v([H("esri.symbols.patterns.LineStylePattern3D")],Jd);const L4=Jd;let Xy=class extends ce{constructor(e){super(e)}clone(){}};v([_({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Xy.prototype,"type",void 0),Xy=v([H("esri.symbols.patterns.Pattern3D")],Xy);const uA=Xy,AG=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var M3;let Kd=M3=class extends uA{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new M3(e)}};v([_({type:["style"]})],Kd.prototype,"type",void 0),v([_({type:AG,json:{read:!0,write:!0}})],Kd.prototype,"style",void 0),Kd=M3=v([H("esri.symbols.patterns.StylePattern3D")],Kd);const hA=Kd,kG={types:{key:"type",base:uA,typeMap:{style:hA}},json:{write:!0}},cA={types:{key:"type",base:lA,typeMap:{style:L4}},json:{write:!0}},V0=new Je("white");new Je("black");const OG=new Je([255,255,255,0]);function CG(e){return e.r===0&&e.g===0&&e.b===0}var I3;let G0=I3=class extends fs{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:Y(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new I3(e)}};v([Fe({multiply:"multiply",replace:"replace",tint:"tint"})],G0.prototype,"colorMixMode",void 0),G0=I3=v([H("esri.symbols.support.Symbol3DFillMaterial")],G0);function Pl(e=LG){return[e[0],e[1],e[2],e[3]]}function Gde(e){return[e[0],e[1],e[2],e[3]]}function PG(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function qde(e,t,i,s,l=Pl()){return l[0]=e,l[1]=t,l[2]=i,l[3]=s,l}function Ude(e,t=Pl()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Bde(e,t){return new xt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Hde(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function NG(e){return he(e)||e[0]>=e[2]?0:e[2]-e[0]}function RG(e){return e[1]>=e[3]?0:e[3]-e[1]}function Wde(e){return NG(e)*RG(e)}function Jde(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function Kde(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[0]<=e[2]+i&&t[1]<=e[3]+i}function Yde(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function jG(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Xde(e){return e?PG(e,S7):Pl(S7)}const S7=[1/0,1/0,-1/0,-1/0],LG=[0,0,0,0];function F4(e=GG){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function D4(e,t,i,s,l,d,y=F4()){return y[0]=e,y[1]=t,y[2]=i,y[3]=s,y[4]=l,y[5]=d,y}function Zde(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new xt(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Qde(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function e0e(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function FG(e){return e[0]>=e[3]?0:e[3]-e[0]}function DG(e){return e[1]>=e[4]?0:e[4]-e[1]}function zG(e){return e[2]>=e[5]?0:e[5]-e[2]}function t0e(e,t=[0,0,0]){return t[0]=FG(e),t[1]=DG(e),t[2]=zG(e),t}function i0e(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function r0e(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function VG(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function s0e(e){return e?VG(e,M7):F4(M7)}function n0e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function $7(e){return e.length===6}function o0e(e,t,i){if(he(e)||he(t))return e===t;if(!$7(e)||!$7(t))return!1;if(i){for(let s=0;s<e.length;s++)if(!i(e[s],t[s]))return!1}else for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}const M7=[1/0,1/0,1/0,-1/0,-1/0,-1/0],GG=[0,0,0,0,0,0];F4();function a0e(e,{isPrimitive:t,width:i,depth:s,height:l}){const d=t?10:1;if(i==null&&l==null&&s==null)return[d*e[0],d*e[1],d*e[2]];const y=Gp(i,s,l);let g;for(let x=0;x<3;x++){const $=y[x];if($!=null){g=$/e[x];break}}for(let x=0;x<3;x++)y[x]==null&&(y[x]=e[x]*g);return y}const qG=D4(-.5,-.5,-.5,.5,.5,.5),UG=D4(-.5,-.5,0,.5,.5,1),BG=D4(-.5,-.5,0,.5,.5,.5);function l0e(e){switch(e){case"sphere":case"cube":case"diamond":return qG;case"cylinder":case"cone":case"inverted-cone":return UG;case"tetrahedron":return BG;default:return}}const z4=["butt","square","round"],HG=[...z4,"none"],pA=["miter","bevel","round"];var T3;let nu=T3=class extends ce{constructor(e){super(e),this.color=new Je([0,0,0,1]),this.size=mo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:Y(this.color)?this.color.clone():null,size:this.size,pattern:Y(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new T3(e)}};v([_(Dl)],nu.prototype,"color",void 0),v([_(go)],nu.prototype,"size",void 0),v([_(cA)],nu.prototype,"pattern",void 0),v([_({type:z4,json:{default:"butt",write:{overridePolicy(){return{enabled:Y(this.pattern)}}}}})],nu.prototype,"patternCap",void 0),nu=T3=v([H("esri.symbols.support.Symbol3DOutline")],nu);var Zy;let Co=Zy=class extends _o{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:Y(this.edges)?this.edges.clone():null,enabled:this.enabled,material:Y(this.material)?this.material.clone():null,pattern:Y(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:Y(this.outline)?this.outline.clone():null};return new Zy(e)}static fromSimpleFillSymbol(e){var s,l,d,y,g,x;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new L4({style:e.outline.style}):null,i={size:(l=(s=e.outline)==null?void 0:s.width)!=null?l:0,color:((y=(d=e.outline)==null?void 0:d.color)!=null?y:V0).clone(),pattern:t};return t&&((g=e.outline)==null?void 0:g.cap)&&(i.patternCap=e.outline.cap),new Zy({material:new G0({color:((x=e.color)!=null?x:OG).clone()}),pattern:e.style&&e.style!=="solid"?new hA({style:e.style}):null,outline:i})}};v([Fe({Fill:"fill"},{readOnly:!0})],Co.prototype,"type",void 0),v([_({type:G0,json:{write:!0}})],Co.prototype,"material",void 0),v([_(kG)],Co.prototype,"pattern",void 0),v([_({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Co.prototype,"castShadows",void 0),v([_({type:nu,json:{write:!0}})],Co.prototype,"outline",void 0),v([_(sA)],Co.prototype,"edges",void 0),Co=Zy=v([H("esri.symbols.FillSymbol3DLayer")],Co);const Pv=Co,WG=["none","underline","line-through"],JG=["normal","italic","oblique"],KG=["normal","lighter","bold","bolder"],dA={type:Number,cast:e=>{const t=Gs(e);return t===0?1:Kr(t,.1,4)},nonNullable:!0},YG=["left","right","center"],XG=["baseline","top","middle","bottom"],fA={type:YG,nonNullable:!0},yA={type:XG,nonNullable:!0};var E3;let Po=E3=class extends ce{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return _t(e)}clone(){return new E3({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};v([_({type:WG,json:{default:"none",write:!0}})],Po.prototype,"decoration",void 0),v([_({type:String,json:{write:!0}})],Po.prototype,"family",void 0),v([_({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Po.prototype,"size",void 0),v([mt("size")],Po.prototype,"castSize",null),v([_({type:JG,json:{default:"normal",write:!0}})],Po.prototype,"style",void 0),v([_({type:KG,json:{default:"normal",write:!0}})],Po.prototype,"weight",void 0),Po=E3=v([H("esri.symbols.Font")],Po);const Nv=Po,ZG=Me.getLogger("esri.core.urlUtils"),qp=vt.request,I7="esri/config: esriConfig.request.proxyUrl is not set.",mA=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,gA=/^\s*http:/i,QG=/^\s*https:/i,eq=/^\s*file:/i,tq=/:\d+$/,iq=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,rq=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),sq=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class Ml{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(rq);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(sq),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}}const P1={},nq=new Ml(vt.applicationUrl);let hr=nq;const oq=aq();let V4=oq;const G4=()=>hr,u0e=()=>V4;function aq(){const e=hr.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${hr.scheme}://${hr.host}${hr.port!=null?`:${hr.port}`:""}`}${t}`}function fi(e){const t={path:null,query:null},i=new Ml(e),s=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.substring(0,s),t.query=vA(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.substring(0,t.path.length-(i.fragment.length+1)))),t}function vA(e){const t=e.split("&"),i={};for(const s of t){if(!s)continue;const l=s.indexOf("=");let d,y;l<0?(d=decodeURIComponent(s),y=""):(d=decodeURIComponent(s.slice(0,l)),y=decodeURIComponent(s.slice(l+1)));let g=i[d];typeof g=="string"&&(g=i[d]=[g]),Array.isArray(g)?g.push(y):i[d]=y}return i}function T7(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function vf(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const s=e[i];if(s==null)return"";const l=encodeURIComponent(i)+"=",d=t&&t[i];return d?l+encodeURIComponent(d(s)):Array.isArray(s)?s.map(y=>T7(y)?l+encodeURIComponent(JSON.stringify(y)):l+encodeURIComponent(y)).join("&"):T7(s)?l+encodeURIComponent(JSON.stringify(s)):l+encodeURIComponent(s)}).filter(i=>i).join("&"):""}function lq(e=!1){let t,i=qp.proxyUrl;if(typeof e=="string"){t=fq(e);const s=Rv(e);s&&(i=s.proxyUrl)}else t=!!e;if(!i)throw ZG.warn(I7),new te("urlutils:proxy-not-set",I7);return t&&A3()&&(i=J4(i)),fi(i)}function h0e(e){const t=Rv(e);let i,s;if(t){const l=q4(t.proxyUrl);i=l.path,s=l.query?vA(l.query):null}if(i){const l=fi(e);e=i+"?"+l.path;const d=vf({...s,...l.query});d&&(e=`${e}?${d}`)}return e}const fd={path:"",query:""};function q4(e){const t=e.indexOf("?");return t!==-1?(fd.path=e.slice(0,t),fd.query=e.slice(t+1)):(fd.path=e,fd.query=null),fd}function wA(e){return e=(e=yg(e=bq(e=q4(e).path),!0)).toLowerCase()}function uq(e){const t={proxyUrl:e.proxyUrl,urlPrefix:wA(e.urlPrefix)},i=qp.proxyRules,s=t.urlPrefix;let l=i.length;for(let d=0;d<i.length;d++){const y=i[d].urlPrefix;if(s.indexOf(y)===0){if(s.length===y.length)return-1;l=d;break}y.indexOf(s)===0&&(l=d+1)}return i.splice(l,0,t),l}function Rv(e){const t=qp.proxyRules,i=wA(e);for(let s=0;s<t.length;s++)if(i.indexOf(t[s].urlPrefix)===0)return t[s]}function bA(e,t){return e=E7(e),t=E7(t),yg(e)===yg(t)}function E7(e){const t=(e=kn(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function _A(e){const t=s=>s==null||s instanceof RegExp&&s.test(e)||typeof s=="string"&&e.startsWith(s),i=qp.interceptors;if(i){for(const s of i)if(Array.isArray(s.urls)){if(s.urls.some(t))return s}else if(t(s.urls))return s}return null}function wf(e,t,i=!1){const s=O3(e),l=O3(t);return!(!i&&s.scheme!==l.scheme)&&s.host!=null&&l.host!=null&&s.host.toLowerCase()===l.host.toLowerCase()&&s.port===l.port}function U4(e){if(typeof e=="string"){if(!ys(e))return!0;e=O3(e)}if(wf(e,hr))return!0;const t=qp.trustedServers||[];for(let i=0;i<t.length;i++){const s=hq(t[i]);for(let l=0;l<s.length;l++)if(wf(e,s[l]))return!0}return!1}function hq(e){return P1[e]||(W4(e)||vo(e)?P1[e]=[new Ml(cs(e))]:P1[e]=[new Ml(`http://${e}`),new Ml(`https://${e}`)]),P1[e]}function cs(e,t=V4,i){return vo(e)?i&&i.preserveProtocolRelative?e:hr.scheme==="http"&&hr.authority===On(e).slice(2)?`http:${e}`:`https:${e}`:W4(e)?e:Sh(e[0]==="/"?vq(t):t,e)}function B4(e,t=V4,i){if(!ys(e))return e;const s=kn(e),l=s.toLowerCase(),d=kn(t).toLowerCase().replace(/\/+$/,""),y=i?kn(i).toLowerCase().replace(/\/+$/,""):null;if(y&&d.indexOf(y)!==0)return e;const g=(O,P,R)=>(R=O.indexOf(P,R))===-1?O.length:R;let x=g(l,"/",l.indexOf("//")+2),$=-1;for(;l.slice(0,x+1)===d.slice(0,x)+"/"&&($=x+1,x!==l.length);)x=g(l,"/",x+1);if($===-1||y&&$<y.length)return e;e=s.slice($);const E=d.slice($-1).replace(/[^/]+/g,"").length;if(E>0)for(let O=0;O<E;O++)e=`../${e}`;else e=`./${e}`;return e}function kn(e){return e=Sq(e=xq(e=_q(e=cs(e=e.trim()))))}function Sh(...e){const t=e.filter(Y);if(!t||!t.length)return;const i=[];if(ys(t[0])){const l=t[0],d=l.indexOf("//");d!==-1&&(i.push(l.slice(0,d+1)),mq(t[0])&&(i[0]+="/"),t[0]=l.slice(d+2))}else t[0][0]==="/"&&i.push("");const s=t.reduce((l,d)=>d?l.concat(d.split("/")):l,[]);for(let l=0;l<s.length;l++){const d=s[l];d===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!d&&l===s.length-1||d&&(d!=="."||i.length===0))&&i.push(d)}return i.join("/")}function On(e,t=!1){if(jv(e)||zl(e))return null;let i=e.indexOf("://");if(i===-1&&vo(e))i=2;else{if(i===-1)return null;i+=3}const s=e.indexOf("/",i);return s!==-1&&(e=e.slice(0,s)),t&&(e=yg(e,!0)),e}function ys(e){return vo(e)||W4(e)}function jv(e){return e!=null&&e.slice(0,5)==="blob:"}function zl(e){return e.slice(0,5)==="data:"}function c0e(e){const t=H4(e);if(!t||!t.isBase64)return null;const i=atob(t.data),s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s.buffer}function p0e(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const cq=/^data:(.*?)(;base64)?,(.*)$/;function H4(e){const t=e.match(cq);if(!t)return null;const[,i,s,l]=t;return{mediaType:i,isBase64:!!s,data:l}}function xA(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function d0e(e,t){pq(e,t)||dq(e,t)}function pq(e,t){if(!e)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const s=URL.createObjectURL(e);return i.download=t,i.href=s,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),!0}function dq(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function vo(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function W4(e){return mA.test(e)}function fq(e){return QG.test(e)||hr.scheme==="https"&&vo(e)}function yq(e){return gA.test(e)||hr.scheme==="http"&&vo(e)}function mq(e){return eq.test(e)}function J4(e){return vo(e)?`https:${e}`:e.replace(gA,"https:")}function gq(){return hr.scheme==="http"}function A3(){return hr.scheme==="https"}function yg(e,t=!1){return vo(e)?e.slice(2):(e=e.replace(mA,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function vq(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function wq(e){let t=0;if(ys(e)){const s=e.indexOf("//");s!==-1&&(t=s+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function f0e(e,t){if(!e)return"";const i=fi(e).path.replace(/\/+$/,""),s=i.substring(i.lastIndexOf("/")+1);if(!(t!=null&&t.length))return s;const l=new RegExp(`.(${t.join("|")})$`,"ig");return s.replace(l,"")}function bq(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function SA(e){return e.replace(/\/+$/,"")}function _q(e){if(/^https?:\/\//i.test(e)){const t=q4(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function xq(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Sq(e){const t=qp.httpsDomains;if(!yq(e))return e;const i=e.indexOf("/",7);let s;if(s=i===-1?e:e.slice(0,i),s=s.toLowerCase().slice(7),tq.test(s)){if(!s.endsWith(":80"))return e;s=s.slice(0,-3),e=e.replace(":80","")}return gq()&&s===hr.authority&&!iq.test(e)||(A3()&&s===hr.authority||t&&t.some(l=>s===l||s.endsWith(`.${l}`))||A3()&&!Rv(e))&&(e=J4(e)),e}function k3(e,t,i){if(!(t&&i&&e&&ys(e)))return e;const s=e.indexOf("//"),l=e.indexOf("/",s+2),d=e.indexOf(":",s+2),y=Math.min(l<0?e.length:l,d<0?e.length:d);return e.slice(s+2,y).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,s+2)}${i}${e.slice(y)}`}function O3(e){return typeof e=="string"?new Ml(cs(e)):(e.scheme||(e.scheme=hr.scheme),e)}function y0e(e){return Mq.test(e)}function $A(e,t){const i=fi(e),s=Object.keys(i.query||{});return s.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${s.join(", ")}.`),i.path}function K4(e,t,i){const s=fi(e),l=s.query||{};return l[t]=String(i),`${s.path}?${vf(l)}`}function Y2(e,t){const i=fi(e),s=i.query||{};for(const d in t)s[d]=t[d];const l=vf(s);return l?`${i.path}?${l}`:i.path}function m0e(e){if(he(e))return null;const t=e.match($q);return t?t[1]:null}const $q=/.*?\.([^\/]*)$/,Mq=/(^data:image\/svg|\.svg$)/i;function Up(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=cs(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const s=B4(e,t.portalItem.itemUrl);Tq.test(s)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(s).path)}return C3(e,t&&t.portal)}function Jf(e,t,i=bf.YES){if(!e)return e;!ys(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let s=cs(e);if(t){const l=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(l){const d=C3(l,t.portal);s=B4(C3(s,t.portal),d,d),s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=MA(s,t&&t.portal),ys(s)&&(s=kn(s)),(t==null?void 0:t.resources)&&(t==null?void 0:t.portalItem)&&!ys(s)&&!zl(s)&&i===bf.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s)}),s}function Y4(e,t,i){return Up(e,i)}function $h(e,t,i,s){const l=Jf(e,s);l!==void 0&&(t[i]=l)}const Iq=/\/items\/([^\/]+)\/resources\//,Tq=/^\.\/resources\//;function Eq(e){const t=Y(e)?e.match(Iq):null;return Y(t)?t[1]:null}function MA(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?k3(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function C3(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,s=G4();return wf(s,`${s.scheme}://${i}`)?k3(e,t.portalHostname,i):k3(e,i,t.portalHostname)}var bf;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(bf||(bf={}));const g0e=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:Up,toJSON:Jf,read:Y4,write:$h,itemIdFromResourceUrl:Eq,ensureMainOnlineDomain:MA,get MarkKeep(){return bf}},Symbol.toStringTag,{value:"Module"}));var P3;const Aq=tr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ou=P3=class extends ce{constructor(e){super(e)}readHref(e,t,i){return e?Up(e,i):t.dataURI}writeHref(e,t,i,s){e&&(zl(e)?t.dataURI=e:(t.href=Jf(e,s),ys(t.href)&&(t.href=kn(t.href))))}clone(){return new P3({href:this.href,primitive:this.primitive})}};v([_({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ou.prototype,"href",void 0),v([$e("href")],ou.prototype,"readHref",null),v([Ee("href",{href:{type:String},dataURI:{type:String}})],ou.prototype,"writeHref",null),v([Fe(Aq)],ou.prototype,"primitive",void 0),ou=P3=v([H("esri.symbols.support.IconSymbol3DLayerResource")],ou);var N3;let Yc=N3=class extends ze{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new N3({x:this.x,y:this.y})}};v([_({type:Number})],Yc.prototype,"x",void 0),v([_({type:Number})],Yc.prototype,"y",void 0),Yc=N3=v([H("esri.symbols.support.Symbol3DAnchorPosition2D")],Yc);var R3;let Yd=R3=class extends ce{constructor(e){super(e),this.color=new Je([0,0,0,1]),this.size=mo(1)}clone(){const e={color:Y(this.color)?this.color.clone():null,size:this.size};return new R3(e)}};v([_(Dl)],Yd.prototype,"color",void 0),v([_(go)],Yd.prototype,"size",void 0),Yd=R3=v([H("esri.symbols.support.Symbol3DIconOutline")],Yd);var oc;const kq=Me.getLogger("esri.symbols.IconSymbol3DLayer");let Hn=oc=class extends _o{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new oc({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:Y(this.material)?this.material.clone():null,outline:Y(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||V0,i=A7(e),s=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||V0).clone()}:null;return new oc({size:e.size,resource:{primitive:Cq(e.style)},material:{color:t},outline:s,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||CG(e.color)?V0:e.color,i=A7(e);return new oc({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new oc({resource:{href:xA({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function A7(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,s=k7(e.xoffset),l=k7(e.yoffset);return(s||l)&&t&&i?{x:-s/t,y:l/i}:null}function k7(e){return isFinite(e)?e:0}v([_({type:fs,json:{write:!0}})],Hn.prototype,"material",void 0),v([_({type:ou,json:{write:!0}})],Hn.prototype,"resource",void 0),v([Fe({Icon:"icon"},{readOnly:!0})],Hn.prototype,"type",void 0),v([_(go)],Hn.prototype,"size",void 0),v([Fe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),_({json:{default:"center"}})],Hn.prototype,"anchor",void 0),v([_({type:Yc,json:{type:[Number],read:{reader:e=>new Yc({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Hn.prototype,"anchorPosition",void 0),v([_({type:Yd,json:{write:!0}})],Hn.prototype,"outline",void 0),Hn=oc=v([H("esri.symbols.IconSymbol3DLayer")],Hn);const Oq={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Cq(e){return Oq[e]||(kq.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Ju=Hn;function Mh(e,t,i=Ge){return t||(t=new i),t===e||(t.removeAll(),Pq(e)?t.addMany(e):e&&t.add(e)),t}function IA(e){return e}function Pq(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}const TA="20220708",EA="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",X4="4.24",Nq={async request(e,t){var g;const{default:i}=await fe(()=>Promise.resolve().then(function(){return Xq}),void 0),s=e.options,l=s.responseType;s.signal=t==null?void 0:t.signal,s.responseType=l==="native"||l==="native-request-init"?"native-request-init":["blob","json","text"].includes(l)&&((g=_A(e.url))==null?void 0:g.after)?l:"array-buffer";const d=await i(e.url,s),y={data:d.data,ssl:d.ssl};switch(d.requestOptions.responseType){case"native-request-init":return delete y.data.signal,y;case"blob":y.data=await y.data.arrayBuffer();break;case"json":y.data=new TextEncoder().encode(JSON.stringify(y.data)).buffer;break;case"text":y.data=new TextEncoder().encode(y.data).buffer}return{result:y,transferList:[y.data]}}};let si;function v0e(e){si=e}function w0e(e){const t=si&&si.findCredential(e);return t&&t.token?K4(e,"token",t.token):e}pe("host-webworker")||(pe("edge")||pe("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const Rq=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function AA(e){const t=On(e,!0);return t&&t.endsWith(".arcgis.com")&&!Rq.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function jq(e,t,i=!1,s){return new Promise((l,d)=>{if(Nn(s))return void d(O7());let y=()=>{$(),d(new Error(`Unable to load ${t}`))},g=()=>{const E=e;$(),l(E)},x=()=>{if(!e)return;const E=e;$(),E.src="",d(O7())};const $=()=>{pe("esri-image-decode")||(e.removeEventListener("error",y),e.removeEventListener("load",g)),y=null,g=null,e=null,Y(s)&&s.removeEventListener("abort",x),x=null,i&&URL.revokeObjectURL(t)};Y(s)&&s.addEventListener("abort",x),pe("esri-image-decode")?e.decode().then(g,y):(e.addEventListener("error",y),e.addEventListener("load",g))})}function O7(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function Lq(e){vt.request.crossOriginNoCorsDomains||(vt.request.crossOriginNoCorsDomains={});const t=vt.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[On(i)]=0:(t[On("http://"+i)]=0,t[On("https://"+i)]=0)}function Fq(e){const t=vt.request.crossOriginNoCorsDomains;if(t){let i=On(e);if(i)return i=i.toLowerCase(),!wf(i,G4())&&t[i]<Date.now()-36e5}return!1}async function Dq(e){var s;const t=vt.request.crossOriginNoCorsDomains;t&&(t[On(e).toLowerCase()]=Date.now());const i=fi(e);e=i.path,((s=i.query)==null?void 0:s.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Vt(e,t){var $;const i=zl(e),s=jv(e);s||i||(e=kn(e));const l={url:e,requestOptions:{...t}};let d=_A(e);if(d){const E=await Wq(d,l);if(E!=null)return{data:E,getHeader:Z4,requestOptions:l.requestOptions,url:l.url};d.after||d.error||(d=null)}if(e=l.url,(t=l.requestOptions).responseType==="image"){if(pe("host-webworker")||pe("host-node"))throw Tn("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),l)}else if(i)throw Tn("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),l);if(t.method==="head"){if(t.body)throw Tn("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),l);if(i||s)throw Tn("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),l)}if(await Uq(),mg)return mg.execute(e,t);const y=new AbortController;Rn(t,()=>y.abort());const g={controller:y,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:d,params:l,redoRequest:!1,useIdentity:xn.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},x=await Kq(g);return($=d==null?void 0:d.after)==null||$.call(d,x),x}let mg;const xn=vt.request,kA="FormData"in globalThis,zq=[499,498,403,401],Vq=["COM_0056","COM_0057","SB_0008"],Gq=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],Z4=()=>null,j3=Symbol();function qq(e){const t=On(e);t&&!Vt._corsServers.includes(t)&&Vt._corsServers.push(t)}function C7(e){const t=On(e);return!t||t.endsWith(".arcgis.com")||Vt._corsServers.includes(t)||U4(t)}function Tn(e,t,i,s){let l="Error";const d={url:i.url,requestOptions:i.requestOptions,getHeader:Z4,ssl:!1};if(t instanceof te)return t.details?(t.details=ie(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=d,t;if(t){const y=s&&($=>s.headers.get($)),g=s&&s.status,x=t.message;x&&(l=x),y&&(d.getHeader=y),d.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||g||0,d.subCode=t.subcode,d.messageCode=t.messageCode,typeof t.details=="string"?d.messages=[t.details]:d.messages=t.details,d.raw=j3 in t?t[j3]:t}return bs(t)?pi():new te(e,l,d)}async function Uq(){pe("host-webworker")?mg||(mg=await fe(()=>import("./request.647148d6.js"),[])):Vt._abortableFetch||(Vt._abortableFetch=globalThis.fetch.bind(globalThis))}async function L3(){si||await fe(()=>import("./IdentityManager.2eefae90.js"),[])}async function Bq(e){var g;const t=e.params.url,i=e.params.requestOptions,s=e.controller.signal,l=i.body;let d=null,y=null;if(kA&&"HTMLFormElement"in globalThis&&(l instanceof FormData?d=l:l instanceof HTMLFormElement&&(d=new FormData(l))),typeof l=="string"&&(y=l),e.fetchOptions={cache:i.cacheBust&&!Vt._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:xn.priority,redirect:"follow",signal:s},(d||y)&&(e.fetchOptions.body=d||y),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||((g=i.query)==null?void 0:g.token)||(d==null?void 0:d.get("token"))),!e.hasToken&&vt.apiKey&&AA(t)&&(i.query||(i.query={}),i.query.token=vt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!OA(t)&&!Nn(s)){let x;i.authMode==="immediate"?(await L3(),x=await si.getCredential(t,{signal:s}),e.credential=x):i.authMode==="no-prompt"?(await L3(),x=await si.getCredential(t,{prompt:!1,signal:s}).catch(()=>{}),e.credential=x):si&&(x=si.findCredential(t)),x&&(e.credentialToken=x.token,e.useSSL=!!x.ssl)}}function OA(e){return Gq.some(t=>t.test(e))}async function Hq(e){let t=e.params.url;const i=e.params.requestOptions,s=e.fetchOptions,l=jv(t)||zl(t),d=i.responseType||"json",y=l?0:i.timeout!=null?i.timeout:xn.timeout;let g=!1;if(!l){e.useSSL&&(t=J4(t)),i.cacheBust&&s.cache==="default"&&(t=K4(t,"request.preventCache",Date.now()));let P={...i.query};e.credentialToken&&(P.token=e.credentialToken);let R=vf(P);pe("esri-url-encodes-apostrophe")&&(R=R.replace(/'/g,"%27"));const L=t.length+1+R.length;let z;g=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||L>xn.maxUrlLength;const V=i.useProxy||!!Rv(t);if(V){const K=lq(t);z=K.path,!g&&z.length+1+L>xn.maxUrlLength&&(g=!0),K.query&&(P={...K.query,...P})}if(s.method==="HEAD"&&(g||V)){if(g)throw L>xn.maxUrlLength?Tn("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Tn("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(V)throw Tn("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(g?(s.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=Y2(t,P):(s.body=vf(P),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Y2(t,P),V&&(e.useProxy=!0,t=`${z}?${t}`),P.token&&kA&&s.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&s.body.set("token",P.token),i.hasOwnProperty("withCredentials"))e.withCredentials=i.withCredentials;else if(!wf(t,G4())){if(U4(t))e.withCredentials=!0;else if(si){const K=si.findServerInfo(t);K&&K.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(s.credentials="include",Fq(t)&&await Dq(g?Y2(t,P):t))}let x,$,E=0,O=!1;y>0&&(E=setTimeout(()=>{O=!0,e.controller.abort()},y));try{if(i.responseType==="native-request-init")$=s,$.url=t;else if(i.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||g||Jq(i.headers)||!l&&!e.useProxy&&xn.proxyUrl&&!C7(t)){if(x=await Vt._abortableFetch(t,s),e.useProxy||qq(t),i.responseType==="native")$=x;else if(s.method!=="HEAD")if(x.ok){switch(d){case"array-buffer":$=await x.arrayBuffer();break;case"blob":case"image":$=await x.blob();break;default:$=await x.text()}if(E&&(clearTimeout(E),E=0),d==="json"||d==="xml"||d==="document")if($)switch(d){case"json":$=JSON.parse($);break;case"xml":$=P7($,"application/xml");break;case"document":$=P7($,"text/html")}else $=null;if($){if(d==="array-buffer"||d==="blob"){const P=x.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(P)&&$[d==="blob"?"size":"byteLength"]<=750)try{const R=await new Response($).json();R.error&&($=R)}catch{}}d==="image"&&$ instanceof Blob&&($=await N7(URL.createObjectURL($),e,!0))}}else $=await x.text()}else $=await N7(t,e)}catch(P){if(P.name==="AbortError")throw O?new Error("Timeout exceeded"):pi("Request canceled");if(!(!x&&P instanceof TypeError&&xn.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||C7(t))throw P;e.redoRequest=!0,uq({proxyUrl:xn.proxyUrl,urlPrefix:On(t)})}finally{E&&clearTimeout(E)}return[x,$]}async function Wq(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,s;try{s=await e.before(t)}catch(l){i=Tn("request:interceptor",l,t)}if((s instanceof Error||s instanceof te)&&(i=Tn("request:interceptor",s,t)),i)throw e.error&&e.error(i),i;return s}}function Jq(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function P7(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function Kq(e){var d;let t,i;await Bq(e);try{do[t,i]=await Hq(e);while(!await Yq(e,t,i))}catch(y){const g=Tn("request:server",y,e.params,t);throw g.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(g),g}const s=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!e.hasToken&&!e.credentialToken&&((d=i.user)==null?void 0:d.username)&&!U4(s)){const y=On(s,!0);y&&xn.trustedServers.push(y)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&Lq(i.authorizedCrossOriginNoCorsDomains)}const l=e.credential;if(l&&si){const y=si.findServerInfo(l.server);let g=y&&y.owningSystemUrl;if(g){g=g.replace(/\/?$/,"/sharing");const x=si.findCredential(g,l.userId);x&&si._getIdenticalSvcIdx(g,x)===-1&&x.resources.unshift(g)}}return{data:i,getHeader:t?y=>t.headers.get(y):Z4,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Yq(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||s.responseType==="native"||s.responseType==="native-request-init")return!0;let l,d,y,g;if(!t.ok)throw l=new Error(`Unable to load ${t.url} status: ${t.status}`),l[j3]=i,l;i!=null&&i.error&&(l=i.error),l&&(d=Number(l.code),y=l.hasOwnProperty("subcode")?Number(l.subcode):null,g=l.messageCode,g=g&&g.toUpperCase());const x=s.authMode;if(d===403&&(y===4||l.message&&l.message.toLowerCase().includes("ssl")&&!l.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(x!=="no-prompt"||d===498)&&zq.includes(d)&&!OA(e.params.url)&&(d!==403||!Vq.includes(g)&&(y==null||y===2&&e.credentialToken))){await L3();try{const $=await si.getCredential(e.params.url,{error:Tn("request:server",l,e.params),prompt:x!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=$,e.credentialToken=$.token,e.useSSL=e.useSSL||$.ssl,!1}catch($){if(x==="no-prompt")return e.credential=null,e.credentialToken=null,!1;l=$}}if(l)throw l;return!0}function N7(e,t,i=!1){const s=t.controller.signal,l=new Image;return t.withCredentials?l.crossOrigin="use-credentials":l.crossOrigin="anonymous",l.alt="",l.fetchPriority=xn.priority,l.src=e,jq(l,e,i,s)}Vt._abortableFetch=null,Vt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var Xq=Object.freeze(Object.defineProperty({__proto__:null,default:Vt},Symbol.toStringTag,{value:"Module"})),ll;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(ll||(ll={}));class Zq{constructor(t){this.instance=t,this._resolver=ua(),this._status=ll.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=ll.RESOLVED,this._cleanUp()},()=>{this._status=ll.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===ll.RESOLVED}isRejected(){return this._status===ll.REJECTED}isFulfilled(){return this._status!==ll.PENDING}abort(){this._resolver.reject(pi())}when(t,i){return this._resolver.promise.then(t,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=ua(),i=[...this._resolvingPromises,t.promise],s=this._allPromise=Promise.all(i);s.then(()=>{this.isFulfilled()||this._allPromise!==s||this._resolver.resolve(this.instance)},l=>{this.isFulfilled()||this._allPromise!==s||bs(l)||this._resolver.reject(l)}),t.resolve()}}const Kf=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new Zq(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,s){return new Promise((l,d)=>{this._promiseProps.when(l,d)}).then(i,s)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=v([H("esri.core.Promise")],t),t};let gg=class extends Kf(ze){};gg=v([H("esri.core.Promise")],gg);const Qq="not-loaded",eU="loading",tU="failed",R7="loaded",CA=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(s=>{const l=this.load.bind(this);this.load=d=>{const y=new Promise((g,x)=>{const $=h4(d,x);this.destroyed&&x(new te("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(g,x).finally(()=>{$&&$.remove()})});if(this.loadStatus===Qq){this._set("loadStatus",eU);const g=this._loadController=new AbortController;l({signal:g.signal}),Rn(g.signal,()=>{this._promiseProps.abort()})}return s(),y}})),this.when(()=>{this._set("loadStatus",R7),this._loadController=null},s=>{this._set("loadStatus",tU),this._set("loadError",s),this._loadController=null})}get loaded(){return this.loadStatus===R7}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new te("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return v([_({readOnly:!0})],t.prototype,"loaded",null),v([_({readOnly:!0})],t.prototype,"loadError",void 0),v([_({clonable:!1})],t.prototype,"loadStatus",void 0),v([_({type:[Er],readOnly:!0})],t.prototype,"loadWarnings",null),t=v([H("esri.core.Loadable")],t),t};let Xd=class extends CA(gg){};Xd=v([H("esri.core.Loadable")],Xd),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=CA,e.isLoadable=t}(Xd||(Xd={}));const vs=Xd;var F3;const iU=new tt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Os=F3=class extends ze{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new F3({categories:this.categories?ie(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i,s;if(this.categories&&(i=this.categories.map(y=>Array.isArray(y)?JSON.stringify(y):y)),this.extent){const y=Iv(this.extent,Ye.WGS84);Y(y)&&(s=`${y.xmin},${y.ymin},${y.xmax},${y.ymax}`)}let l=this.query;!this.disableExtraQuery&&e.extraQuery&&(l="("+l+")"+e.extraQuery);const d={categories:i,bbox:s,q:l,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(d.sortField=this.sortField.split(",").map(y=>iU.toJSON(y.trim())).join(","),d.sortOrder=this.sortOrder),{query:{...t,...d}}}};v([_()],Os.prototype,"categories",void 0),v([_()],Os.prototype,"disableExtraQuery",void 0),v([_({type:xt})],Os.prototype,"extent",void 0),v([_()],Os.prototype,"filter",void 0),v([_()],Os.prototype,"num",void 0),v([_()],Os.prototype,"query",void 0),v([_()],Os.prototype,"sortField",void 0),v([_()],Os.prototype,"sortOrder",null),v([_()],Os.prototype,"start",void 0),Os=F3=v([H("esri.portal.PortalQueryParams")],Os);const ta=Os;let au=class extends ze{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};v([_()],au.prototype,"nextQueryParams",void 0),v([_()],au.prototype,"queryParams",void 0),v([_()],au.prototype,"results",void 0),v([_()],au.prototype,"total",void 0),au=v([H("esri.portal.PortalQueryResult")],au);const rU=au;let No=class extends ce{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new te("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};v([_({type:Date})],No.prototype,"created",void 0),v([_()],No.prototype,"id",void 0),v([_()],No.prototype,"portal",void 0),v([_()],No.prototype,"title",void 0),v([_({readOnly:!0})],No.prototype,"url",null),v([_()],No.prototype,"username",void 0),No=v([H("esri.portal.PortalFolder")],No);const sU=No;let ki=class extends ce{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(s=>s.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new te("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let i=ni(ta,e);return parseFloat(this.portal.currentVersion)>5?(i=i||new ta,this.portal._queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new ta,i.query="group:"+this.id+(i.query?" "+i.query:""),this.portal.queryItems(i,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const l=new ta;return l.disableExtraQuery=!0,l.num=1,l.query=s,this.portal.queryGroups(l,t)}throw new te("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],l=new ta;return l.num=1,l.query=`typekeywords:"${e}"`,s.queryItems(l,t)}throw new te("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(s=>{const l=s&&s.categorySchema;return l&&l.length?l:[]}):[])}};v([_()],ki.prototype,"access",void 0),v([_({type:Date})],ki.prototype,"created",void 0),v([_()],ki.prototype,"description",void 0),v([_()],ki.prototype,"id",void 0),v([_()],ki.prototype,"isInvitationOnly",void 0),v([_({type:Date})],ki.prototype,"modified",void 0),v([_()],ki.prototype,"owner",void 0),v([_()],ki.prototype,"portal",void 0),v([_()],ki.prototype,"snippet",void 0),v([_()],ki.prototype,"sortField",void 0),v([_()],ki.prototype,"sortOrder",void 0),v([_()],ki.prototype,"tags",void 0),v([_()],ki.prototype,"thumbnail",void 0),v([_({readOnly:!0})],ki.prototype,"thumbnailUrl",null),v([_()],ki.prototype,"title",void 0),v([_({readOnly:!0})],ki.prototype,"url",null),ki=v([H("esri.portal.PortalGroup")],ki);const D3=ki;var nU=Object.freeze(Object.defineProperty({__proto__:null,default:D3},Symbol.toStringTag,{value:"Module"})),z3;let Gt=z3=class extends ce{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e&&e.data,s=e&&e.folder,l={method:"post"};t&&(l.query=t.createPostQuery(),i!=null&&(typeof i=="string"?l.query.text=i:typeof i=="object"&&(l.query.text=JSON.stringify(i))));let d=this.userContentUrl;return s&&(d+="/"+(typeof s=="string"?s:s.id)),this.portal._request(d+"/addItem",l).then(y=>(t.id=y.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",i=e.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(",")}};return this.portal._request(t,s).then(()=>{e.forEach(l=>{l.id=null,l.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let i;return i=t&&t.folders?t.folders.map(s=>{const l=sU.fromJSON(s);return l.portal=this.portal,l}):[],i})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const s=D3.fromJSON(i);return s.portal=this.portal,s}):[],t})}fetchItems(e){e||(e={});let t,i=this.userContentUrl;return e.folder&&(i+="/"+e.folder.id),fe(()=>Promise.resolve().then(function(){return iR}),void 0).then(({default:s})=>{t=s;const l={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(i,{query:l})}).then(s=>{let l;return s&&s.items?(l=s.items.map(d=>{const y=t.fromJSON(d);return y.portal=this.portal,y}),Promise.all(l.map(d=>d.load())).catch(d=>d).then(()=>({items:l,nextStart:s.nextStart,total:s.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new D3({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new te("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new te("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new z3;return t.sourceJSON=e,t.read(e),t}};v([_()],Gt.prototype,"access",void 0),v([_({type:Date})],Gt.prototype,"created",void 0),v([_()],Gt.prototype,"culture",void 0),v([_()],Gt.prototype,"description",void 0),v([_()],Gt.prototype,"email",void 0),v([_()],Gt.prototype,"favGroupId",void 0),v([_()],Gt.prototype,"fullName",void 0),v([_({type:Date})],Gt.prototype,"modified",void 0),v([_()],Gt.prototype,"orgId",void 0),v([_()],Gt.prototype,"portal",void 0),v([_()],Gt.prototype,"preferredView",void 0),v([_()],Gt.prototype,"privileges",void 0),v([_()],Gt.prototype,"region",void 0),v([_()],Gt.prototype,"role",void 0),v([_()],Gt.prototype,"roleId",void 0),v([_()],Gt.prototype,"sourceJSON",void 0),v([_()],Gt.prototype,"thumbnail",void 0),v([_({readOnly:!0})],Gt.prototype,"thumbnailUrl",null),v([_()],Gt.prototype,"units",void 0),v([_({readOnly:!0})],Gt.prototype,"userContentUrl",null),v([_({readOnly:!0})],Gt.prototype,"url",null),v([_()],Gt.prototype,"username",void 0),v([_()],Gt.prototype,"userType",void 0),Gt=z3=v([H("esri.portal.PortalUser")],Gt);const Q4=Gt;var oU=Object.freeze(Object.defineProperty({__proto__:null,default:Q4},Symbol.toStringTag,{value:"Module"})),es;let X2;const j7={PortalGroup:()=>fe(()=>Promise.resolve().then(function(){return nU}),void 0),PortalItem:()=>fe(()=>Promise.resolve().then(function(){return iR}),void 0),PortalUser:()=>fe(()=>Promise.resolve().then(function(){return oU}),void 0)};let Ae=es=class extends Fp(vs){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=vt.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)vt.request.trustedServers.includes(t)||vt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=Q4.fromJSON(e),t.portal=this),t}load(e){const t=fe(()=>Promise.resolve().then(function(){return Moe}),void 0).then(({default:i})=>{bi(e),X2=i}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(i=>{if(si){const s=si;this.credential=s.findCredential(this.restUrl),this.credential||this.authMode!==es.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=s.on("credential-create",()=>{s.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await fe(()=>import("./ElevationLayer.7c711990.js"),["assets/ElevationLayer.7c711990.js","assets/ArcGISCachedService.79fe9e1d.js","assets/TilemapCache.7ae55126.js"])).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}fetchBasemaps(e,t){const i=new ta;return i.query=e||(vt.apiKey&&AA(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,t).then(s=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',s.total){const l=s.results[0];return i.sortField=l.sortField||"name",i.sortOrder=l.sortOrder||"desc",l.queryItems(i,t)}return null}).then(s=>{let l;return l=s&&s.total?s.results.filter(d=>d.type==="Web Map").map(d=>new X2({portalItem:d})):[],l})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Nn(e)?Promise.reject(pi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new ta;if(i.num=100,i.sortField="title",t&&t.length){const s=[];for(const l of t)s.push(`(title:"${l.title}" AND owner:${l.owner})`);return i.query=s.join(" OR "),this.queryGroups(i,e).then(l=>l.results)}return Nn(e)?Promise.reject(pi()):Promise.resolve([])}fetchRegions(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||ds();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var i;const t=((i=this.user)==null?void 0:i.culture)||this.culture||ds();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return es._default&&!es._default.destroyed||(es._default=new es),es._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new te("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new es({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new te("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new te("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,i){const s=this.restUrl+"/portals/self",l={authMode:e,query:{culture:ds().toLowerCase()},...i};return l.authMode==="auto"&&(l.authMode="no-prompt"),t&&(l.query.default=!0),this._request(s,l)}_queryPortal(e,t,i,s){const l=ni(ta,t),d=y=>this._request(this.restUrl+e,{...l.toRequestOptions(this),...s}).then(g=>{const x=l.clone();return x.start=g.nextStart,new rU({nextQueryParams:x,queryParams:l,total:g.total,results:es._resultsToTypedArray(y,{portal:this},g,s)})}).then(g=>Promise.all(g.results.map(x=>typeof x.when=="function"?x.when():g)).then(()=>g,x=>(Uf(x),g)));return i&&j7[i]?j7[i]().then(({default:y})=>(bi(s),d(y))):d()}_signIn(){if(this.authMode===es.AUTH_MODE_ANONYMOUS)return Promise.reject(new te("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return si?si.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,i){return this._request(e,t).then(s=>{const l=es._resultsToTypedArray(i,{portal:this},s);return Promise.all(l.map(d=>typeof d.when=="function"?d.when():s)).then(()=>l,()=>l)})}_readBasemap(e){if(e){const t=X2.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const i={f:"json",...t.query},{authMode:s=this.authMode===es.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:l=null,cacheBust:d=!1,method:y="auto",responseType:g="json",signal:x}=t,$={authMode:s,body:l,cacheBust:d,method:y,query:i,responseType:g,timeout:0,signal:x};return Vt(this._normalizeSSL(e),$).then(E=>E.data)}static _resultsToTypedArray(e,t,i,s){let l;if(i){const d=Y(s)?s.signal:null;l=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(l=l.map(y=>{const g=Object.assign(e?e.fromJSON(y):y,t);return typeof g.load=="function"&&g.load(d),g}))}else l=[];return l}};Ae.AUTH_MODE_ANONYMOUS="anonymous",Ae.AUTH_MODE_AUTO="auto",Ae.AUTH_MODE_IMMEDIATE="immediate",v([_()],Ae.prototype,"access",void 0),v([_()],Ae.prototype,"allSSL",void 0),v([_()],Ae.prototype,"authMode",void 0),v([_()],Ae.prototype,"authorizedCrossOriginDomains",void 0),v([$e("authorizedCrossOriginDomains")],Ae.prototype,"readAuthorizedCrossOriginDomains",null),v([_()],Ae.prototype,"basemapGalleryGroupQuery",void 0),v([_()],Ae.prototype,"bingKey",void 0),v([_()],Ae.prototype,"canListApps",void 0),v([_()],Ae.prototype,"canListData",void 0),v([_()],Ae.prototype,"canListPreProvisionedItems",void 0),v([_()],Ae.prototype,"canProvisionDirectPurchase",void 0),v([_()],Ae.prototype,"canSearchPublic",void 0),v([_()],Ae.prototype,"canShareBingPublic",void 0),v([_()],Ae.prototype,"canSharePublic",void 0),v([_()],Ae.prototype,"canSignInArcGIS",void 0),v([_()],Ae.prototype,"canSignInIDP",void 0),v([_()],Ae.prototype,"colorSetsGroupQuery",void 0),v([_()],Ae.prototype,"commentsEnabled",void 0),v([_({type:Date})],Ae.prototype,"created",void 0),v([_()],Ae.prototype,"credential",void 0),v([_()],Ae.prototype,"culture",void 0),v([_()],Ae.prototype,"currentVersion",void 0),v([_()],Ae.prototype,"customBaseUrl",void 0),v([_()],Ae.prototype,"defaultBasemap",void 0),v([$e("defaultBasemap")],Ae.prototype,"readDefaultBasemap",null),v([_()],Ae.prototype,"defaultDevBasemap",void 0),v([$e("defaultDevBasemap")],Ae.prototype,"readDefaultDevBasemap",null),v([_({type:xt})],Ae.prototype,"defaultExtent",void 0),v([_()],Ae.prototype,"defaultVectorBasemap",void 0),v([$e("defaultVectorBasemap")],Ae.prototype,"readDefaultVectorBasemap",null),v([_()],Ae.prototype,"description",void 0),v([_()],Ae.prototype,"devBasemapGalleryGroupQuery",void 0),v([_()],Ae.prototype,"eueiEnabled",void 0),v([_({readOnly:!0})],Ae.prototype,"extraQuery",null),v([_()],Ae.prototype,"featuredGroups",void 0),v([_()],Ae.prototype,"featuredItemsGroupQuery",void 0),v([_()],Ae.prototype,"galleryTemplatesGroupQuery",void 0),v([_()],Ae.prototype,"livingAtlasGroupQuery",void 0),v([_()],Ae.prototype,"hasCategorySchema",void 0),v([_()],Ae.prototype,"helpBase",void 0),v([_()],Ae.prototype,"helperServices",void 0),v([_()],Ae.prototype,"helpMap",void 0),v([_()],Ae.prototype,"homePageFeaturedContent",void 0),v([_()],Ae.prototype,"homePageFeaturedContentCount",void 0),v([_()],Ae.prototype,"httpPort",void 0),v([_()],Ae.prototype,"httpsPort",void 0),v([_()],Ae.prototype,"id",void 0),v([_()],Ae.prototype,"ipCntryCode",void 0),v([_({readOnly:!0})],Ae.prototype,"isOrganization",null),v([_()],Ae.prototype,"isPortal",void 0),v([_()],Ae.prototype,"isReadOnly",void 0),v([_()],Ae.prototype,"layerTemplatesGroupQuery",void 0),v([_()],Ae.prototype,"maxTokenExpirationMinutes",void 0),v([_({type:Date})],Ae.prototype,"modified",void 0),v([_()],Ae.prototype,"name",void 0),v([_()],Ae.prototype,"portalHostname",void 0),v([_()],Ae.prototype,"portalMode",void 0),v([_()],Ae.prototype,"portalProperties",void 0),v([_()],Ae.prototype,"region",void 0),v([_({readOnly:!0})],Ae.prototype,"restUrl",null),v([_()],Ae.prototype,"rotatorPanels",void 0),v([_()],Ae.prototype,"showHomePageDescription",void 0),v([_()],Ae.prototype,"sourceJSON",void 0),v([_()],Ae.prototype,"staticImagesUrl",void 0),v([_({json:{name:"2DStylesGroupQuery"}})],Ae.prototype,"stylesGroupQuery2d",void 0),v([_({json:{name:"stylesGroupQuery"}})],Ae.prototype,"stylesGroupQuery3d",void 0),v([_()],Ae.prototype,"supportsHostedServices",void 0),v([_()],Ae.prototype,"symbolSetsGroupQuery",void 0),v([_()],Ae.prototype,"templatesGroupQuery",void 0),v([_()],Ae.prototype,"thumbnail",void 0),v([_({readOnly:!0})],Ae.prototype,"thumbnailUrl",null),v([_()],Ae.prototype,"units",void 0),v([_()],Ae.prototype,"url",void 0),v([_()],Ae.prototype,"urlKey",void 0),v([$e("urlKey")],Ae.prototype,"readUrlKey",null),v([_()],Ae.prototype,"user",void 0),v([$e("user")],Ae.prototype,"readUser",null),v([_()],Ae.prototype,"useStandardizedQuery",void 0),v([_()],Ae.prototype,"useVectorBasemaps",void 0),v([_()],Ae.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ae=es=v([H("esri.portal.Portal")],Ae);const Ui=Ae;Me.getLogger("esri.core.Clonable");const yi=e=>{let t=class extends e{clone(){var x;const i=aL(cr(this),"unable to clone instance of non-accessor class"),s=i.metadatas,l=i.store,d={},y=new Map;for(const $ in s){const E=s[$],O=l==null?void 0:l.originOf($),P=E.clonable;if(E.readOnly||P===!1||O!==ct.USER&&O!==ct.DEFAULTS&&O!==ct.WEB_MAP&&O!==ct.WEB_SCENE)continue;const R=this[$];let L=null;L=typeof P=="function"?P(R):P==="reference"?R:_b(R),R!=null&&L==null||(O===ct.DEFAULTS?y.set($,L):d[$]=L)}const g=new(Object.getPrototypeOf(this)).constructor(d);if(y.size){const $=(x=cr(g))==null?void 0:x.store;if($)for(const[E,O]of y)$.set(E,O,ct.DEFAULTS)}return g}};return t=v([H("esri.core.Clonable")],t),t};let L7=class extends yi(ze){};L7=v([H("esri.core.Clonable")],L7);let lu=class extends yi(ce){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return Y(e)&&e.placement===this.placement&&e.style===this.style&&(he(this.color)&&he(e.color)||Y(this.color)&&Y(e.color)&&this.color.toJSON()===e.color.toJSON())}};v([_({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],lu.prototype,"type",void 0),v([_({type:MG,json:{default:"begin-end",write:!0}})],lu.prototype,"placement",void 0),v([_({type:oA,json:{default:"arrow",write:!0}})],lu.prototype,"style",void 0),v([_({type:Je,json:{type:[Ft],default:null,write:!0}})],lu.prototype,"color",void 0),lu=v([H("esri.symbols.LineStyleMarker3D")],lu);const V3=lu;var Qy;let Wn=Qy=class extends _o{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=mo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:Y(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:Y(this.pattern)?this.pattern.clone():null,marker:Y(this.marker)?this.marker.clone():null};return new Qy(e)}static fromSimpleLineSymbol(e){var i,s,l;const t={enabled:!0,size:(i=e.width)!=null?i:mo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new L4({style:e.style}):null,material:new fs({color:(e.color||V0).clone()}),marker:e.marker?new V3({placement:e.marker.placement,style:e.marker.style,color:(l=(s=e.marker.color)==null?void 0:s.clone())!=null?l:null}):null};return new Qy(t)}};v([_({type:fs,json:{write:!0}})],Wn.prototype,"material",void 0),v([Fe({Line:"line"},{readOnly:!0})],Wn.prototype,"type",void 0),v([_({type:pA,json:{write:!0,default:"miter"}})],Wn.prototype,"join",void 0),v([_({type:z4,json:{write:!0,default:"butt"}})],Wn.prototype,"cap",void 0),v([_(go)],Wn.prototype,"size",void 0),v([_(cA)],Wn.prototype,"pattern",void 0),v([_({types:{key:"type",base:V3,typeMap:{style:V3}},json:{write:!0}})],Wn.prototype,"marker",void 0),Wn=Qy=v([H("esri.symbols.LineSymbol3DLayer")],Wn);const Yf=Wn;var G3;const aU=tr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Zd=G3=class extends ce{clone(){return new G3({href:this.href,primitive:this.primitive})}};v([_({type:String,json:{read:Y4,write:$h}})],Zd.prototype,"href",void 0),v([Fe(aU)],Zd.prototype,"primitive",void 0),Zd=G3=v([H("esri.symbols.support.ObjectSymbol3DLayerResource")],Zd);var q3;let Fu=q3=class extends ze{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new q3({x:this.x,y:this.y,z:this.z})}};v([_({type:Number})],Fu.prototype,"x",void 0),v([_({type:Number})],Fu.prototype,"y",void 0),v([_({type:Number})],Fu.prototype,"z",void 0),Fu=q3=v([H("esri.symbols.support.Symbol3DAnchorPosition3D")],Fu);var U3;let nr=U3=class extends _o{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new U3({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:Y(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};v([_({type:fs,json:{write:!0}})],nr.prototype,"material",void 0),v([_({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],nr.prototype,"castShadows",void 0),v([_({type:Zd,json:{write:!0}})],nr.prototype,"resource",void 0),v([Fe({Object:"object"},{readOnly:!0})],nr.prototype,"type",void 0),v([_({type:Number,json:{write:!0}})],nr.prototype,"width",void 0),v([_({type:Number,json:{write:!0}})],nr.prototype,"height",void 0),v([_({type:Number,json:{write:!0}})],nr.prototype,"depth",void 0),v([Fe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),_({json:{default:"origin"}})],nr.prototype,"anchor",void 0),v([_({type:Fu,json:{type:[Number],read:{reader:e=>new Fu({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],nr.prototype,"anchorPosition",void 0),v([_({type:Number,json:{write:!0}})],nr.prototype,"heading",void 0),v([_({type:Number,json:{write:!0}})],nr.prototype,"tilt",void 0),v([_({type:Number,json:{write:!0}})],nr.prototype,"roll",void 0),v([_({readOnly:!0})],nr.prototype,"isPrimitive",null),nr=U3=v([H("esri.symbols.ObjectSymbol3DLayer")],nr);const e6=nr;var B3;let gr=B3=class extends _o{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e!=null?e:t.height==null&&t.size!=null?t.size:void 0}readHeight(e,t){return e!=null?e:t.width==null&&t.size!=null?t.size:void 0}clone(){return new B3({enabled:this.enabled,material:Y(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};v([_({type:fs,json:{write:!0}})],gr.prototype,"material",void 0),v([_({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],gr.prototype,"castShadows",void 0),v([Fe({Path:"path"},{readOnly:!0})],gr.prototype,"type",void 0),v([_({type:["circle","quad"],json:{write:!0,default:"circle"}})],gr.prototype,"profile",void 0),v([_({type:pA,json:{write:!0,default:"miter"}})],gr.prototype,"join",void 0),v([_({type:HG,json:{write:!0,default:"butt"}})],gr.prototype,"cap",void 0),v([_({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],gr.prototype,"width",void 0),v([$e("width",["width","size","height"])],gr.prototype,"readWidth",null),v([_({type:Number,json:{write:!0}})],gr.prototype,"height",void 0),v([$e("height",["height","size","width"])],gr.prototype,"readHeight",null),v([_({type:["center","bottom","top"],json:{write:!0,default:"center"}})],gr.prototype,"anchor",void 0),v([_({type:["heading","all"],json:{write:!0,default:"all"}})],gr.prototype,"profileRotation",void 0),gr=B3=v([H("esri.symbols.PathSymbol3DLayer")],gr);const t6=gr;var H3;let Xc=H3=class extends ce{constructor(){super(...arguments),this.color=new Je([0,0,0,1]),this.size=0}clone(){const e={color:ie(this.color),size:this.size};return new H3(e)}};v([_(Dl)],Xc.prototype,"color",void 0),v([_(go)],Xc.prototype,"size",void 0),Xc=H3=v([H("esri.symbols.support.Symbol3DHalo")],Xc);let q0=class extends yi(ce){constructor(e){super(e),this.color=null}};v([_(Dl)],q0.prototype,"color",void 0),q0=v([H("esri.symbols.support.Symbol3DTextBackground")],q0);var em;let Pr=em=class extends _o{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){Y(e)&&Y(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,s){const l={...s,textSymbol3D:!0};t.font=e.write({},l),delete t.font.size}get size(){return Y(this._userSize)?this._userSize:Y(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,Y(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new em({enabled:this.enabled,font:this.font&&ie(this.font),halo:this.halo&&ie(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:Y(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:ie(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new em({font:Y(e.font)?e.font.clone():new Nv,halo:lU(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new fs({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new q0({color:e.backgroundColor.clone()}):null})}};function lU(e,t){return e&&t>0?new Xc({color:ie(e),size:t}):null}v([_({type:Nv,json:{write:!0}})],Pr.prototype,"font",null),v([Ee("font")],Pr.prototype,"writeFont",null),v([_({type:Xc,json:{write:!0}})],Pr.prototype,"halo",void 0),v([_({...fA,json:{default:"center",write:!0}})],Pr.prototype,"horizontalAlignment",void 0),v([_({...dA,json:{default:1,write:!0}})],Pr.prototype,"lineHeight",void 0),v([_({type:fs,json:{write:!0}})],Pr.prototype,"material",void 0),v([_({type:q0,json:{write:!0}})],Pr.prototype,"background",void 0),v([_(go)],Pr.prototype,"size",null),v([_({type:String,json:{write:!0}})],Pr.prototype,"text",void 0),v([Fe({Text:"text"},{readOnly:!0})],Pr.prototype,"type",void 0),v([_({...yA,json:{default:"baseline",write:!0}})],Pr.prototype,"verticalAlignment",void 0),Pr=em=v([H("esri.symbols.TextSymbol3DLayer")],Pr);const Bp=Pr;var W3;let La=W3=class extends _o{constructor(e){super(e),this.color=J3.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new W3({color:ie(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};v([_({type:Je,nonNullable:!0,json:{type:[Ft],write:(e,t,i)=>t[i]=e.toArray(Je.AlphaMode.UNLESS_OPAQUE),default:()=>J3.clone(),defaultEquals:e=>e.toCss(!0)===J3.toCss(!0)}})],La.prototype,"color",void 0),v([Fe({Water:"water"},{readOnly:!0})],La.prototype,"type",void 0),v([_({type:["small","medium","large"],json:{write:!0,default:"medium"}})],La.prototype,"waterbodySize",void 0),v([_({type:Number,json:{write:!0,default:null}})],La.prototype,"waveDirection",void 0),v([_({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],La.prototype,"waveStrength",void 0),La=W3=v([H("esri.symbols.WaterSymbol3DLayer")],La);const J3=new Je([0,119,190]),PA=La;var K3;let uu=K3=class extends ze{constructor(){super(...arguments),this.portal=null}clone(){return new K3({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};v([_({type:String})],uu.prototype,"name",void 0),v([_({type:String})],uu.prototype,"styleUrl",void 0),v([_({type:String})],uu.prototype,"styleName",void 0),v([_({type:Ui})],uu.prototype,"portal",void 0),uu=K3=v([H("esri.symbols.support.StyleOrigin")],uu);const Y3=uu;var X3;let U0=X3=class extends ze{clone(){return new X3({url:this.url})}};v([_({type:String})],U0.prototype,"url",void 0),U0=X3=v([H("esri.symbols.support.Thumbnail")],U0);const NA={icon:Ju,object:e6,line:Yf,path:t6,fill:Pv,extrude:nA,text:Bp,water:PA},uU=Ge.ofType({base:_o,key:"type",typeMap:NA,errorContext:"symbol-layer"}),hU=Me.getLogger("esri.symbols.Symbol3D");let Jn=class extends Yr{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,i=t&&t.type||Ge;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.initialized&&hU.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Mh(e,this._get("symbolLayers"))}readStyleOrigin(e,t,i){if(e.styleUrl&&e.name){const s=Up(e.styleUrl,i);return new Y3({styleUrl:s,name:e.name})}if(e.styleName&&e.name)return new Y3({portal:i&&i.portal||Ui.getDefault(),styleName:e.styleName,name:e.name});i&&i.messages&&i.messages.push(new Er("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:e}))}writeStyleOrigin(e,t,i,s){if(e.styleUrl&&e.name){let l=Jf(e.styleUrl,s);ys(l)&&(l=kn(l)),t.styleOrigin={styleUrl:l,name:e.name}}else e.styleName&&e.name&&(e.portal&&s&&s.portal&&!bA(e.portal.restUrl,s.portal.restUrl)?s&&s.messages&&s.messages.push(new Er("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof _o||e&&NA[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};v([_({json:{read:!1,write:!1}})],Jn.prototype,"color",null),v([_({type:uU,nonNullable:!0,json:{write:!0}}),mt(IA)],Jn.prototype,"symbolLayers",null),v([_({type:Y3})],Jn.prototype,"styleOrigin",void 0),v([$e("styleOrigin")],Jn.prototype,"readStyleOrigin",null),v([Ee("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Jn.prototype,"writeStyleOrigin",null),v([_({type:U0,json:{read:!1}})],Jn.prototype,"thumbnail",void 0),v([_({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Jn.prototype,"type",void 0),Jn=v([H("esri.symbols.Symbol3D")],Jn);const Hp=Jn;let Qd=class extends ce{constructor(e){super(e),this.visible=!0}clone(){}};v([_({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Qd.prototype,"type",void 0),v([_({readOnly:!0})],Qd.prototype,"visible",void 0),Qd=v([H("esri.symbols.callouts.Callout3D")],Qd);const RA=Qd;var Z3;let tm=Z3=class extends ce{constructor(){super(...arguments),this.color=new Je("white")}clone(){return new Z3({color:ie(this.color)})}};v([_(Dl)],tm.prototype,"color",void 0),tm=Z3=v([H("esri.symbols.callouts.LineCallout3DBorder")],tm);const jA=tm;Object.freeze(Object.defineProperty({__proto__:null,default:jA},Symbol.toStringTag,{value:"Module"}));var Q3;let Fa=Q3=class extends RA{constructor(e){super(e),this.type="line",this.color=new Je([0,0,0,1]),this.size=mo(1),this.border=null}get visible(){return this.size>0&&Y(this.color)&&this.color.a>0}clone(){return new Q3({color:ie(this.color),size:this.size,border:ie(this.border)})}};v([Fe({line:"line"},{readOnly:!0})],Fa.prototype,"type",void 0),v([_(Dl)],Fa.prototype,"color",void 0),v([_(go)],Fa.prototype,"size",void 0),v([_({type:jA,json:{write:!0}})],Fa.prototype,"border",void 0),v([_({readOnly:!0})],Fa.prototype,"visible",null),Fa=Q3=v([H("esri.symbols.callouts.LineCallout3D")],Fa);const cU=Fa;function i6(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function LA(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!i6(e)}const FA={types:{key:"type",base:RA,typeMap:{line:cU}},json:{write:!0}};var e9;let Du=e9=class extends ce{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new e9({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};v([_(go)],Du.prototype,"screenLength",void 0),v([_({type:Number,json:{write:!0,default:0}})],Du.prototype,"minWorldLength",void 0),v([_({type:Number,json:{write:!0}})],Du.prototype,"maxWorldLength",void 0),Du=e9=v([H("esri.symbols.support.Symbol3DVerticalOffset")],Du);var im;const DA=Ge.ofType({base:null,key:"type",typeMap:{text:Bp}});let Da=im=class extends Hp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new DA,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return LA(this)}hasVisibleVerticalOffset(){return i6(this)}clone(){return new im({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail),callout:ie(this.callout),verticalOffset:ie(this.verticalOffset)})}static fromTextSymbol(e){return new im({symbolLayers:[Bp.fromTextSymbol(e)]})}};v([_({type:Du,json:{write:!0}})],Da.prototype,"verticalOffset",void 0),v([_(FA)],Da.prototype,"callout",void 0),v([_({json:{read:!1,write:!1}})],Da.prototype,"styleOrigin",void 0),v([_({type:DA})],Da.prototype,"symbolLayers",void 0),v([Fe({LabelSymbol3D:"label-3d"},{readOnly:!0})],Da.prototype,"type",void 0),Da=im=v([H("esri.symbols.LabelSymbol3D")],Da);const Lv=Da;var rm;const zA=Ge.ofType({base:null,key:"type",typeMap:{line:Yf,path:t6}}),pU=Ge.ofType({base:null,key:"type",typeMap:{line:Yf,path:t6}});let e0=rm=class extends Hp{constructor(e){super(e),this.symbolLayers=new zA,this.type="line-3d"}clone(){return new rm({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleLineSymbol(e){return new rm({symbolLayers:[Yf.fromSimpleLineSymbol(e)]})}};v([_({type:zA,json:{type:pU}})],e0.prototype,"symbolLayers",void 0),v([Fe({LineSymbol3D:"line-3d"},{readOnly:!0})],e0.prototype,"type",void 0),e0=rm=v([H("esri.symbols.LineSymbol3D")],e0);const Fv=e0;let za=class extends Yr{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};v([_({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],za.prototype,"angle",void 0),v([_({type:["simple-marker","picture-marker"],readOnly:!0})],za.prototype,"type",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],za.prototype,"xoffset",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],za.prototype,"yoffset",void 0),v([_({type:Number,cast:e=>e==="auto"?e:_t(e),json:{write:!0}})],za.prototype,"size",void 0),za=v([H("esri.symbols.MarkerSymbol")],za);const VA=za;var t9;const GA=Ge.ofType({base:null,key:"type",typeMap:{fill:Pv}});let t0=t9=class extends Hp{constructor(e){super(e),this.symbolLayers=new GA,this.type="mesh-3d"}clone(){return new t9({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}};v([_({type:GA})],t0.prototype,"symbolLayers",void 0),v([Fe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],t0.prototype,"type",void 0),t0=t9=v([H("esri.symbols.MeshSymbol3D")],t0);const r6=t0;function dU(e,t,i){return t.imageData?xA({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):qA(t.url,i)}function qA(e,t){return yU(t)&&!ys(e)&&t.layer.parsedUrl?Sh(t.layer.parsedUrl.path,"images",e):Up(e,t)}function fU(e,t,i,s){if(zl(e)){const l=H4(e);t.contentType=l.mediaType,t.imageData=l.data,i&&i.imageData===t.imageData&&i.url&&$h(i.url,t,"url",s)}else $h(e,t,"url",s)}const UA={json:{read:{source:["imageData","url"],reader:dU},write:{writer(e,t,i,s){fU(e,t,this.source,s)}}}},BA={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const s={};return t.imageData&&(s.imageData=t.imageData),t.contentType&&(s.contentType=t.contentType),t.url&&(s.url=qA(t.url,i)),s}}}};function yU(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var i9;let Cs=i9=class extends aA{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string"&&e.imageData==null)return e;const l={};return e&&(l.url=e),t&&(l.outline=t),i!=null&&(l.width=_t(i)),s!=null&&(l.height=_t(s)),l}clone(){const e=new i9({color:ie(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",ie(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};v([Fe({esriPFS:"picture-fill"},{readOnly:!0})],Cs.prototype,"type",void 0),v([_(UA)],Cs.prototype,"url",void 0),v([_({type:Number,json:{write:!0}})],Cs.prototype,"xscale",void 0),v([_({type:Number,json:{write:!0}})],Cs.prototype,"yscale",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],Cs.prototype,"width",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],Cs.prototype,"height",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],Cs.prototype,"xoffset",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],Cs.prototype,"yoffset",void 0),v([_(BA)],Cs.prototype,"source",void 0),Cs=i9=v([H("esri.symbols.PictureFillSymbol")],Cs);const HA=Cs;var r9;let an=r9=class extends VA{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t!=null&&(s.width=_t(t)),i!=null&&(s.height=_t(i)),s}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new r9({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",ie(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};v([_({json:{write:!1}})],an.prototype,"color",void 0),v([Fe({esriPMS:"picture-marker"},{readOnly:!0})],an.prototype,"type",void 0),v([_(UA)],an.prototype,"url",void 0),v([_(BA)],an.prototype,"source",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],an.prototype,"height",void 0),v([$e("height",["height","size"])],an.prototype,"readHeight",null),v([_({type:Number,cast:_t,json:{write:!0}})],an.prototype,"width",void 0),v([_({json:{write:!1}})],an.prototype,"size",void 0),an=r9=v([H("esri.symbols.PictureMarkerSymbol")],an);const Dv=an;var Va;const WA=Ge.ofType({base:null,key:"type",typeMap:{icon:Ju,object:e6,text:Bp}});let hu=Va=class extends Hp{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new WA,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return LA(this)}hasVisibleVerticalOffset(){return i6(this)}clone(){return new Va({verticalOffset:ie(this.verticalOffset),callout:ie(this.callout),styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Va({symbolLayers:[Ju.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new Va({symbolLayers:[Ju.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var i,s;return((s=(i=e.data)==null?void 0:i.symbol)==null?void 0:s.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new Va({symbolLayers:[Ju.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new Va({symbolLayers:[Ju.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new Va({symbolLayers:[Bp.fromTextSymbol(e)]})}};v([_({type:Du,json:{write:!0}})],hu.prototype,"verticalOffset",void 0),v([_(FA)],hu.prototype,"callout",void 0),v([_({type:WA,json:{origins:{"web-scene":{write:!0}}}})],hu.prototype,"symbolLayers",void 0),v([Fe({PointSymbol3D:"point-3d"},{readOnly:!0})],hu.prototype,"type",void 0),hu=Va=v([H("esri.symbols.PointSymbol3D")],hu);const Ku=hu;var i0;const JA=Ge.ofType({base:null,key:"type",typeMap:{extrude:nA,fill:Pv,icon:Ju,line:Yf,object:e6,text:Bp,water:PA}});let r0=i0=class extends Hp{constructor(e){super(e),this.symbolLayers=new JA,this.type="polygon-3d"}clone(){return new i0({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromJSON(e){const t=new i0;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const i=t.symbolLayers.getItemAt(0),s=t.symbolLayers.getItemAt(1);!s.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:s.size,color:Y(s.material)?s.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new i0({symbolLayers:[Pv.fromSimpleFillSymbol(e)]})}};v([_({type:JA,json:{write:!0}})],r0.prototype,"symbolLayers",void 0),v([Fe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],r0.prototype,"type",void 0),r0=i0=v([H("esri.symbols.PolygonSymbol3D")],r0);const Xf=r0;var s9;const Z2=new tt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let cu=s9=class extends aA{constructor(...e){super(...e),this.color=new Je([0,0,0,.25]),this.outline=new _s,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t&&(s.outline=t),i&&(s.color=i),s}clone(){return new s9({color:ie(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};v([_()],cu.prototype,"color",void 0),v([_()],cu.prototype,"outline",void 0),v([Fe({esriSFS:"simple-fill"},{readOnly:!0})],cu.prototype,"type",void 0),v([_({type:Z2.apiValues,json:{read:Z2.read,write:Z2.write}})],cu.prototype,"style",void 0),cu=s9=v([H("esri.symbols.SimpleFillSymbol")],cu);const Vl=cu;var n9;const Q2=new tt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Kn=n9=class extends VA{constructor(...e){super(...e),this.color=new Je([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new _s}normalizeCtorArgs(e,t,i,s){if(e&&typeof e!="string")return e;const l={};return e&&(l.style=e),t!=null&&(l.size=_t(t)),i&&(l.outline=i),s&&(l.color=s),l}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new n9({angle:this.angle,color:ie(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};v([_()],Kn.prototype,"color",void 0),v([Ee("color")],Kn.prototype,"writeColor",null),v([Fe({esriSMS:"simple-marker"},{readOnly:!0})],Kn.prototype,"type",void 0),v([_()],Kn.prototype,"size",void 0),v([_({type:Q2.apiValues,json:{read:Q2.read,write:Q2.write}})],Kn.prototype,"style",void 0),v([_({type:String,json:{write:!0}})],Kn.prototype,"path",null),v([_({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":_s}},json:{default:null,write:!0}})],Kn.prototype,"outline",void 0),Kn=n9=v([H("esri.symbols.SimpleMarkerSymbol")],Kn);const ya=Kn;var o9;let Wt=o9=class extends Yr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Nv,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.text=e),t&&(s.font=t),i&&(s.color=i),s}writeLineWidth(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}castLineWidth(e){return _t(e)}writeLineHeight(e,t,i,s){s&&typeof s!="string"?s.origin:t[i]=e}clone(){return new o9({angle:this.angle,backgroundColor:ie(this.backgroundColor),borderLineColor:ie(this.borderLineColor),borderLineSize:this.borderLineSize,color:ie(this.color),font:this.font&&this.font.clone(),haloColor:ie(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};v([_({type:Je,json:{write:!0}})],Wt.prototype,"backgroundColor",void 0),v([_({type:Je,json:{write:!0}})],Wt.prototype,"borderLineColor",void 0),v([_({type:Number,json:{write:!0}})],Wt.prototype,"borderLineSize",void 0),v([_({type:Nv,json:{write:!0}})],Wt.prototype,"font",void 0),v([_({...fA,json:{write:!0}})],Wt.prototype,"horizontalAlignment",void 0),v([_({type:Boolean,json:{write:!0}})],Wt.prototype,"kerning",void 0),v([_({type:Je,json:{write:!0}})],Wt.prototype,"haloColor",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],Wt.prototype,"haloSize",void 0),v([_({type:Boolean,json:{write:!0}})],Wt.prototype,"rightToLeft",void 0),v([_({type:Boolean,json:{write:!0}})],Wt.prototype,"rotated",void 0),v([_({type:String,json:{write:!0}})],Wt.prototype,"text",void 0),v([Fe({esriTS:"text"},{readOnly:!0})],Wt.prototype,"type",void 0),v([_({...yA,json:{write:!0}})],Wt.prototype,"verticalAlignment",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],Wt.prototype,"xoffset",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],Wt.prototype,"yoffset",void 0),v([_({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Wt.prototype,"angle",void 0),v([_({type:Number,json:{write:!0}})],Wt.prototype,"width",void 0),v([_({type:Number})],Wt.prototype,"lineWidth",void 0),v([Ee("lineWidth")],Wt.prototype,"writeLineWidth",null),v([mt("lineWidth")],Wt.prototype,"castLineWidth",null),v([_(dA)],Wt.prototype,"lineHeight",void 0),v([Ee("lineHeight")],Wt.prototype,"writeLineHeight",null),Wt=o9=v([H("esri.symbols.TextSymbol")],Wt);const jh=Wt;var a9;const mU=Me.getLogger("esri.symbols.WebStyleSymbol");let ln=a9=class extends Yr{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const e=Y(this.portal)?this.portal:Ui.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new a9({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=Y(t)?t.cache:null,s=i?this.fetchCacheKey:null;if(Y(i)){const g=i.get(s);if(g)return g.clone()}const l=await gU();bi(t);const d=l.resolveWebStyleSymbol(this,{portal:this.portal},e,t);d.catch(g=>{mU.error("#fetchSymbol()","Failed to create symbol from style",g)});const y=await d;return e==="webRef"&&y.type==="point-3d"||e==="cimRef"&&y.type==="cim"?(Y(i)&&i.set(s,y.clone()),y):null}};function gU(){return fe(()=>import("./webStyleSymbolUtils.80db57fa.js"),["assets/webStyleSymbolUtils.80db57fa.js","assets/devEnvironmentUtils.8c6e6b72.js"])}v([_({json:{write:!1}})],ln.prototype,"color",void 0),v([_({type:String,json:{write:!0}})],ln.prototype,"styleName",void 0),v([_({type:Ui,json:{write:!1}})],ln.prototype,"portal",void 0),v([_({type:String,json:{read:Y4,write:$h}})],ln.prototype,"styleUrl",void 0),v([_({type:U0,json:{read:!1}})],ln.prototype,"thumbnail",void 0),v([_({type:String,json:{write:!0}})],ln.prototype,"name",void 0),v([Fe({styleSymbolReference:"web-style"},{readOnly:!0})],ln.prototype,"type",void 0),v([_()],ln.prototype,"fetchCacheKey",null),ln=a9=v([H("esri.symbols.WebStyleSymbol")],ln);const Lh=ln;function zv(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function xp(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const hh={base:Yr,key:"type",typeMap:{"simple-fill":Vl,"picture-fill":HA,"picture-marker":Dv,"simple-line":_s,"simple-marker":ya,text:jh,"label-3d":Lv,"line-3d":Fv,"mesh-3d":r6,"point-3d":Ku,"polygon-3d":Xf,"web-style":Lh,cim:Wf},errorContext:"symbol"},vU={base:Yr,key:"type",typeMap:{"picture-marker":Dv,"simple-marker":ya,text:jh,"web-style":Lh,cim:Wf},errorContext:"symbol"},wU=jp({types:hh}),KA={base:Yr,key:"type",typeMap:{"simple-fill":Vl,"picture-fill":HA,"picture-marker":Dv,"simple-line":_s,"simple-marker":ya,text:jh,"line-3d":Fv,"mesh-3d":r6,"point-3d":Ku,"polygon-3d":Xf,"web-style":Lh,cim:Wf},errorContext:"symbol"},bU={base:Yr,key:"type",typeMap:{text:jh,"label-3d":Lv},errorContext:"symbol"},F7={base:Yr,key:"type",typeMap:{"line-3d":Fv,"mesh-3d":r6,"point-3d":Ku,"polygon-3d":Xf,"web-style":Lh,cim:Wf},errorContext:"symbol"},_U={base:Yr,key:"type",typeMap:{"label-3d":Lv},errorContext:"symbol"},YA=yo(hh);var l9;let s0=l9=class extends ce{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new l9({minValue:this.minValue,maxValue:this.maxValue})}};v([_({type:Number,json:{write:!0}})],s0.prototype,"minValue",void 0),v([_({type:Number,json:{write:!0}})],s0.prototype,"maxValue",void 0),s0=l9=v([H("esri.renderer.support.AuthoringInfoClassBreakInfo")],s0);var u9;let ul=u9=class extends ce{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new u9({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ie(this.classBreakInfos)})}};v([_({type:String,json:{write:!0}})],ul.prototype,"field",void 0),v([_({type:String,json:{write:!0}})],ul.prototype,"normalizationField",void 0),v([_({type:String,json:{write:!0}})],ul.prototype,"label",void 0),v([_({type:[s0],json:{write:!0}})],ul.prototype,"classBreakInfos",void 0),ul=u9=v([H("esri.renderers.support.AuthoringInfoFieldInfo")],ul);var h9;const N1=new tt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),R1=new tt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),D7={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},z7=["high-to-low","above-and-below","centered-on","extremes"],V7=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],G7=["seconds","minutes","hours","days","months","years"];let Nr=h9=class extends ce{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new h9({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};v([_({types:D7,json:{write:!0}})],Nr.prototype,"endTime",void 0),v([mt("endTime")],Nr.prototype,"castEndTime",null),v([_({type:String,json:{write:!0}})],Nr.prototype,"field",void 0),v([_({type:Number,json:{write:!0}})],Nr.prototype,"maxSliderValue",void 0),v([_({type:Number,json:{write:!0}})],Nr.prototype,"minSliderValue",void 0),v([_({types:D7,json:{write:!0}})],Nr.prototype,"startTime",void 0),v([mt("startTime")],Nr.prototype,"castStartTime",null),v([_({type:N1.apiValues,value:null,json:{type:N1.jsonValues,read:N1.read,write:N1.write}})],Nr.prototype,"style",null),v([_({type:V7,value:null,json:{type:V7,origins:{"web-scene":{type:z7,write:{writer:(e,t)=>{z7.includes(e)&&(t.theme=e)}}}},write:!0}})],Nr.prototype,"theme",null),v([_({type:R1.apiValues,json:{type:R1.jsonValues,read:R1.read,write:R1.write}})],Nr.prototype,"type",void 0),v([_({type:G7,json:{type:G7,write:!0}})],Nr.prototype,"units",void 0),Nr=h9=v([H("esri.renderers.support.AuthoringInfoVisualVariable")],Nr);const xU=Nr;let sm=class extends ce{constructor(e){super(e),this.type=null}};v([_({readOnly:!0,json:{read:!1,write:!0}})],sm.prototype,"type",void 0),sm=v([H("esri.rest.support.ColorRamp")],sm);const s6=sm;var c9;let pu=c9=class extends s6{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new c9({fromColor:ie(this.fromColor),toColor:ie(this.toColor),algorithm:this.algorithm})}};v([Fe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],pu.prototype,"algorithm",void 0),v([_({type:Je,json:{type:[Ft],write:!0}})],pu.prototype,"fromColor",void 0),v([_({type:Je,json:{type:[Ft],write:!0}})],pu.prototype,"toColor",void 0),v([_({type:["algorithmic"]})],pu.prototype,"type",void 0),pu=c9=v([H("esri.rest.support.AlgorithmicColorRamp")],pu);const n6=pu;var p9;let n0=p9=class extends s6{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new p9({colorRamps:ie(this.colorRamps)})}};v([_({type:[n6],json:{write:!0}})],n0.prototype,"colorRamps",void 0),v([_({type:["multipart"]})],n0.prototype,"type",void 0),n0=p9=v([H("esri.rest.support.MultipartColorRamp")],n0);const XA=n0,SU={key:"type",base:s6,typeMap:{algorithmic:n6,multipart:XA}};function $U(e){return e&&e.type?e.type==="algorithmic"?n6.fromJSON(e):e.type==="multipart"?XA.fromJSON(e):null:null}var d9;const Ul=new tt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),j1=new tt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),q7=new tt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),U7=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],MU=["high-to-low","above-and-below","above","below","90-10"],IU=["flow-line","wave-front"],TU=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let mi=d9=class extends ce{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return $U(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new d9({classificationMethod:this.classificationMethod,colorRamp:ie(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:ie(this.field1),field2:ie(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};v([_({type:Ul.apiValues,value:null,json:{type:Ul.jsonValues,read:Ul.read,write:Ul.write,origins:{"web-document":{default:"manual",type:Ul.jsonValues,read:Ul.read,write:Ul.write}}}})],mi.prototype,"classificationMethod",null),v([_({types:SU,json:{write:!0}})],mi.prototype,"colorRamp",void 0),v([$e("colorRamp")],mi.prototype,"readColorRamp",null),v([_({type:[String],value:null,json:{write:!0}})],mi.prototype,"fields",null),v([_({type:ul,value:null,json:{write:!0}})],mi.prototype,"field1",null),v([_({type:ul,value:null,json:{write:!0}})],mi.prototype,"field2",null),v([_({type:IU,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mi.prototype,"flowTheme",null),v([_({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],mi.prototype,"focus",null),v([_({type:Number,value:null,json:{type:Ft,write:!0}})],mi.prototype,"numClasses",null),v([_({type:U7,json:{type:U7,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],mi.prototype,"lengthUnit",void 0),v([_({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mi.prototype,"maxSliderValue",void 0),v([_({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mi.prototype,"minSliderValue",void 0),v([_({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],mi.prototype,"statistics",null),v([_({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],mi.prototype,"standardDeviationInterval",null),v([_({type:j1.apiValues,value:null,json:{type:j1.jsonValues,read:j1.read,write:j1.write,origins:{"web-scene":{type:q7.jsonValues,write:{writer:q7.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],mi.prototype,"type",null),v([_({type:[xU],json:{write:!0}})],mi.prototype,"visualVariables",void 0),v([_({type:TU,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mi.prototype,"univariateSymbolStyle",null),v([_({type:MU,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],mi.prototype,"univariateTheme",null),mi=d9=v([H("esri.renderers.support.AuthoringInfo")],mi);const ZA=mi,ew=new tt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let o0=class extends ce{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};v([_({type:ZA,json:{write:!0}})],o0.prototype,"authoringInfo",void 0),v([_({type:ew.apiValues,readOnly:!0,json:{type:ew.jsonValues,read:!1,write:{writer:ew.write,ignoreOrigin:!0}}})],o0.prototype,"type",void 0),o0=v([H("esri.renderers.Renderer")],o0);const ma=o0;var f9;let op=f9=class extends ce{constructor(){super(...arguments),this.title=null}clone(){return new f9({title:this.title})}};v([_({type:String,json:{write:!0}})],op.prototype,"title",void 0),op=f9=v([H("esri.renderers.support.LegendOptions")],op);var y9;let nm=y9=class extends op{constructor(){super(...arguments),this.showLegend=null}clone(){return new y9({title:this.title,showLegend:this.showLegend})}};v([_({type:Boolean,json:{write:!0}})],nm.prototype,"showLegend",void 0),nm=y9=v([H("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],nm);const QA=nm,EU=Me.getLogger("esri.renderers.visualVariables.VisualVariable"),tw=new tt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let un=class extends ce{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(EU.error(".field: field must be a string value"),null):zf(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};v([_()],un.prototype,"index",void 0),v([_({type:tw.apiValues,readOnly:!0,json:{read:tw.read,write:tw.write}})],un.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],un.prototype,"field",void 0),v([mt("field")],un.prototype,"castField",null),v([_({type:String,json:{write:!0}})],un.prototype,"valueExpression",void 0),v([_({type:String,json:{write:!0}})],un.prototype,"valueExpressionTitle",void 0),v([_({readOnly:!0})],un.prototype,"arcadeRequired",null),v([_({type:QA,json:{write:!0}})],un.prototype,"legendOptions",void 0),un=v([H("esri.renderers.visualVariables.VisualVariable")],un);const Zf=un;var m9;let du=m9=class extends ce{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e==null?0:e}clone(){return new m9({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};v([_({type:Je,json:{type:[Ft],write:!0}})],du.prototype,"color",void 0),v([_({type:String,json:{write:!0}})],du.prototype,"label",void 0),v([_({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],du.prototype,"value",void 0),v([Ee("value")],du.prototype,"writeValue",null),du=m9=v([H("esri.renderers.visualVariables.support.ColorStop")],du);const AU=du;var g9;let fu=g9=class extends Zf{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new g9({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};v([_({readOnly:!0})],fu.prototype,"cache",null),v([_({type:["color"],json:{type:["colorInfo"]}})],fu.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],fu.prototype,"normalizationField",void 0),v([_({type:[AU],json:{write:!0}})],fu.prototype,"stops",null),fu=g9=v([H("esri.renderers.visualVariables.ColorVariable")],fu);const ek=fu;var v9;let Ga=v9=class extends ce{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return gf(t.transparency)}writeOpacity(e,t,i){t[i]=Cv(e)}clone(){return new v9({label:this.label,opacity:this.opacity,value:this.value})}};v([_({type:String,json:{write:!0}})],Ga.prototype,"label",void 0),v([_({type:Number,json:{type:Ft,write:{target:"transparency"}}})],Ga.prototype,"opacity",void 0),v([$e("opacity",["transparency"])],Ga.prototype,"readOpacity",null),v([Ee("opacity")],Ga.prototype,"writeOpacity",null),v([_({type:Number,json:{write:!0}})],Ga.prototype,"value",void 0),Ga=v9=v([H("esri.renderers.visualVariables.support.OpacityStop")],Ga);const kU=Ga;var w9;let yu=w9=class extends Zf{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new w9({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};v([_({readOnly:!0})],yu.prototype,"cache",null),v([_({type:["opacity"],json:{type:["transparencyInfo"]}})],yu.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],yu.prototype,"normalizationField",void 0),v([_({type:[kU],json:{write:!0}})],yu.prototype,"stops",null),yu=w9=v([H("esri.renderers.visualVariables.OpacityVariable")],yu);const tk=yu;var b9;let Ro=b9=class extends Zf{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,i,s){if(s&&s.messages){const l=`visualVariables[${this.index}]`;s.messages.push(new te("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:l+".valueExpressionTitle",context:s}))}}clone(){return new b9({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};v([_({readOnly:!0})],Ro.prototype,"cache",null),v([_({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Ro.prototype,"axis",void 0),v([_({type:["rotation"],json:{type:["rotationInfo"]}})],Ro.prototype,"type",void 0),v([_({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Ro.prototype,"rotationType",void 0),v([_({type:String,json:{write:!0}})],Ro.prototype,"valueExpressionTitle",void 0),v([Ee("web-scene","valueExpressionTitle")],Ro.prototype,"writeValueExpressionTitleWebScene",null),Ro=b9=v([H("esri.renderers.visualVariables.RotationVariable")],Ro);const ik=Ro;var _9;let ac=_9=class extends ce{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new _9({label:this.label,size:this.size,value:this.value})}};v([_({type:String,json:{write:!0}})],ac.prototype,"label",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],ac.prototype,"size",void 0),v([_({type:Number,json:{write:!0}})],ac.prototype,"value",void 0),ac=_9=v([H("esri.renderers.visualVariables.support.SizeStop")],ac);const OU=ac;var x9;let om=x9=class extends QA{constructor(){super(...arguments),this.customValues=null}clone(){return new x9({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};v([_({type:[Number],json:{write:!0}})],om.prototype,"customValues",void 0),om=x9=v([H("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],om);const CU=om;var aa,Li;function Zc(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function _f(e){return e!=null&&!isNaN(e)&&isFinite(e)}function rk(e){return e.valueExpression?aa.Expression:e.field&&typeof e.field=="string"?aa.Field:aa.Unknown}function PU(e,t){const i=t||rk(e),s=e.valueUnit||"unknown";return i===aa.Unknown?Li.Constant:e.stops?Li.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Li.ClampedLinear:s==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Li.Proportional:Li.Additive:Li.Identity:Li.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(aa||(aa={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Li||(Li={}));function NU(e){if(!e)return null;const t={};for(const i in e){const s=ha(e[i]);s&&(t[i]=s)}return Object.keys(t).length!==0?t:null}function RU(e){if(!Y(e))return null;const t={};for(const i in e){const s=e[i];s&&(t[i]=s.toJSON())}return Object.keys(t).length!==0?t:null}let Rr=class extends yi(ce){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:j0(),configurable:!0})}normalizeCtorArgs(e,t,i,s){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:i,popupTemplate:s}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&Y(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:RU(this.aggregateGeometries),geometry:Y(this.geometry)?this.geometry.toJSON():null,symbol:Y(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){Y(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,i,s){if(!this.layer||!("graphicChanged"in this.layer))return;const l={graphic:this,property:e,oldValue:t,newValue:i};e==="attributes"&&(l.attributeName=s),this.layer.graphicChanged(l)}};v([_({value:null,json:{read:NU}})],Rr.prototype,"aggregateGeometries",null),v([_({value:null})],Rr.prototype,"attributes",null),v([_({value:null,types:Ll,json:{read:ha}})],Rr.prototype,"geometry",null),v([_({type:Boolean})],Rr.prototype,"isAggregate",void 0),v([_({clonable:"reference"})],Rr.prototype,"layer",void 0),v([_({type:Vp})],Rr.prototype,"popupTemplate",void 0),v([_({clonable:"reference"})],Rr.prototype,"sourceLayer",void 0),v([_({value:null,types:hh})],Rr.prototype,"symbol",null),v([_({type:Boolean,value:!0})],Rr.prototype,"visible",null),Rr=v([H("esri.Graphic")],Rr),function(e){e.generateUID=j0}(Rr||(Rr={}));const ws=Rr;function b0e(e){}function jU(e){return()=>e}function o6(e){return new Ye({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const sk=o6(Ut),vg=o6(na),wg=o6(Ol),LU=new Ye({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Ut.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function _0e(e){return e&&($v(e)||e===vg)?vg:e&&(Mv(e)||e===wg)?wg:sk}function FU(e){return e&&($v(e)||e===vg)?na:e&&(Mv(e)||e===wg)?Ol:Ut}function x0e(e){return d4(e)?na:f4(e)?Ol:Ut}const S0e=39.37,DU=Ut.radius*Math.PI/200,nk=/UNIT\[([^\]]+)\]\]$/i,ch=U,ok=/UNIT\[([^\]]+)\]/i,zU=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),VU=tr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Vn=e=>e*e,xa=e=>e*e*e,xf={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Vn(.001)},"square-centimeters":{inBaseUnits:Vn(.01)},"square-decimeters":{inBaseUnits:Vn(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Vn(1e3)},"square-inches":{inBaseUnits:Vn(.0254)},"square-feet":{inBaseUnits:Vn(.3048)},"square-yards":{inBaseUnits:Vn(.9144)},"square-miles":{inBaseUnits:Vn(1609.344)},"square-us-feet":{inBaseUnits:Vn(1200/3937)},acres:{inBaseUnits:.0015625*Vn(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*xa(.001)},"cubic-centimeters":{inBaseUnits:1e3*xa(.01)},"cubic-decimeters":{inBaseUnits:1e3*xa(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*xa(1e3)},"cubic-inches":{inBaseUnits:1e3*xa(.0254)},"cubic-feet":{inBaseUnits:1e3*xa(.3048)},"cubic-yards":{inBaseUnits:1e3*xa(.9144)},"cubic-miles":{inBaseUnits:1e3*xa(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},GU=(()=>{const e={};for(const t in xf)for(const i in xf[t].units)e[i]=t;return e})();function qU(e,t,i){return e*xf[i].units[t].inBaseUnits}function UU(e,t,i){return e/xf[i].units[t].inBaseUnits}function S9(e){const t=GU[e];if(!t)throw new Error("unknown type");return t}function B7(e,t=null){return t=t||S9(e),xf[t].baseUnit===e}function Ps(e,t,i){if(t===i)return e;const s=S9(t);if(s!==S9(i))throw new Error("incompatible units");const l=B7(t,s)?e:qU(e,t,s);return B7(i,s)?l:UU(l,i,s)}function BU(e,t,i){return Ps(e,t,"meters")/(i*Math.PI/180)}function ak(e){return VU.fromJSON(e.toLowerCase())||null}function Sp(e){if(e&&typeof e=="object"&&!fD(e))return 1;const t=Qf(e);return t>1e5?1:t}function HU(e){return Qf(e)>=(e instanceof Ye?FU(e).metersPerDegree:1e5)?"meters":JU(e)}function Qf(e,t=Ut.metersPerDegree){return dv(WU(e,!0),t)}function WU(e,t=!1){let i,s,l=null;if(e!=null&&(typeof e=="object"?(i=e.wkid,s=e.wkt):typeof e=="number"?i=e:typeof e=="string"&&(s=e)),i){if(d4(i))return na.metersPerDegree;if(f4(i))return Ol.metersPerDegree;l=ch.values[ch[i]],!l&&t&&zU.has(i)&&(l=DU)}else s&&(hk(s)?l=H7(nk.exec(s),l):uk(s)&&(l=H7(ok.exec(s),l)));return l}function H7(e,t){return e&&e[1]?lk(e[1]):t}function lk(e){return parseFloat(e.split(",")[1])}function JU(e){let t,i,s=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,i=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(i=e)),t)s=ch.units[ch[t]];else if(i){const l=hk(i)?nk:uk(i)?ok:null;if(l){const d=l.exec(i);d&&d[1]&&(s=YU(d[1]))}}return Y(s)?ak(s):null}function uk(e){return/^GEOCCS/i.test(e)}function hk(e){return/^PROJCS/i.test(e)}const KU=1e-7;function YU(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||!ch.units.includes(i)){const s=lk(e);i=null;const l=ch.values;for(let d=0;d<l.length;++d)if(Math.abs(s-l[d])<KU){i=ch.units[d];break}}return i}const ck={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},pk={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},XU=tr()(ck),ZU=tr()(pk);tr()({...ck,...pk});const dk={inches:Ps(1,"meters","inches"),feet:Ps(1,"meters","feet"),"us-feet":Ps(1,"meters","us-feet"),yards:Ps(1,"meters","yards"),miles:Ps(1,"meters","miles"),"nautical-miles":Ps(1,"meters","nautical-miles"),millimeters:Ps(1,"meters","millimeters"),centimeters:Ps(1,"meters","centimeters"),decimeters:Ps(1,"meters","decimeters"),meters:Ps(1,"meters","meters"),kilometers:Ps(1,"meters","kilometers"),"decimal-degrees":1/BU(1,"meters",Ut.radius)},Nl=Me.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),W7=new ws,am=Math.PI,fk=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function yk(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="color"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Nl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const l=typeof t=="number",d=l?null:t,y=d&&d.attributes;let g=l?t:null;const x=s.field,{ipData:$,hasExpression:E}=s.cache;let O=s.cache.compiledFunc;if(!x&&!E){const L=s.stops;return L&&L[0]&&L[0].color}if(typeof g!="number")if(E){if(he(i)||he(i.arcade))return void Nl.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,V=z.getViewInfo(L),K=z.createExecContext(d,V);if(!O){const ee=z.createSyntaxTree(s.valueExpression);O=z.createFunction(ee),s.cache.compiledFunc=O}g=z.executeFunction(O,K)}else y&&(g=y[x]);const P=s.normalizationField,R=y?parseFloat(y[P]):void 0;if(g!=null&&(!P||l||!isNaN(R)&&R!==0)){isNaN(R)||l||(g/=R);const L=a6(g,$);if(L){const z=L[0],V=L[1],K=z===V?s.stops[z].color:Je.blendColors(s.stops[z].color,s.stops[V].color,L[2],Y(i)?i.color:void 0);return new Je(K)}}}function mk(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(L=>L.type==="opacity"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Nl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const l=typeof t=="number",d=l?null:t,y=d&&d.attributes;let g=l?t:null;const x=s.field,{ipData:$,hasExpression:E}=s.cache;let O=s.cache.compiledFunc;if(!x&&!E){const L=s.stops;return L&&L[0]&&L[0].opacity}if(typeof g!="number")if(E){if(he(i)||he(i.arcade))return void Nl.error("Use of arcade expressions requires an arcade context");const L={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},z=i.arcade.arcadeUtils,V=z.getViewInfo(L),K=z.createExecContext(d,V);if(!O){const ee=z.createSyntaxTree(s.valueExpression);O=z.createFunction(ee),s.cache.compiledFunc=O}g=z.executeFunction(O,K)}else y&&(g=y[x]);const P=s.normalizationField,R=y?parseFloat(y[P]):void 0;if(g!=null&&(!P||l||!isNaN(R)&&R!==0)){isNaN(R)||l||(g/=R);const L=a6(g,$);if(L){const z=L[0],V=L[1];if(z===V)return s.stops[z].opacity;{const K=s.stops[z].opacity;return K+(s.stops[V].opacity-K)*L[2]}}}}function gk(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(R=>R.type==="rotation"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Nl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const l=s.axis||"heading",d=l==="heading"&&s.rotationType==="arithmetic"?90:0,y=l==="heading"&&s.rotationType==="arithmetic"?-1:1,g=typeof t=="number"?null:t,x=g&&g.attributes,$=s.field,{hasExpression:E}=s.cache;let O=s.cache.compiledFunc,P=0;if(!$&&!E)return P;if(E){if(he(i)||he(i.arcade))return void Nl.error("Use of arcade expressions requires an arcade context");const R={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},L=i.arcade.arcadeUtils,z=L.getViewInfo(R),V=L.createExecContext(g,z);if(!O){const K=L.createSyntaxTree(s.valueExpression);O=L.createFunction(K),s.cache.compiledFunc=O}P=L.executeFunction(O,V)}else x&&(P=x[$]||0);return P=typeof P!="number"||isNaN(P)?null:d+y*P,P}function QU(e,t,i){const s=typeof t=="number",l=s?null:t,d=l&&l.attributes;let y=s?t:null;const{isScaleDriven:g}=e.cache;let x=e.cache.compiledFunc;if(g){const E=Y(i)?i.scale:void 0,O=Y(i)?i.view:void 0;y=E==null||O==="3d"?eB(e):E}else if(!s)switch(e.inputValueType){case aa.Expression:{if(he(i)||he(i.arcade))return void Nl.error("Use of arcade expressions requires an arcade context");const E={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},O=i.arcade.arcadeUtils,P=O.getViewInfo(E),R=O.createExecContext(l,P);if(!x){const L=O.createSyntaxTree(e.valueExpression);x=O.createFunction(L),e.cache.compiledFunc=x}y=O.executeFunction(x,R);break}case aa.Field:d&&(y=d[e.field]);break;case aa.Unknown:y=null}if(!_f(y))return null;if(s||!e.normalizationField)return y;const $=d?parseFloat(d[e.normalizationField]):null;return _f($)&&$!==0?y/$:null}function eB(e){let t=null,i=null;const s=e.stops;return s?(t=s[0].value,i=s[s.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function Vv(e,t,i){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find(d=>d.type==="size"):e;if(!s)return;if(s.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Nl.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const l=wk(QU(s,t,i),s,t,i,s.cache.ipData);return l==null||isNaN(l)?0:l}function Hr(e,t,i){return e==null?null:Zc(e)?Vv(e,t,i):_f(e)?e:null}function vk(e,t,i){return _f(i)&&e>i?i:_f(t)&&e<t?t:e}function tB(e,t,i,s){return e+(Hr(t.minSize,i,s)||t.minDataValue)}function iB(e,t,i){const s=e.stops;let l=s&&s.length&&s[0].size;return l==null&&(l=e.minSize),Hr(l,t,i)}function rB(e,t,i,s){const l=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),d=Hr(t.minSize,i,s),y=Hr(t.maxSize,i,s),g=Y(s)?s.shape:void 0;if(e<=t.minDataValue)return d;if(e>=t.maxDataValue)return y;if(t.scaleBy==="area"&&g){const x=g==="circle",$=x?am*(d/2)**2:d*d,E=$+l*((x?am*(y/2)**2:y*y)-$);return x?2*Math.sqrt(E/am):Math.sqrt(E)}return d+l*(y-d)}function sB(e,t,i,s){const l=Y(s)?s.shape:void 0,d=e/t.minDataValue,y=Hr(t.minSize,i,s),g=Hr(t.maxSize,i,s);let x=null;return x=l==="circle"?2*Math.sqrt(d*(y/2)**2):l==="square"||l==="diamond"||l==="image"?Math.sqrt(d*y**2):d*y,vk(x,y,g)}function nB(e,t,i,s,l){const[d,y,g]=a6(e,l);if(d===y)return Hr(t.stops[d].size,i,s);{const x=Hr(t.stops[d].size,i,s);return x+(Hr(t.stops[y].size,i,s)-x)*g}}function oB(e,t,i,s){const l=(Y(s)&&s.resolution?s.resolution:1)*dk[t.valueUnit],d=Hr(t.minSize,i,s),y=Hr(t.maxSize,i,s),{valueRepresentation:g}=t;let x=null;return x=g==="area"?2*Math.sqrt(e/am)/l:g==="radius"||g==="distance"?2*e/l:e/l,vk(x,d,y)}function wk(e,t,i,s,l){switch(t.transformationType){case Li.Additive:return tB(e,t,i,s);case Li.Constant:return iB(t,i,s);case Li.ClampedLinear:return rB(e,t,i,s);case Li.Proportional:return sB(e,t,i,s);case Li.Stops:return nB(e,t,i,s,l);case Li.RealWorldSize:return oB(e,t,i,s);case Li.Identity:return e;case Li.Unknown:return null}}function aB(e,t,i){const{isScaleDriven:s}=e.cache;if(!(s&&i==="3d"||t))return null;const l={scale:t,view:i};let d=Hr(e.minSize,W7,l),y=Hr(e.maxSize,W7,l);if(d!=null||y!=null){if(d>y){const g=y;y=d,d=g}return{minSize:d,maxSize:y}}}function lB(e,t,i){if(!e.visualVariables)return;const s=[],l=[],d=[],y=[],g=[];for(const x of e.visualVariables)switch(x.type){case"color":l.push(x);break;case"opacity":d.push(x);break;case"rotation":g.push(x);break;case"size":y.push(x)}return l.forEach(x=>{const $=yk(x,t,i);s.push({variable:x,value:$})}),d.forEach(x=>{const $=mk(x,t,i);s.push({variable:x,value:$})}),g.forEach(x=>{const $=gk(x,t,i);s.push({variable:x,value:$})}),y.forEach(x=>{const $=Vv(x,t,i);s.push({variable:x,value:$})}),s.filter(x=>x.value!=null)}function a6(e,t){if(!t)return;let i=0,s=t.length-1;return t.some((l,d)=>e<l?(s=d,!0):(i=d,!1)),[i,s,(e-t[i])/(t[s]-t[i])]}function uB(e,t,i){const s=["proportional","proportional","proportional"];for(const l of e){const d=l.useSymbolValue?"symbol-value":Vv(l,t,i);switch(l.axis){case"width":s[0]=d;break;case"depth":s[1]=d;break;case"height":s[2]=d;break;case"width-and-depth":s[0]=d,s[1]=d;break;case"all":case void 0:case null:s[0]=d,s[1]=d,s[2]=d;break;default:l.axis}}return s}var l6=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:uB,getColor:yk,getOpacity:mk,getRotationAngle:gk,getSize:Vv,getSizeForValue:wk,getSizeFromNumberOrVariable:Hr,getSizeRangeAtScale:aB,getVisualVariableValues:lB,viewScaleRE:fk},Symbol.toStringTag,{value:"Module"})),$9;const Hh=Me.getLogger("esri.renderers.visualVariables.SizeVariable"),L1=new tt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),M9=new tt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function J7(e){if(e!=null)return typeof e=="string"||typeof e=="number"?_t(e):e.type==="size"?Zc(e)?e:(delete(e={...e}).type,new St(e)):void 0}function K7(e,t,i){if(typeof e!="object")return e;const s=new St;return s.read(e,i),s}let St=$9=class extends Zf{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:fk.test(this.valueExpression)}}set expression(e){Hh.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){Zc(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Zc(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return rk(this)}set maxDataValue(e){e&&this.stops&&(Hh.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Hh.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return J7(e)}readMaxSize(e,t,i){return K7(e,t,i)}set minDataValue(e){e&&this.stops&&(Hh.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Hh.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return J7(e)}readMinSize(e,t,i){return K7(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(Hh.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return PU(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,s){if(e==="$view.scale"){if(s&&s.messages){const l=this.index,d=typeof l=="string"?l:`visualVariables[${l}]`;s.messages.push(new te("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:d+".valueExpression",context:s}))}}else t[i]=e}readValueUnit(e){return e?M9.read(e):null}clone(){return new $9({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Zc(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Zc(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Li.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Li.Stops){const e=this.stops,t=e.map(s=>s.size).reverse(),i=e.length;for(let s=0;s<i;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};v([_({readOnly:!0})],St.prototype,"cache",null),v([_({type:L1.apiValues,json:{type:L1.jsonValues,origins:{"web-map":{read:!1}},read:L1.read,write:L1.write}})],St.prototype,"axis",void 0),v([_({type:String,value:null,json:{read:!1}})],St.prototype,"expression",null),v([_()],St.prototype,"index",null),v([_({type:String,readOnly:!0})],St.prototype,"inputValueType",null),v([_({type:CU,json:{write:!0}})],St.prototype,"legendOptions",void 0),v([_({type:Number,value:null,json:{write:!0}})],St.prototype,"maxDataValue",null),v([_({type:Number,value:null,json:{write:!0}})],St.prototype,"maxSize",null),v([mt("maxSize")],St.prototype,"castMaxSize",null),v([$e("maxSize")],St.prototype,"readMaxSize",null),v([_({type:Number,value:null,json:{write:!0}})],St.prototype,"minDataValue",null),v([_({type:Number,value:null,json:{write:!0}})],St.prototype,"minSize",null),v([mt("minSize")],St.prototype,"castMinSize",null),v([$e("minSize")],St.prototype,"readMinSize",null),v([_({type:String,json:{write:!0}})],St.prototype,"normalizationField",void 0),v([_({readOnly:!0})],St.prototype,"arcadeRequired",null),v([_({type:String})],St.prototype,"scaleBy",void 0),v([_({type:[OU],value:null,json:{write:!0}})],St.prototype,"stops",null),v([_({type:["outline"],json:{write:!0}})],St.prototype,"target",void 0),v([_({type:String,readOnly:!0})],St.prototype,"transformationType",null),v([_({type:["size"],json:{type:["sizeInfo"]}})],St.prototype,"type",void 0),v([_({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],St.prototype,"useSymbolValue",void 0),v([_({type:String,json:{write:!0}})],St.prototype,"valueExpression",void 0),v([$e("valueExpression",["valueExpression","expression"])],St.prototype,"readValueExpression",null),v([Ee("web-scene","valueExpression")],St.prototype,"writeValueExpressionWebScene",null),v([_({type:["radius","diameter","area","width","distance"],json:{write:!0}})],St.prototype,"valueRepresentation",void 0),v([_({type:M9.apiValues,json:{write:M9.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],St.prototype,"valueUnit",void 0),v([$e("valueUnit")],St.prototype,"readValueUnit",null),St=$9=v([H("esri.renderers.visualVariables.SizeVariable")],St);const bk=St,hB=Me.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),cB={color:ek,size:bk,opacity:tk,rotation:ik},pB=new tt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),dB=/^\[([^\]]+)\]$/i;let lm=class extends ze{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,i)=>{let s=null;return s=t.target===i.target?0:t.target?1:-1,s});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,i){const{rotationExpression:s,rotationType:l}=t,d=s&&s.match(dB),y=d&&d[1];if(y&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:l,field:y})),e)return e.map(g=>{const x=pB.read(g.type),$=cB[x];$||(hB.warn(`Unknown variable type: ${x}`),i&&i.messages&&i.messages.push(new Er("visual-variable:unsupported",`visualVariable of type '${x}' is not supported`,{definition:g,context:i})));const E=new $;return E.read(g,i),E})}writeVariables(e,t){const i=[];for(const s of e){const l=s.toJSON(t);l&&i.push(l)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};v([_()],lm.prototype,"visualVariables",null),lm=v([H("esri.renderers.visualVariables.VisualVariableFactory")],lm);const fB=lm,yB={base:Zf,key:"type",typeMap:{opacity:tk,color:ek,rotation:ik,size:bk}},Wp=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new fB}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,s,l){return this._vvFactory.readVariables(i,s,l)}writeVisualVariables(i,s,l,d){s[l]=this._vvFactory.writeVariables(i,d)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,s){return i?this.getVisualVariablesForType(i,s).length>0:this.getVisualVariablesForType("size",s).length>0||this.getVisualVariablesForType("color",s).length>0||this.getVisualVariablesForType("opacity",s).length>0||this.getVisualVariablesForType("rotation",s).length>0}getVisualVariablesForType(i,s){const l=this.visualVariables;return l?l.filter(d=>d.type===i&&(typeof s=="string"?d.target===s:s!==!1||!d.target)):[]}async collectVVRequiredFields(i,s){let l=[];this.visualVariables&&(l=l.concat(this.visualVariables));for(const d of l)d&&(d.field&&Hs(i,s,d.field),d.normalizationField&&Hs(i,s,d.normalizationField),d.valueExpression&&await Ar(i,s,d.valueExpression))}};return v([_({types:[yB],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),v([$e("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),v([Ee("visualVariables")],t.prototype,"writeVisualVariables",null),t=v([H("esri.renderers.mixins.VisualVariablesMixin")],t),t},yd={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function mB(e,t=yd){var g,x;if(!e)return{symbol:null};const{retainId:i=yd.retainId,ignoreDrivers:s=yd.ignoreDrivers,hasLabelingContext:l=yd.hasLabelingContext,retainCIM:d=yd.retainCIM}=t;let y;if(xp(e)||e instanceof Lh)y=e.clone();else if(e.type==="cim"){const $=(x=(g=e.data)==null?void 0:g.symbol)==null?void 0:x.type;if($!=="CIMPointSymbol")return{error:new te("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${$||"unknown"}' is unsupported in 3D`,{symbol:e})};y=d?e.clone():Ku.fromCIMSymbol(e)}else if(e instanceof _s)y=Fv.fromSimpleLineSymbol(e);else if(e instanceof ya)y=Ku.fromSimpleMarkerSymbol(e);else if(e instanceof Dv)y=Ku.fromPictureMarkerSymbol(e);else if(e instanceof Vl)y=Xf.fromSimpleFillSymbol(e);else{if(!(e instanceof jh))return{error:new te("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};y=l?Lv.fromTextSymbol(e):Ku.fromTextSymbol(e)}if(i&&y.type!=="cim"&&(y.id=e.id),s&&xp(y))for(let $=0;$<y.symbolLayers.length;++$)y.symbolLayers.getItemAt($)._ignoreDrivers=!0;return{symbol:y}}const gB=["building-scene","integrated-mesh","point-cloud","scene"];function bg(e,t,i,s){const l=_k(e,{},{context:s,isLabelSymbol:!1});Y(l)&&(t[i]=l)}function Y7(e,t,i,s){const l=_k(e,{},{context:s,isLabelSymbol:!0});Y(l)&&(t[i]=l)}function X7(e){return e instanceof Hp||e instanceof Lh}function _k(e,t,i){var g;if(he(e))return null;const{context:s,isLabelSymbol:l}=i,d=s==null?void 0:s.origin,y=s==null?void 0:s.messages;if(d==="web-scene"&&!X7(e)){const x=mB(e,{retainCIM:!0,hasLabelingContext:l});return Y(x.symbol)?x.symbol.write(t,s):(y==null||y.push(new te("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:s,error:x.error})),null)}return(d==="web-map"||d==="portal-item"&&!gB.includes((g=s==null?void 0:s.layer)==null?void 0:g.type))&&X7(e)?(y==null||y.push(new te("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:s})),null):e.write(t,s)}function $0e(e,t){return wU(e,null,t)}const e1={types:KA,json:{write:{writer:bg},origins:{"web-scene":{types:F7,write:{writer:bg},read:{reader:jp({types:F7})}}}}},xk={types:{base:Yr,key:"type",typeMap:{"simple-fill":hh.typeMap["simple-fill"],"picture-fill":hh.typeMap["picture-fill"],"polygon-3d":hh.typeMap["polygon-3d"]}},json:{write:{writer:bg},origins:{"web-scene":{type:Xf,write:{writer:bg}}}}};var I9;let qa=I9=class extends ce{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new I9({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};v([_({type:String,json:{write:!0}})],qa.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],qa.prototype,"label",void 0),v([_({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],qa.prototype,"minValue",void 0),v([_({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],qa.prototype,"maxValue",void 0),v([_(e1)],qa.prototype,"symbol",void 0),qa=I9=v([H("esri.renderers.support.ClassBreakInfo")],qa);const _g=qa;var T9;const F1=Me.getLogger("esri.renderers.ClassBreaksRenderer"),Sk="log",um="percent-of-total",hm="field",D1=new tt({esriNormalizeByLog:Sk,esriNormalizeByPercentOfTotal:um,esriNormalizeByField:hm}),vB=ni(_g);let Si=T9=class extends Wp(ma){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let s=t.minValue;return e.map(l=>{const d=new _g;return d.read(l,i),d.minValue==null&&(d.minValue=s),d.maxValue==null&&(d.maxValue=d.minValue),s=d.maxValue,d})}writeClassBreakInfos(e,t,i,s){const l=e.map(d=>d.write({},s));this._areClassBreaksConsecutive()&&l.forEach(d=>delete d.classMinValue),t[i]=l}castField(e){return e==null?e:typeof e=="function"?(F1.error(".field: field must be a string value"),null):zf(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&hm||i&&um||null,t&&i&&F1.warn("warning: both normalizationField and normalizationTotal are set!")):e!==hm&&e!==um||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let s=null;s=typeof e=="number"?new _g({minValue:e,maxValue:t,symbol:YA(i)}):vB(ie(e)),this.classBreakInfos.push(s),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let s=0;s<i;s++){const l=[this.classBreakInfos[s].minValue,this.classBreakInfos[s].maxValue];if(l[0]===e&&l[1]===t){this.classBreakInfos.splice(s,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(he(t)||he(t.arcade))&&F1.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&(he(t)||he(t.arcade))&&(i={...i,arcade:await ca()});const s=this.getBreakIndex(e,i);return s!==-1?this.classBreakInfos[s]:null}getSymbol(e,t){if(this.valueExpression&&(he(t)||he(t.arcade)))return void F1.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(he(t)||he(t.arcade))){const l=await ca(),{arcadeUtils:d}=l;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:l}}const s=this.getBreakIndex(e,i);return s>-1?this.classBreakInfos[s].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((s,l)=>s+l.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new T9({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ie(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ie(this.visualVariables),legendOptions:ie(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),Ar(e,t,this.valueExpression)];Hs(e,t,this.field),Hs(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:s,spatialReference:l,arcade:d}=dv(t,{});let y=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const g=d.arcadeUtils;if(!y){const $=g.createSyntaxTree(this.valueExpression);y=g.createFunction($),this._compiledValueExpression.compiledFunction=y}this._compiledValueExpression.valueExpression=this.valueExpression;const x=g.executeFunction(y,g.createExecContext(e,g.getViewInfo({viewingMode:i,scale:s,spatialReference:l})));return this._getBreakIndexfromInfos(x)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,s=this.normalizationType;let l=parseFloat(i[t]);if(s){const d=this.normalizationTotal,y=parseFloat(i[this.normalizationField]);if(s===Sk)l=Math.log(l)*Math.LOG10E;else if(s!==um||isNaN(d)){if(s===hm&&!isNaN(y)){if(isNaN(l)||isNaN(y))return-1;l/=y}}else l=l/d*100}return this._getBreakIndexfromInfos(l)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]<=e&&(t?e<=s[1]:e<s[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};v([_(xk)],Si.prototype,"backgroundFillSymbol",void 0),v([_({type:[_g]})],Si.prototype,"classBreakInfos",void 0),v([$e("classBreakInfos")],Si.prototype,"readClassBreakInfos",null),v([Ee("classBreakInfos")],Si.prototype,"writeClassBreakInfos",null),v([_({type:String,json:{write:!0}})],Si.prototype,"defaultLabel",void 0),v([_(e1)],Si.prototype,"defaultSymbol",void 0),v([_({type:String,json:{write:!0}})],Si.prototype,"field",void 0),v([mt("field")],Si.prototype,"castField",null),v([_({type:Boolean})],Si.prototype,"isMaxInclusive",void 0),v([_({type:op,json:{write:!0}})],Si.prototype,"legendOptions",void 0),v([_({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Si.prototype,"minValue",null),v([_({type:String,json:{write:!0}})],Si.prototype,"normalizationField",void 0),v([_({type:Number,cast:e=>Gs(e),json:{write:!0}})],Si.prototype,"normalizationTotal",void 0),v([_({type:D1.apiValues,value:null,json:{type:D1.jsonValues,read:D1.read,write:D1.write}})],Si.prototype,"normalizationType",null),v([Fe({classBreaks:"class-breaks"})],Si.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Si.prototype,"valueExpression",void 0),v([_({type:String,json:{write:!0}})],Si.prototype,"valueExpressionTitle",void 0),Si=T9=v([H("esri.renderers.ClassBreaksRenderer")],Si);const $k=Si,iw=-3;var hl;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(hl||(hl={}));class M0e{constructor(t,i,s){this._namespace=t,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",s&&(this._storage.registerRemoveFunc(this._namespace,s),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,i,s,l=0){this._storage.put(this._namespace+t,i,s,l)}get(t){const i=this._storage.get(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}pop(t){const i=this._storage.pop(this._namespace+t);return i===void 0?++this._miss:++this._hit,i}updateSize(t,i,s){this._storage.updateSize(this._namespace+t,i,s)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class Mk{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new lh,this._users=new lh}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,i,s,l){const d=this._db.get(t);if(d&&(this._size-=d.size,this._db.delete(t),d.entry!==i&&this._notifyRemove(t,d.entry,hl.ALL)),s>this._maxSize)return void this._notifyRemove(t,i,hl.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return void console.warn("Refusing to cache entry with invalid size "+s);const y=1+Math.max(l,iw)-iw;this._db.set(t,{entry:i,size:s,lifetime:y,lives:y}),this._size+=s,this._checkSizeLimit()}updateSize(t,i,s){const l=this._db.get(t);if(l&&l.entry===i){for(this._size-=l.size;s>this._maxSize;){const d=this._notifyRemove(t,i,hl.SOME);if(!(Y(d)&&d>0))return void this._db.delete(t);s=d}l.size=s,this._size+=s,this._checkSizeLimit()}}pop(t){const i=this._db.get(t);if(i)return this._size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(t){const i=this._db.get(t);if(i!==void 0)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach((y,g)=>{const x=y.lifetime;s[x]=(s[x]||0)+y.size,this._users.forAll($=>{const E=$.namespace;if(g.startsWith(E)){const O=i[E]||0;i[E]=O+y.size}})});const l={};this._users.forAll(y=>{const g=y.namespace;if(!isNaN(y.hitRate)&&y.hitRate>0){const x=i[g]||0;i[g]=x,l[g]=Math.round(100*y.hitRate)+"%"}else l[g]="0%"});const d=Object.keys(i);d.sort((y,g)=>i[g]-i[y]),d.forEach(y=>t[y]=Math.round(i[y]/2**20)+"MB / "+l[y]);for(let y=s.length-1;y>=0;--y){const g=s[y];g&&(t["Priority "+(y+iw-1)]=Math.round(g/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((i,s)=>{s.startsWith(t)&&(this._size-=i.size,this._db.delete(s),this._notifyRemove(s,i.entry,hl.ALL))})}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,hl.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,s){let l;return this._removeFuncs.some(d=>{if(t.startsWith(d[0])){const y=d[1](i,s);return typeof y=="number"&&(l=y),!0}return!1}),l}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,i]of this._db){if(this._db.delete(t),i.lives<=1){this._size-=i.size;const s=this._notifyRemove(t,i.entry,hl.SOME);Y(s)&&s>0&&(this._size+=s,i.lives=i.lifetime,i.size=s,this._db.set(t,i))}else--i.lives,this._db.set(t,i);if(this._size<=.9*this.maxSize)return}}}class wB{constructor(t,i){this._storage=new Mk,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i,s){this._storage.put(t,i,s,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const Z7=Me.getLogger("esri.renderers.support.DictionaryLoader"),bB={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class u6{constructor(t,i,s){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new wB(100),this.url=t,this.config=i,this.fieldMap=s}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{s=await this._dictionaryPromise}catch(R){if(bs(R))return this._dictionaryPromise=null,null}const l={};if(this.fieldMap)for(const R of this._symbolFields){const L=this.fieldMap[R];if(L&&t.attributes[L]!=null){const z=""+t.attributes[L];l[R]=z}else l[R]=""}const d=s(l,i);if(!d||typeof d!="string")return null;const y=i4(d).toString(),g=this._symbolCache.get(y);if(g)return g.catch(()=>{this._symbolCache.pop(y)}),g;const x=d.split(";"),$=[],E=[];for(const R of x)if(R)if(R.includes("po:")){const L=R.substr(3).split("|");if(L.length===3){const z=L[0],V=L[1];let K=L[2];if(V==="DashTemplate")K=K.split(" ").map(ee=>Number(ee));else if(V==="Color"){const ee=new Je(K).toRgba();K=[ee[0],ee[1],ee[2],255*ee[3]]}else K=Number(K);E.push({primitiveName:z,propertyName:V,value:K})}}else if(R.includes("|")){for(const L of R.split("|"))if(this._itemNames.has(L)){$.push(L);break}}else this._itemNames.has(R)&&$.push(R);const O=!Y(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",P=this._cimPartsToCIMSymbol($,E,O,i);return this._symbolCache.put(y,P,1),P}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Z7.error("no valid URL!");const i=Vt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:Y(t)?t.signal:null}),[{data:s}]=await Promise.all([i,ca()]);if(!s)throw this._dictionaryPromise=null,new te("esri.renderers.DictionaryRenderer","Bad dictionary data!");const l=s.expression,d=s.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+s.cimRefTemplateUrl,this._itemNames=new Set(s.itemsNames),this._symbolFields=d.symbol;const y={};if(this.config){const x=this.config;for(const $ in x)y[$]=x[$]}if(d.configuration)for(const x of d.configuration)y.hasOwnProperty(x.name)||(y[x.name]=x.value);const g=[];if(Y(t)&&t.fields&&this.fieldMap)for(const x of this._symbolFields){const $=this.fieldMap[x],E=t.fields.filter(O=>O.name===$);E.length>0&&g.push({...E[0],name:x})}return this._dictionaryPromise=cz(l,Y(t)?t.spatialReference:null,g,y).then(x=>{const $={scale:0};return(E,O)=>{const P=x.repurposeFeature({geometry:null,attributes:E});return $.scale=Y(O)?O.scale:void 0,x.evaluate({$feature:P,$view:$})}}).catch(x=>(Z7.error("Creating dictinoary expression failed:",x),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,i,s,l){const d=new Array(t.length);for(let x=0;x<t.length;x++)d[x]=this._getSymbolPart(t[x],l);const y=await Promise.all(d),g=this.fieldMap;for(const x of y)Ik(x,g);return new Wf({data:this._combineSymbolParts(y,i,s)})}async _getSymbolPart(t,i){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(d=>d.data);const s=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),l=Vt(s,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,l);try{return(await l).data}catch(d){throw this._ongoingRequests.delete(t),d}}_combineSymbolParts(t,i,s){if(!t||t.length===0)return null;const l={...t[0]};if(t.length>1){l.symbolLayers=[];for(const d of t){const y=d;l.symbolLayers.unshift(...y.symbolLayers)}}return s&&(l.callout=bB),{type:"CIMSymbolReference",symbol:l,primitiveOverrides:i}}}function Ik(e,t){if(!e)return;const i=e.symbolLayers;if(!i)return;let s=i.length;for(;s--;){const l=i[s];l&&l.enable!==!1&&l.type==="CIMVectorMarker"&&_B(l,t)}}function _B(e,t){const i=e.markerGraphics;if(i)for(const s of i){if(!s)continue;const l=s.symbol;if(l)switch(l.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":Ik(l,t);break;case"CIMTextSymbol":l.fieldMap=t}}}var I0e=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:u6},Symbol.toStringTag,{value:"Module"})),E9;let hn=E9=class extends Wp(ma){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new u6(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,s){s!=null&&s.origin||super.writeVisualVariables(e,t,i,s)}clone(){return new E9({config:ie(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ie(this.fieldMap),url:ie(this.url),visualVariables:ie(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Ar(e,t,this.scaleExpression);for(const i in this.fieldMap){const s=this.fieldMap[i];t.has(s)&&e.add(s)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};v([_({type:u6})],hn.prototype,"_loader",null),v([_({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],hn.prototype,"config",void 0),v([_({type:Object,json:{write:!0}})],hn.prototype,"fieldMap",void 0),v([_({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],hn.prototype,"scaleExpression",void 0),v([Ee("scaleExpression")],hn.prototype,"writeData",null),v([_({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],hn.prototype,"scaleExpressionTitle",void 0),v([_({type:String,json:{write:!0}})],hn.prototype,"url",void 0),v([Ee("visualVariables")],hn.prototype,"writeVisualVariables",null),hn=E9=v([H("esri.renderers.DictionaryRenderer")],hn);const xB=hn;function Be(e,t){const i=t?{...t,source:e}:e;return _({aliasOf:i})}var A9;const SB=Me.getLogger("esri.renderers.support.AttributeColorInfo");let jo=A9=class extends ce{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(SB.error(".field: field must be a string value"),null):zf(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new A9({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([_({type:Je,json:{type:[Number],write:!0}})],jo.prototype,"color",void 0),v([_({type:String,json:{write:!0}})],jo.prototype,"field",void 0),v([mt("field")],jo.prototype,"castField",null),v([_({type:String,json:{write:!0}})],jo.prototype,"label",void 0),v([_({type:String,json:{write:!0}})],jo.prototype,"valueExpression",void 0),v([_({type:String,json:{write:!0}})],jo.prototype,"valueExpressionTitle",void 0),jo=A9=v([H("esri.renderers.support.AttributeColorInfo")],jo);const Tk=jo;var k9;let cm=k9=class extends ce{constructor(){super(...arguments),this.unit=null}clone(){return new k9({unit:this.unit})}};v([_({type:String,json:{write:!0}})],cm.prototype,"unit",void 0),cm=k9=v([H("esri.renderers.support.DotDensityLegendOptions")],cm);const $B=cm;var O9;let or=O9=class extends Wp(ma){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Je([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new _s,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Vl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new O9({attributes:ie(this.attributes),backgroundColor:ie(this.backgroundColor),dotBlendingEnabled:ie(this.dotBlendingEnabled),dotShape:ie(this.dotShape),dotSize:ie(this.dotSize),dotValue:ie(this.dotValue),legendOptions:ie(this.legendOptions),outline:ie(this.outline),referenceScale:ie(this.referenceScale),visualVariables:ie(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await Ar(e,t,i.valueExpression),i.field&&e.add(i.field)}};v([_({type:[Tk],json:{write:!0}})],or.prototype,"attributes",void 0),v([_({type:Je,json:{write:!0}})],or.prototype,"backgroundColor",void 0),v([_({type:Boolean}),Be("dotBlendingEnabled")],or.prototype,"blendDots",void 0),v([_({type:Boolean,json:{write:!0}})],or.prototype,"dotBlendingEnabled",void 0),v([_({type:String,json:{write:!1}})],or.prototype,"dotShape",void 0),v([_({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],or.prototype,"dotSize",void 0),v([_({type:$B,json:{write:!0}})],or.prototype,"legendOptions",void 0),v([_({type:_s,json:{default:null,write:!0}})],or.prototype,"outline",void 0),v([_({type:Number,json:{write:!0}})],or.prototype,"dotValue",void 0),v([_({type:Number}),Be("dotValue")],or.prototype,"referenceDotValue",void 0),v([_({type:Number,json:{write:!0}})],or.prototype,"referenceScale",void 0),v([_({type:Number,json:{write:!0}})],or.prototype,"seed",void 0),v([Fe({dotDensity:"dot-density"})],or.prototype,"type",void 0),or=O9=v([H("esri.renderers.DotDensityRenderer")],or);const MB=or;var C9;let a0=C9=class extends ce{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new C9({color:this.color,ratio:this.ratio})}};v([_({type:Je,json:{type:[Ft],default:null,write:!0}})],a0.prototype,"color",void 0),v([_({type:Number,json:{write:!0}})],a0.prototype,"ratio",void 0),a0=C9=v([H("esri.renderers.support.HeatmapColorStop")],a0);const B0=a0;let lc=class extends yi(ce){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};v([_({type:String,json:{write:!0}})],lc.prototype,"minLabel",void 0),v([_({type:String,json:{write:!0}})],lc.prototype,"maxLabel",void 0),v([_({type:String,json:{write:!0}})],lc.prototype,"title",void 0),lc=v([H("esri.renderers.support.HeatmapLegendOptions")],lc);function Gv(){return[0,0,0,0]}function IB(e){return[e[0],e[1],e[2],e[3]]}function Jp(e,t,i,s){return[e,t,i,s]}function TB(e){const t=Gv(),i=Math.min(4,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function EB(e,t){return new Float64Array(e,t,4)}function Ek(){return Gv()}function Ak(){return Jp(1,1,1,1)}function kk(){return Jp(1,0,0,0)}function Ok(){return Jp(0,1,0,0)}function Ck(){return Jp(0,0,1,0)}function Pk(){return Jp(0,0,0,1)}const AB=Ek(),kB=Ak(),OB=kk(),CB=Ok(),PB=Ck(),NB=Pk();Object.freeze(Object.defineProperty({__proto__:null,create:Gv,clone:IB,fromValues:Jp,fromArray:TB,createView:EB,zeros:Ek,ones:Ak,unitX:kk,unitY:Ok,unitZ:Ck,unitW:Pk,ZEROS:AB,ONES:kB,UNIT_X:OB,UNIT_Y:CB,UNIT_Z:PB,UNIT_W:NB},Symbol.toStringTag,{value:"Module"}));const h6=2.4;function RB(e){return mo(e*h6)}function jB(e){return rA(e)/h6}function LB(e,t,i,s){let{color:l,ratio:d}=t,{color:y,ratio:g}=i;g===d&&(g===1?d-=1e-6:g+=1e-6);const x=Kr((s-d)/(g-d),0,1);ZE(e,l.toArray(),y.toArray(),x)}function T0e(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:g})=>g>=0&&g<=1).sort((g,x)=>g.ratio-x.ratio).map(({color:g,ratio:x})=>({color:g,ratio:Math.max(x,.001)})),e.length<1)return i;let s=e[0],l=e[0],d=1;const y=Gv();for(let g=0;g<512;g++){const x=(g+.5)/512;for(;x>l.ratio&&d<e.length;)s=l,l=e[d++];LB(y,s,l,x),i.set(y,4*g)}return i}function E0e(e,t,i,s){const{radius:l,fieldOffset:d,field:y}=t,g=Math.round(rA(l)),x=new Float64Array(i*s);let $,E=Number.NEGATIVE_INFINITY;const O=zB(y,d),P=new Set;for(const R of e){const L=R.getCursor();for(;L.next();){const z=L.getObjectId();if(P.has(z))continue;P.add(z);const V=L.readLegacyPointGeometry(),K=128;if(V.x<-K||V.x>=i+K||V.y<-K||V.y>s+K)continue;const ee=+O(L),se=Math.max(0,Math.round(V.x)-g),oe=Math.max(0,Math.round(V.y)-g),ne=Math.min(s,Math.round(V.y)+g),ae=Math.min(i,Math.round(V.x)+g);for(let Ie=oe;Ie<ne;Ie++)for(let Se=se;Se<ae;Se++){const Pe=Ie*i+Se,Re=DB(V.x-Se,V.y-Ie,g);$=x[Pe]+=Re*ee,$>E&&(E=$)}}}return{matrix:x.buffer,max:E}}function A0e(e,t,i,s,l,d){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const y=e.getImageData(0,0,t,t);i&&s&&y.data.set(new Uint8ClampedArray(FB(t,i,s,l,d))),e.putImageData(y,0,0)}function FB(e,t,i,s,l){const d=new Uint32Array(e*e),y="buffer"in t?t:new Float64Array(t),g="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),x=g.length/(l-s);for(let $=0;$<y.length;$++){const E=y[$],O=Math.floor((E-s)*x);d[$]=g[Kr(O,0,g.length-1)]}return d.buffer}function DB(e,t,i){const s=Math.sqrt(e**2+t**2)/i;return s>1?0:3/(Math.PI*i**2)*(1-s**2)**2}function k0e(e,t){return typeof e=="function"?e:e?typeof t=="string"?i=>-1*+i[e]:i=>+i[e]+t:()=>1}function zB(e,t){return e!=null?typeof t=="string"?i=>-1*+i.readAttribute(e):i=>+i.readAttribute(e)+t:i=>1}var P9;const VB=Me.getLogger("esri.renderers.HeatmapRenderer");function Q7(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:s}=e;if(t!=null||i!=null||s!=null){const{blurRadius:l,maxPixelIntensity:d,minPixelIntensity:y,...g}=e;return g}}return e}let Oi=P9=class extends ma{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new B0({ratio:0,color:new Je("rgba(255, 140, 0, 0)")}),new B0({ratio:.75,color:new Je("rgba(255, 140, 0, 1)")}),new B0({ratio:.9,color:new Je("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return Q7(e)}get blurRadius(){return jB(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",RB(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(h6**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||cr(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,Lp(()=>{kF(VB,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=Q7(e),super.read(e,t)}getSymbol(){const e=this.referenceScale!==0?5:1,t=Math.min(this.radius*e,mo(256));return new ya({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,s=this.valueExpression;i&&typeof i=="string"&&await Hs(e,t,i),s&&typeof s=="string"&&await Ar(e,t,s)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new P9({colorStops:ie(this.colorStops),field:this.field,legendOptions:ie(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};v([_({type:ZA,json:{write:!1}})],Oi.prototype,"authoringInfo",void 0),v([_({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Oi.prototype,"blurRadius",null),v([_({type:[B0],json:{write:!0}})],Oi.prototype,"colorStops",void 0),v([_({type:String,json:{write:!0}})],Oi.prototype,"field",void 0),v([_({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Oi.prototype,"fieldOffset",void 0),v([_({type:lc,json:{write:!0}})],Oi.prototype,"legendOptions",void 0),v([_({type:Number,json:{write:!0}})],Oi.prototype,"maxDensity",void 0),v([_({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Oi.prototype,"maxPixelIntensity",null),v([_({type:Number,json:{write:!0}})],Oi.prototype,"minDensity",void 0),v([_({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Oi.prototype,"minPixelIntensity",null),v([_({type:Number,cast:_t,json:{write:!0}})],Oi.prototype,"radius",void 0),v([_({type:Number,range:{min:0},json:{default:0,write:!0}})],Oi.prototype,"referenceScale",void 0),v([Fe({heatmap:"heatmap"})],Oi.prototype,"type",void 0),v([_({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Oi.prototype,"valueExpression",void 0),v([_({type:String})],Oi.prototype,"valueExpressionTitle",void 0),v([_({readOnly:!0})],Oi.prototype,"_pixelIntensityToDensity",null),Oi=P9=v([H("esri.renderers.HeatmapRenderer")],Oi);const Nk=Oi;let zu=class extends yi(ce){constructor(){super(...arguments),this.color=new Je([0,0,0,0]),this.label=null,this.threshold=0}};v([_({type:Je,json:{write:!0}})],zu.prototype,"color",void 0),v([_({type:String,json:{write:!0}})],zu.prototype,"label",void 0),v([_({type:Number,range:{min:0,max:1},json:{write:!0}})],zu.prototype,"threshold",void 0),zu=v([H("esri.renderers.support.OthersCategory")],zu);let pm=class extends yi(ce){constructor(){super(...arguments),this.title=null}};v([_({type:String,json:{write:!0}})],pm.prototype,"title",void 0),pm=v([H("esri.renderers.support.PieChartLegendOptions")],pm);let ts=class extends Wp(yi(ma)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Je([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new zu,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new ya({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await Ar(e,t,i.valueExpression),i.field&&e.add(i.field)}};v([_({type:[Tk],json:{write:!0}})],ts.prototype,"attributes",void 0),v([_({type:Vl,json:{default:null,write:!0}})],ts.prototype,"backgroundFillSymbol",void 0),v([_({type:Je,json:{write:!0}})],ts.prototype,"defaultColor",void 0),v([_({type:String,json:{write:!0}})],ts.prototype,"defaultLabel",void 0),v([_({type:Number,range:{min:0,max:1},json:{write:!0}})],ts.prototype,"holePercentage",void 0),v([_({type:zu,json:{write:!0}})],ts.prototype,"othersCategory",void 0),v([_({type:pm,json:{write:!0}})],ts.prototype,"legendOptions",void 0),v([_({type:_s,json:{default:null,write:!0}})],ts.prototype,"outline",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],ts.prototype,"size",void 0),v([Fe({pieChart:"pie-chart"})],ts.prototype,"type",void 0),ts=v([H("esri.renderers.PieChartRenderer")],ts);const GB=ts;var N9;let mu=N9=class extends Wp(ma){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new N9({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ie(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};v([_({type:String,json:{write:!0}})],mu.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],mu.prototype,"label",void 0),v([_(e1)],mu.prototype,"symbol",void 0),v([Fe({simple:"simple"})],mu.prototype,"type",void 0),mu=N9=v([H("esri.renderers.SimpleRenderer")],mu);const t1=mu,qB=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function R9(e){return e instanceof ze}function eS(e){return e instanceof Ge?Object.keys(e.items):R9(e)?cr(e).keys():e?Object.keys(e):[]}function z1(e,t){return e instanceof Ge?e.items[t]:e[t]}function UB(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function H0(e){return e?e.declaredClass:null}function Rk(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const s=eS(e),l=eS(t);if(s.length===0&&l.length===0)return;if(!s.length||!l.length||UB(e,t))return{type:"complete",oldValue:e,newValue:t};const d=l.filter(O=>!s.includes(O)),y=s.filter(O=>!l.includes(O)),g=s.filter(O=>l.includes(O)&&z1(e,O)!==z1(t,O)).concat(d,y).sort(),x=H0(e);if(x&&qB.includes(x)&&g.length)return{type:"complete",oldValue:e,newValue:t};let $;const E=R9(e)&&R9(t);for(const O of g){const P=z1(e,O),R=z1(t,O);let L;if((E||typeof P!="function"&&typeof R!="function")&&P!==R&&(P!=null||R!=null)){if(i&&i[O]&&typeof i[O]=="function")L=i[O](P,R);else if(P instanceof Date&&R instanceof Date){if(P.getTime()===R.getTime())continue;L={type:"complete",oldValue:P,newValue:R}}else L=typeof P=="object"&&typeof R=="object"&&H0(P)===H0(R)?Rk(P,R):{type:"complete",oldValue:P,newValue:R};Y(L)&&(Y($)?$.diff[O]=L:$={type:"partial",diff:{[O]:L}})}}return $}function BB(e,t){if(he(e))return!1;const i=t.split(".");let s=e;for(const l of i){if(s.type==="complete")return!0;if(s.type!=="partial")return!1;{const d=s.diff[l];if(!d)return!1;s=d}}return!0}function O0e(e,t){for(const i of t)if(BB(e,i))return!0;return!1}function HB(e,t){if(!(typeof e=="function"||typeof t=="function"||he(e)&&he(t)))return he(e)||he(t)||typeof e=="object"&&typeof t=="object"&&H0(e)!==H0(t)?{type:"complete",oldValue:e,newValue:t}:Rk(e,t)}var j9;let Ua=j9=class extends ce{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new j9({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};v([_({type:String,json:{write:!0}})],Ua.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],Ua.prototype,"label",void 0),v([_(e1)],Ua.prototype,"symbol",void 0),v([_({json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}})],Ua.prototype,"value",void 0),v([mt("value")],Ua.prototype,"castValue",null),Ua=j9=v([H("esri.renderers.support.UniqueValueInfo")],Ua);const xg=Ua,WB=()=>!!pe("enable-feature:force-wosr"),rw={};async function JB(e,t){try{return{data:(await ZB(e,t)).data,baseUrl:wq(e),styleUrl:e}}catch(i){return Uf(i),null}}function KB(e,t,i){const s=Y(t.portal)?t.portal:Ui.getDefault();let l;const d=`${s.url} - ${s.user&&s.user.username} - ${e}`;return rw[d]||(rw[d]=YB(e,s,i).then(y=>(l=y,y.fetchData())).then(y=>({data:y,baseUrl:l.itemUrl,styleName:e}))),rw[d]}function YB(e,t,i){return t.load(i).then(()=>{const s=new ta({disableExtraQuery:!0,query:`owner:${tS} AND type:${iS} AND typekeywords:"${e}"`});return t.queryItems(s,i)}).then(({results:s})=>{let l=null;const d=e.toLowerCase();if(s&&Array.isArray(s)){for(const y of s)if(y.typeKeywords.some(g=>g.toLowerCase()===d)&&y.type===iS&&y.owner===tS){l=y;break}}if(!l)throw new te("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return l.load(i)})}function XB(e,t,i){return e.styleUrl?JB(e.styleUrl,i):e.styleName?KB(e.styleName,t,i):Promise.reject(new te("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function C0e(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function P0e(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!WB()){for(const i of e.formatInfos)if(i.type==="gltf")return i.href}return e.webRef}function ZB(e,t){const i={responseType:"json",query:{f:"json"},...t};return Vt(kn(e),i)}const tS="esri_en",iS="Style",N0e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var l0;const Bl=Me.getLogger("esri.renderers.UniqueValueRenderer"),QB=ni(xg);let ti=l0=class extends Wp(ma){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let s=!1;const l={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let d=0;d<i.length;d++){const y=t.find(g=>g.value===i[d].value);y?HB(y,i[d])?(l.changed.push({type:"complete",oldValue:y,newValue:i[d]}),s=!0):l.unchanged.push({oldValue:y,newValue:i[d]}):(l.added.push(i[d]),s=!0)}for(let d=0;d<t.length;d++)i.find(y=>y.value===t[d].value)||(l.removed.push(t[d]),s=!0);return s?l:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:zf(e)}writeField(e,t,i,s){typeof e=="string"?t[i]=e:s&&s.messages?s.messages.push(new te("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Bl.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,i){return i.portal||Ui.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const s=Up(t.styleUrl,i);return Object.freeze({styleUrl:s})}}writeStyleOrigin(e,t,i,s){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=Jf(e.styleUrl,s))}set uniqueValueInfos(e){this.styleOrigin?Bl.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Bl.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?QB(e):new xg({value:e,symbol:YA(t)}),this.uniqueValueInfos.push(i),this._valueInfoMap[i.value]=i}removeUniqueValueInfo(e){if(this.styleOrigin)Bl.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&(he(t)||he(t.arcade))&&(i={...i,arcade:await ca()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){if(this.valueExpression&&(he(t)||he(t.arcade)))return void Bl.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(e,t);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&(he(i)||he(i.arcade))){const l=await ca(),{arcadeUtils:d}=l;d.hasGeometryOperations(this.valueExpression)&&await d.enableGeometryOperations(),i={...i,arcade:l}}const s=this._getUniqueValueInfo(e,i);return s&&s.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new l0({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ie(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ie(this.visualVariables),legendOptions:ie(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ie(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=ie(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(ie(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(s=>s.collectRequiredFields(e,t)),Ar(e,t,this.valueExpression)];Hs(e,t,this.field),Hs(e,t,this.field2),Hs(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return XB(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const s=new Lh({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=s,this._isDefaultSymbolDerived=!0);const l=new xg({value:i.name,symbol:s});t.push(l),this._valueInfoMap[i.name]=l}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:s,spatialReference:l,arcade:d}=dv(t,{});let y=this._cache.compiledFunc;const g=d.arcadeUtils;if(!y){const $=g.createSyntaxTree(this.valueExpression);y=g.createFunction($),this._cache.compiledFunc=y}const x=g.executeFunction(y,g.createExecContext(e,g.getViewInfo({viewingMode:i,scale:s,spatialReference:l})));return this._valueInfoMap[x+""]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let s;if(typeof t!="function"&&this.field2){const l=this.field2,d=this.field3,y=[];t&&y.push(i[t]),l&&y.push(i[l]),d&&y.push(i[d]),s=y.join(this.fieldDelimiter||"")}else typeof t=="function"?s=t(e):t&&(s=i[t]);return this._valueInfoMap[s+""]}static fromPortalStyle(e,t){const i=new l0(t&&t.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t&&t.portal||Ui.getDefault());const s=i.populateFromStyle();return s.catch(l=>{Bl.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",l)}),s}static fromStyleUrl(e,t){const i=new l0(t&&t.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const s=i.populateFromStyle();return s.catch(l=>{Bl.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",l)}),s}};v([_({readOnly:!0})],ti.prototype,"_cache",null),v([Fe({uniqueValue:"unique-value"})],ti.prototype,"type",void 0),v([_(xk)],ti.prototype,"backgroundFillSymbol",void 0),v([_({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ti.prototype,"field",void 0),v([mt("field")],ti.prototype,"castField",null),v([Ee("field")],ti.prototype,"writeField",null),v([_({type:String,json:{write:!0}})],ti.prototype,"field2",void 0),v([_({type:String,json:{write:!0}})],ti.prototype,"field3",void 0),v([_({type:String,json:{write:!0}})],ti.prototype,"valueExpression",void 0),v([_({type:String,json:{write:!0}})],ti.prototype,"valueExpressionTitle",void 0),v([_({type:op,json:{write:!0}})],ti.prototype,"legendOptions",void 0),v([_({type:String,json:{write:!0}})],ti.prototype,"defaultLabel",void 0),v([_(GI({...e1},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ti.prototype,"defaultSymbol",null),v([_({type:String,json:{write:!0}})],ti.prototype,"fieldDelimiter",void 0),v([_({type:Ui,readOnly:!0})],ti.prototype,"portal",void 0),v([$e("portal",["styleName"])],ti.prototype,"readPortal",null),v([_({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],ti.prototype,"styleOrigin",void 0),v([$e("styleOrigin",["styleName","styleUrl"])],ti.prototype,"readStyleOrigin",null),v([Ee("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ti.prototype,"writeStyleOrigin",null),v([_({type:[xg],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ti.prototype,"uniqueValueInfos",null),ti=l0=v([H("esri.renderers.UniqueValueRenderer")],ti);const c6=ti,i1={key:"type",base:ma,typeMap:{heatmap:Nk,simple:t1,"unique-value":c6,"class-breaks":$k,"dot-density":MB,dictionary:xB,"pie-chart":GB},errorContext:"renderer"},jk={key:"type",base:ma,typeMap:{simple:t1,"unique-value":c6,"class-breaks":$k,heatmap:Nk},errorContext:"renderer"};function eH(e,t){return Lk(e,null,t)}const tH=jp({types:i1});function Lk(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new Er("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):tH(e,t,i):null}class p6{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(kb),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new p6,s=this._originStores[ct.DEFAULTS];s&&s.forEach((l,d)=>{i.set(d,ie(l),ct.DEFAULTS)});for(let l=ct.SERVICE;l<kb;l++){const d=this._originStores[l];d&&d.forEach((y,g)=>{t&&t.has(g)||i.set(g,ie(y),l)})}return i}get(t,i){const s=i===void 0?this._values:this._originStores[i];return s?s.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,s=ct.USER){let l=this._originStores[s];if(l||(l=new Map,this._originStores[s]=l),l.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=s){const d=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,s),d!==i}return!1}delete(t,i=ct.USER){const s=this._originStores[i];if(!s)return;const l=s.get(t);if(s.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let d=i-1;d>=0;d--){const y=this._originStores[d];if(y&&y.has(t)){this._values.set(t,y.get(t)),this._propertyOriginMap.set(t,d);break}}}return l}has(t,i){const s=i===void 0?this._values:this._originStores[i];return!!s&&s.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const s=this._originStores[i],l=s&&s.get(t),d=this._values.get(t);return this._values.set(t,l),this._propertyOriginMap.set(t,i),d!==l}originOf(t){return this._propertyOriginMap.get(t)||ct.DEFAULTS}forEach(t){this._values.forEach(t)}}const Fk=e=>{let t=class extends e{constructor(...i){super(...i);const s=cr(this),l=s.store,d=new p6;s.store=d,kT(s,l,d)}read(i,s){CT(this,i,s)}getAtOrigin(i,s){const l=sw(this),d=vl(s);if(typeof i=="string")return l.get(i,d);const y={};return i.forEach(g=>{y[g]=l.get(g,d)}),y}originOf(i){return rg(this.originIdOf(i))}originIdOf(i){return sw(this).originOf(i)}revert(i,s){const l=sw(this),d=vl(s),y=cr(this);let g;g=typeof i=="string"?i==="*"?l.keys(d):[i]:i,g.forEach(x=>{y.invalidate(x),l.revert(x,d),y.commit(x)})}};return t=v([H("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function sw(e){return cr(e).store}let rS=class extends Fk(ze){};rS=v([H("esri.core.ReadOnlyMultiOriginJSONSupport")],rS);const iH=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,s="user"){return nw(this).delete(i,vl(s))}write(i={},s){return RT(this,i=i||{},s),i}setAtOrigin(i,s,l){cr(this).setAtOrigin(i,s,vl(l))}removeOrigin(i){const s=nw(this),l=vl(i),d=s.keys(l);for(const y of d)s.originOf(y)===l&&s.set(y,s.get(y,l),ct.USER)}updateOrigin(i,s){const l=nw(this),d=vl(s),y=this.get(i);for(let g=d+1;g<kb;++g)l.delete(i,g);l.set(i,y,d)}toJSON(i){return this.write({},i)}};return t=v([H("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function nw(e){return cr(e).store}const r1=e=>{let t=class extends iH(Fk(e)){constructor(...i){super(...i)}};return t=v([H("esri.core.MultiOriginJSONSupport")],t),t};let Sg=class extends r1(ze){};Sg=v([H("esri.core.MultiOriginJSONSupport")],Sg);const rH=Me.getLogger("esri.layers.support.fromPortalItem");async function sH(e){const t="portalItem"in e?e:{portalItem:e},i=await fe(()=>import("./portalLayers.ba65dd67.js"),["assets/portalLayers.ba65dd67.js","assets/lazyLayerLoader.0727f24a.js","assets/layersLoader.10f1601e.js","assets/jsonContext.0f34a0dd.js"]);try{return await i.fromItem(t)}catch(s){const l=t&&t.portalItem,d=l&&l.id||"unset",y=l&&l.portal&&l.portal.url||vt.portalUrl;throw rH.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+y+"', id: '"+d+"')",s),s}}let nH=0,Ci=class extends Fl.EventedMixin(kv(vs)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new xt(-180,-90,180,90,Ye.WGS84),this.id=Date.now().toString(16)+"-layer-"+nH++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ye.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await fe(()=>import("./arcgisLayers.682ba25c.js"),["assets/arcgisLayers.682ba25c.js","assets/lazyLayerLoader.0727f24a.js"])).fromUrl(t)}static fromPortalItem(e){return sH(e)}initialize(){this.when().catch(e=>{var t,i;bs(e)||Me.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?fi(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Vt(e,{query:{f:"json"},responseType:"json"})).data;throw new te("layer:no-attribution-data","Layer does not have attribution data")}};v([_({type:String})],Ci.prototype,"attributionDataUrl",void 0),v([_({type:xt})],Ci.prototype,"fullExtent",void 0),v([_({readOnly:!0})],Ci.prototype,"hasAttributionData",null),v([_({type:String,clonable:!1})],Ci.prototype,"id",void 0),v([_({type:Boolean,nonNullable:!0})],Ci.prototype,"legendEnabled",void 0),v([_({type:["show","hide","hide-children"]})],Ci.prototype,"listMode",void 0),v([_({type:Number,range:{min:0,max:1},nonNullable:!0})],Ci.prototype,"opacity",void 0),v([_({clonable:!1})],Ci.prototype,"parent",void 0),v([_({readOnly:!0})],Ci.prototype,"parsedUrl",null),v([_({type:Boolean})],Ci.prototype,"popupEnabled",void 0),v([_({type:Boolean})],Ci.prototype,"attributionVisible",void 0),v([_({type:Ye})],Ci.prototype,"spatialReference",void 0),v([_({type:String})],Ci.prototype,"title",void 0),v([_({readOnly:!0,json:{read:!1}})],Ci.prototype,"type",void 0),v([_()],Ci.prototype,"url",void 0),v([_({type:Boolean,nonNullable:!0})],Ci.prototype,"visible",void 0),Ci=v([H("esri.layers.Layer")],Ci);const Sf=Ci;class $g{constructor(t=i=>i.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(i=>{t(i)||this._items.delete(i)}),this}}var Ir;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Ir||(Ir={}));let oH=0;function Dk(){return oH++}function aH(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Mg(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function zk(e,t,i,s){if(t.type===Ir.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Ir.INVOKE&&t.type!==Ir.RESPONSE)return void e.postMessage(t);let l;aH(i)?(l=sS(i.transferList),t.data=i.result):(l=sS(s),t.data=i),l?e.postMessage(t,l):e.postMessage(t)}function $f(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function sS(e){if(!e||!e.length)return null;if(pe("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!lH(i));return t.length?t:null}function lH(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const uH={statsWorker:()=>fe(()=>import("./statsWorker.c130137e.js"),["assets/statsWorker.c130137e.js","assets/quantizationUtils.852042e2.js","assets/utils.b5fbb48c.js","assets/ClassBreaksDefinition.00d127f8.js"]),geometryEngineWorker:()=>fe(()=>import("./geometryEngineWorker.32b82c1a.js"),["assets/geometryEngineWorker.32b82c1a.js","assets/geometryEngineJSON.d0ee6227.js","assets/json.d1a0fa35.js"]),CSVSourceWorker:()=>fe(()=>import("./CSVSourceWorker.c074fcd3.js"),["assets/CSVSourceWorker.c074fcd3.js","assets/json.d1a0fa35.js","assets/FeatureStore.8af668c5.js","assets/PooledRBush.ae263d80.js","assets/centroid.cead202c.js","assets/projectionSupport.0cf0914c.js","assets/QueryEngine.0fec2a1a.js","assets/QueryEngineResult.b7348a8a.js","assets/quantizationUtils.852042e2.js","assets/WhereClause.0db16567.js","assets/utils.b5fbb48c.js","assets/ClassBreaksDefinition.00d127f8.js","assets/utils.71c0daa2.js","assets/timeSupport.e544170c.js"]),EdgeProcessingWorker:()=>fe(()=>import("./EdgeProcessingWorker.9aa079af.js"),["assets/EdgeProcessingWorker.9aa079af.js","assets/deduplicate.4d4af28b.js","assets/InterleavedLayout.d9e217ae.js","assets/BufferView.b480ef50.js","assets/types.a0bac8dc.js","assets/VertexAttribute.5551e0d8.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js"]),ElevationSamplerWorker:()=>fe(()=>import("./ElevationSamplerWorker.f90591f1.js"),["assets/ElevationSamplerWorker.f90591f1.js","assets/PooledRBush.ae263d80.js","assets/georeference.3e56555c.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.a79dd289.js","assets/quat.6a9f6d39.js","assets/BufferView.b480ef50.js","assets/vec33.15857488.js"]),FeatureServiceSnappingSourceWorker:()=>fe(()=>import("./FeatureServiceSnappingSourceWorker.7cd25cd2.js"),["assets/FeatureServiceSnappingSourceWorker.7cd25cd2.js","assets/FeatureStore.8af668c5.js","assets/PooledRBush.ae263d80.js","assets/centroid.cead202c.js","assets/QueryEngine.0fec2a1a.js","assets/QueryEngineResult.b7348a8a.js","assets/quantizationUtils.852042e2.js","assets/WhereClause.0db16567.js","assets/utils.b5fbb48c.js","assets/ClassBreaksDefinition.00d127f8.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/utils.71c0daa2.js","assets/timeSupport.e544170c.js"]),GeoJSONSourceWorker:()=>fe(()=>import("./GeoJSONSourceWorker.8ecfa706.js"),["assets/GeoJSONSourceWorker.8ecfa706.js","assets/FeatureStore.8af668c5.js","assets/PooledRBush.ae263d80.js","assets/centroid.cead202c.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/QueryEngine.0fec2a1a.js","assets/QueryEngineResult.b7348a8a.js","assets/quantizationUtils.852042e2.js","assets/WhereClause.0db16567.js","assets/utils.b5fbb48c.js","assets/ClassBreaksDefinition.00d127f8.js","assets/utils.71c0daa2.js","assets/timeSupport.e544170c.js","assets/geojson.d10a9aa1.js","assets/sourceUtils.5d790161.js"]),LercWorker:()=>fe(()=>import("./LercWorker.bcb8816e.js"),[]),MemorySourceWorker:()=>fe(()=>import("./MemorySourceWorker.623acea7.js"),["assets/MemorySourceWorker.623acea7.js","assets/objectIdUtils.773397d7.js","assets/FeatureStore.8af668c5.js","assets/PooledRBush.ae263d80.js","assets/centroid.cead202c.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/QueryEngine.0fec2a1a.js","assets/QueryEngineResult.b7348a8a.js","assets/quantizationUtils.852042e2.js","assets/WhereClause.0db16567.js","assets/utils.b5fbb48c.js","assets/ClassBreaksDefinition.00d127f8.js","assets/utils.71c0daa2.js","assets/timeSupport.e544170c.js","assets/sourceUtils.5d790161.js"]),PBFDecoderWorker:()=>fe(()=>import("./PBFDecoderWorker.d9bfb3c0.js"),[]),Pipeline:()=>fe(()=>import("./Pipeline.3c775962.js"),["assets/Pipeline.3c775962.js","assets/QueryEngine.0fec2a1a.js","assets/QueryEngineResult.b7348a8a.js","assets/quantizationUtils.852042e2.js","assets/WhereClause.0db16567.js","assets/utils.b5fbb48c.js","assets/ClassBreaksDefinition.00d127f8.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/utils.71c0daa2.js","assets/timeSupport.e544170c.js","assets/FeatureStore2D.ac66f9fd.js","assets/CircularArray.747a350c.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/enums.6e42a319.js","assets/visualVariablesUtils.3d200005.js","assets/Utils.6a347352.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/visualVariablesUtils.15bb2785.js","assets/ogcFeatureUtils.a2d0b732.js","assets/geojson.d10a9aa1.js"]),PointCloudWorker:()=>fe(()=>import("./PointCloudWorker.2c8c6229.js"),["assets/PointCloudWorker.2c8c6229.js","assets/quat.6a9f6d39.js","assets/quatf64.ddec7ef6.js","assets/vec3f32.8d37ecf5.js","assets/PointCloudUniqueValueRenderer.d5aaaad3.js","assets/VertexAttribute.5551e0d8.js"]),RasterWorker:()=>fe(()=>import("./RasterWorker.7186b1ec.js"),["assets/RasterWorker.7186b1ec.js","assets/pixelUtils.4b18f06d.js","assets/RasterSymbolizer.08f49309.js","assets/colorUtils.e5585cd0.js","assets/rasterProjectionHelper.88248e8f.js","assets/dataUtils.fa36c568.js","assets/utils.13d84212.js"]),SceneLayerSnappingSourceWorker:()=>fe(()=>import("./SceneLayerSnappingSourceWorker.423f0623.js"),["assets/SceneLayerSnappingSourceWorker.423f0623.js","assets/lineSegment.568e7c1d.js","assets/vectorStacks.3d1c2125.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.a79dd289.js","assets/sphere.6e8b37ca.js","assets/QueryEngineResult.b7348a8a.js","assets/quantizationUtils.852042e2.js","assets/WhereClause.0db16567.js","assets/utils.b5fbb48c.js","assets/ClassBreaksDefinition.00d127f8.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/utils.71c0daa2.js","assets/Util.4a3e35d2.js","assets/EdgeProcessingWorker.9aa079af.js","assets/deduplicate.4d4af28b.js","assets/InterleavedLayout.d9e217ae.js","assets/BufferView.b480ef50.js","assets/types.a0bac8dc.js","assets/VertexAttribute.5551e0d8.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js"]),SceneLayerWorker:()=>fe(()=>import("./SceneLayerWorker.5b047a56.js"),["assets/SceneLayerWorker.5b047a56.js","assets/sphere.6e8b37ca.js","assets/vectorStacks.3d1c2125.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.a79dd289.js"]),WFSSourceWorker:()=>fe(()=>import("./WFSSourceWorker.e5bf3367.js"),["assets/WFSSourceWorker.e5bf3367.js","assets/FeatureStore.8af668c5.js","assets/PooledRBush.ae263d80.js","assets/centroid.cead202c.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/QueryEngine.0fec2a1a.js","assets/QueryEngineResult.b7348a8a.js","assets/quantizationUtils.852042e2.js","assets/WhereClause.0db16567.js","assets/utils.b5fbb48c.js","assets/ClassBreaksDefinition.00d127f8.js","assets/utils.71c0daa2.js","assets/timeSupport.e544170c.js","assets/geojson.d10a9aa1.js","assets/sourceUtils.5d790161.js","assets/wfsUtils.4fb9ac3e.js","assets/xmlUtils.986ddba5.js"]),WorkerTileHandler:()=>fe(()=>import("./WorkerTileHandler.784347f9.js"),["assets/WorkerTileHandler.784347f9.js","assets/enums.2a1fad7f.js","assets/GeometryUtils.814cb798.js","assets/BidiEngine.ec67919b.js","assets/config.40d47db8.js","assets/StyleDefinition.627ffe6c.js","assets/enums.6e42a319.js","assets/Geometry.b68345ae.js","assets/TileClipper.45a2e905.js","assets/GeometryUtils.8166011b.js","assets/StyleRepository.349ed8b4.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/colorUtils.e5585cd0.js","assets/earcut.d30cbec0.js"])},{CLOSE:nS,ABORT:oS,INVOKE:aS,RESPONSE:md,OPEN_PORT:lS,ON:hH}=Ir,cH=2;class pH{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Ir.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class qr{constructor(t,i,s){this._port=t,this._getNextJob=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new pH(l=>this._onInvokeMessage(l)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const l=new qr(i.port1,{channel:i,client:s},()=>null);return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=l),qr.clients.set(l,s),i.port2}static loadWorker(t){const i=uH[t];return i?i():Promise.resolve(null)}close(){this._post({type:nS}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,s){const l=s&&s.signal,d=s&&s.transferList;if(!this._port)return Promise.reject(new te("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const y=Dk();return new Promise((g,x)=>{if(Nn(l))return this._processWork(),void x(pi());const $=Rn(l,()=>{const O=this._outJobs.get(y);O&&(this._outJobs.delete(y),this._processWork(),ps(O.abortHandle),this._post({type:oS,jobId:y}),x(pi()))}),E={resolve:g,reject:x,abortHandle:$,debugInfo:t};this._outJobs.set(y,E),this._post({type:aS,jobId:y,methodName:t,abortable:l!=null},i,d)})}on(t,i){const s=new MessageChannel;function l(d){i(d.data)}return this._port.postMessage({type:Ir.ON,eventType:t,port:s.port2},[s.port2]),s.port1.addEventListener("message",l),s.port1.start(),{remove(){s.port1.postMessage({type:Ir.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",l)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:lS,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=cH)return;const t=this._getNextJob();if(!t)return;const{methodName:i,data:s,invokeOptions:l,deferred:d}=t;this.invoke(i,s,l).then(y=>d.resolve(y)).catch(y=>d.reject(y))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{ps(t.abortHandle),t.reject(pi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){Y(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const i=$f(t);if(i)switch(i.type){case md:this._onResponseMessage(i);break;case aS:this._invokeQueue.push(i);break;case oS:this._onAbortMessage(i);break;case nS:this._onCloseMessage();break;case lS:this._onOpenPortMessage(i);break;case hH:this._onOnMessage(i)}}_onAbortMessage(t){const i=this._inJobs,s=t.jobId,l=i.get(s);this._invokeQueue.push(t),l&&(l.controller&&l.controller.abort(),i.delete(s))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&qr.clients.get(this)===t&&t.destroy(),qr.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:s,data:l,abortable:d}=t,y=d?new AbortController:null,g=this._inJobs;let x,$=this._client,E=$[i];try{if(!E&&i&&i.includes(".")){const O=i.split(".");for(let P=0;P<O.length-1;P++)$=$[O[P]],E=$[O[P+1]]}if(typeof E!="function")throw new TypeError(`${i} is not a function`);x=E.call($,l,{client:this,signal:y?y.signal:null})}catch(O){return void this._post({type:md,jobId:s,error:Mg(O)})}fa(x)?(g.set(s,{controller:y,promise:x}),x.then(O=>{g.has(s)&&(g.delete(s),this._post({type:md,jobId:s},O))},O=>{g.has(s)&&(g.delete(s),bs(O)||this._post({type:md,jobId:s,error:Mg(O||{message:`Error encountered at method ${i}`})}))})):this._post({type:md,jobId:s},x)}_onOpenPortMessage(t){new qr(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:i}=t,s=this._client.on(t.eventType,d=>{i.postMessage(d)}),l=bv(t.port,"message",d=>{$f(d).type===Ir.CLOSE&&(l.remove(),s.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:s,data:l}=t,d=this._outJobs;if(!d.has(i))return;const y=d.get(i);this._processWork(),d.delete(i),ps(y.abortHandle),s?y.reject(te.fromJSON(JSON.parse(s))):y.resolve(l)}_post(t,i,s){return zk(this._port,t,i,s)}}qr.kernelInfo={revision:EA,version:X4,buildDate:TA},qr.clients=new Map;const dH=Me.getLogger("esri.core.workers.Connection");class fH{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new $g}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,i){return new Promise((s,l)=>{let d=!0;const y=g=>{bi(i.signal),d&&(d=!1,g())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let g=0;g<t.length;++g){const x=t[g];fa(x)?this._clientPromises[g]=x.then($=>(this._clients[g]=new qr($,i,()=>this._ongoingJobsQueue.pop()),y(s),this._clients[g]),()=>(y(l),null)):(this._clients[g]=new qr(x,i,()=>this._ongoingJobsQueue.pop()),this._clientPromises[g]=Promise.resolve(this._clients[g]),y(s))}})}broadcast(t,i,s){const l=new Array(this._clientPromises.length);for(let d=0;d<this._clientPromises.length;++d){const y=this._clientPromises[d];l[d]=y.then(g=>g.invoke(t,i,s))}return l}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(pi(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(s=>s.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,i,s){let l=null;Array.isArray(s)?(dH.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),l={transferList:s}):l=s;const d=ua();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:l,deferred:d});for(let y=0;y<this._clientPromises.length;y++){const g=this._clients[y];g?g.jobAdded():this._clientPromises[y].then(x=>x.jobAdded())}return d.promise}on(t,i){return Promise.all(this._clientPromises).then(()=>mv(this._clients.map(s=>s.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let s=i.length;for(let l=0;l<this._clientPromises.length;++l)this._clientPromises[l].then(d=>{i[l]=d.openPort(),--s==0&&t(i)})})}get test(){return{numClients:this._clients.length}}}const yH=Me.getLogger("esri.assets");function $t(e){if(!vt.assetsPath)throw yH.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new te("assets:path-not-set","config.assetsPath is not set");return Sh(vt.assetsPath,e)}const Vk=Me.getLogger("esri.intl");function Lo(e,t,i={}){const{format:s={}}=i;return fo(e,l=>mH(l,t,s))}function mH(e,t,i){let s,l;const d=e.indexOf(":");if(d===-1?s=e.trim():(s=e.slice(0,d).trim(),l=e.slice(d+1).trim()),!s)return"";const y=Np(s,t);if(y==null)return"";const g=i[l]||i[s];return g?gH(y,g):l?vH(y,l):d6(y)}function gH(e,t){switch(t.type){case"date":return pa(e,t.intlOptions);case"number":return Cl(e,t.intlOptions);default:return Vk.warn("missing format descriptor for key {key}"),d6(e)}}function vH(e,t){switch(t.toLowerCase()){case"dateformat":return pa(e);case"numberformat":return Cl(e);default:return Vk.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?pa(e):/^numberformat/i.test(t)?Cl(e):d6(e)}}function d6(e){switch(typeof e){case"string":return e;case"number":return Cl(e);case"boolean":return""+e;default:return e instanceof Date?pa(e):""}}const uS=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,wH={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function hS(e){var t;return(t=wH[e])!=null?t:!1}const u0=[],ap=new Map;function cS(e){for(const t of ap.keys())qk(e.pattern,t)&&ap.delete(t)}function bH(e){return u0.includes(e)||(cS(e),u0.unshift(e)),{remove(){const t=u0.indexOf(e);t>-1&&(u0.splice(t,1),cS(e))}}}async function Gk(e){const t=ds();ap.has(e)||ap.set(e,xH(e,t));const i=ap.get(e);return await SH.add(i),i}function _H(e){if(!uS.test(e))return null;const[,t,i]=uS.exec(e),s=t+(i?"-"+i.toUpperCase():"");return hS(s)?s:hS(t)?t:null}async function xH(e,t){const i=[];for(const s of u0)if(qk(s.pattern,e))try{return await s.fetchMessageBundle(e,t)}catch(l){i.push(l)}throw i.length?new te("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new te("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function qk(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}A4(()=>{ap.clear()});const SH=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ua())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function $H(e,t,i,s){const l=t.exec(i);if(!l)throw new te("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const d=l[1]?`${l[1]}/`:"",y=l[2],g=_H(s),x=`${d}${y}.json`,$=g?`${d}${y}_${g}.json`:x;let E;try{E=await pS(e($))}catch(O){if($===x)throw new te("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:O});try{E=await pS(e(x))}catch(P){throw new te("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:P})}}return E}async function pS(e){if(Y(dS.fetchBundleAsset))return dS.fetchBundleAsset(e);const t=await Vt(e,{responseType:"text"});return JSON.parse(t.data)}class MH{constructor({base:t="",pattern:i,location:s=new URL(window.location.href)}){let l;l=typeof s=="string"?d=>new URL(d,new URL(s,window.location.href)).href:s instanceof URL?d=>new URL(d,s).href:s,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=l,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,i){return $H(this.getAssetUrl,this.matcher,t,i)}}function IH(e){return new MH(e)}const dS={};bH(IH({pattern:"esri/",location:$t}));const fS={};function TH(e,t){for(const i of e)if(i.name===t.name)return;e.push(t)}function EH(e){var i;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=fS.baseUrl),(i=fS.packages)==null||i.forEach(s=>{TH(t.packages,s)}),t}class AH{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...s)=>t[i](...s)})}}class dm{constructor(){this._dispatcher=new AH,this._workerPostMessage({type:Ir.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){sg(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,s){this._dispatcher.addEventListener(t,i,s)}removeEventListener(t,i,s){this._dispatcher.removeEventListener(t,i,s)}_workerPostMessage(t){sg(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=$f(t);if(i&&i.type===Ir.OPEN){const{modulePath:s,jobId:l}=i;let d=await qr.loadWorker(s);d||(d=await fe(()=>import(s),[]));const y=qr.connect(d);this._workerPostMessage({type:Ir.OPENED,jobId:l,data:y})}}}const L9=Me.getLogger("esri.core.workers"),{HANDSHAKE:kH}=Ir,OH='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let V1,G1;const yS="Failed to create Worker. Fallback to execute module in main thread";async function CH(){if(!pe("esri-workers")||(pe("mozilla"),0))return mS(new dm);if(!V1&&!G1)try{const t=OH.replace('"{CONFIGURATION}"',`'${PH()}'`);V1=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){G1=t||{}}let e;if(V1)try{e=new Worker(V1,{name:"esri-worker-"+NH++})}catch{L9.warn(yS,G1),e=new dm}else L9.warn(yS,G1),e=new dm;return mS(e)}async function mS(e){return new Promise(t=>{function i(l){const d=$f(l);d&&d.type===kH&&(e.removeEventListener("message",i),e.removeEventListener("error",s),t(e))}function s(l){l.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",s),L9.warn("Failed to create Worker. Fallback to execute module in main thread",l),(e=new dm).addEventListener("message",i),e.addEventListener("error",s)}e.addEventListener("message",i),e.addEventListener("error",s)})}function PH(){let e;if(vt.default!=null){const l={...vt};delete l.default,e=JSON.parse(JSON.stringify(l))}else e=JSON.parse(JSON.stringify(vt));e.assetsPath=cs(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=ds(),e.has={"esri-csp-restrictions":pe("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":pe("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":pe("esri-2d-query-centroid-enabled"),"featurelayer-pbf":pe("featurelayer-pbf"),"featurelayer-simplify-thresholds":pe("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":pe("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":pe("featurelayer-simplify-mobile-factor"),"esri-atomics":pe("esri-atomics"),"esri-shared-array-buffer":pe("esri-shared-array-buffer"),"esri-tiles-debug":pe("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":pe("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":pe("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=cs(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=cs(e.workers.workerPath):e.workers.workerPath=cs($t("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=vt.workers.loaderConfig,i=EH({baseUrl:t==null?void 0:t.baseUrl,locale:ds(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]}),s={version:X4,buildDate:TA,revision:EA};return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:s})}let NH=0;const RH=Me.getLogger("esri.core.workers"),{ABORT:gS,INVOKE:jH,OPEN:LH,OPENED:FH,RESPONSE:gd}=Ir;class f6{constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",s=>{s.preventDefault(),RH.error(s)})}static async create(t){const i=await CH();return new f6(i,t)}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:s}=i,l=Dk();return new Promise((d,y)=>{const g={resolve:d,reject:y,abortHandle:h4(s,()=>{this._outJobs.delete(l),this._post({type:gS,jobId:l})})};this._outJobs.set(l,g),this._post({type:LH,jobId:l,modulePath:t})})}_onMessage(t){const i=$f(t);if(i)switch(i.type){case FH:this._onOpenedMessage(i);break;case gd:this._onResponseMessage(i);break;case gS:this._onAbortMessage(i);break;case jH:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,s=t.jobId,l=i.get(s);l&&(l.controller&&l.controller.abort(),i.delete(s))}_onInvokeMessage(t){const{methodName:i,jobId:s,data:l,abortable:d}=t,y=d?new AbortController:null,g=this._inJobs,x=Nq[i];let $;try{if(typeof x!="function")throw new TypeError(`${i} is not a function`);$=x.call(null,l,{signal:y?y.signal:null})}catch(E){return void this._post({type:gd,jobId:s,error:Mg(E)})}fa($)?(g.set(s,{controller:y,promise:$}),$.then(E=>{g.has(s)&&(g.delete(s),this._post({type:gd,jobId:s},E))},E=>{g.has(s)&&(g.delete(s),E||(E={message:"Error encountered at method"+i}),bs(E)||this._post({type:gd,jobId:s,error:Mg(E||{message:`Error encountered at method ${i}`})}))})):this._post({type:gd,jobId:s},$)}_onOpenedMessage(t){const{jobId:i,data:s}=t,l=this._outJobs.get(i);l&&(this._outJobs.delete(i),ps(l.abortHandle),l.resolve(s))}_onResponseMessage(t){const{jobId:i,error:s,data:l}=t,d=this._outJobs.get(i);d&&(this._outJobs.delete(i),ps(d.abortHandle),s?d.reject(te.fromJSON(JSON.parse(s))):d.resolve(l))}_post(t,i,s){return zk(this.worker,t,i,s)}}let Yu=pe("esri-workers-debug")?1:pe("host-browser")?navigator.hardwareConcurrency-1:0;Yu||(Yu=pe("safari")&&pe("mac")||pe("trident")?7:2);let vS=0;const fm=[];function DH(){Bk()}async function q1(e,t){const i=new fH;return await i.open(e,t),i}async function Uk(e,t={}){if(typeof e!="string")throw new te("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(pe("host-webworker")&&!pe("esri-workers")&&(i="local"),i==="local"){let s=await qr.loadWorker(e);s||(s=await fe(()=>import(e),[])),bi(t.signal);const l=t.client||s;return q1([qr.connect(s)],{...t,client:l})}if(await Bk(),bi(t.signal),i==="dedicated"){const s=vS++%Yu;return q1([await fm[s].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const s=Math.min(t.maxNumWorkers,Yu);if(s<Yu){const l=new Array(s);for(let d=0;d<s;++d){const y=vS++%Yu;l[d]=fm[y].open(e,t)}return q1(l,t)}}return q1(fm.map(s=>s.open(e,t)),t)}let U1=null;async function Bk(){if(U1)return U1;new AbortController;const e=[];for(let t=0;t<Yu;t++){const i=f6.create(t).then(s=>(fm[t]=s,s));e.push(i)}return U1=Promise.all(e),U1}const zH={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},Hk=[252,146,31,255],Wk={type:"esriSMS",style:"esriSMSCircle",size:6,color:Hk,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Jk={type:"esriSLS",style:"esriSLSSolid",width:.75,color:Hk},Kk={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},VH={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},GH={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},qH={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},UH={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};function R0e(e){return{renderer:{type:"simple",symbol:e==="esriGeometryPoint"||e==="esriGeometryMultipoint"?Wk:e==="esriGeometryPolyline"?Jk:Kk}}}const BH=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let HH=1;function j0e(e,t){if(pe("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this.${t} = null;`;for(const l in e)i+=`this${BH.test(l)?`.${l}`:`["${l}"]`} = ${JSON.stringify(e[l])};`;const s=new Function(`
      return class AttributesClass$${HH++} {
        constructor() {
          ${i};
        }
      }
    `)();return()=>new s}catch{return()=>({[t]:null,...e})}}function L0e(e={}){return[{name:"New Feature",description:"",prototype:{attributes:ie(e)}}]}function WH(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:zH,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}var F9;let h0=F9=class extends ce{constructor(e){super(e),this.name=null,this.code=null}clone(){return new F9({name:this.name,code:this.code})}};v([_({type:String,json:{write:!0}})],h0.prototype,"name",void 0),v([_({type:[String,Number],json:{write:!0}})],h0.prototype,"code",void 0),h0=F9=v([H("esri.layers.support.CodedValue")],h0);const JH=new tt({inherited:"inherited",codedValue:"coded-value",range:"range"});let c0=class extends ce{constructor(e){super(e),this.name=null,this.type=null}};v([_({type:String,json:{write:!0}})],c0.prototype,"name",void 0),v([Fe(JH)],c0.prototype,"type",void 0),c0=v([H("esri.layers.support.Domain")],c0);const qv=c0;var D9;let p0=D9=class extends qv{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(s=>(String(s.code)===i&&(t=s.name),!!t))}return t}clone(){return new D9({codedValues:ie(this.codedValues),name:this.name})}};v([_({type:[h0],json:{write:!0}})],p0.prototype,"codedValues",void 0),v([Fe({codedValue:"coded-value"})],p0.prototype,"type",void 0),p0=D9=v([H("esri.layers.support.CodedValueDomain")],p0);const Yk=p0;var z9;let ym=z9=class extends qv{constructor(e){super(e),this.type="inherited"}clone(){return new z9}};v([Fe({inherited:"inherited"})],ym.prototype,"type",void 0),ym=z9=v([H("esri.layers.support.InheritedDomain")],ym);const Xk=ym;var V9;let uc=V9=class extends qv{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new V9({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};v([_({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],uc.prototype,"maxValue",void 0),v([_({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],uc.prototype,"minValue",void 0),v([Fe({range:"range"})],uc.prototype,"type",void 0),uc=V9=v([H("esri.layers.support.RangeDomain")],uc);const Zk=uc,Qk={key:"type",base:qv,typeMap:{range:Zk,"coded-value":Yk,inherited:Xk}};function y6(e){if(!e||!e.type)return null;switch(e.type){case"range":return Zk.fromJSON(e);case"codedValue":return Yk.fromJSON(e);case"inherited":return Xk.fromJSON(e)}return null}const m6=new tt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var G9;const KH=new tt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let vr=G9=class extends ce{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?i.value:null}readValueType(e,{description:t}){let i;try{i=JSON.parse(t)}catch{}return i?KH.fromJSON(i.fieldValueType):null}clone(){return new G9({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};v([_({type:String,json:{write:!0}})],vr.prototype,"alias",void 0),v([_({type:[String,Number],json:{write:{allowNull:!0}}})],vr.prototype,"defaultValue",void 0),v([_()],vr.prototype,"description",void 0),v([$e("description")],vr.prototype,"readDescription",null),v([_({types:Qk,json:{read:{reader:y6},write:!0}})],vr.prototype,"domain",void 0),v([_({type:Boolean,json:{write:!0}})],vr.prototype,"editable",void 0),v([_({type:Ft,json:{write:!0}})],vr.prototype,"length",void 0),v([_({type:String,json:{write:!0}})],vr.prototype,"name",void 0),v([_({type:Boolean,json:{write:!0}})],vr.prototype,"nullable",void 0),v([Fe(m6)],vr.prototype,"type",void 0),v([_()],vr.prototype,"valueType",void 0),v([$e("valueType",["description"])],vr.prototype,"readValueType",null),vr=G9=v([H("esri.layers.support.Field")],vr);const Ih=vr;var q9;const U9=new tt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Di=q9=class extends ce{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var l;const i=Ye.fromJSON(t.spatialReference),s=[];for(let d=0;d<e.length;d++){const y=e[d],g=ws.fromJSON(y),x=y.geometry&&y.geometry.spatialReference;Y(g.geometry)&&!x&&(g.geometry.spatialReference=i);const $=y.aggregateGeometries,E=g.aggregateGeometries;if($&&Y(E))for(const O in E){const P=E[O],R=(l=$[O])==null?void 0:l.spatialReference;Y(P)&&!R&&(P.spatialReference=i)}s.push(g)}return s}writeGeometryType(e,t,i,s){if(e)return void U9.write(e,t,i,s);const{features:l}=this;if(l){for(const d of l)if(d&&Y(d.geometry))return void U9.write(d.geometry.type,t,i,s)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,s=ha(e);return!i&&t.spatialReference&&(s.spatialReference=Ye.fromJSON(t.spatialReference)),s}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const s of i)if(s&&Y(s.geometry)&&s.geometry.spatialReference)return void(t.spatialReference=s.geometry.spatialReference.toJSON())}}clone(){return new q9(this.cloneProperties())}cloneProperties(){return ie({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const s=t.features[i];if(s.geometry){const l=e&&e[i];s.geometry=l&&l.toJSON()||s.geometry}}return t}quantize(e){const{scale:[t,i],translate:[s,l]}=e,d=$=>Math.round(($-s)/t),y=$=>Math.round((l-$)/i),g=this.features,x=this._getQuantizationFunction(this.geometryType,d,y);for(let $=0,E=g.length;$<E;$++)x(g[$].geometry)||(g.splice($,1),$--,E--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[s,l],scale:[d,y]}=i,g=E=>E*d+s,x=E=>l-E*y,$=this._getHydrationFunction(e,g,x);for(const{geometry:E}of t)Y(E)&&$(E);return this.transform=null,this}_quantizePoints(e,t,i){let s,l;const d=[];for(let y=0,g=e.length;y<g;y++){const x=e[y];if(y>0){const $=t(x[0]),E=i(x[1]);$===s&&E===l||(d.push([$-s,E-l]),s=$,l=E)}else s=t(x[0]),l=i(x[1]),d.push([s,l])}return d.length>0?d:null}_getQuantizationFunction(e,t,i){return e==="point"?s=>(s.x=t(s.x),s.y=i(s.y),s):e==="polyline"||e==="polygon"?s=>{const l=uh(s)?s.rings:s.paths,d=[];for(let y=0,g=l.length;y<g;y++){const x=l[y],$=this._quantizePoints(x,t,i);$&&d.push($)}return d.length>0?(uh(s)?s.rings=d:s.paths=d,s):null}:e==="multipoint"?s=>{const l=this._quantizePoints(s.points,t,i);return l.length>0?(s.points=l,s):null}:e==="extent"?s=>s:null}_getHydrationFunction(e,t,i){return e==="point"?s=>{s.x=t(s.x),s.y=i(s.y)}:e==="polyline"||e==="polygon"?s=>{const l=uh(s)?s.rings:s.paths;let d,y;for(let g=0,x=l.length;g<x;g++){const $=l[g];for(let E=0,O=$.length;E<O;E++){const P=$[E];E>0?(d+=P[0],y+=P[1]):(d=P[0],y=P[1]),P[0]=t(d),P[1]=i(y)}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=i(s.ymin),s.xmax=t(s.xmax),s.ymax=i(s.ymax)}:e==="multipoint"?s=>{const l=s.points;let d,y;for(let g=0,x=l.length;g<x;g++){const $=l[g];g>0?(d+=$[0],y+=$[1]):(d=$[0],y=$[1]),$[0]=t(d),$[1]=i(y)}}:void 0}};v([_({type:String,json:{write:!0}})],Di.prototype,"displayFieldName",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Di.prototype,"exceededTransferLimit",void 0),v([_({type:[ws],json:{write:!0}})],Di.prototype,"features",void 0),v([$e("features")],Di.prototype,"readFeatures",null),v([_({type:[Ih],json:{write:!0}})],Di.prototype,"fields",void 0),v([_({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:U9.read}}})],Di.prototype,"geometryType",void 0),v([Ee("geometryType")],Di.prototype,"writeGeometryType",null),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Di.prototype,"hasM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Di.prototype,"hasZ",void 0),v([_({types:Ll,json:{write:!0}})],Di.prototype,"queryGeometry",void 0),v([$e("queryGeometry")],Di.prototype,"readQueryGeometry",null),v([_({type:Ye,json:{write:!0}})],Di.prototype,"spatialReference",void 0),v([Ee("spatialReference")],Di.prototype,"writeSpatialReference",null),v([_({json:{write:!0}})],Di.prototype,"transform",void 0),Di=q9=v([H("esri.rest.support.FeatureSet")],Di),Di.prototype.toJSON.isDefaultToJSON=!0;const s1=Di;var F0e=Object.freeze(Object.defineProperty({__proto__:null,default:s1},Symbol.toStringTag,{value:"Module"}));const wS=Me.getLogger("esri.layers.graphics.sources.GeoJSONSource");let gu=class extends vs{constructor(){super(...arguments),this.type="geojson",this.refresh=xv(async e=>{await this.load();const{extent:t,timeExtent:i}=await this._connection.invoke("refresh",e);return this.sourceJSON.extent=t,i&&(this.sourceJSON.timeInfo.timeExtent=[i.start,i.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}})}load(e){const t=Y(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t)).then(i=>s1.fromJSON(i))}queryFeaturesJSON(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatures",e?e.toJSON():null,t))}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:xt.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}_applyEdits(e){if(!this._connection)throw new te("geojson-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField,i=[],s=[],l=[];if(e.addFeatures)for(const d of e.addFeatures)i.push(this._serializeFeature(d));if(e.deleteFeatures)for(const d of e.deleteFeatures)"objectId"in d&&d.objectId!=null?s.push(d.objectId):"attributes"in d&&d.attributes[t]!=null&&s.push(d.attributes[t]);if(e.updateFeatures)for(const d of e.updateFeatures)l.push(this._serializeFeature(d));return this._connection.invoke("applyEdits",{adds:i,updates:l,deletes:s}).then(({extent:d,timeExtent:y,featureEditResults:g})=>(this.sourceJSON.extent=d,y&&(this.sourceJSON.timeInfo.timeExtent=[y.start,y.end]),this._createEditsResult(g)))}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new te("geojson-layer-source:edit-failure",t.description,{code:t.code}):null}}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e);return i?{geometry:i.toJSON(),attributes:t}:{attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return he(t)?null:t.type==="mesh"||t.type==="extent"?gs.fromExtent(t.extent):t}async _startWorker(e){this._connection=await Uk("GeoJSONSourceWorker",{strategy:pe("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,hasZ:s,geometryType:l,objectIdField:d,url:y,timeInfo:g,customParameters:x}=this.layer,$=this.layer.originOf("spatialReference")==="defaults",E={url:y,customParameters:x,fields:t&&t.map(P=>P.toJSON()),geometryType:b4.toJSON(l),hasZ:s,objectIdField:d,timeInfo:g?g.toJSON():null,spatialReference:$?null:i&&i.toJSON()},O=await this._connection.invoke("load",E,{signal:e});for(const P of O.warnings)wS.warn(P.message,{layer:this.layer,warning:P});O.featureErrors.length&&wS.warn(`Encountered ${O.featureErrors.length} validation errors while loading features`,O.featureErrors),this.sourceJSON=O.layerDefinition,this.capabilities=WH(this.sourceJSON.hasZ,!0)}};v([_()],gu.prototype,"capabilities",void 0),v([_()],gu.prototype,"type",void 0),v([_({constructOnly:!0})],gu.prototype,"layer",void 0),v([_()],gu.prototype,"sourceJSON",void 0),gu=v([H("esri.layers.graphics.sources.GeoJSONSource")],gu);function Uv(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function YH(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function XH(e,t,i,s,l,d,y,g,x,$,E,O,P,R,L,z){const V=new Float32Array(16);return V[0]=e,V[1]=t,V[2]=i,V[3]=s,V[4]=l,V[5]=d,V[6]=y,V[7]=g,V[8]=x,V[9]=$,V[10]=E,V[11]=O,V[12]=P,V[13]=R,V[14]=L,V[15]=z,V}function ZH(e,t){return new Float32Array(e,t,16)}const QH=Uv();Object.freeze(Object.defineProperty({__proto__:null,create:Uv,clone:YH,fromValues:XH,createView:ZH,IDENTITY:QH},Symbol.toStringTag,{value:"Module"}));function eW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Gl(e,t,i,s,l,d,y,g,x,$,E,O,P,R,L,z,V){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e[4]=d,e[5]=y,e[6]=g,e[7]=x,e[8]=$,e[9]=E,e[10]=O,e[11]=P,e[12]=R,e[13]=L,e[14]=z,e[15]=V,e}function g6(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ga(e,t){if(e===t){const i=t[1],s=t[2],l=t[3],d=t[6],y=t[7],g=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=d,e[11]=t[14],e[12]=l,e[13]=y,e[14]=g}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function tW(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],x=t[6],$=t[7],E=t[8],O=t[9],P=t[10],R=t[11],L=t[12],z=t[13],V=t[14],K=t[15],ee=i*g-s*y,se=i*x-l*y,oe=i*$-d*y,ne=s*x-l*g,ae=s*$-d*g,Ie=l*$-d*x,Se=E*z-O*L,Pe=E*V-P*L,Re=E*K-R*L,De=O*V-P*z,Le=O*K-R*z,qe=P*K-R*V;let Oe=ee*qe-se*Le+oe*De+ne*Re-ae*Pe+Ie*Se;return Oe?(Oe=1/Oe,e[0]=(g*qe-x*Le+$*De)*Oe,e[1]=(l*Le-s*qe-d*De)*Oe,e[2]=(z*Ie-V*ae+K*ne)*Oe,e[3]=(P*ae-O*Ie-R*ne)*Oe,e[4]=(x*Re-y*qe-$*Pe)*Oe,e[5]=(i*qe-l*Re+d*Pe)*Oe,e[6]=(V*oe-L*Ie-K*se)*Oe,e[7]=(E*Ie-P*oe+R*se)*Oe,e[8]=(y*Le-g*Re+$*Se)*Oe,e[9]=(s*Re-i*Le-d*Se)*Oe,e[10]=(L*ae-z*oe+K*ee)*Oe,e[11]=(O*oe-E*ae-R*ee)*Oe,e[12]=(g*Pe-y*De-x*Se)*Oe,e[13]=(i*De-s*Pe+l*Se)*Oe,e[14]=(z*se-L*ne-V*ee)*Oe,e[15]=(E*ne-O*se+P*ee)*Oe,e):null}function iW(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],x=t[6],$=t[7],E=t[8],O=t[9],P=t[10],R=t[11],L=t[12],z=t[13],V=t[14],K=t[15];return e[0]=g*(P*K-R*V)-O*(x*K-$*V)+z*(x*R-$*P),e[1]=-(s*(P*K-R*V)-O*(l*K-d*V)+z*(l*R-d*P)),e[2]=s*(x*K-$*V)-g*(l*K-d*V)+z*(l*$-d*x),e[3]=-(s*(x*R-$*P)-g*(l*R-d*P)+O*(l*$-d*x)),e[4]=-(y*(P*K-R*V)-E*(x*K-$*V)+L*(x*R-$*P)),e[5]=i*(P*K-R*V)-E*(l*K-d*V)+L*(l*R-d*P),e[6]=-(i*(x*K-$*V)-y*(l*K-d*V)+L*(l*$-d*x)),e[7]=i*(x*R-$*P)-y*(l*R-d*P)+E*(l*$-d*x),e[8]=y*(O*K-R*z)-E*(g*K-$*z)+L*(g*R-$*O),e[9]=-(i*(O*K-R*z)-E*(s*K-d*z)+L*(s*R-d*O)),e[10]=i*(g*K-$*z)-y*(s*K-d*z)+L*(s*$-d*g),e[11]=-(i*(g*R-$*O)-y*(s*R-d*O)+E*(s*$-d*g)),e[12]=-(y*(O*V-P*z)-E*(g*V-x*z)+L*(g*P-x*O)),e[13]=i*(O*V-P*z)-E*(s*V-l*z)+L*(s*P-l*O),e[14]=-(i*(g*V-x*z)-y*(s*V-l*z)+L*(s*x-l*g)),e[15]=i*(g*P-x*O)-y*(s*P-l*O)+E*(s*x-l*g),e}function rW(e){const t=e[0],i=e[1],s=e[2],l=e[3],d=e[4],y=e[5],g=e[6],x=e[7],$=e[8],E=e[9],O=e[10],P=e[11],R=e[12],L=e[13],z=e[14],V=e[15];return(t*y-i*d)*(O*V-P*z)-(t*g-s*d)*(E*V-P*L)+(t*x-l*d)*(E*z-O*L)+(i*g-s*y)*($*V-P*R)-(i*x-l*y)*($*z-O*R)+(s*x-l*g)*($*L-E*R)}function eO(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],x=t[5],$=t[6],E=t[7],O=t[8],P=t[9],R=t[10],L=t[11],z=t[12],V=t[13],K=t[14],ee=t[15];let se=i[0],oe=i[1],ne=i[2],ae=i[3];return e[0]=se*s+oe*g+ne*O+ae*z,e[1]=se*l+oe*x+ne*P+ae*V,e[2]=se*d+oe*$+ne*R+ae*K,e[3]=se*y+oe*E+ne*L+ae*ee,se=i[4],oe=i[5],ne=i[6],ae=i[7],e[4]=se*s+oe*g+ne*O+ae*z,e[5]=se*l+oe*x+ne*P+ae*V,e[6]=se*d+oe*$+ne*R+ae*K,e[7]=se*y+oe*E+ne*L+ae*ee,se=i[8],oe=i[9],ne=i[10],ae=i[11],e[8]=se*s+oe*g+ne*O+ae*z,e[9]=se*l+oe*x+ne*P+ae*V,e[10]=se*d+oe*$+ne*R+ae*K,e[11]=se*y+oe*E+ne*L+ae*ee,se=i[12],oe=i[13],ne=i[14],ae=i[15],e[12]=se*s+oe*g+ne*O+ae*z,e[13]=se*l+oe*x+ne*P+ae*V,e[14]=se*d+oe*$+ne*R+ae*K,e[15]=se*y+oe*E+ne*L+ae*ee,e}function sW(e,t,i){const s=i[0],l=i[1],d=i[2];if(t===e)e[12]=t[0]*s+t[4]*l+t[8]*d+t[12],e[13]=t[1]*s+t[5]*l+t[9]*d+t[13],e[14]=t[2]*s+t[6]*l+t[10]*d+t[14],e[15]=t[3]*s+t[7]*l+t[11]*d+t[15];else{const y=t[0],g=t[1],x=t[2],$=t[3],E=t[4],O=t[5],P=t[6],R=t[7],L=t[8],z=t[9],V=t[10],K=t[11];e[0]=y,e[1]=g,e[2]=x,e[3]=$,e[4]=E,e[5]=O,e[6]=P,e[7]=R,e[8]=L,e[9]=z,e[10]=V,e[11]=K,e[12]=y*s+E*l+L*d+t[12],e[13]=g*s+O*l+z*d+t[13],e[14]=x*s+P*l+V*d+t[14],e[15]=$*s+R*l+K*d+t[15]}return e}function nW(e,t,i){const s=i[0],l=i[1],d=i[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*l,e[5]=t[5]*l,e[6]=t[6]*l,e[7]=t[7]*l,e[8]=t[8]*d,e[9]=t[9]*d,e[10]=t[10]*d,e[11]=t[11]*d,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function oW(e,t,i,s){let l,d,y,g,x,$,E,O,P,R,L,z,V,K,ee,se,oe,ne,ae,Ie,Se,Pe,Re,De,Le=s[0],qe=s[1],Oe=s[2],zt=Math.sqrt(Le*Le+qe*qe+Oe*Oe);return zt<et?null:(zt=1/zt,Le*=zt,qe*=zt,Oe*=zt,l=Math.sin(i),d=Math.cos(i),y=1-d,g=t[0],x=t[1],$=t[2],E=t[3],O=t[4],P=t[5],R=t[6],L=t[7],z=t[8],V=t[9],K=t[10],ee=t[11],se=Le*Le*y+d,oe=qe*Le*y+Oe*l,ne=Oe*Le*y-qe*l,ae=Le*qe*y-Oe*l,Ie=qe*qe*y+d,Se=Oe*qe*y+Le*l,Pe=Le*Oe*y+qe*l,Re=qe*Oe*y-Le*l,De=Oe*Oe*y+d,e[0]=g*se+O*oe+z*ne,e[1]=x*se+P*oe+V*ne,e[2]=$*se+R*oe+K*ne,e[3]=E*se+L*oe+ee*ne,e[4]=g*ae+O*Ie+z*Se,e[5]=x*ae+P*Ie+V*Se,e[6]=$*ae+R*Ie+K*Se,e[7]=E*ae+L*Ie+ee*Se,e[8]=g*Pe+O*Re+z*De,e[9]=x*Pe+P*Re+V*De,e[10]=$*Pe+R*Re+K*De,e[11]=E*Pe+L*Re+ee*De,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function aW(e,t,i){const s=Math.sin(i),l=Math.cos(i),d=t[4],y=t[5],g=t[6],x=t[7],$=t[8],E=t[9],O=t[10],P=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=d*l+$*s,e[5]=y*l+E*s,e[6]=g*l+O*s,e[7]=x*l+P*s,e[8]=$*l-d*s,e[9]=E*l-y*s,e[10]=O*l-g*s,e[11]=P*l-x*s,e}function lW(e,t,i){const s=Math.sin(i),l=Math.cos(i),d=t[0],y=t[1],g=t[2],x=t[3],$=t[8],E=t[9],O=t[10],P=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*l-$*s,e[1]=y*l-E*s,e[2]=g*l-O*s,e[3]=x*l-P*s,e[8]=d*s+$*l,e[9]=y*s+E*l,e[10]=g*s+O*l,e[11]=x*s+P*l,e}function uW(e,t,i){const s=Math.sin(i),l=Math.cos(i),d=t[0],y=t[1],g=t[2],x=t[3],$=t[4],E=t[5],O=t[6],P=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=d*l+$*s,e[1]=y*l+E*s,e[2]=g*l+O*s,e[3]=x*l+P*s,e[4]=$*l-d*s,e[5]=E*l-y*s,e[6]=O*l-g*s,e[7]=P*l-x*s,e}function tO(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function hW(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cW(e,t,i){let s,l,d,y=i[0],g=i[1],x=i[2],$=Math.sqrt(y*y+g*g+x*x);return $<et?null:($=1/$,y*=$,g*=$,x*=$,s=Math.sin(t),l=Math.cos(t),d=1-l,e[0]=y*y*d+l,e[1]=g*y*d+x*s,e[2]=x*y*d-g*s,e[3]=0,e[4]=y*g*d-x*s,e[5]=g*g*d+l,e[6]=x*g*d+y*s,e[7]=0,e[8]=y*x*d+g*s,e[9]=g*x*d-y*s,e[10]=x*x*d+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function pW(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function dW(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fW(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function iO(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=s+s,x=l+l,$=d+d,E=s*g,O=s*x,P=s*$,R=l*x,L=l*$,z=d*$,V=y*g,K=y*x,ee=y*$;return e[0]=1-(R+z),e[1]=O+ee,e[2]=P-K,e[3]=0,e[4]=O-ee,e[5]=1-(E+z),e[6]=L+V,e[7]=0,e[8]=P+K,e[9]=L-V,e[10]=1-(E+R),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function yW(e,t){const i=mW,s=-t[0],l=-t[1],d=-t[2],y=t[3],g=t[4],x=t[5],$=t[6],E=t[7],O=s*s+l*l+d*d+y*y;return O>0?(i[0]=2*(g*y+E*s+x*d-$*l)/O,i[1]=2*(x*y+E*l+$*s-g*d)/O,i[2]=2*($*y+E*d+g*l-x*s)/O):(i[0]=2*(g*y+E*s+x*d-$*l),i[1]=2*(x*y+E*l+$*s-g*d),i[2]=2*($*y+E*d+g*l-x*s)),iO(e,t,i),e}const mW=bo();function gW(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function vW(e,t){const i=t[0],s=t[1],l=t[2],d=t[4],y=t[5],g=t[6],x=t[8],$=t[9],E=t[10];return e[0]=Math.sqrt(i*i+s*s+l*l),e[1]=Math.sqrt(d*d+y*y+g*g),e[2]=Math.sqrt(x*x+$*$+E*E),e}function wW(e,t){const i=t[0]+t[5]+t[10];let s=0;return i>0?(s=2*Math.sqrt(i+1),e[3]=.25*s,e[0]=(t[6]-t[9])/s,e[1]=(t[8]-t[2])/s,e[2]=(t[1]-t[4])/s):t[0]>t[5]&&t[0]>t[10]?(s=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/s,e[0]=.25*s,e[1]=(t[1]+t[4])/s,e[2]=(t[8]+t[2])/s):t[5]>t[10]?(s=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/s,e[0]=(t[1]+t[4])/s,e[1]=.25*s,e[2]=(t[6]+t[9])/s):(s=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/s,e[0]=(t[8]+t[2])/s,e[1]=(t[6]+t[9])/s,e[2]=.25*s),e}function bW(e,t,i,s){const l=t[0],d=t[1],y=t[2],g=t[3],x=l+l,$=d+d,E=y+y,O=l*x,P=l*$,R=l*E,L=d*$,z=d*E,V=y*E,K=g*x,ee=g*$,se=g*E,oe=s[0],ne=s[1],ae=s[2];return e[0]=(1-(L+V))*oe,e[1]=(P+se)*oe,e[2]=(R-ee)*oe,e[3]=0,e[4]=(P-se)*ne,e[5]=(1-(O+V))*ne,e[6]=(z+K)*ne,e[7]=0,e[8]=(R+ee)*ae,e[9]=(z-K)*ae,e[10]=(1-(O+L))*ae,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function _W(e,t,i,s,l){const d=t[0],y=t[1],g=t[2],x=t[3],$=d+d,E=y+y,O=g+g,P=d*$,R=d*E,L=d*O,z=y*E,V=y*O,K=g*O,ee=x*$,se=x*E,oe=x*O,ne=s[0],ae=s[1],Ie=s[2],Se=l[0],Pe=l[1],Re=l[2],De=(1-(z+K))*ne,Le=(R+oe)*ne,qe=(L-se)*ne,Oe=(R-oe)*ae,zt=(1-(P+K))*ae,ir=(V+ee)*ae,Xt=(L+se)*Ie,rr=(V-ee)*Ie,Xr=(1-(P+z))*Ie;return e[0]=De,e[1]=Le,e[2]=qe,e[3]=0,e[4]=Oe,e[5]=zt,e[6]=ir,e[7]=0,e[8]=Xt,e[9]=rr,e[10]=Xr,e[11]=0,e[12]=i[0]+Se-(De*Se+Oe*Pe+Xt*Re),e[13]=i[1]+Pe-(Le*Se+zt*Pe+rr*Re),e[14]=i[2]+Re-(qe*Se+ir*Pe+Xr*Re),e[15]=1,e}function xW(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=i+i,g=s+s,x=l+l,$=i*y,E=s*y,O=s*g,P=l*y,R=l*g,L=l*x,z=d*y,V=d*g,K=d*x;return e[0]=1-O-L,e[1]=E+K,e[2]=P-V,e[3]=0,e[4]=E-K,e[5]=1-$-L,e[6]=R+z,e[7]=0,e[8]=P+V,e[9]=R-z,e[10]=1-$-O,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function SW(e,t,i,s,l,d,y){const g=1/(i-t),x=1/(l-s),$=1/(d-y);return e[0]=2*d*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*d*x,e[6]=0,e[7]=0,e[8]=(i+t)*g,e[9]=(l+s)*x,e[10]=(y+d)*$,e[11]=-1,e[12]=0,e[13]=0,e[14]=y*d*2*$,e[15]=0,e}function $W(e,t,i,s,l){const d=1/Math.tan(t/2);let y;return e[0]=d/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,l!=null&&l!==1/0?(y=1/(s-l),e[10]=(l+s)*y,e[14]=2*l*s*y):(e[10]=-1,e[14]=-2*s),e}function MW(e,t,i,s){const l=Math.tan(t.upDegrees*Math.PI/180),d=Math.tan(t.downDegrees*Math.PI/180),y=Math.tan(t.leftDegrees*Math.PI/180),g=Math.tan(t.rightDegrees*Math.PI/180),x=2/(y+g),$=2/(l+d);return e[0]=x,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=$,e[6]=0,e[7]=0,e[8]=-(y-g)*x*.5,e[9]=(l-d)*$*.5,e[10]=s/(i-s),e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i/(i-s),e[15]=0,e}function IW(e,t,i,s,l,d,y){const g=1/(t-i),x=1/(s-l),$=1/(d-y);return e[0]=-2*g,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*$,e[11]=0,e[12]=(t+i)*g,e[13]=(l+s)*x,e[14]=(y+d)*$,e[15]=1,e}function TW(e,t,i,s){let l,d,y,g,x,$,E,O,P,R;const L=t[0],z=t[1],V=t[2],K=s[0],ee=s[1],se=s[2],oe=i[0],ne=i[1],ae=i[2];return Math.abs(L-oe)<et&&Math.abs(z-ne)<et&&Math.abs(V-ae)<et?g6(e):(E=L-oe,O=z-ne,P=V-ae,R=1/Math.sqrt(E*E+O*O+P*P),E*=R,O*=R,P*=R,l=ee*P-se*O,d=se*E-K*P,y=K*O-ee*E,R=Math.sqrt(l*l+d*d+y*y),R?(R=1/R,l*=R,d*=R,y*=R):(l=0,d=0,y=0),g=O*y-P*d,x=P*l-E*y,$=E*d-O*l,R=Math.sqrt(g*g+x*x+$*$),R?(R=1/R,g*=R,x*=R,$*=R):(g=0,x=0,$=0),e[0]=l,e[1]=g,e[2]=E,e[3]=0,e[4]=d,e[5]=x,e[6]=O,e[7]=0,e[8]=y,e[9]=$,e[10]=P,e[11]=0,e[12]=-(l*L+d*z+y*V),e[13]=-(g*L+x*z+$*V),e[14]=-(E*L+O*z+P*V),e[15]=1,e)}function EW(e,t,i,s){const l=t[0],d=t[1],y=t[2],g=s[0],x=s[1],$=s[2];let E=l-i[0],O=d-i[1],P=y-i[2],R=E*E+O*O+P*P;R>0&&(R=1/Math.sqrt(R),E*=R,O*=R,P*=R);let L=x*P-$*O,z=$*E-g*P,V=g*O-x*E;return R=L*L+z*z+V*V,R>0&&(R=1/Math.sqrt(R),L*=R,z*=R,V*=R),e[0]=L,e[1]=z,e[2]=V,e[3]=0,e[4]=O*V-P*z,e[5]=P*L-E*V,e[6]=E*z-O*L,e[7]=0,e[8]=E,e[9]=O,e[10]=P,e[11]=0,e[12]=l,e[13]=d,e[14]=y,e[15]=1,e}function AW(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function kW(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function OW(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function rO(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function CW(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function PW(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e[9]=t[9]+i[9]*s,e[10]=t[10]+i[10]*s,e[11]=t[11]+i[11]*s,e[12]=t[12]+i[12]*s,e[13]=t[13]+i[13]*s,e[14]=t[14]+i[14]*s,e[15]=t[15]+i[15]*s,e}function NW(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function RW(e,t){if(e===t)return!0;const i=e[0],s=e[1],l=e[2],d=e[3],y=e[4],g=e[5],x=e[6],$=e[7],E=e[8],O=e[9],P=e[10],R=e[11],L=e[12],z=e[13],V=e[14],K=e[15],ee=t[0],se=t[1],oe=t[2],ne=t[3],ae=t[4],Ie=t[5],Se=t[6],Pe=t[7],Re=t[8],De=t[9],Le=t[10],qe=t[11],Oe=t[12],zt=t[13],ir=t[14],Xt=t[15];return Math.abs(i-ee)<=et*Math.max(1,Math.abs(i),Math.abs(ee))&&Math.abs(s-se)<=et*Math.max(1,Math.abs(s),Math.abs(se))&&Math.abs(l-oe)<=et*Math.max(1,Math.abs(l),Math.abs(oe))&&Math.abs(d-ne)<=et*Math.max(1,Math.abs(d),Math.abs(ne))&&Math.abs(y-ae)<=et*Math.max(1,Math.abs(y),Math.abs(ae))&&Math.abs(g-Ie)<=et*Math.max(1,Math.abs(g),Math.abs(Ie))&&Math.abs(x-Se)<=et*Math.max(1,Math.abs(x),Math.abs(Se))&&Math.abs($-Pe)<=et*Math.max(1,Math.abs($),Math.abs(Pe))&&Math.abs(E-Re)<=et*Math.max(1,Math.abs(E),Math.abs(Re))&&Math.abs(O-De)<=et*Math.max(1,Math.abs(O),Math.abs(De))&&Math.abs(P-Le)<=et*Math.max(1,Math.abs(P),Math.abs(Le))&&Math.abs(R-qe)<=et*Math.max(1,Math.abs(R),Math.abs(qe))&&Math.abs(L-Oe)<=et*Math.max(1,Math.abs(L),Math.abs(Oe))&&Math.abs(z-zt)<=et*Math.max(1,Math.abs(z),Math.abs(zt))&&Math.abs(V-ir)<=et*Math.max(1,Math.abs(V),Math.abs(ir))&&Math.abs(K-Xt)<=et*Math.max(1,Math.abs(K),Math.abs(Xt))}function jW(e){const t=et,i=e[0],s=e[1],l=e[2],d=e[4],y=e[5],g=e[6],x=e[8],$=e[9],E=e[10];return Math.abs(1-(i*i+d*d+x*x))<=t&&Math.abs(1-(s*s+y*y+$*$))<=t&&Math.abs(1-(l*l+g*g+E*E))<=t}const LW=eO,FW=rO;Object.freeze(Object.defineProperty({__proto__:null,copy:eW,set:Gl,identity:g6,transpose:ga,invert:tW,adjoint:iW,determinant:rW,multiply:eO,translate:sW,scale:nW,rotate:oW,rotateX:aW,rotateY:lW,rotateZ:uW,fromTranslation:tO,fromScaling:hW,fromRotation:cW,fromXRotation:pW,fromYRotation:dW,fromZRotation:fW,fromRotationTranslation:iO,fromQuat2:yW,getTranslation:gW,getScaling:vW,getRotation:wW,fromRotationTranslationScale:bW,fromRotationTranslationScaleOrigin:_W,fromQuat:xW,frustum:SW,perspective:$W,perspectiveFromFieldOfView:MW,ortho:IW,lookAt:TW,targetTo:EW,str:AW,frob:kW,add:OW,subtract:rO,multiplyScalar:CW,multiplyScalarAndAdd:PW,exactEquals:NW,equals:RW,isOrthoNormal:jW,mul:LW,sub:FW},Symbol.toStringTag,{value:"Module"}));const DW=(e,t)=>{const i=Gl(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return ga(i,i)},zW=(e,t)=>{const i=Gl(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return ga(i,i)},VW=(e,t)=>{const i=1-t,s=Gl(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return ga(s,s)},GW=(e,t)=>{const i=Math.sin(t*Math.PI/180),s=Math.cos(t*Math.PI/180),l=Gl(e,.213+.787*s-.213*i,.715-.715*s-.715*i,.072-.072*s+.928*i,0,.213-.213*s+.143*i,.715+.285*s+.14*i,.072-.072*s-.283*i,0,.213-.213*s-.787*i,.715-.715*s+.715*i,.072+.928*s+.072*i,0,0,0,0,1);return ga(l,l)},qW=(e,t)=>{const i=1-2*t,s=Gl(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return ga(s,s)},UW=(e,t)=>{const i=Gl(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return ga(i,i)},BW=(e,t)=>{const i=1-t,s=Gl(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return ga(s,s)};class Bv{constructor(t,i,s){this.strength=t,this.radius=i,this.threshold=s,this.type="bloom"}interpolate(t,i,s){this.strength=Vr(t.strength,i.strength,s),this.radius=Vr(t.radius,i.radius,s),this.threshold=Vr(t.threshold,i.threshold,s)}clone(){return new Bv(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:W0(this.radius),strength:this.strength,threshold:this.threshold}}}class Hv{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,s){this.radius=Math.round(Vr(t.radius,i.radius,s))}clone(){return new Hv(this.radius)}toJSON(){return{type:"blur",radius:W0(this.radius)}}}class Mf{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,s){this.amount=Vr(t.amount,i.amount,s),this._updateMatrix()}clone(){return new Mf(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Uv();switch(this.type){case"brightness":this._colorMatrix=DW(t,this.amount);break;case"contrast":this._colorMatrix=zW(t,this.amount);break;case"grayscale":this._colorMatrix=VW(t,this.amount);break;case"invert":this._colorMatrix=qW(t,this.amount);break;case"saturate":this._colorMatrix=UW(t,this.amount);break;case"sepia":this._colorMatrix=BW(t,this.amount)}}}class Wv{constructor(t,i,s,l){this.offsetX=t,this.offsetY=i,this.blurRadius=s,this.color=l,this.type="drop-shadow"}interpolate(t,i,s){this.offsetX=Vr(t.offsetX,i.offsetX,s),this.offsetY=Vr(t.offsetY,i.offsetY,s),this.blurRadius=Vr(t.blurRadius,i.blurRadius,s),this.color[0]=Math.round(Vr(t.color[0],i.color[0],s)),this.color[1]=Math.round(Vr(t.color[1],i.color[1],s)),this.color[2]=Math.round(Vr(t.color[2],i.color[2],s)),this.color[3]=Vr(t.color[3],i.color[3],s)}clone(){return new Wv(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:W0(this.offsetX),yoffset:W0(this.offsetY),blurRadius:W0(this.blurRadius),color:t}}}class Jv{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,s){this.angle=Vr(t.angle,i.angle,s),this._updateMatrix()}clone(){return new Jv(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Uv();this._colorMatrix=GW(t,this.angle)}}class Kv{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,s){this.amount=Vr(t.amount,i.amount,s)}clone(){return new Kv(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Vr(e,t,i){return e+(t-e)*i}function W0(e){return Math.round(1e3*mo(e))/1e3}function HW(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new Mf(e.type,0);case"saturate":case"brightness":case"contrast":return new Mf(e.type,1);case"opacity":return new Kv(1);case"hue-rotate":return new Jv(0);case"blur":return new Hv(0);case"drop-shadow":return new Wv(0,0,0,[...P4("transparent")]);case"bloom":return new Bv(0,0,1)}}function WW(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((s,l)=>s.type===i[l].type)}function JW(e,t){const i=e.length>t.length?e:t,s=e.length>t.length?t:e;for(let l=s.length;l<i.length;l++)s.push(HW(i[l]))}function KW(e){const t=e[0];return!!t&&"type"in t}var bS,_S,sO={exports:{}};function nO(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=xS(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new te("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:xS(i.value)}});t.sort((i,s)=>s.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!WW(t[i].effects,t[i+1].effects))throw new te("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});JW(t[i].effects,t[i+1].effects)}return t.sort((i,s)=>s.scale-i.scale),t}function xS(e){let t;if(!e)return[];try{t=sO.exports.parse(e)}catch(i){throw new te("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>YW(i))}function YW(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return XW(e);case"opacity":return ZW(e);case"hue-rotate":return QW(e);case"blur":return eJ(e);case"drop-shadow":return tJ(e);case"bloom":return iJ(e)}}catch(t){throw t.details.filter=e,t}throw new te("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function XW(e){let t=1;return Kp(e.parameters,1),e.parameters.length===1&&(t=Sn(e.parameters[0])),new Mf(e.name,t)}function ZW(e){let t=1;return Kp(e.parameters,1),e.parameters.length===1&&(t=Sn(e.parameters[0])),new Kv(t)}function QW(e){let t=0;return Kp(e.parameters,1),e.parameters.length===1&&(t=lJ(e.parameters[0])),new Jv(t)}function eJ(e){let t=0;return Kp(e.parameters,1),e.parameters.length===1&&(t=b6(e.parameters[0]),n1(t,e.parameters[0])),new Hv(t)}function tJ(e){const t=[];let i=null;for(const s of e.parameters)if(s.type==="color"){if(t.length&&Object.freeze(t),i)throw new te("effect:type-error","Accepts only one color",{});i=uJ(s)}else{const l=b6(s);if(Object.isFrozen(t))throw new te("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(l),t.length===3&&n1(l,s)}if(t.length<2||t.length>3)throw new te("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Wv(t[0],t[1],t[2]||0,i||oO("black"))}function iJ(e){let t=1,i=0,s=0;return Kp(e.parameters,3),e.parameters[0]&&(t=Sn(e.parameters[0])),e.parameters[1]&&(i=b6(e.parameters[1]),n1(i,e.parameters[1])),e.parameters[2]&&(s=Sn(e.parameters[2])),new Bv(t,i,s)}function Kp(e,t){if(e.length>t)throw new te("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function Yv(e){if(e.type==="color")return"<color>";if(e.unit){if(w6[e.unit])return"<length>";if(v6[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function n1(e,t){if(e<0)throw new te("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function rJ(e){if(e.type!=="quantity"||e.unit!==null)throw new te("effect:type-error",`Expected <double>, Actual: ${Yv(e)}`,{term:e})}function sJ(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new te("effect:type-error",`Expected <double> or <percentage>, Actual: ${Yv(e)}`,{term:e})}_S=function(){function e(l,d){function y(){this.constructor=l}y.prototype=d.prototype,l.prototype=new y}function t(l,d,y,g){var x=Error.call(this,l);return Object.setPrototypeOf&&Object.setPrototypeOf(x,t.prototype),x.expected=d,x.found=y,x.location=g,x.name="SyntaxError",x}function i(l,d,y){return y=y||" ",l.length>d?l:(d-=l.length,l+(y+=y.repeat(d)).slice(0,d))}function s(l,d){var y,g={},x=(d=d!==void 0?d:{}).grammarSource,$={start:st},E=st,O="none",P=")",R=",",L="(",z="%",V="px",K="cm",ee="mm",se="in",oe="pt",ne="pc",ae="deg",Ie="rad",Se="grad",Pe="turn",Re="#",De=".",Le="e",qe=/^[ \t\n\r]/,Oe=/^[a-z\-]/,zt=/^[0-9a-fA-F]/,ir=/^[+\-]/,Xt=/^[0-9]/,rr=dt("none"),Xr=je("none",!1),$2=je(")",!1),m1=je(",",!1),M2=dt("whitespace"),g1=Ve([" ","	",`
`,"\r"],!1,!1),I2=dt("function"),T2=je("(",!1),E2=dt("identifier"),v1=Ve([["a","z"],"-"],!1,!1),A2=dt("percentage"),k2=je("%",!1),O2=dt("length"),C2=je("px",!1),P2=je("cm",!1),w1=je("mm",!1),_i=je("in",!1),q=je("pt",!1),sr=je("pc",!1),b1=dt("angle"),gt=je("deg",!1),Zt=je("rad",!1),Ks=je("grad",!1),Fn=je("turn",!1),Dn=dt("number"),So=dt("color"),_1=je("#",!1),ad=Ve([["0","9"],["a","f"],["A","F"]],!1,!1),qh=Ve(["+","-"],!1,!1),xe=Ve([["0","9"]],!1,!1),h=je(".",!1),A=je("e",!1),w=function(){return[]},u=function(X,me){return{type:"function",name:X,parameters:me||[]}},o=function(X,me){return me.length>0?iL(X,me,3):[X]},r=function(X){return{type:"quantity",value:X.value,unit:X.unit}},n=function(X){return{type:"color",colorType:X.type,value:X.value}},a=function(X){return X},c=function(){return we()},p=function(X){return{value:X,unit:"%"}},f=function(X){return{value:X,unit:"px"}},m=function(X){return{value:X,unit:"cm"}},b=function(X){return{value:X,unit:"mm"}},S=function(X){return{value:X,unit:"in"}},M=function(X){return{value:X,unit:"pt"}},T=function(X){return{value:X,unit:"pc"}},k=function(X){return{value:X,unit:"deg"}},C=function(X){return{value:X,unit:"rad"}},N=function(X){return{value:X,unit:"grad"}},F=function(X){return{value:X,unit:"turn"}},D=function(X){return{value:X,unit:null}},j=function(){return{type:"hex",value:we()}},G=function(X){return{type:"function",value:X}},W=function(){return{type:"named",value:we()}},J=function(){return parseFloat(we())},B=0,Q=0,ue=[{line:1,column:1}],ge=0,ye=[],de=0;if("startRule"in d){if(!(d.startRule in $))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');E=$[d.startRule]}function we(){return l.substring(Q,B)}function je(X,me){return{type:"literal",text:X,ignoreCase:me}}function Ve(X,me,ve){return{type:"class",parts:X,inverted:me,ignoreCase:ve}}function pt(){return{type:"end"}}function dt(X){return{type:"other",description:X}}function ai(X){var me,ve=ue[X];if(ve)return ve;for(me=X-1;!ue[me];)me--;for(ve={line:(ve=ue[me]).line,column:ve.column};me<X;)l.charCodeAt(me)===10?(ve.line++,ve.column=1):ve.column++,me++;return ue[X]=ve,ve}function Ct(X,me){var ve=ai(X),ot=ai(me);return{source:x,start:{offset:X,line:ve.line,column:ve.column},end:{offset:me,line:ot.line,column:ot.column}}}function ke(X){B<ge||(B>ge&&(ge=B,ye=[]),ye.push(X))}function wt(X,me,ve){return new t(t.buildMessage(X,me),X,me,ve)}function st(){var X;return(X=Bt())===g&&(X=Dt()),X}function Bt(){var X,me;return de++,X=B,Xe(),l.substr(B,4)===O?(me=O,B+=4):(me=g,de===0&&ke(Xr)),me!==g?(Xe(),Q=X,X=w()):(B=X,X=g),de--,X===g&&de===0&&ke(rr),X}function Dt(){var X,me;if(X=[],(me=fr())!==g)for(;me!==g;)X.push(me),me=fr();else X=g;return X}function fr(){var X,me,ve,ot;return X=B,Xe(),(me=Uh())!==g?(Xe(),(ve=at())===g&&(ve=null),Xe(),l.charCodeAt(B)===41?(ot=P,B++):(ot=g,de===0&&ke($2)),ot!==g?(Xe(),Q=X,X=u(me,ve)):(B=X,X=g)):(B=X,X=g),X}function at(){var X,me,ve,ot,Hi,Qt,Ss,x1;if(X=B,(me=Ei())!==g){for(ve=[],ot=B,Hi=Xe(),l.charCodeAt(B)===44?(Qt=R,B++):(Qt=g,de===0&&ke(m1)),Qt===g&&(Qt=null),Ss=Xe(),(x1=Ei())!==g?ot=Hi=[Hi,Qt,Ss,x1]:(B=ot,ot=g);ot!==g;)ve.push(ot),ot=B,Hi=Xe(),l.charCodeAt(B)===44?(Qt=R,B++):(Qt=g,de===0&&ke(m1)),Qt===g&&(Qt=null),Ss=Xe(),(x1=Ei())!==g?ot=Hi=[Hi,Qt,Ss,x1]:(B=ot,ot=g);Q=X,X=o(me,ve)}else B=X,X=g;return X}function Ei(){var X,me;return X=B,(me=Bh())===g&&(me=ld())===g&&(me=Zj())===g&&(me=Qj()),me!==g&&(Q=X,me=r(me)),(X=me)===g&&(X=B,(me=eL())!==g&&(Q=X,me=n(me)),X=me),X}function Xe(){var X,me;for(de++,X=[],qe.test(l.charAt(B))?(me=l.charAt(B),B++):(me=g,de===0&&ke(g1));me!==g;)X.push(me),qe.test(l.charAt(B))?(me=l.charAt(B),B++):(me=g,de===0&&ke(g1));return de--,me=g,de===0&&ke(M2),X}function Uh(){var X,me,ve;return de++,X=B,(me=ql())!==g?(l.charCodeAt(B)===40?(ve=L,B++):(ve=g,de===0&&ke(T2)),ve!==g?(Q=X,X=a(me)):(B=X,X=g)):(B=X,X=g),de--,X===g&&(me=g,de===0&&ke(I2)),X}function ql(){var X,me,ve;if(de++,X=B,me=[],Oe.test(l.charAt(B))?(ve=l.charAt(B),B++):(ve=g,de===0&&ke(v1)),ve!==g)for(;ve!==g;)me.push(ve),Oe.test(l.charAt(B))?(ve=l.charAt(B),B++):(ve=g,de===0&&ke(v1));else me=g;return me!==g&&(Q=X,me=c()),de--,(X=me)===g&&(me=g,de===0&&ke(E2)),X}function Bh(){var X,me,ve;return de++,X=B,Xe(),(me=xs())!==g?(l.charCodeAt(B)===37?(ve=z,B++):(ve=g,de===0&&ke(k2)),ve!==g?(Q=X,X=p(me)):(B=X,X=g)):(B=X,X=g),de--,X===g&&de===0&&ke(A2),X}function ld(){var X,me,ve;return de++,X=B,Xe(),(me=xs())!==g?(l.substr(B,2)===V?(ve=V,B+=2):(ve=g,de===0&&ke(C2)),ve!==g?(Q=X,X=f(me)):(B=X,X=g)):(B=X,X=g),X===g&&(X=B,Xe(),(me=xs())!==g?(l.substr(B,2)===K?(ve=K,B+=2):(ve=g,de===0&&ke(P2)),ve!==g?(Q=X,X=m(me)):(B=X,X=g)):(B=X,X=g),X===g&&(X=B,Xe(),(me=xs())!==g?(l.substr(B,2)===ee?(ve=ee,B+=2):(ve=g,de===0&&ke(w1)),ve!==g?(Q=X,X=b(me)):(B=X,X=g)):(B=X,X=g),X===g&&(X=B,Xe(),(me=xs())!==g?(l.substr(B,2)===se?(ve=se,B+=2):(ve=g,de===0&&ke(_i)),ve!==g?(Q=X,X=S(me)):(B=X,X=g)):(B=X,X=g),X===g&&(X=B,Xe(),(me=xs())!==g?(l.substr(B,2)===oe?(ve=oe,B+=2):(ve=g,de===0&&ke(q)),ve!==g?(Q=X,X=M(me)):(B=X,X=g)):(B=X,X=g),X===g&&(X=B,Xe(),(me=xs())!==g?(l.substr(B,2)===ne?(ve=ne,B+=2):(ve=g,de===0&&ke(sr)),ve!==g?(Q=X,X=T(me)):(B=X,X=g)):(B=X,X=g)))))),de--,X===g&&de===0&&ke(O2),X}function Zj(){var X,me,ve;return de++,X=B,(me=xs())!==g?(l.substr(B,3)===ae?(ve=ae,B+=3):(ve=g,de===0&&ke(gt)),ve!==g?(Q=X,X=k(me)):(B=X,X=g)):(B=X,X=g),X===g&&(X=B,(me=xs())!==g?(l.substr(B,3)===Ie?(ve=Ie,B+=3):(ve=g,de===0&&ke(Zt)),ve!==g?(Q=X,X=C(me)):(B=X,X=g)):(B=X,X=g),X===g&&(X=B,(me=xs())!==g?(l.substr(B,4)===Se?(ve=Se,B+=4):(ve=g,de===0&&ke(Ks)),ve!==g?(Q=X,X=N(me)):(B=X,X=g)):(B=X,X=g),X===g&&(X=B,(me=xs())!==g?(l.substr(B,4)===Pe?(ve=Pe,B+=4):(ve=g,de===0&&ke(Fn)),ve!==g?(Q=X,X=F(me)):(B=X,X=g)):(B=X,X=g)))),de--,X===g&&(me=g,de===0&&ke(b1)),X}function Qj(){var X,me;return de++,X=B,Xe(),(me=xs())!==g?(Q=X,X=D(me)):(B=X,X=g),de--,X===g&&de===0&&ke(Dn),X}function eL(){var X,me,ve,ot;if(de++,X=B,l.charCodeAt(B)===35?(me=Re,B++):(me=g,de===0&&ke(_1)),me!==g){if(ve=[],zt.test(l.charAt(B))?(ot=l.charAt(B),B++):(ot=g,de===0&&ke(ad)),ot!==g)for(;ot!==g;)ve.push(ot),zt.test(l.charAt(B))?(ot=l.charAt(B),B++):(ot=g,de===0&&ke(ad));else ve=g;ve!==g?(Q=X,X=j()):(B=X,X=g)}else B=X,X=g;return X===g&&(X=B,(me=fr())!==g&&(Q=X,me=G(me)),(X=me)===g&&(X=B,(me=ql())!==g&&(Q=X,me=W()),X=me)),de--,X===g&&(me=g,de===0&&ke(So)),X}function xs(){var X,me,ve,ot,Hi,Qt,Ss;for(X=B,ir.test(l.charAt(B))?(l.charAt(B),B++):de===0&&ke(qh),me=B,ve=[],Xt.test(l.charAt(B))?(ot=l.charAt(B),B++):(ot=g,de===0&&ke(xe));ot!==g;)ve.push(ot),Xt.test(l.charAt(B))?(ot=l.charAt(B),B++):(ot=g,de===0&&ke(xe));if(l.charCodeAt(B)===46?(ot=De,B++):(ot=g,de===0&&ke(h)),ot!==g){if(Hi=[],Xt.test(l.charAt(B))?(Qt=l.charAt(B),B++):(Qt=g,de===0&&ke(xe)),Qt!==g)for(;Qt!==g;)Hi.push(Qt),Xt.test(l.charAt(B))?(Qt=l.charAt(B),B++):(Qt=g,de===0&&ke(xe));else Hi=g;Hi!==g?me=ve=[ve,ot,Hi]:(B=me,me=g)}else B=me,me=g;if(me===g)if(me=[],Xt.test(l.charAt(B))?(ve=l.charAt(B),B++):(ve=g,de===0&&ke(xe)),ve!==g)for(;ve!==g;)me.push(ve),Xt.test(l.charAt(B))?(ve=l.charAt(B),B++):(ve=g,de===0&&ke(xe));else me=g;if(me!==g){if(ve=B,l.charCodeAt(B)===101?(ot=Le,B++):(ot=g,de===0&&ke(A)),ot!==g){if(ir.test(l.charAt(B))?(Hi=l.charAt(B),B++):(Hi=g,de===0&&ke(qh)),Hi===g&&(Hi=null),Qt=[],Xt.test(l.charAt(B))?(Ss=l.charAt(B),B++):(Ss=g,de===0&&ke(xe)),Ss!==g)for(;Ss!==g;)Qt.push(Ss),Xt.test(l.charAt(B))?(Ss=l.charAt(B),B++):(Ss=g,de===0&&ke(xe));else Qt=g;Qt!==g?ve=ot=[ot,Hi,Qt]:(B=ve,ve=g)}else B=ve,ve=g;ve===g&&(ve=null),Q=X,X=J()}else B=X,X=g;return X}function tL(X,me){return X.map(function(ve){return ve[me]})}function iL(X,me,ve){return[X].concat(tL(me,ve))}if((y=E())!==g&&B===l.length)return y;throw y!==g&&B<l.length&&ke(pt()),wt(ye,ge<l.length?l.charAt(ge):null,ge<l.length?Ct(ge,ge+1):Ct(ge,ge))}return e(t,Error),t.prototype.format=function(l){var d="Error: "+this.message;if(this.location){var y,g=null;for(y=0;y<l.length;y++)if(l[y].source===this.location.source){g=l[y].text.split(/\r\n|\n|\r/g);break}var x=this.location.start,$=this.location.source+":"+x.line+":"+x.column;if(g){var E=this.location.end,O=i("",x.line.toString().length),P=g[x.line-1],R=x.line===E.line?E.column:P.length+1;d+=`
 --> `+$+`
`+O+` |
`+x.line+" | "+P+`
`+O+" | "+i("",x.column-1)+i("",R-x.column,"^")}else d+=`
 at `+$}return d},t.buildMessage=function(l,d){var y={literal:function(R){return'"'+x(R.text)+'"'},class:function(R){var L=R.parts.map(function(z){return Array.isArray(z)?$(z[0])+"-"+$(z[1]):$(z)});return"["+(R.inverted?"^":"")+L+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(R){return R.description}};function g(R){return R.charCodeAt(0).toString(16).toUpperCase()}function x(R){return R.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+g(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+g(L)})}function $(R){return R.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(L){return"\\x0"+g(L)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(L){return"\\x"+g(L)})}function E(R){return y[R.type](R)}function O(R){var L,z,V=R.map(E);if(V.sort(),V.length>0){for(L=1,z=1;L<V.length;L++)V[L-1]!==V[L]&&(V[z]=V[L],z++);V.length=z}switch(V.length){case 1:return V[0];case 2:return V[0]+" or "+V[1];default:return V.slice(0,-1).join(", ")+", or "+V[V.length-1]}}function P(R){return R?'"'+x(R)+'"':"end of input"}return"Expected "+O(l)+" but "+P(d)+" found."},{SyntaxError:t,parse:s}},(bS=sO).exports&&(bS.exports=_S());const v6={deg:1,grad:.9,rad:180/Math.PI,turn:360};function nJ(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&v6[e.unit]!=null))throw new te("effect:type-error",`Expected <angle>, Actual: ${Yv(e)}`,{term:e})}const w6={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function oJ(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&w6[e.unit]!=null))throw new te("effect:type-error",`Expected <length>, Actual: ${Yv(e)}`,{term:e})}function Sn(e){sJ(e);const t=e.value;return n1(t,e),e.unit==="%"?.01*t:t}function aJ(e){return rJ(e),n1(e.value,e),e.value}function lJ(e){return nJ(e),e.value*v6[e.unit]||0}function b6(e){return oJ(e),e.value*w6[e.unit]||0}function uJ(e){switch(e.colorType){case"hex":return Xz(e.value);case"named":return oO(e.value);case"function":return pJ(e.value)}}function oO(e){if(!EE(e))throw new te("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Yz(e)}const hJ=/^rgba?/i,cJ=/^hsla?/i;function pJ(e){if(Kp(e.parameters,4),hJ.test(e.name))return[Sn(e.parameters[0]),Sn(e.parameters[1]),Sn(e.parameters[2]),e.parameters[3]?Sn(e.parameters[3]):1];if(cJ.test(e.name))return AE(aJ(e.parameters[0]),Sn(e.parameters[1]),Sn(e.parameters[2]),e.parameters[3]?Sn(e.parameters[3]):1);throw new te("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function _6(e,t,i){var s;try{return fJ(e)}catch(l){(s=i==null?void 0:i.messages)==null||s.push(l)}return null}function x6(e,t,i,s){try{const l=dJ(e);Xi(i,l,t)}catch(l){s.messages&&s.messages.push(l)}}function dJ(e){const t=nO(e);return t?KW(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:s})=>({scale:i,value:s.map(l=>l.toJSON())})):null}function fJ(e){if(!e||e.length===0)return null;if(yJ(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:SS(i.value)});return t}return SS(e)}function yJ(e){const t=e[0];return!!t&&"scale"in t}function SS(e){if(!e||!e.length)return"";const t=[];for(const i of e){let s=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":s=[$o(i,"amount")];break;case"blur":s=[$o(i,"radius","pt")];break;case"hue-rotate":s=[$o(i,"angle","deg")];break;case"drop-shadow":s=[$o(i,"xoffset","pt"),$o(i,"yoffset","pt"),$o(i,"blurRadius","pt"),mJ(i,"color")];break;case"bloom":s=[$o(i,"strength"),$o(i,"radius","pt"),$o(i,"threshold")]}const l=`${i.type}(${s.filter(Boolean).join(" ")})`;nO(l),t.push(l)}return t.join(" ")}function $o(e,t,i){if(e[t]==null)throw new te("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function mJ(e,t){if(e[t]==null)throw new te("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const $S={read:{reader:_6},write:{allowNull:!0,writer:x6}},aO=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return v([_({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),v([_({json:{read:!1,write:!1,origins:{"web-map":$S,"portal-item":$S}}})],t.prototype,"effect",void 0),t=v([H("esri.layers.mixins.BlendLayer")],t),t},lO=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return v([_({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=v([H("esri.layers.mixins.CustomParametersMixin")],t),t},MS={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},gJ={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function vJ(e,t){const i=new Date(e,t+1,1);return i.setDate(0),i.getDate()}function ph(e,t,i){const s=new Date(e.getTime());if(t&&i){const l=gJ[i],{getter:d,setter:y,multiplier:g}=l;if(i==="months"){const x=vJ(s.getFullYear(),s.getMonth()+t);s.getDate()>x&&s.setDate(x)}s[y](s[d]()+t*g)}return s}function IS(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function wJ(e,t,i){return e===0?0:e*MS[t]/MS[i]}var cn;let as=cn=class extends ce{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return TS}static get empty(){return bJ}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(cn.allTime)}get isEmpty(){return this.equals(cn.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new cn({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=Y(this.start)?this.start.getTime():this.start,i=Y(this.end)?this.end.getTime():this.end,s=Y(e.start)?e.start.getTime():e.start,l=Y(e.end)?e.end.getTime():e.end;return t===s&&i===l}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=ho(this.start,s=>IS(s,e)),i=ho(this.end,s=>ph(IS(s,e),1,e));return new cn({start:t,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return cn.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Rd(this.start,-1/0,g=>g.getTime()),i=Rd(this.end,1/0,g=>g.getTime()),s=Rd(e.start,-1/0,g=>g.getTime()),l=Rd(e.end,1/0,g=>g.getTime());let d,y;if(s>=t&&s<=i?d=s:t>=s&&t<=l&&(d=t),i>=s&&i<=l?y=i:l>=t&&l<=i&&(y=l),!isNaN(d)&&!isNaN(y)){const g=new cn;return g.start=d===-1/0?null:new Date(d),g.end=y===1/0?null:new Date(y),g}return cn.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const i=new cn,{start:s,end:l}=this;return Y(s)&&(i.start=ph(s,e,t)),Y(l)&&(i.end=ph(l,e,t)),i}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return TS.clone();const t=Y(this.start)&&Y(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=Y(this.end)&&Y(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new cn({start:t,end:i})}};v([_({type:Date,json:{write:{allowNull:!0}}})],as.prototype,"end",void 0),v([$e("end")],as.prototype,"readEnd",null),v([Ee("end")],as.prototype,"writeEnd",null),v([_({readOnly:!0,json:{read:!1}})],as.prototype,"isAllTime",null),v([_({readOnly:!0,json:{read:!1}})],as.prototype,"isEmpty",null),v([_({type:Date,json:{write:{allowNull:!0}}})],as.prototype,"start",void 0),v([$e("start")],as.prototype,"readStart",null),v([Ee("start")],as.prototype,"writeStart",null),as=cn=v([H("esri.TimeExtent")],as);const TS=new as,bJ=new as({start:void 0,end:void 0}),kr=as;var B9;let hc=B9=class extends ce{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new B9({mapLayerId:e,gdbVersion:t})}};v([Fe({mapLayer:"map-layer"})],hc.prototype,"type",void 0),v([_({type:Ft,json:{write:!0}})],hc.prototype,"mapLayerId",void 0),v([_({type:String,json:{write:!0}})],hc.prototype,"gdbVersion",void 0),hc=B9=v([H("esri.layers.support.source.MapLayerSource")],hc);var H9;let Fo=H9=class extends ce{constructor(e){super(e),this.type="query-table"}clone(){var y;const{workspaceId:e,query:t,oidFields:i,spatialReference:s,geometryType:l}=this,d={workspaceId:e,query:t,oidFields:i,spatialReference:(y=s==null?void 0:s.clone())!=null?y:void 0,geometryType:l};return new H9(d)}};v([Fe({queryTable:"query-table"})],Fo.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Fo.prototype,"workspaceId",void 0),v([_({type:String,json:{write:!0}})],Fo.prototype,"query",void 0),v([_({type:String,json:{write:!0}})],Fo.prototype,"oidFields",void 0),v([_({type:Ye,json:{write:!0}})],Fo.prototype,"spatialReference",void 0),v([Fe(b4)],Fo.prototype,"geometryType",void 0),Fo=H9=v([H("esri.layers.support.source.QueryTableDataSource")],Fo);var W9;let cc=W9=class extends ce{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new W9({workspaceId:e,dataSourceName:t})}};v([Fe({raster:"raster"})],cc.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],cc.prototype,"dataSourceName",void 0),v([_({type:String,json:{write:!0}})],cc.prototype,"workspaceId",void 0),cc=W9=v([H("esri.layers.support.source.RasterDataSource")],cc);var J9;let vu=J9=class extends ce{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new J9({workspaceId:e,gdbVersion:t,dataSourceName:i})}};v([Fe({table:"table"})],vu.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],vu.prototype,"workspaceId",void 0),v([_({type:String,json:{write:!0}})],vu.prototype,"gdbVersion",void 0),v([_({type:String,json:{write:!0}})],vu.prototype,"dataSourceName",void 0),vu=J9=v([H("esri.layers.support.source.TableDataSource")],vu);var K9,Y9;const _J=tr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let is=K9=class extends ce{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return ES()(e,t,i)}castLeftTableSource(e){return yo(X9(),e)}readRightTableSource(e,t,i){return ES()(e,t,i)}castRightTableSource(e){return yo(X9(),e)}clone(){var y,g;const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:s,joinType:l}=this,d={leftTableKey:e,rightTableKey:t,leftTableSource:(y=i==null?void 0:i.clone())!=null?y:void 0,rightTableSource:(g=s==null?void 0:s.clone())!=null?g:void 0,joinType:l};return new K9(d)}};v([Fe({joinTable:"join-table"})],is.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],is.prototype,"leftTableKey",void 0),v([_({type:String,json:{write:!0}})],is.prototype,"rightTableKey",void 0),v([_({json:{write:!0}})],is.prototype,"leftTableSource",void 0),v([$e("leftTableSource")],is.prototype,"readLeftTableSource",null),v([mt("leftTableSource")],is.prototype,"castLeftTableSource",null),v([_({json:{write:!0}})],is.prototype,"rightTableSource",void 0),v([$e("rightTableSource")],is.prototype,"readRightTableSource",null),v([mt("rightTableSource")],is.prototype,"castRightTableSource",null),v([Fe(_J)],is.prototype,"joinType",void 0),is=K9=v([H("esri.layers.support.source.JoinTableDataSource")],is);let ow=null;function ES(){return ow||(ow=jp({types:X9()})),ow}let aw=null;function X9(){return aw||(aw={key:"type",base:null,typeMap:{"data-layer":$n,"map-layer":hc}}),aw}const xJ={key:"type",base:null,typeMap:{"join-table":is,"query-table":Fo,raster:cc,table:vu}};let $n=Y9=class extends ce{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new Y9({fields:e,dataSource:t})}};v([Fe({dataLayer:"data-layer"})],$n.prototype,"type",void 0),v([_({type:[Ih],json:{write:!0}})],$n.prototype,"fields",void 0),v([_({types:xJ,json:{write:!0}})],$n.prototype,"dataSource",void 0),$n=Y9=v([H("esri.layers.support.source.DataLayerSource")],$n),$n.from=ni($n);var Z9;const AS=new tt({upperLeft:"upper-left",lowerLeft:"lower-left"});let wu=Z9=class extends ce{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new Z9(ie({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};v([_({type:xt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],wu.prototype,"extent",void 0),v([_({type:["view","edit"],json:{write:!0}})],wu.prototype,"mode",void 0),v([_({type:String,json:{read:AS.read,write:AS.write}})],wu.prototype,"originPosition",void 0),v([_({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],wu.prototype,"tolerance",void 0),wu=Z9=v([H("esri.rest.support.QuantizationParameters")],wu);const uO=wu;var Q9;const kS=new tt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let pn=Q9=class extends ce{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=ie(e))}clone(){return new Q9({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ie(this.statisticParameters)})}};v([_({type:Number,json:{write:!0}})],pn.prototype,"maxPointCount",void 0),v([_({type:Number,json:{write:!0}})],pn.prototype,"maxRecordCount",void 0),v([_({type:Number,json:{write:!0}})],pn.prototype,"maxVertexCount",void 0),v([_({type:String,json:{write:!0}})],pn.prototype,"onStatisticField",void 0),v([_({type:String,json:{write:!0}})],pn.prototype,"outStatisticFieldName",void 0),v([_({type:String,json:{read:{source:"statisticType",reader:kS.read},write:{target:"statisticType",writer:kS.write}}})],pn.prototype,"statisticType",void 0),v([_({type:Object})],pn.prototype,"statisticParameters",void 0),v([Ee("statisticParameters")],pn.prototype,"writeStatisticParameters",null),pn=Q9=v([H("esri.rest.support.StatisticDefinition")],pn);const hO=pn;var lp;const SJ=new tt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),$J=new tt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let We=lp=class extends ce{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return s4(lp,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const s in e){const l=e[s];Array.isArray(l)?i[s]=l.map(d=>d instanceof Date?d.getTime():d):l instanceof Date?i[s]=l.getTime():i[s]=l}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new lp(ie({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:Y(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};We.MAX_MAX_RECORD_COUNT_FACTOR=5,v([_({json:{write:!0}})],We.prototype,"aggregateIds",void 0),v([_({type:Boolean,json:{write:!0}})],We.prototype,"cacheHint",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],We.prototype,"compactGeometryEnabled",void 0),v([_({json:{write:!0}})],We.prototype,"datumTransformation",void 0),v([mt("datumTransformation")],We.prototype,"castDatumTransformation",null),v([_({type:Boolean,json:{default:!1,write:!0}})],We.prototype,"defaultSpatialReferenceEnabled",void 0),v([_({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],We.prototype,"distance",void 0),v([_({type:$n,json:{write:!0}})],We.prototype,"dynamicDataSource",void 0),v([_({type:String,json:{write:!0}})],We.prototype,"formatOf3DObjects",void 0),v([_({type:String,json:{write:!0}})],We.prototype,"gdbVersion",void 0),v([_({types:Ll,json:{read:ha,write:!0}})],We.prototype,"geometry",void 0),v([_({type:Number,json:{write:!0}})],We.prototype,"geometryPrecision",void 0),v([_({type:[String],json:{write:!0}})],We.prototype,"groupByFieldsForStatistics",void 0),v([_({type:String,json:{write:!0}})],We.prototype,"having",void 0),v([_({type:Date})],We.prototype,"historicMoment",void 0),v([Ee("historicMoment")],We.prototype,"writeHistoricMoment",null),v([_({type:Number,json:{write:!0}})],We.prototype,"maxAllowableOffset",void 0),v([_({type:Number,cast:e=>e<1?1:e>lp.MAX_MAX_RECORD_COUNT_FACTOR?lp.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],We.prototype,"maxRecordCountFactor",void 0),v([_({type:["xyFootprint"],json:{write:!0}})],We.prototype,"multipatchOption",void 0),v([_({type:Number,json:{read:{source:"resultRecordCount"}}})],We.prototype,"num",void 0),v([_({json:{write:!0}})],We.prototype,"objectIds",void 0),v([_({type:[String],json:{write:!0}})],We.prototype,"orderByFields",void 0),v([_({type:[String],json:{write:!0}})],We.prototype,"outFields",void 0),v([_({type:Ye,json:{name:"outSR",write:!0}})],We.prototype,"outSpatialReference",void 0),v([_({type:[hO],json:{write:{enabled:!0,overridePolicy(){return{enabled:Y(this.outStatistics)&&this.outStatistics.length>0}}}}})],We.prototype,"outStatistics",void 0),v([_({json:{write:!0}})],We.prototype,"parameterValues",void 0),v([Ee("parameterValues")],We.prototype,"writeParameterValues",null),v([_({type:He,json:{write:!0}})],We.prototype,"pixelSize",void 0),v([_({type:uO,json:{write:!0}})],We.prototype,"quantizationParameters",void 0),v([_({type:[Object],json:{write:!0}})],We.prototype,"rangeValues",void 0),v([_({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],We.prototype,"relationParameter",void 0),v([_({type:String,json:{write:!0}})],We.prototype,"resultType",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],We.prototype,"returnCentroid",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],We.prototype,"returnDistinctValues",void 0),v([_({type:Boolean,json:{default:!0,write:!0}})],We.prototype,"returnExceededLimitFeatures",void 0),v([_({type:Boolean,json:{write:!0}})],We.prototype,"returnGeometry",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],We.prototype,"returnQueryGeometry",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],We.prototype,"returnM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],We.prototype,"returnZ",void 0),v([_({type:Ye,json:{write:!0}})],We.prototype,"sourceSpatialReference",void 0),v([Fe(SJ,{ignoreUnknown:!1,name:"spatialRel"})],We.prototype,"spatialRelationship",void 0),v([_({type:Number,json:{read:{source:"resultOffset"}}})],We.prototype,"start",void 0),v([Ee("start"),Ee("num")],We.prototype,"writeStart",null),v([_({type:String,json:{write:!0}})],We.prototype,"sqlFormat",void 0),v([_({type:String,json:{write:!0}})],We.prototype,"text",void 0),v([_({type:kr,json:{write:!0}})],We.prototype,"timeExtent",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],We.prototype,"timeReferenceUnknownClient",void 0),v([Fe($J,{ignoreUnknown:!1}),_({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],We.prototype,"units",void 0),v([_({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],We.prototype,"where",void 0),v([Ee("where")],We.prototype,"writeWhere",null),We=lp=v([H("esri.rest.support.Query")],We);const Yi=We;var e_;const lw=new tt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),uw=new tt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Yn=e_=class extends ce{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:s,timeExtent:l,objectIds:d,units:y,distance:g}=this;return new Yi({geometry:ie(i),objectIds:ie(d),spatialRelationship:s,timeExtent:ie(l),where:t,units:y,distance:g,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:s,objectIds:l,units:d,distance:y}=this;return new e_({geometry:ie(t),objectIds:ie(l),spatialRelationship:i,timeExtent:ie(s),where:e,units:d,distance:y})}};v([_({type:String,json:{write:!0}})],Yn.prototype,"where",void 0),v([_({types:Ll,json:{write:!0}})],Yn.prototype,"geometry",void 0),v([_({type:lw.apiValues,json:{name:"spatialRel",read:{reader:lw.read},write:{allowNull:!1,writer:lw.write,overridePolicy(){return{enabled:Y(this.geometry)}}}}})],Yn.prototype,"spatialRelationship",void 0),v([_({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Yn.prototype,"distance",void 0),v([_({type:[Number],json:{write:!0}})],Yn.prototype,"objectIds",void 0),v([_({type:uw.apiValues,json:{read:uw.read,write:{writer:uw.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Yn.prototype,"units",void 0),v([_({type:kr,json:{write:!0}})],Yn.prototype,"timeExtent",void 0),Yn=e_=v([H("esri.layers.support.FeatureFilter")],Yn);const cO=Yn;var t_;const OS={read:{reader:_6},write:{writer:x6,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},CS={read:{reader:_6},write:{writer:x6,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},PS={name:"showExcludedLabels",default:!0};let bu=t_=class extends ce{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){var s,l;const i=super.write(e,t);if(t!=null&&t.origin){if(i.filter){const d=Object.keys(i.filter);if(d.length>1||d[0]!=="where")return(s=t.messages)==null||s.push(new te("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return(l=t.messages)==null||l.push(new te("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new t_({filter:Y(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};v([_({type:cO,json:{write:{allowNull:!0,writer(e,t,i,s){const l=e==null?void 0:e.write({},s);l&&Object.keys(l).length!==0?Xi(i,l,t):Xi(i,null,t)}}}})],bu.prototype,"filter",void 0),v([_({json:{write:!0,origins:{"web-map":OS,"portal-item":OS}}})],bu.prototype,"includedEffect",void 0),v([_({json:{write:!0,origins:{"web-map":CS,"portal-item":CS}}})],bu.prototype,"excludedEffect",void 0),v([_({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":PS,"portal-item":PS}}})],bu.prototype,"excludedLabelsVisible",void 0),bu=t_=v([H("esri.layers.support.FeatureEffect")],bu);const pO=bu,NS={write:{allowNull:!0}},dO=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return v([_({type:pO,json:{origins:{"web-map":NS,"portal-item":NS}}})],t.prototype,"featureEffect",void 0),t=v([H("esri.layers.mixins.FeatureEffectLayer")],t),t},MJ={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function IJ(e){if(!e)return e;const{start:t,end:i}=e;return new kr({start:Y(t)?ph(t,-t.getTimezoneOffset(),"minutes"):t,end:Y(i)?ph(i,-i.getTimezoneOffset(),"minutes"):i})}function TJ(e){if(!e)return e;const{start:t,end:i}=e;return new kr({start:Y(t)?ph(t,t.getTimezoneOffset(),"minutes"):t,end:Y(i)?ph(i,i.getTimezoneOffset(),"minutes"):i})}var i_;let d0=i_=class extends ce{async collectRequiredFields(e,t){return Ar(e,t,this.expression)}clone(){return new i_({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};v([_({type:String,json:{write:!0}})],d0.prototype,"expression",void 0),v([_({type:String,json:{write:!0}})],d0.prototype,"title",void 0),d0=i_=v([H("esri.layers.support.FeatureExpressionInfo")],d0);const RS=d0;function EJ(){const e=Object.keys(dk);return e.sort(),e}const AJ=EJ();var r_;const B1=tr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),jS=new tt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Do=r_=class extends ce{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e!=null?e:t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(e,t,i,s){t[i]=e.write({},s),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):Y(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new r_({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&lL(this.featureExpressionInfo,e.featureExpressionInfo)}};v([_({type:RS,json:{write:!0}})],Do.prototype,"featureExpressionInfo",void 0),v([$e("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Do.prototype,"readFeatureExpressionInfo",null),v([Ee("featureExpressionInfo",{featureExpressionInfo:{type:RS},"featureExpression.value":{type:[0]}})],Do.prototype,"writeFeatureExpressionInfo",null),v([_({type:B1.apiValues,nonNullable:!0,json:{type:B1.jsonValues,read:B1.read,write:{writer:B1.write,isRequired:!0}}})],Do.prototype,"mode",null),v([_({type:Number,json:{write:!0}})],Do.prototype,"offset",void 0),v([_({type:AJ,json:{type:String,read:jS.read,write:jS.write}})],Do.prototype,"unit",null),Do=r_=v([H("esri.layers.support.ElevationInfo")],Do);const kJ=Do,fO={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},Xv={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},Zv={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},yO={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:$h}}},mO={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},gO={value:null,type:kJ,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function D0e(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const J0={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},OJ={...J0,json:{...J0.json,origins:{"web-document":{...J0.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?gf(t.layerDefinition.drawingInfo.transparency):void 0:gf(t.drawingInfo.transparency)}}},z0e={type:kr,readOnly:!0,get(){var g,x;if(!((g=this.layer)!=null&&g.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:i}=this.layer,s=(x=this.view)==null?void 0:x.timeExtent;let l=this.layer.timeExtent;e&&(l=TJ(l));let d=i?s&&l?s.intersection(l):s||l:l;if(!d||d.isEmpty||d.isAllTime)return d;t&&(d=d.offset(-t.value,t.unit)),e&&(d=IJ(d));const y=this._get("timeExtent");return d.equals(y)?y:d}},V0e={type:xt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=xt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=Ye.fromJSON(t.spatialReference)),i}}}},read:!1}},vO={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},CJ={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},PJ={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},wO={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},bO=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(i,s,l,d){(d&&d.layerContainerType==="ground"||i&&hD(this,l,{},d))&&(s[l]=i)}writeOperationalLayerType(i,s,l,d){!i||d&&d.layerContainerType==="tables"||(s.layerType=i)}writeTitle(i,s){s.title=i||"Layer"}read(i,s){s&&(s.layer=this),PT(this,i,l=>super.read(i,l),s)}write(i,s){var y,g;if(s!=null&&s.origin){const x=`${s.origin}/${s.layerContainerType||"operational-layers"}`,$=MJ[x];let E=$&&$[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&x==="web-scene/operational-layers"&&(E=!1),!E)return(y=s.messages)==null||y.push(new te("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${x}'`,{layer:this})),null}const l=super.write(i,{...s,layer:this}),d=!!s&&!!s.messages&&!!s.messages.filter(x=>x instanceof te&&x.name==="web-document-write:property-required").length;return jv(l==null?void 0:l.url)?((g=s==null?void 0:s.messages)==null||g.push(new te("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&d?null:l}beforeSave(){}};return v([_({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),v([_(wO)],t.prototype,"listMode",void 0),v([Ee("listMode")],t.prototype,"writeListMode",null),v([_({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),v([Ee("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),v([_(J0)],t.prototype,"opacity",void 0),v([_({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),v([Ee([void 0,"web-scene"],"title")],t.prototype,"writeTitle",null),v([_({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=v([H("esri.layers.mixins.OperationalLayer")],t),t};var s_;const hw=new tt({asc:"ascending",desc:"descending"});let pc=s_=class extends ce{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new s_({field:this.field,valueExpression:this.valueExpression,order:this.order})}};v([_({type:String,json:{write:!0}})],pc.prototype,"field",void 0),v([_({type:String,json:{write:!0}})],pc.prototype,"valueExpression",void 0),v([_({type:hw.apiValues,json:{read:hw.read,write:hw.write}})],pc.prototype,"order",void 0),pc=s_=v([H("esri.layers.support.OrderByInfo")],pc);const _O=pc;function NJ(e,t,i){if(!e)return null;const s=e.find(d=>!!d.field);if(!s)return null;const l=new _O;return l.read(s,i),[l]}function RJ(e,t,i,s){const l=e.find(d=>!!d.field);l&&Xi(i,[l.toJSON()],t)}const xO=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return v([_({type:[_O],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:NJ},write:{target:"layerDefinition.orderBy",writer:RJ}}})],t.prototype,"orderBy",void 0),t=v([H("esri.layers.mixins.OrderedLayer")],t),t},If=new Ge,K0=new WeakMap;function jJ(e){SO(e)&&If.push(e)}function LJ(e){SO(e)&&If.includes(e)&&If.remove(e)}function SO(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function $O(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:$O(t,e%t):0}let cw=0,H1=0;function FJ(){var t;const e=Date.now();for(const i of If)i.refreshInterval&&e-((t=K0.get(i))!=null?t:0)+5>=6e4*i.refreshInterval&&(K0.set(i,e),i.refresh(e))}IT(()=>{const e=Date.now();let t=0;for(const i of If)t=$O(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?K0.get(i)||K0.set(i,e):K0.delete(i);if(t!==H1){if(H1=t,clearInterval(cw),H1===0)return void(cw=0);cw=setInterval(FJ,H1)}});const MO=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=xv(()=>this.hasDataChanged()),this.when().then(()=>{jJ(this)},()=>{})}destroy(){LJ(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Pb(this._debounceHasDataChanged()).then(s=>{s&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:s})},s=>{Me.getLogger(this.declaredClass).error(s),this.emit("refresh",{dataChanged:!1,error:s})})}async hasDataChanged(){return!0}};return v([_({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),v([_({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),v([_()],t.prototype,"refreshParameters",null),t=v([H("esri.layers.mixins.RefreshableLayer")],t),t},IO=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},s=this.parent;s&&"effectiveScaleRange"in s&&DJ(i,s.effectiveScaleRange);const l=this._get("effectiveScaleRange");return l&&l.minScale===i.minScale&&l.maxScale===i.maxScale?l:i}};return v([_({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),v([_({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),v([_({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=v([H("esri.layers.mixins.ScaleRangeLayer")],t),t};function DJ(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Xu=tr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var n_;let f0=n_=class extends ce{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return wJ(this.value,this.unit,"milliseconds")}clone(){return new n_({value:this.value,unit:this.unit})}};v([_({type:Number,json:{write:!0},nonNullable:!0})],f0.prototype,"value",void 0),v([_({type:Xu.apiValues,json:{type:Xu.jsonValues,read:Xu.read,write:Xu.write},nonNullable:!0})],f0.prototype,"unit",void 0),f0=n_=v([H("esri.TimeInterval")],f0);const Th=f0;var o_;let dc=o_=class extends ce{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new o_({respectsDaylightSaving:e,timezone:t})}};v([_({type:Boolean,json:{write:!0}})],dc.prototype,"respectsDaylightSaving",void 0),v([$e("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],dc.prototype,"readRespectsDaylightSaving",null),v([_({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],dc.prototype,"timezone",void 0),dc=o_=v([H("esri.layers.support.TimeReference")],dc);const zJ=dc;var a_;let ar=a_=class extends ce{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const i=new Date(t.timeExtent[0]),s=new Date(t.timeExtent[1]);return new kr({start:i,end:s})}writeFullTimeExtent(e,t){e&&Y(e.start)&&Y(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new Th({value:t.timeInterval,unit:Xu.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new Th({value:t.defaultTimeInterval,unit:Xu.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const i=e.toJSON();t.timeInterval=i.value,t.timeIntervalUnits=i.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:i,interval:s,startField:l,timeReference:d,fullTimeExtent:y,trackIdField:g,useTime:x}=this;return new a_({cumulative:e,endField:t,hasLiveData:i,interval:s,startField:l,timeReference:ie(d),fullTimeExtent:ie(y),trackIdField:g,useTime:x})}};v([_({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],ar.prototype,"cumulative",void 0),v([_({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],ar.prototype,"endField",void 0),v([_({type:kr,json:{write:{enabled:!0,allowNull:!0}}})],ar.prototype,"fullTimeExtent",void 0),v([$e("fullTimeExtent",["timeExtent"])],ar.prototype,"readFullTimeExtent",null),v([Ee("fullTimeExtent")],ar.prototype,"writeFullTimeExtent",null),v([_({type:Boolean,json:{write:!0}})],ar.prototype,"hasLiveData",void 0),v([_({type:Th,json:{write:{enabled:!0,allowNull:!0}}})],ar.prototype,"interval",void 0),v([$e("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ar.prototype,"readInterval",null),v([Ee("interval")],ar.prototype,"writeInterval",null),v([_({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],ar.prototype,"startField",void 0),v([_({type:zJ,json:{write:{enabled:!0,allowNull:!0}}})],ar.prototype,"timeReference",void 0),v([_({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ar.prototype,"trackIdField",void 0),v([_({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],ar.prototype,"useTime",void 0),ar=a_=v([H("esri.layers.support.TimeInfo")],ar);const TO=ar,EO=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,s){const l=s.timeInfo.exportOptions;if(!l)return null;const d=l.timeOffset,y=Xu.fromJSON(l.timeOffsetUnits);return d&&y?new Th({value:d,unit:y}):null}set timeInfo(i){M4(i,this.fieldsIndex),this._set("timeInfo",i)}};return v([_({type:kr,json:{write:!1}})],t.prototype,"timeExtent",void 0),v([_({type:Th})],t.prototype,"timeOffset",void 0),v([$e("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),v([_({value:null,type:TO,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),v([_({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=v([H("esri.layers.mixins.TemporalLayer")],t),t};let Il=class extends ce{constructor(){super(...arguments),this.type=null}};v([_({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Il.prototype,"type",void 0),Il=v([H("esri.layers.support.FeatureReduction")],Il);var l_;let fc=l_=class extends ce{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new l_({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};v([_({type:String,json:{write:!0}})],fc.prototype,"statisticType",void 0),v([_({type:String,json:{write:!0}})],fc.prototype,"onStatisticField",void 0),v([_({type:String,json:{write:!0}})],fc.prototype,"onStatisticValueExpression",void 0),fc=l_=v([H("esri.layers.support.OutStatistic")],fc);const VJ=fc;var u_;let y0=u_=class extends ce{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new u_({name:this.name,outStatistic:this.outStatistic.clone()})}};v([_({type:String,json:{write:!0}})],y0.prototype,"name",void 0),v([_({type:VJ,json:{write:!0}})],y0.prototype,"outStatistic",void 0),y0=u_=v([H("esri.layers.support.AggregateField")],y0);const AO=y0,S6="__begin__",$6="__end__",GJ=new RegExp(S6,"ig"),qJ=new RegExp($6,"ig"),LS=new RegExp("^"+S6,"i"),FS=new RegExp($6+"$","i"),Ig='"',UJ=Ig+" + ",BJ=" + "+Ig;function HJ(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function WJ(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function M6(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=HJ(e.labelExpression),t.type="conventional"),t}function JJ(e){const t=M6(e);if(!t)return null;switch(t.type){case"conventional":return h_(t.expression);case"arcade":return t.expression}return null}function KJ(e){const t=M6(e);if(!t)return null;switch(t.type){case"conventional":return XJ(t.expression);case"arcade":return kO(t.expression)}return null}function h_(e){let t;return e?(t=fo(e,i=>S6+'$feature["'+i+'"]'+$6),t=LS.test(t)?t.replace(LS,""):Ig+t,t=FS.test(t)?t.replace(FS,""):t+Ig,t=t.replace(GJ,UJ).replace(qJ,BJ)):t='""',t}const YJ=/^\s*\{([^}]+)\}\s*$/i;function XJ(e){const t=e.match(YJ);return t&&t[1].trim()||null}const ZJ=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,QJ=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,eK=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function kO(e){if(!e)return null;let t=ZJ.exec(e)||QJ.exec(e);return t?t[1]||t[3]:(t=eK.exec(e),t?t[2]:null)}var c_;let Ba=c_=class extends ce{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?h_(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=h_(this.value)),e!=null&&(t[i]=e)}clone(){return new c_({expression:this.expression,title:this.title,value:this.value})}};v([_({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Ba.prototype,"expression",void 0),v([$e("expression",["expression","value"])],Ba.prototype,"readExpression",null),v([Ee("expression")],Ba.prototype,"writeExpression",null),v([_({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ba.prototype,"title",void 0),v([_({json:{read:!1,write:!1}})],Ba.prototype,"value",void 0),Ba=c_=v([H("esri.layers.support.LabelExpressionInfo")],Ba);const OO=Ba;ya.fromJSON(Wk);_s.fromJSON(Jk);Vl.fromJSON(Kk);const tK=jh.fromJSON(VH),G0e=ya.fromJSON(GH),q0e=_s.fromJSON(qH),U0e=Vl.fromJSON(UH);var p_;const W1=new tt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function CO(e){var t;return!e||e.origin!=="service"&&((t=e.layer)==null?void 0:t.type)!=="map-image"}function iK(e){return(e==null?void 0:e.type)==="map-image"}function PO(e){var t,i;return!!iK(e)&&!!((i=(t=e.capabilities)==null?void 0:t.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function rK(e){return CO(e)||PO(e.layer)}let ui=p_=class extends ce{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=tK,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const i=(s,l,d)=>{switch(l){case"=":return s==d;case"<>":return s!=d;case">":return s>d;case">=":return s>=d;case"<":return s<d;case"<=":return s<=d}return!1};try{if(e==null)return!0;const s=e.split(" ");if(s.length===3)return i(t[s[0]],s[1],s[2]);if(s.length===7){const l=i(t[s[0]],s[1],s[2]),d=s[3],y=i(t[s[4]],s[5],s[6]);switch(d){case"AND":return l&&y;case"OR":return l||y}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=WJ(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const s=kO(this.labelExpressionInfo.expression);s&&(e="["+s+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,s){if(e==null&&this.labelExpression!=null&&CO(s))e=new OO({expression:this.getLabelExpressionArcade()});else if(!e)return;const l=e.toJSON(s);l.expression&&(t[i]=l)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return M6(this)}getLabelExpressionArcade(){return JJ(this)}getLabelExpressionSingleField(){return KJ(this)}hash(){return JSON.stringify(this)}clone(){return new p_({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ie(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ie(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};v([_({type:String,json:{write:!0}})],ui.prototype,"name",void 0),v([_({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ui.prototype,"allowOverrun",void 0),v([_({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],ui.prototype,"deconflictionStrategy",void 0),v([_({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&PO(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],ui.prototype,"labelExpression",void 0),v([$e("labelExpression")],ui.prototype,"readLabelExpression",null),v([Ee("labelExpression")],ui.prototype,"writeLabelExpression",null),v([_({type:OO,json:{write:{overridePolicy:(e,t,i)=>rK(i)?{allowNull:!0}:{enabled:!1}}}})],ui.prototype,"labelExpressionInfo",void 0),v([Ee("labelExpressionInfo")],ui.prototype,"writeLabelExpressionInfo",null),v([_({type:W1.apiValues,json:{type:W1.jsonValues,read:W1.read,write:W1.write}})],ui.prototype,"labelPlacement",void 0),v([_({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ui.prototype,"labelPosition",void 0),v([_({type:Number})],ui.prototype,"maxScale",void 0),v([Ee("maxScale")],ui.prototype,"writeMaxScale",null),v([_({type:Number})],ui.prototype,"minScale",void 0),v([Ee("minScale")],ui.prototype,"writeMinScale",null),v([_({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],ui.prototype,"repeatLabel",void 0),v([_({type:Number,cast:_t,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ui.prototype,"repeatLabelDistance",void 0),v([_({types:bU,json:{origins:{"web-scene":{types:_U,write:Y7,default:null}},write:Y7,default:null}})],ui.prototype,"symbol",void 0),v([_({type:Boolean,json:{write:!0}})],ui.prototype,"useCodedValues",void 0),v([_({type:String,json:{write:!0}})],ui.prototype,"where",void 0),ui=p_=v([H("esri.layers.support.LabelClass")],ui);const Yp=ui;var d_;let dn=d_=class extends Il{constructor(e){super(e),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new d_({fields:ie(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:ie(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:ie(this.popupTemplate),renderer:ie(this.renderer)})}};v([Fe({binning:"binning"})],dn.prototype,"type",void 0),v([_({type:Number,json:{write:!0}})],dn.prototype,"fixedBinLevel",void 0),v([_({type:[Yp],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],dn.prototype,"labelingInfo",void 0),v([_(Zv)],dn.prototype,"labelsVisible",void 0),v([_(Xv)],dn.prototype,"popupEnabled",void 0),v([_({type:Vp,json:{name:"popupInfo",write:!0}})],dn.prototype,"popupTemplate",void 0),v([_({type:[AO],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],dn.prototype,"fields",void 0),v([_({types:i1,json:{write:!0}})],dn.prototype,"renderer",void 0),dn=d_=v([H("esri.layers.support.FeatureReductionBinning")],dn);const sK=dn;var f_;let jr=f_=class extends ce{constructor(e){super(e),this.type="cluster",this.clusterRadius=_t("80px"),this.clusterMinSize=_t("12px"),this.clusterMaxSize=_t("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new f_({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ie(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ie(this.fields),renderer:ie(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:ie(this.popupTemplate)})}};v([_({type:["cluster"],readOnly:!0,json:{write:!0}})],jr.prototype,"type",void 0),v([_({type:Number,cast:e=>e==="auto"?e:_t(e),json:{write:!0}})],jr.prototype,"clusterRadius",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],jr.prototype,"clusterMinSize",void 0),v([_({type:Number,cast:_t,json:{write:!0}})],jr.prototype,"clusterMaxSize",void 0),v([_(Xv)],jr.prototype,"popupEnabled",void 0),v([_({type:Vp,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],jr.prototype,"popupTemplate",void 0),v([_({types:i1,json:{write:!0}})],jr.prototype,"renderer",void 0),v([_({types:vU})],jr.prototype,"symbol",void 0),v([_({type:[Yp],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],jr.prototype,"labelingInfo",void 0),v([_(Zv)],jr.prototype,"labelsVisible",void 0),v([_({type:[AO],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],jr.prototype,"fields",void 0),jr=f_=v([H("esri.layers.support.FeatureReductionCluster")],jr);const NO=jr;var y_;let mm=y_=class extends Il{constructor(e){super(e),this.type="selection"}clone(){return new y_}};v([_({type:["selection"]})],mm.prototype,"type",void 0),mm=y_=v([H("esri.layers.support.FeatureReductionSelection")],mm);const DS=mm,zS={key:"type",base:Il,typeMap:{selection:NO}},RO={types:{key:"type",base:Il,typeMap:{selection:DS,cluster:NO,binning:sK}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:zS},"portal-item":{types:zS},"web-scene":{types:{key:"type",base:Il,typeMap:{selection:DS}}}}}},VS=new tt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ha=class extends yi(ce){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};v([_({json:{write:!0}})],Ha.prototype,"name",void 0),v([_({json:{write:!0}})],Ha.prototype,"description",void 0),v([_({json:{read:VS.read,write:VS.write}})],Ha.prototype,"drawingTool",void 0),v([_({json:{write:!0}})],Ha.prototype,"prototype",void 0),v([_({json:{write:!0}})],Ha.prototype,"thumbnail",void 0),Ha=v([H("esri.layers.support.FeatureTemplate")],Ha);const Qv=Ha;let zo=class extends yi(ce){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const i of Object.keys(e))t[i]=y6(e[i]);return t}writeDomains(e,t){var s;const i={};for(const l of Object.keys(e))e[l]&&(i[l]=(s=e[l])==null?void 0:s.toJSON());t.domains=i}};v([_({json:{write:!0}})],zo.prototype,"id",void 0),v([_({json:{write:!0}})],zo.prototype,"name",void 0),v([_({json:{write:!0}})],zo.prototype,"domains",void 0),v([$e("domains")],zo.prototype,"readDomains",null),v([Ee("domains")],zo.prototype,"writeDomains",null),v([_({type:[Qv],json:{write:!0}})],zo.prototype,"templates",void 0),zo=v([H("esri.layers.support.FeatureType")],zo);const I6=zo;function nK(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function GS(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function qS(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class oK{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const i=[];for(const s of t){const l=s&&s.name;if(l){const d=US(l);this._fieldsMap.set(l,s),this._fieldsMap.set(d,s),i.push(d),nK(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):T4(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),GS(s)||qS(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)GS(t)||qS(t)||t.nullable||wz(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(US(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const i=this.get(t);if(i)return i.name}}function US(e){return e.toLowerCase().trim()}const aK=Me.getLogger("esri.layers.support.fieldProperties");function jO(){return{fields:{type:[Ih],value:null},fieldsIndex:{readOnly:!0,get(){return new oK(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||aK.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return nE(this.fieldsIndex,e)}}}}const lK=/\[([^\[\]]+)\]/gi;function m_(e,t,i){return e?e.map(s=>{const l=new Yp;if(l.read(s,i),l.labelExpression){const d=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;l.labelExpression=l.labelExpression.replace(lK,(y,g)=>`[${uK(g,d)}]`)}return l}):null}function uK(e,t){if(!t)return e;const i=e.toLowerCase();for(let s=0;s<t.length;s++){const l=t[s].name;if(l.toLowerCase()===i)return l}return e}const hK=["oid","global-id"],cK=["oid","global-id","guid"];function LO({displayField:e,editFieldsInfo:t,fields:i,objectIdField:s,title:l},d){if(!i)return null;const y=gK({editFieldsInfo:t,fields:i,objectIdField:s},d);if(!y.length)return null;const g=bK({titleBase:l,fields:i,displayField:e}),x=wK();return new Vp({title:g,content:x,fieldInfos:y})}const pK=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],dK=(e,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:s})=>s?s.has(e.name):!FO(e.name,t)&&(!i||e.name!==i)&&!hK.includes(e.type)&&!pK.some(l=>l.test(e.name));function fK(e,t){const i=e;return t&&(e=e.filter(s=>!t.includes(s.type))),e===i&&(e=e.slice()),e.sort(yK),e}function yK(e,t){return e.type==="oid"?-1:t.type==="oid"?1:BS(e)?-1:BS(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function FO(e,t){if(!e||!t)return!1;const{creationDateField:i,creatorField:s,editDateField:l,editorField:d}=t;return[i&&i.toLowerCase(),s&&s.toLowerCase(),l&&l.toLowerCase(),d&&d.toLowerCase()].includes(e.toLowerCase())}function mK(e,t){return e.editable&&!cK.includes(e.type)&&!FO(e.name,t)}function gK({editFieldsInfo:e,fields:t,objectIdField:i},s){return fK(t,(s==null?void 0:s.ignoreFieldTypes)||_K).map(l=>new Hf({fieldName:l.name,isEditable:mK(l,e),label:l.alias,format:vK(l),visible:dK(l,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:s==null?void 0:s.visibleFieldNames})}))}function vK(e){switch(e.type){case"small-integer":case"integer":case"single":return new Kc({digitSeparator:!0,places:0});case"double":return new Kc({digitSeparator:!0,places:2});case"date":return new Kc({dateFormat:"long-month-day-year"});default:return e.type==="string"&&cE(e.name)?new Kc({digitSeparator:!0,places:0}):null}}function wK(){return[new bp,new df]}function bK(e){const t=fz(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i}function BS(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const _K=["geometry","blob","raster","guid","xml"],xK=jO();let lt=class extends xO(lO(dO(aO(EO(IO(MO(bO(r1(Sf))))))))){constructor(e){super(e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.editingEnabled=!1,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="GeoJSON",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new gu({layer:this}),this.spatialReference=Ye.WGS84,this.templates=null,this.title="GeoJSON",this.type="geojson",this.typeIdField=null,this.types=null}destroy(){var e;(e=this.source)==null||e.destroy()}load(e){return this.addResolvingPromise(this.source.load(e).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo"],"service"),cg(this.renderer,this.fieldsIndex),M4(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get capabilities(){return this.source?this.source.capabilities:null}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&this.geometryType==null}get parsedUrl(){return this.url?fi(this.url):null}set renderer(e){cg(e,this.fieldsIndex),this._set("renderer",e)}set url(e){if(!e)return void this._set("url",e);const t=fi(e);this._set("url",t.path),t.query&&(this.customParameters={...this.customParameters,...t.query})}async applyEdits(e,t){const i=await fe(()=>import("./editingSupport.c07faf47.js"),[]);await this.load();const s=await i.applyEdits(this,this.source,e,t);return this.read({extent:this.source.sourceJSON.extent,timeInfo:this.source.sourceJSON.timeInfo},{origin:"service",ignoreDefaults:!0}),s}on(e,t){return super.on(e,t)}createPopupTemplate(e){return LO(this,e)}createQuery(){const e=new Yi,t=this.get("capabilities.data");e.returnGeometry=!0,t&&t.supportsZ&&(e.returnZ=!0),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:i,timeExtent:s}=this;return e.timeExtent=i!=null&&s!=null?s.offset(-i.value,i.unit):s||null,e}getFieldDomain(e,t){let i,s=!1;const l=t&&t.feature,d=l&&l.attributes,y=this.typeIdField&&d&&d[this.typeIdField];return y!=null&&this.types&&(s=this.types.some(g=>g.id==y&&(i=g.domains&&g.domains[e],i&&i.type==="inherited"&&(i=this._getLayerDomain(e)),!0))),s||i||(i=this._getLayerDomain(e)),i}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(Yi.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const s of i.features)s.layer=s.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>this.source.queryObjectIds(Yi.from(e)||this.createQuery(),t))}queryFeatureCount(e,t){return this.load().then(()=>this.source.queryFeatureCount(Yi.from(e)||this.createQuery(),t))}queryExtent(e,t){return this.load().then(()=>this.source.queryExtent(Yi.from(e)||this.createQuery(),t))}async hasDataChanged(){try{const{dataChanged:e,updates:t}=await this.source.refresh(this.customParameters);return Y(t)&&this.read(t,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_getLayerDomain(e){if(!this.fields)return null;let t=null;return this.fields.some(i=>(i.name===e&&(t=i.domain),!!t)),t}};v([_({readOnly:!0,json:{read:!1,write:!1}})],lt.prototype,"capabilities",null),v([_({type:String})],lt.prototype,"copyright",void 0),v([_({readOnly:!0})],lt.prototype,"createQueryVersion",null),v([_({readOnly:!0})],lt.prototype,"defaultPopupTemplate",null),v([_({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],lt.prototype,"definitionExpression",void 0),v([_({type:String})],lt.prototype,"displayField",void 0),v([_({type:Boolean})],lt.prototype,"editingEnabled",void 0),v([_(gO)],lt.prototype,"elevationInfo",void 0),v([_(RO)],lt.prototype,"featureReduction",void 0),v([_({type:[Ih],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],lt.prototype,"fields",void 0),v([_(xK.fieldsIndex)],lt.prototype,"fieldsIndex",void 0),v([_({type:xt,json:{name:"extent"}})],lt.prototype,"fullExtent",void 0),v([_({type:["point","polygon","polyline","multipoint"],json:{read:{reader:b4.read}}})],lt.prototype,"geometryType",void 0),v([_({type:Boolean})],lt.prototype,"hasZ",void 0),v([_(vO)],lt.prototype,"id",void 0),v([_({type:Boolean,readOnly:!0})],lt.prototype,"isTable",null),v([_(Zv)],lt.prototype,"labelsVisible",void 0),v([_({type:[Yp],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:m_},write:!0}})],lt.prototype,"labelingInfo",void 0),v([_(mO)],lt.prototype,"legendEnabled",void 0),v([_({type:["show","hide"]})],lt.prototype,"listMode",void 0),v([_({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],lt.prototype,"objectIdField",void 0),v([_(J0)],lt.prototype,"opacity",void 0),v([_({type:["GeoJSON"]})],lt.prototype,"operationalLayerType",void 0),v([_({readOnly:!0})],lt.prototype,"parsedUrl",null),v([_(Xv)],lt.prototype,"popupEnabled",void 0),v([_({type:Vp,json:{name:"popupInfo",write:!0}})],lt.prototype,"popupTemplate",void 0),v([_({types:i1,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:jk}}}})],lt.prototype,"renderer",null),v([_(fO)],lt.prototype,"screenSizePerspectiveEnabled",void 0),v([_({readOnly:!0})],lt.prototype,"source",void 0),v([_({type:Ye})],lt.prototype,"spatialReference",void 0),v([_({type:[Qv]})],lt.prototype,"templates",void 0),v([_()],lt.prototype,"title",void 0),v([_({json:{read:!1},readOnly:!0})],lt.prototype,"type",void 0),v([_({type:String,readOnly:!0})],lt.prototype,"typeIdField",void 0),v([_({type:[I6]})],lt.prototype,"types",void 0),v([_(yO)],lt.prototype,"url",null),lt=v([H("esri.layers.GeoJSONLayer")],lt);const T6=lt;var B0e=Object.freeze(Object.defineProperty({__proto__:null,default:T6},Symbol.toStringTag,{value:"Module"}));class E6{constructor(t,i){this.min=t,this.max=i,this.range=i-t}ndiff(t,i=0){return Math.ceil((t-i)/this.range)*this.range+i}_normalize(t,i,s,l=0,d=!1){return(s-=l)<t?s+=this.ndiff(t-s):s>i&&(s-=this.ndiff(s-i)),d&&s===i&&(s=t),s+l}normalize(t,i=0,s=!1){return this._normalize(this.min,this.max,t,i,s)}clamp(t,i=0){return Kr(t-i,this.min,this.max)+i}monotonic(t,i,s){return t<i?i:i+this.ndiff(t-i,s)}minimalMonotonic(t,i,s){return this._normalize(t,t+this.range,i,s)}center(t,i,s){return i=this.monotonic(t,i,s),this.normalize((t+i)/2,s)}diff(t,i,s){return this.monotonic(t,i,s)-t}shortestSignedDiff(t,i){t=this.normalize(t);const s=(i=this.normalize(i))-t,l=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(s)<Math.abs(l)?s:l}contains(t,i,s){return i=this.minimalMonotonic(t,i),(s=this.minimalMonotonic(t,s))>t&&s<i}}function A6(e){for(const t in e){const i=e[t];i instanceof Function&&(e[t]=i.bind(e))}return e}A6(new E6(0,2*Math.PI));A6(new E6(-Math.PI,Math.PI));const SK=A6(new E6(0,360));let Vo=class extends yi(ce){constructor(...e){super(...e),this.position=new He([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,i,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const l={position:e};return t!=null&&(l.heading=t),i!=null&&(l.tilt=i),s!=null&&(l.fov=s),l}return e}writePosition(e,t,i,s){const l=e.clone();l.x=Gs(e.x||0),l.y=Gs(e.y||0),l.z=e.hasZ?Gs(e.z||0):e.z,t[i]=l.write({},s)}readPosition(e,t){const i=new He;return i.read(e,t),i.x=Gs(i.x||0),i.y=Gs(i.y||0),i.z=i.hasZ?Gs(i.z||0):i.z,i}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};v([_({type:He,json:{write:{isRequired:!0}}})],Vo.prototype,"position",void 0),v([Ee("position")],Vo.prototype,"writePosition",null),v([$e("position")],Vo.prototype,"readPosition",null),v([_({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),mt(e=>SK.normalize(Gs(e)))],Vo.prototype,"heading",void 0),v([_({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),mt(e=>Kr(Gs(e),-180,180))],Vo.prototype,"tilt",void 0),v([_({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Vo.prototype,"fov",void 0),Vo=v([H("esri.Camera")],Vo);const DO=Vo;var g_;let Wa=g_=class extends ce{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new g_({rotation:this.rotation,scale:this.scale,targetGeometry:Y(this.targetGeometry)?this.targetGeometry.clone():null,camera:Y(this.camera)?this.camera.clone():null})}};function pw(){return{enabled:!this.camera}}v([_({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:pw}}}}})],Wa.prototype,"rotation",void 0),v([mt("rotation")],Wa.prototype,"castRotation",null),v([_({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:pw}}}}})],Wa.prototype,"scale",void 0),v([_({types:Ll,json:{read:ha,write:!0,origins:{"web-scene":{read:ha,write:{overridePolicy:pw}}}}})],Wa.prototype,"targetGeometry",void 0),v([_({type:DO,json:{write:!0}})],Wa.prototype,"camera",void 0),Wa=g_=v([H("esri.Viewpoint")],Wa);const Zi=Wa;let gm=class extends ze{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!Ge.isCollection(e))return this;const i=this._getOrCreateGroup(t);return Array.isArray(e)||Ge.isCollection(e)?e.forEach(s=>this._isHandle(s)&&i.push(s)):i.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(i=>i.forEach(e));else{const i=this._getGroup(e);i&&t&&i.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||Ge.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let i=0;i<t.length;i++)t[i].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};v([_({readOnly:!0})],gm.prototype,"size",null),gm=v([H("esri.core.Handles")],gm);const Or=gm;function Te(e,t,i={}){return k6(e,t,i,zO)}function Ws(e,t,i={}){return k6(e,t,i,VO)}function k6(e,t,i={},s){let l=null;const d=i.once?(y,g)=>{s(y)&&(ps(l),t(y,g))}:(y,g)=>{s(y)&&t(y,g)};if(l=eD(e,d,i.sync,i.equals),i.initial){const y=e();d(y,y)}return l}function Eh(e,t,i,s={}){let l=null,d=null,y=null;function g(){var E;l&&d&&(d.remove(),(E=s.onListenerRemove)==null||E.call(s,l),l=null,d=null)}function x(E){s.once&&s.once&&ps(y),i(E)}const $=Te(e,(E,O)=>{var P;g(),wv(E)&&(l=E,d=bv(E,t,x),(P=s.onListenerAdd)==null||P.call(s,E))},{sync:s.sync,initial:!0});return y=Rp(()=>{$.remove(),g()}),y}function Tf(e,t){return $K(e,VO,t)}function $K(e,t,i){if(Nn(i))return Promise.reject(pi());const s=e();if(t!=null&&t(s))return Promise.resolve(s);let l=null;function d(){l=ps(l)}return new Promise((y,g)=>{l=mv([Rn(i,()=>{d(),g(pi())}),k6(e,x=>{d(),y(x)},{sync:!1,once:!0},t!=null?t:zO)])})}function zO(e){return!0}function VO(e){return!!e}const $p={sync:!0},Ot={initial:!0},_u={sync:!0,initial:!0};let up=class extends ze{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new Or,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,i={}){return this._installWatch(e,t,i,Te)}addWhen(e,t,i={}){return this._installWatch(e,t,i,Ws)}addOnCollectionChange(e,t,{initial:i=!1,final:s=!1}={}){const l=++this.handleId;return this.handles.add([Eh(e,"after-changes",this._createSyncUpdatingCallback(),$p),Eh(e,"change",t,{onListenerAdd:i?d=>t({added:d.toArray(),removed:[]}):void 0,onListenerRemove:s?d=>t({added:[],removed:d.toArray()}):void 0})],l),{remove:()=>this.handles.remove(l)}}addPromise(e){if(he(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(J1)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const i=()=>this.handles.remove(t);return e.then(i,i),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,i={},s){const l=++this.handleId;i.sync||this._installSyncUpdatingWatch(e,l);const d=s(e,t,i);return this.handles.add(d,l),{remove:()=>this.handles.remove(l)}}_installSyncUpdatingWatch(e,t){const i=this._createSyncUpdatingCallback(),s=Te(e,i,{sync:!0,equals:()=>!1});return this.handles.add(s,t),s}_createSyncUpdatingCallback(){return()=>{this.handles.remove(J1),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(Lp(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(J1))}),J1)}}};v([_({readOnly:!0})],up.prototype,"updating",void 0),up=v([H("esri.core.support.WatchUpdatingTracking")],up);const J1=-42;var HS;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(HS||(HS={}));const Fh=e=>{let t=class extends e{destroy(){var i,s;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(s=this._get("updatingHandles"))==null||s.destroy())}get handles(){return this._get("handles")||new Or}get updatingHandles(){return this._get("updatingHandles")||new up}};return v([_({readOnly:!0})],t.prototype,"handles",null),v([_({readOnly:!0})],t.prototype,"updatingHandles",null),t=v([H("esri.core.HandleOwner")],t),t};let Ef=class extends Fh(ze){};Ef=v([H("esri.core.HandleOwner")],Ef);let yc=class extends Fh(Ge){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(IT(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=Y(this.getCollections)?this.getCollections():null;if(he(e))return void this.removeAll();let t=0;for(const i of e)Y(i)&&(t=this._processCollection(t,i));this.splice(t,this.length)}_createNewInstance(e){return new Ge(e)}_processCollection(e,t){if(!t)return e;const i=this.itemFilterFunction?this.itemFilterFunction:s=>!!s;for(const s of t)if(s){if(i(s)){const l=this.indexOf(s,e);l>=0?l!==e&&this.reorder(s,e):this.add(s,e),++e}if(this.getChildrenFunction){const l=this.getChildrenFunction(s);if(Array.isArray(l))for(const d of l)e=this._processCollection(e,d);else e=this._processCollection(e,l)}}return e}};v([_()],yc.prototype,"getCollections",void 0),v([_()],yc.prototype,"getChildrenFunction",void 0),v([_()],yc.prototype,"itemFilterFunction",void 0),yc=v([H("esri.core.CollectionFlattener")],yc);const Mp=yc;let dw,re=null;function GO(){return!!re}function MK(){return!!pe("esri-wasm")}function qO(){return dw||(dw=fe(()=>import("./pe-wasm.41ba155b.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>$t(`esri/geometry/support/${t}`)})).then(e=>{BO(e)}),dw)}var v_,Jt,w_;(function(e){function t(d,y,g){re.ensureCache.prepare();const x=Vu(g),$=g===x,E=re.ensureFloat64(x),O=re._pe_geog_to_proj(re.getPointer(d),y,E);return O&&yl(g,y,E,$),O}function i(d,y,g,x){switch(x){case Jt.PE_TRANSFORM_P_TO_G:return s(d,y,g);case Jt.PE_TRANSFORM_G_TO_P:return t(d,y,g)}return 0}function s(d,y,g){return l(d,y,g,0)}function l(d,y,g,x){re.ensureCache.prepare();const $=Vu(g),E=g===$,O=re.ensureFloat64($),P=re._pe_proj_to_geog_center(re.getPointer(d),y,O,x);return P&&yl(g,y,O,E),P}e.geogToProj=t,e.projGeog=i,e.projToGeog=s,e.projToGeogCenter=l})(v_||(v_={})),function(e){function t(){e.PE_BUFFER_MAX=re.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=re.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=re.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=re.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=re.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=re.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=re.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=re.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=re.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=re.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=re.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=re.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=re.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=re.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=re.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=re.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=re.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=re.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=re.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=re.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=re.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=re.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=re.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=re.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=re.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=re.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=re.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=re.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=re.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=re.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Jt||(Jt={})),function(e){const t={},i={},s=R=>{if(R){const L=R.getType();switch(L){case Jt.PE_TYPE_GEOGCS:R=re.castObject(R,re.PeGeogcs);break;case Jt.PE_TYPE_PROJCS:R=re.castObject(R,re.PeProjcs);break;case Jt.PE_TYPE_GEOGTRAN:R=re.castObject(R,re.PeGeogtran);break;default:L&Jt.PE_TYPE_UNIT&&(R=re.castObject(R,re.PeUnit))}}return R};function l(){re.PeFactory.prototype.initialize(null)}function d(R){return y(Jt.PE_TYPE_COORDSYS,R)}function y(R,L){let z=null,V=t[R];if(V||(V={},t[R]=V),V.hasOwnProperty(String(L)))z=V[L];else{const K=re.PeFactory.prototype.factoryByType(R,L);re.compare(K,re.NULL)||(z=K,V[L]=z)}return z=s(z),z}function g(R,L){let z=null,V=i[R];if(V||(V={},i[R]=V),V.hasOwnProperty(L))z=V[L];else{const K=re.PeFactory.prototype.fromString(R,L);re.compare(K,re.NULL)||(z=K,V[L]=z)}return z=s(z),z}function x(R){return y(Jt.PE_TYPE_GEOGCS,R)}function $(R){return y(Jt.PE_TYPE_GEOGTRAN,R)}function E(R){return re.PeFactory.prototype.getCode(R)}function O(R){return y(Jt.PE_TYPE_PROJCS,R)}function P(R){return y(Jt.PE_TYPE_UNIT,R)}e.initialize=l,e.coordsys=d,e.factoryByType=y,e.fromString=g,e.geogcs=x,e.geogtran=$,e.getCode=E,e.projcs=O,e.unit=P}(w_||(w_={}));let UO=null;var Tg,b_,__,x_,Eg,S_,Ag,kg,$_;function BO(e){function t(d,y,g){d[y]=g(d[y])}re=e,Jt.init(),Tg.init(),Eg.init(),Ag.init(),kg.init(),UO=class extends re.PeGCSExtent{destroy(){re.destroy(this)}};const i=[re.PeDatum,re.PeGeogcs,re.PeGeogtran,re.PeObject,re.PeParameter,re.PePrimem,re.PeProjcs,re.PeSpheroid,re.PeUnit];for(const d of i)t(d.prototype,"getName",y=>function(){return y.call(this,new Array(Jt.PE_NAME_MAX))});for(const d of[re.PeGeogtran,re.PeProjcs])t(d.prototype,"getParameters",y=>function(){const g=new Array(Jt.PE_PARM_MAX);let x=y.call(this);for(let $=0;$<g.length;$++){const E=re.getValue(x,"*");g[$]=E?re.wrapPointer(E,re.PeParameter):null,x+=Int32Array.BYTES_PER_ELEMENT}return g});t(re.PeHorizon.prototype,"getCoord",d=>function(){const y=this.getSize();if(!y)return null;const g=[];return yl(g,y,d.call(this)),g}),t(re.PeGTlistExtendedEntry.prototype,"getEntries",d=>{const y=re._pe_getPeGTlistExtendedGTsSize();return function(){let g=null;const x=d.call(this);if(!re.compare(x,re.NULL)){g=[x];const $=this.getSteps();if($>1){const E=re.getPointer(x);for(let O=1;O<$;O++)g.push(re.wrapPointer(E+y*O,re.PeGTlistExtendedGTs))}}return g}});const s=re._pe_getPeHorizonSize(),l=d=>function(){let y=this._cache;if(y||(y=new Map,this._cache=y),y.has(d))return y.get(d);let g=null;const x=d.call(this);if(!re.compare(x,re.NULL)){g=[x];const $=x.getNump();if($>1){const E=re.getPointer(x);for(let O=1;O<$;O++)g.push(re.wrapPointer(E+s*O,re.PeHorizon))}}return y.set(d,g),g};t(re.PeProjcs.prototype,"horizonGcsGenerate",l),t(re.PeProjcs.prototype,"horizonPcsGenerate",l),re.PeObject.prototype.toString=function(d=Jt.PE_STR_OPTS_NONE){re.ensureCache.prepare();const y=re.getPointer(this),g=re.ensureInt8(new Array(Jt.PE_BUFFER_MAX));return re.UTF8ToString(re._pe_object_to_string_ext(y,d,g))}}function Mo(e){if(!e)return;const t=re.getClass(e);if(!t)return;const i=re.getCache(t);if(!i)return;const s=re.getPointer(e);s&&delete i[s]}function K1(e,t){const i=[],s=new Array(t);for(let l=0;l<e;l++)i.push(re.ensureInt8(s));return i}function Vu(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(i=>{t.push(i[0],i[1])})):t=e,t}function yl(e,t,i,s=!1){if(s)for(let l=0;l<2*t;l++)e[l]=re.getValue(i+l*Float64Array.BYTES_PER_ELEMENT,"double");else{const l=e.length===0;for(let d=0;d<t;d++)l&&(e[d]=new Array(2)),e[d][0]=re.getValue(i,"double"),e[d][1]=re.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=re.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=re._pe_getPeGTlistExtendedEntrySize()}function s(l,d,y,g,x,$){let E=null;const O=new re.PeInteger($);try{const P=re.PeGTlistExtended.prototype.getGTlist(l,d,y,g,x,O);if(($=O.val)&&(E=[P],$>1)){const R=re.getPointer(P);for(let L=1;L<$;L++)E.push(re.wrapPointer(R+t*L,re.PeGTlistExtendedEntry))}}finally{re.destroy(O)}return E}e.init=i,e.getGTlist=s})(Tg||(Tg={})),function(e){function t(i){if(i&&i.length){for(const s of i)Mo(s),s.getEntries().forEach(l=>{Mo(l);const d=l.getGeogtran();Mo(d),d.getParameters().forEach(Mo),[d.getGeogcs1(),d.getGeogcs2()].forEach(y=>{Mo(y);const g=y.getDatum();Mo(g),Mo(g.getSpheroid()),Mo(y.getPrimem()),Mo(y.getUnit())})});re.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(b_||(b_={})),function(e){function t(i,s,l,d,y){re.ensureCache.prepare();const g=Vu(l),x=l===g,$=re.ensureFloat64(g);let E=0;d&&(E=re.ensureFloat64(d));const O=re._pe_geog_to_geog(re.getPointer(i),s,$,E,y);return O&&yl(l,s,$,x),O}e.geogToGeog=t}(__||(__={})),function(e){const t=($,E,O,P,R,L)=>{let z,V;switch(re.ensureCache.prepare(),$){case"dd":z=re._pe_geog_to_dd,V=Jt.PE_DD_MAX;break;case"ddm":z=re._pe_geog_to_ddm,V=Jt.PE_DDM_MAX;break;case"dms":z=re._pe_geog_to_dms,V=Jt.PE_DMS_MAX}let K=0;E&&(K=re.getPointer(E));const ee=Vu(P),se=re.ensureFloat64(ee),oe=K1(O,V),ne=z(K,O,se,R,re.ensureInt32(oe));if(ne)for(let ae=0;ae<O;ae++)L[ae]=re.UTF8ToString(oe[ae]);return ne},i=($,E,O,P,R)=>{let L;switch(re.ensureCache.prepare(),$){case"dd":L=re._pe_dd_to_geog;break;case"ddm":L=re._pe_ddm_to_geog;break;case"dms":L=re._pe_dms_to_geog}let z=0;E&&(z=re.getPointer(E));const V=P.map(oe=>re.ensureString(oe)),K=re.ensureInt32(V),ee=re.ensureFloat64(new Array(2*O)),se=L(z,O,K,ee);return se&&yl(R,O,ee),se};function s($,E,O,P,R){return t("dms",$,E,O,P,R)}function l($,E,O,P){return i("dms",$,E,O,P)}function d($,E,O,P,R){return t("ddm",$,E,O,P,R)}function y($,E,O,P){return i("ddm",$,E,O,P)}function g($,E,O,P,R){return t("dd",$,E,O,P,R)}function x($,E,O,P){return i("dd",$,E,O,P)}e.geogToDms=s,e.dmsToGeog=l,e.geogToDdm=d,e.ddmToGeog=y,e.geogToDd=g,e.ddToGeog=x}(x_||(x_={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=re.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=re.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=re.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(l,d,y,g,x,$,E){re.ensureCache.prepare();let O=0;l&&(O=re.getPointer(l));const P=Vu(y),R=re.ensureFloat64(P),L=K1(d,Jt.PE_MGRS_MAX),z=re.ensureInt32(L),V=re._pe_geog_to_mgrs_extended(O,d,R,g,x,$,z);if(V)for(let K=0;K<d;K++)E[K]=re.UTF8ToString(L[K]);return V}function s(l,d,y,g,x){re.ensureCache.prepare();let $=0;l&&($=re.getPointer(l));const E=y.map(L=>re.ensureString(L)),O=re.ensureInt32(E),P=re.ensureFloat64(new Array(2*d)),R=re._pe_mgrs_to_geog_extended($,d,O,g,P);return R&&yl(x,d,P),R}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=s}(Eg||(Eg={})),function(e){function t(s,l,d,y,g,x,$){re.ensureCache.prepare();let E=0;s&&(E=re.getPointer(s));const O=Vu(d),P=re.ensureFloat64(O),R=K1(l,Jt.PE_MGRS_MAX),L=re.ensureInt32(R),z=re._pe_geog_to_usng(E,l,P,y,g,x,L);if(z)for(let V=0;V<l;V++)$[V]=re.UTF8ToString(R[V]);return z}function i(s,l,d,y){re.ensureCache.prepare();let g=0;s&&(g=re.getPointer(s));const x=d.map(P=>re.ensureString(P)),$=re.ensureInt32(x),E=re.ensureFloat64(new Array(2*l)),O=re._pe_usng_to_geog(g,l,$,E);return O&&yl(y,l,E),O}e.geogToUsng=t,e.usngToGeog=i}(S_||(S_={})),function(e){function t(){e.PE_UTM_OPTS_NONE=re.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=re.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=re.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(l,d,y,g,x){re.ensureCache.prepare();let $=0;l&&($=re.getPointer(l));const E=Vu(y),O=re.ensureFloat64(E),P=K1(d,Jt.PE_UTM_MAX),R=re.ensureInt32(P),L=re._pe_geog_to_utm($,d,O,g,R);if(L)for(let z=0;z<d;z++)x[z]=re.UTF8ToString(P[z]);return L}function s(l,d,y,g,x){re.ensureCache.prepare();let $=0;l&&($=re.getPointer(l));const E=y.map(L=>re.ensureString(L)),O=re.ensureInt32(E),P=re.ensureFloat64(new Array(2*d)),R=re._pe_utm_to_geog($,d,O,g,P);return R&&yl(x,d,P),R}e.init=t,e.geogToUtm=i,e.utmToGeog=s}(Ag||(Ag={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=re.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=re.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=re.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=re.PePCSInfo.prototype.PE_POLE_POINT}function s(l,d=e.PE_PCSINFO_OPTION_DOMAIN){let y,g;return t.has(l)&&(g=t.get(l),g[d]&&(y=g[d])),y||(y=re.PePCSInfo.prototype.generate(l,d),g||(g=[],t.set(l,g)),g[d]=y),y}e.init=i,e.generate=s}(kg||(kg={})),function(e){function t(){return re.PeVersion.prototype.version_string()}e.versionString=t}($_||($_={}));const IK=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return re},isLoaded:GO,isSupported:MK,load:qO,get PeCSTransformations(){return v_},get PeDefs(){return Jt},get PeFactory(){return w_},get PeGCSExtent(){return UO},get PeGTlistExtended(){return Tg},get PeGTlistExtendedEntry(){return b_},get PeGTTransformations(){return __},get PeNotationDms(){return x_},get PeNotationMgrs(){return Eg},get PeNotationUsng(){return S_},get PeNotationUtm(){return Ag},get PePCSInfo(){return kg},get PeVersion(){return $_},_init:BO},Symbol.toStringTag,{value:"Module"})),Sa=Ut.radius,Zs=Ut.eccentricitySquared,TK={a1:Sa*Zs,a2:Sa*Zs*Sa*Zs,a3:Sa*Zs*Zs/2,a4:Sa*Zs*Sa*Zs*2.5,a5:Sa*Zs+Sa*Zs*Zs/2,a6:1-Zs};1/294.9786982,1/298.257222101,Ut.radius,Ut.flattening,Ol.radius,Ol.flattening,1/192.0430107526882,na.radius,na.flattening,1/10.2079945799458,1/43.61604095563141,na.radius;let Y1=0;class hp{constructor(t=null){this.uid=Y1++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const i=new hp;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Y1++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Y1++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Y1++}getInverse(){const t=new hp;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class xl{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const i of t.steps)i instanceof hp?this.steps.push(i):this.steps.push(new hp({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}static cacheKey(t,i){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(t){const i=new xl;let s="";for(const l of t.steps){const d=hp.fromGE(l);i.steps.push(d),s+=d.uid.toString()+","}return i._cached_projection={},i._gtlistentry=null,i._chain=s,i}getInverse(){const t=new xl;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const s=this.steps[i];t.steps.push(s.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,s){this._cached_projection[xl.cacheKey(t,i)]=s}getCachedGeTransformation(t,i){let s="";for(const d of this.steps)s+=d.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=s);const l=this._cached_projection[xl.cacheKey(t,i)];return l===void 0?null:l}}function HO(e,t,i){if(he(t)||he(i)||i.vcsWkid||dr(t,i))return null;const s=Sp(t)/Sp(i);if(s===1)return null;switch(e){case"point":case"esriGeometryPoint":return l=>EK(l,s);case"polyline":case"esriGeometryPolyline":return l=>kK(l,s);case"polygon":case"esriGeometryPolygon":return l=>AK(l,s);case"multipoint":case"esriGeometryMultipoint":return l=>OK(l,s);case"extent":case"esriGeometryExtent":return l=>CK(l,s);default:return null}}function EK(e,t){e&&e.z!=null&&(e.z*=t)}function AK(e,t){if(e)for(const i of e.rings)for(const s of i)s.length>2&&(s[2]*=t)}function kK(e,t){if(e)for(const i of e.paths)for(const s of i)s.length>2&&(s[2]*=t)}function OK(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function CK(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Tl=null,Og=null,fw=null,yw={};const WO=new rE;function Ah(){return!!Tl&&GO()}function kh(e){return he(fw)&&(fw=Promise.all([qO(),fe(()=>Promise.resolve().then(function(){return zce}),void 0).then(t=>t.g),fe(()=>Promise.resolve().then(function(){return Wce}),void 0)])),fw.then(([,t,{hydratedAdapter:i}])=>{bi(e),Og=i,Tl=t.default,Tl._enableProjection(IK),WO.notify()})}function Dh(e,t,i=null,s=null){return Array.isArray(e)?e.length===0?[]:WS(Og,e,e[0].spatialReference,t,i,s):WS(Og,[e],e.spatialReference,t,i,s)[0]}function WS(e,t,i,s,l=null,d=null){if(he(i)||he(s))return t;if(Rl(i,s,l))return t.map(y=>jK(y,i,s));if(he(l)){const y=xl.cacheKey(i,s);yw[y]!==void 0?l=yw[y]:(l=PK(i,s,null),he(l)&&(l=new xl),yw[y]=l)}if(he(Tl))throw new O6;return Y(d)?Tl._project(e,t,i,s,l,d):Tl._project(e,t,i,s,l)}function H0e(e,t){return he(e)?{pending:null,geometry:null}:dr(e.spatialReference,t)?{pending:null,geometry:e}:pr(e.spatialReference)&&pr(t)?Rl(e.spatialReference,t)||Ah()?{pending:null,geometry:NK(e,t)}:(it(WO),{pending:kh(),geometry:null}):{pending:null,geometry:null}}function PK(e,t,i=null){if(he(Tl))throw new O6;if(he(e)||he(t))return null;const s=Tl._getTransformation(Og,e,t,i,i==null?void 0:i.spatialReference);return s!==null?xl.fromGE(s):null}class O6 extends te{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var Z;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(Z||(Z={}));function NK(e,t){try{const i=Dh(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const s=HO(i.type,e.spatialReference,t);return Y(s)&&s(i),i}catch(i){if(!(i instanceof O6))throw i;return null}}function Rl(e,t,i){return!i&&(!!dr(e,t)||pr(e)&&pr(t)&&!!XO(e,t,ZO))}async function RK(e,t,i,s){if(Ah())return l7(s);if(Array.isArray(e)){for(const{source:l,dest:d,geographicTransformation:y}of e)if(!Rl(l,d,y))return kh(s)}else if(!Rl(e,t,i))return kh(s);return l7(s)}function jK(e,t,i){return e?"x"in e?LK(e,t,new He,i,0):"xmin"in e?zK(e,t,new xt,i,0):"rings"in e?JO(e,t,new gs,i,0):"paths"in e?DK(e,t,new $r,i,0):"points"in e?FK(e,t,new Nh,i,0):null:null}function LK(e,t,i,s,l){Ti[0]=e.x,Ti[1]=e.y;const d=e.z;return Ti[2]=d!==void 0?d:l,o1(Ti,t,0,Ti,s,0,1)?(i.x=Ti[0],i.y=Ti[1],i.spatialReference=s,d===void 0?(i.z=void 0,i.hasZ=!1):(i.z=Ti[2],i.hasZ=!0),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function FK(e,t,i,s,l){const{points:d,hasZ:y,hasM:g}=e,x=[],$=d.length,E=[];for(const O of d)E.push(O[0],O[1],y?O[2]:l);if(!o1(E,t,0,E,s,0,$))return null;for(let O=0;O<$;++O){const P=3*O,R=E[P],L=E[P+1];y&&g?x.push([R,L,E[P+2],d[O][3]]):y?x.push([R,L,E[P+2]]):g?x.push([R,L,d[O][2]]):x.push([R,L])}return i.points=x,i.spatialReference=s,i.hasZ=y,i.hasM=g,i}function DK(e,t,i,s,l){const{paths:d,hasZ:y,hasM:g}=e,x=[];return KO(d,y,g,t,x,s,l)?(i.paths=x,i.spatialReference=s,i.hasZ=y,i.hasM=g,i):null}function W0e(e,t,i=t.spatialReference,s=0){return Y(i)&&Y(JO(e,e.spatialReference,t,i,s))}function JO(e,t,i,s,l){const{rings:d,hasZ:y,hasM:g}=e,x=[];return KO(d,y,g,t,x,s,l)?(i.rings=x,i.spatialReference=s,i.hasZ=y,i.hasM=g,i):null}function zK(e,t,i,s,l){const{xmin:d,ymin:y,xmax:g,ymax:x,hasZ:$,hasM:E}=e;return JS(d,y,$?e.zmin:l,t,Ti,s)?(i.xmin=Ti[0],i.ymin=Ti[1],$&&(i.zmin=Ti[2]),JS(g,x,$?e.zmax:l,t,Ti,s)?(i.xmax=Ti[0],i.ymax=Ti[1],$&&(i.zmax=Ti[2]),E&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=s,i):null):null}function J0e(e,t,i,s=0){Ti[0]=e.x,Ti[1]=e.y;const l=e.z;return Ti[2]=l!==void 0?l:s,o1(Ti,e.spatialReference,0,t,i,0,1)}function JS(e,t,i,s,l,d){return X1[0]=e,X1[1]=t,X1[2]=i,o1(X1,s,0,l,d,0,1)}function o1(e,t,i,s,l,d,y=1){const g=XO(t,l,ZO);if(he(g))return!1;if(g===Lt){if(e===s&&i===d)return!0;const $=i+3*y;for(let E=i,O=d;E<$;E++,O++)s[O]=e[E];return!0}const x=i+3*y;for(let $=i,E=d;$<x;$+=3,E+=3)g(e,$,s,E);return!0}function KO(e,t,i,s,l,d,y=0){const g=new Array;for(const $ of e)for(const E of $)g.push(E[0],E[1],t?E[2]:y);if(!o1(g,s,0,g,d,0,g.length/3))return!1;let x=0;l.length=0;for(const $ of e){const E=new Array;for(const O of $)t&&i?E.push([g[x++],g[x++],g[x++],O[3]]):t?E.push([g[x++],g[x++],g[x++]]):i?(E.push([g[x++],g[x++],O[2]]),x++):(E.push([g[x++],g[x++]]),x++);l.push(E)}return!0}function K0e(e,t,i,s){if(he(e)||he(s))return!1;const l=Cg(e,rY),d=Cg(s,sY);if(l===d&&!KS(d)&&(l!==Z.UNKNOWN||dr(e,s)))return tO(i,t),!0;if(KS(d)){const y=m0[l][Z.LON_LAT],g=m0[Z.LON_LAT][d];return!he(y)&&!he(g)&&(y(t,0,$a,0),g($a,0,Ma,0),YO(po*$a[0],po*$a[1],i),i[12]=Ma[0],i[13]=Ma[1],i[14]=Ma[2],!0)}if((d===Z.WEB_MERCATOR||d===Z.PLATE_CARREE)&&(l===Z.WGS84||l===Z.CGCS2000&&d===Z.PLATE_CARREE||l===Z.SPHERICAL_ECEF||l===Z.WEB_MERCATOR)){const y=m0[l][Z.LON_LAT],g=m0[Z.LON_LAT][d];return!he(y)&&!he(g)&&(y(t,0,$a,0),g($a,0,Ma,0),l===Z.SPHERICAL_ECEF?VK(po*$a[0],po*$a[1],i):g6(i),i[12]=Ma[0],i[13]=Ma[1],i[14]=Ma[2],!0)}return!1}function KS(e){return e===Z.SPHERICAL_ECEF||e===Z.SPHERICAL_MARS_PCPF||e===Z.SPHERICAL_MOON_PCPF}function YO(e,t,i){const s=Math.sin(e),l=Math.cos(e),d=Math.sin(t),y=Math.cos(t),g=i;return g[0]=-s,g[4]=-d*l,g[8]=y*l,g[12]=0,g[1]=l,g[5]=-d*s,g[9]=y*s,g[13]=0,g[2]=0,g[6]=y,g[10]=d,g[14]=0,g[3]=0,g[7]=0,g[11]=0,g[15]=1,g}function VK(e,t,i){return YO(e,t,i),ga(i,i),i}function Cg(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Qf(e,1)),e.wkt===sk.wkt?t.spatialReferenceId=Z.SPHERICAL_ECEF:cf(e)?t.spatialReferenceId=Z.WGS84:vh(e)?t.spatialReferenceId=Z.WEB_MERCATOR:yD(e)?t.spatialReferenceId=Z.PLATE_CARREE:e.wkt===LU.wkt?t.spatialReferenceId=Z.WGS84_ECEF:e.wkid===gh.CGCS2000?t.spatialReferenceId=Z.CGCS2000:e.wkt===vg.wkt?t.spatialReferenceId=Z.SPHERICAL_MARS_PCPF:e.wkt===wg.wkt?t.spatialReferenceId=Z.SPHERICAL_MOON_PCPF:$v(e)?t.spatialReferenceId=Z.GCSMARS2000:Mv(e)?t.spatialReferenceId=Z.GCSMOON2000:t.spatialReferenceId=Z.UNKNOWN)}function Lt(e,t,i,s){e!==i&&(i[s++]=e[t++],i[s++]=e[t++],i[s]=e[t])}function cp(e,t,i,s){i[s++]=Ip*(e[t++]/Ut.radius),i[s++]=Ip*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/Ut.radius))),i[s]=e[t]}function GK(e,t,i,s){cp(e,t,i,s),eh(i,s,i,s)}function qK(e,t,i,s){cp(e,t,i,s),ih(i,s,i,s)}function UK(e,t,i,s,l){const d=.4999999*Math.PI,y=Kr(po*e[t+1],-d,d),g=Math.sin(y);i[s++]=po*e[t]*l.radius,i[s++]=l.halfSemiMajorAxis*Math.log((1+g)/(1-g)),i[s]=e[t+2]}function Af(e,t,i,s){UK(e,t,i,s,Ut)}const YS=Ut.radius*Math.PI/180,XS=180/(Ut.radius*Math.PI);function Zu(e,t,i,s){i[s]=e[t]*YS,i[s+1]=e[t+1]*YS,i[s+2]=e[t+2]}function Qu(e,t,i,s){i[s]=e[t]*XS,i[s+1]=e[t+1]*XS,i[s+2]=e[t+2]}function BK(e,t,i,s){cp(e,t,i,s),Zu(i,s,i,s)}function HK(e,t,i,s){rh(e,t,i,s),Zu(i,s,i,s)}function WK(e,t,i,s){th(e,t,i,s),Zu(i,s,i,s)}function JK(e,t,i,s){Qu(e,t,i,s),eh(i,s,i,s)}function KK(e,t,i,s){Qu(e,t,i,s),Af(i,s,i,s)}function YK(e,t,i,s){Qu(e,t,i,s),ih(i,s,i,s)}function C6(e,t,i,s,l){const d=l+e[t+2],y=po*e[t+1],g=po*e[t],x=Math.cos(y);i[s++]=Math.cos(g)*x*d,i[s++]=Math.sin(g)*x*d,i[s]=Math.sin(y)*d}function ZS(e,t,i,s){C6(e,t,i,s,Ol.radius)}function QS(e,t,i,s){C6(e,t,i,s,na.radius)}function eh(e,t,i,s){C6(e,t,i,s,Ut.radius)}function P6(e,t,i,s,l){const d=e[t],y=e[t+1],g=e[t+2],x=Math.sqrt(d*d+y*y+g*g),$=eA(g/(x===0?1:x)),E=Math.atan2(y,d);i[s++]=Ip*E,i[s++]=Ip*$,i[s]=x-l}function e8(e,t,i,s){P6(e,t,i,s,Ol.radius)}function t8(e,t,i,s){P6(e,t,i,s,na.radius)}function th(e,t,i,s){P6(e,t,i,s,Ut.radius)}function XK(e,t,i,s){th(e,t,i,s),Af(i,s,i,s)}function ZK(e,t,i,s){th(e,t,i,s),ih(i,s,i,s)}function QK(e,t,i,s,l){const d=po*e[t],y=po*e[t+1],g=e[t+2],x=Math.sin(y),$=Math.cos(y),E=l.radius/Math.sqrt(1-l.eccentricitySquared*x*x);i[s++]=(E+g)*$*Math.cos(d),i[s++]=(E+g)*$*Math.sin(d),i[s++]=(E*(1-l.eccentricitySquared)+g)*x}function ih(e,t,i,s){QK(e,t,i,s,Ut)}function rh(e,t,i,s){const l=TK,d=e[t],y=e[t+1],g=e[t+2];let x,$,E,O,P,R,L,z,V,K,ee,se,oe,ne,ae,Ie,Se,Pe,Re,De,Le;x=Math.abs(g),$=d*d+y*y,E=Math.sqrt($),O=$+g*g,P=Math.sqrt(O),De=Math.atan2(y,d),R=g*g/O,L=$/O,ne=l.a2/P,ae=l.a3-l.a4/P,L>.3?(z=x/P*(1+L*(l.a1+ne+R*ae)/P),Re=Math.asin(z),K=z*z,V=Math.sqrt(1-K)):(V=E/P*(1-R*(l.a5-ne-L*ae)/P),Re=Math.acos(V),K=1-V*V,z=Math.sqrt(K)),ee=1-Ut.eccentricitySquared*K,se=Ut.radius/Math.sqrt(ee),oe=l.a6*se,ne=E-se*V,ae=x-oe*z,Se=V*ne+z*ae,Ie=V*ae-z*ne,Pe=Ie/(oe/ee+Se),Re+=Pe,Le=Se+Ie*Pe/2,g<0&&(Re=-Re),i[s++]=Ip*De,i[s++]=Ip*Re,i[s]=Le}function eY(e,t,i,s){rh(e,t,i,s),eh(i,s,i,s)}function tY(e,t,i,s){rh(e,t,i,s),Af(i,s,i,s)}const m0={[Z.WGS84]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Lt,[Z.WGS84_COMPARABLE_LON_LAT]:Lt,[Z.SPHERICAL_ECEF]:eh,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:Af,[Z.PLATE_CARREE]:Zu,[Z.WGS84]:Lt,[Z.WGS84_ECEF]:ih},[Z.CGCS2000]:{[Z.CGCS2000]:Lt,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Lt,[Z.WGS84_COMPARABLE_LON_LAT]:Lt,[Z.SPHERICAL_ECEF]:eh,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:Zu,[Z.WGS84]:null,[Z.WGS84_ECEF]:ih},[Z.GCSMARS2000]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:Lt,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Lt,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:QS,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.GCSMOON2000]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:Lt,[Z.LON_LAT]:Lt,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:ZS,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.WEB_MERCATOR]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:cp,[Z.WGS84_COMPARABLE_LON_LAT]:cp,[Z.SPHERICAL_ECEF]:GK,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:Lt,[Z.PLATE_CARREE]:BK,[Z.WGS84]:cp,[Z.WGS84_ECEF]:qK},[Z.WGS84_ECEF]:{[Z.CGCS2000]:rh,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:rh,[Z.WGS84_COMPARABLE_LON_LAT]:rh,[Z.SPHERICAL_ECEF]:eY,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:tY,[Z.PLATE_CARREE]:HK,[Z.WGS84]:rh,[Z.WGS84_ECEF]:Lt},[Z.SPHERICAL_ECEF]:{[Z.CGCS2000]:th,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:th,[Z.WGS84_COMPARABLE_LON_LAT]:th,[Z.SPHERICAL_ECEF]:Lt,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:XK,[Z.PLATE_CARREE]:WK,[Z.WGS84]:th,[Z.WGS84_ECEF]:ZK},[Z.SPHERICAL_MARS_PCPF]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:t8,[Z.GCSMOON2000]:null,[Z.LON_LAT]:t8,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:Lt,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.SPHERICAL_MOON_PCPF]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:e8,[Z.LON_LAT]:e8,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:Lt,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.UNKNOWN]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:null,[Z.WGS84_COMPARABLE_LON_LAT]:null,[Z.SPHERICAL_ECEF]:null,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:Lt,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:null,[Z.WGS84]:null,[Z.WGS84_ECEF]:null},[Z.LON_LAT]:{[Z.CGCS2000]:Lt,[Z.GCSMARS2000]:Lt,[Z.GCSMOON2000]:Lt,[Z.LON_LAT]:Lt,[Z.WGS84_COMPARABLE_LON_LAT]:Lt,[Z.SPHERICAL_ECEF]:eh,[Z.SPHERICAL_MARS_PCPF]:QS,[Z.SPHERICAL_MOON_PCPF]:ZS,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:Af,[Z.PLATE_CARREE]:Zu,[Z.WGS84]:Lt,[Z.WGS84_ECEF]:ih},[Z.WGS84_COMPARABLE_LON_LAT]:{[Z.CGCS2000]:null,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Lt,[Z.WGS84_COMPARABLE_LON_LAT]:Lt,[Z.SPHERICAL_ECEF]:eh,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:null,[Z.PLATE_CARREE]:Zu,[Z.WGS84]:Lt,[Z.WGS84_ECEF]:ih},[Z.PLATE_CARREE]:{[Z.CGCS2000]:Qu,[Z.GCSMARS2000]:null,[Z.GCSMOON2000]:null,[Z.LON_LAT]:Qu,[Z.WGS84_COMPARABLE_LON_LAT]:Qu,[Z.SPHERICAL_ECEF]:JK,[Z.SPHERICAL_MARS_PCPF]:null,[Z.SPHERICAL_MOON_PCPF]:null,[Z.UNKNOWN]:null,[Z.WEB_MERCATOR]:KK,[Z.PLATE_CARREE]:Lt,[Z.WGS84]:Qu,[Z.WGS84_ECEF]:YK}};function XO(e,t,i=N6()){return he(e)||he(t)?null:iY(e,t,i).projector}function iY(e,t,i){if(he(e)||he(t)||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const s=Cg(e,i.source),l=Cg(t,i.dest);return s===Z.UNKNOWN&&l===Z.UNKNOWN?dr(e,t)?i.projector=Lt:i.projector=null:i.projector=m0[s][l],i}function N6(){return{source:{spatialReference:null,spatialReferenceId:Z.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Z.UNKNOWN,metersPerUnit:1},projector:Lt}}const rY={spatialReference:null,spatialReferenceId:Z.UNKNOWN},sY={spatialReference:null,spatialReferenceId:Z.UNKNOWN},ZO=N6();N6();const po=mG(1),Ip=QE(1),X1=bo(),$a=bo(),Ma=bo(),Ti=bo();var M_;let Xn=M_=class extends ce{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new M_({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};v([_({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Xn.prototype,"cols",void 0),v([_({type:Ft,json:{write:!0}})],Xn.prototype,"level",void 0),v([_({type:String,json:{write:!0}})],Xn.prototype,"levelValue",void 0),v([_({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Xn.prototype,"origin",void 0),v([_({type:Number,json:{write:!0}})],Xn.prototype,"resolution",void 0),v([_({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Xn.prototype,"rows",void 0),v([_({type:Number,json:{write:!0}})],Xn.prototype,"scale",void 0),Xn=M_=v([H("esri.layers.support.LOD")],Xn);const R6=Xn;var Ja;const i8=new tt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Pi=Ja=class extends ce{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:s=256,spatialReference:l=Ye.WebMercator,numLODs:d=24}=e;if(!pr(l)){const O=[];if(i)for(let P=0;P<i.length;P++){const R=i[P];O.push({level:P,scale:R,resolution:R})}else{let P=5e-4;for(let R=d-1;R>=0;R--)O.unshift({level:R,scale:P,resolution:P}),P*=2}return new Ja({dpi:96,lods:O,origin:new He(0,0,l),size:[s,s],spatialReference:l})}const y=An(l),g=e.origin?new He({x:e.origin.x,y:e.origin.y,spatialReference:l}):new He(y?{x:y.origin[0],y:y.origin[1],spatialReference:l}:{x:0,y:0,spatialReference:l}),x=96,$=1/(Qf(l)*39.37*x),E=[];if(i)for(let O=0;O<i.length;O++){const P=i[O],R=P*$;E.push({level:O,scale:P,resolution:R})}else{let O=LT(l)?512/s*5916575275917094e-7:256/s*591657527591555e-6;const P=Math.ceil(d/t);E.push({level:0,scale:O,resolution:O*$});for(let R=1;R<P;R++){const L=O/2**t,z=L*$;E.push({level:R,scale:L,resolution:z}),O=L}}return new Ja({dpi:x,lods:E,origin:g,size:[s,s],spatialReference:l})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=An(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return He.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const s=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach(l=>{s.push(l.scale),t=l.scale>t?l.scale:t,i=l.scale<i?l.scale:i,this._levelToLOD[l.level]=l})),this._set("scales",s),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),s=i+1;return t[i]/(t[i]/t[s])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let s=0;for(;s<i;s++){const l=t[s],d=t[s+1];if(l<=e)return s;if(d===e)return s+1;if(l>e&&d<e)return s+Math.log(l/e)/Math.log(l/d)}return s}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,s){const l=this.lodAt(e);if(!l)return null;let d,y;if(typeof t=="number")d=t,y=i;else if(dr(t.spatialReference,this.spatialReference))d=t.x,y=t.y,s=i;else{const $=Iv(t,this.spatialReference);if(he($))return null;d=$.x,y=$.y,s=i}const g=l.resolution*this.size[0],x=l.resolution*this.size[1];return s||(s={id:null,level:0,row:0,col:0,extent:Pl()}),s.level=e,s.row=Math.floor((this.origin.y-y)/x+.001),s.col=Math.floor((d-this.origin.x)/g+.001),this.updateTileInfo(s),s}updateTileInfo(e,t=Ja.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===Ja.ExtrapolateOptions.POWER_OF_TWO){const y=this.lods[this.lods.length-1];y.level<e.level&&(i=y)}if(!i)return;const s=e.level-i.level,l=i.resolution*this.size[0]/2**s,d=i.resolution*this.size[1]/2**s;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Pl()),e.extent[0]=this.origin.x+e.col*l,e.extent[1]=this.origin.y-(e.row+1)*d,e.extent[2]=e.extent[0]+l,e.extent[3]=e.extent[1]+d}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),s=i*this.size[0],l=i*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*l,e[2]=e[0]+s,e[3]=e[1]+l,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return Ja.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const i=[],s=this.lods.length;for(let l=0;l<s;l++){const d=this.lods[l],y=d.resolution*t;i.push(new R6({level:d.level,scale:d.scale,resolution:y}))}return new Ja({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const s=e[i];this._upsampleLevels[s.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/s.resolution:0},t=s}}};v([_({type:Number,json:{write:!0}})],Pi.prototype,"compressionQuality",void 0),v([_({type:Number,json:{write:!0}})],Pi.prototype,"dpi",void 0),v([_({type:String,json:{read:i8.read,write:i8.write,origins:{"web-scene":{read:!1,write:!1}}}})],Pi.prototype,"format",void 0),v([_({readOnly:!0})],Pi.prototype,"isWrappable",null),v([_({type:He,json:{write:!0}})],Pi.prototype,"origin",void 0),v([$e("origin")],Pi.prototype,"readOrigin",null),v([_({type:[R6],value:null,json:{write:!0}})],Pi.prototype,"lods",null),v([_({readOnly:!0})],Pi.prototype,"minScale",void 0),v([_({readOnly:!0})],Pi.prototype,"maxScale",void 0),v([_({readOnly:!0})],Pi.prototype,"scales",void 0),v([_({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Pi.prototype,"size",void 0),v([$e("size",["rows","cols"])],Pi.prototype,"readSize",null),v([Ee("size",{cols:{type:Ft},rows:{type:Ft}})],Pi.prototype,"writeSize",null),v([_({type:Ye,json:{write:!0}})],Pi.prototype,"spatialReference",void 0),Pi=Ja=v([H("esri.layers.support.TileInfo")],Pi),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Pi||(Pi={}));const nY=Pi,vm={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,s=this.values;return t<=i.xsmall?s.xsmall:t<=i.small?s.small:t<=i.medium?s.medium:t<=i.large?s.large:s.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],s=t[1],l=this.values;return s>=i?l.portrait:l.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},mw={xsmall:544,small:768,medium:992,large:1200};function oY(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function gw(e,t){return t?vm[e].valueToClassName[t].split(" "):[]}const aY=e=>{let t=class extends e{constructor(...i){super(...i),this._breakpointsHandles=new Or,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=mw}initialize(){this._breakpointsHandles.add(Te(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Ot))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=Vs(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const s=oY(i);if(!s){const l=JSON.stringify(mw,null,2);console.warn("provided breakpoints are not valid, using defaults:"+l)}i=s?i:mw,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=Sr.acquire(),s=Sr.acquire();let l,d=!1;for(l in vm){const y=this[l],g=vm[l].getValue({viewSize:this.size,breakpoints:this.breakpoints});y!==g&&(d=!0,this[l]=g,gw(l,y).forEach(x=>s.push(x)),gw(l,g).forEach(x=>i.push(x)))}d&&(this._applyClassNameChanges(i,s),Sr.release(i),Sr.release(s))}_applyClassNameChanges(i,s){const l=this.container;l&&(s.forEach(d=>l.classList.remove(d)),i.forEach(d=>l.classList.add(d)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let s;for(s in vm)gw(s,this[s]).forEach(l=>i.classList.remove(l))}};return v([_()],t.prototype,"breakpoints",null),v([_()],t.prototype,"orientation",void 0),v([_()],t.prototype,"widthBreakpoint",void 0),v([_()],t.prototype,"heightBreakpoint",void 0),t=v([H("esri.views.BreakpointsOwner")],t),t};function j6(e){return typeof e=="string"?document.getElementById(e):e}function QO(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function r8(e,t){const i=t.parentNode;i&&i.insertBefore(e,t)}function s8(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var lY="[object Object]";function uY(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function hY(e,t){return function(i){return e(t(i))}}var cY=Function.prototype,eC=Object.prototype,tC=cY.toString,pY=eC.hasOwnProperty,dY=tC.call(Object),fY=eC.toString,yY=hY(Object.getPrototypeOf,Object);function mY(e){return!!e&&typeof e=="object"}function gY(e){if(!mY(e)||fY.call(e)!=lY||uY(e))return!1;var t=yY(e);if(t===null)return!0;var i=pY.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&tC.call(i)==dY}var vY=gY,Gu={exports:{}},oi={},kf={exports:{}},zh={};function iC(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function wY(e,t,i){}function bY(e,t,i){}var _Y=/javascript\s*\:/img;function xY(e,t){return _Y.test(t)?"":t}zh.whiteList=iC();zh.getDefaultWhiteList=iC;zh.onAttr=wY;zh.onIgnoreAttr=bY;zh.safeAttrValue=xY;var SY={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,l;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,l=e.length;s<l;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},vd=SY;function $Y(e,t){e=vd.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,s=!1,l=0,d=0,y="";function g(){if(!s){var E=vd.trim(e.slice(l,d)),O=E.indexOf(":");if(O!==-1){var P=vd.trim(E.slice(0,O)),R=vd.trim(E.slice(O+1));if(P){var L=t(l,y.length,P,R,E);L&&(y+=L+"; ")}}}l=d+1}for(;d<i;d++){var x=e[d];if(x==="/"&&e[d+1]==="*"){var $=e.indexOf("*/",d+2);if($===-1)break;d=$+1,l=d+1,s=!1}else x==="("?s=!0:x===")"?s=!1:x===";"?s||g():x===`
`&&g()}return vd.trim(y)}var MY=$Y,Z1=zh,IY=MY;function n8(e){return e==null}function TY(e){var t={};for(var i in e)t[i]=e[i];return t}function rC(e){e=TY(e||{}),e.whiteList=e.whiteList||Z1.whiteList,e.onAttr=e.onAttr||Z1.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Z1.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Z1.safeAttrValue,this.options=e}rC.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,s=i.whiteList,l=i.onAttr,d=i.onIgnoreAttr,y=i.safeAttrValue,g=IY(e,function(x,$,E,O,P){var R=s[E],L=!1;if(R===!0?L=R:typeof R=="function"?L=R(O):R instanceof RegExp&&(L=R.test(O)),L!==!0&&(L=!1),O=y(E,O),!!O){var z={position:$,sourcePosition:x,source:P,isWhite:L};if(L){var V=l(E,O,z);return n8(V)?E+":"+O:V}else{var V=d(E,O,z);if(!n8(V))return V}}});return g};var EY=rC;(function(e,t){var i=zh,s=EY;function l(y,g){var x=new s(g);return x.process(y)}t=e.exports=l,t.FilterCSS=s;for(var d in i)t[d]=i[d]})(kf,kf.exports);var L6={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,l;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,l=e.length;s<l;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},AY=kf.exports.FilterCSS,kY=kf.exports.getDefaultWhiteList,Pg=L6;function sC(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var nC=new AY;function OY(e,t,i){}function CY(e,t,i){}function PY(e,t,i){}function NY(e,t,i){}function oC(e){return e.replace(jY,"&lt;").replace(LY,"&gt;")}function RY(e,t,i,s){if(i=pC(i),t==="href"||t==="src"){if(i=Pg.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(Q1.lastIndex=0,Q1.test(i))return""}else if(t==="style"){if(o8.lastIndex=0,o8.test(i)||(a8.lastIndex=0,a8.test(i)&&(Q1.lastIndex=0,Q1.test(i))))return"";s!==!1&&(s=s||nC,i=s.process(i))}return i=dC(i),i}var jY=/</g,LY=/>/g,FY=/"/g,DY=/&quot;/g,zY=/&#([a-zA-Z0-9]*);?/gim,VY=/&colon;?/gim,GY=/&newline;?/gim,Q1=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,o8=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,a8=/u\s*r\s*l\s*\(.*/gi;function aC(e){return e.replace(FY,"&quot;")}function lC(e){return e.replace(DY,'"')}function uC(e){return e.replace(zY,function(i,s){return s[0]==="x"||s[0]==="X"?String.fromCharCode(parseInt(s.substr(1),16)):String.fromCharCode(parseInt(s,10))})}function hC(e){return e.replace(VY,":").replace(GY," ")}function cC(e){for(var t="",i=0,s=e.length;i<s;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return Pg.trim(t)}function pC(e){return e=lC(e),e=uC(e),e=hC(e),e=cC(e),e}function dC(e){return e=aC(e),e=oC(e),e}function qY(){return""}function UY(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function s(y){return i?!0:Pg.indexOf(e,y)!==-1}var l=[],d=!1;return{onIgnoreTag:function(y,g,x){if(s(y))if(x.isClosing){var $="[/removed]",E=x.position+$.length;return l.push([d!==!1?d:x.position,E]),d=!1,$}else return d||(d=x.position),"[removed]";else return t(y,g,x)},remove:function(y){var g="",x=0;return Pg.forEach(l,function($){g+=y.slice(x,$[0]),x=$[1]}),g+=y.slice(x),g}}}function BY(e){for(var t="",i=0;i<e.length;){var s=e.indexOf("<!--",i);if(s===-1){t+=e.slice(i);break}t+=e.slice(i,s);var l=e.indexOf("-->",s);if(l===-1)break;i=l+3}return t}function HY(e){var t=e.split("");return t=t.filter(function(i){var s=i.charCodeAt(0);return s===127?!1:s<=31?s===10||s===13:!0}),t.join("")}oi.whiteList=sC();oi.getDefaultWhiteList=sC;oi.onTag=OY;oi.onIgnoreTag=CY;oi.onTagAttr=PY;oi.onIgnoreTagAttr=NY;oi.safeAttrValue=RY;oi.escapeHtml=oC;oi.escapeQuote=aC;oi.unescapeQuote=lC;oi.escapeHtmlEntities=uC;oi.escapeDangerHtml5Entities=hC;oi.clearNonPrintableCharacter=cC;oi.friendlyAttrValue=pC;oi.escapeAttrValue=dC;oi.onIgnoreTagStripAll=qY;oi.StripTagBody=UY;oi.stripCommentTag=BY;oi.stripBlankChar=HY;oi.cssFilter=nC;oi.getDefaultCSSWhiteList=kY;var e2={},cl=L6;function WY(e){var t=cl.spaceIndex(e);if(t===-1)var i=e.slice(1,-1);else var i=e.slice(1,t+1);return i=cl.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function JY(e){return e.slice(0,2)==="</"}function KY(e,t,i){var s="",l=0,d=!1,y=!1,g=0,x=e.length,$="",E="";e:for(g=0;g<x;g++){var O=e.charAt(g);if(d===!1){if(O==="<"){d=g;continue}}else if(y===!1){if(O==="<"){s+=i(e.slice(l,g)),d=g,l=g;continue}if(O===">"){s+=i(e.slice(l,d)),E=e.slice(d,g+1),$=WY(E),s+=t(d,s.length,$,E,JY(E)),l=g+1,d=!1;continue}if(O==='"'||O==="'")for(var P=1,R=e.charAt(g-P);R.trim()===""||R==="=";){if(R==="="){y=O;continue e}R=e.charAt(g-++P)}}else if(O===y){y=!1;continue}}return l<e.length&&(s+=i(e.substr(l))),s}var YY=/[^a-zA-Z0-9_:\.\-]/gim;function XY(e,t){var i=0,s=[],l=!1,d=e.length;function y(O,P){if(O=cl.trim(O),O=O.replace(YY,"").toLowerCase(),!(O.length<1)){var R=t(O,P||"");R&&s.push(R)}}for(var g=0;g<d;g++){var x=e.charAt(g),$,E;if(l===!1&&x==="="){l=e.slice(i,g),i=g+1;continue}if(l!==!1&&g===i&&(x==='"'||x==="'")&&e.charAt(g-1)==="="){if(E=e.indexOf(x,g+1),E===-1)break;$=cl.trim(e.slice(i+1,E)),y(l,$),l=!1,g=E,i=g+1;continue}if(/\s|\n|\t/.test(x))if(e=e.replace(/\s|\n|\t/g," "),l===!1)if(E=ZY(e,g),E===-1){$=cl.trim(e.slice(i,g)),y($),l=!1,i=g+1;continue}else{g=E-1;continue}else if(E=QY(e,g-1),E===-1){$=cl.trim(e.slice(i,g)),$=l8($),y(l,$),l=!1,i=g+1;continue}else continue}return i<e.length&&(l===!1?y(e.slice(i)):y(l,l8(cl.trim(e.slice(i))))),cl.trim(s.join(" "))}function ZY(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function QY(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function eX(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function l8(e){return eX(e)?e.substr(1,e.length-2):e}e2.parseTag=KY;e2.parseAttr=XY;var tX=kf.exports.FilterCSS,_n=oi,fC=e2,iX=fC.parseTag,rX=fC.parseAttr,wm=L6;function ey(e){return e==null}function sX(e){var t=wm.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=wm.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=wm.trim(e.slice(0,-1))),{html:e,closing:i}}function nX(e){var t={};for(var i in e)t[i]=e[i];return t}function yC(e){e=nX(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=_n.onIgnoreTagStripAll),e.whiteList=e.whiteList||e.allowList||_n.whiteList,e.onTag=e.onTag||_n.onTag,e.onTagAttr=e.onTagAttr||_n.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||_n.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||_n.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||_n.safeAttrValue,e.escapeHtml=e.escapeHtml||_n.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new tX(e.css))}yC.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,s=i.whiteList,l=i.onTag,d=i.onIgnoreTag,y=i.onTagAttr,g=i.onIgnoreTagAttr,x=i.safeAttrValue,$=i.escapeHtml,E=t.cssFilter;i.stripBlankChar&&(e=_n.stripBlankChar(e)),i.allowCommentTag||(e=_n.stripCommentTag(e));var O=!1;if(i.stripIgnoreTagBody){var O=_n.StripTagBody(i.stripIgnoreTagBody,d);d=O.onIgnoreTag}var P=iX(e,function(R,L,z,V,K){var ee={sourcePosition:R,position:L,isClosing:K,isWhite:s.hasOwnProperty(z)},se=l(z,V,ee);if(!ey(se))return se;if(ee.isWhite){if(ee.isClosing)return"</"+z+">";var oe=sX(V),ne=s[z],ae=rX(oe.html,function(Se,Pe){var Re=wm.indexOf(ne,Se)!==-1,De=y(z,Se,Pe,Re);if(!ey(De))return De;if(Re)return Pe=x(z,Se,Pe,E),Pe?Se+'="'+Pe+'"':Se;var De=g(z,Se,Pe,Re);return ey(De)?void 0:De}),V="<"+z;return ae&&(V+=" "+ae),oe.closing&&(V+=" /"),V+=">",V}else{var se=d(z,V,ee);return ey(se)?$(V):se}},$);return O&&(P=O.remove(P)),P};var oX=yC;(function(e,t){var i=oi,s=e2,l=oX;function d(x,$){var E=new l($);return E.process(x)}t=e.exports=d,t.filterXSS=d,t.FilterXSS=l;for(var y in i)t[y]=i[y];for(var y in s)t[y]=s[y];function g(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}g()&&(self.filterXSS=e.exports)})(Gu,Gu.exports);var aX=function(){function e(t,i){var s=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(d,y,g,x){return d==="a"&&y==="href"||(d==="img"||d==="source")&&y==="src"?s.sanitizeUrl(g):Gu.exports.safeAttrValue(d,y,g,x)}};var l;t&&!i?l=t:t&&i?(l=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(d){d==="whiteList"?l.whiteList=s._extendObjectOfArrays([s.arcgisWhiteList,t.whiteList||{}]):l[d]=t[d]})):(l=Object.create(this.arcgisFilterOptions),l.whiteList=this.arcgisWhiteList),this.xssFilterOptions=l,this._xssFilter=new Gu.exports.FilterXSS(l)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t=="undefined"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var s=(i!=null?i:{}).isProtocolRequired,l=s===void 0?!0:s,d=this._trim(t.substring(0,t.indexOf(":"))),y=t==="/",g=/^#/.test(t),x=d&&this.allowedProtocols.indexOf(d.toLowerCase())>-1;return y||g||x?Gu.exports.escapeAttrValue(t):!d&&!l?Gu.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,s,l){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,s,l):Gu.exports.safeAttrValue(t,i,s,l)},e.prototype.validate=function(t,i){i===void 0&&(i={});var s=this.sanitize(t,i);return{isValid:t===s,sanitized:s}},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(s){Object.keys(s).forEach(function(l){Array.isArray(s[l])&&Array.isArray(i[l])?i[l]=i[l].concat(s[l]):i[l]=s[l]})}),i},e.prototype._iterateOverObject=function(t,i){var s=this;i===void 0&&(i={});try{var l=!1,d=void 0;if(Array.isArray(t))d=t.reduce(function(g,x){var $=s.validate(x,i);return $.isValid?g.concat([x]):(l=!0,g.concat([$.sanitized]))},[]);else if(vY(t)){var y=Object.keys(t);d=y.reduce(function(g,x){var $=t[x],E=s.validate($,i);return E.isValid?g[x]=$:(l=!0,g[x]=E.sanitized),g},{})}else return i.allowUndefined&&typeof t=="undefined"?void 0:null;return l?d:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const t2=new Map;function mC(){t2.clear()}function lX(e){return t2.get(e)}function uX(e,t){t2.set(e,t)}function vw(e){t2.delete(e)}var Oh,Tp,hX=function(e){if("WebkitTransition"in e.style)Oh="webkitTransitionEnd",Tp="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");Oh="transitionend",Tp="animationend"}},gC=function(e){Oh||hX(e)},cX=function(e,t){return t===void 0&&(t=e+"-active"),function(i){gC(i);var s=!1,l=function(d){s||(s=!0,i.removeEventListener(Oh,l),i.removeEventListener(Tp,l),i.classList.remove(e),i.classList.remove(t))};i.classList.add(e),i.addEventListener(Oh,l),i.addEventListener(Tp,l),requestAnimationFrame(function(){i.classList.add(t)})}},pX=function(e,t){return t===void 0&&(t=e+"-active"),function(i,s){gC(i);var l=!1,d=function(y){l||(l=!0,i.removeEventListener(Oh,d),i.removeEventListener(Tp,d),s())};i.classList.add(e),i.addEventListener(Oh,d),i.addEventListener(Tp,d),requestAnimationFrame(function(){i.classList.add(t)})}};const dX=Me.getLogger("esri.widgets.support.widgetUtils");function vC(e){const t=Sr.acquire();for(let s=0;s<arguments.length;s++){const l=arguments[s],d=typeof l;if(d==="string")t.push(l);else if(Array.isArray(l))t.push.apply(t,l);else if(d==="object")for(const y in l)l[y]&&t.push(y)}const i=t.join(" ");return Sr.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(i=>{mC();for(const s of i)e.get(s.target)(s)});return(i,s,l)=>(e.has(i)&&dX.error("Already observing element",i),e.set(i,s),t.observe(i,l),Rp(()=>{t.unobserve(i),e.delete(i)}))})();function Sl(e){const t=e==null?void 0:e.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function u8(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function I_(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function fX(e,t){return(e==="enter"?cX:pX)(t)}const yX=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],mX=yX.reduce((e,t)=>(e[t]=[],e),{}),gX=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],wC=new aX({whiteList:mX,onTagAttr:(e,t,i)=>{const s=`${t}="${i}"`;if(gX.includes(t))return s},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function vX(e){return e==="Enter"||e===" "}const bC="http://www.w3.org/",i2=`${bC}2000/svg`,_C=`${bC}1999/xlink`;let Ng,h8=[],F6=(e,t)=>{let i={};return Object.keys(e).forEach(s=>{i[s]=e[s]}),t&&Object.keys(t).forEach(s=>{i[s]=t[s]}),i},D6=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),xC=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},wX=(e,t,i)=>{if(t.vnodeSelector!==""){for(let s=i;s<e.length;s++)if(D6(e[s],t))return s}return-1},ww=(e,t,i,s)=>{let l=e[t];if(l.vnodeSelector==="")return;let d=l.properties;if(!(d&&(d.key===void 0?d.bind:d.key))){for(let y=0;y<e.length;y++)if(y!==t){let g=e[y];if(D6(g,l))throw new Error(`${i.vnodeSelector} had a ${l.vnodeSelector} child ${s==="added"?s:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},bX=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},T_=[],E_=!1,SC=e=>{(e.children||[]).forEach(SC),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},c8=()=>{E_=!1,T_.forEach(SC),T_.length=0},p8=e=>{T_.push(e),E_||(E_=!0,typeof window!="undefined"&&"requestIdleCallback"in window?window.requestIdleCallback(c8,{timeout:16}):setTimeout(c8,16))},d8=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),p8(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),p8(e))},_X=(e,t,i)=>{if(!t)return;let s=i.eventHandlerInterceptor,l=Object.keys(t),d=l.length;for(let y=0;y<d;y++){let g=l[y],x=t[g];if(g==="className")throw new Error('Property "className" is not supported, use "class".');if(g==="class")A_(e,x,!0);else if(g==="classes"){let $=Object.keys(x),E=$.length;for(let O=0;O<E;O++){let P=$[O];x[P]&&e.classList.add(P)}}else if(g==="styles"){let $=Object.keys(x),E=$.length;for(let O=0;O<E;O++){let P=$[O],R=x[P];R&&(xC(R),i.styleApplyer(e,P,R))}}else if(g!=="key"&&x!=null){let $=typeof x;$==="function"?(g.lastIndexOf("on",0)===0&&(s&&(x=s(g,x,e,t)),g==="oninput"&&function(){let E=x;x=function(O){E.apply(this,[O]),O.target["oninput-value"]=O.target.value}}()),e[g]=x):i.namespace===i2?g==="href"?e.setAttributeNS(_C,g,x):e.setAttribute(g,x):$==="string"&&g!=="value"?g==="innerHTML"?e[g]=wC.sanitize(x):e.setAttribute(g,x):e[g]=x}}},xX=(e,t,i)=>{if(t)for(let s of t)Qc(s,e,void 0,i)},$C=(e,t,i)=>{xX(e,t.children,i),t.text&&(e.textContent=t.text),_X(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},Qc=(e,t,i,s)=>{let l,d=0,y=e.vnodeSelector,g=t.ownerDocument;if(y==="")l=e.domNode=g.createTextNode(e.text),i!==void 0?t.insertBefore(l,i):t.appendChild(l);else{for(let x=0;x<=y.length;++x){let $=y.charAt(x);if(x===y.length||$==="."||$==="#"){let E=y.charAt(d-1),O=y.slice(d,x);E==="."?l.classList.add(O):E==="#"?l.id=O:(O==="svg"&&(s=F6(s,{namespace:i2})),s.namespace!==void 0?l=e.domNode=g.createElementNS(s.namespace,O):(l=e.domNode=e.domNode||g.createElement(O),O==="input"&&e.properties&&e.properties.type!==void 0&&l.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(l,i):l.parentNode!==t&&t.appendChild(l)),d=x+1}}$C(l,e,s)}},A_=(e,t,i)=>{t&&t.split(" ").forEach(s=>{s&&e.classList.toggle(s,i)})},SX=(e,t,i,s)=>{if(!i)return;let l=!1,d=Object.keys(i),y=d.length;for(let g=0;g<y;g++){let x=d[g],$=i[x],E=t[x];if(x==="class")E!==$&&(A_(e,E,!1),A_(e,$,!0));else if(x==="classes"){let O=e.classList,P=Object.keys($),R=P.length;for(let L=0;L<R;L++){let z=P[L],V=!!$[z];V!==!!E[z]&&(l=!0,V?O.add(z):O.remove(z))}}else if(x==="styles"){let O=Object.keys($),P=O.length;for(let R=0;R<P;R++){let L=O[R],z=$[L];z!==E[L]&&(l=!0,z?(xC(z),s.styleApplyer(e,L,z)):s.styleApplyer(e,L,""))}}else if($||typeof E!="string"||($=""),x==="value"){let O=e[x];O!==$&&(e["oninput-value"]?O===e["oninput-value"]:$!==E)&&(e[x]=$,e["oninput-value"]=void 0),$!==E&&(l=!0)}else if($!==E){let O=typeof $;O==="function"&&s.eventHandlerInterceptor||(s.namespace===i2?x==="href"?e.setAttributeNS(_C,x,$):e.setAttribute(x,$):O==="string"?x==="innerHTML"?e[x]=wC.sanitize($):x==="role"&&$===""?e.removeAttribute(x):e.setAttribute(x,$):e[x]!==$&&(e[x]=$),l=!0)}}return l},$X=(e,t,i,s,l)=>{if(i===s)return!1;s=s||h8;let d,y=(i=i||h8).length,g=s.length,x=0,$=0,E=!1;for(;$<g;){let O=x<y?i[x]:void 0,P=s[$];if(O!==void 0&&D6(O,P))E=Ng(O,P,l)||E,x++;else{let R=wX(i,P,x+1);if(R>=0){for(d=x;d<R;d++)d8(i[d]),ww(i,d,e,"removed");E=Ng(i[R],P,l)||E,x=R+1}else Qc(P,t,x<y?i[x].domNode:void 0,l),bX(P),ww(s,$,e,"added")}$++}if(y>x)for(d=x;d<y;d++)d8(i[d]),ww(i,d,e,"removed");return E};Ng=(e,t,i)=>{let s=e.domNode,l=!1;if(e===t)return!1;let d=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let y=s.ownerDocument.createTextNode(t.text);return s.parentNode.replaceChild(y,s),t.domNode=y,l=!0,l}t.domNode=s}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=F6(i,{namespace:i2})),e.text!==t.text&&(d=!0,t.text===void 0?s.removeChild(s.firstChild):s.textContent=t.text),t.domNode=s,d=$X(t,s,e.children,t.children,i)||d,d=SX(s,e.properties,t.properties,i)||d,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[s,i,t.vnodeSelector,t.properties,t.children]);return d&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(s,t.properties,e.properties),l};let wd=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let s=e;e=i,Ng(s,i,t)},domNode:e.domNode});const MX={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let mc=e=>F6(MX,e),$l={create:(e,t)=>(t=mc(t),Qc(e,document.createElement("div"),void 0,t),wd(e,t)),append:(e,t,i)=>(i=mc(i),Qc(t,e,void 0,i),wd(t,i)),insertBefore:(e,t,i)=>(i=mc(i),Qc(t,e.parentNode,e,i),wd(t,i)),merge:(e,t,i)=>(i=mc(i),t.domNode=e,$C(e,t,i),wd(t,i)),replace:(e,t,i)=>(i=mc(i),Qc(t,e.parentNode,e,i),e.parentNode.removeChild(e),wd(t,i))},MC,IX=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};MC=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let TX=(e,t)=>{let i=e;return t.forEach(s=>{i=i&&i.children?MC(i.children,l=>l.domNode===s):void 0}),i},EX=(e,t,i)=>{let s=function(l){i("domEvent",l);let d=t(),y=IX(l.currentTarget,d.domNode);y.reverse();let g,x=TX(d.getLastRender(),y);return e.scheduleRender(),x&&(g=x.properties[`on${l.type}`].apply(x.properties.bind||this,arguments)),i("domEventProcessed",l),g};return(l,d,y,g)=>s},k_=e=>{let t,i,s=mc(e),l=s.performanceLogger,d=!0,y=!1,g=[],x=[],$=(O,P,R)=>{let L,z=()=>L;s.eventHandlerInterceptor=EX(t,z,l),L=O(P,R(),s),g.push(L),x.push(R)},E=()=>{if(i=void 0,d){d=!1,l("renderStart",void 0);for(let O=0;O<g.length;O++){let P=x[O]();l("rendered",void 0),g[O].update(P),l("patched",void 0)}l("renderDone",void 0),d=!0}};return t={renderNow:E,scheduleRender:()=>{i||y||(i=requestAnimationFrame(E))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),y=!0},resume:()=>{y=!1,d=!0,t.scheduleRender()},append:(O,P)=>{$($l.append,O,P)},insertBefore:(O,P)=>{$($l.insertBefore,O,P)},merge:(O,P)=>{$($l.merge,O,P)},replace:(O,P)=>{$($l.replace,O,P)},detach:O=>{for(let P=0;P<x.length;P++)if(x[P]===O)return x.splice(P,1),g.splice(P,1)[0];throw new Error("renderFunction was not found")}},t},Ka=class extends ze{constructor(){super(...arguments),this.items=new Ge,this._watchUpdatingTracking=new up,this._callbacks=new Map,this._projector=k_(),this._hiddenProjector=k_()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const i of t.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of t.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,i=this._hiddenProjector;let s=null;const l=()=>(s=e.render(),s);i.append(t,l),i.renderNow();const d={left:0,top:0,right:0,bottom:0};if(s&&s.domNode){const y=s.domNode.getBoundingClientRect();d.left=y.left,d.top=y.top,d.right=y.right,d.bottom=y.bottom}for(i.detach(l);t.firstChild;)t.removeChild(t.firstChild);return d}overlaps(e,t){const i=this.computeBoundingRect(e),s=this.computeBoundingRect(t);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(i=>i.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(i=>{t.save(),i.renderCanvas(t),t.restore()}),t.restore()}};v([_({readOnly:!0})],Ka.prototype,"surface",void 0),v([_({readOnly:!0})],Ka.prototype,"items",void 0),v([_({readOnly:!0})],Ka.prototype,"needsRender",null),v([_({readOnly:!0})],Ka.prototype,"_watchUpdatingTracking",void 0),v([_({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],Ka.prototype,"updating",void 0),Ka=v([H("esri.views.overlay.ViewOverlay")],Ka);const f8=Ka;function z6(e,t,i,s){let l=null,d=1e3;typeof t=="number"?(d=t,s=i):(l=t!=null?t:null,d=i);let y,g=0;const x=()=>{g=0,e.apply(s,y)},$=(...E)=>{l&&l.apply(s,E),y=E,d?g||(g=setTimeout(x,d)):x()};return $.remove=()=>{g&&(clearTimeout(g),g=0)},$.forceUpdate=()=>{g&&(clearTimeout(g),x())},$.hasPendingUpdates=()=>!!g,$}const AX="randomUUID"in crypto;function kX(){if(AX)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const OX={handleInterceptedEvent:(e,t,i,s)=>(e.scheduleRender(),t.properties[`on${s.type}`].apply(t.properties.bind||i,[s]))},CX={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{e.style[t]=i}},PX=e=>({...CX,...e}),NX=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},RX=(e,t)=>e.find(t),y8=(e,t,i=!1)=>{let s=e;return t.forEach((l,d)=>{const y=s!=null&&s.children?RX(s.children,g=>g.domNode===l):void 0;i&&!y&&d!==t.length-1||(s=y)}),s},jX=e=>{let t;const i={...OX,...e},s=PX(i),l=s.performanceLogger;let d,y=!0,g=!1;const x=[],$=[],E=(P,R,L)=>{var K;let z;s.eventHandlerInterceptor=(ee,se,oe,ne)=>function(ae){let Ie;l("domEvent",ae);const Se=NX(ae.currentTarget,z.domNode),Pe=Se.some(De=>{var Le;return customElements.get((Le=De==null?void 0:De.tagName)==null?void 0:Le.toLowerCase())});if(ae.eventPhase===Event.CAPTURING_PHASE||!Pe)Se.reverse(),Ie=y8(z.getLastRender(),Se);else{const De=ae.composedPath(),Le=De.slice(De.indexOf(ae.currentTarget),De.indexOf(z.domNode)).filter(qe=>qe.getRootNode()===qe.ownerDocument).reverse();Ie=y8(z.getLastRender(),Le,!0)}let Re;return Ie&&(Re=i.handleInterceptedEvent(t,Ie,this,ae)),l("domEventProcessed",ae),Re},(K=i.postProcessProjectionOptions)==null||K.call(i,s);const V=L();z=P(R,V,s),x.push(z),$.push(L),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(z,V)};let O=()=>{if(d=void 0,y){y=!1,l("renderStart",void 0);for(let P=0;P<x.length;P++){const R=$[P]();l("rendered",void 0),x[P].update(R),l("patched",void 0)}l("renderDone",void 0),y=!0}};return i.modifyDoRenderImplementation&&(O=i.modifyDoRenderImplementation(O,x,$)),t={renderNow:O,scheduleRender:()=>{d||g||(d=requestAnimationFrame(O))},stop:()=>{d&&(cancelAnimationFrame(d),d=void 0),g=!0},resume:()=>{g=!1,y=!0,t.scheduleRender()},append:(P,R)=>{E($l.append,P,R)},insertBefore:(P,R)=>{E($l.insertBefore,P,R)},merge:(P,R)=>{E($l.merge,P,R)},replace:(P,R)=>{E($l.replace,P,R)},detach:P=>{for(let R=0;R<$.length;R++)if($[R]===P)return $.splice(R,1),x.splice(R,1)[0];throw new Error("renderFunction was not found")}},t},ht={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let gc,IC,r2,TC=!1,Rg=!1,V6=!1,ls=!1,m8=null,O_=!1;const Xp=typeof window!="undefined"?window:{};ht.cssVarShim&&Xp.CSS;const Cn=Xp.document||{head:{}},Y0e=Xp.HTMLElement||class{},Qi={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,s)=>e.addEventListener(t,i,s),rel:(e,t,i,s)=>e.removeEventListener(t,i,s),ce:(e,t)=>new CustomEvent(e,t)},jg=ht.shadowDomShim&&ht.shadowDom?(()=>(Cn.head.attachShadow+"").indexOf("[native")>-1)():!0,LX=(()=>{let e=!1;try{Cn.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),FX=e=>Promise.resolve(e),DX=ht.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,EC=(e,t,i,s)=>{i&&i.map(([l,d,y])=>{const g=VX(e,l),x=zX(t,y),$=GX(l);Qi.ael(g,d,x,$),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Qi.rel(g,d,x,$))})},zX=(e,t)=>i=>{try{ht.lazyLoad||e.$hostElement$[t](i)}catch(s){a1(s)}},VX=(e,t)=>t&4?Cn:t&8?Xp:t&16?Cn.body:e,GX=e=>LX?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,g8="http://www.w3.org/1999/xlink",Ch=(e,t="")=>()=>{},v8=new WeakMap,qX=(e,t,i)=>{let s=Dg.get(e);DX&&i?(s=s||new CSSStyleSheet,s.replace(t)):s=t,Dg.set(e,s)},UX=(e,t,i,s)=>{let l=AC(t,i),d=Dg.get(l);if(e=e.nodeType===11?e:Cn,d)if(typeof d=="string"){e=e.head||e;let y=v8.get(e),g;y||v8.set(e,y=new Set),y.has(l)||(g=Cn.createElement("style"),g.innerHTML=d,e.insertBefore(g,e.querySelector("link")),y&&y.add(l))}else e.adoptedStyleSheets.includes(d)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,d]);return l},BX=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,s=t.$flags$,l=Ch("attachStyles",t.$tagName$),d=UX(jg&&i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);s&10&&(i["s-sc"]=d,i.classList.add(d+"-h"),s&2&&i.classList.add(d+"-s")),l()},AC=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),HX=e=>xZ.map(t=>t(e)).find(t=>!!t),w8={},WX="http://www.w3.org/2000/svg",JX="http://www.w3.org/1999/xhtml",KX=e=>e!=null,G6=e=>(e=typeof e,e==="object"||e==="function"),kC=(e,t,...i)=>{let s=null,l=null,d=null,y=!1,g=!1,x=[];const $=O=>{for(let P=0;P<O.length;P++)s=O[P],Array.isArray(s)?$(s):s!=null&&typeof s!="boolean"&&((y=typeof e!="function"&&!G6(s))&&(s=String(s)),y&&g?x[x.length-1].$text$+=s:x.push(y?Lg(null,s):s),g=y)};if($(i),t&&(ht.isDev&&e==="input"&&QX(t),ht.vdomKey&&t.key&&(l=t.key),ht.slotRelocation&&t.name&&(d=t.name),ht.vdomClass)){const O=t.className||t.class;O&&(t.class=typeof O!="object"?O:Object.keys(O).filter(P=>O[P]).join(" "))}if(ht.isDev&&x.some(OC)&&_Z(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),ht.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,x,XX);const E=Lg(e,null);return E.$attrs$=t,x.length>0&&(E.$children$=x),ht.vdomKey&&(E.$key$=l),ht.slotRelocation&&(E.$name$=d),E},Lg=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return ht.vdomAttribute&&(i.$attrs$=null),ht.vdomKey&&(i.$key$=null),ht.slotRelocation&&(i.$name$=null),i},YX={},OC=e=>e&&e.$tag$===YX,XX={forEach:(e,t)=>e.map(b8).forEach(t),map:(e,t)=>e.map(b8).map(t).map(ZX)},b8=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),ZX=e=>{if(typeof e.vtag=="function"){const i=Object.assign({},e.vattrs);return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),kC(e.vtag,i,...e.vchildren||[])}const t=Lg(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},QX=e=>{const t=Object.keys(e),i=t.indexOf("value");if(i===-1)return;const s=t.indexOf("type"),l=t.indexOf("min"),d=t.indexOf("max"),y=t.indexOf("step");(i<s||i<l||i<d||i<y)&&VC('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},_8=(e,t,i,s,l,d)=>{if(i!==s){let y=M8(e,t),g=t.toLowerCase();if(t==="class"){const x=e.classList,$=x8(i),E=x8(s);x.remove(...$.filter(O=>O&&!E.includes(O))),x.add(...E.filter(O=>O&&!$.includes(O)))}else if(t==="style"){for(const x in i)(!s||s[x]==null)&&(x.includes("-")?e.style.removeProperty(x):e.style[x]="");for(const x in s)(!i||s[x]!==i[x])&&(x.includes("-")?e.style.setProperty(x,s[x]):e.style[x]=s[x])}else if(t!=="key")if(t==="ref")s&&s(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):M8(Xp,g)?t=g.slice(2):t=g[2]+t.slice(3),i&&Qi.rel(e,t,i,!1),s&&Qi.ael(e,t,s,!1);else{const x=G6(s);if((y||x&&s!==null)&&!l)try{if(e.tagName.includes("-"))e[t]=s;else{let E=s==null?"":s;t==="list"?y=!1:(i==null||e[t]!=E)&&(e[t]=E)}}catch{}let $=!1;g!==(g=g.replace(/^xlink\:?/,""))&&(t=g,$=!0),s==null||s===!1?(s!==!1||e.getAttribute(t)==="")&&($?e.removeAttributeNS(g8,t):e.removeAttribute(t)):(!y||d&4||l)&&!x&&(s=s===!0?"":s,$?e.setAttributeNS(g8,t,s):e.setAttribute(t,s))}}},eZ=/\s/,x8=e=>e?e.split(eZ):[],CC=(e,t,i,s)=>{const l=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,d=e&&e.$attrs$||w8,y=t.$attrs$||w8;for(s in d)s in y||_8(l,s,d[s],void 0,i,t.$flags$);for(s in y)_8(l,s,d[s],y[s],i,t.$flags$)},Fg=(e,t,i,s)=>{let l=t.$children$[i],d=0,y,g,x;if(TC||(V6=!0,l.$tag$==="slot"&&(gc&&s.classList.add(gc+"-s"),l.$flags$|=l.$children$?2:1)),l.$text$!==null)y=l.$elm$=Cn.createTextNode(l.$text$);else if(l.$flags$&1)y=l.$elm$=Cn.createTextNode("");else{if(ls||(ls=l.$tag$==="svg"),y=l.$elm$=Cn.createElementNS(ls?WX:JX,l.$flags$&2?"slot-fb":l.$tag$),ls&&l.$tag$==="foreignObject"&&(ls=!1),CC(null,l,ls),KX(gc)&&y["s-si"]!==gc&&y.classList.add(y["s-si"]=gc),l.$children$)for(d=0;d<l.$children$.length;++d)g=Fg(e,l,d,y),g&&y.appendChild(g);l.$tag$==="svg"?ls=!1:y.tagName==="foreignObject"&&(ls=!0)}return y["s-hn"]=r2,l.$flags$&3&&(y["s-sr"]=!0,y["s-cr"]=IC,y["s-sn"]=l.$name$||"",x=e&&e.$children$&&e.$children$[i],x&&x.$tag$===l.$tag$&&e.$elm$&&Of(e.$elm$,!1)),y},Of=(e,t)=>{Qi.$flags$|=1;const i=e.childNodes;for(let s=i.length-1;s>=0;s--){const l=i[s];l["s-hn"]!==r2&&l["s-ol"]&&(RC(l).insertBefore(l,q6(l)),l["s-ol"].remove(),l["s-ol"]=void 0,V6=!0),t&&Of(l,t)}Qi.$flags$&=-2},PC=(e,t,i,s,l,d)=>{let y=e["s-cr"]&&e["s-cr"].parentNode||e,g;for(y.shadowRoot&&y.tagName===r2&&(y=y.shadowRoot);l<=d;++l)s[l]&&(g=Fg(null,i,l,e),g&&(s[l].$elm$=g,y.insertBefore(g,q6(t))))},NC=(e,t,i,s,l)=>{for(;t<=i;++t)(s=e[t])&&(l=s.$elm$,FC(s),Rg=!0,l["s-ol"]?l["s-ol"].remove():Of(l,!0),l.remove())},tZ=(e,t,i,s)=>{let l=0,d=0,y=0,g=0,x=t.length-1,$=t[0],E=t[x],O=s.length-1,P=s[0],R=s[O],L,z;for(;l<=x&&d<=O;)if($==null)$=t[++l];else if(E==null)E=t[--x];else if(P==null)P=s[++d];else if(R==null)R=s[--O];else if(ty($,P))vc($,P),$=t[++l],P=s[++d];else if(ty(E,R))vc(E,R),E=t[--x],R=s[--O];else if(ty($,R))($.$tag$==="slot"||R.$tag$==="slot")&&Of($.$elm$.parentNode,!1),vc($,R),e.insertBefore($.$elm$,E.$elm$.nextSibling),$=t[++l],R=s[--O];else if(ty(E,P))($.$tag$==="slot"||R.$tag$==="slot")&&Of(E.$elm$.parentNode,!1),vc(E,P),e.insertBefore(E.$elm$,$.$elm$),E=t[--x],P=s[++d];else{for(y=-1,g=l;g<=x;++g)if(t[g]&&t[g].$key$!==null&&t[g].$key$===P.$key$){y=g;break}y>=0?(z=t[y],z.$tag$!==P.$tag$?L=Fg(t&&t[d],i,y,e):(vc(z,P),t[y]=void 0,L=z.$elm$),P=s[++d]):(L=Fg(t&&t[d],i,d,e),P=s[++d]),L&&RC($.$elm$).insertBefore(L,q6($.$elm$))}l>x?PC(e,s[O+1]==null?null:s[O+1].$elm$,i,s,d,O):d>O&&NC(t,l,x)},ty=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,q6=e=>e&&e["s-ol"]||e,RC=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,vc=(e,t)=>{const i=t.$elm$=e.$elm$,s=e.$children$,l=t.$children$,d=t.$tag$,y=t.$text$;let g;y===null?(ls=d==="svg"?!0:d==="foreignObject"?!1:ls,d==="slot"||CC(e,t,ls),s!==null&&l!==null?tZ(i,s,t,l):l!==null?(e.$text$!==null&&(i.textContent=""),PC(i,null,t,l,0,l.length-1)):s!==null&&NC(s,0,s.length-1),ls&&d==="svg"&&(ls=!1)):(g=i["s-cr"])?g.parentNode.textContent=y:e.$text$!==y&&(i.data=y)},jC=e=>{let t=e.childNodes,i,s,l,d,y,g;for(s=0,l=t.length;s<l;s++)if(i=t[s],i.nodeType===1){if(i["s-sr"]){for(y=i["s-sn"],i.hidden=!1,d=0;d<l;d++)if(g=t[d].nodeType,t[d]["s-hn"]!==i["s-hn"]||y!==""){if(g===1&&y===t[d].getAttribute("slot")){i.hidden=!0;break}}else if(g===1||g===3&&t[d].textContent.trim()!==""){i.hidden=!0;break}}jC(i)}},In=[],LC=e=>{let t,i,s,l,d,y,g=0,x=e.childNodes,$=x.length;for(;g<$;g++){if(t=x[g],t["s-sr"]&&(i=t["s-cr"])&&i.parentNode)for(s=i.parentNode.childNodes,l=t["s-sn"],y=s.length-1;y>=0;y--)i=s[y],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==t["s-hn"]&&(S8(i,l)?(d=In.find(E=>E.$nodeToRelocate$===i),Rg=!0,i["s-sn"]=i["s-sn"]||l,d?d.$slotRefNode$=t:In.push({$slotRefNode$:t,$nodeToRelocate$:i}),i["s-sr"]&&In.map(E=>{S8(E.$nodeToRelocate$,i["s-sn"])&&(d=In.find(O=>O.$nodeToRelocate$===i),d&&!E.$slotRefNode$&&(E.$slotRefNode$=d.$slotRefNode$))})):In.some(E=>E.$nodeToRelocate$===i)||In.push({$nodeToRelocate$:i}));t.nodeType===1&&LC(t)}},S8=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",FC=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(FC)},iZ=(e,t)=>{const i=e.$hostElement$,s=e.$cmpMeta$,l=e.$vnode$||Lg(null,null),d=OC(t)?t:kC(null,null,t);r2=i.tagName,s.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},s.$attrsToReflect$.map(([y,g])=>d.$attrs$[g]=i[y])),d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=l.$elm$=i.shadowRoot||i,gc=i["s-sc"],IC=i["s-cr"],TC=jg&&(s.$flags$&1)!==0,Rg=!1,vc(l,d);{if(Qi.$flags$|=1,V6){LC(d.$elm$);let y,g,x,$,E,O,P=0;for(;P<In.length;P++)y=In[P],g=y.$nodeToRelocate$,g["s-ol"]||(x=Cn.createTextNode(""),x["s-nr"]=g,g.parentNode.insertBefore(g["s-ol"]=x,g));for(P=0;P<In.length;P++)if(y=In[P],g=y.$nodeToRelocate$,y.$slotRefNode$){for($=y.$slotRefNode$.parentNode,E=y.$slotRefNode$.nextSibling,x=g["s-ol"];x=x.previousSibling;)if(O=x["s-nr"],O&&O["s-sn"]===g["s-sn"]&&$===O.parentNode&&(O=O.nextSibling,!O||!O["s-nr"])){E=O;break}(!E&&$!==g.parentNode||g.nextSibling!==E)&&g!==E&&(!g["s-hn"]&&g["s-ol"]&&(g["s-hn"]=g["s-ol"].parentNode.nodeName),$.insertBefore(g,E))}else g.nodeType===1&&(g.hidden=!0)}Rg&&jC(d.$elm$),Qi.$flags$&=-2,In.length=0}},rZ=e=>ht.lazyLoad?Zp(e).$hostElement$:e,X0e=(e,t,i)=>{const s=rZ(e);return{emit:l=>(ht.isDev&&!s.isConnected&&VC(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),sZ(s,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:l}))}},sZ=(e,t,i)=>{const s=Qi.ce(t,i);return e.dispatchEvent(s),s},nZ=(e,t)=>{},U6=(e,t)=>(e.$flags$|=16,nZ(e,e.$ancestorComponent$),MZ(()=>oZ(e,t))),oZ=(e,t)=>{const i=e.$hostElement$,s=Ch("scheduleUpdate",e.$cmpMeta$.$tagName$),l=i;let d;return t?d=pp(l,"componentWillLoad"):d=pp(l,"componentWillUpdate"),d=$8(d,()=>pp(l,"componentWillRender")),s(),$8(d,()=>aZ(e,l,t))},aZ=async(e,t,i)=>{const s=e.$hostElement$,l=Ch("update",e.$cmpMeta$.$tagName$);s["s-rc"],i&&BX(e);const d=Ch("render",e.$cmpMeta$.$tagName$);lZ(e,t,s),d(),l(),uZ(e)},lZ=(e,t,i)=>{try{m8=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(ht.hasRenderFn||ht.reflect)&&(ht.vdomRender||ht.reflect)&&(ht.hydrateServerSide||iZ(e,t))}catch(g){a1(g,e.$hostElement$)}return m8=null,null},uZ=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,s=Ch("postUpdate",t),l=i;e.$ancestorComponent$,pp(l,"componentDidRender"),e.$flags$&64?(pp(l,"componentDidUpdate"),s()):(e.$flags$|=64,pp(l,"componentDidLoad"),s())},Z0e=e=>{if(ht.updatable){const t=Zp(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&U6(t,!1),i}return!1},pp=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(s){a1(s)}},$8=(e,t)=>e&&e.then?e.then(t):t(),hZ=(e,t)=>e!=null&&!G6(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,cZ=(e,t)=>Zp(e).$instanceValues$.get(t),pZ=(e,t,i,s)=>{const l=Zp(e),d=e,y=l.$instanceValues$.get(t),g=l.$flags$,x=d;i=hZ(i,s.$members$[t][0]);const $=Number.isNaN(y)&&Number.isNaN(i);if(i!==y&&!$){l.$instanceValues$.set(t,i);{if(s.$watchers$&&g&128){const O=s.$watchers$[t];O&&O.map(P=>{try{x[P](i,y,t)}catch(R){a1(R,d)}})}if((g&18)===2){if(x.componentShouldUpdate&&x.componentShouldUpdate(i,y,t)===!1)return;U6(l,!1)}}}},dZ=(e,t,i)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$),l=e.prototype;s.map(([d,[y]])=>{(y&31||y&32)&&Object.defineProperty(l,d,{get(){return cZ(this,d)},set(g){pZ(this,d,g,t)},configurable:!0,enumerable:!0})});{const d=new Map;l.attributeChangedCallback=function(y,g,x){Qi.jmp(()=>{const $=d.get(y);if(this.hasOwnProperty($))x=this[$],delete this[$];else if(l.hasOwnProperty($)&&typeof this[$]=="number"&&this[$]==x)return;this[$]=x===null&&typeof this[$]=="boolean"?!1:x})},e.observedAttributes=s.filter(([y,g])=>g[0]&15).map(([y,g])=>{const x=g[1]||y;return d.set(x,y),g[0]&512&&t.$attrsToReflect$.push([y,x]),x})}}return e},fZ=async(e,t,i,s,l)=>{if((t.$flags$&32)===0&&(l=e.constructor,t.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>t.$flags$|=128),l.style)){let y=l.style;typeof y!="string"&&(y=y[t.$modeName$=HX(e)]);const g=AC(i,t.$modeName$);if(!Dg.has(g)){const x=Ch("registerStyles",i.$tagName$);qX(g,y,!!(i.$flags$&1)),x()}}t.$ancestorComponent$,(()=>U6(t,!0))()},yZ=e=>{},mZ=e=>{if((Qi.$flags$&1)===0){const t=Zp(e),i=t.$cmpMeta$,s=Ch("connectedCallback",i.$tagName$);t.$flags$&1?(EC(e,t,i.$listeners$),yZ(t.$lazyInstance$)):(t.$flags$|=1,i.$flags$&12&&gZ(e),i.$members$&&Object.entries(i.$members$).map(([l,[d]])=>{if(d&31&&e.hasOwnProperty(l)){const y=e[l];delete e[l],e[l]=y}}),fZ(e,t,i)),s()}},gZ=e=>{const t=e["s-cr"]=Cn.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},vZ=e=>{if((Qi.$flags$&1)===0){const t=Zp(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},Q0e=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};ht.member&&(i.$members$=t[2]),ht.hostListener&&(i.$listeners$=t[3]),ht.watchCallback&&(i.$watchers$=e.$watchers$),ht.reflect&&(i.$attrsToReflect$=[]),ht.shadowDom&&!jg&&i.$flags$&1&&(i.$flags$|=8);const s=e.prototype.connectedCallback,l=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){bZ(this,i)},connectedCallback(){mZ(this),ht.connectedCallback&&s&&s.call(this)},disconnectedCallback(){vZ(this),ht.disconnectedCallback&&l&&l.call(this)},__attachShadow(){jg?ht.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=i.$tagName$,dZ(e,i)},efe=e=>{const t=new URL(e,Qi.$resourcesUrl$);return t.origin!==Xp.location.origin?t.href:t.pathname},wZ=e=>Qi.$resourcesUrl$=e,DC=new WeakMap,Zp=e=>DC.get(e),bZ=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return ht.isDev&&(i.$renderCount$=0),ht.method&&ht.lazyLoad&&(i.$onInstancePromise$=new Promise(s=>i.$onInstanceResolve$=s)),ht.asyncLoading&&(i.$onReadyPromise$=new Promise(s=>i.$onReadyResolve$=s),e["s-p"]=[],e["s-rc"]=[]),EC(e,i,t.$listeners$),DC.set(e,i)},M8=(e,t)=>t in e,a1=(e,t)=>(0,console.error)(e,t),zC=ht.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],_Z=(...e)=>console.error(...zC,...e),VC=(...e)=>console.warn(...zC,...e),Dg=new Map,xZ=[],I8=[],GC=[],SZ=(e,t)=>i=>{e.push(i),O_||(O_=!0,t&&Qi.$flags$&4?$Z(C_):Qi.raf(C_))},T8=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){a1(i)}e.length=0},C_=()=>{T8(I8),T8(GC),(O_=I8.length>0)&&Qi.raf(C_)},$Z=e=>FX().then(e),MZ=SZ(GC,!0),tfe={isDev:!!ht.isDev,isBrowser:!0,isServer:!1,isTesting:!!ht.isTesting};let qC;function IZ(){wZ(cs($t(qC)))}qC="components/assets";const UC=Symbol("widget"),TZ=[],EZ={},zg=new WeakMap;function BC(e,t){let i=t.children;if(i&&i.length)for(let l=0;l<i.length;++l)i[l]=BC(e,i[l]);else i=TZ;const s=t.vnodeSelector;if(B6(s)){const l=t.properties||EZ,d=l.key||s;return{vnodeSelector:"div",properties:{key:d,afterCreate:AZ,afterUpdate:kZ,afterRemoved:HC,parentWidget:e,widgetConstructor:s,widgetProperties:{...l,key:d,children:i}},children:void 0,text:void 0,domNode:null}}return t}function AZ(e,t,i,{parentWidget:s,widgetConstructor:l,widgetProperties:d}){var g;const y=new l(d);y.container=e,zg.set(e,y),(g=y.afterCreate)==null||g.call(y,y,e),s._internalHandles.add(Rp(()=>HC(e)))}function kZ(e,t,i,{widgetProperties:s}){var d;const l=zg.get(e);l&&(l.set(s),(d=l.afterUpdate)==null||d.call(l,l,e))}function HC(e){const t=zg.get(e);t&&(t.destroy(),zg.delete(e))}function B6(e){return typeof e=="function"&&e[UC]}const E8=new Set;function OZ(e){E8.add(e),e.finally(()=>E8.delete(e))}const WC="esri.widgets.Widget",CZ=Me.getLogger(WC);let PZ=0;const NZ={widgetIcon:"esri-icon-checkbox-unchecked"};function JC(e,t){for(const i in t)e[i]!=null&&(typeof e[i]=="object"&&typeof t[i]=="object"?JC(e[i],t[i]):e[i]=t[i]);return e}const RZ=jX({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(s,l,d,y)=>{const g=t(s,l,d,y),x=i.test(s);if(!((s=s.replace(i,"")).toLowerCase()in d)||x){const $=s[2].toLowerCase()+s.slice(3),E=R=>g.call(d,R);d.addEventListener($,E,x);const O=()=>d.removeEventListener($,E,x),P=y.afterRemoved;y.afterRemoved=R=>{P==null||P(R),O()}}return g}},handleInterceptedEvent(e,t,i,s){const{eventPhase:l,type:d}=s,y=l===Event.CAPTURING_PHASE;let g=`on${d}${y?"capture":""}`;const x=t.properties;(g in x||(g=`on${d[0].toUpperCase()}${d.slice(1)}${y?"Capture":""}`,g in x))&&(mC(),e.scheduleRender(),x[g].call(x.bind||i,s))}});let bw=!1,$i=class extends Kf(Fl.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new Or,this._projector=RZ,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=NZ.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=xv(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const d=await qi(this._messageBundleProps.map(async({bundlePath:y,propertyName:g})=>{let x=await Gk(y);this.uiStrings&&Object.keys(this.uiStrings)&&(x=JC(ie(x),this.uiStrings)),this[g]=x}));for(const y of d)y.error&&CZ.error("widget-intl:locale-error",this.declaredClass,y.error)}await this.loadLocale()}),IZ();const i="esri-widget-uid-"+kX(),s=this.render.bind(this);this._trackingTarget=new Sv(()=>this.scheduleRender());const l=()=>{var E;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:i,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const d=s();let{properties:y}=d;y||(d.properties=y={});let{key:g,styles:x}=y;g||(y.key=i),x||(y.styles=x={}),x.display||(x.display="");let $=0;return(E=d.children)==null||E.forEach(O=>{if(B6(O.vnodeSelector))return;let{properties:P}=O;P||(O.properties=P={}),P.key||(P.key=`${this.id}--${$++}`)}),BC(this,d)};this.render=()=>{if(bw)return l();let d=lX(this);if(d)return d;this._trackingTarget.clear(),bw=!0;try{d=la(this._trackingTarget,l)}catch(y){throw console.error(y),y}finally{bw=!1}return uX(this,d),d},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),OZ(this._resourcesFetch)}normalizeCtorArgs(e,t){const i={...e};return t&&(i.container=t),i}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(Cb)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(Vs(this._trackingTarget),Vs(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,vw(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return j6(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+PZ++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(vw(this),this._projector.scheduleRender())}classes(...e){return vC.apply(this,e)}renderNow(){vw(this),this._projector.renderNow()}_postInitialize(){var t;if(this.destroyed)return;this.scheduleRender(),(t=this._delegatedEventNames)!=null&&t.length&&this._internalHandles.add(Te(()=>this.viewModel,(i,s)=>{s&&this._internalHandles.remove("delegated-events"),i&&wv(i)&&this._internalHandles.add(this._delegatedEventNames.map(l=>bv(i,l,d=>{this.emit(l,d)})),"delegated-events")},Ot)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Cb),this.scheduleRender()};this._internalHandles.add([Nz(e),Te(()=>this.uiStrings,e),Ws(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};$i[UC]=!0,v([_()],$i.prototype,"_readyForTrueRender",void 0),v([_({value:null})],$i.prototype,"container",null),v([mt("container")],$i.prototype,"castContainer",null),v([_({aliasOf:"container"})],$i.prototype,"domNode",void 0),v([_()],$i.prototype,"iconClass",void 0),v([_()],$i.prototype,"id",null),v([_()],$i.prototype,"label",void 0),v([_()],$i.prototype,"renderable",null),v([_()],$i.prototype,"uiStrings",void 0),v([_()],$i.prototype,"viewModel",void 0),v([_()],$i.prototype,"visible",void 0),v([_()],$i.prototype,"key",void 0),v([_()],$i.prototype,"children",void 0),v([_()],$i.prototype,"afterCreate",void 0),v([_()],$i.prototype,"afterUpdate",void 0),v([_()],$i.prototype,"afterRemoved",void 0),$i=v([H(WC)],$i);const Cr=$i;function jZ(e){return 32+e.length}function LZ(){return 16}function ife(e){if(!e)return 0;let t=32;for(const i in e)if(e.hasOwnProperty(i)){const s=e[i];switch(typeof s){case"string":t+=jZ(s);break;case"number":t+=LZ();break;case"boolean":t+=4}}return t}function rfe(e,t){return 32+e.length*t}var Vg;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(Vg||(Vg={}));const A8=["B","kB","MB","GB","TB"];function FZ(e,t){let i=t===0?0:Math.floor(Math.log(t)/Math.log(Vg.KILOBYTES));i=Kr(i,0,A8.length-1);const s=Cl(t/Vg.KILOBYTES**i,{maximumFractionDigits:2});return fo(e.units.bytes[A8[i]],{fileSize:s})}function DZ(e){const{exifInfo:t,exifName:i,tagName:s}=e;if(!t||!i||!s)return null;const l=t.find(d=>d.name===i);return l?zZ({tagName:s,tags:l.tags}):null}function zZ(e){const{tagName:t,tags:i}=e;if(!i||!t)return null;const s=i.find(l=>l.name===t);return s&&s.value||null}var P_;const VZ={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Lr=P_=class extends ce{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=DZ({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return VZ[t]||null}clone(){return new P_({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};v([_({type:String})],Lr.prototype,"contentType",void 0),v([_()],Lr.prototype,"exifInfo",void 0),v([_({readOnly:!0})],Lr.prototype,"orientationInfo",null),v([_({type:Ft})],Lr.prototype,"id",void 0),v([_({type:String})],Lr.prototype,"globalId",void 0),v([_({type:String})],Lr.prototype,"keywords",void 0),v([_({type:String})],Lr.prototype,"name",void 0),v([_({json:{read:!1}})],Lr.prototype,"parentGlobalId",void 0),v([_({json:{read:!1}})],Lr.prototype,"parentObjectId",void 0),v([_({type:Ft})],Lr.prototype,"size",void 0),v([_({json:{read:!1}})],Lr.prototype,"url",void 0),Lr=P_=v([H("esri.layers.support.AttachmentInfo")],Lr);const GZ=Lr;var N_;let zi=N_=class extends ce{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new N_(ie({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};v([_({type:[String],json:{write:!0}})],zi.prototype,"attachmentTypes",void 0),v([_({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],zi.prototype,"attachmentsWhere",void 0),v([_({type:Boolean,json:{write:!0}})],zi.prototype,"cacheHint",void 0),v([_({type:[String],json:{write:!0}})],zi.prototype,"keywords",void 0),v([_({type:[Number],json:{write:!0}})],zi.prototype,"globalIds",void 0),v([_({json:{write:!0}})],zi.prototype,"name",void 0),v([_({type:Number,json:{read:{source:"resultRecordCount"}}})],zi.prototype,"num",void 0),v([_({type:[Number],json:{write:!0}})],zi.prototype,"objectIds",void 0),v([_({type:Boolean,json:{default:!1,write:!0}})],zi.prototype,"returnMetadata",void 0),v([_({type:[Number],json:{write:!0}})],zi.prototype,"size",void 0),v([_({type:Number,json:{read:{source:"resultOffset"}}})],zi.prototype,"start",void 0),v([Ee("start"),Ee("num")],zi.prototype,"writeStart",null),v([_({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],zi.prototype,"where",void 0),zi=N_=v([H("esri.rest.support.AttachmentQuery")],zi),zi.from=ni(zi);const R_=zi,qZ="esri.widgets.Feature.support.featureUtils",k8=Me.getLogger(qZ),UZ=/href=(""|'')/gi,BZ=/(\{([^\{\r\n]+)\})/g,HZ=/\'/g,KC=/^\s*expression\//i,WZ=/(\n)/gi,JZ=/[\u00A0-\u9999<>\&]/gim,KZ=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,YZ=/^(?:mailto:|tel:)/,YC="relationships/",j_=O4("short-date-short-time");function XC(e){if(!he(e))return e.get("sourceLayer")||e.get("layer")}async function Gg(e,t){return typeof e=="function"?e.call(null,t):e}function ZC(e=""){if(e)return!YZ.test(e.trim().toLowerCase())}function QC(e){return!!e&&KC.test(e)}function XZ(e,t){if(!QC(t)||!e)return null;const i=t.replace(KC,"").toLowerCase();let s;return e.some(l=>l.name.toLowerCase()===i&&(s=l,!0)),s}function eP(e,t){const i=XZ(t,e==null?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function ZZ(e,t){const i=t.get(e.toLowerCase());return`{${i&&i.fieldName||e}}`}function QZ(e){return e.replace(UZ,"")}function qg(e,t){const i=H6(t,e);return i?i.name:e}function eQ(e,t){return e&&e.map(i=>qg(i,t))}function H6(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function tP(e){return`${e}`.trim()}function sh({attributes:e,globalAttributes:t,layer:i,text:s,expressionAttributes:l,fieldInfoMap:d}){return s?L_({formattedAttributes:t,template:sQ(s,{...t,...l,...e},i),fieldInfoMap:d}):""}function L_({formattedAttributes:e,template:t,fieldInfoMap:i}){return tP(QZ(fo(fo(t,s=>ZZ(s,i)),e)))}function tQ(e,t,i=!1){const s=t[e];if(typeof s=="string"){const l="%27",d=(i?encodeURIComponent(s):s).replace(HZ,l);t[e]=d}}function iQ(e,t=!1){const i={...e};return Object.keys(i).forEach(s=>tQ(s,i,t)),i}function rQ(e,t,i){const s=(t=tP(t))&&t[0]!=="{";return fo(e,iQ(i,s))}function F_(e,t){return e.replace(BZ,(i,s,l)=>{const d=H6(t,l);return d?`{${d.name}}`:s})}function sQ(e,t,i){const s=F_(e,i);return s&&s.replace(KZ,(l,d,y)=>rQ(l,d||y,t))}function nQ(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const i=Number(e);if(!isNaN(i))return i}return e}function oQ(e){return(e==null?void 0:e.type)==="feature"}function O8(e){return!!(e!=null&&e.layer)}function aQ(e){return(e==null?void 0:e.type)==="map-image"}function lQ(e,t){var $;const i=t.fieldInfos,s=t.fieldName,l=($=iP(i,s))==null?void 0:$.clone(),d=t.preventPlacesFormatting,y=t.layer,g=H6(y,s);if(l&&(g==null?void 0:g.type)==="date"){const E=l.format||new Kc;E.dateFormat=E.dateFormat||"short-date-short-time",E.dateTimeFormatOptions=!O8(y)&&oQ(y)&&y.datesInUnknownTimezone||O8(y)&&aQ(y.layer)&&y.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,l.format=E}const x=l&&l.format;return typeof e=="string"&&cE(s)&&x?x.formatRasterPixelValue(e):typeof(e=nQ(e,x))=="string"||e==null||x==null?l1(e):d?Cl(e,{...mE(x),minimumFractionDigits:0,maximumFractionDigits:20}):x.format(e)}function iP(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let s;return e.some(l=>!(!l.fieldName||l.fieldName.toLowerCase()!==i)&&(s=l,!0)),s}function uQ({fieldName:e,graphic:t,layer:i}){if(ia(e)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:s}=i;if(!s||e!==s)return null;const l=i.getFeatureType(t);return l?l.name:null}function hQ({fieldName:e,value:t,graphic:i,layer:s}){if(ia(e)||!s||typeof s.getFieldDomain!="function")return null;const l=s.getFieldDomain(e,{feature:i});return l&&l.type==="coded-value"?l.getName(t):null}function cQ(e,t){const{creatorField:i,creationDateField:s,editorField:l,editDateField:d}=e;if(!t)return;const y=t[d];if(typeof y=="number"){const x=t[l];return{type:"edit",date:pa(y,j_),user:x}}const g=t[s];if(typeof g=="number"){const x=t[i];return{type:"create",date:pa(g,j_),user:x}}return null}function pQ(e,t){const i=new Map;return e&&e.forEach(s=>{const l=qg(s.fieldName,t);s.fieldName=l,i.set(l.toLowerCase(),s)}),i}function C8(e){const t=[];if(!e)return t;const{fieldInfos:i,content:s}=e;return i&&t.push(...i),s&&Array.isArray(s)&&s.forEach(l=>{if(l.type==="fields"){const d=l&&l.fieldInfos;d&&t.push(...d)}}),t}function W6(e){return e.replace(JZ,t=>`&#${t.charCodeAt(0)};`)}function l1(e){return typeof e=="string"?e.replace(WZ,'<br class="esri-text-new-line" />'):e}function rP(e){const{value:t,fieldName:i,fieldInfos:s,fieldInfoMap:l,layer:d,graphic:y}=e;if(t==null)return"";const g=hQ({fieldName:i,value:t,graphic:y,layer:d});if(g)return g;const x=uQ({fieldName:i,graphic:y,layer:d});if(x)return x;if(l.get(i.toLowerCase()))return lQ(t,{fieldInfos:s||Array.from(l.values()),fieldName:i,layer:d});const $=d&&d.fieldsIndex;return $&&$.isDateField(i)?pa(t,j_):l1(t)}function _w({fieldInfos:e,attributes:t,layer:i,graphic:s,fieldInfoMap:l,relatedInfos:d}){const y={};return d==null||d.forEach(g=>gQ({attributes:y,relatedInfo:g,fieldInfoMap:l,fieldInfos:e,layer:i})),Object.keys(t).forEach(g=>{const x=t[g];y[g]=rP({fieldName:g,fieldInfos:e,fieldInfoMap:l,layer:i,value:x,graphic:s})}),y}async function dQ(e,t){var E,O;const{layer:i,graphic:s,outFields:l,objectIds:d,returnGeometry:y,spatialReference:g}=e,x=d[0];if(typeof x!="number"&&typeof x!="string"){const P="Could not query required fields for the specified feature. The feature's ID is invalid.",R={layer:i,graphic:s,objectId:x,requiredFields:l};return k8.warn(P,R),null}if(!((O=(E=i.capabilities)==null?void 0:E.operations)!=null&&O.supportsQuery)){const P="The specified layer cannot be queried. The following fields will not be available.",R={layer:i,graphic:s,requiredFields:l,returnGeometry:y};return k8.warn(P,R),null}const $=i.createQuery();return $.objectIds=d,$.outFields=l!=null&&l.length?l:[i.objectIdField],$.returnGeometry=!!y,$.returnZ=!!y,$.returnM=!!y,$.outSpatialReference=g,(await i.queryFeatures($,t)).features[0]}async function fQ(e){var s;if(!((s=e.expressionInfos)!=null&&s.length))return!1;const t=await ca(),{arcadeUtils:{hasGeometryFunctions:i}}=t;return i(e)}async function yQ({graphic:e,popupTemplate:t,layer:i,spatialReference:s},l){if(!i||!t||(typeof i.load=="function"&&await i.load(l),!e.attributes))return;const d=e.attributes[i.objectIdField];if(d==null)return;const y=[d],g=await t.getRequiredFields(i.fieldsIndex),x=Oz(g,e),$=x?[]:g,E=t.returnGeometry||await fQ(t);if(x&&!E)return;const O=await dQ({layer:i,graphic:e,outFields:$,objectIds:y,returnGeometry:E,spatialReference:s},l);O&&(O.geometry&&(e.geometry=O.geometry),O.attributes&&(e.attributes={...e.attributes,...O.attributes}))}function ia(e=""){return!!e&&e.includes(YC)}function mQ(e){return e?`${YC}${e.layerId}/${e.fieldName}`:""}function P8({attributes:e,graphic:t,relatedInfo:i,fieldInfos:s,fieldInfoMap:l,layer:d}){e&&t&&i&&Object.keys(t.attributes).forEach(y=>{const g=mQ({layerId:i.relation.id.toString(),fieldName:y}),x=t.attributes[y];e[g]=rP({fieldName:g,fieldInfos:s,fieldInfoMap:l,layer:d,value:x,graphic:t})})}function gQ({attributes:e,relatedInfo:t,fieldInfoMap:i,fieldInfos:s,layer:l}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(d=>P8({attributes:e,graphic:d,relatedInfo:t,fieldInfoMap:i,fieldInfos:s,layer:l})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(d=>P8({attributes:e,graphic:d,relatedInfo:t,fieldInfoMap:i,fieldInfos:s,layer:l})))}const N8=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},sP=({layer:e,method:t,query:i,definitionExpression:s})=>{var y,g;if(!((g=(y=e.capabilities)==null?void 0:y.query)!=null&&g.supportsCacheHint)||t==="attachments")return;const l=Y(i.where)&&i.where,d=Y(i.geometry)&&i.geometry;N8(s)||N8(l)||(d==null?void 0:d.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},vQ=({query:e,layer:t,method:i})=>{sP({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},wQ=({queryPayload:e,layer:t,method:i})=>{sP({layer:t,method:i,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},R8={editing:!1,operations:{add:!0,update:!0,delete:!0}},nP=Ge.ofType(GZ),bQ="graphic.layer.capabilities.operations.supportsResizeAttachments";let fn=class extends ze{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...R8},this.activeAttachmentInfo=null,this.attachmentInfos=new nP,this.graphic=null,this.mode="view",this.own(Te(()=>this.graphic,()=>this._graphicChanged(),Ot))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...R8,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(bQ)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new te("invalid-layer","getAttachments(): A valid layer is required.");const i=this._getFeatureId(),s=new R_({objectIds:[i],returnMetadata:!0}),l=[],d=e.queryAttachments(s).then(g=>g[i]||l).catch(()=>l);this._getAttachmentsPromise=d,this.notifyChange("state");const y=await d;return t.removeAll(),y.length&&t.addMany(y),this._getAttachmentsPromise=null,this.notifyChange("state"),y}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:s,abilities:l}=this;if(!e)throw new te("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!l.operations.add)throw new te("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new te("invalid-layer","addAttachment(): A valid layer is required.");const d=t.addAttachment(s,e).then(g=>this._queryAttachment(g.objectId)),y=await d;return i.add(y),y}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:i,graphic:s,abilities:l}=this;if(!e)throw new te("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!l.operations.delete)throw new te("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new te("invalid-layer","deleteAttachment(): A valid layer is required.");const d=t.deleteAttachments(s,[e.id]).then(()=>e),y=await d;return i.remove(y),y}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:i,attachmentInfos:s,graphic:l,abilities:d}=this;if(!e)throw new te("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new te("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!d.operations.update)throw new te("invalid-abilities","updateAttachment(): Update abilities are required.");const y=s.findIndex($=>$===t);if(!i||typeof i.updateAttachment!="function")throw new te("invalid-layer","updateAttachment(): A valid layer is required.");const g=i.updateAttachment(l,t.id,e).then($=>this._queryAttachment($.objectId)),x=await g;return s.splice(y,1,x),x}async _queryAttachment(e){if(!e)throw new te("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,i=this._getFeatureId(),s=new R_({objectIds:[i],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(s).then(l=>l[i][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:i}=e,{attributes:s}=t;return s&&s[i]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=XC(e);this._attachmentLayer=t?t.type==="scene"&&Y(t.associatedLayer)?t.associatedLayer:t:null}};v([_()],fn.prototype,"abilities",void 0),v([mt("abilities")],fn.prototype,"castAbilities",null),v([_()],fn.prototype,"activeAttachmentInfo",void 0),v([_({readOnly:!0,type:nP})],fn.prototype,"attachmentInfos",void 0),v([_({type:ws})],fn.prototype,"graphic",void 0),v([_()],fn.prototype,"mode",void 0),v([_({readOnly:!0})],fn.prototype,"state",null),v([_({readOnly:!0})],fn.prototype,"supportsResizeAttachments",null),fn=v([H("esri.widgets.Attachments.AttachmentsViewModel")],fn);const J6=fn;function _Q(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function xQ(e){const t=$t("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Wr(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var SQ=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},oP=function(e,t){for(var i=0,s=e.length;i<s;i++){var l=e[i];Array.isArray(l)?oP(l,t):l!=null&&l!==!1&&(l.hasOwnProperty("vnodeSelector")||(l=SQ(l)),t.push(l))}},$Q=function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var l=[];return oP(i,l),{vnodeSelector:e,properties:t||void 0,children:l,text:void 0,domNode:null}};function le(e,t,...i){return typeof e!="function"||B6(e)?$Q(e,t,...i):e(t,...i)}const j8={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Ne={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},xw=window.CSS;let lr=class extends Cr{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new J6,this.visibleElements={...j8},this._supportsImageOrientation=xw&&xw.supports&&xw.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([Eh(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Te(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),Ot)])}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{...j8,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new te("attachments:add-attachment",this.messages.addErrorMessage,i)),i})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(i=>(this._set("submitting",!1),this._set("error",null),t.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new te("attachments:delete-attachment",this.messages.deleteErrorMessage,i)),i})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(i=>(this._set("submitting",!1),this._set("error",null),e.mode="view",i)).catch(i=>{throw this._set("submitting",!1),this._set("error",new te("attachments:update-attachment",this.messages.updateErrorMessage,i)),i})}render(){const{submitting:e,viewModel:t}=this,{state:i}=t;return le("div",{class:this.classes(Ne.base,Ne.esriWidget)},e?this.renderProgressBar():null,i==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?le("div",{key:"error-message",class:Ne.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return le("div",{class:Ne.loaderContainer,key:"loader"},le("div",{class:Ne.loader}))}renderProgressBar(){return this.visibleElements.progressBar?le("div",{class:Ne.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,i=e||!t,s=this.visibleElements.cancelAddButton?le("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Ne.esriButton,Ne.esriButtonTertiary,Ne.esriButtonSmall,Ne.esriButtonHalf,e&&Ne.buttonDisabled)},this.messages.cancel):null,l=this.visibleElements.addSubmitButton?le("button",{type:"submit",disabled:i,class:this.classes(Ne.esriButton,Ne.esriButtonSecondary,Ne.esriButtonSmall,Ne.esriButtonHalf,{[Ne.buttonDisabled]:i})},this.messages.add):null,d=t?le("span",{key:"file-name",class:Ne.fileName},t.name):null,y=le("form",{bind:this,afterCreate:I_,afterRemoved:u8,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},le("fieldset",{class:Ne.fileFieldset},d,le("label",{class:this.classes(Ne.fileLabel,Ne.esriButton,Ne.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,le("input",{class:Ne.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),l,s);return le("div",{key:"add-form-container",class:Ne.formNode},y)}renderDetailsForm(e){const{visibleElements:t,viewModel:i,selectedFile:s,submitting:l}=this,{contentType:d,size:y,url:g}=e,{abilities:x}=i,$=l||!s,E=x.editing&&x.operations.delete&&t.deleteButton?le("button",{key:"delete-button",type:"button",disabled:l,bind:this,onclick:ee=>this._submitDeleteAttachment(ee,e),class:this.classes(Ne.esriButton,Ne.esriButtonSmall,Ne.esriButtonTertiary,Ne.deleteButton,{[Ne.buttonDisabled]:l})},this.messages.delete):null,O=x.editing&&x.operations.update&&t.updateButton?le("button",{disabled:$,key:"update-button",type:"submit",class:this.classes(Ne.esriButton,Ne.esriButtonSmall,Ne.esriButtonThird,{[Ne.buttonDisabled]:$})},this.messages.update):null,P=this.visibleElements.cancelUpdateButton?le("button",{disabled:l,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Ne.esriButton,Ne.esriButtonSmall,Ne.esriButtonTertiary,Ne.esriButtonThird,{[Ne.buttonDisabled]:l})},this.messages.cancel):null,R=s?le("span",{key:"file-name",class:Ne.fileName},s.name):null,L=x.editing&&x.operations.update?le("fieldset",{key:"file",class:Ne.fileFieldset},R,le("label",{class:this.classes(Ne.fileLabel,Ne.esriButton,Ne.esriButtonSecondary)},this.messages.changeFile,le("input",{class:Ne.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,z=le("fieldset",{key:"size",class:Ne.metadataFieldset},le("label",null,FZ(this.messagesUnits,y))),V=le("fieldset",{key:"content-type",class:Ne.metadataFieldset},le("label",null,d)),K=le("form",{bind:this,afterCreate:I_,afterRemoved:u8,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},le("div",{class:Ne.metadata},z,V),L,le("div",{class:Ne.actions},E,P,O));return le("div",{key:"edit-form-container",class:Ne.formNode},le("a",{class:Ne.itemLink,href:g,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),le("div",{class:Ne.itemLinkOverlay},le("span",{class:Ne.itemLinkOverlayIcon},le("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},le("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),le("path",{fill:"none",d:"M0 0h32v32H0z"}))))),K)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:i}=this.viewModel,{contentType:s,name:l,url:d}=e,y=i&&_Q(s),g=this._getCSSTransform(e,y),x=g?{transform:g,"image-orientation":"none"}:{},$=d.includes("?")?"&":"?",E=y?`${d}${$}w=${t}`:xQ(s),O={[Ne.itemMaskIcon]:!y},P={[Ne.itemImageResizable]:i};return le("div",{class:this.classes(O,Ne.itemMask)},le("img",{styles:x,alt:l,src:E,class:this.classes(P,Ne.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:i}=this,{abilities:s}=i,{name:l,url:d}=e,y=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),g=s.editing?le("span",{"aria-hidden":"true",class:this.classes(Ne.itemChevronIcon,Sl(this.container)?Ne.iconLeft:Ne.iconRight)}):null,x=[y,le("label",{class:Ne.itemLabel},le("span",{class:Ne.itemFilename},l||this.messages.noTitle),g)],$=s.editing?le("button",{key:"details-button",bind:this,class:Ne.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},x):le("a",{key:"details-link",class:Ne.itemButton,href:d,target:"_blank"},x);return le("li",{class:Ne.item,key:e},$)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:i}=this,{attachmentInfos:s,abilities:l}=t,d=s&&s.length,y={[Ne.containerList]:e!=="preview",[Ne.containerPreview]:e==="preview"},g=l.editing&&l.operations.add&&i.addButton?le("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Ne.esriButton,Ne.esriButtonTertiary,Ne.addAttachmentButton),type:"button"},le("span",{"aria-hidden":"true",class:this.classes(Ne.itemAddIcon,Ne.iconPlus)}),this.messages.add):null,x=d?le("ul",{class:Ne.items},s.toArray().map($=>this.renderAttachmentInfo({attachmentInfo:$,displayType:e}))):le("div",{class:Ne.empty},this.messages.noAttachments);return le("div",{key:"attachments-container",class:this.classes(Ne.container,y)},x,g)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&t&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};v([Be("viewModel.abilities")],lr.prototype,"abilities",void 0),v([_()],lr.prototype,"displayType",void 0),v([_({readOnly:!0})],lr.prototype,"effectiveDisplayType",null),v([Be("viewModel.graphic")],lr.prototype,"graphic",void 0),v([_({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],lr.prototype,"label",void 0),v([_(),Wr("esri/widgets/Attachments/t9n/Attachments")],lr.prototype,"messages",void 0),v([_(),Wr("esri/core/t9n/Units")],lr.prototype,"messagesUnits",void 0),v([_({readOnly:!0})],lr.prototype,"selectedFile",void 0),v([_({readOnly:!0})],lr.prototype,"submitting",void 0),v([_({readOnly:!0})],lr.prototype,"error",void 0),v([_({type:J6})],lr.prototype,"viewModel",void 0),v([_()],lr.prototype,"visibleElements",void 0),v([mt("visibleElements")],lr.prototype,"castVisibleElements",null),lr=v([H("esri.widgets.Attachments")],lr);const MQ=lr;let g0=class extends J6{constructor(e){super(e),this.description=null,this.title=null}};v([_()],g0.prototype,"description",void 0),v([_()],g0.prototype,"title",void 0),g0=v([H("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],g0);const K6=g0,IQ={heading:"esri-widget__heading"};function Y6(e,t){const i=TQ(e.level),s=`h${i}`;return delete e.level,le(s,{...e,class:vC(IQ.heading,e.class),role:"heading","aria-level":String(i)},t)}function TQ(e){return Kr(Math.ceil(e),1,6)}const Sw={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let wc=class extends Cr{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return le("div",{class:Sw.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?le(Y6,{level:this.headingLevel,class:Sw.title},e):null}renderDescription(){const{description:e}=this;return e?le("div",{key:"description",class:Sw.description},e):null}};v([_()],wc.prototype,"description",void 0),v([_()],wc.prototype,"headingLevel",void 0),v([_()],wc.prototype,"title",void 0),wc=v([H("esri.widgets.Feature.support.FeatureElementInfo")],wc);const X6=wc,EQ={base:"esri-feature-attachments"};let Zn=class extends Cr{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new MQ,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new K6}initialize(){this._featureElementInfo=new X6,this.own([Te(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),Ot),Te(()=>{var e;return(e=this.viewModel)==null?void 0:e.graphic},e=>this.attachmentsWidget.graphic=e,Ot)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var t;const{attachmentsWidget:e}=this;return le("div",{class:EQ.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:i}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:i})}};v([_({readOnly:!0})],Zn.prototype,"attachmentsWidget",void 0),v([Be("viewModel.description")],Zn.prototype,"description",void 0),v([Be("attachmentsWidget.displayType")],Zn.prototype,"displayType",void 0),v([Be("viewModel.graphic")],Zn.prototype,"graphic",void 0),v([_()],Zn.prototype,"headingLevel",void 0),v([Be("viewModel.title")],Zn.prototype,"title",void 0),v([_({type:K6})],Zn.prototype,"viewModel",void 0),Zn=v([H("esri.widgets.Feature.FeatureAttachments")],Zn);const AQ=Zn;let Ya=class extends Fh(ze){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(Te(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},Ot))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:i}=this;e&&(Gg(i,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,i=Gg(e,{graphic:t}).catch(()=>null);this._loadingPromise=i,this.notifyChange("state");const s=await i;i===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};v([_({readOnly:!0})],Ya.prototype,"created",void 0),v([_()],Ya.prototype,"creator",void 0),v([_()],Ya.prototype,"destroyer",void 0),v([_({type:ws})],Ya.prototype,"graphic",void 0),v([_({readOnly:!0})],Ya.prototype,"state",null),Ya=v([H("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Ya);const Ug=Ya;function Ds(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:OQ(e[t])}}}function kQ(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function OQ(e){return function(t,...i){kQ(t)?vX(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function CQ(e){return e.split(",").map(t=>t.trim())}function PQ(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const i=t._delegatedEventNames,s=Array.isArray(e)?e:CQ(e);i.push(...s)}}const aP="calcite-theme-";function NQ(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function lP(){return NQ().startsWith("dark")}function RQ(){return`${aP}${lP()?"dark":"light"}`}function jQ(e){LQ(e),e.classList.add(RQ())}function LQ(e){Array.from(e.classList).forEach(t=>{t.startsWith(aP)&&e.classList.remove(t)})}function uP(e){return e&&typeof e.render=="function"}function FQ(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const $w={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let bc=class extends Cr{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=i=>{Array.from(i.querySelectorAll("a")).forEach(s=>{ZC(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}renderLoading(){return le("div",{class:$w.loaderContainer,key:"loader"},le("div",{class:$w.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?le("div",{key:e,bind:e,afterCreate:this._attachToNode}):uP(e)?le("div",{key:e},!e.destroyed&&e.render()):le("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return le("div",{class:$w.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};v([Be("viewModel.creator")],bc.prototype,"creator",void 0),v([Be("viewModel.graphic")],bc.prototype,"graphic",void 0),v([_({type:Ug})],bc.prototype,"viewModel",void 0),bc=v([H("esri.widgets.Feature.FeatureContent")],bc);const bm=bc;let Go=class extends ze{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,i=[];return t==null||t.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const l=s.clone();l.label=eP(l,e),i.push(l)}),i}};v([_()],Go.prototype,"attributes",void 0),v([_({type:[$E]})],Go.prototype,"expressionInfos",void 0),v([_()],Go.prototype,"description",void 0),v([_({type:[Hf]})],Go.prototype,"fieldInfos",void 0),v([_({readOnly:!0})],Go.prototype,"formattedFieldInfos",null),v([_()],Go.prototype,"title",void 0),Go=v([H("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Go);const s2=Go,DQ=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function zQ(e){let t=null;return DQ.some(i=>(i.pattern.test(e)&&(t=i),!!t)),t}function VQ(e,t){if(typeof t!="string"||!t)return t;const i=zQ(t);if(!i)return t;const s=t.match(i.pattern),l=s&&s[2],d=fo(fo(i.label,{messages:e,hierPart:l}),{appName:i.appName}),y=i.target?` target="${i.target}"`:"",g=i.target==="_blank"?' rel="noreferrer"':"";return t.replace(i.pattern,`<a${y} href="$1"${g}>${d}</a>`)}const bd={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let yn=class extends Cr{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new s2,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new X6,this.own(Te(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),Ot))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:i}=this.viewModel,s=e.fieldName,l=e.label||s,d=i?i[s]==null?"":i[s]:"",y=!(!e.format||!e.format.dateFormat),g=typeof d=="number"&&!y?this._forceLTR(d):VQ(this.messagesURIUtils,d),x={[bd.fieldDataDate]:y};return le("tr",{key:`fields-element-info-row-${s}-${t}`},le("th",{key:`fields-element-info-row-header-${s}-${t}`,class:bd.fieldHeader,innerHTML:l}),le("td",{key:`fields-element-info-row-data-${s}-${t}`,class:this.classes(bd.fieldData,x),innerHTML:g}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?le("table",{class:bd.esriTable,summary:this.messages.fieldsSummary},le("tbody",null,e.map((t,i)=>this.renderFieldInfo(t,i)))):null}render(){var e;return le("div",{class:bd.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};v([Be("viewModel.attributes")],yn.prototype,"attributes",void 0),v([Be("viewModel.description")],yn.prototype,"description",void 0),v([Be("viewModel.expressionInfos")],yn.prototype,"expressionInfos",void 0),v([Be("viewModel.fieldInfos")],yn.prototype,"fieldInfos",void 0),v([Be("viewModel.title")],yn.prototype,"title",void 0),v([_({type:s2})],yn.prototype,"viewModel",void 0),v([_(),Wr("esri/widgets/Feature/t9n/Feature")],yn.prototype,"messages",void 0),v([_(),Wr("esri/widgets/support/t9n/uriUtils")],yn.prototype,"messagesURIUtils",void 0),yn=v([H("esri.widgets.Feature.FeatureFields")],yn);const hP=yn,GQ={maximumFractionDigits:20};function qQ(e){return Cl(e,GQ)}function UQ(e,t,i){return qi(e.map((s,l)=>t.apply(i,[s,l])))}async function BQ(e,t,i){return(await qi(e.map((s,l)=>t.apply(i,[s,l])))).map(s=>s.value)}async function n2(e){if(he(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function sfe(e){try{return{ok:!0,value:await e}}catch(t){return Uf(t),{ok:!1,error:t}}}class HQ{constructor(t,i){this._storage=new Mk,this._storage.maxSize=t,i&&this._storage.registerRemoveFunc("",i)}put(t,i){this._storage.put(t,i,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}new HQ(1e3);new Je([128,128,128]);const WQ=new Je("white");function Wh(e,t){if(!e)return null;let i=null;return xp(e)?i=JQ(e):zv(e)&&(i=e.color?new Je(e.color):null),i?Cf(i,t):null}function JQ(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(s=>{s.type==="object"&&s.resource.href!=null||(i=s.type==="water"?s.color:Y(s.material)?s.material.color:null)}),i?new Je(i):null}function Cf(e,t){if(t==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new Je(i)}function KQ(e,t,i){const s=e.symbolLayers;if(!s)return;const l=d=>{const y=Y(d)?d:null;return Cf(t=t||y||i!=null&&WQ,i)};s.forEach(d=>{if(d.type!=="object"||d.resource.href==null||t)if(d.type==="water")d.color=l(d.color);else{const y=Y(d.material)?d.material.color:null,g=l(y);he(d.material)?d.material=new fs({color:g}):d.material.color=g,i!=null&&"outline"in d&&Y(d.outline)&&Y(d.outline.color)&&(d.outline.color=Cf(d.outline.color,i))}})}function YQ(e,t,i){(t=t||e.color)&&(e.color=Cf(t,i)),i!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=Cf(e.outline.color,i))}function Mw(e,t,i){e&&(t||i!=null)&&(t&&(t=new Je(t)),xp(e)?KQ(e,t,i):zv(e)&&YQ(e,t,i))}async function XQ(e,t){const i=e.symbolLayers;i&&await UQ(i,async s=>ZQ(s,t))}async function ZQ(e,t){switch(e.type){case"extrude":eee(e,t);break;case"icon":case"line":case"text":QQ(e,t);break;case"path":iee(e,t);break;case"object":await tee(e,t)}}function QQ(e,t){const i=cP(t);Y(i)&&(e.size=i)}function cP(e){for(const t of e)if(typeof t=="number")return t;return null}function eee(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function tee(e,t){const{resourceSize:i,symbolSize:s}=await ree(e),l=pP(t,i,s);e.width=Y0(t[0],s[0],i[0],l),e.depth=Y0(t[1],s[1],i[1],l),e.height=Y0(t[2],s[2],i[2],l)}function iee(e,t){const i=pP(t,RE,[e.width,void 0,e.height]);e.width=Y0(t[0],e.width,1,i),e.height=Y0(t[2],e.height,1,i)}function pP(e,t,i){for(let s=0;s<3;s++){const l=e[s];switch(l){case"symbol-value":return i[s]!=null?i[s]/t[s]:1;case"proportional":break;default:if(l&&t[s])return l/t[s]}}return 1}async function ree(e){const t=await fe(()=>import("./symbolLayerUtils.bd846e3d.js"),[]),i=await t.computeObjectLayerResourceSize(e,10),{width:s,height:l,depth:d}=e,y=[s,d,l];let g=1;for(let x=0;x<3;x++)if(y[x]!=null){g=y[x]/i[x];break}for(let x=0;x<3;x++)y[x]==null&&(y[x]=i[x]*g);return{resourceSize:i,symbolSize:y}}function Y0(e,t,i,s){switch(e){case"proportional":return i*s;case"symbol-value":return t!=null?t:i;default:return e}}function see(e,t){const i=cP(t);if(!he(i))switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const s=e.width/e.height;s>1?(e.width=i,e.height=i*s):(e.width=i*s,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function nee(e,t){if(e&&t)return xp(e)?XQ(e,t):void(zv(e)&&see(e,t))}function oee(e,t,i){if(e&&t!=null)if(xp(e)){const s=e.symbolLayers;s&&s.forEach(l=>{if(l&&l.type==="object")switch(i){case"tilt":l.tilt=t;break;case"roll":l.roll=t;break;default:l.heading=t}})}else zv(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}const aee="<",lee=">",uee=O4("short-date");function hee(e,t,i,s){let l="";t===0?l=`${aee} `:t===i&&(l=`${lee} `);let d=null;return d=s?pa(e,uee):qQ(e),l+d}const cee=new Je([64,64,64]);function pee(e,t){const i=[],s=e.length-1;return e.length===5?i.push(0,2,4):i.push(0,s),e.map((l,d)=>i.includes(d)?hee(l,d,s,t):null)}async function dee(e,t,i){let s=!1,l=[],d=[];if(e.stops){const $=e.stops;l=$.map(E=>E.value),s=$.some(E=>!!E.label),s&&(d=$.map(E=>E.label))}const y=l[0],g=l[l.length-1];if(y==null&&g==null)return null;const x=s?null:pee(l,i);return(await Promise.all(l.map(async($,E)=>({value:$,color:e.type==="opacity"?await fee($,e,t):(await fe(()=>Promise.resolve().then(function(){return l6}),void 0)).getColor(e,$),label:s?d[E]:x[E]})))).reverse()}async function fee(e,t,i=cee){const s=new Je(i),l=(await fe(()=>Promise.resolve().then(function(){return l6}),void 0)).getOpacity(t,e);return l!=null&&(s.a=l),s}function yee(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(s=>{var l;return((l=s.color)==null?void 0:l.a)>0});let i=t.length-1;if(t&&t[0]){const s=t[i];s&&s.ratio!==1&&(t.push(new B0({ratio:1,color:s.color})),i++)}return t.map((s,l)=>{var y,g;let d="";return l===0?d=((y=e.legendOptions)==null?void 0:y.minLabel)||"low":l===i&&(d=((g=e.legendOptions)==null?void 0:g.maxLabel)||"high"),{color:s.color,label:d,ratio:s.ratio}}).reverse()}Me.getLogger("esri.renderers.support.utils");function Zr(e,t,i){HI(e,t,()=>[]).push(...i)}async function mee(e){var i,s;const t=new Map;if("visualVariables"in e&&e.visualVariables){const l=e.visualVariables.filter(d=>d.type==="color");for(const d of l){const y=d.field||d.valueExpression,g=(await dee(d)).map(x=>x.color);Zr(t,y,g)}}if(e.type==="heatmap"){const l=yee(e).map(d=>d.color);Zr(t,e.field,l)}else if(e.type==="pie-chart"){for(const l of e.attributes)Zr(t,l.field,[l.color]);Zr(t,null,[(i=e==null?void 0:e.othersCategory)==null?void 0:i.color,Wh(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const l of e.attributes)Zr(t,l.field,[l.color]);Zr(t,null,[e.backgroundColor])}else if(e.type==="unique-value")if(((s=e.authoringInfo)==null?void 0:s.type)==="predominance")for(const l of e.uniqueValueInfos)Zr(t,l.value.toString(),[Wh(l.symbol,null)]);else{const l=e.uniqueValueInfos.map($=>Wh($.symbol,null)),{field:d,field2:y,field3:g,valueExpression:x}=e;(d||x)&&Zr(t,d||x,l),y&&Zr(t,y,l),g&&Zr(t,g,l)}else if(e.type==="class-breaks"){const l=e.classBreakInfos.map(d=>Wh(d.symbol,null));Zr(t,e.field||e.valueExpression,l)}else e.type==="simple"&&Zr(t,null,[Wh(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&Zr(t,null,[Wh(e.defaultSymbol,null)]),t.forEach((l,d)=>{const y=hL(l.filter(Boolean),(g,x)=>JSON.stringify(g)===JSON.stringify(x));t.set(d,y)}),t}function gee(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function dP(e){return typeof e=="string"?fi(e):ie(e)}function vee(e,t,i){const s={};for(const l in e){if(l==="declaredClass")continue;const d=e[l];if(d!=null&&typeof d!="function")if(Array.isArray(d)){s[l]=[];for(let y=0;y<d.length;y++)s[l][y]=vee(d[y])}else if(typeof d=="object")if(d.toJSON){const y=d.toJSON(i&&i[l]);s[l]=t?y:JSON.stringify(y)}else s[l]=t?d:JSON.stringify(d);else s[l]=d}return s}const iy={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new $r({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ye.WebMercator}),minus180Line:new $r({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ye.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new $r({paths:[[[180,-180],[180,180]]],spatialReference:Ye.WGS84}),minus180Line:new $r({paths:[[[-180,-180],[-180,180]]],spatialReference:Ye.WGS84})}};function nh(e,t){return Math.ceil((e-t)/(2*t))}function fP(e,t){const i=X0(e);for(const s of i)for(const l of s)l[0]+=t;return e}function X0(e){return uh(e)?e.rings:e.paths}async function wee(e,t,i,s){const l=typeof e=="string"?fi(e):e,d=t[0].spatialReference,y={...s,query:{...l.query,f:"json",sr:JSON.stringify(d),target:JSON.stringify({geometryType:Dp(t[0]),geometries:t}),cutter:JSON.stringify(i)}},g=await Vt(l.path+"/cut",y),{cutIndexes:x,geometries:$=[]}=g.data;return{cutIndexes:x,geometries:$.map(E=>{const O=ha(E);return O.spatialReference=d,O})}}async function bee(e,t,i){const s=typeof e=="string"?fi(e):e,l=t[0].spatialReference,d=Dp(t[0]),y={...i,query:{...s.query,f:"json",sr:l.wkid?l.wkid:JSON.stringify(l),geometries:JSON.stringify(_ee(t))}};return xee((await Vt(s.path+"/simplify",y)).data,d,l)}function _ee(e){return{geometryType:Dp(e[0]),geometries:e.map(t=>t.toJSON())}}function xee(e,t,i){const s=iE(t);return e.map(l=>{const d=s.fromJSON(l);return d.spatialReference=i,d})}const yP=Me.getLogger("esri.geometry.support.normalizeUtils");function See(e){return e.type==="polygon"}function $ee(e){return e[0].type==="polygon"}function Mee(e){return e[0].type==="polyline"}function Iee(e,t){if(!(e instanceof $r||e instanceof gs)){const l="straightLineDensify: the input geometry is neither polyline nor polygon";throw yP.error(l),new te(l)}const i=X0(e),s=[];for(const l of i){const d=[];s.push(d),d.push([l[0][0],l[0][1]]);for(let y=0;y<l.length-1;y++){const g=l[y][0],x=l[y][1],$=l[y+1][0],E=l[y+1][1],O=Math.sqrt(($-g)*($-g)+(E-x)*(E-x)),P=(E-x)/O,R=($-g)/O,L=O/t;if(L>1){for(let ee=1;ee<=L-1;ee++){const se=ee*t,oe=R*se+g,ne=P*se+x;d.push([oe,ne])}const z=(O+Math.floor(L-1)*t)/2,V=R*z+g,K=P*z+x;d.push([V,K])}d.push([$,E])}}return See(e)?new gs({rings:s,spatialReference:e.spatialReference}):new $r({paths:s,spatialReference:e.spatialReference})}function L8(e,t,i){if(t){const s=Iee(e,1e6);e=Wu(s,!0)}return i&&(e=fP(e,i)),e}function F8(e,t,i){if(Array.isArray(e)){const s=e[0];if(s>t){const l=nh(s,t);e[0]=s+l*(-2*t)}else if(s<i){const l=nh(s,i);e[0]=s+l*(-2*i)}}else{const s=e.x;if(s>t){const l=nh(s,t);e=e.clone().offset(l*(-2*t),0)}else if(s<i){const l=nh(s,i);e=e.clone().offset(l*(-2*i),0)}}return e}function Tee(e,t){let i=-1;for(let s=0;s<t.cutIndexes.length;s++){const l=t.cutIndexes[s],d=t.geometries[s],y=X0(d);for(let g=0;g<y.length;g++){const x=y[g];x.some($=>{if($[0]<180)return!0;{let E=0;for(let P=0;P<x.length;P++){const R=x[P][0];E=R>E?R:E}E=Number(E.toFixed(9));const O=-360*nh(E,180);for(let P=0;P<x.length;P++){const R=d.getPoint(g,P);d.setPoint(g,P,R.clone().offset(O,0))}return!0}})}if(l===i){if($ee(e))for(const g of X0(d))e[l]=e[l].addRing(g);else if(Mee(e))for(const g of X0(d))e[l]=e[l].addPath(g)}else i=l,e[l]=d}return e}async function mP(e,t,i){var oe;if(!Array.isArray(e))return mP([e],t);t&&typeof t!="string"&&yP.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s=typeof t=="string"?t:(oe=t==null?void 0:t.url)!=null?oe:vt.geometryServiceUrl;let l,d,y,g,x,$,E,O,P=0;const R=[],L=[];for(const ne of e)if(he(ne))L.push(ne);else if(l||(l=ne.spatialReference,d=An(l),y=l.isWebMercator,$=y?102100:4326,g=iy[$].maxX,x=iy[$].minX,E=iy[$].plus180Line,O=iy[$].minus180Line),d)if(ne.type==="mesh")L.push(ne);else if(ne.type==="point")L.push(F8(ne.clone(),g,x));else if(ne.type==="multipoint"){const ae=ne.clone();ae.points=ae.points.map(Ie=>F8(Ie,g,x)),L.push(ae)}else if(ne.type==="extent"){const ae=ne.clone()._normalize(!1,!1,d);L.push(ae.rings?new gs(ae):ae)}else if(ne.extent){const ae=ne.extent,Ie=nh(ae.xmin,x)*(2*g);let Se=Ie===0?ne.clone():fP(ne.clone(),Ie);ae.offset(Ie,0),ae.intersects(E)&&ae.xmax!==g?(P=ae.xmax>P?ae.xmax:P,Se=L8(Se,y),R.push(Se),L.push("cut")):ae.intersects(O)&&ae.xmin!==x?(P=ae.xmax*(2*g)>P?ae.xmax*(2*g):P,Se=L8(Se,y,360),R.push(Se),L.push("cut")):L.push(Se)}else L.push(ne.clone());else L.push(ne);let z=nh(P,g),V=-90;const K=z,ee=new $r;for(;z>0;){const ne=360*z-180;ee.addPath([[ne,V],[ne,-1*V]]),V*=-1,z--}if(R.length>0&&K>0){const ne=Tee(R,await wee(s,R,ee,i)),ae=[],Ie=[];for(let Re=0;Re<L.length;Re++){const De=L[Re];if(De!=="cut")Ie.push(De);else{const Le=ne.shift(),qe=e[Re];Y(qe)&&qe.type==="polygon"&&qe.rings&&qe.rings.length>1&&Le.rings.length>=qe.rings.length?(ae.push(Le),Ie.push("simplify")):Ie.push(y?oa(Le):Le)}}if(!ae.length)return Ie;const Se=await bee(s,ae,i),Pe=[];for(let Re=0;Re<Ie.length;Re++){const De=Ie[Re];De!=="simplify"?Pe.push(De):Pe.push(y?oa(Se.shift()):Se.shift())}return Pe}const se=[];for(let ne=0;ne<L.length;ne++){const ae=L[ne];if(ae!=="cut")se.push(ae);else{const Ie=R.shift();se.push(y===!0?oa(Ie):Ie)}}return se}function nfe(e,t){const i=An(t);if(i){const[s,l]=i.valid,d=l-s;if(e<s)for(;e<s;)e+=d;if(e>l)for(;e>l;)e-=d}return e}function gP(e){const t={};for(const i in e){if(i==="declaredClass")continue;const s=e[i];if(s!=null&&typeof s!="function")if(Array.isArray(s)){t[i]=[];for(let l=0;l<s.length;l++)t[i][l]=gP(s[l])}else typeof s=="object"?s.toJSON&&(t[i]=JSON.stringify(s)):t[i]=s}return t}var pl;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(pl||(pl={}));const D8=4294967296,Eee=new TextDecoder("utf-8"),Aee=pe("safari")||pe("ios")?6:pe("ff")?12:32;class dh{constructor(t,i,s=0,l=t?t.byteLength:0){this._tag=0,this._dataType=pl.unknown,this._init(t,i,s,l)}_init(t,i,s,l){this._data=t,this._dataView=i,this._pos=s,this._end=l}clone(){return new dh(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,s=t.getUint32(i,!0)+t.getUint32(i+4,!0)*D8;return this._skip(8),s}getSFixed64(){const t=this._dataView,i=this._pos,s=t.getUint32(i,!0)+t.getInt32(i+4,!0)*D8;return this._skip(8),s}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,s=this._toString(this._data,i,i+t);return this._skip(t),s}getBytes(){const t=this._getLength(),i=this._pos,s=this._toBytes(this._data,i,i+t);return this._skip(t),s}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,s,l){const d=this.getMessage(),y=t(d,i,s,l);return d.release(),y}processMessage(t){const i=this.getMessage(),s=t(i);return i.release(),s}getMessage(){const t=this._getLength(),i=dh.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){dh.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case pl.varint:this._decodeVarint();break;case pl.fixed64:this._skip(8);break;case pl.delimited:this._skip(this._getLength());break;case pl.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i,s=this._pos,l=0;if(this._end-s>=10)do{if(i=t[s++],l|=127&i,(128&i)==0||(i=t[s++],l|=(127&i)<<7,(128&i)==0)||(i=t[s++],l|=(127&i)<<14,(128&i)==0)||(i=t[s++],l|=(127&i)<<21,(128&i)==0)||(i=t[s++],l+=268435456*(127&i),(128&i)==0)||(i=t[s++],l+=34359738368*(127&i),(128&i)==0)||(i=t[s++],l+=4398046511104*(127&i),(128&i)==0)||(i=t[s++],l+=562949953421312*(127&i),(128&i)==0)||(i=t[s++],l+=72057594037927940*(127&i),(128&i)==0)||(i=t[s++],l+=9223372036854776e3*(127&i),(128&i)==0))break;throw new Error("Varint too long!")}while(0);else{let d=1;for(;s!==this._end&&(i=t[s],(128&i)!=0);)++s,l+=(127&i)*d,d*=128;if(s===this._end)throw new Error("Varint overrun!");++s,l+=i*d}return this._pos=s,l}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==pl.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,s){if((s=Math.min(this._end,s))-i>Aee){const y=t.subarray(i,s);return Eee.decode(y)}let l="",d="";for(let y=i;y<s;++y){const g=t[y];128&g?d+="%"+g.toString(16):(l+=decodeURIComponent(d)+String.fromCharCode(g),d="")}return d.length&&(l+=decodeURIComponent(d)),l}_toBytes(t,i,s){return s=Math.min(this._end,s),new Uint8Array(t.buffer,i,s-i)}}dh.pool=new Pn(dh,null,e=>{e._data=null,e._dataView=null});class Tr{constructor(t=[],i=[],s=!1){this.lengths=t!=null?t:[],this.coords=i!=null?i:[],this.hasIndeterminateRingOrder=s}static fromRect(t){const[i,s,l,d]=t,y=l-i,g=d-s;return new Tr([5],[i,s,y,0,0,g,-y,0,0,-g])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let s=0;s<this.lengths.length;s++){const l=this.lengths[s];for(let d=0;d<l;d++)t(this.coords[2*(d+i)],this.coords[2*(d+i)+1]);i+=l}}clone(t){return t?(t.set(this.coords),new Tr(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new Tr(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class wo{constructor(t=null,i={},s,l){this.geometry=t,this.attributes=i,this.centroid=s,this.objectId=l,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new wo(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function kee(e){return!(he(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class ofe extends wo{}class o2{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new o2;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const vP=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class afe{constructor(t){this.options=t,this.geometryTypes=vP,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new o2}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||dr(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=Sp(this.options.sourceSpatialReference)/Sp(t.spatialReference);if(i!==1)for(const s of t.features){if(!kee(s))continue;const l=s.geometry.coords;for(let d=2;d<l.length;d+=3)l[d]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new wo}createSpatialReference(){return{wkid:0}}createGeometry(){return new Tr}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,s)=>i+s,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Tr}}const z8=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],V8=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],G8=["upperLeft","lowerLeft"];function q8(e){return e>=z8.length?null:z8[e]}function Oee(e){return e>=V8.length?null:V8[e]}function U8(e){return e>=G8.length?null:G8[e]}function B8(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function Cee(e,t,i){const l=t.createPointGeometry(i);for(;e.next();)switch(e.tag()){case 3:{const d=e.getUInt32(),y=e.pos()+d;let g=0;for(;e.pos()<y;)t.addCoordinatePoint(l,e.getSInt64(),g++);break}default:e.skip()}return l}function Pee(e,t,i){const d=t.createGeometry(i),y=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const g=e.getUInt32(),x=e.pos()+g;let $=0;for(;e.pos()<x;)t.addLength(d,e.getUInt32(),$++);break}case 3:{const g=e.getUInt32(),x=e.pos()+g;let $=0;for(t.allocateCoordinates(d);e.pos()<x;)t.addCoordinate(d,e.getSInt64(),$),$++,$===y&&($=0);break}default:e.skip()}return d}function Nee(e){const l=new Tr;let d="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const y=e.getUInt32(),g=e.pos()+y;for(;e.pos()<g;)l.lengths.push(e.getUInt32());break}case 3:{const y=e.getUInt32(),g=e.pos()+y;for(;e.pos()<g;)l.coords.push(e.getSInt64());break}case 1:d=vP[e.getEnum()];break;default:e.skip()}return{queryGeometry:l,queryGeometryType:d}}function Ree(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function jee(e){const g={type:q8(0)};for(;e.next();)switch(e.tag()){case 1:g.name=e.getString();break;case 2:g.type=q8(e.getEnum());break;case 3:g.alias=e.getString();break;case 4:g.sqlType=Oee(e.getEnum());break;case 5:e.skip();break;case 6:g.defaultValue=e.getString();break;default:e.skip()}return g}function Lee(e){const s={};for(;e.next();)switch(e.tag()){case 1:s.name=e.getString();break;case 2:s.isSystemMaintained=e.getBool();break;default:e.skip()}return s}function Fee(e,t,i,s){const g=t.createFeature(i);let x=0;for(;e.next();)switch(e.tag()){case 1:{const $=s[x++].name;g.attributes[$]=e.processMessage(Ree);break}case 2:g.geometry=e.processMessageWithArgs(Pee,t,i);break;case 4:g.centroid=e.processMessageWithArgs(Cee,t,i);break;default:e.skip()}return g}function Dee(e){const d=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:d[0]=e.getDouble();break;case 2:d[1]=e.getDouble();break;case 4:d[2]=e.getDouble();break;case 3:d[3]=e.getDouble();break;default:e.skip()}return d}function zee(e){const d=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:d[0]=e.getDouble();break;case 2:d[1]=e.getDouble();break;case 4:d[2]=e.getDouble();break;case 3:d[3]=e.getDouble();break;default:e.skip()}return d}function Vee(e){const l={originPosition:U8(0)};for(;e.next();)switch(e.tag()){case 1:l.originPosition=U8(e.getEnum());break;case 2:l.scale=e.processMessage(Dee);break;case 3:l.translate=e.processMessage(zee);break;default:e.skip()}return l}function Gee(e){const l={};for(;e.next();)switch(e.tag()){case 1:l.shapeAreaFieldName=e.getString();break;case 2:l.shapeLengthFieldName=e.getString();break;case 3:l.units=e.getString();break;default:e.skip()}return l}function qee(e,t){const g=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:g.wkid=e.getUInt32();break;case 5:g.wkt=e.getString();break;case 2:g.latestWkid=e.getUInt32();break;case 3:g.vcsWkid=e.getUInt32();break;case 4:g.latestVcsWkid=e.getUInt32();break;default:e.skip()}return g}function Uee(e,t){const z=t.createFeatureResult();z.geometryType=B8(t,0);let V=!1;for(;e.next();)switch(e.tag()){case 1:z.objectIdFieldName=e.getString();break;case 3:z.globalIdFieldName=e.getString();break;case 4:z.geohashFieldName=e.getString();break;case 5:z.geometryProperties=e.processMessage(Gee);break;case 7:z.geometryType=B8(t,e.getEnum());break;case 8:z.spatialReference=e.processMessageWithArgs(qee,t);break;case 10:z.hasZ=e.getBool();break;case 11:z.hasM=e.getBool();break;case 12:z.transform=e.processMessage(Vee);break;case 9:{const K=e.getBool();z.exceededTransferLimit=K;break}case 13:t.addField(z,e.processMessage(jee));break;case 15:V||(t.prepareFeatures(z),V=!0),t.addFeature(z,e.processMessageWithArgs(Fee,t,z,z.fields));break;case 2:z.uniqueIdField=e.processMessage(Lee);break;default:e.skip()}return t.finishFeatureResult(z),z}function Bee(e,t){const l={};let d=null;for(;e.next();)switch(e.tag()){case 4:d=e.processMessageWithArgs(Nee);break;case 1:l.featureResult=e.processMessageWithArgs(Uee,t);break;default:e.skip()}return Y(d)&&l.featureResult&&t.addQueryGeometry(l,d),l}function Hee(e,t){try{const s=new dh(new Uint8Array(e),new DataView(e)),l={};for(;s.next();)s.tag()===2?l.queryResult=s.processMessageWithArgs(Bee,t):s.skip();return l}catch(i){throw new te("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Wee(e,t){const i=Hee(e,t),s=i.queryResult.featureResult,l=i.queryResult.queryGeometry,d=i.queryResult.queryGeometryType;if(s&&s.features&&s.features.length&&s.objectIdFieldName){const y=s.objectIdFieldName;for(const g of s.features)g.attributes&&(g.objectId=g.attributes[y])}return s&&(s.queryGeometry=l,s.queryGeometryType=d),s}function D_(e,t,i){if(!i||!i.features||!i.hasZ)return;const s=HO(i.geometryType,t,e.outSpatialReference);if(!he(s))for(const l of i.features)s(l.geometry)}const H8="Layer does not support extent calculation.";function wP(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function bP(e,t){const i=e.geometry,s=e.toJSON();delete s.compactGeometryEnabled,delete s.defaultSpatialReferenceEnabled;const l=s;let d,y,g;if(Y(i)&&(y=i.spatialReference,g=i.spatialReference.wkid||JSON.stringify(i.spatialReference),l.geometryType=Dp(i),l.geometry=wP(i,e.compactGeometryEnabled),l.inSR=g),s.groupByFieldsForStatistics&&(l.groupByFieldsForStatistics=s.groupByFieldsForStatistics.join(",")),s.objectIds&&(l.objectIds=s.objectIds.join(",")),s.orderByFields&&(l.orderByFields=s.orderByFields.join(",")),!s.outFields||!s.returnDistinctValues&&((t==null?void 0:t.returnCountOnly)||(t==null?void 0:t.returnExtentOnly)||(t==null?void 0:t.returnIdsOnly))?delete l.outFields:s.outFields.includes("*")?l.outFields="*":l.outFields=s.outFields.join(","),s.outSR?(l.outSR=s.outSR.wkid||JSON.stringify(s.outSR),d=e.outSpatialReference):i&&(s.returnGeometry||s.returnCentroid)&&(l.outSR=l.inSR,d=y),s.returnGeometry&&delete s.returnGeometry,s.outStatistics&&(l.outStatistics=JSON.stringify(s.outStatistics)),s.pixelSize&&(l.pixelSize=JSON.stringify(s.pixelSize)),s.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&Y(y)&&Y(e.quantizationParameters)&&Y(e.quantizationParameters.extent)&&y.equals(e.quantizationParameters.extent.spatialReference)&&delete s.quantizationParameters.extent.spatialReference,l.quantizationParameters=JSON.stringify(s.quantizationParameters)),s.parameterValues&&(l.parameterValues=JSON.stringify(s.parameterValues)),s.rangeValues&&(l.rangeValues=JSON.stringify(s.rangeValues)),s.dynamicDataSource&&(l.layer=JSON.stringify({source:s.dynamicDataSource}),delete s.dynamicDataSource),s.timeExtent){const x=s.timeExtent,{start:$,end:E}=x;$==null&&E==null||(l.time=$===E?$:`${$==null?"null":$},${E==null?"null":E}`),delete s.timeExtent}return e.defaultSpatialReferenceEnabled&&Y(y)&&Y(d)&&y.equals(d)&&(l.defaultSR=l.inSR,delete l.inSR,delete l.outSR),l}async function _P(e,t,i,s){const l=Y(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await Qp(e,t,"json",s);return D_(t,i,l.data),l}async function Jee(e,t,i,s){if(Y(t.timeExtent)&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const l=await xP(e,t,s),d=l;return d.data=Wee(l.data,i),d}function xP(e,t,i){return Qp(e,t,"pbf",i)}function Kee(e,t,i){return Y(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Qp(e,t,"json",i,{returnIdsOnly:!0})}function Yee(e,t,i){return Y(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Qp(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function Xee(e,t,i){return Y(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Qp(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(s=>{const l=s.data;if(l.hasOwnProperty("extent"))return s;if(l.features)throw new Error(H8);if(l.hasOwnProperty("count"))throw new Error(H8);return s})}function Qp(e,t,i,s={},l={}){const d=typeof e=="string"?fi(e):e,y=t.geometry?[t.geometry]:[];return s.responseType=i==="pbf"?"array-buffer":"json",mP(y,null,s).then(g=>{const x=g&&g[0];Y(x)&&((t=t.clone()).geometry=x);const $=gP({...d.query,f:i,...l,...bP(t,l)});return Vt(Sh(d.path,"query"),{...s,query:{...$,...s.query}})})}var lfe=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:wP,executeQuery:_P,executeQueryForCount:Yee,executeQueryForExtent:Xee,executeQueryForIds:Kee,executeQueryPBF:Jee,executeQueryPBFBuffer:xP,queryToQueryStringParameters:bP,runQuery:Qp},Symbol.toStringTag,{value:"Module"}));async function Iw(e,t,i){const s=await Zee(e,t,i);return s1.fromJSON(s)}async function Zee(e,t,i){const s=dP(e),l={...i},d=Yi.from(t),{data:y}=await _P(s,d,d.sourceSpatialReference,l);return y}function er(e,t){return e?t?4:3:t?3:2}const ed=Me.getLogger("esri.layers.graphics.featureConversionUtils"),SP={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},$P=(e,t,i,s,l,d)=>{e[i]=l,e[i+1]=d},Bg=(e,t,i,s,l,d)=>{e[i]=l,e[i+1]=d,e[i+2]=t[s+2]},Qee=(e,t,i,s,l,d)=>{e[i]=l,e[i+1]=d,e[i+2]=t[s+3]},MP=(e,t,i,s,l,d)=>{e[i]=l,e[i+1]=d,e[i+2]=t[s+2],e[i+3]=t[s+3]};function Z6(e,t,i,s){if(e){if(i)return t&&s?MP:Bg;if(t&&s)return Qee}else if(t&&s)return Bg;return $P}function Tw({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function Ew({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function W8({scale:e,translate:t},i){return i*e[0]+t[0]}function J8({scale:e,translate:t},i){return t[1]-i*e[1]}function ufe(e,t,i){return e?t?i?tx(e):Q6(e):i?ex(e):a2(e):null}function a2(e){const t=e.coords;return{x:t[0],y:t[1]}}function IP(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function Q6(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function ete(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function ex(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function tte(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function tx(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function ite(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function rte(e,t,i,s){let l=a2;i&&s?l=tx:i?l=Q6:s&&(l=ex);for(const d of t){const{geometry:y,attributes:g}=d,x=Y(y)?l(y):null;e.push({attributes:g,geometry:x})}return e}function TP(e,t){return e&&t?ite:e?ete:t?tte:IP}function EP(e,t,i,s,l){const d=TP(i,s);for(const y of t){const{geometry:g,attributes:x}=y;let $;g&&($=d(new Tr,g)),e.push(new wo($,x,null,x[l]))}return e}function ste(e,t,i,s){for(const l of t){const{geometry:d,attributes:y}=l;let g;d&&(g=AP(d,i,s)),e.push({attributes:y,geometry:g})}return e}function AP(e,t,i){if(he(e))return null;const s=er(t,i),l=[];for(let d=0;d<e.coords.length;d+=s){const y=[];for(let g=0;g<s;g++)y.push(e.coords[d+g]);l.push(y)}return t?i?{points:l,hasZ:t,hasM:i}:{points:l,hasZ:t}:i?{points:l,hasM:i}:{points:l}}function kP(e,t,i,s,l){const d=er(i,s);for(const y of t){const g=y.geometry,x=y.attributes;let $;g&&($=OP(new Tr,g,d)),e.push(new wo($,x,null,x[l]))}return e}function OP(e,t,i=er(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const s=e.coords;let l=0;for(const d of t.points)for(let y=0;y<i;y++)s[l++]=d[y];return e}function nte(e,t,i,s){for(const l of t){const{geometry:d,attributes:y}=l;let g;Y(d)&&(g=CP(d,i,s)),e.push({attributes:y,geometry:g})}return e}function CP(e,t,i){if(!e)return null;const s=er(t,i),{coords:l,lengths:d}=e,y=[];let g=0;for(const x of d){const $=[];for(let E=0;E<x;E++){const O=[];for(let P=0;P<s;P++)O.push(l[g++]);$.push(O)}y.push($)}return t?i?{paths:y,hasZ:t,hasM:i}:{paths:y,hasZ:t}:i?{paths:y,hasM:i}:{paths:y}}function PP(e,t,i,s,l){const d=er(i,s);for(const y of t){const g=y.geometry,x=y.attributes;let $;g&&($=NP(new Tr,g,d)),e.push(new wo($,x,null,x[l]))}return e}function NP(e,t,i=er(t.hasZ,t.hasM)){const{lengths:s,coords:l}=e;let d=0;for(const y of t.paths){for(const g of y)for(let x=0;x<i;x++)l[d++]=g[x];s.push(y.length)}return e}function ote(e,t,i,s){for(const l of t){const{geometry:d,attributes:y,centroid:g}=l;let x;if(Y(d)&&(x=RP(d,i,s)),Y(g)){const $=a2(g);e.push({attributes:y,centroid:$,geometry:x})}else e.push({attributes:y,geometry:x})}return e}function RP(e,t,i){if(!e)return null;const s=er(t,i),{coords:l,lengths:d}=e,y=[];let g=0;for(const x of d){const $=[];for(let E=0;E<x;E++){const O=[];for(let P=0;P<s;P++)O.push(l[g++]);$.push(O)}y.push($)}return t?i?{rings:y,hasZ:t,hasM:i}:{rings:y,hasZ:t}:i?{rings:y,hasM:i}:{rings:y}}function jP(e,t,i,s,l){for(const d of t){const y=d.geometry,g=d.centroid,x=d.attributes;let $;y&&($=LP(new Tr,y,i,s)),Y(g)?e.push(new wo($,x,IP(new Tr,g),x[l])):e.push(new wo($,x,null,x[l]))}return e}function LP(e,t,i=t.hasZ,s=t.hasM){return ate(e,t.rings,i,s),e}function ate(e,t,i,s){const l=er(i,s),{lengths:d,coords:y}=e;let g=0;d.length=y.length=0;for(const x of t){for(const $ of x)for(let E=0;E<l;E++)y[g++]=$[E];d.push(x.length)}return e}const dp=[],Z0=[];function hfe(e,t,i,s,l){dp[0]=e;const[d]=FP(Z0,dp,t,i,s,l);return dp.length=Z0.length=0,d}function FP(e,t,i,s,l,d){if(e.length=0,!i){for(const y of t){const g=y.attributes[d];e.push(new wo(null,y.attributes,null,g))}return e}switch(i){case"esriGeometryPoint":return EP(e,t,s,l,d);case"esriGeometryMultipoint":return kP(e,t,s,l,d);case"esriGeometryPolyline":return PP(e,t,s,l,d);case"esriGeometryPolygon":return jP(e,t,s,l,d);default:ed.error("convertToFeatureSet:unknown-geometry",new te(`Unable to parse unknown geometry type '${i}'`)),e.length=0}return e}function cfe(e,t,i,s,l,d){const y=e.length;switch(i){case"esriGeometryPoint":EP(e,t,s,l,d);break;case"esriGeometryMultipoint":kP(e,t,s,l,d);break;case"esriGeometryPolyline":PP(e,t,s,l,d);break;case"esriGeometryPolygon":jP(e,t,s,l,d);break;default:ed.error("convertToFeatureSet:unknown-geometry",new te(`Unable to parse unknown geometry type '${i}'`))}for(let g=0;g<t.length;g++)e[g+y].geometryType=i,e[g+y].insertAfter=t[g].insertAfter,e[g+y].groupId=t[g].groupId;return e}function pfe(e,t,i,s){Z0[0]=e,DP(dp,Z0,t,i,s);const l=dp[0];return dp.length=Z0.length=0,l}function dfe(e,t,i){if(he(e))return null;const s=new Tr;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),x4(e)?TP(t!=null?t:e.z!=null,i!=null?i:e.m!=null)(s,e):uh(e)?LP(s,e,t,i):S4(e)?NP(s,e,er(t,i)):_4(e)?OP(s,e,er(t,i)):void ed.error("convertFromGeometry:unknown-geometry",new te(`Unable to parse unknown geometry type '${e}'`))}function lte(e,t,i,s){const l=e&&("coords"in e?e:e.geometry);if(he(l))return null;switch(t){case"esriGeometryPoint":{let d=a2;return i&&s?d=tx:i?d=Q6:s&&(d=ex),d(l)}case"esriGeometryMultipoint":return AP(l,i,s);case"esriGeometryPolyline":return CP(l,i,s);case"esriGeometryPolygon":return RP(l,i,s);default:return void ed.error("convertToGeometry:unknown-geometry",new te(`Unable to parse unknown geometry type '${t}'`))}}function ute(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function DP(e,t,i,s,l){if(e.length=0,he(i))return ute(e,t);switch(i){case"esriGeometryPoint":return rte(e,t,s,l);case"esriGeometryMultipoint":return ste(e,t,s,l);case"esriGeometryPolyline":return nte(e,t,s,l);case"esriGeometryPolygon":return ote(e,t,s,l);default:ed.error("convertToFeatureSet:unknown-geometry",new te(`Unable to parse unknown geometry type '${i}'`))}return e}function ffe(e){const{objectIdFieldName:t,spatialReference:i,transform:s,fields:l,hasM:d,hasZ:y,features:g,geometryType:x,exceededTransferLimit:$,uniqueIdField:E,queryGeometry:O,queryGeometryType:P}=e,R={features:DP([],g,x,y,d),fields:l,geometryType:x,objectIdFieldName:t,spatialReference:i,uniqueIdField:E,queryGeometry:lte(O,P,!1,!1)};return s&&(R.transform=s),$&&(R.exceededTransferLimit=$),d&&(R.hasM=d),y&&(R.hasZ=y),R}function yfe(e,t){const i=new o2,{hasM:s,hasZ:l,features:d,objectIdFieldName:y,spatialReference:g,geometryType:x,exceededTransferLimit:$,transform:E,fields:O}=e;return O&&(i.fields=O),i.geometryType=x,i.objectIdFieldName=y||t,i.spatialReference=g,i.objectIdFieldName?(d&&FP(i.features,d,x,l,s,i.objectIdFieldName),$&&(i.exceededTransferLimit=$),s&&(i.hasM=s),l&&(i.hasZ=l),E&&(i.transform=E),i):(ed.error(new te("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function mfe(e){const{transform:t,features:i,hasM:s,hasZ:l}=e;if(!t)return e;for(const d of i)Y(d.geometry)&&Y8(d.geometry,d.geometry,s,l,t),Y(d.centroid)&&Y8(d.centroid,d.centroid,s,l,t);return e.transform=null,e}function gfe(e,t){const{geometryType:i,features:s,hasM:l,hasZ:d}=t;if(!e)return t;for(let y=0;y<s.length;y++){const g=s[y],x=g.weakClone();x.geometry=new Tr,K8(x.geometry,g.geometry,l,d,i,e),g.centroid&&(x.centroid=new Tr,K8(x.centroid,g.centroid,l,d,"esriGeometryPoint",e)),s[y]=x}return t.transform=e,t}function K8(e,t,i,s,l,d,y=i,g=s){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),he(t)||!t.coords.length)return null;const x=SP[l],{coords:$,lengths:E}=t,O=er(i,s),P=er(i&&y,s&&g),R=Z6(i,s,y,g);if(!E.length)return R(e.coords,$,0,0,Tw(d,$[0]),Ew(d,$[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=O,e;let L,z,V,K,ee=0,se=0,oe=se;for(const ne of E){if(ne<x)continue;let ae=0;se=oe,V=L=Tw(d,$[ee]),K=z=Ew(d,$[ee+1]),R(e.coords,$,se,ee,V,K),ae++,ee+=O,se+=P;for(let Ie=1;Ie<ne;Ie++,ee+=O)V=Tw(d,$[ee]),K=Ew(d,$[ee+1]),V===L&&K===z||(R(e.coords,$,se,ee,V-L,K-z),se+=P,ae++,L=V,z=K);ae>=x&&(e.lengths.push(ae),oe=se)}return e.coords.length=oe,e.coords.length?e:null}function vfe(e,t,i,s,l,d,y=i,g=s){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const x=SP[l],{coords:$,lengths:E}=t,O=er(i,s),P=er(i&&y,s&&g),R=Z6(i,s,y,g);if(!E.length)return R(e.coords,$,0,0,$[0],$[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=O,e;let L=0;const z=d*d;for(const V of E){if(V<x){L+=V*O;continue}const K=e.coords.length/P,ee=L,se=L+(V-1)*O;R(e.coords,$,e.coords.length,ee,$[ee],$[ee+1]),z_(e.coords,$,O,z,R,ee,se),R(e.coords,$,e.coords.length,se,$[se],$[se+1]);const oe=e.coords.length/P-K;oe>=x?e.lengths.push(oe):e.coords.length=K*P,L+=V*O}return e.coords.length?e:null}function hte(e,t,i,s){const l=e[t],d=e[t+1],y=e[i],g=e[i+1],x=e[s],$=e[s+1];let E=y,O=g,P=x-E,R=$-O;if(P!==0||R!==0){const L=((l-E)*P+(d-O)*R)/(P*P+R*R);L>1?(E=x,O=$):L>0&&(E+=P*L,O+=R*L)}return P=l-E,R=d-O,P*P+R*R}function z_(e,t,i,s,l,d,y){let g,x=s,$=0;for(let E=d+i;E<y;E+=i)g=hte(t,E,d,y),g>x&&($=E,x=g);x>s&&($-d>i&&z_(e,t,i,s,l,d,$),l(e,t,e.length,$,t[$],t[$+1]),y-$>i&&z_(e,t,i,s,l,$,y))}function wfe(e,t,i,s){if(he(t)||!t.coords||!t.coords.length)return null;const l=er(i,s);let d=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,x=Number.NEGATIVE_INFINITY;if(t&&t.coords){const $=t.coords;for(let E=0;E<$.length;E+=l){const O=$[E],P=$[E+1];d=Math.min(d,O),g=Math.max(g,O),y=Math.min(y,P),x=Math.max(x,P)}}return e[0]=d,e[1]=y,e[2]=g,e[3]=x,e}function Y8(e,t,i,s,l){const{coords:d,lengths:y}=t,g=i?s?MP:Bg:s?Bg:$P,x=er(i,s);if(!d.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!y.length)return g(e.coords,d,0,0,W8(l,d[0]),J8(l,d[1])),e!==t&&(e.lengths.length=0,e.coords.length=x),e;const[$,E]=l.scale;let O=0;for(let P=0;P<y.length;P++){const R=y[P];e.lengths[P]=R;let L=W8(l,d[O]),z=J8(l,d[O+1]);g(e.coords,d,O,O,L,z),O+=x;for(let V=1;V<R;V++,O+=x)L+=d[O]*$,z-=d[O+1]*E,g(e.coords,d,O,O,L,z)}return e!==t&&(e.lengths.length=y.length,e.coords.length=d.length),e}function bfe(e,t,i,s,l,d){const y=er(i,s),g=Z6(i,s,l,d),x=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let $=0;$<x.length;$+=y)g(e.coords,x,e.coords.length,$,x[$],x[$+1]);return e}function cte(e,t,i,s){let l=0,d=e[s*t],y=e[s*(t+1)];for(let g=1;g<i;g++){const x=d+e[s*(t+g)],$=y+e[s*(t+g)+1],E=(x-d)*($+y);d=x,y=$,l+=E}return .5*l}function _fe(e,t){const{coords:i,lengths:s}=e;let l=0,d=0;for(let y=0;y<s.length;y++)d+=cte(i,l,s[y],t),l+=y;return Math.abs(d)}function xfe(e,t){if(he(e))return null;const i=e.clone(),s=e.coords,l=e.lengths;let d=0;for(let y=0;y<l.length;y++){const g=l[y];let x=s[t*d],$=s[t*d+1];for(let E=1;E<g;E++){const O=x+s[t*(d+E)],P=$+s[t*(d+E)+1];i.coords[t*(d+E)]=O,i.coords[t*(d+E)+1]=P,x=O,$=P}d+=g}return i}var V_;let Kt=V_=class extends ce{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new V_(ie({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};v([_({type:Boolean,json:{write:!0}})],Kt.prototype,"cacheHint",void 0),v([_({type:$n,json:{write:!0}})],Kt.prototype,"dynamicDataSource",void 0),v([_({type:String,json:{write:!0}})],Kt.prototype,"gdbVersion",void 0),v([_({type:Number,json:{write:!0}})],Kt.prototype,"geometryPrecision",void 0),v([_({type:Date})],Kt.prototype,"historicMoment",void 0),v([Ee("historicMoment")],Kt.prototype,"_writeHistoricMoment",null),v([_({type:Number,json:{write:!0}})],Kt.prototype,"maxAllowableOffset",void 0),v([_({type:[Number],json:{write:!0}})],Kt.prototype,"objectIds",void 0),v([_({type:[String],json:{write:!0}})],Kt.prototype,"orderByFields",void 0),v([_({type:[String],json:{write:!0}})],Kt.prototype,"outFields",void 0),v([_({type:Ye,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Kt.prototype,"outSpatialReference",void 0),v([_({json:{write:!0}})],Kt.prototype,"relationshipId",void 0),v([_({type:Number,json:{read:{source:"resultOffset"}}})],Kt.prototype,"start",void 0),v([Ee("start"),Ee("num")],Kt.prototype,"writeStart",null),v([_({type:Number,json:{read:{source:"resultRecordCount"}}})],Kt.prototype,"num",void 0),v([_({json:{write:!0}})],Kt.prototype,"returnGeometry",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Kt.prototype,"returnM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Kt.prototype,"returnZ",void 0),v([_({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Kt.prototype,"where",void 0),Kt=V_=v([H("esri.rest.support.RelationshipQuery")],Kt),Kt.from=ni(Kt);const G_=Kt;var q_;let _c=q_=class extends ce{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new q_({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};v([_({type:[String],json:{write:!0}})],_c.prototype,"groupByFields",void 0),v([_({type:Number,json:{write:!0}})],_c.prototype,"topCount",void 0),v([_({type:[String],json:{write:!0}})],_c.prototype,"orderByFields",void 0),_c=q_=v([H("esri.rest.support.TopFilter")],_c);const pte=_c;var U_;const X8=new tt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Z8=new tt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let qt=U_=class extends ce{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new U_(ie({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};v([_({type:Boolean,json:{write:!0}})],qt.prototype,"cacheHint",void 0),v([_({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],qt.prototype,"distance",void 0),v([_({types:Ll,json:{read:ha,write:!0}})],qt.prototype,"geometry",void 0),v([_({type:Number,json:{write:!0}})],qt.prototype,"geometryPrecision",void 0),v([_({type:Number,json:{write:!0}})],qt.prototype,"maxAllowableOffset",void 0),v([_({type:Number,json:{read:{source:"resultRecordCount"}}})],qt.prototype,"num",void 0),v([_({json:{write:!0}})],qt.prototype,"objectIds",void 0),v([_({type:[String],json:{write:!0}})],qt.prototype,"orderByFields",void 0),v([_({type:[String],json:{write:!0}})],qt.prototype,"outFields",void 0),v([_({type:Ye,json:{read:{source:"outSR"},write:{target:"outSR"}}})],qt.prototype,"outSpatialReference",void 0),v([_({type:String,json:{write:!0}})],qt.prototype,"resultType",void 0),v([_({json:{write:!0}})],qt.prototype,"returnGeometry",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qt.prototype,"returnM",void 0),v([_({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qt.prototype,"returnZ",void 0),v([_({type:Number,json:{read:{source:"resultOffset"}}})],qt.prototype,"start",void 0),v([Ee("start"),Ee("num")],qt.prototype,"writeStart",null),v([_({type:String,json:{read:{source:"spatialRel",reader:X8.read},write:{target:"spatialRel",writer:X8.write}}})],qt.prototype,"spatialRelationship",void 0),v([_({type:kr,json:{write:!0}})],qt.prototype,"timeExtent",void 0),v([_({type:pte,json:{write:!0}})],qt.prototype,"topFilter",void 0),v([_({type:String,json:{read:Z8.read,write:{writer:Z8.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],qt.prototype,"units",void 0),v([_({type:String,json:{write:!0}})],qt.prototype,"where",void 0),qt=U_=v([H("esri.rest.support.TopFeaturesQuery")],qt),qt.from=ni(qt);const ry=qt,dte="esri.widgets.Feature.support.relatedFeatureUtils",Q8=Me.getLogger(dte),e$=new Map;function B_(e){if(!ia(e))return null;const[t,i]=e.split("/").slice(1);return{layerId:t,fieldName:i}}function fte(e,t){if(!t.relationships)return null;let i=null;const{relationships:s}=t;return s.some(l=>l.id===parseInt(e,10)&&(i=l,!0)),i}function yte({originRelationship:e,relationships:t,layerId:i}){let s;return t&&t.some(l=>(`${l.relatedTableId}`===i&&l.id===e.id&&(s=l),!!s)),s}function mte(e,t){const i=t.toLowerCase();for(const s in e)if(s.toLowerCase()===i)return e[s];return null}function gte(e,t){const i=fte(e,t);if(!!i)return{url:`${t.url}/${i.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function vte(e,t){if(!t||!e)return;const{features:i,statsFeatures:s}=e,l=i&&i.value;t.relatedFeatures=l?l.features:[];const d=s&&s.value;t.relatedStatsFeatures=d?d.features:[]}function wte(e,t,i,s){const l=new G_;return l.outFields=["*"],l.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),l.objectIds=[e.attributes[i.objectIdField]],i.queryRelatedFeatures(l,s)}function bte(e,t,i){let s=0;const l=[];for(;s<t.length;)l.push(`${e} IN (${t.slice(s,i+s)})`),s+=i;return l.join(" OR ")}async function _te(e,t,i,s){const l=i.layerId.toString(),{layerInfo:d,relation:y,relatedFields:g,outStatistics:x,url:$,sourceSpatialReference:E}=t,O=yte({originRelationship:y,relationships:d.relationships,layerId:l});if(O.relationshipTableId&&O.keyFieldInRelationshipTable){const R=(await wte(e,O,i,s))[e.attributes[i.objectIdField]];if(!R)return null;const L=R.features.map(z=>z.attributes[d.objectIdField]);if((x==null?void 0:x.length)>0&&d.supportsStatistics){const z=new Yi;z.where=bte(d.objectIdField,L,1e3),z.outFields=g,z.outStatistics=x,z.sourceSpatialReference=E;const V={features:Promise.resolve(R),statsFeatures:Iw($,z)};return qi(V)}}const P=O==null?void 0:O.keyField;if(P){const R=T4(Ite(d.fields,P)),L=mte(e.attributes,y.keyField),z=R?`${P}=${L}`:`${P}='${L}'`,V=Iw($,new Yi({where:z,outFields:t.relatedFields,sourceSpatialReference:E}),s),K=t.outStatistics&&t.outStatistics.length>0&&d.supportsStatistics?Iw($,new Yi({where:z,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:E}),s):null,ee={features:V};return K&&(ee.statsFeatures=K),qi(ee)}return null}function xte(e,t){return Vt(e,{query:{f:"json"},signal:t&&t.signal})}function Ste({relatedInfos:e,layer:t},i){const s={};return e.forEach((l,d)=>{const{relation:y}=l;if(!y){const O=new te("relation-required","A relation is required on a layer to retrieve related records.");throw Q8.error(O),O}const{relatedTableId:g}=y;if(typeof g!="number"){const O=new te("A related table ID is required on a layer to retrieve related records.");throw Q8.error(O),O}const x=`${t.url}/${g}`,$=e$.get(x),E=$||xte(x,i);$||e$.set(x,E),s[d]=E}),qi(s)}function $te({graphic:e,relatedInfos:t,layer:i},s){const l={};return t.forEach((d,y)=>{d.layerInfo&&(l[y]=_te(e,d,i,s))}),qi(l)}function Mte({relatedInfo:e,fieldName:t,fieldInfo:i}){if(e.relatedFields.push(t),i.statisticType){const s=new hO({statisticType:i.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(s)}}function Ite(e,t){if(e!=null){t=t.toLowerCase();for(const i of e)if(i&&i.name.toLowerCase()===t)return i}return null}const t$={chartAnimation:!0};let Ni=class extends ze{constructor(e){super(e),this.abilities={...t$},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...t$,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,i=(e+t)%t;this.activeMediaInfoIndex=i}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,i=t+e;this._setContentElementMedia(i)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:i,expressionAttributes:s,fieldInfoMap:l,layer:d}=this;return t==null?void 0:t.map(y=>{const g=y==null?void 0:y.clone();if(!g)return null;if(g.title=sh({attributes:e,fieldInfoMap:l,globalAttributes:i,expressionAttributes:s,layer:d,text:g.title}),g.caption=sh({attributes:e,fieldInfoMap:l,globalAttributes:i,expressionAttributes:s,layer:d,text:g.caption}),g.altText=sh({attributes:e,fieldInfoMap:l,globalAttributes:i,expressionAttributes:s,layer:d,text:g.altText}),g.type==="image"){const{value:x}=g;return this._setImageValue({value:x,formattedAttributes:i,layer:d}),g.value.sourceURL?g:void 0}if(g.type==="pie-chart"||g.type==="line-chart"||g.type==="column-chart"||g.type==="bar-chart"){const{value:x}=g;return this._setChartValue({value:x,chartType:g.type,attributes:e,formattedAttributes:i,layer:d}),g}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:i,formattedAttributes:s,layer:l}=e,{linkURL:d,sourceURL:y}=i;if(y){const g=F_(y,l);i.sourceURL=L_({formattedAttributes:s,template:g,fieldInfoMap:t})}if(d){const g=F_(d,l);i.linkURL=L_({formattedAttributes:s,template:g,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:i,formattedAttributes:s,chartType:l,layer:d}=e,{popupTemplate:y,relatedInfos:g}=this,{fields:x,normalizeField:$}=t;if(t.fields=eQ(x,d),$&&(t.normalizeField=qg($,d)),!x.some(O=>!!(s[O]!=null||ia(O)&&g.size)))return;const E=y==null?void 0:y.fieldInfos;x.forEach(O=>{if(ia(O))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:E,fieldName:O,formattedAttributes:s,chartType:l,value:t})]);const P=this._getChartOption({value:t,attributes:i,chartType:l,formattedAttributes:s,fieldName:O,fieldInfos:E});t.series.push(P)})}_getRelatedChartInfos(e){var L;const{fieldInfos:t,fieldName:i,formattedAttributes:s,chartType:l,value:d}=e,y=[],g=B_(i),{layerId:x,fieldName:$}=g,E=(L=this.relatedInfos)==null?void 0:L.get(x.toString());if(!E)return y;const{relatedFeatures:O,relation:P}=E;if(!P||!O)return y;const{cardinality:R}=P;return O.forEach(z=>{const{attributes:V}=z;V&&Object.keys(V).forEach(K=>{K===$&&y.push(this._getChartOption({value:d,attributes:V,formattedAttributes:s,fieldName:i,chartType:l,relatedFieldName:K,fieldInfos:t}))})}),R==="one-to-many"||R==="many-to-many"?y:[y[0]]}_getTooltip({label:e,value:t,chartType:i}){return i==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var se,oe,ne,ae,Ie,Se;const{value:t,attributes:i,formattedAttributes:s,fieldName:l,relatedFieldName:d,fieldInfos:y,chartType:g}=e,{layer:x,fieldInfoMap:$}=this,{normalizeField:E,tooltipField:O}=t,P=E?ia(E)?i[B_(E).fieldName]:i[E]:null,R=d&&i[d]!==void 0?i[d]:i[l]!==void 0?i[l]:s[l],L=new gE({fieldName:l,value:R===void 0?null:R&&P?R/P:R});if(ia(l)){const Pe=$.get(l.toLowerCase()),Re=$.get(O.toLowerCase()),De=(se=Pe==null?void 0:Pe.fieldName)!=null?se:l,Le=(Ie=(ae=(ne=s[(oe=Re==null?void 0:Re.fieldName)!=null?oe:O])!=null?ne:Pe==null?void 0:Pe.label)!=null?ae:Pe==null?void 0:Pe.fieldName)!=null?Ie:d,qe=s[De];return L.tooltip=this._getTooltip({label:Le,value:qe,chartType:g}),L}const z=iP(y,l),V=qg(l,x),K=O&&s[O]!==void 0?s[O]:eP(z||new Hf({fieldName:V}),(Se=this.popupTemplate)==null?void 0:Se.expressionInfos),ee=s[V];return L.tooltip=this._getTooltip({label:K,value:ee,chartType:g}),L}};v([_()],Ni.prototype,"abilities",void 0),v([mt("abilities")],Ni.prototype,"castAbilities",null),v([_()],Ni.prototype,"activeMediaInfoIndex",void 0),v([_({readOnly:!0})],Ni.prototype,"activeMediaInfo",null),v([_()],Ni.prototype,"attributes",void 0),v([_()],Ni.prototype,"description",void 0),v([_()],Ni.prototype,"fieldInfoMap",void 0),v([_()],Ni.prototype,"formattedAttributes",void 0),v([_()],Ni.prototype,"expressionAttributes",void 0),v([_({readOnly:!0})],Ni.prototype,"formattedMediaInfos",null),v([_()],Ni.prototype,"layer",void 0),v([_({readOnly:!0})],Ni.prototype,"formattedMediaInfoCount",null),v([_()],Ni.prototype,"mediaInfos",void 0),v([_()],Ni.prototype,"popupTemplate",void 0),v([_()],Ni.prototype,"relatedInfos",void 0),v([_()],Ni.prototype,"title",void 0),Ni=v([H("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Ni);const oh=Ni;var i$=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],Tte=[].concat(i$.slice(30,39),i$.slice(28,30).reverse()),Ete=[{name:"default",colors:Tte},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const r$="en-us",ix=new Map([["ar",()=>fe(()=>import("./ar.5d7bdca7.js"),["assets/ar.5d7bdca7.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.a)],["bg-bg",()=>fe(()=>import("./bg_BG.e6ba29c2.js"),["assets/bg_BG.e6ba29c2.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.b)],["bs-ba",()=>fe(()=>import("./bs_BA.14911a00.js"),["assets/bs_BA.14911a00.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.b)],["ca-es",()=>fe(()=>import("./ca_ES.1a938920.js"),["assets/ca_ES.1a938920.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.c)],["cs-cz",()=>fe(()=>import("./cs_CZ.8624de8a.js"),["assets/cs_CZ.8624de8a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.c)],["da-dk",()=>fe(()=>import("./da_DK.aef5a9c8.js"),["assets/da_DK.aef5a9c8.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["de-de",()=>fe(()=>import("./de_DE.b08b4cf1.js"),["assets/de_DE.b08b4cf1.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["de-ch",()=>fe(()=>import("./de_CH.0b6cd702.js"),["assets/de_CH.0b6cd702.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["el-gr",()=>fe(()=>import("./el_GR.8e618bc9.js"),["assets/el_GR.8e618bc9.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["en-us",()=>fe(()=>import("./en_US.41c717af.js"),["assets/en_US.41c717af.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["en-ca",()=>fe(()=>import("./en_CA.f60d00bf.js"),["assets/en_CA.f60d00bf.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["es-es",()=>fe(()=>import("./es_ES.1f0f76f4.js"),["assets/es_ES.1f0f76f4.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["et-ee",()=>fe(()=>import("./et_EE.a7babafb.js"),["assets/et_EE.a7babafb.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["fi-fi",()=>fe(()=>import("./fi_FI.fdc0a8b3.js"),["assets/fi_FI.fdc0a8b3.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.f)],["fr-fr",()=>fe(()=>import("./fr_FR.9fb72c1a.js"),["assets/fr_FR.9fb72c1a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.f)],["he-il",()=>fe(()=>import("./he_IL.3941bb8a.js"),["assets/he_IL.3941bb8a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["hr-hr",()=>fe(()=>import("./hr_HR.0f5af0f2.js"),["assets/hr_HR.0f5af0f2.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["hu-hu",()=>fe(()=>import("./hu_HU.b4dae139.js"),["assets/hu_HU.b4dae139.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["id-id",()=>fe(()=>import("./id_ID.f5b918ea.js"),["assets/id_ID.f5b918ea.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.i)],["it-it",()=>fe(()=>import("./it_IT.94769a92.js"),["assets/it_IT.94769a92.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.i)],["ja-jp",()=>fe(()=>import("./ja_JP.8eb86db8.js"),["assets/ja_JP.8eb86db8.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.j)],["ko-kr",()=>fe(()=>import("./ko_KR.8ba7fd29.js"),["assets/ko_KR.8ba7fd29.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.k)],["lt-lt",()=>fe(()=>import("./lt_LT.d8c1cc92.js"),["assets/lt_LT.d8c1cc92.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.l)],["lv-lv",()=>fe(()=>import("./lv_LV.ceb923a4.js"),["assets/lv_LV.ceb923a4.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.l)],["nb-no",()=>fe(()=>import("./nb_NO.d0457d8e.js"),["assets/nb_NO.d0457d8e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.n)],["nl-nl",()=>fe(()=>import("./nl_NL.fbf1ad03.js"),["assets/nl_NL.fbf1ad03.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.n)],["pl-pl",()=>fe(()=>import("./pl_PL.44d49398.js"),["assets/pl_PL.44d49398.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["pt-br",()=>fe(()=>import("./pt_BR.89b1d3a7.js"),["assets/pt_BR.89b1d3a7.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["pt-pt",()=>fe(()=>import("./pt_PT.2abd4e91.js"),["assets/pt_PT.2abd4e91.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["ro-ro",()=>fe(()=>import("./ro_RO.fb4fff60.js"),["assets/ro_RO.fb4fff60.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.r)],["ru-ru",()=>fe(()=>import("./ru_RU.684f53ee.js"),["assets/ru_RU.684f53ee.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.r)],["sk-sk",()=>fe(()=>import("./sk_SK.eaca904e.js"),["assets/sk_SK.eaca904e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sl-sl",()=>fe(()=>import("./sl_SL.cff9b92a.js"),["assets/sl_SL.cff9b92a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sr-rs",()=>fe(()=>import("./sr_RS.44ddc4cf.js"),["assets/sr_RS.44ddc4cf.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sv-se",()=>fe(()=>import("./sv_SE.16043ad0.js"),["assets/sv_SE.16043ad0.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["th-th",()=>fe(()=>import("./th_TH.99f2a35e.js"),["assets/th_TH.99f2a35e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.t)],["tr-tr",()=>fe(()=>import("./tr_TR.ab1c9f2f.js"),["assets/tr_TR.ab1c9f2f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.t)],["uk-ua",()=>fe(()=>import("./uk_UA.ae3608ad.js"),["assets/uk_UA.ae3608ad.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.u)],["vi-vn",()=>fe(()=>import("./vi_VN.7d19f32e.js"),["assets/vi_VN.7d19f32e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.v)],["zh-cn",()=>fe(()=>import("./zh_Hans.0f482448.js"),["assets/zh_Hans.0f482448.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)],["zh-hk",()=>fe(()=>import("./zh_Hant.f458376f.js"),["assets/zh_Hant.f458376f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)],["zh-tw",()=>fe(()=>import("./zh_Hant.f458376f.js"),["assets/zh_Hant.f458376f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)]]);function Ate(e){const t=e.split("-")[0].toLowerCase();let i=null;for(const s of ix.keys())if(s.startsWith(t)){i=s;break}return i}function kte(e){return e?ix.has(e.toLowerCase())?e.toLowerCase():Ate(e)||r$:r$}let Jh,_d;async function Ote(e=ds()){if(e=kte(e),Jh&&e===_d)return Jh;Jh=fe(()=>import("./index.7ba26017.js"),["assets/index.7ba26017.js","assets/_commonjsHelpers.01f5fe30.js"]).then(t=>t.i),_d=e;try{const[t,i]=await Promise.all([Jh,ix.get(_d)()]);_d===e&&(t.am4core.options.defaultLocale=i.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return Jh=null,_d=null,null}return Jh}function Cte(e,t="default"){const i=Ete.find(s=>s.name===t);return i?i.colors.map(s=>e.color(s)):null}const ei={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},Aw=.05,kw=.95,Ow=15,Io="color",Ia="tooltip",xd="value",s$="default-line-value";let Fr=class extends Cr{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new oh,this.messages=null,this._getChartDependencies=async i=>{const s=await Ote(),{destroyed:l,viewModel:d}=this;if(l||!d||!i)return;const{activeMediaInfo:y}=d,g=await this._getRendererColors(s);this._renderChart({chartDiv:i,mediaInfo:y,chartsModule:s,colorMap:g})}}initialize(){this._featureElementInfo=new X6,this.own([Te(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(t=this.viewModel)==null?void 0:t.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),Ot),Te(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),Ot)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return le("div",{bind:this,class:ei.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?le("div",{key:"media-element-container",class:ei.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:s}=this.viewModel,{value:l,refreshInterval:d,altText:y,title:g,type:x}=e,{sourceURL:$,linkURL:E}=l,O=ZC(E)?"_blank":"_self",P=O==="_blank"?"noreferrer":"",R=d?t:null,L=R?R.timestamp:0,z=R?R.sourceURL:$,V=le("img",{alt:y||g,key:`media-${x}-${i}-${s}-${L}`,src:z});return(E?le("a",{title:g,href:E,rel:P,target:O},V):null)||V}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return le("div",{key:`media-${e.type}-${t}-${i}`,bind:this,class:ei.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?le("div",{key:"media-title",class:ei.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?le("div",{key:"media-caption",class:ei.mediaItemCaption,innerHTML:e.caption}):null;return le("div",{key:"media-container",class:ei.mediaItemContainer},le("div",{key:"media-item-container",class:ei.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",i=t?this.messages.previous:this.messages.next,s=t?this.classes(ei.mediaButton,ei.mediaPrevious):this.classes(ei.mediaButton,ei.mediaNext),l=t?this.classes(ei.mediaIcon,ei.mediaPreviousIconLTR,ei.iconLeftTriangleArrow):this.classes(ei.mediaIcon,ei.mediaNextIconLTR,ei.iconRightTriangleArrow),d=t?this.classes(ei.mediaIcon,ei.mediaPreviousIconRTL,ei.iconRightTriangleArrow):this.classes(ei.mediaIcon,ei.mediaNextIconRTL,ei.iconLeftTriangleArrow),y=t?"media-previous":"media-next",g=t?this._previous:this._next;return le("button",{type:"button",key:y,title:i,"aria-label":i,tabIndex:0,class:s,bind:this,onclick:g},le("span",{"aria-hidden":"true",class:l}),le("span",{"aria-hidden":"true",class:d}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){var d;const{am4core:t}=e,i=(d=this.viewModel)==null?void 0:d.layer,s=new Map;if(!i)return s;const l=await mee(i.renderer);return l.delete(null),Array.from(l.values()).every(y=>(y==null?void 0:y.length)===1)&&(s.set(s$,t.color({r:50,g:50,b:50,a:1})),Array.from(l.keys()).forEach(y=>{y&&s.set(y,t.color(l.get(y)[0].toCss(!0)))})),s}_handleMediaKeyup(e){const t=ju(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:s,mediaInfo:l,colorMap:d}=e,{value:y,type:g}=l,{am4core:x}=i,$=Cte(x);function E(R){R instanceof x.ColorSet&&$&&(R.list=$)}lP()&&x.useTheme(i.am4themes_dark);const O=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!O.matches?x.useTheme(i.am4themes_animated):x.unuseTheme(i.am4themes_animated),x.useTheme(E);const P=g==="pie-chart"?this._createPieChart(e):this._createXYChart(e);s.setAttribute("aria-label",l.altText||l.title),P.data=y.series.map(R=>({[Ia]:R.tooltip,[xd]:R.value,[Io]:d.get(R.fieldName)})).filter(R=>g!=="pie-chart"||R.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:s,am4charts:l}=i,d=s.create(t,l.PieChart);d.rtl=Sl(this.container);const y=d.series.push(new l.PieSeries);return y.labels.template.disabled=!0,y.ticks.template.disabled=!0,y.dataFields.value=xd,y.dataFields.category=Ia,this._customizeChartTooltip(y.tooltip,s),y.slices.template.tooltipText=d.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",y.slices.template.propertyFields.fill=Io,y.slices.template.propertyFields.stroke=Io,d}_getMinSeriesValue(e){let t=0;return e.forEach(i=>t=Math.min(i.value,t)),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:s}=t,{value:l}=s,{am4core:d,am4charts:y}=i,g=e.xAxes.push(new y.CategoryAxis);g.dataFields.category=Ia,g.renderer.labels.template.disabled=!0,this._customizeChartTooltip(g.tooltip,d),g.tooltip.events.on("sizechanged",()=>{g.tooltip.dy=-g.tooltip.contentHeight});const x=e.yAxes.push(new y.ValueAxis),$=x.renderer.labels.template;x.renderer.minLabelPosition=Aw,x.renderer.maxLabelPosition=kw,x.min=this._getMinSeriesValue(l.series),this._customizeChartTooltip(x.tooltip,d),$.wrap=!0;const E=e.series.push(new y.ColumnSeries);E.dataFields.valueY=xd,E.dataFields.categoryX=Ia,E.columns.template.propertyFields.fill=Io,E.columns.template.propertyFields.stroke=Io,e.cursor=new y.XYCursor,l.series.length>Ow&&(e.scrollbarX=new d.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:s}=t,{value:l}=s,{am4core:d,am4charts:y}=i,g=e.yAxes.push(new y.CategoryAxis);g.dataFields.category=Ia,g.renderer.inversed=!0,g.renderer.labels.template.disabled=!0,this._customizeChartTooltip(g.tooltip,d),g.tooltip.events.on("sizechanged",()=>{g.tooltip.dx=g.tooltip.contentWidth});const x=e.xAxes.push(new y.ValueAxis),$=x.renderer.labels.template;x.renderer.minLabelPosition=Aw,x.renderer.maxLabelPosition=kw,x.min=this._getMinSeriesValue(l.series),this._customizeChartTooltip(x.tooltip,d),$.wrap=!0;const E=e.series.push(new y.ColumnSeries);E.dataFields.valueX=xd,E.dataFields.categoryY=Ia,E.columns.template.propertyFields.fill=Io,E.columns.template.propertyFields.stroke=Io,e.cursor=new y.XYCursor,l.series.length>Ow&&(e.scrollbarY=new d.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:s,colorMap:l}=t,{value:d}=s,{am4core:y,am4charts:g}=i,x=e.xAxes.push(new g.CategoryAxis);x.dataFields.category=Ia,x.renderer.labels.template.disabled=!0,this._customizeChartTooltip(x.tooltip,y),x.tooltip.events.on("sizechanged",()=>{x.tooltip.dy=-x.tooltip.contentHeight});const $=e.yAxes.push(new g.ValueAxis),E=$.renderer.labels.template;$.renderer.minLabelPosition=Aw,$.renderer.maxLabelPosition=kw,$.min=this._getMinSeriesValue(d.series),this._customizeChartTooltip($.tooltip,y),E.wrap=!0;const O=e.series.push(new g.LineSeries);O.dataFields.categoryX=Ia,O.dataFields.valueY=xd,O.strokeWidth=1;const P=l.get(s$);P&&(O.stroke=P);const R=O.bullets.push(new g.CircleBullet);R.propertyFields.fill=Io,R.propertyFields.stroke=Io,e.cursor=new g.XYCursor,d.series.length>Ow&&(e.scrollbarX=new y.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:s}=e,{type:l}=s,{am4core:d,am4charts:y}=i,g=d.create(t,y.XYChart);return g.rtl=Sl(this.container),l==="column-chart"&&this._createColumnChart(g,e),l==="bar-chart"&&this._createBarChart(g,e),l==="line-chart"&&this._createLineChart(g,e),g}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const s=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const l=setInterval(()=>{this._updateMediaInfoTimestamp(i.sourceURL)},s);this._refreshTimer=l}_getImageSource(e,t){const i=e.includes("?")?"&":"?",[s,l=""]=e.split("#");return`${s}${i}timestamp=${t}${l?"#":""}${l}`}};v([Be("viewModel.attributes")],Fr.prototype,"attributes",void 0),v([Be("viewModel.activeMediaInfoIndex")],Fr.prototype,"activeMediaInfoIndex",void 0),v([Be("viewModel.description")],Fr.prototype,"description",void 0),v([Be("viewModel.fieldInfoMap")],Fr.prototype,"fieldInfoMap",void 0),v([Be("viewModel.layer")],Fr.prototype,"layer",void 0),v([Be("viewModel.mediaInfos")],Fr.prototype,"mediaInfos",void 0),v([Be("viewModel.popupTemplate")],Fr.prototype,"popupTemplate",void 0),v([Be("viewModel.relatedInfos")],Fr.prototype,"relatedInfos",void 0),v([Be("viewModel.title")],Fr.prototype,"title",void 0),v([_({type:oh})],Fr.prototype,"viewModel",void 0),v([_(),Wr("esri/widgets/Feature/t9n/Feature")],Fr.prototype,"messages",void 0),Fr=v([H("esri.widgets.Feature.FeatureMedia")],Fr);const zP=Fr;class Pte{constructor(t,i){this.definition=null,this.context=null,this.definition=t,this.context=i}}class xo{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let i=0;i<this.length();i++)t.push(this.get(i));return t}}class Vh extends xo{constructor(t,i,s,l,d,y){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=i,this._hasZ=s,this._hasM=l,this._cacheId=d,this._partId=y}get(t){if(this._lazyPt[t]===void 0){const i=this._elements[t];if(i===void 0)return;const s=this._hasZ,l=this._hasM;let d=null;d=s&&!l?new He(i[0],i[1],i[2],void 0,this._spRef):l&&!s?new He(i[0],i[1],void 0,i[2],this._spRef):s&&l?new He(i[0],i[1],i[2],i[3],this._spRef):new He(i[0],i[1],this._spRef),d.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=d}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof Vh&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class rx extends xo{constructor(t,i,s,l,d){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=s,this._hasM=l,this._spRef=i,this._cacheId=d}get(t){if(this._lazyPath[t]===void 0){const i=this._elements[t];if(i===void 0)return;this._lazyPath[t]=new Vh(i,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof rx&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class Gh extends Error{}class Nte extends Gh{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class Rte extends Gh{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class jte extends Gh{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class v0 extends Gh{}class VP extends Gh{constructor(t){super(`Invalid unit ${t}`)}}class qs extends Gh{}class Ta extends Gh{constructor(){super("Zone is an abstract class")}}const Ce="numeric",jn="short",ms="long",H_={year:Ce,month:Ce,day:Ce},GP={year:Ce,month:jn,day:Ce},Lte={year:Ce,month:jn,day:Ce,weekday:jn},qP={year:Ce,month:ms,day:Ce},UP={year:Ce,month:ms,day:Ce,weekday:ms},BP={hour:Ce,minute:Ce},HP={hour:Ce,minute:Ce,second:Ce},WP={hour:Ce,minute:Ce,second:Ce,timeZoneName:jn},JP={hour:Ce,minute:Ce,second:Ce,timeZoneName:ms},KP={hour:Ce,minute:Ce,hourCycle:"h23"},YP={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23"},XP={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:jn},ZP={hour:Ce,minute:Ce,second:Ce,hourCycle:"h23",timeZoneName:ms},QP={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce},eN={year:Ce,month:Ce,day:Ce,hour:Ce,minute:Ce,second:Ce},tN={year:Ce,month:jn,day:Ce,hour:Ce,minute:Ce},iN={year:Ce,month:jn,day:Ce,hour:Ce,minute:Ce,second:Ce},Fte={year:Ce,month:jn,day:Ce,weekday:jn,hour:Ce,minute:Ce},rN={year:Ce,month:ms,day:Ce,hour:Ce,minute:Ce,timeZoneName:jn},sN={year:Ce,month:ms,day:Ce,hour:Ce,minute:Ce,second:Ce,timeZoneName:jn},nN={year:Ce,month:ms,day:Ce,weekday:ms,hour:Ce,minute:Ce,timeZoneName:ms},oN={year:Ce,month:ms,day:Ce,weekday:ms,hour:Ce,minute:Ce,second:Ce,timeZoneName:ms};function bt(e){return typeof e=="undefined"}function fh(e){return typeof e=="number"}function l2(e){return typeof e=="number"&&e%1===0}function Dte(e){return typeof e=="string"}function zte(e){return Object.prototype.toString.call(e)==="[object Date]"}function aN(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Vte(e){return Array.isArray(e)?e:[e]}function n$(e,t,i){if(e.length!==0)return e.reduce((s,l)=>{const d=[t(l),l];return s&&i(s[0],d[0])===s[0]?s:d},null)[1]}function Gte(e,t){return t.reduce((i,s)=>(i[s]=e[s],i),{})}function Ep(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ra(e,t,i){return l2(e)&&e>=t&&e<=i}function qte(e,t){return e-t*Math.floor(e/t)}function Ii(e,t=2){const i=e<0;let s;return i?s="-"+(""+-e).padStart(t,"0"):s=(""+e).padStart(t,"0"),s}function dl(e){if(!(bt(e)||e===null||e===""))return parseInt(e,10)}function Hl(e){if(!(bt(e)||e===null||e===""))return parseFloat(e)}function sx(e){if(!(bt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function nx(e,t,i=!1){const s=10**t;return(i?Math.trunc:Math.round)(e*s)/s}function u1(e){return e%4===0&&(e%100!==0||e%400===0)}function Q0(e){return u1(e)?366:365}function Hg(e,t){const i=qte(t-1,12)+1,s=e+(t-i)/12;return i===2?u1(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function ox(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function Wg(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,i=e-1,s=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return t===4||s===3?53:52}function W_(e){return e>99?e:e>60?1900+e:2e3+e}function lN(e,t,i,s=null){const l=new Date(e),d={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(d.timeZone=s);const y={timeZoneName:t,...d},g=new Intl.DateTimeFormat(i,y).formatToParts(l).find(x=>x.type.toLowerCase()==="timezonename");return g?g.value:null}function u2(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const s=parseInt(t,10)||0,l=i<0||Object.is(i,-0)?-s:s;return i*60+l}function uN(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new qs(`Invalid unit value ${e}`);return t}function Jg(e,t){const i={};for(const s in e)if(Ep(e,s)){const l=e[s];if(l==null)continue;i[t(s)]=uN(l)}return i}function ef(e,t){const i=Math.trunc(Math.abs(e/60)),s=Math.trunc(Math.abs(e%60)),l=e>=0?"+":"-";switch(t){case"short":return`${l}${Ii(i,2)}:${Ii(s,2)}`;case"narrow":return`${l}${i}${s>0?`:${s}`:""}`;case"techie":return`${l}${Ii(i,2)}${Ii(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function h2(e){return Gte(e,["hour","minute","second","millisecond"])}const hN=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,Ute=["January","February","March","April","May","June","July","August","September","October","November","December"],cN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Bte=["J","F","M","A","M","J","J","A","S","O","N","D"];function pN(e){switch(e){case"narrow":return[...Bte];case"short":return[...cN];case"long":return[...Ute];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const dN=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],fN=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Hte=["M","T","W","T","F","S","S"];function yN(e){switch(e){case"narrow":return[...Hte];case"short":return[...fN];case"long":return[...dN];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const mN=["AM","PM"],Wte=["Before Christ","Anno Domini"],Jte=["BC","AD"],Kte=["B","A"];function gN(e){switch(e){case"narrow":return[...Kte];case"short":return[...Jte];case"long":return[...Wte];default:return null}}function Yte(e){return mN[e.hour<12?0:1]}function Xte(e,t){return yN(t)[e.weekday-1]}function Zte(e,t){return pN(t)[e.month-1]}function Qte(e,t){return gN(t)[e.year<0?0:1]}function eie(e,t,i="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},d=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&d){const O=e==="days";switch(t){case 1:return O?"tomorrow":`next ${l[e][0]}`;case-1:return O?"yesterday":`last ${l[e][0]}`;case 0:return O?"today":`this ${l[e][0]}`}}const y=Object.is(t,-0)||t<0,g=Math.abs(t),x=g===1,$=l[e],E=s?x?$[1]:$[2]||$[1]:x?l[e][0]:e;return y?`${g} ${E} ago`:`in ${g} ${E}`}function o$(e,t){let i="";for(const s of e)s.literal?i+=s.val:i+=t(s.val);return i}const tie={D:H_,DD:GP,DDD:qP,DDDD:UP,t:BP,tt:HP,ttt:WP,tttt:JP,T:KP,TT:YP,TTT:XP,TTTT:ZP,f:QP,ff:tN,fff:rN,ffff:nN,F:eN,FF:iN,FFF:sN,FFFF:oN};class Br{static create(t,i={}){return new Br(t,i)}static parseFormat(t){let i=null,s="",l=!1;const d=[];for(let y=0;y<t.length;y++){const g=t.charAt(y);g==="'"?(s.length>0&&d.push({literal:l,val:s}),i=null,s="",l=!l):l||g===i?s+=g:(s.length>0&&d.push({literal:!1,val:s}),s=g,i=g)}return s.length>0&&d.push({literal:l,val:s}),d}static macroTokenToFormatOpts(t){return tie[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTime(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).format()}formatDateTimeParts(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).formatToParts()}resolvedOptions(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i}).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return Ii(t,i);const s={...this.opts};return i>0&&(s.padTo=i),this.loc.numberFormatter(s).format(t)}formatDateTimeFromString(t,i){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",d=(R,L)=>this.loc.extract(t,R,L),y=R=>t.isOffsetFixed&&t.offset===0&&R.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,R.format):"",g=()=>s?Yte(t):d({hour:"numeric",hourCycle:"h12"},"dayperiod"),x=(R,L)=>s?Zte(t,R):d(L?{month:R}:{month:R,day:"numeric"},"month"),$=(R,L)=>s?Xte(t,R):d(L?{weekday:R}:{weekday:R,month:"long",day:"numeric"},"weekday"),E=R=>{const L=Br.macroTokenToFormatOpts(R);return L?this.formatWithSystemDefault(t,L):R},O=R=>s?Qte(t,R):d({era:R},"era"),P=R=>{switch(R){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return y({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return y({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return y({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return g();case"d":return l?d({day:"numeric"},"day"):this.num(t.day);case"dd":return l?d({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return $("short",!0);case"cccc":return $("long",!0);case"ccccc":return $("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return $("short",!1);case"EEEE":return $("long",!1);case"EEEEE":return $("narrow",!1);case"L":return l?d({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return l?d({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return x("short",!0);case"LLLL":return x("long",!0);case"LLLLL":return x("narrow",!0);case"M":return l?d({month:"numeric"},"month"):this.num(t.month);case"MM":return l?d({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return x("short",!1);case"MMMM":return x("long",!1);case"MMMMM":return x("narrow",!1);case"y":return l?d({year:"numeric"},"year"):this.num(t.year);case"yy":return l?d({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return l?d({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return l?d({year:"numeric"},"year"):this.num(t.year,6);case"G":return O("short");case"GG":return O("long");case"GGGGG":return O("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return E(R)}};return o$(Br.parseFormat(i),P)}formatDurationFromString(t,i){const s=x=>{switch(x[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},l=x=>$=>{const E=s($);return E?this.num(x.get(E),$.length):$},d=Br.parseFormat(i),y=d.reduce((x,{literal:$,val:E})=>$?x:x.concat(E),[]),g=t.shiftTo(...y.map(s).filter(x=>x));return o$(d,l(g))}}class En{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class h1{get type(){throw new Ta}get name(){throw new Ta}get ianaName(){return this.name}get isUniversal(){throw new Ta}offsetName(t,i){throw new Ta}formatOffset(t,i){throw new Ta}offset(t){throw new Ta}equals(t){throw new Ta}get isValid(){throw new Ta}}let Cw=null;class ax extends h1{static get instance(){return Cw===null&&(Cw=new ax),Cw}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:s}){return lN(t,i,s)}formatOffset(t,i){return ef(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let _m={};function iie(e){return _m[e]||(_m[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),_m[e]}const rie={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function sie(e,t){const i=e.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,l,d,y,g,x,$,E]=s;return[y,l,d,g,x,$,E]}function nie(e,t){const i=e.formatToParts(t),s=[];for(let l=0;l<i.length;l++){const{type:d,value:y}=i[l],g=rie[d];d==="era"?s[g]=y:bt(g)||(s[g]=parseInt(y,10))}return s}let sy={};class da extends h1{static create(t){return sy[t]||(sy[t]=new da(t)),sy[t]}static resetCache(){sy={},_m={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=da.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:s}){return lN(t,i,s,this.name)}formatOffset(t,i){return ef(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const s=iie(this.name);let[l,d,y,g,x,$,E]=s.formatToParts?nie(s,i):sie(s,i);g==="BC"&&(l=-Math.abs(l)+1);const P=ox({year:l,month:d,day:y,hour:x===24?0:x,minute:$,second:E,millisecond:0});let R=+i;const L=R%1e3;return R-=L>=0?L:1e3+L,(P-R)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let Pw=null;class Mr extends h1{static get utcInstance(){return Pw===null&&(Pw=new Mr(0)),Pw}static instance(t){return t===0?Mr.utcInstance:new Mr(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Mr(u2(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ef(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ef(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return ef(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class oie extends h1{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ml(e,t){if(bt(e)||e===null)return t;if(e instanceof h1)return e;if(Dte(e)){const i=e.toLowerCase();return i==="local"||i==="system"?t:i==="utc"||i==="gmt"?Mr.utcInstance:Mr.parseSpecifier(i)||da.create(e)}else return fh(e)?Mr.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new oie(e)}let a$=()=>Date.now(),l$="system",u$=null,h$=null,c$=null,p$;class ji{static get now(){return a$}static set now(t){a$=t}static set defaultZone(t){l$=t}static get defaultZone(){return ml(l$,ax.instance)}static get defaultLocale(){return u$}static set defaultLocale(t){u$=t}static get defaultNumberingSystem(){return h$}static set defaultNumberingSystem(t){h$=t}static get defaultOutputCalendar(){return c$}static set defaultOutputCalendar(t){c$=t}static get throwOnInvalid(){return p$}static set throwOnInvalid(t){p$=t}static resetCaches(){ri.resetCache(),da.resetCache()}}let d$={};function aie(e,t={}){const i=JSON.stringify([e,t]);let s=d$[i];return s||(s=new Intl.ListFormat(e,t),d$[i]=s),s}let J_={};function K_(e,t={}){const i=JSON.stringify([e,t]);let s=J_[i];return s||(s=new Intl.DateTimeFormat(e,t),J_[i]=s),s}let Y_={};function lie(e,t={}){const i=JSON.stringify([e,t]);let s=Y_[i];return s||(s=new Intl.NumberFormat(e,t),Y_[i]=s),s}let X_={};function uie(e,t={}){const{base:i,...s}=t,l=JSON.stringify([e,s]);let d=X_[l];return d||(d=new Intl.RelativeTimeFormat(e,t),X_[l]=d),d}let w0=null;function hie(){return w0||(w0=new Intl.DateTimeFormat().resolvedOptions().locale,w0)}function cie(e){const t=e.indexOf("-u-");if(t===-1)return[e];{let i;const s=e.substring(0,t);try{i=K_(e).resolvedOptions()}catch{i=K_(s).resolvedOptions()}const{numberingSystem:l,calendar:d}=i;return[s,l,d]}}function pie(e,t,i){return(i||t)&&(e+="-u",i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function die(e){const t=[];for(let i=1;i<=12;i++){const s=rt.utc(2016,i,1);t.push(e(s))}return t}function fie(e){const t=[];for(let i=1;i<=7;i++){const s=rt.utc(2016,11,13+i);t.push(e(s))}return t}function ny(e,t,i,s,l){const d=e.listingMode(i);return d==="error"?null:d==="en"?s(t):l(t)}function yie(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class mie{constructor(t,i,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:d,...y}=s;if(!i||Object.keys(y).length>0){const g={useGrouping:!1,...s};s.padTo>0&&(g.minimumIntegerDigits=s.padTo),this.inf=lie(t,g)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):nx(t,3);return Ii(i,this.padTo)}}}class gie{constructor(t,i,s){this.opts=s;let l;if(t.zone.isUniversal){const y=-1*(t.offset/60),g=y>=0?`Etc/GMT+${y}`:`Etc/GMT${y}`;t.offset!==0&&da.create(g).valid?(l=g,this.dt=t):(l="UTC",s.timeZoneName?this.dt=t:this.dt=t.offset===0?t:rt.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,l=t.zone.name);const d={...this.opts};l&&(d.timeZone=l),this.dtf=K_(i,d)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class vie{constructor(t,i,s){this.opts={style:"long",...s},!i&&aN()&&(this.rtf=uie(t,s))}format(t,i){return this.rtf?this.rtf.format(t,i):eie(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}class ri{static fromOpts(t){return ri.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,i,s,l=!1){const d=t||ji.defaultLocale,y=d||(l?"en-US":hie()),g=i||ji.defaultNumberingSystem,x=s||ji.defaultOutputCalendar;return new ri(y,g,x,d)}static resetCache(){w0=null,J_={},Y_={},X_={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:s}={}){return ri.create(t,i,s)}constructor(t,i,s,l){const[d,y,g]=cie(t);this.locale=d,this.numberingSystem=i||y||null,this.outputCalendar=s||g||null,this.intl=pie(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=l,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=yie(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ri.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1,s=!0){return ny(this,t,s,pN,()=>{const l=i?{month:t,day:"numeric"}:{month:t},d=i?"format":"standalone";return this.monthsCache[d][t]||(this.monthsCache[d][t]=die(y=>this.extract(y,l,"month"))),this.monthsCache[d][t]})}weekdays(t,i=!1,s=!0){return ny(this,t,s,yN,()=>{const l=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},d=i?"format":"standalone";return this.weekdaysCache[d][t]||(this.weekdaysCache[d][t]=fie(y=>this.extract(y,l,"weekday"))),this.weekdaysCache[d][t]})}meridiems(t=!0){return ny(this,void 0,t,()=>mN,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[rt.utc(2016,11,13,9),rt.utc(2016,11,13,19)].map(s=>this.extract(s,i,"dayperiod"))}return this.meridiemCache})}eras(t,i=!0){return ny(this,t,i,gN,()=>{const s={era:t};return this.eraCache[t]||(this.eraCache[t]=[rt.utc(-40,1,1),rt.utc(2017,1,1)].map(l=>this.extract(l,s,"era"))),this.eraCache[t]})}extract(t,i,s){const l=this.dtFormatter(t,i),d=l.formatToParts(),y=d.find(g=>g.type.toLowerCase()===s);return y?y.value:null}numberFormatter(t={}){return new mie(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new gie(t,this.intl,i)}relFormatter(t={}){return new vie(this.intl,this.isEnglish(),t)}listFormatter(t={}){return aie(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}function td(...e){const t=e.reduce((i,s)=>i+s.source,"");return RegExp(`^${t}$`)}function id(...e){return t=>e.reduce(([i,s,l],d)=>{const[y,g,x]=d(t,l);return[{...i,...y},g||s,x]},[{},null,1]).slice(0,2)}function rd(e,...t){if(e==null)return[null,null];for(const[i,s]of t){const l=i.exec(e);if(l)return s(l)}return[null,null]}function vN(...e){return(t,i)=>{const s={};let l;for(l=0;l<e.length;l++)s[e[l]]=dl(t[i+l]);return[s,null,i+l]}}const wN=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,wie=`(?:${wN.source}?(?:\\[(${hN.source})\\])?)?`,lx=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,bN=RegExp(`${lx.source}${wie}`),ux=RegExp(`(?:T${bN.source})?`),bie=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,_ie=/(\d{4})-?W(\d\d)(?:-?(\d))?/,xie=/(\d{4})-?(\d{3})/,Sie=vN("weekYear","weekNumber","weekDay"),$ie=vN("year","ordinal"),Mie=/(\d{4})-(\d\d)-(\d\d)/,_N=RegExp(`${lx.source} ?(?:${wN.source}|(${hN.source}))?`),Iie=RegExp(`(?: ${_N.source})?`);function fp(e,t,i){const s=e[t];return bt(s)?i:dl(s)}function Tie(e,t){return[{year:fp(e,t),month:fp(e,t+1,1),day:fp(e,t+2,1)},null,t+3]}function sd(e,t){return[{hours:fp(e,t,0),minutes:fp(e,t+1,0),seconds:fp(e,t+2,0),milliseconds:sx(e[t+3])},null,t+4]}function c1(e,t){const i=!e[t]&&!e[t+1],s=u2(e[t+1],e[t+2]),l=i?null:Mr.instance(s);return[{},l,t+3]}function p1(e,t){const i=e[t]?da.create(e[t]):null;return[{},i,t+1]}const Eie=RegExp(`^T?${lx.source}$`),Aie=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function kie(e){const[t,i,s,l,d,y,g,x,$]=e,E=t[0]==="-",O=x&&x[0]==="-",P=(R,L=!1)=>R!==void 0&&(L||R&&E)?-R:R;return[{years:P(Hl(i)),months:P(Hl(s)),weeks:P(Hl(l)),days:P(Hl(d)),hours:P(Hl(y)),minutes:P(Hl(g)),seconds:P(Hl(x),x==="-0"),milliseconds:P(sx($),O)}]}const Oie={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function hx(e,t,i,s,l,d,y){const g={year:t.length===2?W_(dl(t)):dl(t),month:cN.indexOf(i)+1,day:dl(s),hour:dl(l),minute:dl(d)};return y&&(g.second=dl(y)),e&&(g.weekday=e.length>3?dN.indexOf(e)+1:fN.indexOf(e)+1),g}const Cie=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Pie(e){const[,t,i,s,l,d,y,g,x,$,E,O]=e,P=hx(t,l,s,i,d,y,g);let R;return x?R=Oie[x]:$?R=0:R=u2(E,O),[P,new Mr(R)]}function Nie(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Rie=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,jie=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Lie=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function f$(e){const[,t,i,s,l,d,y,g]=e;return[hx(t,l,s,i,d,y,g),Mr.utcInstance]}function Fie(e){const[,t,i,s,l,d,y,g]=e;return[hx(t,g,i,s,l,d,y),Mr.utcInstance]}const Die=td(bie,ux),zie=td(_ie,ux),Vie=td(xie,ux),Gie=td(bN),xN=id(Tie,sd,c1,p1),qie=id(Sie,sd,c1,p1),Uie=id($ie,sd,c1,p1),Bie=id(sd,c1,p1);function Hie(e){return rd(e,[Die,xN],[zie,qie],[Vie,Uie],[Gie,Bie])}function Wie(e){return rd(Nie(e),[Cie,Pie])}function Jie(e){return rd(e,[Rie,f$],[jie,f$],[Lie,Fie])}function Kie(e){return rd(e,[Aie,kie])}const Yie=id(sd);function Xie(e){return rd(e,[Eie,Yie])}const Zie=td(Mie,Iie),Qie=td(_N),ere=id(sd,c1,p1);function tre(e){return rd(e,[Zie,xN],[Qie,ere])}const ire="Invalid Duration",SN={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},rre={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...SN},Ms=146097/400,Kh=146097/4800,sre={years:{quarters:4,months:12,weeks:Ms/7,days:Ms,hours:Ms*24,minutes:Ms*24*60,seconds:Ms*24*60*60,milliseconds:Ms*24*60*60*1e3},quarters:{months:3,weeks:Ms/28,days:Ms/4,hours:Ms*24/4,minutes:Ms*24*60/4,seconds:Ms*24*60*60/4,milliseconds:Ms*24*60*60*1e3/4},months:{weeks:Kh/7,days:Kh,hours:Kh*24,minutes:Kh*24*60,seconds:Kh*24*60*60,milliseconds:Kh*24*60*60*1e3},...SN},xu=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],nre=xu.slice(0).reverse();function Wl(e,t,i=!1){const s={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new Mt(s)}function ore(e){return e<0?Math.floor(e):Math.ceil(e)}function $N(e,t,i,s,l){const d=e[l][i],y=t[i]/d,g=Math.sign(y)===Math.sign(s[l]),x=!g&&s[l]!==0&&Math.abs(y)<=1?ore(y):Math.trunc(y);s[l]+=x,t[i]-=x*d}function are(e,t){nre.reduce((i,s)=>bt(t[s])?i:(i&&$N(e,t,i,t,s),s),null)}class Mt{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;this.values=t.values,this.loc=t.loc||ri.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i?sre:rre,this.isLuxonDuration=!0}static fromMillis(t,i){return Mt.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new qs(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Mt({values:Jg(t,Mt.normalizeUnit),loc:ri.fromObject(i),conversionAccuracy:i.conversionAccuracy})}static fromDurationLike(t){if(fh(t))return Mt.fromMillis(t);if(Mt.isDuration(t))return t;if(typeof t=="object")return Mt.fromObject(t);throw new qs(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[s]=Kie(t);return s?Mt.fromObject(s,i):Mt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[s]=Xie(t);return s?Mt.fromObject(s,i):Mt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new qs("need to specify a reason the Duration is invalid");const s=t instanceof En?t:new En(t,i);if(ji.throwOnInvalid)throw new jte(s);return new Mt({invalid:s})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new VP(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const s={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Br.create(this.loc,s).formatDurationFromString(this,t):ire}toHuman(t={}){const i=xu.map(s=>{const l=this.values[s];return bt(l)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:s.slice(0,-1)}).format(l)}).filter(s=>s);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=nx(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const s=this.shiftTo("hours","minutes","seconds","milliseconds");let l=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||s.seconds!==0||s.milliseconds!==0)&&(l+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||s.milliseconds!==0)&&(l+=".SSS"));let d=s.toFormat(l);return t.includePrefix&&(d="T"+d),d}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=Mt.fromDurationLike(t),s={};for(const l of xu)(Ep(i.values,l)||Ep(this.values,l))&&(s[l]=i.get(l)+this.get(l));return Wl(this,{values:s},!0)}minus(t){if(!this.isValid)return this;const i=Mt.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const s of Object.keys(this.values))i[s]=uN(t(this.values[s],s));return Wl(this,{values:i},!0)}get(t){return this[Mt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...Jg(t,Mt.normalizeUnit)};return Wl(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:s}={}){const l=this.loc.clone({locale:t,numberingSystem:i}),d={loc:l};return s&&(d.conversionAccuracy=s),Wl(this,d)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return are(this.matrix,t),Wl(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(y=>Mt.normalizeUnit(y));const i={},s={},l=this.toObject();let d;for(const y of xu)if(t.indexOf(y)>=0){d=y;let g=0;for(const $ in s)g+=this.matrix[$][y]*s[$],s[$]=0;fh(l[y])&&(g+=l[y]);const x=Math.trunc(g);i[y]=x,s[y]=(g*1e3-x*1e3)/1e3;for(const $ in l)xu.indexOf($)>xu.indexOf(y)&&$N(this.matrix,l,$,i,y)}else fh(l[y])&&(s[y]=l[y]);for(const y in s)s[y]!==0&&(i[d]+=y===d?s[y]:s[y]/this.matrix[d][y]);return Wl(this,{values:i},!0).normalize()}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Wl(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of xu)if(!i(this.values[s],t.values[s]))return!1;return!0}}const Sd="Invalid Interval";function lre(e,t){return!e||!e.isValid?ci.invalid("missing or invalid start"):!t||!t.isValid?ci.invalid("missing or invalid end"):t<e?ci.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class ci{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new qs("need to specify a reason the Interval is invalid");const s=t instanceof En?t:new En(t,i);if(ji.throwOnInvalid)throw new Rte(s);return new ci({invalid:s})}static fromDateTimes(t,i){const s=Id(t),l=Id(i),d=lre(s,l);return d==null?new ci({start:s,end:l}):d}static after(t,i){const s=Mt.fromDurationLike(i),l=Id(t);return ci.fromDateTimes(l,l.plus(s))}static before(t,i){const s=Mt.fromDurationLike(i),l=Id(t);return ci.fromDateTimes(l.minus(s),l)}static fromISO(t,i){const[s,l]=(t||"").split("/",2);if(s&&l){let d,y;try{d=rt.fromISO(s,i),y=d.isValid}catch{y=!1}let g,x;try{g=rt.fromISO(l,i),x=g.isValid}catch{x=!1}if(y&&x)return ci.fromDateTimes(d,g);if(y){const $=Mt.fromISO(l,i);if($.isValid)return ci.after(d,$)}else if(x){const $=Mt.fromISO(s,i);if($.isValid)return ci.before(g,$)}}return ci.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(t),s=this.end.startOf(t);return Math.floor(s.diff(i,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?ci.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(Id).filter(y=>this.contains(y)).sort(),s=[];let{s:l}=this,d=0;for(;l<this.e;){const y=i[d]||this.e,g=+y>+this.e?this.e:y;s.push(ci.fromDateTimes(l,g)),l=g,d+=1}return s}splitBy(t){const i=Mt.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s}=this,l=1,d;const y=[];for(;s<this.e;){const g=this.start.plus(i.mapUnits(x=>x*l));d=+g>+this.e?this.e:g,y.push(ci.fromDateTimes(s,d)),s=d,l+=1}return y}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,s=this.e<t.e?this.e:t.e;return i>=s?null:ci.fromDateTimes(i,s)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,s=this.e>t.e?this.e:t.e;return ci.fromDateTimes(i,s)}static merge(t){const[i,s]=t.sort((l,d)=>l.s-d.s).reduce(([l,d],y)=>d?d.overlaps(y)||d.abutsStart(y)?[l,d.union(y)]:[l.concat([d]),y]:[l,y],[[],null]);return s&&i.push(s),i}static xor(t){let i=null,s=0;const l=[],d=t.map(x=>[{time:x.s,type:"s"},{time:x.e,type:"e"}]),y=Array.prototype.concat(...d),g=y.sort((x,$)=>x.time-$.time);for(const x of g)s+=x.type==="s"?1:-1,s===1?i=x.time:(i&&+i!=+x.time&&l.push(ci.fromDateTimes(i,x.time)),i=null);return ci.merge(l)}difference(...t){return ci.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Sd}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Sd}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Sd}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Sd}toFormat(t,{separator:i=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:Sd}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):Mt.invalid(this.invalidReason)}mapEndpoints(t){return ci.fromDateTimes(t(this.s),t(this.e))}}class oy{static hasDST(t=ji.defaultZone){const i=rt.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return da.isValidZone(t)}static normalizeZone(t){return ml(t,ji.defaultZone)}static months(t="long",{locale:i=null,numberingSystem:s=null,locObj:l=null,outputCalendar:d="gregory"}={}){return(l||ri.create(i,s,d)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:s=null,locObj:l=null,outputCalendar:d="gregory"}={}){return(l||ri.create(i,s,d)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:s=null,locObj:l=null}={}){return(l||ri.create(i,s,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:s=null,locObj:l=null}={}){return(l||ri.create(i,s,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ri.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return ri.create(i,null,"gregory").eras(t)}static features(){return{relative:aN()}}}function y$(e,t){const i=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=i(t)-i(e);return Math.floor(Mt.fromMillis(s).as("days"))}function ure(e,t,i){const s=[["years",(g,x)=>x.year-g.year],["quarters",(g,x)=>x.quarter-g.quarter],["months",(g,x)=>x.month-g.month+(x.year-g.year)*12],["weeks",(g,x)=>{const $=y$(g,x);return($-$%7)/7}],["days",y$]],l={};let d,y;for(const[g,x]of s)if(i.indexOf(g)>=0){d=g;let $=x(e,t);y=e.plus({[g]:$}),y>t?(e=e.plus({[g]:$-1}),$-=1):e=y,l[g]=$}return[e,l,y,d]}function hre(e,t,i,s){let[l,d,y,g]=ure(e,t,i);const x=t-l,$=i.filter(O=>["hours","minutes","seconds","milliseconds"].indexOf(O)>=0);$.length===0&&(y<t&&(y=l.plus({[g]:1})),y!==l&&(d[g]=(d[g]||0)+x/(y-l)));const E=Mt.fromObject(d,s);return $.length>0?Mt.fromMillis(x,s).shiftTo(...$).plus(E):E}const cx={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},m$={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},cre=cx.hanidec.replace(/[\[|\]]/g,"").split("");function pre(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);if(e[i].search(cx.hanidec)!==-1)t+=cre.indexOf(e[i]);else for(const l in m$){const[d,y]=m$[l];s>=d&&s<=y&&(t+=s-d)}}return parseInt(t,10)}else return t}function Qs({numberingSystem:e},t=""){return new RegExp(`${cx[e||"latn"]}${t}`)}const dre="missing Intl.DateTimeFormat.formatToParts support";function At(e,t=i=>i){return{regex:e,deser:([i])=>t(pre(i))}}const fre=String.fromCharCode(160),MN=`[ ${fre}]`,IN=new RegExp(MN,"g");function yre(e){return e.replace(/\./g,"\\.?").replace(IN,MN)}function g$(e){return e.replace(/\./g,"").replace(IN," ").toLowerCase()}function en(e,t){return e===null?null:{regex:RegExp(e.map(yre).join("|")),deser:([i])=>e.findIndex(s=>g$(i)===g$(s))+t}}function v$(e,t){return{regex:e,deser:([,i,s])=>u2(i,s),groups:t}}function Nw(e){return{regex:e,deser:([t])=>t}}function mre(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function gre(e,t){const i=Qs(t),s=Qs(t,"{2}"),l=Qs(t,"{3}"),d=Qs(t,"{4}"),y=Qs(t,"{6}"),g=Qs(t,"{1,2}"),x=Qs(t,"{1,3}"),$=Qs(t,"{1,6}"),E=Qs(t,"{1,9}"),O=Qs(t,"{2,4}"),P=Qs(t,"{4,6}"),R=V=>({regex:RegExp(mre(V.val)),deser:([K])=>K,literal:!0}),z=(V=>{if(e.literal)return R(V);switch(V.val){case"G":return en(t.eras("short",!1),0);case"GG":return en(t.eras("long",!1),0);case"y":return At($);case"yy":return At(O,W_);case"yyyy":return At(d);case"yyyyy":return At(P);case"yyyyyy":return At(y);case"M":return At(g);case"MM":return At(s);case"MMM":return en(t.months("short",!0,!1),1);case"MMMM":return en(t.months("long",!0,!1),1);case"L":return At(g);case"LL":return At(s);case"LLL":return en(t.months("short",!1,!1),1);case"LLLL":return en(t.months("long",!1,!1),1);case"d":return At(g);case"dd":return At(s);case"o":return At(x);case"ooo":return At(l);case"HH":return At(s);case"H":return At(g);case"hh":return At(s);case"h":return At(g);case"mm":return At(s);case"m":return At(g);case"q":return At(g);case"qq":return At(s);case"s":return At(g);case"ss":return At(s);case"S":return At(x);case"SSS":return At(l);case"u":return Nw(E);case"uu":return Nw(g);case"uuu":return At(i);case"a":return en(t.meridiems(),0);case"kkkk":return At(d);case"kk":return At(O,W_);case"W":return At(g);case"WW":return At(s);case"E":case"c":return At(i);case"EEE":return en(t.weekdays("short",!1,!1),1);case"EEEE":return en(t.weekdays("long",!1,!1),1);case"ccc":return en(t.weekdays("short",!0,!1),1);case"cccc":return en(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return v$(new RegExp(`([+-]${g.source})(?::(${s.source}))?`),2);case"ZZZ":return v$(new RegExp(`([+-]${g.source})(${s.source})?`),2);case"z":return Nw(/[a-z_+-/]{1,256}?/i);default:return R(V)}})(e)||{invalidReason:dre};return z.token=e,z}const vre={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function wre(e,t,i){const{type:s,value:l}=e;if(s==="literal")return{literal:!0,val:l};const d=i[s];let y=vre[s];if(typeof y=="object"&&(y=y[d]),y)return{literal:!1,val:y}}function bre(e){return[`^${e.map(i=>i.regex).reduce((i,s)=>`${i}(${s.source})`,"")}$`,e]}function _re(e,t,i){const s=e.match(t);if(s){const l={};let d=1;for(const y in i)if(Ep(i,y)){const g=i[y],x=g.groups?g.groups+1:1;!g.literal&&g.token&&(l[g.token.val[0]]=g.deser(s.slice(d,d+x))),d+=x}return[s,l]}else return[s,{}]}function xre(e){const t=d=>{switch(d){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,s;return bt(e.z)||(i=da.create(e.z)),bt(e.Z)||(i||(i=new Mr(e.Z)),s=e.Z),bt(e.q)||(e.M=(e.q-1)*3+1),bt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),bt(e.u)||(e.S=sx(e.u)),[Object.keys(e).reduce((d,y)=>{const g=t(y);return g&&(d[g]=e[y]),d},{}),i,s]}let Rw=null;function Sre(){return Rw||(Rw=rt.fromMillis(1555555555555)),Rw}function $re(e,t){if(e.literal)return e;const i=Br.macroTokenToFormatOpts(e.val);if(!i)return e;const d=Br.create(t,i).formatDateTimeParts(Sre()).map(y=>wre(y,t,i));return d.includes(void 0)?e:d}function Mre(e,t){return Array.prototype.concat(...e.map(i=>$re(i,t)))}function TN(e,t,i){const s=Mre(Br.parseFormat(i),e),l=s.map(y=>gre(y,e)),d=l.find(y=>y.invalidReason);if(d)return{input:t,tokens:s,invalidReason:d.invalidReason};{const[y,g]=bre(l),x=RegExp(y,"i"),[$,E]=_re(t,x,g),[O,P,R]=E?xre(E):[null,null,void 0];if(Ep(E,"a")&&Ep(E,"H"))throw new v0("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:s,regex:x,rawMatches:$,matches:E,result:O,zone:P,specificOffset:R}}}function Ire(e,t,i){const{result:s,zone:l,specificOffset:d,invalidReason:y}=TN(e,t,i);return[s,l,d,y]}const EN=[0,31,59,90,120,151,181,212,243,273,304,334],AN=[0,31,60,91,121,152,182,213,244,274,305,335];function Us(e,t){return new En("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function kN(e,t,i){const s=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function ON(e,t,i){return i+(u1(e)?AN:EN)[t-1]}function CN(e,t){const i=u1(e)?AN:EN,s=i.findIndex(d=>d<t),l=t-i[s];return{month:s+1,day:l}}function Z_(e){const{year:t,month:i,day:s}=e,l=ON(t,i,s),d=kN(t,i,s);let y=Math.floor((l-d+10)/7),g;return y<1?(g=t-1,y=Wg(g)):y>Wg(t)?(g=t+1,y=1):g=t,{weekYear:g,weekNumber:y,weekday:d,...h2(e)}}function w$(e){const{weekYear:t,weekNumber:i,weekday:s}=e,l=kN(t,1,4),d=Q0(t);let y=i*7+s-l-3,g;y<1?(g=t-1,y+=Q0(g)):y>d?(g=t+1,y-=Q0(t)):g=t;const{month:x,day:$}=CN(g,y);return{year:g,month:x,day:$,...h2(e)}}function jw(e){const{year:t,month:i,day:s}=e,l=ON(t,i,s);return{year:t,ordinal:l,...h2(e)}}function b$(e){const{year:t,ordinal:i}=e,{month:s,day:l}=CN(t,i);return{year:t,month:s,day:l,...h2(e)}}function Tre(e){const t=l2(e.weekYear),i=ra(e.weekNumber,1,Wg(e.weekYear)),s=ra(e.weekday,1,7);return t?i?s?!1:Us("weekday",e.weekday):Us("week",e.week):Us("weekYear",e.weekYear)}function Ere(e){const t=l2(e.year),i=ra(e.ordinal,1,Q0(e.year));return t?i?!1:Us("ordinal",e.ordinal):Us("year",e.year)}function PN(e){const t=l2(e.year),i=ra(e.month,1,12),s=ra(e.day,1,Hg(e.year,e.month));return t?i?s?!1:Us("day",e.day):Us("month",e.month):Us("year",e.year)}function NN(e){const{hour:t,minute:i,second:s,millisecond:l}=e,d=ra(t,0,23)||t===24&&i===0&&s===0&&l===0,y=ra(i,0,59),g=ra(s,0,59),x=ra(l,0,999);return d?y?g?x?!1:Us("millisecond",l):Us("second",s):Us("minute",i):Us("hour",t)}const Lw="Invalid DateTime",_$=864e13;function ay(e){return new En("unsupported zone",`the zone "${e.name}" is not supported`)}function Fw(e){return e.weekData===null&&(e.weekData=Z_(e.c)),e.weekData}function $d(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new rt({...i,...t,old:i})}function RN(e,t,i){let s=e-t*60*1e3;const l=i.offset(s);if(t===l)return[s,t];s-=(l-t)*60*1e3;const d=i.offset(s);return l===d?[s,l]:[e-Math.min(l,d)*60*1e3,Math.max(l,d)]}function x$(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function xm(e,t,i){return RN(ox(e),t,i)}function S$(e,t){const i=e.o,s=e.c.year+Math.trunc(t.years),l=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,d={...e.c,year:s,month:l,day:Math.min(e.c.day,Hg(s,l))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},y=Mt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),g=ox(d);let[x,$]=RN(g,i,e.zone);return y!==0&&(x+=y,$=e.zone.offset(x)),{ts:x,o:$}}function Md(e,t,i,s,l,d){const{setZone:y,zone:g}=i;if(e&&Object.keys(e).length!==0){const x=t||g,$=rt.fromObject(e,{...i,zone:x,specificOffset:d});return y?$:$.setZone(g)}else return rt.invalid(new En("unparsable",`the input "${l}" can't be parsed as ${s}`))}function ly(e,t,i=!0){return e.isValid?Br.create(ri.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Dw(e,t){const i=e.c.year>9999||e.c.year<0;let s="";return i&&e.c.year>=0&&(s+="+"),s+=Ii(e.c.year,i?6:4),t?(s+="-",s+=Ii(e.c.month),s+="-",s+=Ii(e.c.day)):(s+=Ii(e.c.month),s+=Ii(e.c.day)),s}function $$(e,t,i,s,l,d){let y=Ii(e.c.hour);return t?(y+=":",y+=Ii(e.c.minute),(e.c.second!==0||!i)&&(y+=":")):y+=Ii(e.c.minute),(e.c.second!==0||!i)&&(y+=Ii(e.c.second),(e.c.millisecond!==0||!s)&&(y+=".",y+=Ii(e.c.millisecond,3))),l&&(e.isOffsetFixed&&e.offset===0&&!d?y+="Z":e.o<0?(y+="-",y+=Ii(Math.trunc(-e.o/60)),y+=":",y+=Ii(Math.trunc(-e.o%60))):(y+="+",y+=Ii(Math.trunc(e.o/60)),y+=":",y+=Ii(Math.trunc(e.o%60)))),d&&(y+="["+e.zone.ianaName+"]"),y}const jN={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Are={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},kre={ordinal:1,hour:0,minute:0,second:0,millisecond:0},LN=["year","month","day","hour","minute","second","millisecond"],Ore=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Cre=["year","ordinal","hour","minute","second","millisecond"];function M$(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new VP(e);return t}function I$(e,t){const i=ml(t.zone,ji.defaultZone),s=ri.fromObject(t),l=ji.now();let d,y;if(bt(e.year))d=l;else{for(const $ of LN)bt(e[$])&&(e[$]=jN[$]);const g=PN(e)||NN(e);if(g)return rt.invalid(g);const x=i.offset(l);[d,y]=xm(e,x,i)}return new rt({ts:d,zone:i,loc:s,o:y})}function T$(e,t,i){const s=bt(i.round)?!0:i.round,l=(y,g)=>(y=nx(y,s||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(y,g)),d=y=>i.calendary?t.hasSame(e,y)?0:t.startOf(y).diff(e.startOf(y),y).get(y):t.diff(e,y).get(y);if(i.unit)return l(d(i.unit),i.unit);for(const y of i.units){const g=d(y);if(Math.abs(g)>=1)return l(g,y)}return l(e>t?-0:0,i.units[i.units.length-1])}function E$(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}class rt{constructor(t){const i=t.zone||ji.defaultZone;let s=t.invalid||(Number.isNaN(t.ts)?new En("invalid input"):null)||(i.isValid?null:ay(i));this.ts=bt(t.ts)?ji.now():t.ts;let l=null,d=null;if(!s)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[l,d]=[t.old.c,t.old.o];else{const g=i.offset(this.ts);l=x$(this.ts,g),s=Number.isNaN(l.year)?new En("invalid input"):null,l=s?null:l,d=s?null:g}this._zone=i,this.loc=t.loc||ri.create(),this.invalid=s,this.weekData=null,this.c=l,this.o=d,this.isLuxonDateTime=!0}static now(){return new rt({})}static local(){const[t,i]=E$(arguments),[s,l,d,y,g,x,$]=i;return I$({year:s,month:l,day:d,hour:y,minute:g,second:x,millisecond:$},t)}static utc(){const[t,i]=E$(arguments),[s,l,d,y,g,x,$]=i;return t.zone=Mr.utcInstance,I$({year:s,month:l,day:d,hour:y,minute:g,second:x,millisecond:$},t)}static fromJSDate(t,i={}){const s=zte(t)?t.valueOf():NaN;if(Number.isNaN(s))return rt.invalid("invalid input");const l=ml(i.zone,ji.defaultZone);return l.isValid?new rt({ts:s,zone:l,loc:ri.fromObject(i)}):rt.invalid(ay(l))}static fromMillis(t,i={}){if(fh(t))return t<-_$||t>_$?rt.invalid("Timestamp out of range"):new rt({ts:t,zone:ml(i.zone,ji.defaultZone),loc:ri.fromObject(i)});throw new qs(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(fh(t))return new rt({ts:t*1e3,zone:ml(i.zone,ji.defaultZone),loc:ri.fromObject(i)});throw new qs("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const s=ml(i.zone,ji.defaultZone);if(!s.isValid)return rt.invalid(ay(s));const l=ji.now(),d=bt(i.specificOffset)?s.offset(l):i.specificOffset,y=Jg(t,M$),g=!bt(y.ordinal),x=!bt(y.year),$=!bt(y.month)||!bt(y.day),E=x||$,O=y.weekYear||y.weekNumber,P=ri.fromObject(i);if((E||g)&&O)throw new v0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if($&&g)throw new v0("Can't mix ordinal dates with month/day");const R=O||y.weekday&&!E;let L,z,V=x$(l,d);R?(L=Ore,z=Are,V=Z_(V)):g?(L=Cre,z=kre,V=jw(V)):(L=LN,z=jN);let K=!1;for(const Se of L){const Pe=y[Se];bt(Pe)?K?y[Se]=z[Se]:y[Se]=V[Se]:K=!0}const ee=R?Tre(y):g?Ere(y):PN(y),se=ee||NN(y);if(se)return rt.invalid(se);const oe=R?w$(y):g?b$(y):y,[ne,ae]=xm(oe,d,s),Ie=new rt({ts:ne,zone:s,o:ae,loc:P});return y.weekday&&E&&t.weekday!==Ie.weekday?rt.invalid("mismatched weekday",`you can't specify both a weekday of ${y.weekday} and a date of ${Ie.toISO()}`):Ie}static fromISO(t,i={}){const[s,l]=Hie(t);return Md(s,l,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[s,l]=Wie(t);return Md(s,l,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[s,l]=Jie(t);return Md(s,l,i,"HTTP",i)}static fromFormat(t,i,s={}){if(bt(t)||bt(i))throw new qs("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:d=null}=s,y=ri.fromOpts({locale:l,numberingSystem:d,defaultToEN:!0}),[g,x,$,E]=Ire(y,t,i);return E?rt.invalid(E):Md(g,x,s,`format ${i}`,t,$)}static fromString(t,i,s={}){return rt.fromFormat(t,i,s)}static fromSQL(t,i={}){const[s,l]=tre(t);return Md(s,l,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new qs("need to specify a reason the DateTime is invalid");const s=t instanceof En?t:new En(t,i);if(ji.throwOnInvalid)throw new Nte(s);return new rt({invalid:s})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Fw(this).weekYear:NaN}get weekNumber(){return this.isValid?Fw(this).weekNumber:NaN}get weekday(){return this.isValid?Fw(this).weekday:NaN}get ordinal(){return this.isValid?jw(this.c).ordinal:NaN}get monthShort(){return this.isValid?oy.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?oy.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?oy.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?oy.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return u1(this.year)}get daysInMonth(){return Hg(this.year,this.month)}get daysInYear(){return this.isValid?Q0(this.year):NaN}get weeksInWeekYear(){return this.isValid?Wg(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:s,calendar:l}=Br.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:s,outputCalendar:l}}toUTC(t=0,i={}){return this.setZone(Mr.instance(t),i)}toLocal(){return this.setZone(ji.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:s=!1}={}){if(t=ml(t,ji.defaultZone),t.equals(this.zone))return this;if(t.isValid){let l=this.ts;if(i||s){const d=t.offset(this.ts),y=this.toObject();[l]=xm(y,d,t)}return $d(this,{ts:l,zone:t})}else return rt.invalid(ay(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:s}={}){const l=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:s});return $d(this,{loc:l})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=Jg(t,M$),s=!bt(i.weekYear)||!bt(i.weekNumber)||!bt(i.weekday),l=!bt(i.ordinal),d=!bt(i.year),y=!bt(i.month)||!bt(i.day),g=d||y,x=i.weekYear||i.weekNumber;if((g||l)&&x)throw new v0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(y&&l)throw new v0("Can't mix ordinal dates with month/day");let $;s?$=w$({...Z_(this.c),...i}):bt(i.ordinal)?($={...this.toObject(),...i},bt(i.day)&&($.day=Math.min(Hg($.year,$.month),$.day))):$=b$({...jw(this.c),...i});const[E,O]=xm($,this.o,this.zone);return $d(this,{ts:E,o:O})}plus(t){if(!this.isValid)return this;const i=Mt.fromDurationLike(t);return $d(this,S$(this,i))}minus(t){if(!this.isValid)return this;const i=Mt.fromDurationLike(t).negate();return $d(this,S$(this,i))}startOf(t){if(!this.isValid)return this;const i={},s=Mt.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks"&&(i.weekday=1),s==="quarters"){const l=Math.ceil(this.month/3);i.month=(l-1)*3+1}return this.set(i)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,i={}){return this.isValid?Br.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):Lw}toLocaleString(t=H_,i={}){return this.isValid?Br.create(this.loc.clone(i),t).formatDateTime(this):Lw}toLocaleParts(t={}){return this.isValid?Br.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:d=!1}={}){if(!this.isValid)return null;const y=t==="extended";let g=Dw(this,y);return g+="T",g+=$$(this,y,i,s,l,d),g}toISODate({format:t="extended"}={}){return this.isValid?Dw(this,t==="extended"):null}toISOWeekDate(){return ly(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:d=!1,format:y="extended"}={}){return this.isValid?(l?"T":"")+$$(this,y==="extended",i,t,s,d):null}toRFC2822(){return ly(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ly(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Dw(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(i||t)&&(s&&(l+=" "),i?l+="z":t&&(l+="ZZ")),ly(this,l,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Lw}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",s={}){if(!this.isValid||!t.isValid)return Mt.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},d=Vte(i).map(Mt.normalizeUnit),y=t.valueOf()>this.valueOf(),g=y?this:t,x=y?t:this,$=hre(g,x,d,l);return y?$.negate():$}diffNow(t="milliseconds",i={}){return this.diff(rt.now(),t,i)}until(t){return this.isValid?ci.fromDateTimes(this,t):this}hasSame(t,i){if(!this.isValid)return!1;const s=t.valueOf(),l=this.setZone(t.zone,{keepLocalTime:!0});return l.startOf(i)<=s&&s<=l.endOf(i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||rt.fromObject({},{zone:this.zone}),s=t.padding?this<i?-t.padding:t.padding:0;let l=["years","months","days","hours","minutes","seconds"],d=t.unit;return Array.isArray(t.unit)&&(l=t.unit,d=void 0),T$(i,this.plus(s),{...t,numeric:"always",units:l,unit:d})}toRelativeCalendar(t={}){return this.isValid?T$(t.base||rt.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(rt.isDateTime))throw new qs("min requires all arguments be DateTimes");return n$(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(rt.isDateTime))throw new qs("max requires all arguments be DateTimes");return n$(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,s={}){const{locale:l=null,numberingSystem:d=null}=s,y=ri.fromOpts({locale:l,numberingSystem:d,defaultToEN:!0});return TN(y,t,i)}static fromStringExplain(t,i,s={}){return rt.fromFormatExplain(t,i,s)}static get DATE_SHORT(){return H_}static get DATE_MED(){return GP}static get DATE_MED_WITH_WEEKDAY(){return Lte}static get DATE_FULL(){return qP}static get DATE_HUGE(){return UP}static get TIME_SIMPLE(){return BP}static get TIME_WITH_SECONDS(){return HP}static get TIME_WITH_SHORT_OFFSET(){return WP}static get TIME_WITH_LONG_OFFSET(){return JP}static get TIME_24_SIMPLE(){return KP}static get TIME_24_WITH_SECONDS(){return YP}static get TIME_24_WITH_SHORT_OFFSET(){return XP}static get TIME_24_WITH_LONG_OFFSET(){return ZP}static get DATETIME_SHORT(){return QP}static get DATETIME_SHORT_WITH_SECONDS(){return eN}static get DATETIME_MED(){return tN}static get DATETIME_MED_WITH_SECONDS(){return iN}static get DATETIME_MED_WITH_WEEKDAY(){return Fte}static get DATETIME_FULL(){return rN}static get DATETIME_FULL_WITH_SECONDS(){return sN}static get DATETIME_HUGE(){return nN}static get DATETIME_HUGE_WITH_SECONDS(){return oN}}function Id(e){if(rt.isDateTime(e))return e;if(e&&e.valueOf&&fh(e.valueOf()))return rt.fromJSDate(e);if(e&&typeof e=="object")return rt.fromObject(e);throw new qs(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const zw={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function FN(e){e||(e=ds());let t=e in zw;if(!t){const d=e.split("-");d.length>1&&d[0]in zw&&(e=d[0],t=!0),t||(e="en")}const[i,s,l="#,##0.###"]=zw[e];return{decimal:i,group:s,pattern:l}}function Pre(e,t){const i=FN((t={...t}).locale);t.customs=i;const s=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:Nre(e,s,t)}const DN=/[#0,]*[#0](?:\.0*#*)?/;function Nre(e,t,i){const s=(i=i||{}).customs.group,l=i.customs.decimal,d=t.split(";"),y=d[0];if((t=d[e<0?1:0]||"-"+y).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xA4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const g=DN,x=y.match(g);if(!x)throw new Error("unable to find a number expression in pattern: "+t);return i.fractional===!1&&(i.places=0),t.replace(g,Rre(e,x[0],{decimal:l,group:s,places:i.places,round:i.round}))}function Rre(e,t,i){(i=i||{}).places===!0&&(i.places=0),i.places===1/0&&(i.places=6);const s=t.split("."),l=typeof i.places=="string"&&i.places.indexOf(",");let d=i.places;l?d=i.places.substring(l+1):d>=0||(d=(s[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(d))));const y=String(Math.abs(e)).split("."),g=y[1]||"";if(s[1]||i.places){l&&(i.places=i.places.substring(0,l));const L=i.places!==void 0?i.places:s[1]&&s[1].lastIndexOf("0")+1;L>g.length&&(y[1]=g.padEnd(Number(L),"0")),d<g.length&&(y[1]=g.substr(0,Number(d)))}else y[1]&&y.pop();const x=s[0].replace(",","");let $=x.indexOf("0");$!==-1&&($=x.length-$,$>y[0].length&&(y[0]=y[0].padStart($,"0")),x.includes("#")||(y[0]=y[0].substr(y[0].length-$)));let E,O,P=s[0].lastIndexOf(",");if(P!==-1){E=s[0].length-P-1;const L=s[0].substr(0,P);P=L.lastIndexOf(","),P!==-1&&(O=L.length-P-1)}const R=[];for(let L=y[0];L;){const z=L.length-E;R.push(z>0?L.substr(z):L),L=z>0?L.slice(0,z):"",O&&(E=O,O=void 0)}return y[0]=R.reverse().join(i.group||","),y.join(i.decimal||".")}function jre(e){const t=FN((e=e||{}).locale),i=e.pattern||t.pattern,s=t.group,l=t.decimal;let d=1;if(i.includes("%"))d/=100;else if(i.includes("\u2030"))d/=1e3;else if(i.includes("\xA4"))throw new Error("currency notation not supported");const y=i.split(";");return y.length===1&&y.push("-"+y[0]),{regexp:Pf(y,x=>(x="(?:"+BI(x,".")+")").replace(DN,$=>{const E={signed:!1,separator:e.strict?s:[s,""],fractional:e.fractional,decimal:l,exponent:!1},O=$.split(".");let P=e.places;O.length===1&&d!==1&&(O[1]="###"),O.length===1||P===0?E.fractional=!1:(P===void 0&&(P=e.pattern?O[1].lastIndexOf("0")+1:1/0),P&&e.fractional==null&&(E.fractional=!0),!e.places&&P<O[1].length&&(P+=","+O[1].length),E.places=P);const R=O[0].split(",");return R.length>1&&(E.groupSize=R.pop().length,R.length>1&&(E.groupSize2=R.pop().length)),"("+Fre(E)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:s,decimal:l,factor:d}}function Lre(e,t){const i=jre(t),s=new RegExp("^"+i.regexp+"$").exec(e);if(!s)return NaN;let l=s[1];if(!s[1]){if(!s[2])return NaN;l=s[2],i.factor*=-1}return l=l.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(l)*i.factor}function Fre(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=A$(e),i=Pf(e.fractional,l=>{let d="";return l&&e.places!==0&&(d="\\"+e.decimal,e.places===1/0?d="(?:"+d+"\\d+)?":d+="\\d{"+e.places+"}"),d},!0);let s=t+i;return i&&(s="(?:(?:"+s+")|(?:"+i+"))"),s+Pf(e.exponent,l=>l?"([eE]"+A$({signed:e.eSigned})+")":"")}function A$(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",Pf(e.signed,t=>t?"[-+]":"",!0)+Pf(e.separator,t=>{if(!t)return"(?:\\d+)";(t=BI(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const i=e.groupSize,s=e.groupSize2;if(s){const l="(?:0|[1-9]\\d{0,"+(s-1)+"}(?:["+t+"]\\d{"+s+"})*["+t+"]\\d{"+i+"})";return i-s>0?"(?:"+l+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":l}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0)}const Pf=(e,t,i)=>{if(!(e instanceof Array))return t(e);const s=[];for(let l=0;l<e.length;l++)s.push(t(e[l]));return Dre(s.join("|"),i)},Dre=(e,t)=>"("+(t?"?:":"")+e+")";var k$,O$;function Sfe(e){return Ih.fromJSON(e.toJSON())}function zre(e){return e.toJSON?e.toJSON():e}function $fe(e){return typeof e=="string"||e instanceof String}function Mfe(e){return typeof e=="number"}function C$(e){return e instanceof Date}function Ife(e,t){return e===t||!(!C$(e)||!C$(t))&&e.getTime()===t.getTime()}function Tfe(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function Efe(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new xt({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function Afe(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(k$||(k$={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(O$||(O$={}));const kfe=1e3,Ofe={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},P$={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},Cfe={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function Pfe(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Nfe(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,s=t.cmp&&(l=t.cmp,function(y){return function(g,x){const $={key:g,value:y[g]},E={key:x,value:y[x]};return l($,E)}});var l;const d=[];return function y(g){if(g&&g.toJSON&&typeof g.toJSON=="function"&&(g=g.toJSON()),g===void 0)return;if(typeof g=="number")return isFinite(g)?""+g:"null";if(typeof g!="object")return JSON.stringify(g);let x,$;if(Array.isArray(g)){for($="[",x=0;x<g.length;x++)x&&($+=","),$+=y(g[x])||"null";return $+"]"}if(g===null)return"null";if(d.includes(g)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const E=d.push(g)-1,O=Object.keys(g).sort(s&&s(g));for($="",x=0;x<O.length;x++){const P=O[x],R=y(g[P]);R&&($&&($+=","),$+=JSON.stringify(P)+":"+R)}return d.splice(E,1),"{"+$+"}"}(e)}class zN{constructor(t){this.value=t}}class VN{constructor(t){this.value=t}}class px{constructor(t){this.fn=t}}class dx{constructor(t,i){this.paramCount=i,this.fn=t}}const Vre=px,Gre=VN,qre=zN,Ure=dx,us={type:"VOID"},Bre={type:"BREAK"},Hre={type:"CONTINUE"};function Nf(e,t,i){return t===""||t==null||t===i||t===i?e:e=e.split(t).join(i)}function fx(e){return e instanceof px||e instanceof Pte||e instanceof dx}function Kg(e){return!!Ki(e)||!!xr(e)||!!ur(e)||!!_r(e)||e===null||e===us||typeof e=="number"}function Wre(e,t){return e===void 0?t:e}function Ki(e){return typeof e=="string"||e instanceof String}function _r(e){return typeof e=="boolean"}function xr(e){return typeof e=="number"}function Jre(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Js(e){return e instanceof Array}function Kre(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function Yre(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function Xre(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function Ph(e){return e instanceof xo}function ur(e){return e instanceof Date}function Zre(e,t,i){if(e.length<t||e.length>i)throw new Error("Function called with wrong number of Parameters")}function Qre(e){return e<0?-Math.round(-e):Math.round(e)}function ese(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?i:3&i|8).toString(16)})}function yx(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=Nf(t,"\u2030",""),t=Nf(t,"\xA4",""),Pre(e,{pattern:t})):e.toString()}function c2(e,t){const i=rt.fromJSDate(e);return t==null||t===""?i.toISO({suppressMilliseconds:!0}):i.toFormat(GN(t),{locale:ds(),numberingSystem:"latn"})}function GN(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const i=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const s of e.match(i))switch(s){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=s;break;default:s.length>=2&&s.slice(0,1)==="["&&s.slice(-1)==="]"?t+=`'${s.slice(1,-1)}'`:t+=`'${s}'`}return t}function Pt(e,t,i){switch(i){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function tse(e,t,i){if(e===null){if(t===null||t===us)return Pt(null,null,i);if(xr(t))return Pt(0,t,i);if(Ki(t)||_r(t))return Pt(0,ii(t),i);if(ur(t))return Pt(0,t.getTime(),i)}if(e===us){if(t===null||t===us)return Pt(null,null,i);if(xr(t))return Pt(0,t,i);if(Ki(t)||_r(t))return Pt(0,ii(t),i);if(ur(t))return Pt(0,t.getTime(),i)}else if(xr(e)){if(xr(t))return Pt(e,t,i);if(_r(t))return Pt(e,ii(t),i);if(t===null||t===us)return Pt(e,0,i);if(Ki(t))return Pt(e,ii(t),i);if(ur(t))return Pt(e,t.getTime(),i)}else if(Ki(e)){if(Ki(t))return Pt(El(e),El(t),i);if(ur(t))return Pt(ii(e),t.getTime(),i);if(xr(t))return Pt(ii(e),t,i);if(t===null||t===us)return Pt(ii(e),0,i);if(_r(t))return Pt(ii(e),ii(t),i)}else if(ur(e)){if(ur(t))return Pt(e,t,i);if(t===null||t===us)return Pt(e.getTime(),0,i);if(xr(t))return Pt(e.getTime(),t,i);if(_r(t)||Ki(t))return Pt(e.getTime(),ii(t),i)}else if(_r(e)){if(_r(t))return Pt(e,t,i);if(xr(t))return Pt(ii(e),ii(t),i);if(ur(t))return Pt(ii(e),t.getTime(),i);if(t===null||t===us)return Pt(ii(e),0,i);if(Ki(t))return Pt(ii(e),ii(t),i)}return!!qN(e,t)&&(i==="<="||i===">=")}function qN(e,t){if(e===t||e===null&&t===us||t===null&&e===us)return!0;if(ur(e)&&ur(t))return e.getTime()===t.getTime();if(e instanceof rx||e instanceof Vh)return e.equalityTest(t);if(e instanceof He&&t instanceof He){const i=e.cache._arcadeCacheId,s=t.cache._arcadeCacheId;if(i!=null)return i===s}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function El(e,t){if(Ki(e))return e;if(e===null)return"";if(xr(e))return yx(e,t);if(_r(e))return e.toString();if(ur(e))return c2(e,t);if(e instanceof Jr)return JSON.stringify(e.toJSON());if(Js(e)){const i=[];for(let s=0;s<e.length;s++)i[s]=Yg(e[s]);return"["+i.join(",")+"]"}if(e instanceof xo){const i=[];for(let s=0;s<e.length();s++)i[s]=Yg(e.get(s));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():fx(e)?"object, Function":""}function ise(e){const t=[];if(Js(e)===!1)return null;if(e instanceof xo){for(let i=0;i<e.length();i++)t[i]=ii(e.get(i));return t}for(let i=0;i<e.length;i++)t[i]=ii(e[i]);return t}function Sm(e,t){if(Ki(e))return e;if(e===null)return"";if(xr(e))return yx(e,t);if(_r(e))return e.toString();if(ur(e))return c2(e,t);if(e instanceof Jr)return e instanceof xt?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+Q_(e.spatialReference)+"}":Q_(e.toJSON(),(i,s)=>i.key===s.key?0:i.key==="spatialReference"?1:s.key==="spatialReference"||i.key<s.key?-1:i.key>s.key?1:0);if(Js(e)){const i=[];for(let s=0;s<e.length;s++)i[s]=Yg(e[s]);return"["+i.join(",")+"]"}if(e instanceof xo){const i=[];for(let s=0;s<e.length();s++)i[s]=Yg(e.get(s));return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():fx(e)?"object, Function":""}function Yg(e){if(e===null)return"null";if(_r(e)||xr(e)||Ki(e))return JSON.stringify(e);if(e instanceof Jr||e instanceof xo||e instanceof Array)return Sm(e);if(e instanceof Date)return JSON.stringify(c2(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===us)return"null";return"null"}function ii(e,t){return xr(e)?e:e===null||e===""?0:ur(e)?NaN:_r(e)?e?1:0:Js(e)||e===""||e===void 0?NaN:t!==void 0&&Ki(e)?(t=Nf(t,"\u2030",""),t=Nf(t,"\xA4",""),Lre(e,{pattern:t})):e===us?0:Number(e)}function rse(e){if(ur(e))return e;if(Ki(e)){const t=UN(e);if(t)return t.toJSDate()}return null}function sse(e){return ur(e)?rt.fromJSDate(e):Ki(e)?UN(e):null}function UN(e){const t=/ (\d\d)/;let i=rt.fromISO(e);return i.isValid||t.test(e)&&(e=e.replace(t,"T$1"),i=rt.fromISO(e),i.isValid)?i:null}function nse(e){return _r(e)?e:Ki(e)?(e=e.toLowerCase())==="true":!!xr(e)&&e!==0&&!isNaN(e)}function ose(e,t){return he(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function ase(e){if(e===null)return null;if(e instanceof He)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof gs){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof $r){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof Nh?e.points.length===0?null:e:e instanceof xt?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function BN(e,t){if(!e||!e.domain)return t;let i=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=El(t);else{if(t==null)return null;if(t==="")return t;t=ii(t)}for(let s=0;s<e.domain.codedValues.length;s++){const l=e.domain.codedValues[s];l.code===t&&(i=l)}return i===null?t:i.name}function HN(e,t){if(!e||!e.domain)return t;let i=null;t=El(t);for(let s=0;s<e.domain.codedValues.length;s++){const l=e.domain.codedValues[s];l.name===t&&(i=l)}return i===null?t:i.code}function p2(e,t,i=null,s=null){if(!t||!t.fields)return null;let l,d,y=null;for(let g=0;g<t.fields.length;g++){const x=t.fields[g];x.name.toLowerCase()===e.toString().toLowerCase()&&(y=x)}if(y===null)throw new Error("Field not found");return s===null&&i&&t.typeIdField&&(s=i.hasField(t.typeIdField)?i.field(t.typeIdField):null),s!=null&&t.types.some(function(g){return g.id===s&&(l=g.domains&&g.domains[y.name],l&&l.type==="inherited"&&(l=N$(y.name,t),d=!0),!0)}),d||l||(l=N$(e,t)),{field:y,domain:l}}function N$(e,t){let i;return t.fields.some(function(s){return s.name.toLowerCase()===e.toLowerCase()&&(i=s.domain),!!i}),i}function Q_(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const i=typeof t.cycles=="boolean"&&t.cycles,s=t.cmp&&(l=t.cmp,function(y){return function(g,x){const $={key:g,value:y[g]},E={key:x,value:y[x]};return l($,E)}});var l;const d=[];return function y(g){if(g&&g.toJSON&&typeof g.toJSON=="function"&&(g=g.toJSON()),g===void 0)return;if(typeof g=="number")return isFinite(g)?""+g:"null";if(typeof g!="object")return JSON.stringify(g);let x,$;if(Array.isArray(g)){for($="[",x=0;x<g.length;x++)x&&($+=","),$+=y(g[x])||"null";return $+"]"}if(g===null)return"null";if(d.includes(g)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const E=d.push(g)-1,O=Object.keys(g).sort(s&&s(g));for($="",x=0;x<O.length;x++){const P=O[x],R=y(g[P]);R&&($&&($+=","),$+=JSON.stringify(P)+":"+R)}return d.splice(E,1),"{"+$+"}"}(e)}function lse(e){if(e===null)return null;const t=[];for(const i of e)i&&i.arcadeDeclaredClass&&i.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(i.geometry()):t.push(i);return t}function Ap(e,t){if(!(t instanceof He))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function use(e,t){if(Js(e)||Ph(e)){let i=!1,s=!1,l=[],d=t;if(Js(e)){for(const y of e)Ap(l,y);l.length>0&&(d=e[0].spatialReference,i=e[0].hasZ,s=e[0].hasM)}else if(e instanceof Vh)l=e._elements,l.length>0&&(i=e._hasZ,s=e._hasM,d=e.get(0).spatialReference);else{if(!Ph(e))throw new Error("Invalid Argument");for(const y of e.toArray())Ap(l,y);l.length>0&&(d=e.get(0).spatialReference,i=e.get(0).hasZ===!0,s=e.get(0).hasM===!0)}return l.length===0?null:(m4(l,s,i)===!1&&(l=l.slice(0).reverse()),new gs({rings:[l],spatialReference:d,hasZ:i,hasM:s}))}return e}function hse(e,t){if(Js(e)||Ph(e)){let i=!1,s=!1,l=[],d=t;if(Js(e)){for(const y of e)Ap(l,y);l.length>0&&(d=e[0].spatialReference,i=e[0].hasZ===!0,s=e[0].hasM===!0)}else if(e instanceof Vh)l=e._elements,l.length>0&&(i=e._hasZ,s=e._hasM,d=e.get(0).spatialReference);else if(Ph(e)){for(const y of e.toArray())Ap(l,y);l.length>0&&(d=e.get(0).spatialReference,i=e.get(0).hasZ===!0,s=e.get(0).hasM===!0)}return l.length===0?null:new $r({paths:[l],spatialReference:d,hasZ:i,hasM:s})}return e}function cse(e,t){if(Js(e)||Ph(e)){let i=!1,s=!1,l=[],d=t;if(Js(e)){for(const y of e)Ap(l,y);l.length>0&&(d=e[0].spatialReference,i=e[0].hasZ===!0,s=e[0].hasM===!0)}else if(e instanceof Vh)l=e._elements,l.length>0&&(i=e._hasZ,s=e._hasM,d=e.get(0).spatialReference);else if(Ph(e)){for(const y of e.toArray())Ap(l,y);l.length>0&&(d=e.get(0).spatialReference,i=e.get(0).hasZ===!0,s=e.get(0).hasM===!0)}return l.length===0?null:new Nh({points:l,spatialReference:d,hasZ:i,hasM:s})}return e}function pse(e,t=!1){const i=[];if(e===null)return i;if(Js(e)===!0){for(let s=0;s<e.length;s++){const l=El(e[s]);l===""&&t!==!0||i.push(l)}return i}if(e instanceof xo){for(let s=0;s<e.length();s++){const l=El(e.get(s));l===""&&t!==!0||i.push(l)}return i}if(Kg(e)){const s=El(e);return s===""&&t!==!0||i.push(s),i}return[]}let Vw=0;function dse(e){return Vw++,Vw%100==0?(Vw=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function fse(e,t,i){switch(i){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function Rf(e,t=null){return e==null?null:_r(e)||xr(e)||Ki(e)?e:e instanceof Jr?(t==null?void 0:t.keepGeometryType)===!0?e:e.toJSON():e instanceof xo?e.toArray().map(i=>Rf(i,t)):e instanceof Array?e.map(i=>Rf(i,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function yse(e,t,i,s,l){const d=await mx(e,t,i);l[s]=d}async function mx(e,t=null,i=null){if(e instanceof xo&&(e=e.toArray()),e==null)return null;if(Kg(e)||e instanceof Jr||e instanceof Date)return Rf(e,i);if(e instanceof Array){const s=[],l=[];for(const d of e)d===null||Kg(d)||d instanceof Jr||d instanceof Date?l.push(Rf(d,i)):(l.push(null),s.push(yse(d,t,i,l.length-1,l)));return s.length>0&&await Promise.all(s),l}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,i):null}function mse(e,t,i){const s=e.fullSchema();return s===null||!s.fields?null:p2(t,s,e,i)}function gse(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(i=>({name:i.name,code:i.id})):[]}:null}function vse(e,t,i,s){const l=e.fullSchema();if(l===null||!l.fields)return null;const d=p2(t,l,e,s);if(i===void 0)try{i=e.field(t)}catch{return null}return BN(d,i)}function wse(e,t,i,s){const l=e.fullSchema();if(l===null||!l.fields)return null;if(i===void 0){try{i=e.field(t)}catch{return null}return i}return HN(p2(t,l,e,s),i)}function bse(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const i=[];for(const s of t.fields)i.push(zre(s));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:P$[t.geometryType]===void 0?"":P$[t.geometryType],fields:i}}const Rfe=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:zN,ImplicitResultE:VN,NativeFunctionE:px,SizzleFunctionE:dx,NativeFunction:Vre,ImplicitResult:Gre,ReturnResult:qre,SizzleFunction:Ure,voidOperation:us,breakResult:Bre,continueResult:Hre,multiReplace:Nf,isFunctionParameter:fx,isSimpleType:Kg,defaultUndefined:Wre,isString:Ki,isBoolean:_r,isNumber:xr,isInteger:Jre,isArray:Js,isFeature:Kre,isFeatureSet:Yre,isFeatureSetCollection:Xre,isImmutableArray:Ph,isDate:ur,pcCheck:Zre,absRound:Qre,generateUUID:ese,formatNumber:yx,formatDate:c2,standardiseDateFormat:GN,greaterThanLessThan:tse,equalityTest:qN,toString:El,toNumberArray:ise,toStringExplicit:Sm,toNumber:ii,toDate:rse,toDateTime:sse,toBoolean:nse,fixSpatialReference:ose,fixNullGeometry:ase,getDomainValue:BN,getDomainCode:HN,getDomain:p2,stableStringify:Q_,autoCastFeatureToGeometry:lse,autoCastArrayOfPointsToPolygon:use,autoCastArrayOfPointsToPolyline:hse,autoCastArrayOfPointsToMultiPoint:cse,toStringArray:pse,tick:dse,binaryOperator:fse,castAsJson:Rf,castAsJsonAsync:mx,featureFullDomain:mse,featureSubtypes:gse,featureDomainValueLookup:vse,featureDomainCodeLookup:wse,featureSchema:bse},Symbol.toStringTag,{value:"Module"}));async function _se(e,t){const{WhereClause:i}=await fe(()=>import("./WhereClause.0db16567.js"),[]);return i.create(e,t)}function xse(e,t){return Y(e)?Y(t)?`(${e}) AND (${t})`:e:t}var e5;let Su=e5=class extends ce{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new e5({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};v([_({type:String,json:{write:!0}})],Su.prototype,"expression",void 0),v([_({type:String,json:{write:!0}})],Su.prototype,"name",void 0),v([_({type:["boolean","date","number","string"],json:{write:!0}})],Su.prototype,"returnType",void 0),v([_({type:String,json:{write:!0}})],Su.prototype,"title",void 0),Su=e5=v([H("esri.form.ExpressionInfo")],Su);const Sse=Su;let $u=class extends ce{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};v([_({type:String,json:{write:!0}})],$u.prototype,"description",void 0),v([_({type:String,json:{write:!0}})],$u.prototype,"label",void 0),v([_()],$u.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],$u.prototype,"visibilityExpression",void 0),$u=v([H("esri.form.elements.Element")],$u);const kp=$u;var t5;let $m=t5=class extends ce{constructor(e){super(e),this.type=null}clone(){return new t5({type:this.type})}};v([_({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],$m.prototype,"type",void 0),$m=t5=v([H("esri.form.elements.inputs.AttachmentInput")],$m);const $se=$m;var i5;let Mu=i5=class extends kp{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new i5({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};v([_({type:String,json:{write:!0}})],Mu.prototype,"attachmentKeyword",void 0),v([_({type:Boolean,json:{write:!0}})],Mu.prototype,"editable",void 0),v([_({type:$se,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Mu.prototype,"input",void 0),v([_({type:["attachment"],json:{read:!1,write:!0}})],Mu.prototype,"type",void 0),Mu=i5=v([H("esri.form.elements.AttachmentElement")],Mu);const R$=Mu;let Mm=class extends ce{constructor(e){super(e),this.type=null}};v([_()],Mm.prototype,"type",void 0),Mm=v([H("esri.form.elements.inputs.Input")],Mm);const nd=Mm;let b0=class extends nd{constructor(e){super(e),this.maxLength=null,this.minLength=0}};v([_({type:Number,json:{write:!0}})],b0.prototype,"maxLength",void 0),v([_({type:Number,json:{write:!0}})],b0.prototype,"minLength",void 0),b0=v([H("esri.form.elements.inputs.TextInput")],b0);const gx=b0;var r5;let Im=r5=class extends gx{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new r5({maxLength:this.maxLength,minLength:this.minLength})}};v([_({type:["barcode-scanner"],json:{read:!1,write:!0}})],Im.prototype,"type",void 0),Im=r5=v([H("esri.form.elements.inputs.BarcodeScannerInput")],Im);const Mse=Im;var s5;let xc=s5=class extends nd{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new s5({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};v([_({type:String,json:{write:!0}})],xc.prototype,"noValueOptionLabel",void 0),v([_({type:Boolean,json:{write:!0}})],xc.prototype,"showNoValueOption",void 0),v([_({type:["combo-box"],json:{read:!1,write:!0}})],xc.prototype,"type",void 0),xc=s5=v([H("esri.form.elements.inputs.ComboBoxInput")],xc);const Ise=xc;var n5;function j$(e){return e!=null?new Date(e):null}function L$(e){return e?e.getTime():null}let mn=n5=class extends nd{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return j$(t.max)}writeMax(e,t){t.max=L$(e)}readMin(e,t){return j$(t.min)}writeMin(e,t){t.min=L$(e)}clone(){return new n5({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};v([_({type:Boolean,json:{write:!0}})],mn.prototype,"includeTime",void 0),v([_({type:Date,json:{type:Number,write:!0}})],mn.prototype,"max",void 0),v([$e("max")],mn.prototype,"readMax",null),v([Ee("max")],mn.prototype,"writeMax",null),v([_({type:Date,json:{type:Number,write:!0}})],mn.prototype,"min",void 0),v([$e("min")],mn.prototype,"readMin",null),v([Ee("min")],mn.prototype,"writeMin",null),v([_({type:["datetime-picker"],json:{read:!1,write:!0}})],mn.prototype,"type",void 0),mn=n5=v([H("esri.form.elements.inputs.DateTimePickerInput")],mn);const Tse=mn;var o5;let Sc=o5=class extends nd{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new o5({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};v([_({type:String,json:{write:!0}})],Sc.prototype,"noValueOptionLabel",void 0),v([_({type:Boolean,json:{write:!0}})],Sc.prototype,"showNoValueOption",void 0),v([_({type:["radio-buttons"],json:{read:!1,write:!0}})],Sc.prototype,"type",void 0),Sc=o5=v([H("esri.form.elements.inputs.RadioButtonsInput")],Sc);const Ese=Sc;var a5;let $c=a5=class extends nd{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new a5({offValue:this.offValue,onValue:this.onValue})}};v([_({type:[String,Number],json:{write:!0}})],$c.prototype,"offValue",void 0),v([_({type:[String,Number],json:{write:!0}})],$c.prototype,"onValue",void 0),v([_({type:["switch"],json:{read:!1,write:!0}})],$c.prototype,"type",void 0),$c=a5=v([H("esri.form.elements.inputs.SwitchInput")],$c);const Ase=$c;var l5;let Tm=l5=class extends gx{constructor(e){super(e),this.type="text-area"}clone(){return new l5({maxLength:this.maxLength,minLength:this.minLength})}};v([_({type:["text-area"],json:{read:!1,write:!0}})],Tm.prototype,"type",void 0),Tm=l5=v([H("esri.form.elements.inputs.TextAreaInput")],Tm);const kse=Tm;var u5;let Em=u5=class extends gx{constructor(e){super(e),this.type="text-box"}clone(){return new u5({maxLength:this.maxLength,minLength:this.minLength})}};v([_({type:["text-box"],json:{read:!1,write:!0}})],Em.prototype,"type",void 0),Em=u5=v([H("esri.form.elements.inputs.TextBoxInput")],Em);const Ose=Em,Cse={base:nd,key:"type",typeMap:{"barcode-scanner":Mse,"combo-box":Ise,"datetime-picker":Tse,"radio-buttons":Ese,switch:Ase,"text-area":kse,"text-box":Ose}};var h5;let Ns=h5=class extends kp{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new h5({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};v([_({types:Qk,json:{read:{reader:y6},write:!0}})],Ns.prototype,"domain",void 0),v([_({type:Boolean,json:{write:!0}})],Ns.prototype,"editable",void 0),v([_({type:String,json:{write:!0}})],Ns.prototype,"editableExpression",void 0),v([_({type:String,json:{write:!0}})],Ns.prototype,"fieldName",void 0),v([_({type:String,json:{write:!0}})],Ns.prototype,"hint",void 0),v([_({types:Cse,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ns.prototype,"input",void 0),v([_({type:String,json:{write:!0}})],Ns.prototype,"requiredExpression",void 0),v([_({type:String,json:{read:!1,write:!0}})],Ns.prototype,"type",void 0),v([_({type:String,json:{write:!0}})],Ns.prototype,"valueExpression",void 0),Ns=h5=v([H("esri.form.elements.FieldElement")],Ns);const F$=Ns;var c5;let qo=c5=class extends kp{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new c5({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:ie(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};v([_({type:Number,json:{write:!0}})],qo.prototype,"displayCount",void 0),v([_({type:["list"],json:{write:!0}})],qo.prototype,"displayType",void 0),v([_({type:Boolean,json:{write:!0}})],qo.prototype,"editable",void 0),v([_({type:[ME],json:{write:!0}})],qo.prototype,"orderByFields",void 0),v([_({type:Number,json:{write:!0}})],qo.prototype,"relationshipId",void 0),v([_({type:["relationship"],json:{read:!1,write:!0}})],qo.prototype,"type",void 0),qo=c5=v([H("esri.form.elements.RelationshipElement")],qo);const D$=qo;function WN(e){return{typesWithGroup:{base:kp,key:"type",typeMap:{attachment:R$,field:F$,group:e,relationship:D$}},typesWithoutGroup:{base:kp,key:"type",typeMap:{attachment:R$,field:F$,relationship:D$}}}}function JN(e,t,i=!0){if(!e)return null;const s=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(l=>s[l.type]).map(l=>s[l.type].fromJSON(l))}function KN(e,t,i=!0){if(!e)return null;const s=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(l=>s[l.type]).map(l=>l.toJSON())}function YN(e,t,i=!0){return e?e.map(s=>yo(i?t.typesWithGroup:t.typesWithoutGroup,s)):null}var p5;let ao=p5=class extends kp{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return YN(e,Gw,!1)}readElements(e,t){return JN(t.formElements,Gw,!1)}writeElements(e,t){t.formElements=KN(e,Gw,!1)}clone(){return new p5({description:this.description,elements:ie(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};v([_({json:{write:!0}})],ao.prototype,"elements",void 0),v([mt("elements")],ao.prototype,"castElements",null),v([$e("elements",["formElements"])],ao.prototype,"readElements",null),v([Ee("elements")],ao.prototype,"writeElements",null),v([_({type:["collapsed","expanded"],json:{write:!0}})],ao.prototype,"initialState",void 0),v([_({type:String,json:{read:!1,write:!0}})],ao.prototype,"type",void 0),ao=p5=v([H("esri.form.elements.GroupElement")],ao);const Gw=WN(ao),Pse=ao;var d5;const qw=WN(Pse);let Qn=d5=class extends ce{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return YN(e,qw)}readElements(e,t){return JN(t.formElements,qw)}writeElements(e,t){t.formElements=KN(e,qw)}clone(){return new d5({description:this.description,expressionInfos:ie(this.expressionInfos),elements:ie(this.elements),title:this.title})}};v([_({type:String,json:{write:!0}})],Qn.prototype,"description",void 0),v([_({json:{write:!0}})],Qn.prototype,"elements",void 0),v([mt("elements")],Qn.prototype,"castElements",null),v([$e("elements",["formElements"])],Qn.prototype,"readElements",null),v([Ee("elements")],Qn.prototype,"writeElements",null),v([_({type:[Sse],json:{write:!0}})],Qn.prototype,"expressionInfos",void 0),v([_({type:String,json:{write:!0}})],Qn.prototype,"title",void 0),Qn=d5=v([H("esri.form.FormTemplate")],Qn);const Nse=Qn;var _0;const Xg=tr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),XN=Xg.jsonValues.slice();jI(XN,"orthometric");const tf=tr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let gn=_0=class extends ce{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return Xg.write(e,t,i)}readHeightModel(e,t,i){return Xg.read(e)||(i&&i.messages&&i.messages.push(Rse(e,{context:i})),null)}readHeightUnit(e,t,i){return tf.read(e)||(i&&i.messages&&i.messages.push(z$(e,{context:i})),null)}readHeightUnitService(e,t,i){return ak(e)||tf.read(e)||(i&&i.messages&&i.messages.push(z$(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new _0({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=HU(t);return new _0({heightModel:e.heightModel,heightUnit:i,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new _0;return t.read(e,{origin:"web-scene"}),t}};function z$(e,t){return new Er("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Rse(e,t){return new Er("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}v([_({type:Xg.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:XN,default:"ellipsoidal"}}}})],gn.prototype,"heightModel",void 0),v([Ee("web-scene","heightModel")],gn.prototype,"writeHeightModel",null),v([$e(["web-scene","service"],"heightModel")],gn.prototype,"readHeightModel",null),v([_({type:tf.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:tf.jsonValues,write:tf.write}}}})],gn.prototype,"heightUnit",void 0),v([$e("web-scene","heightUnit")],gn.prototype,"readHeightUnit",null),v([$e("service","heightUnit")],gn.prototype,"readHeightUnitService",null),v([_({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],gn.prototype,"vertCRS",void 0),v([$e("service","vertCRS",["vertCRS","ellipsoid","geoid"])],gn.prototype,"readVertCRS",null),gn=_0=v([H("esri.geometry.HeightModelInfo")],gn);const d2=gn;function V$(e,t,i){if(e.hasM==null||e.hasZ)for(const s of t)for(const l of s)l.length>2&&(l[2]*=i)}function jse(e,t,i){if(!e&&!t||!i)return;const s=Sp(i);G$(e,i,s),G$(t,i,s)}function G$(e,t,i){if(e)for(const s of e)Lse(s.geometry,t,i)}function Lse(e,t,i){if(he(e)||!e.spatialReference||dr(e.spatialReference,t))return;const s=Sp(e.spatialReference)/i;if(s!==1){if("x"in e)e.z!=null&&(e.z*=s);else if("rings"in e)V$(e,e.rings,s);else if("paths"in e)V$(e,e.paths,s);else if("points"in e&&(e.hasM==null||e.hasZ))for(const l of e.points)l.length>2&&(l[2]*=s)}}let Fse=0;const Uw=Me.getLogger("esri.layers.graphics.sources.MemorySource");let Yo=class extends vs.LoadableMixin(Kf(Fh(Ge))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=Y(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var t;const e=(t=this.layer)==null?void 0:t.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);D_(e,this.layer.spatialReference,i);const s=s1.fromJSON(i);if(!this._requiresClientGraphicMapping())return s;const l=this.layer.objectIdField;for(const d of s.features){const y=d.attributes[l],g=this._idToClientGraphic.get(y);g&&(d.geometry=g.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new te("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const i=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return D_(e,this.layer.spatialReference,i),i}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(i=>({count:i.count,extent:xt.fromJSON(i.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new te("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let i=null;const s=[],l=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const d=$=>"objectId"in $&&$.objectId!=null?$.objectId:"attributes"in $&&$.attributes[t]!=null?$.attributes[t]:null;if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const $ of e.deleteFeatures){const E=d($);E!=null&&s.push(E)}const y=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const $ of e.updateFeatures)if(l.push(this._serializeFeature($)),y){const E=d($);E!=null&&y.set(E,$)}}jse(i?i.features:null,l,this.layer.spatialReference);const{fullExtent:g,featureEditResults:x}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:l,deletes:s});return this.fullExtent=g,i&&i.finish(x.uidToObjectId),this._updateClientGraphicIds(y,x),this._createEditsResult(x)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||he(e))return;const i=[];for(const{geometry:s}of e)!Y(s)||s.type!=="mesh"||s.hasExtent||s.loaded||i.push(s.load({signal:t}));i.length&&await Promise.all(i)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const i of t.updateResults){if(!i.success)continue;const s=e.get(i.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const i of t.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new te("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,i=new Array(e.length);let s=null;for(let d=0;d<e.length;d++){const y=e[d],g=this._serializeFeature(y);!s&&Y(y.geometry)&&(s=y.geometry.type),i[d]=g,t.set(`${g.uid}`,y)}const l=this;return{features:i,inferredGeometryType:s,finish(d){const y=l.sourceJSON.objectIdField;for(const g in d){const x=d[g],$=t.get(g);$&&($.attributes||($.attributes={}),x===-1?delete $.attributes[y]:$.attributes[y]=x,l._addIdToClientGraphic($))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,i=e.attributes&&e.attributes[t];i!=null&&this._idToClientGraphic.set(i,e)}get layerOrSourceGeometryType(){var e,t,i;return(i=(e=this.layer)==null?void 0:e.geometryType)!=null?i:(t=this.sourceJSON)==null?void 0:t.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,i=this._geometryForSerialization(e),s=(Fse++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:t}:{uid:s,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return he(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?gs.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await Uk("MemorySourceWorker",{strategy:pe("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:i,objectIdField:s,hasM:l,hasZ:d,timeInfo:y}=this.layer,g=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const x=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",P=>{Uw.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),P.preventDefault()}));const $={features:x.features,fields:t&&t.map(P=>P.toJSON()),geometryType:g7.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&l,hasZ:this.layerOrSourceGeometryType==="mesh"||d,objectIdField:s,spatialReference:g?null:i&&i.toJSON(),timeInfo:y?y.toJSON():null},E=await this._connection.invoke("load",$,{signal:e});for(const P of E.warnings)Uw.warn(P.message,{layer:this.layer,warning:P});E.featureErrors.length&&Uw.warn(`Encountered ${E.featureErrors.length} validation errors while loading features`,E.featureErrors);const O=E.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(x.inferredGeometryType)&&(O.geometryType=g7.toJSON(x.inferredGeometryType)),this.sourceJSON=O,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),x.finish(E.assignedObjectIds)}};v([$4({Type:ws,ensureType:ni(ws)})],Yo.prototype,"itemType",void 0),v([_()],Yo.prototype,"type",void 0),v([_({constructOnly:!0})],Yo.prototype,"layer",void 0),v([_({readOnly:!0})],Yo.prototype,"workerGeometryType",null),v([_()],Yo.prototype,"sourceJSON",void 0),Yo=v([H("esri.layers.graphics.sources.MemorySource")],Yo);function Dse(e){return"portalItem"in e}const zse=e=>{let t=class extends e{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):Dse(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return v([_({type:String})],t.prototype,"apiKey",null),t=v([H("esri.layers.mixins.APIKeyMixin")],t),t},ZN={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},QN=Object.values(ZN),eR=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${QN.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Vse=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${QN.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Gse=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function jfe(e){return!!eR.test(e)}function jl(e){if(he(e))return null;const t=fi(e),i=t.path.match(eR)||t.path.match(Vse);if(!i)return null;const[,s,l,d,y]=i,g=l.indexOf("/");return{title:vx(g!==-1?l.slice(g+1):l),serverType:ZN[d.toLowerCase()],sublayer:y!=null&&y!==""?parseInt(y,10):null,url:{path:s}}}function qse(e){const t=fi(e).path.match(Gse);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function vx(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Use(e,t){const i=[];if(e){const s=jl(e);Y(s)&&s.title&&i.push(s.title)}if(t){const s=vx(t);i.push(s)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function tR(e){if(!e)return!1;const t=".arcgis.com/",i="//services",s="//tiles",l="//features",d=(e=e.toLowerCase()).includes(t),y=e.includes(i)||e.includes(s)||e.includes(l);return d&&y}function Bse(e,t){return e&&SA($A(e,t))}function Hse(e){let{url:t}=e;if(!t)return{url:t};t=$A(t,e.logger);const i=fi(t),s=jl(i.path);let l;if(Y(s))s.sublayer!=null&&e.layer.layerId==null&&(l=s.sublayer),t=s.url.path;else if(e.nonStandardUrlAllowed){const d=qse(i.path);Y(d)&&(t=d.serviceUrl,l=d.sublayerId)}return{url:SA(t),layerId:l}}function Wse(e,t,i,s,l){$h(t,s,"url",l),s.url&&e.layerId!=null&&(s.url=Sh(s.url,i,e.layerId.toString()))}function Lfe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),s=t.includes("/mapserver/wmsserver"),l=t.includes("/imageserver/wmsserver"),d=t.includes("/wmsserver");return i&&(s||l||d)}function Jse(e){if(!e)return!1;const t=new Ml(cs(e)).authority.toLowerCase();return t==="server.arcgisonline.com"||t==="services.arcgisonline.com"}const Kse=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=jl(this.url);if(Y(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",Bse(i,Me.getLogger(this.declaredClass)))}};return v([_()],t.prototype,"title",null),v([_({type:String})],t.prototype,"url",null),t=v([H("esri.layers.mixins.ArcGISService")],t),t},Yse=Me.getLogger("esri.portal.PortalItemResource");let Xa=class extends ze{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){Y(e)&&ys(e)?Yse.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const i=this.url;if(he(i))throw new te("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(i,{responseType:e,query:{token:this.portalItem.apiKey},signal:CI(t,"signal")})}async update(e,t){return(await fe(()=>import("./resourceUtils.c0bb1ebc.js"),[])).addOrUpdateResource(this,"update",e,t)}hasPath(){return Y(this.path)}_normalizePath(e,t){return he(e)?e:(e=e.replace(/^\/+/,""),Y(t)&&ys(e)&&(e=B4(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};v([_()],Xa.prototype,"portalItem",void 0),v([_({type:String,value:null})],Xa.prototype,"path",null),v([mt("path")],Xa.prototype,"_castPath",null),v([_({type:String,readOnly:!0})],Xa.prototype,"url",null),v([_({type:String,readOnly:!0})],Xa.prototype,"itemRelativeUrl",null),Xa=v([H("esri.portal.PortalItemResource")],Xa);const Xse=Xa;let x0=class extends ze{constructor(e){super(e),this.created=null,this.rating=null}};v([_()],x0.prototype,"created",void 0),v([_()],x0.prototype,"rating",void 0),x0=v([H("esri.portal.PortalRating")],x0);const Bw=x0;var Mc;let nt=Mc=class extends Fp(vs){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return s4(Mc,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?i="Locator":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?i=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(i="Instant App"),i}readExtent(e){return e&&e.length?new xt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",s="16";let l,d=!1,y=!1,g=!1,x=!1,$=!1,E=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(d=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(y=t.includes("Table"),g=t.includes("Route Layer"),x=t.includes("Markup"),$=t.includes("Spatiotemporal"),E=t.includes("UtilityNetwork"),l=$&&y?"spatiotemporaltable":y?"table":g?"routelayer":x?"markup":$?"spatiotemporal":d?"featureshosted":E?"utilitynetwork":"features"):l=e==="map service"||e==="wms"||e==="wmts"?d||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):l=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":"maps",l?$t(i+l+s+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const e=this.get("portal.restUrl");return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=Ui.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:Y(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof Bw&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new Bw({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:ie(this.applicationProxies),avgRating:this.avgRating,categories:ie(this.categories),created:ie(this.created),culture:this.culture,description:this.description,extent:ie(this.extent),groupCategories:ie(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ie(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ie(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:ie(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ie(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new Mc({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const i of["tags","typeKeywords","categories"])e[i]&&(e[i]=e[i].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new Bw(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Mc)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,i={method:"post"};i.query=this.createPostQuery();for(const s in i.query)i.query[s]===null&&(i.query[s]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new te("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,i=e.filename,s={method:"post"};if(typeof t=="string")zl(t)?s.query={data:t}:s.query={url:cs(t)},Y(i)&&(s.query.filename=i);else{const l=new FormData;Y(i)?l.append("file",t,i):l.append("file",t),s.body=l}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,s).then(()=>this.reload())}):Promise.reject(new te("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await fe(()=>import("./resourceUtils.c0bb1ebc.js"),[])).fetchResources(this,e,t)}async addResource(e,t,i){const s=await fe(()=>import("./resourceUtils.c0bb1ebc.js"),[]);return e.portalItem=this,s.addOrUpdateResource(e,"add",t,i)}async removeResource(e,t){const i=await fe(()=>import("./resourceUtils.c0bb1ebc.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new te("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,e,t)}async removeAllResources(e){return(await fe(()=>import("./resourceUtils.c0bb1ebc.js"),[])).removeAllResources(this,e)}resourceFromPath(e){return new Xse({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:ie(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:ie(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ie(this.typeKeywords),url:this.url};return LI(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Mc({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};v([_({type:["private","shared","org","public"]})],nt.prototype,"access",void 0),v([_()],nt.prototype,"accessInformation",void 0),v([_({type:String})],nt.prototype,"apiKey",void 0),v([_({json:{read:{source:"appProxies"}}})],nt.prototype,"applicationProxies",void 0),v([_()],nt.prototype,"avgRating",void 0),v([_()],nt.prototype,"categories",void 0),v([_({type:Date})],nt.prototype,"created",void 0),v([_()],nt.prototype,"culture",void 0),v([_()],nt.prototype,"description",void 0),v([_({readOnly:!0})],nt.prototype,"displayName",null),v([_({type:xt})],nt.prototype,"extent",void 0),v([$e("extent")],nt.prototype,"readExtent",null),v([_()],nt.prototype,"groupCategories",void 0),v([_({readOnly:!0})],nt.prototype,"iconUrl",null),v([_()],nt.prototype,"id",void 0),v([_({readOnly:!0})],nt.prototype,"isLayer",null),v([_()],nt.prototype,"itemControl",void 0),v([_({readOnly:!0})],nt.prototype,"itemUrl",null),v([_()],nt.prototype,"licenseInfo",void 0),v([_({type:Date})],nt.prototype,"modified",void 0),v([_()],nt.prototype,"name",void 0),v([_()],nt.prototype,"numComments",void 0),v([_()],nt.prototype,"numRatings",void 0),v([_()],nt.prototype,"numViews",void 0),v([_()],nt.prototype,"owner",void 0),v([_()],nt.prototype,"ownerFolder",void 0),v([_({type:Ui})],nt.prototype,"portal",void 0),v([_()],nt.prototype,"screenshots",void 0),v([_()],nt.prototype,"size",void 0),v([_()],nt.prototype,"snippet",void 0),v([_()],nt.prototype,"sourceJSON",void 0),v([_({type:String})],nt.prototype,"spatialReference",void 0),v([_()],nt.prototype,"tags",void 0),v([_()],nt.prototype,"thumbnail",void 0),v([_({readOnly:!0})],nt.prototype,"thumbnailUrl",null),v([_()],nt.prototype,"title",void 0),v([_()],nt.prototype,"type",void 0),v([_()],nt.prototype,"typeKeywords",void 0),v([_({type:String,json:{read(e,t){var s;if(t.type!=="KML")return e;const i=(s=this.portal)==null?void 0:s.restUrl;return e||(e=i&&this.id?`${i}/content/items/${this.id}/data`:null),e}}})],nt.prototype,"url",void 0),v([_({readOnly:!0})],nt.prototype,"userItemUrl",null),nt=Mc=v([H("esri.portal.PortalItem")],nt);const Op=nt;var iR=Object.freeze(Object.defineProperty({__proto__:null,default:Op},Symbol.toStringTag,{value:"Module"}));const Zse=Me.getLogger("esri.layers.mixins.PortalLayer"),Qse=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var i;(i=this.portalItem)==null||i.destroy(),this.portalItem=null}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,s,l){if(s.itemId)return new Op({id:s.itemId,portal:l&&l.portal})}writePortalItem(i,s){i&&i.id&&(s.itemId=i.id)}async loadFromPortal(i,s){if(this.portalItem&&this.portalItem.id)try{const l=await fe(()=>import("./layersLoader.10f1601e.js").then(function(d){return d.l}),["assets/layersLoader.10f1601e.js","assets/lazyLayerLoader.0727f24a.js","assets/jsonContext.0f34a0dd.js"]);return bi(s),await l.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData},s)}catch(l){throw bs(l)||Zse.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${l}`),l}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(s=>(Uf(s),!0)))}async _fetchUserHasEditingPrivileges(i){const s=this.url?si==null?void 0:si.findCredential(this.url):null;if(!s)return!0;const l=uy.credential===s?uy.user:await this._fetchEditingUser(i);return uy.credential=s,uy.user=l,he(l)||l.privileges==null||l.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var E,O;const s=(O=(E=this.portalItem)==null?void 0:E.portal)==null?void 0:O.user;if(s)return s;const l=si.findServerInfo(this.url);if(!(l!=null&&l.owningSystemUrl))return null;const d=`${l.owningSystemUrl}/sharing/rest`,y=Ui.getDefault();if(y&&y.loaded&&kn(y.restUrl)===kn(d))return y.user;const g=`${d}/community/self`,x=Y(i)?i.signal:null,$=await n2(Vt(g,{authMode:"no-prompt",query:{f:"json"},signal:x}));return $.ok?Q4.fromJSON($.value.data):null}read(i,s){s&&(s.layer=this),super.read(i,s)}write(i,s){const l=s&&s.portal,d=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||Ui.getDefault());return l&&d&&!bA(d.restUrl,l.restUrl)?(s.messages&&s.messages.push(new te("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...s,layer:this})}};return v([_({type:Op})],t.prototype,"portalItem",null),v([$e("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),v([Ee("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),v([_({clonable:!1})],t.prototype,"resourceReferences",void 0),v([_({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=v([H("esri.layers.mixins.PortalLayer")],t),t},uy={credential:null,user:null};var f5;let Xo=f5=class extends ce{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:i,isUnique:s,description:l}=this;return new f5({name:e,fields:t,isAscending:i,isUnique:s,description:l})}};v([_({constructOnly:!0})],Xo.prototype,"name",void 0),v([_({constructOnly:!0})],Xo.prototype,"fields",void 0),v([_({constructOnly:!0})],Xo.prototype,"isAscending",void 0),v([_({constructOnly:!0})],Xo.prototype,"isUnique",void 0),v([_({constructOnly:!0})],Xo.prototype,"description",void 0),Xo=f5=v([H("esri.layers.support.FeatureIndex")],Xo);let Ic=class extends yi(ce){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};v([_({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Ic.prototype,"shapeAreaField",void 0),v([_({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Ic.prototype,"shapeLengthField",void 0),v([_({type:String,json:{read:e=>XU.read(e)||ZU.read(e)}})],Ic.prototype,"units",void 0),Ic=v([H("esri.layers.support.GeometryFieldsInfo")],Ic);const ene=Ic;var y5;let Tc=y5=class extends ce{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Ge}clone(){return new y5({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};v([_({type:String,json:{write:!0}})],Tc.prototype,"floorField",void 0),v([_({json:{read:!1,write:!1}})],Tc.prototype,"viewAllMode",void 0),v([_({json:{read:!1,write:!1}})],Tc.prototype,"viewAllLevelIds",void 0),Tc=y5=v([H("esri.layers.support.LayerFloorInfo")],Tc);const tne=Tc,q$=new tt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),U$=new tt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Rs=class extends yi(ce){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};v([_({json:{read:q$.read,write:q$.write}})],Rs.prototype,"cardinality",void 0),v([_({json:{read:!0,write:!0}})],Rs.prototype,"composite",void 0),v([_({json:{read:!0,write:!0}})],Rs.prototype,"id",void 0),v([_({json:{read:!0,write:!0}})],Rs.prototype,"keyField",void 0),v([_({json:{read:!0,write:!0}})],Rs.prototype,"keyFieldInRelationshipTable",void 0),v([_({json:{read:!0,write:!0}})],Rs.prototype,"name",void 0),v([_({json:{read:!0,write:!0}})],Rs.prototype,"relatedTableId",void 0),v([_({json:{read:!0,write:!0}})],Rs.prototype,"relationshipTableId",void 0),v([_({json:{read:U$.read,write:U$.write}})],Rs.prototype,"role",void 0),Rs=v([H("esri.layers.support.Relationship")],Rs);const ine=Rs,vn=[];function rne(e,t){if(tR(e.url))return!0;const{wkid:i}=t;for(const s of vn){if(e.version>=s[0])return!0;if(typeof s[1]=="function"&&(s[1]=s[1]()),s[1].has(i))return!1}return!0}vn.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),vn.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),vn.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),vn.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),vn.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),vn.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),vn.push([10.61,()=>new Set([102497])]),vn.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),vn.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),vn.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function sne(e,t,i){const s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(s&&s.type==="unique-value"&&s.styleOrigin){const l=await n2(s.populateFromStyle());if(bi(i),l.ok===!1){const d=l.error;t&&t.messages&&t.messages.push(new Er("renderer:style-reference",`Failed to create unique value renderer from style reference: ${d.message}`,{error:d,context:t})),e.clear("renderer",t.origin)}}}const Hw=new tt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),nne={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},li="FeatureLayer",B$=Me.getLogger("esri.layers.FeatureLayer");function hy(e,t){return new te("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function H$(e){return e&&e instanceof Ge}function Ze(e,t,i){return!!(e&&e.hasOwnProperty(t)?e[t]:i)}function cy(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}function one(e){var i;const t=(i=e==null?void 0:e.supportedSpatialAggregationStatistics)==null?void 0:i.map(s=>s.toLowerCase());return{envelope:!!(t!=null&&t.includes("envelopeaggregate")),centroid:!!(t!=null&&t.includes("centroidaggregate")),convexHull:!!(t!=null&&t.includes("convexhullaggregate"))}}function Td(e,t){var s;const i=(s=e==null?void 0:e.supportedOperationsWithCacheHint)==null?void 0:s.map(l=>l.toLowerCase());return!!(i!=null&&i.includes(t.toLowerCase()))}const Ww=jO();function Jw(e,t,i){const s=!!(i!=null&&i.writeLayerSchema);return{enabled:s,ignoreOrigin:s}}let _e=class extends dO(aO(xO(EO(IO(MO(Kse(bO(Qse(r1(lO(zse(yi(Sf))))))))))))){constructor(...e){super(...e),this._handles=new Or,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=Ye.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(Ge.ofType(Xo)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Vs(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=Y(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(s=>this._initLayerProperties(s)));const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Uf).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(t);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new te("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(i),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{analytics:this._readAnalyticsCapabilities(t),attachment:this._readAttachmentCapabilities(t),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),queryTopFeatures:this._readQueryTopFeaturesCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,s){this._writeEditingEnabled(e,t,!0,s)}readEditingInfo(e,t){const{editingInfo:i}=t;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,s){s!=null&&s.writeLayerSchema&&Xi(i,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeOID")return i.name}}get parsedUrl(){const e=this.url?fi(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=Sh(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Sh(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){cg(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){const s=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(s){const l=Lk(s,t,i)||void 0;return l||B$.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),l}if(t.defaultSymbol)return t.types&&t.types.length?new c6({defaultSymbol:Kw(t.defaultSymbol,t,i),field:t.typeIdField,uniqueValueInfos:t.types.map(l=>({id:l.id,symbol:Kw(l.symbol,l,i)}))}):new t1({symbol:Kw(t.defaultSymbol,t,i)})}set source(e){const t=this._get("source");t!==e&&(H$(t)&&this._resetMemorySource(t),H$(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Ge?new Yo({layer:this,items:e}):e:null}readSource(e,t){const i=s1.fromJSON(t.featureSet);return new Yo({layer:this,items:i&&i.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const i=t.editFieldsInfo,s=i&&i.creatorField,l=i&&i.editorField;return e=e&&e.map(d=>Qv.fromJSON(d)),this._fixTemplates(e,s),this._fixTemplates(e,l),e}readTitle(e,t){const i=t.layerDefinition&&t.layerDefinition.name||t.name,s=t.title||t.layerDefinition&&t.layerDefinition.title;if(i){const l=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?Use(this.url,i):i;let d=i;if(!d&&this.url){const y=jl(this.url);Y(y)&&(d=y.title)}return d?(this.sublayerTitleMode==="item-title-and-service-name"&&l&&l!==d&&(d=l+" - "+d),vx(d)):void 0}if(this.sublayerTitleMode==="item-title"&&s)return s}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const s=t.fields.find(l=>l.name.toLowerCase()===i);s&&(i=s.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,s=i&&i.creatorField,l=i&&i.editorField;return e&&e.map(d=>(d=I6.fromJSON(d),this._fixTemplates(d.templates,s),this._fixTemplates(d.templates,l),d))}set url(e){const t=Hse({layer:this,url:e,nonStandardUrlAllowed:!0,logger:B$});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,i,s){Wse(this,e,null,t,s)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new te(li,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,i){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new te(li,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,i)})}async applyEdits(e,t){const i=await fe(()=>import("./editingSupport.c07faf47.js"),[]);return await this.load(),i.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return LO(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await CF(fe(()=>import("./FeatureLayerSource.f8573de2.js"),["assets/FeatureLayerSource.f8573de2.js","assets/executeForIds.1f0d8ec1.js"]),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new Yi,t=this.get("capabilities.data"),i=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,i&&(e.compactGeometryEnabled=i.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"];const s=Y(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,l=xse(this.definitionExpression,s);e.where=l||"1=1";const{timeOffset:d,timeExtent:y}=this;return e.timeExtent=d!=null&&y!=null?y.offset(-d.value,d.unit):y||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new te(li,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e==null?void 0:e.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new te(li,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:i}=this;if(!t||!e)return null;const s=e.attributes?e.attributes[t]:void 0;if(s==null)return null;let l=null;return i.some(d=>{const{id:y}=d;return y!=null&&(y.toString()===s.toString()&&(l=d),!!l)}),l}getFieldDomain(e,t){const i=t&&t.feature,s=this.getFeatureType(i);if(s){const l=s.domains&&s.domains[e];if(l&&l.type!=="inherited")return l}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=R_.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new te(li,"this layer doesn't support attachments");const{attachmentTypes:i,objectIds:s,globalIds:l,num:d,size:y,start:g,where:x}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const $=s&&s.length>1,E=i&&i.length,O=l&&l.length,P=y&&y.length;if($||E||O||P||d||g||x)throw new te(li,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(s&&s.length||x))throw new te(li,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new te(li,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(Yi.from(e)||this.createQuery(),t)).then(i=>{if(i!=null&&i.features)for(const s of i.features)s.layer=s.sourceLayer=this;return i})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(Yi.from(e)||this.createQuery(),t);throw new te(li,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(Yi.from(e)||this.createQuery(),t);throw new te(li,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(Yi.from(e)||this.createQuery(),t);throw new te(li,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(G_.from(e),t);throw new te(li,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(G_.from(e),t);throw new te(li,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(ry.from(e),t).then(i=>{if(i!=null&&i.features)for(const s of i.features)s.layer=s.sourceLayer=this;return i});throw new te(li,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(ry.from(e),t);throw new te(li,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(ry.from(e),t);throw new te(li,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(ry.from(e),t);throw new te(li,"Layer source does not support queryFeatureCount capability")})}read(e,t){const i=e.featureCollection;if(i){const s=i.layers;s&&s.length===1&&(super.read(s[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var d;t={...t,writeLayerSchema:(d=t==null?void 0:t.writeLayerSchema)!=null?d:this._hasMemorySource()};const{origin:i,layerContainerType:s,messages:l}=t;if(this.dynamicDataSource)return l==null||l.push(hy(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(i==="web-scene"||i==="web-map"&&s!=="tables")return l==null||l.push(hy(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return l==null||l.push(hy(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&i==="web-map"&&s==="tables")return l==null||l.push(hy(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new te(li,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||rne(this,e))}async save(e){return(await fe(()=>import("./featureLayerUtils.9bed3aa9.js"),["assets/featureLayerUtils.9bed3aa9.js","assets/arcgisLayers.682ba25c.js","assets/lazyLayerLoader.0727f24a.js","assets/jsonContext.0f34a0dd.js"])).save(this,e)}async saveAs(e,t){return(await fe(()=>import("./featureLayerUtils.9bed3aa9.js"),["assets/featureLayerUtils.9bed3aa9.js","assets/arcgisLayers.682ba25c.js","assets/lazyLayerLoader.0727f24a.js","assets/jsonContext.0f34a0dd.js"])).saveAs(this,e,t)}_readEditingEnabled(e,t,i){var l;let s=(l=e.layerDefinition)==null?void 0:l.capabilities;return s?this._hasEditingCapability(s):(s=e.capabilities,t&&(i==null?void 0:i.origin)==="web-map"&&!this._hasMemorySource()&&s?this._hasEditingCapability(s):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,s){var l,d;if(!e){const y=(d=(l=this.capabilities)==null?void 0:l.operations)!=null&&d.supportsSync?"Query,Sync":"Query";Xi("layerDefinition.capabilities",y,t),i&&!(s!=null&&s.writeLayerSchema)&&(t.capabilities=y)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:i}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[i]?void 0:Promise.reject(new te(li,`feature is missing the identifying attribute ${i}`)):Promise.reject(new te(li,"'attributes' are required on a feature to query attachments")):Promise.reject(new te(li,"A feature is required to add/delete/update attachments")):Promise.reject(new te(li,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Vt(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return Array.isArray(i.layers)&&i.layers.length>0?i.layers[0].id:Array.isArray(i.tables)&&i.tables.length>0?i.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),cg(this.renderer,this.fieldsIndex),M4(this.timeInfo,this.fieldsIndex),sne(this,{origin:"service"})}async hasDataChanged(){var e,t;if((e=this.source)!=null&&e.refresh)try{const{dataChanged:i,updates:s}=await((t=this.source)==null?void 0:t.refresh());if(Y(s)&&(this.sourceJSON={...this.sourceJSON,...s},this.read(s,{origin:"service",url:this.parsedUrl})),i)return!0}catch{}if(this.definitionExpression)try{return(await _se(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){var t;const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||((t=this.fields)==null?void 0:t.some(i=>i.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const s=i.prototype&&i.prototype.attributes;s&&t&&delete s[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new te("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new te("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(e){return{supportsCacheHint:Td(e.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:Td(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Ze(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(s=>{const l=nne[s.name];l&&(i[l]=!!s.isEnabled)}),i}_readDataCapabilities(e){return{isVersioned:Ze(e,"isDataVersioned",!1),supportsAttachment:Ze(e,"hasAttachments",!1),supportsM:Ze(e,"hasM",!1),supportsZ:Ze(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:Ze(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const i=e?e.toLowerCase().split(",").map(O=>O.trim()):[],s=this.url?jl(this.url):null,l=i.includes(Y(s)&&s.serverType==="MapServer"?"data":"query"),d=i.includes("editing")&&!t.datesInUnknownTimezone;let y=d&&i.includes("create"),g=d&&i.includes("delete"),x=d&&i.includes("update");const $=i.includes("changetracking"),E=t.advancedQueryCapabilities;return d&&!(y||g||x)&&(y=g=x=!0),{supportsCalculate:Ze(t,"supportsCalculate",!1),supportsTruncate:Ze(t,"supportsTruncate",!1),supportsValidateSql:Ze(t,"supportsValidateSql",!1),supportsAdd:y,supportsDelete:g,supportsEditing:d,supportsChangeTracking:$,supportsQuery:l,supportsQueryAnalytics:Ze(E,"supportsQueryAnalytic",!1),supportsQueryAttachments:Ze(E,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Ze(E,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Ze(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:x,supportsExceedsLimitStatistics:Ze(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var x;const t=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,l=(x=this.url)==null?void 0:x.includes("MapServer"),d=!pe("mapserver-pbf-enabled")&&l&&this.version<10.81,y=tR(this.url),g=(e.supportedQueryFormats||"").split(",").reduce(($,E)=>{const O=E.toLowerCase().trim();return O&&$.add(O),$},new Set);return{supportsStatistics:Ze(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Ze(t,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Ze(t,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:one(t),supportsCentroid:Ze(t,"supportsReturningGeometryCentroid",!1),supportsDistance:Ze(t,"supportsQueryWithDistance",!1),supportsDistinct:Ze(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Ze(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Ze(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:Ze(t,"supportsHavingClause",!1),supportsOrderBy:Ze(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Ze(t,"supportsPagination",!1),supportsQuantization:Ze(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Ze(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Ze(e,"supportsReturningQueryGeometry",!1),supportsResultType:Ze(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Ze(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Ze(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Ze(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Ze(t,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Ze(i,"allowOthersToQuery",!0),supportsHistoricMoment:Ze(s,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!d&&g.has("pbf"),supportsDisjointSpatialRelationship:Ze(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:Ze(t,"supportsQueryWithCacheHint",!1)||Td(t,"query"),supportsDefaultSpatialReference:Ze(t,"supportsDefaultSR",!1),supportsCompactGeometry:y,maxRecordCountFactor:cy(e,"maxRecordCountFactor",void 0),maxRecordCount:cy(e,"maxRecordCount",void 0),standardMaxRecordCount:cy(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:cy(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,i=Ze(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Ze(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:Td(t,"queryRelated")}}_readQueryTopFeaturesCapabilities(e){return{supportsCacheHint:Td(e.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Ze(e,"allowGeometryUpdates",!0),supportsGlobalId:Ze(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Ze(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Ze(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Ze(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Ze(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Ze(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Ze(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Ze(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Ze(t,"allowOthersToUpdate",!0)}}};v([_({readOnly:!0,json:{read:!1}})],_e.prototype,"capabilities",void 0),v([$e("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],_e.prototype,"readCapabilities",null),v([_({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],_e.prototype,"charts",void 0),v([_({readOnly:!0})],_e.prototype,"createQueryVersion",null),v([_({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],_e.prototype,"copyright",void 0),v([_({type:Boolean})],_e.prototype,"datesInUnknownTimezone",void 0),v([_({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],_e.prototype,"displayField",void 0),v([_({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],_e.prototype,"definitionExpression",void 0),v([_({types:hh,readOnly:!0})],_e.prototype,"defaultSymbol",void 0),v([_({type:$n})],_e.prototype,"dynamicDataSource",void 0),v([_({readOnly:!0})],_e.prototype,"editFieldsInfo",void 0),v([_({type:Boolean})],_e.prototype,"editingEnabled",null),v([$e(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],_e.prototype,"readEditingEnabled",null),v([$e("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],_e.prototype,"readEditingEnabledFromWebMap",null),v([Ee(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],_e.prototype,"writeEditingEnabled",null),v([Ee("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],_e.prototype,"writeEditingEnabledToWebMap",null),v([_({readOnly:!0})],_e.prototype,"editingInfo",void 0),v([$e("editingInfo")],_e.prototype,"readEditingInfo",null),v([_((()=>{const e=ie(gO),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],_e.prototype,"elevationInfo",void 0),v([_(RO)],_e.prototype,"featureReduction",void 0),v([_({...Ww.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Jw}}}}})],_e.prototype,"fields",void 0),v([_(Ww.fieldsIndex)],_e.prototype,"fieldsIndex",void 0),v([_({type:tne,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],_e.prototype,"floorInfo",void 0),v([_({type:Nse,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],_e.prototype,"formTemplate",void 0),v([_({type:xt,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],_e.prototype,"fullExtent",void 0),v([_()],_e.prototype,"gdbVersion",void 0),v([_({readOnly:!0,type:ene,json:{read:{source:"geometryProperties"}}})],_e.prototype,"geometryFieldsInfo",void 0),v([_({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Hw.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Jw,writer(e,t,i){const s=e?Hw.toJSON(e):null;s&&Xi(i,s,t)}}}},read:{source:"layerDefinition.geometryType",reader:Hw.read}}})],_e.prototype,"geometryType",void 0),v([_({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],_e.prototype,"hasM",void 0),v([_({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],_e.prototype,"hasZ",void 0),v([_({readOnly:!0,type:d2})],_e.prototype,"heightModelInfo",void 0),v([_({type:Date})],_e.prototype,"historicMoment",void 0),v([_(vO)],_e.prototype,"id",void 0),v([_({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],_e.prototype,"infoFor3D",void 0),v([_({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],_e.prototype,"isTable",void 0),v([$e("service","isTable",["type","geometryType"]),$e("isTable",["layerDefinition.type","layerDefinition.geometryType"])],_e.prototype,"readIsTable",null),v([Ee("web-map","isTable")],_e.prototype,"writeIsTable",null),v([_(Zv)],_e.prototype,"labelsVisible",void 0),v([_({type:[Yp],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:m_},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:m_},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],_e.prototype,"labelingInfo",void 0),v([_((()=>{const e=ie(OJ);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,s){Xi(s,Cv(t),i)}}},e})())],_e.prototype,"opacity",void 0),v([_({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],_e.prototype,"layerId",void 0),v([_(mO)],_e.prototype,"legendEnabled",void 0),v([_({type:["show","hide"],json:(()=>{const e=ie(wO.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],_e.prototype,"listMode",void 0),v([_(CJ)],_e.prototype,"minScale",void 0),v([$e("service","minScale",["minScale","effectiveMinScale"])],_e.prototype,"readMinScale",null),v([_(PJ)],_e.prototype,"maxScale",void 0),v([$e("service","maxScale",["maxScale","effectiveMaxScale"])],_e.prototype,"readMaxScale",null),v([_({type:String})],_e.prototype,"globalIdField",void 0),v([$e("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),$e("service","globalIdField",["globalIdField","fields"])],_e.prototype,"readGlobalIdFieldFromService",null),v([_({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Jw}}}}})],_e.prototype,"objectIdField",void 0),v([$e("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),$e("service","objectIdField",["objectIdField","fields"])],_e.prototype,"readObjectIdFieldFromService",null),v([_({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],_e.prototype,"operationalLayerType",void 0),v([_(Ww.outFields)],_e.prototype,"outFields",void 0),v([_({readOnly:!0})],_e.prototype,"parsedUrl",null),v([_({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],_e.prototype,"path",void 0),v([_(Xv)],_e.prototype,"popupEnabled",void 0),v([_({type:Vp,json:{name:"popupInfo",write:!0}})],_e.prototype,"popupTemplate",void 0),v([_({readOnly:!0})],_e.prototype,"defaultPopupTemplate",null),v([_({type:[ine],readOnly:!0})],_e.prototype,"relationships",void 0),v([_({types:i1,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:jk,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],_e.prototype,"renderer",null),v([$e("service","renderer",["drawingInfo.renderer","defaultSymbol"]),$e("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],_e.prototype,"readRenderer",null),v([_()],_e.prototype,"sourceJSON",void 0),v([_({type:Boolean})],_e.prototype,"returnM",void 0),v([_({type:Boolean})],_e.prototype,"returnZ",void 0),v([_((()=>{const e=ie(fO);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],_e.prototype,"screenSizePerspectiveEnabled",void 0),v([_({clonable:!1})],_e.prototype,"source",null),v([mt("source")],_e.prototype,"castSource",null),v([$e("portal-item","source",["featureSet"]),$e("web-map","source",["featureSet"])],_e.prototype,"readSource",null),v([_({readOnly:!0})],_e.prototype,"serviceDefinitionExpression",void 0),v([$e("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],_e.prototype,"readServiceDefinitionExpression",null),v([_({type:Ye,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],_e.prototype,"spatialReference",void 0),v([_({type:Number})],_e.prototype,"subtypeCode",void 0),v([_({type:String,json:{origins:{service:{read:!0}}}})],_e.prototype,"subtypeField",void 0),v([_({type:[Qv]})],_e.prototype,"templates",void 0),v([$e("templates",["editFieldsInfo","creatorField","editorField","templates"])],_e.prototype,"readTemplates",null),v([_({type:TO})],_e.prototype,"timeInfo",void 0),v([_()],_e.prototype,"title",void 0),v([$e("service","title",["name"]),$e("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],_e.prototype,"readTitle",null),v([$e("web-map","title",["layerDefinition.name","title"])],_e.prototype,"readTitleFromWebMap",null),v([_({type:String})],_e.prototype,"sublayerTitleMode",void 0),v([_({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],_e.prototype,"trackIdField",void 0),v([_({json:{read:!1}})],_e.prototype,"type",void 0),v([_({type:String})],_e.prototype,"typeIdField",void 0),v([$e("service","typeIdField"),$e("typeIdField",["layerDefinition.typeIdField"])],_e.prototype,"readTypeIdField",null),v([_({type:[I6]})],_e.prototype,"types",void 0),v([$e("service","types",["types"]),$e("types",["layerDefinition.types"])],_e.prototype,"readTypes",null),v([_({readOnly:!0,json:{write:!1}})],_e.prototype,"serverGens",void 0),v([_({type:Ge.ofType(Xo),readOnly:!0})],_e.prototype,"indexes",void 0),v([_(yO)],_e.prototype,"url",null),v([Ee("url")],_e.prototype,"writeUrl",null),v([_({readOnly:!0})],_e.prototype,"userIsAdmin",void 0),v([_({json:{origins:{service:{read:!0}},read:!1}})],_e.prototype,"version",void 0),v([$e("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],_e.prototype,"readVersion",null),v([_({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],_e.prototype,"visible",void 0),v([$e("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],_e.prototype,"readVisible",null),_e=v([H("esri.layers.FeatureLayer")],_e);const Kw=jp({types:KA}),f2=_e;var Ffe=Object.freeze(Object.defineProperty({__proto__:null,default:f2},Symbol.toStringTag,{value:"Module"}));const ane=["$datastore","$map","$layer","$aggregatedfeatures"],lne="esri.widgets.Feature.support.arcadeFeatureUtils",une=Me.getLogger(lne);function hne(e){return typeof e=="string"?l1(W6(e)):Array.isArray(e)?cne(e):(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?pne(e):e}function cne(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?l1(W6(t)):t}</li>`).join("")}</ul>`}function pne(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const i=e.field(t);return`<tr><th>${t}</th><td>${typeof i=="string"?l1(W6(i)):i}</td></tr>`}).join("")}</table>`}function dne({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:i,context:s,viewInfo:l,map:d,graphic:y,interceptor:g}){i.forEach(x=>{const $=x.toLowerCase(),E={map:d,spatialReference:l.sr,interceptor:g};if($==="$map"&&(s.vars[$]=t.convertMapToFeatureSetCollection(E)),$==="$layer"&&(s.vars[$]=t.convertFeatureLayerToFeatureSet({layer:y.sourceLayer,spatialReference:l.sr,interceptor:g})),$==="$datastore"&&(s.vars[$]=t.convertServiceUrlToWorkspace({url:y.sourceLayer.url,spatialReference:l.sr,interceptor:g})),$==="$aggregatedfeatures"){const O=y.layer,{fields:P,objectIdField:R,geometryType:L,spatialReference:z,displayField:V}=O,K=new f2({fields:P,objectIdField:R,geometryType:L,spatialReference:z,displayField:V,...O.type==="feature"?{templates:O.templates,typeIdField:O.typeIdField,types:O.types}:null,source:e});s.vars[$]=t.convertFeatureLayerToFeatureSet({layer:K,spatialReference:l.sr,interceptor:g})}})}function rR(){return fe(()=>import("./arcadeUtils.cc514ea1.js").then(function(e){return e.t}),[])}async function fne({graphic:e,view:t}){const{isAggregate:i,layer:s}=e;if(!i||!s||(t==null?void 0:t.type)!=="2d")return[];const l=await t.whenLayerView(s);if(!l.createQuery||!l.queryFeatures)return[];const d=l.createQuery();d.aggregateIds=[e.getObjectId()];const{features:y}=await l.queryFeatures(d);return y}async function sR({expressionInfo:e,arcadeUtils:t,interceptor:i,spatialReference:s,map:l,graphic:d,view:y}){if(!e||!e.expression)return null;const g=t.createSyntaxTree(e.expression),x=ane.filter(R=>t.hasVariable(g,R)),[$]=await Promise.all([fne({graphic:d,view:y}),t.loadScriptDependencies(g,!0,x)]),E=t.getViewInfo({spatialReference:s}),O=t.createExecContext(d,E);O.interceptor=i,O.useAsync=!0,dne({aggregatedFeatures:$,arcadeUtils:t,featureSetVars:x,context:O,viewInfo:E,map:l,graphic:d,interceptor:i});const P=t.createFunction(g,O);return t.executeAsyncFunction(P,O).catch(R=>une.error("arcade-execution-error",{error:R,graphic:d,expressionInfo:e}))}async function yne({expressionInfos:e,spatialReference:t,graphic:i,interceptor:s,map:l,view:d}){if(!e||!e.length)return{};const y=await rR(),g={};for(const E of e)g[`expression/${E.name}`]=sR({expressionInfo:E,arcadeUtils:y,interceptor:s,spatialReference:t,map:l,graphic:i,view:d});const x=await qi(g),$={};for(const E in x)$[E]=hne(x[E].value);return $}const mne=1;let rs=class extends Fh(ze){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var s,l;const t=(s=this.contentElement)==null?void 0:s.type;(l=this.contentElementViewModel)==null||l.destroy();const i=t==="fields"?new s2:t==="media"?new oh:t==="text"?new Ug:null;this._set("contentElementViewModel",i)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=z6(this._compile,mne,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:i,interceptor:s,spatialReference:l,map:d,view:y,_abortController:g}=this;if(!(t&&i&&l&&d))return void this._set("contentElement",null);const x=await rR();if(g!==this._abortController)return;const $=await sR({arcadeUtils:x,expressionInfo:t,graphic:i,interceptor:s,map:d,spatialReference:l,view:y});if(!$||$.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const E=await mx($,g.signal),O=E==null?void 0:E.type,P=O==="media"?mf.fromJSON(E):O==="text"?_p.fromJSON(E):O==="fields"?bp.fromJSON(E):null;this._set("contentElement",P)},this.handles.add([Te(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),Ot),Te(()=>[this.contentElement],()=>this._createVM(),Ot)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:i}=this;return e?"loading":t||i?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};v([_()],rs.prototype,"_abortController",void 0),v([_({type:pE})],rs.prototype,"expressionInfo",void 0),v([_({type:ws})],rs.prototype,"graphic",void 0),v([_({readOnly:!0})],rs.prototype,"contentElement",void 0),v([_({readOnly:!0})],rs.prototype,"contentElementViewModel",void 0),v([_()],rs.prototype,"interceptor",void 0),v([_()],rs.prototype,"spatialReference",null),v([_({readOnly:!0})],rs.prototype,"state",null),v([_()],rs.prototype,"map",null),v([_()],rs.prototype,"view",void 0),rs=v([H("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],rs);const wx=rs,py={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let Am=class extends Cr{constructor(e,t){super(e,t),this.viewModel=new wx}initialize(){this.own(Te(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),Ot))}destroy(){this._destroyContentWidget()}renderLoading(){return le("div",{key:"loading-container",class:py.loadingSpinnerContainer},le("span",{class:this.classes(py.iconLoading,py.spinner)}))}render(){var t;const{state:e}=this.viewModel;return le("div",{class:py.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,i=t==null?void 0:t.type;this._destroyContentWidget();const s=e?i==="fields"?new hP({viewModel:e}):i==="media"?new zP({viewModel:e}):i==="text"?new bm({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender()}};v([_({type:wx})],Am.prototype,"viewModel",void 0),Am=v([H("esri.widgets.Feature.FeatureExpression")],Am);const gne=Am;class vne{constructor(t,i){this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=s=>{}),this.preRequestCallback||(this.preLayerQueryCallback=s=>{})}}var km;const wne=1,W$="content-view-models",nR="esri.widgets.FeatureViewModel",bne=Me.getLogger(nR),J$={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let Yt=km=class extends ze{constructor(e){super(e),this._handles=new Or,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=z6(this._graphicChanged,wne,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...J$},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:i}=this;return t.type==="attachments"&&i.attachmentsContent||t.type==="custom"&&i.customContent||t.type==="fields"&&i.fieldsContent||t.type==="media"&&i.mediaContent||t.type==="text"&&i.textContent||t.type==="expression"&&i.expressionContent},this._handles.add(Te(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),Ot))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return Y(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return pQ(C8(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return XC(this.graphic)}castAbilities(e){return{...J$,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const i=this.contentViewModels[e];i instanceof oh&&i.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof oh&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof oh&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(i){bs(i)||(this._error=i,bne.error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,i)=>this._compileContentElement(t,i)):typeof e=="string"?this._compileText(new _p({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(W$),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:i}=this,{contentElement:s,contentElementViewModel:l}=e,d=s==null?void 0:s.type;l&&d&&(d==="fields"&&(this._createFieldsFormattedAttributes({contentElement:s,contentElementIndex:t,formattedAttributes:i}),l.set(this._createFieldsVMParams(s,t))),d==="media"&&(this._createMediaFormattedAttributes({contentElement:s,contentElementIndex:t,formattedAttributes:i}),l.set(this._createMediaVMParams(s,t))),d==="text"&&l.set(this._createTextVMParams(s)))}_compileExpression(e,t){const{expressionInfo:i}=e,{graphic:s,map:l,spatialReference:d,view:y}=this,g=new wx({expressionInfo:i,graphic:s,interceptor:km.interceptor,map:l,spatialReference:d,view:y});return this.contentViewModels[t]=g,this._handles.add(Te(()=>g.contentElementViewModel,()=>this._setExpressionContentVM(g,t),Ot),W$),e}_compileAttachments(e,t){const{graphic:i}=this,{description:s,title:l}=e;return this.contentViewModels[t]=new K6({graphic:i,...this._compileTitleAndDesc({title:l,description:s})}),e}_compileCustom(e,t){const{graphic:i}=this,{creator:s,destroyer:l}=e;return this.contentViewModels[t]=new Ug({graphic:i,creator:s,destroyer:l}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:i,_sourceLayer:s,graphic:l,formattedAttributes:d,_expressionAttributes:y}=this,{attributes:g}=l,x=d.global;return{title:sh({attributes:g,fieldInfoMap:i,globalAttributes:x,expressionAttributes:y,layer:s,text:e}),description:sh({attributes:g,fieldInfoMap:i,globalAttributes:x,expressionAttributes:y,layer:s,text:t})}}_createFieldsVMParams(e,t){var $;const{_effectivePopupTemplate:i,formattedAttributes:s}=this,l={...s.global,...s.content[t]},d=($=(e==null?void 0:e.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:$.filter(({fieldName:E})=>QC(E)||ia(E)||l.hasOwnProperty(E)),y=i==null?void 0:i.expressionInfos,{description:g,title:x}=e;return{attributes:l,expressionInfos:y,fieldInfos:d,...this._compileTitleAndDesc({title:x,description:g})}}_compileFields(e,t){const i=e.clone(),s=new s2(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=s,i.fieldInfos=s.formattedFieldInfos.slice(0),i}_createMediaVMParams(e,t){const{abilities:i,graphic:s,_fieldInfoMap:l,formattedAttributes:d,_effectivePopupTemplate:y,relatedInfos:g,_sourceLayer:x,_expressionAttributes:$}=this,{attributes:E}=s,{description:O,mediaInfos:P,title:R}=e;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:E,layer:x,fieldInfoMap:l,formattedAttributes:{...d.global,...d.content[t]},expressionAttributes:$,mediaInfos:P,popupTemplate:y,relatedInfos:g,...this._compileTitleAndDesc({title:R,description:O})}}_compileMedia(e,t){const i=e.clone(),s=new oh(this._createMediaVMParams(e,t));return i.mediaInfos=s.formattedMediaInfos.slice(0),this.contentViewModels[t]=s,i}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:i,_sourceLayer:s,_expressionAttributes:l}=this;if(e&&e.text){const{attributes:d}=t,y=this.formattedAttributes.global;e.text=sh({attributes:d,fieldInfoMap:i,globalAttributes:y,expressionAttributes:l,layer:s,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const i=e.clone();return this.contentViewModels[t]=new Ug(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:i}=this;if(!e)return;const{lastEditInfoEnabled:s}=e,l=t==null?void 0:t.editFieldsInfo;return s&&l?cQ(l,i.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:i,graphic:s,_expressionAttributes:l}=this,{attributes:d}=s,y=this.formattedAttributes.global;return sh({attributes:d,fieldInfoMap:t,globalAttributes:y,expressionAttributes:l,layer:i,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.title;return Gg(i,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,i=e==null?void 0:e.content;return Gg(i,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:i,graphic:s,_effectivePopupTemplate:l,spatialReference:d,map:y,view:g}=this,{content:{value:x},title:{value:$}}=await qi({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!s)return;await yQ({graphic:s,popupTemplate:l,layer:i,spatialReference:d},e);const{expressionAttributes:{value:E}}=await qi({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:yne({expressionInfos:l==null?void 0:l.expressionInfos,spatialReference:d,graphic:s,map:y,interceptor:km.interceptor,view:g})});t===this._featureAbortController&&s&&(this._expressionAttributes=E,this._graphicExpressionAttributes={...s.attributes,...E},this._set("formattedAttributes",this._createFormattedAttributes(x)),this._set("title",this._compileTitle($)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(x)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){const{_effectivePopupTemplate:s,graphic:l,relatedInfos:d,_sourceLayer:y,_fieldInfoMap:g,_graphicExpressionAttributes:x}=this;i.content[t]=_w({fieldInfos:s==null?void 0:s.fieldInfos,graphic:l,attributes:{...x,...e.attributes},layer:y,fieldInfoMap:g,relatedInfos:d})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:i}){if(e.fieldInfos){const{graphic:s,relatedInfos:l,_sourceLayer:d,_fieldInfoMap:y,_graphicExpressionAttributes:g}=this;i.content[t]=_w({fieldInfos:e.fieldInfos,graphic:s,attributes:{...g,...e.attributes},layer:d,fieldInfoMap:y,relatedInfos:l})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:i,relatedInfos:s,_sourceLayer:l,_fieldInfoMap:d,_graphicExpressionAttributes:y}=this,g=t==null?void 0:t.fieldInfos,x={global:_w({fieldInfos:g,graphic:i,attributes:y,layer:l,fieldInfoMap:d,relatedInfos:s}),content:[]};return Array.isArray(e)&&e.forEach(($,E)=>{$.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:$,contentElementIndex:E,formattedAttributes:x}),$.type==="media"&&this._createMediaFormattedAttributes({contentElement:$,contentElementIndex:E,formattedAttributes:x})}),x}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(t,C8(i),e)}async _queryRelatedInfos(e,t,i){const{relatedInfos:s,_sourceLayer:l}=this;s.clear();const d=Y(l.associatedLayer)?await l.associatedLayer.load(i):l;if(!d)return;const y=t.filter($=>$&&ia($.fieldName));if(!y||!y.length)return;t.forEach($=>this._configureRelatedInfo($,d));const g=await Ste({relatedInfos:s,layer:d},i);Object.keys(g).forEach($=>{var P;const E=s.get($.toString()),O=(P=g[$])==null?void 0:P.value;E&&O&&(E.layerInfo=O.data)});const x=await $te({graphic:e,relatedInfos:s,layer:d},i);Object.keys(x).forEach($=>{var E;vte((E=x[$])==null?void 0:E.value,s.get($.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:i}=this,s=B_(e.fieldName);if(!s)return;const{layerId:l,fieldName:d}=s;if(!l)return;const y=i.get(l.toString())||gte(l,t);y&&(Mte({relatedInfo:y,fieldName:d,fieldInfo:e}),this.relatedInfos.set(l,y))}};Yt.interceptor=new vne(vQ,wQ),v([_()],Yt.prototype,"_error",void 0),v([_()],Yt.prototype,"_featureAbortController",void 0),v([_({readOnly:!0})],Yt.prototype,"_effectivePopupTemplate",null),v([_({readOnly:!0})],Yt.prototype,"_fieldInfoMap",null),v([_({readOnly:!0})],Yt.prototype,"_sourceLayer",null),v([_()],Yt.prototype,"abilities",void 0),v([mt("abilities")],Yt.prototype,"castAbilities",null),v([_({readOnly:!0})],Yt.prototype,"content",void 0),v([_({readOnly:!0})],Yt.prototype,"contentViewModels",void 0),v([_({type:Boolean})],Yt.prototype,"defaultPopupTemplateEnabled",void 0),v([_({readOnly:!0})],Yt.prototype,"state",null),v([_({readOnly:!0})],Yt.prototype,"formattedAttributes",void 0),v([_({type:ws,value:null})],Yt.prototype,"graphic",null),v([_({readOnly:!0})],Yt.prototype,"lastEditInfo",void 0),v([_({readOnly:!0})],Yt.prototype,"relatedInfos",void 0),v([_()],Yt.prototype,"spatialReference",null),v([_({readOnly:!0})],Yt.prototype,"title",void 0),v([_()],Yt.prototype,"map",null),v([_({readOnly:!0})],Yt.prototype,"waitingForContent",null),v([_()],Yt.prototype,"view",void 0),Yt=km=v([H(nR)],Yt);const bx=Yt,oR=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=i=>uP(i)&&!i.destroyed?le("div",{key:i},i.render()):i instanceof HTMLElement?le("div",{key:i,bind:i,afterCreate:this._attachToNode}):FQ(i)?le("div",{key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const s=this;i.appendChild(s)}};return t=v([H("esri.widgets.Feature.ContentMixin")],t),t},Wi={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},K$={title:!0,content:!0,lastEditedInfo:!0};let Ji=class extends oR(Cr){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...K$},this.map=null,this.view=null,this.viewModel=new bx}initialize(){this.own(Te(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentViewModels},()=>this._setupContentWidgets(),Ot))}loadDependencies(){return fe(()=>import("./calcite-notice.83a40b3a.js"),[])}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...K$,...e}}render(){const{state:e}=this.viewModel,t=le("div",{class:Wi.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return le("div",{class:this.classes(Wi.base,Wi.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:i}=this;return le("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},i.title?le("div",{key:"error-title",slot:"title"},e.errorMessage):null,le("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return le("div",{key:"loading-container",class:Wi.loadingSpinnerContainer},le("span",{class:this.classes(Wi.iconLoading,Wi.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?le("div",{class:Wi.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?le(Y6,{level:this.headingLevel,class:Wi.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?le("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:le("div",{key:`${t}-content`},i.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!i.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:i,attachmentInfos:s}=t.viewModel;return i==="loading"||s.length>0?le("div",{key:this._buildKey("attachments-element",e),class:this.classes(Wi.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:le("div",{key:this._buildKey("expression-element",e),class:Wi.contentElement},t.render())}renderCustom(e,t){const{creator:i}=e,s=this._contentWidgets[t];return!s||s.destroyed?null:i?le("div",{key:this._buildKey("custom-element",t),class:Wi.contentElement},s.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:le("div",{key:this._buildKey("fields-element",e),class:Wi.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:le("div",{key:this._buildKey("media-element",e),class:Wi.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:i}=this.viewModel;if(!i||!e.lastEditedInfo)return null;const{date:s,user:l}=i,d=i.type==="edit"?l?t.lastEditedByUser:t.lastEdited:l?t.lastCreatedByUser:t.lastCreated,y=Lo(d,{date:s,user:l});return le("div",{key:"edit-info-element",class:this.classes(Wi.lastEditedInfo,Wi.contentElement)},y)}renderText(e,t){const i=e.text,s=this._contentWidgets[t];return!s||s.destroyed?null:i?le("div",{key:this._buildKey("text-element",t),class:this.classes(Wi.contentElement,Wi.text)},s.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,i=this.get("viewModel.content"),{contentViewModels:s}=this.viewModel;if(Array.isArray(i))i.forEach((l,d)=>{l.type==="attachments"&&(this._contentWidgets[d]=new AQ({displayType:l.displayType,headingLevel:t.title?e+1:e,viewModel:s[d]})),l.type==="fields"&&(this._contentWidgets[d]=new hP({viewModel:s[d]})),l.type==="media"&&(this._contentWidgets[d]=new zP({viewModel:s[d]})),l.type==="text"&&(this._contentWidgets[d]=new bm({viewModel:s[d]})),l.type==="custom"&&(this._contentWidgets[d]=new bm({viewModel:s[d]})),l.type==="expression"&&(this._contentWidgets[d]=new gne({viewModel:s[d]}))},this);else{const l=s[0];l&&!l.destroyed&&(this._contentWidgets[0]=new bm({viewModel:l}))}this.scheduleRender()}};v([Be("viewModel.graphic")],Ji.prototype,"graphic",void 0),v([Be("viewModel.defaultPopupTemplateEnabled")],Ji.prototype,"defaultPopupTemplateEnabled",void 0),v([_()],Ji.prototype,"headingLevel",void 0),v([_({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ji.prototype,"label",void 0),v([_(),Wr("esri/widgets/Feature/t9n/Feature")],Ji.prototype,"messages",void 0),v([_(),Wr("esri/t9n/common")],Ji.prototype,"messagesCommon",void 0),v([_(),Wr("esri/widgets/support/t9n/uriUtils")],Ji.prototype,"messagesURIUtils",void 0),v([Be("viewModel.spatialReference")],Ji.prototype,"spatialReference",void 0),v([Be("viewModel.title")],Ji.prototype,"title",void 0),v([_()],Ji.prototype,"visibleElements",void 0),v([mt("visibleElements")],Ji.prototype,"castVisibleElements",null),v([Be("viewModel.map")],Ji.prototype,"map",void 0),v([Be("viewModel.view")],Ji.prototype,"view",void 0),v([_({type:bx})],Ji.prototype,"viewModel",void 0),Ji=v([H("esri.widgets.Feature")],Ji);const _ne=Ji;var aR;const Om=Symbol("anchorHandles");let Iu=class extends Fl.EventedAccessor{constructor(e){super(e),this[aR]=new Or,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[Om].add([Ws(()=>ho(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),Te(()=>this.screenLocation,(t,i)=>{Y(t)&&Y(i)&&this.emit("view-change")})])}destroy(){this.view=null,this[Om]=Vs(this[Om])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:i}=this;return i&&Y(e)&&Y(t)&&t.ready?t.toScreen(e):null}};aR=Om,v([_()],Iu.prototype,"location",void 0),v([_()],Iu.prototype,"screenLocation",null),v([_()],Iu.prototype,"screenLocationEnabled",void 0),v([_()],Iu.prototype,"view",void 0),Iu=v([H("esri.widgets.support.AnchorElementViewModel")],Iu);const lR=Iu,xne="esri.widgets.CompassViewModel";let Cm=class extends lR{constructor(e){super(e),this.visible=!1}};v([_()],Cm.prototype,"visible",void 0),Cm=v([H(xne)],Cm);const uR=Cm,Yw={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let Tu=class extends Cr{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new uR,this.visible=!1}initialize(){this.own([Te(()=>this.visible,e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:i}=e;t&&(this.viewModel.location=t),this.visible=!0;const s=()=>this.hide();i&&i.catch(()=>{}).then(s)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,i=!!t,s=e&&i,l=!e&&i,d={[Yw.spinnerStart]:s,[Yw.spinnerFinish]:l},y=this._getPositionStyles();return le("div",{class:this.classes(Yw.base,d),styles:y})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=c4(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(he(t)||he(e))return{};const{padding:i}=t;return{left:e.x-i.left+"px",top:e.y-i.top+"px"}}};v([Be("viewModel.location")],Tu.prototype,"location",void 0),v([Be("viewModel.view")],Tu.prototype,"view",void 0),v([_({type:uR})],Tu.prototype,"viewModel",void 0),v([Be("viewModel.visible")],Tu.prototype,"visible",void 0),Tu=v([H("esri.widgets.Spinner")],Tu);const Sne=Tu;var Y$;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(Y$||(Y$={}));function hR(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function $ne(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Mne(e,t,i,s,l,d){const y=new Float32Array(6);return y[0]=e,y[1]=t,y[2]=i,y[3]=s,y[4]=l,y[5]=d,y}function Ine(e,t){return new Float32Array(e,t,6)}function cR(e,t,i,s){const l=t[s],d=t[s+1];e[s]=i[0]*l+i[2]*d+i[4],e[s+1]=i[1]*l+i[3]*d+i[5]}function Tne(e,t,i,s=0,l=0,d=2){const y=l||t.length/d;for(let g=s;g<y;g++)cR(e,t,i,g*d)}Object.freeze(Object.defineProperty({__proto__:null,create:hR,clone:$ne,fromValues:Mne,createView:Ine,transform:cR,transformMany:Tne},Symbol.toStringTag,{value:"Module"}));function Ene(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ane(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function kne(e,t,i,s,l,d,y){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e[4]=d,e[5]=y,e}function _x(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5];let x=i*d-s*l;return x?(x=1/x,e[0]=d*x,e[1]=-s*x,e[2]=-l*x,e[3]=i*x,e[4]=(l*g-d*y)*x,e[5]=(s*y-i*g)*x,e):null}function One(e){return e[0]*e[3]-e[1]*e[2]}function pR(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],x=t[5],$=i[0],E=i[1],O=i[2],P=i[3],R=i[4],L=i[5];return e[0]=s*$+d*E,e[1]=l*$+y*E,e[2]=s*O+d*P,e[3]=l*O+y*P,e[4]=s*R+d*L+g,e[5]=l*R+y*L+x,e}function y2(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],x=t[5],$=Math.sin(i),E=Math.cos(i);return e[0]=s*E+d*$,e[1]=l*E+y*$,e[2]=s*-$+d*E,e[3]=l*-$+y*E,e[4]=g,e[5]=x,e}function xx(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],x=t[5],$=i[0],E=i[1];return e[0]=s*$,e[1]=l*$,e[2]=d*E,e[3]=y*E,e[4]=g,e[5]=x,e}function jf(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],x=t[5],$=i[0],E=i[1];return e[0]=s,e[1]=l,e[2]=d,e[3]=y,e[4]=s*$+d*E+g,e[5]=l*$+y*E+x,e}function dR(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=-i,e[3]=s,e[4]=0,e[5]=0,e}function fR(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Sx(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Cne(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Pne(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function Nne(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function yR(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function Rne(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function jne(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e}function Lne(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Fne(e,t){const i=e[0],s=e[1],l=e[2],d=e[3],y=e[4],g=e[5],x=t[0],$=t[1],E=t[2],O=t[3],P=t[4],R=t[5];return Math.abs(i-x)<=et*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-$)<=et*Math.max(1,Math.abs(s),Math.abs($))&&Math.abs(l-E)<=et*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(d-O)<=et*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(y-P)<=et*Math.max(1,Math.abs(y),Math.abs(P))&&Math.abs(g-R)<=et*Math.max(1,Math.abs(g),Math.abs(R))}const Dne=pR,zne=yR;Object.freeze(Object.defineProperty({__proto__:null,copy:Ene,identity:Ane,set:kne,invert:_x,determinant:One,multiply:pR,rotate:y2,scale:xx,translate:jf,fromRotation:dR,fromScaling:fR,fromTranslation:Sx,str:Cne,frob:Pne,add:Nne,subtract:yR,multiplyScalar:Rne,multiplyScalarAndAdd:jne,exactEquals:Lne,equals:Fne,mul:Dne,sub:zne},Symbol.toStringTag,{value:"Module"}));const X$=pe("android");pe("chrome")||X$&&X$>=4;k_();function mR(e){return e&&"opacity"in e?e.opacity*mR(e.parent):1}async function Vne(e,t){var V;if(!e)return;const i=e.sourceLayer,s=(V=Y(t)&&t.useSourceLayer?i:e.layer)!=null?V:i,l=mR(s);if(Y(e.symbol)&&(!Y(t)||t.ignoreGraphicSymbol!==!0)){const K=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,cache:Y(t)?t.webStyleCache:null}):e.symbol.clone();return Mw(K,null,l),K}const d=Y(t)&&t.renderer||s&&"renderer"in s&&s.renderer;let y=d&&"getSymbolAsync"in d?await d.getSymbolAsync(e,t):null;if(!y)return;if(y=y.type==="web-style"?await y.fetchSymbol({...t,cache:Y(t)?t.webStyleCache:null}):y.clone(),!("visualVariables"in d)||!d.visualVariables||!d.visualVariables.length)return Mw(y,null,l),y;if("arcadeRequiredForVisualVariables"in d&&d.arcadeRequiredForVisualVariables&&(he(t)||he(t.arcade))){const K={...t};K.arcade=await ca(),t=K}const g=await fe(()=>Promise.resolve().then(function(){return l6}),void 0),x=[],$=[],E=[],O=[];for(const K of d.visualVariables)switch(K.type){case"color":x.push(K);break;case"opacity":$.push(K);break;case"rotation":O.push(K);break;case"size":K.target||E.push(K)}const P=!!x.length&&x[x.length-1],R=P?g.getColor(P,e,t):null,L=!!$.length&&$[$.length-1];let z=L?g.getOpacity(L,e,t):null;if(l!=null&&(z=z!=null?z*l:l),Mw(y,R,z),E.length){const K=g.getAllSizes(E,e,t);await nee(y,K)}for(const K of O)oee(y,g.getRotationAngle(K,e,t),K.axis);return y}class Gne{constructor(t,i){this.owner=i,this.properties={},this.afterDispatchHandle=null;for(const s in t){const l=t[s],d=new gT(l,null,null,2,2);this.properties[s]={pool:d,acquired:[]}}this.afterDispatchHandle=JF(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const t in this.properties){const i=this.properties[t];for(const s of i.acquired)u7(s)||i.pool.release(s);i.pool.destroy(),i.pool=null,i.acquired=null}this.properties=null,this.owner=null}get(t){const i=this.owner._get(t),s=this.properties[t];let l=s.pool.acquire();for(s.acquired.push(l);l===i;)s.acquired.push(l),l=s.pool.acquire();return l}_release(){for(const t in this.properties){const i=this.properties[t];let s=0;for(const l of i.acquired)u7(l)?i.acquired[s++]=l:i.pool.release(l);i.acquired.length=s}}}const qne=pe("mac")?"Meta":"Ctrl",m2={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)m2[e]=String.fromCharCode(e);for(let e=1;e<25;e++)m2[111+e]=`F${e}`;for(let e=65;e<91;e++)m2[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function Une(e){if(e.key!==void 0)return ju(e);const t=m2[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function Bne(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class Hne{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const s of this.keyModifiers)if(!i.has(s))return!1;return!0}}const Z$=Me.getLogger("esri.views.input.InputHandler");class Bi{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const s of i)this._incomingEventMatches.push(s.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?Z$.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,s){let l;typeof i=="function"?(s=i,l=[]):l=i||[];const d=typeof t=="string"?new Hne(t,l):t,y=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},g=E=>{const O=this._incoming[E.match.eventType];if(O){const P=O.indexOf(E);O.splice(P,1),y(),this._manager&&this._manager.updateDependencies()}},x=new Wne(d,s,{onPause:g,onRemove:g,onResume:E=>{const O=this._incoming[E.match.eventType];O&&!O.includes(E)&&(O.push(E),y(),this._manager&&this._manager.updateDependencies())}});let $=this._incoming[d.eventType];return $||($=[],this._incoming[d.eventType]=$),$.push(x),y(),this._manager&&this._manager.updateDependencies(),x}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new Jne(t,{onEmit:(s,l,d,y)=>{this._manager.emit(s.eventType,l,d,y)},onRemove:s=>{delete this._outgoing[s.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):Z$.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const s of i)if(s.match.matches(t)&&(s.callback(t),t.shouldStopPropagation()))break}}}class Wne{constructor(t,i,s){this.match=t,this._callback=i,this._handler=s}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class Jne{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,s){this._removed||this._handler.onEmit(this,t,i,s)}remove(){this._removed=!0,this._handler.onRemove(this)}}class Kne extends Bi{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{const s=i.data.native.pointerType==="touch";this._setValue(s?"touch":"mouse",i.data.x,i.data.y)})}_setValue(t,i,s){t===this._value&&this._x===i&&this._y===s||(this._value=t,this._x=i,this._y=s,this._onChange(t,i,s))}}const Xw=Me.getLogger("esri.views.input.InputManager");let Za=class extends ze{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=qne,this.latestPointerType="mouse",this._propertiesPool=new Gne({latestPointerLocation:Xne},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,i=Al.INTERNAL){if(this._nameToGroup[e])return void Xw.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void Xw.error("Can't register a group of zero handlers");const s={name:e,handlers:t.map(l=>({handler:l,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let l=s.handlers.length-1;l>=0;l--){const d=s.handlers[l];this._handlers.push(d),d.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(y,g,x,$,E)=>{this._emitInputEvent(d.priorityIndex+1,y,g,x,E,$)},setPointerCapture:(y,g)=>{this._setPointerCapture(s,d,y,g)},setEventCallback:y=>{d.eventCallback=y},setUninstallCallback:y=>{d.uninstallCallback=y},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Xw.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let l=s.handler.hasSideEffects;if(!l){for(const d of s.handler.outgoingEventTypes)if(e.has(d)){l=!0;break}}if(l)for(const d of s.handler.incomingEventMatches){e.add(d.eventType);for(const y of d.keyModifiers)Bne(y)||t.add(y)}s.active=l}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,i){this._get("latestPointerType")!==e&&this._set("latestPointerType",e);const s=this._get("latestPointerLocation");if(he(s)||s.x!==t||s.y!==i){const l=this._propertiesPool.get("latestPointerLocation");l.x=t,l.y=i,this._set("latestPointerLocation",l)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const l=t;this._pointerCaptures.delete(l.native.pointerId)}this._updateKeyModifiers(e,t);const i=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,s=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,i,s)}_updateKeyModifiers(e,t){if(!t)return;let i=!1;const s=()=>{if(!i){const y=new Set;this._activeKeyModifiers.forEach(g=>{y.add(g)}),this._activeKeyModifiers=y,i=!0}},l=(y,g)=>{g&&!this._activeKeyModifiers.has(y)?(s(),this._activeKeyModifiers.add(y)):!g&&this._activeKeyModifiers.has(y)&&(s(),this._activeKeyModifiers.delete(y))};if(e==="key-down"||e==="key-up"){const y=t.key;this._keyModifiers.has(y)&&l(y,e==="key-down")}const d=t.native;l("Alt",!(!d||!d.altKey)),l("Ctrl",!(!d||!d.ctrlKey)),l("Shift",!(!d||!d.shiftKey)),l("Meta",!(!d||!d.metaKey)),l("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Kne((e,t,i)=>this._setLatestPointer(e,t,i)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],Al.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Al.INTERNAL)}_setPointerCapture(e,t,i,s){const l=e.name+"-"+t.priorityIndex,d=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,d),s?(d.add(l),d.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):d.has(l)&&(d.delete(l),d.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,i,s){this._emitInputEvent(0,e,t,i,s)}_emitInputEvent(e,t,i,s,l,d){const y=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),g=l!==void 0&&l,x={event:new Yne(t,i,y,d||this._activeKeyModifiers,g),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(x):this._doNewPropagation(x)}_doNewPropagation(e){this._currentPropagation={events:new $g,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:i}=this._currentPropagation.events.pop(),s=t.data&&t.data.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(e.currentHandler=this._handlersPriority[i];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new $g;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const i of e.handler.incomingEventMatches)for(const s of t.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const l=i.keyModifiers.filter(d=>s.keyModifiers.includes(d));if(l.length===i.keyModifiers.length!=(l.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const i of e){let s=0;for(;s<t.length&&this._compareHandlerPriority(i,t[s])>=0;)s++;t.splice(s,0,i)}return t}get debug(){const e=t=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=i};return{injectEvent:(t,i)=>{e(()=>{this._onEventReceived(t,i)})},disablePointerCapture:e}}};v([_({readOnly:!0})],Za.prototype,"hasPendingInputs",null),v([_()],Za.prototype,"eventSource",void 0),v([_()],Za.prototype,"recognizers",void 0),v([_({readOnly:!0})],Za.prototype,"latestPointerType",void 0),v([_({readOnly:!0})],Za.prototype,"latestPointerLocation",void 0),Za=v([H("esri.views.input.InputManager")],Za);class Yne{constructor(t,i,s,l,d){this.type=t,this.data=i,this.timestamp=s,this.modifiers=l,this.cancelable=d,this._propagationState=fl.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=fl.STOPPED}shouldStopPropagation(){return(this._propagationState&fl.STOPPED)!=0}async(t){this._propagationState|=fl.PAUSED;const i=(s,l)=>{this._propagationState&=~fl.PAUSED;const d=this._resumeCallback;if(this._resumeCallback=null,d&&d(),l)throw s;return s};return(typeof t=="function"?t():t).then(s=>i(s,!1),s=>i(s,!0))}shouldPausePropagation(t){return!!(this._propagationState&fl.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var fl;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(fl||(fl={}));const Al={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class Xne{}function Q$(e){return e&&typeof e.highlight=="function"}const g2={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},ah=new zp({id:"zoom-to-feature",title:"{messages.zoom}",className:g2.iconZoom}),eM=new zp({id:"remove-selected-feature",title:"{messages.remove}",className:g2.iconTrash}),ep=new zp({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:g2.iconZoom}),tp=new zp({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:g2.iconBrowseClusteredFeatures}),Zne="esri.widgets.Popup.PopupViewModel",Zg=Me.getLogger(Zne),Qne=e=>{const{event:t,view:i}=e,{action:s}=t,l=i&&i.popup;if(!s)return Promise.reject(new te("trigger-action:missing-arguments","Event has no action"));if(!l)return Promise.reject(new te("trigger-action:missing-arguments","view.popup is missing"));const{disabled:d,id:y}=s;if(!y)return Promise.reject(new te("trigger-action:invalid-action","action.id is missing"));if(d)return Promise.reject(new te("trigger-action:invalid-action","Action is disabled"));if(y===ah.id)return toe(l.viewModel).catch(Cb);if(y===ep.id)return ioe(l.viewModel);if(y===tp.id)return l.featureMenuOpen=!l.featureMenuOpen,l.viewModel.browseClusterEnabled=!l.viewModel.browseClusterEnabled,Promise.resolve();if(l.viewModel.browseClusterEnabled=!1,y===eM.id){l.close();const{selectedFeature:g}=l;if(!g)return Promise.reject(new te(`trigger-action:${eM.id}`,"selectedFeature is required",{selectedFeature:g}));const{sourceLayer:x}=g;return x?x.remove(g):i.graphics.remove(g),Promise.resolve()}return Promise.resolve()};function gR(e){const{selectedFeature:t,location:i,view:s}=e;return s?s.type==="3d"?t||i:e.get("selectedFeature.geometry")||i:null}function qu(e){var t,i;return(e==null?void 0:e.isAggregate)&&((i=(t=e==null?void 0:e.sourceLayer)==null?void 0:t.featureReduction)==null?void 0:i.type)==="cluster"}function eoe(e,t){if((t==null?void 0:t.type)!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const i=t.getViewForGraphic(e);if(i&&"whenGraphicBounds"in i){let s=!1;return i.whenGraphicBounds(e,{useViewElevation:!0}).then(l=>{s=!l||!l.boundingBox||l.boundingBox[0]===l.boundingBox[3]&&l.boundingBox[1]===l.boundingBox[4]&&l.boundingBox[2]===l.boundingBox[5]}).catch(()=>{const l=new te("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});Zg.error(l)}),s}return!0}async function toe(e){const{location:t,selectedFeature:i,view:s,zoomFactor:l}=e,d=gR(e);if(!d){const $=new te("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:d,view:s});throw Zg.error($),$}const y=s.scale/l,g=e.get("selectedFeature.geometry")||t,x=g&&g.type==="point"&&eoe(i,s);ah.active=!0,ah.disabled=!0;try{await e.view.goTo({target:d,scale:x?y:void 0})}finally{ah.active=!1,ah.disabled=!1,e.zoomToLocation=null,x&&(e.location=g)}}async function ioe(e){const{selectedFeature:t,view:i}=e;if((i==null?void 0:i.type)!=="2d"){const g=new te("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw Zg.error(g),g}if(!qu(t)){const g=new te("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw Zg.error(g),g}const s=t.sourceLayer,l=await i.whenLayerView(s),d=l.createQuery();d.aggregateIds=[t.getObjectId()],ep.active=!0,ep.disabled=!0;const{extent:y}=await l.queryExtent(d);await i.goTo({target:y}),ep.active=!1,ep.disabled=!1}async function roe(e){const{selectedFeature:t,view:i}=e,s=t.sourceLayer,l=await i.whenLayerView(s),d=l.createQuery();d.aggregateIds=[t.getObjectId()];const{extent:y}=await l.queryExtent(d);e.selectedClusterBoundaryFeature.geometry=y,i.graphics.add(e.selectedClusterBoundaryFeature)}async function soe(e){const{selectedFeature:t,view:i}=e,s=t.sourceLayer,l=await i.whenLayerView(s),d=l.createQuery();d.aggregateIds=[t.getObjectId()],tp.active=!0,tp.disabled=!0;const{features:y}=await l.queryFeatures(d);tp.active=!1,tp.disabled=!1,i.popup.open({features:[t].concat(y),featureMenuOpen:!0})}function noe(e){const t=e.features.filter(i=>qu(i));t.length&&(e.features=t)}const vR=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:s}=this;return this.goToOverride?this.goToOverride(s,i):s.goTo(i.target,i.options)}};return v([_()],t.prototype,"goToOverride",void 0),v([_()],t.prototype,"view",void 0),t=v([H("esri.widgets.support.GoTo")],t),t},rf=Ge.ofType({key:"type",defaultKeyValue:"button",base:Ov,typeMap:{button:zp,toggle:IE}}),ooe=()=>[ah.clone()],aoe=()=>[ep.clone(),tp.clone()],wR="esri.widgets.Popup.PopupViewModel",dy=Me.getLogger(wR);let ut=class extends vR(lR){constructor(e){super(e),this._handles=new Or,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new rf,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new ws({symbol:new Vl({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([Te(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),Te(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),Te(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),Te(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),Te(()=>this.location,e=>this._locationChange(e)),Te(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),Te(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),Te(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),Te(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>Qne({event:e,view:this.view})),Ws(()=>!this.waitingForResult,()=>this._waitingForResultChange(),$p),Te(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),Te(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Ws(()=>!this.visible,()=>this.browseClusterEnabled=!1),Te(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new rf;e.removeAll();const{actions:t,defaultActions:i,defaultPopupTemplateEnabled:s,includeDefaultActions:l,selectedFeature:d}=this,y=l?i.concat(t):t,g=d&&(typeof d.getEffectivePopupTemplate=="function"&&d.getEffectivePopupTemplate(s)||d.popupTemplate),x=g&&g.actions,$=g&&g.overwriteActions?x:x?x.concat(y):y;return $&&$.filter(Boolean).forEach(E=>e.add(E)),e}get defaultActions(){const e=this._get("defaultActions")||new rf;return e.removeAll(),e.addMany(qu(this.selectedFeature)?aoe():ooe()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:i,promiseCount:s,selectedFeatureIndex:l}=this,d=s&&t.length;d&&i&&l===-1?this.selectedFeatureIndex=0:d&&l!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=oa(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const i=l=>{this._pendingPromises.has(t)&&this._updateFeatures(l),this._updatePendingPromises(t)},s=()=>this._updatePendingPromises(t);t.then(i,s)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=gR(this);if(!t){const i=new te("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return dy.error(i),Promise.reject(i)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:i}=this;if(!i||!e){const s=new te("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return dy.error(s),Promise.reject(s)}return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:i}=t;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);const s=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const l of s)delete t[l];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){noe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?qu(t)?(await roe(this),await soe(this)):dy.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):dy.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(ah.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(qu(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:i}=this;i&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:i,featuresPerPage:s,featureViewModels:l}=this;if(i===null)return;const d=((i-1)*s+t)%t,y=d+s;l.slice(d,y).forEach((g,x)=>{g&&!g.graphic&&(g.graphic=e[d+x])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:i,view:s}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(s.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),qu(e)?void 0:(e.symbol=await Vne(e),this._selectedClusterFeature=e,void s.graphics.add(this._selectedClusterFeature));!i&&t||!e.geometry?i&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=s.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:i,promisesPerLayerView:s}=t,l=Promise.resolve(i),d=s.map(y=>y.promise);this.promises=[l,...d]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:i}=this;if(qu(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const s=i.slice(0),l=[];t.forEach((d,y)=>{var x,$;if(!d)return;let g=null;if(s.some((E,O)=>(E&&E.graphic===d&&(g=E,s.splice(O,1)),!!g)),g)l[y]=g;else{const E=new bx({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(x=this.view)==null?void 0:x.spatialReference,graphic:d===e?d:null,map:($=this.view)==null?void 0:$.map,view:this.view});l[y]=E}}),s.forEach(d=>d&&!d.destroyed&&d.destroy()),this._set("featureViewModels",l)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:i}=this;if(t.remove(e),i&&this.view){const s=this.view.on("click",l=>{l.pointerType==="mouse"&&l.button!==0||this._fetchFeaturesAndOpen(l)},Al.WIDGET);t.add(s,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const i=new AbortController,{signal:s}=i;this._fetchFeaturesController=i,this.notifyChange("waitingForResult");const l=this.fetchFeatures(e,{signal:s,event:t});return l.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),l}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:i}=e,{view:s}=this;this._fetchFeaturesWithController(t,e).then(l=>{const{clientOnlyGraphics:d,promisesPerLayerView:y,location:g}=l,x=[Promise.resolve(d),...y.map($=>$.promise)];return s.popup.open({location:g||i,promises:x}),l})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return he(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:i}=e;return(i==null?void 0:i.type)==="map-notes"||(i==null?void 0:i.type)==="subtype-group"?i:t}_getHighlightTarget(e,t){const i=t.type==="imagery"?void 0:"objectIdField"in t&&t.objectIdField,s=e.attributes;return s&&i&&s[i]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:i,activeFeature:s,visible:l}=this;if(!(s&&i&&t&&l))return;const d=this._getHighlightLayer(s);if(!(d&&d instanceof Sf))return;const y=this._getLayerView(i,d);this._highlightActiveFeaturePromise=y;const g=await y;if(!(g&&Q$(g)&&this._highlightActiveFeaturePromise===y&&this.activeFeature&&this.highlightEnabled))return;const x=g.highlight(this._getHighlightTarget(s,d));this._handles.add(x,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:i,view:s,visible:l}=this;if(!(t&&s&&i&&l))return;const d=this._getHighlightLayer(t);if(!(d&&d instanceof Sf))return;const y=this._getLayerView(s,d);this._highlightSelectedFeaturePromise=y;const g=await y;if(!(g&&Q$(g)&&this._highlightSelectedFeaturePromise===y&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const x=g.highlight(this._getHighlightTarget(t,d));this._handles.add(x,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const i=e.filter(s=>!t.includes(s));this.features=t.concat(i)}};v([_()],ut.prototype,"featurePage",void 0),v([_()],ut.prototype,"isLoadingFeature",null),v([_({type:rf})],ut.prototype,"actions",void 0),v([_({readOnly:!0})],ut.prototype,"active",null),v([_()],ut.prototype,"activeFeature",void 0),v([_({readOnly:!0})],ut.prototype,"allActions",null),v([_({type:Boolean})],ut.prototype,"defaultPopupTemplateEnabled",void 0),v([_()],ut.prototype,"autoCloseEnabled",void 0),v([_()],ut.prototype,"autoOpenEnabled",void 0),v([_()],ut.prototype,"browseClusterEnabled",void 0),v([_()],ut.prototype,"content",void 0),v([_({type:rf,readOnly:!0})],ut.prototype,"defaultActions",null),v([_({readOnly:!0})],ut.prototype,"featureCount",null),v([_()],ut.prototype,"features",null),v([_()],ut.prototype,"featuresPerPage",void 0),v([_()],ut.prototype,"featureViewModelAbilities",void 0),v([_({readOnly:!0})],ut.prototype,"featureViewModels",void 0),v([_()],ut.prototype,"highlightEnabled",void 0),v([_()],ut.prototype,"includeDefaultActions",void 0),v([_({type:He})],ut.prototype,"location",null),v([_({readOnly:!0})],ut.prototype,"pendingPromisesCount",null),v([_({readOnly:!0})],ut.prototype,"selectedClusterBoundaryFeature",void 0),v([_({readOnly:!0})],ut.prototype,"waitingForResult",null),v([_({readOnly:!0})],ut.prototype,"promiseCount",null),v([_()],ut.prototype,"promises",null),v([_({value:null,readOnly:!0})],ut.prototype,"selectedFeature",null),v([_({value:-1})],ut.prototype,"selectedFeatureIndex",null),v([_({readOnly:!0})],ut.prototype,"selectedFeatureViewModel",null),v([_({readOnly:!0})],ut.prototype,"state",null),v([_()],ut.prototype,"title",void 0),v([_()],ut.prototype,"updateLocationEnabled",void 0),v([_()],ut.prototype,"view",void 0),v([_()],ut.prototype,"visible",void 0),v([_()],ut.prototype,"zoomFactor",void 0),v([_()],ut.prototype,"zoomToLocation",void 0),v([_()],ut.prototype,"centerAtLocation",null),ut=v([H(wR)],ut);const bR=ut,tM="selected-index",loe=0,iM="popup-spinner",be={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},rM={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},sM="esri-popup";function To(e,t){return t===void 0?`${sM}__${e}`:`${sM}__${e}-${t}`}const _R="esri.widgets.Popup",nM=Me.getLogger(_R),oM={closeButton:!0,featureNavigation:!0};let Ue=class extends oR(Cr){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new Or,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([i])=>{i!=null&&i.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=z6(()=>this._displaySpinner(),loe),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new bR,this.visible=null,this.visibleElements={...oM},this._addSelectedFeatureIndexHandle(),this.own([Te(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},()=>this._positionContainer()),Te(()=>{var i;return[(i=this.viewModel)==null?void 0:i.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),Te(()=>{var i;return(i=this.viewModel)==null?void 0:i.screenLocation},(i,s)=>{!!i!=!!s&&this.reposition()}),Te(()=>{var i,s,l,d,y,g;return[(s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.padding,(d=(l=this.viewModel)==null?void 0:l.view)==null?void 0:d.size,(y=this.viewModel)==null?void 0:y.active,(g=this.viewModel)==null?void 0:g.location,this.alignment]},()=>this.reposition()),Te(()=>this.spinnerEnabled,i=>this._spinnerEnabledChange(i)),Te(()=>{var i,s;return(s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.size},(i,s)=>this._updateDockEnabledForViewSize(i,s)),Te(()=>{var i;return(i=this.viewModel)==null?void 0:i.view},(i,s)=>this._viewChange(i,s)),Te(()=>{var i,s;return(s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.ready},(i,s)=>this._viewReadyChange(i,s)),Te(()=>{var i,s;return[(i=this.viewModel)==null?void 0:i.waitingForResult,(s=this.viewModel)==null?void 0:s.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),Te(()=>{var i,s,l,d;return[(s=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:s.title,(d=(l=this.selectedFeatureWidget)==null?void 0:l.viewModel)==null?void 0:d.state]},()=>this._setTitleFromFeatureWidget()),Te(()=>{var i,s,l,d;return[(s=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:s.content,(d=(l=this.selectedFeatureWidget)==null?void 0:l.viewModel)==null?void 0:d.state]},()=>this._setContentFromFeatureWidget()),Ws(()=>!this.collapsed,()=>{var i,s;((s=(i=this.viewModel)==null?void 0:i.view)==null?void 0:s.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Eh(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},"change",()=>this._watchActions()),Te(()=>{var i;return(i=this.viewModel)==null?void 0:i.allActions},()=>this._watchActions(),Ot),Te(()=>{var i;return(i=this.viewModel)==null?void 0:i.featureViewModels},()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,i,s,l,d,y;return!!(this.selectedFeatureWidget?((t=(e=this.selectedFeatureWidget)==null?void 0:e.viewModel)==null?void 0:t.waitingForContent)||((s=(i=this.selectedFeatureWidget)==null?void 0:i.viewModel)==null?void 0:s.state)==="error"||((d=(l=this.selectedFeatureWidget)==null?void 0:l.viewModel)==null?void 0:d.content):(y=this.viewModel)==null?void 0:y.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||rM}set dockOptions(e){const t={...rM},i=this.get("viewModel.view.breakpoints"),s={};i&&(s.width=i.xsmall,s.height=i.xsmall);const l={...t,...e},d={...t.breakpoint,...s},{breakpoint:y}=l;y===!0?l.breakpoint=d:typeof y=="object"&&(l.breakpoint={...d,...y}),this._set("dockOptions",l),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:i}=this,{selectedFeatureViewModel:s}=this.viewModel,l={...t,title:!1};return s?(e?(e.viewModel=s,e.visibleElements=l):this._feature=new _ne({headingLevel:i+1,viewModel:s,visibleElements:l}),this._feature):null}castVisibleElements(e){return{...oM,...e}}blur(){const{active:e}=this.viewModel;e||nM.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||nM.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var l,d;this._handles.remove(tM);const t=!!e&&!!e.featureMenuOpen,i=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:i,featureMenuOpen:t};((d=(l=this.viewModel)==null?void 0:l.view)==null?void 0:d.widthBreakpoint)==="xsmall"&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var L,z,V,K;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:i,dividedActions:s,currentAlignment:l,currentDockPosition:d}=this,{active:y}=this.viewModel,{menuActions:g}=s,x=y&&g.length>1&&e,$=y&&t,E=y&&!t,O=(z=(L=this.selectedFeature)==null?void 0:L.layer)==null?void 0:z.title,P=(K=(V=this.selectedFeature)==null?void 0:V.layer)==null?void 0:K.id,R={[be.alignTopCenter]:l==="top-center",[be.alignBottomCenter]:l==="bottom-center",[be.alignTopLeft]:l==="top-left",[be.alignBottomLeft]:l==="bottom-left",[be.alignTopRight]:l==="top-right",[be.alignBottomRight]:l==="bottom-right",[be.isDocked]:$,[be.shadow]:E,[be.isDockedTopLeft]:d==="top-left",[be.isDockedTopCenter]:d==="top-center",[be.isDockedTopRight]:d==="top-right",[be.isDockedBottomLeft]:d==="bottom-left",[be.isDockedBottomCenter]:d==="bottom-center",[be.isDockedBottomRight]:d==="bottom-right",[be.isFeatureMenuOpen]:i,[be.isActionsMenuOpen]:x};return le("div",{class:this.classes(be.base,R),role:"presentation","data-layer-title":O,"data-layer-id":P,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},y?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return le("span",{"aria-hidden":"true",class:this.classes(be.icon,be.iconLoading,be.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?le("div",{key:To("loading-container"),role:"presentation",class:be.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=Sl(this.container),t={[be.iconRightTriangleArrow]:e,[be.paginationPreviousIconRTL]:e,[be.iconLeftTriangleArrow]:!e,[be.paginationPreviousIconLTR]:!e};return le("span",{"aria-hidden":"true",class:this.classes(be.icon,t)})}renderPreviousButton(){const{messages:e}=this;return le("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(be.button,be.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=Sl(this.container),t={[be.iconLeftTriangleArrow]:e,[be.paginationNextIconRTL]:e,[be.iconRightTriangleArrow]:!e,[be.paginationNextIconLTR]:!e};return le("span",{"aria-hidden":"true",class:this.classes(be.icon,t)})}renderNextButton(){const{messages:e}=this;return le("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(be.button,be.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:i}=this,{featureCount:s,selectedFeatureIndex:l}=this.viewModel;return le("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(be.button,be.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},this._getPageText(s,l))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),i={[be.iconUndock]:e,[be.iconDock]:!e,[be.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[be.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[be.iconDockToTop]:!e&&t==="top-center",[be.iconDockToBottom]:!e&&t==="bottom-center"};return le("span",{"aria-hidden":"true",class:this.classes(i,be.icon)})}renderDockButton(){var l,d,y;const{dockEnabled:e,messages:t}=this,i=(d=(l=this.viewModel)==null?void 0:l.view)==null?void 0:d.widthBreakpoint,s=e?t.undock:t.dock;return i!=="xsmall"&&((y=this.dockOptions)==null?void 0:y.buttonEnabled)?le("div",{role:"button","aria-label":s,title:s,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(be.button,be.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:i,contentCollapsed:s,messagesCommon:l}=this,d={[be.headerContainerButton]:i},y=le(Y6,{level:this.headingLevel,class:be.headerTitle,innerHTML:e}),g=i?le("button",{key:`${e}--collapsible`,id:t,title:s?l.expand:l.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(be.headerContainer,d),"aria-expanded":s?"false":"true",onclick:this._toggleCollapsed,type:"button"},y):le("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(be.headerContainer,d)},y);return e?g:null}renderCloseIcon(){return le("span",{"aria-hidden":"true",class:this.classes(be.icon,be.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?le("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:be.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return le("header",{class:be.header},this.renderTitle(),le("div",{class:be.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:i}=this,{content:s}=this.viewModel;return t&&!i?le("article",{key:s,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:be.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:s,messagesCommon:l}=this,d=i?l.close:l.open,{menuActions:y}=s;return y.length?le("div",{key:To("actions-menu-button"),class:this.classes(be.button,be.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":d,title:d},le("span",{"aria-hidden":"true",class:be.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:i,dividedActions:s}=this,{menuActions:l}=s;return l.length&&i?le("ul",{id:e,role:"menu","aria-labelledby":t,key:To("actions"),class:be.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},l.toArray().map(d=>this.renderAction({action:d,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,i=!!e.length,s=!!t.length;return i||s?le("div",{key:"inline-actions-container","data-inline-actions":i.toString(),"data-menu-actions":s.toString(),class:be.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?le("section",{key:To("navigation"),class:this.classes(be.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:i,menuActions:s}=t,l=!!i.length,d=!!s.length,y={[be.footerHasPagination]:e,[be.footerHasActions]:l,[be.footerHasActionsMenu]:d};return e||l?le("div",{key:To("feature-buttons"),class:this.classes(be.footer,y)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:i}=this.viewModel,s=Lo(e.selectedFeatures,{total:t.length});return le("section",{key:To("menu"),class:be.featureMenu},le("strong",{class:be.featureMenuHeader},s),le("nav",{bind:this,class:be.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:I_},this.renderFeatureMenu(),le("div",{class:be.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),i?le("div",{class:be.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:le("div",{key:To("pointer"),class:be.pointer,role:"presentation"},le("div",{class:this.classes(be.pointerDirection,be.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:i,titleId:s,contentId:l,collapsible:d,hasContent:y,contentCollapsed:g,visibleElements:x}=this,{title:$}=this.viewModel,E=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||i==="top-left"||i==="top-center"||i==="top-right",O=t==="top-left"||t==="top-center"||t==="top-right"||i==="bottom-left"||i==="bottom-center"||i==="bottom-right",P={[be.shadow]:e,[be.isCollapsible]:d,[be.isCollapsed]:g};return le("div",{class:this.classes(be.main,be.widget,P),tabIndex:x.closeButton?null:-1,role:"dialog","aria-labelledby":$?s:"","aria-describedby":y&&!g?l:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},E?this.renderFooter():null,E?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),O?this.renderFooter():null,O?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?le("div",{key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return le("span",{key:"text",class:be.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),i=this._getActionImage(e),s={[be.iconLoading]:e.active,[be.rotating]:e.active,[be.icon]:!!t,[be.actionImage]:!e.active&&!!i};return t&&(s[t]=!e.active),le("span",{key:"icon","aria-hidden":"true",class:this.classes(be.icon,s),styles:this._getIconStyles(i)})}renderAction(e){const{action:t,type:i}=e,s=this._getActionTitle(t),l={[be.action]:t.type!=="toggle",[be.actionToggle]:t.type==="toggle",[be.actionToggleOn]:t.type==="toggle"&&t.value,[be.buttonDisabled]:t.disabled},d=[this.renderActionIcon(t),this.renderActionText(s)],y=i==="menu-item"?le("li",{key:t.uid,role:"menuitem",tabIndex:0,title:s,"aria-label":s,class:this.classes(be.button,l),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},d):le("div",{key:t.uid,role:"button",tabIndex:0,title:s,"aria-label":s,class:this.classes(be.button,l),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},d);return t.visible?y:null}renderFeatureMenuItem(e,t){const{messages:i,messagesCommon:s}=this,{selectedFeatureIndex:l,selectedFeatureViewModel:d}=this.viewModel,y=e===d,g={[be.featureMenuSelected]:y},x=y?le("span",{key:To(`feature-menu-selected-feature-${l}`),title:i.selectedFeature,"aria-label":i.selectedFeature,class:be.iconCheckMark}):null,$=le("span",{innerHTML:e.title||s.untitled});return le("li",{role:"menuitem",tabIndex:-1,key:To(`feature-menu-feature-${l}`),class:this.classes(g,be.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},le("span",{class:be.featureMenuTitle},$,x))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?le("ol",{class:be.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(i=>!!i.graphic).map((i,s)=>this.renderFeatureMenuItem(i,s))):null}_getActionTitle(e){const{messages:t,selectedFeature:i,messagesCommon:s}=this,{id:l}=e,d=i==null?void 0:i.attributes,y=l==="zoom-to-feature"?Lo(e.title,{messages:t}):l==="remove-selected-feature"?Lo(e.title,{messages:s}):l==="zoom-to-clustered-features"||l==="browse-clustered-features"?Lo(e.title,{messages:t}):e.title;return y&&d?Lo(y,d):y}_getActionClass(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{className:s,image:l}=e,d=l||s?s:be.iconDefaultAction;return d&&i?Lo(d,i):d}_getActionImage(e){const{selectedFeature:t}=this,i=t==null?void 0:t.attributes,{image:s}=e;return s&&i?Lo(s,i):s}_createFeatureUpdatedAnimation(){return fX("enter",be.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const i=Math.round(e);return Math.max(t?i-1:i,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(i=>{this._handles.add(Te(()=>[i.uid,i.active,i.className,i.disabled,i.id,i.title,i.image,i.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(d=>d.visible),i=this._getInlineActionCount(),s=i===null,l=i===0;return{inlineActions:s?t.slice(0):l?new Ge:t.slice(0,i),menuActions:s?new Ge:l?t.slice(0):t.slice(i)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var i,s;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((i=e.viewModel)==null?void 0:i.state)==="error"?t.errorMessage:((s=e.viewModel)==null?void 0:s.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){ju(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){ju(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,i=e.currentTarget["data-feature-index"];t.activeFeature=t.features[i]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=ju(e),{_featureMenuNode:i}=this,s=e.currentTarget["data-feature-index"];if(!i)return;const l=i.querySelectorAll("li"),d=l.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),l[l.length-1].focus()):(e.stopPropagation(),l[0].focus()):(e.stopPropagation(),l[(s+1+d)%d].focus()):(e.stopPropagation(),l[(s-1+d)%d].focus())}_handleActionMenuItemKeyup(e){const t=ju(e),{_actionsMenuNode:i}=this,s=e.currentTarget.dataset.actionUid,{menuActions:l}=this.dividedActions,d=l.findIndex(x=>x.uid===s);if(!i)return;const y=i.querySelectorAll("li"),g=y.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),y[y.length-1].focus()):(e.stopPropagation(),y[0].focus()):(e.stopPropagation(),y[(d+1+g)%g].focus()):(e.stopPropagation(),y[(d-1+g)%g].focus())}_handleMainKeyup(e){const t=ju(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:i}=this.viewModel;i?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await Tf(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=Te(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,i)=>this._selectedFeatureIndexUpdated(t,i));this._handles.add(e,tM)}_selectedFeatureIndexUpdated(e,t){const{featureCount:i}=this;i&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:i,screenLocation:s,side:l,view:d}=e;if(isNaN(i)||isNaN(t)||!d||!s)return!1;const y=d.padding;return l==="right"&&s.x+i/2>d.width-y.right||l==="left"&&s.x-i/2<y.left||l==="top"&&s.y-t<y.top||l==="bottom"&&s.y+t>d.height-y.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:i,_mainContainerNode:s,viewModel:l}=this,{screenLocation:d,view:y}=l;if(he(d)||!y||!i)return"top-center";if(!this._isScreenLocationWithinView(d,y))return this._get("currentAlignment")||"top-center";function g(se){return parseInt(se.replace(/[^-\d\.]/g,""),10)}const x=s?window.getComputedStyle(s,null):null,$=x?g(x.getPropertyValue("max-height")):0,E=x?g(x.getPropertyValue("height")):0,{height:O,width:P}=i.getBoundingClientRect(),R=P+t,L=Math.max(O,$,E)+t,z=this._isOutsideView({popupHeight:L,popupWidth:R,screenLocation:d,side:"right",view:y}),V=this._isOutsideView({popupHeight:L,popupWidth:R,screenLocation:d,side:"left",view:y}),K=this._isOutsideView({popupHeight:L,popupWidth:R,screenLocation:d,side:"top",view:y}),ee=this._isOutsideView({popupHeight:L,popupWidth:R,screenLocation:d,side:"bottom",view:y});return V?K?"bottom-right":"top-right":z?K?"bottom-left":"top-left":K?ee?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return Sl(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var y;if(e!=="auto")return e;const t=(y=this.viewModel)==null?void 0:y.view,i=Sl(this.container)?"top-left":"top-right";if(!t)return i;const s=t.padding||{left:0,right:0,top:0,bottom:0},l=t.width-s.left-s.right,{breakpoints:d}=t;return d&&l<=d.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:i}=e.getBoundingClientRect(),s=this._calculatePositionStyle(t,i);s&&(e.style.top=s.top,e.style.left=s.left,e.style.bottom=s.bottom,e.style.right=s.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:i}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+i:e}_calculateAlignmentPosition(e,t,i,s){const{currentAlignment:l,_pointerOffsetInPx:d}=this,y=s/2,g=i.height-t,x=i.width-e,{padding:$}=this.view;return l==="bottom-center"?{top:t+d-$.top,left:e-y-$.left}:l==="top-left"?{bottom:g+d-$.bottom,right:x+d-$.right}:l==="bottom-left"?{top:t+d-$.top,right:x+d-$.right}:l==="top-right"?{bottom:g+d-$.bottom,left:e+d-$.left}:l==="bottom-right"?{top:t+d-$.top,left:e+d-$.left}:l==="top-center"?{bottom:g+d-$.bottom,left:e-y-$.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:i,view:s}=this;if(!s)return;if(i)return{left:"",top:"",right:"",bottom:""};if(he(e)||!t)return;const l=this._calculateFullWidth(t),d=this._calculateAlignmentPosition(e.x,e.y,s,l);return d?{top:d.top!==void 0?`${d.top}px`:"auto",left:d.left!==void 0?`${d.left}px`:"auto",bottom:d.bottom!==void 0?`${d.bottom}px`:"auto",right:d.right!==void 0?`${d.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,i){const[s,l]=e,[d,y]=t,{width:g,height:x}=i;return s<=g&&d>g||s>g&&d<=g||l<=x&&y>x||l>x&&y<=x}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},s=i.left+i.right,l=i.top+i.bottom,d=[],y=[];d[0]=e[0]-s,d[1]=e[1]-l,y[0]=t[0]-s,y[1]=t[1]-l;const{dockOptions:g}=this,x=g.breakpoint;this._dockingThresholdCrossed(d,y,x)&&this._setDockEnabledForViewSize(g),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const i=t.active&&!e;t.screenLocationEnabled=i}_shouldDockAtCurrentViewSize(e){var g,x;const t=e.breakpoint,i=(x=(g=this.viewModel)==null?void 0:g.view)==null?void 0:x.ui;if(!i)return!1;const{width:s,height:l}=i;if(isNaN(s)||isNaN(l))return!1;const d=t.hasOwnProperty("width")&&s<=t.width,y=t.hasOwnProperty("height")&&l<=t.height;return d||y}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Lo(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,iM),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new Sne({view:e}),e.ui.add(this._spinner,{key:iM,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:i}=this.viewModel,s=i.findIndex(d=>d.uid===t),l=i.getItemAt(s);l&&l.type==="toggle"&&(l.value=!l.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(s)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};v([_({readOnly:!0})],Ue.prototype,"actionsMenuId",null),v([_({readOnly:!0})],Ue.prototype,"actionsMenuButtonId",null),v([_({readOnly:!0})],Ue.prototype,"featureMenuId",null),v([_({readOnly:!0})],Ue.prototype,"titleId",null),v([_({readOnly:!0})],Ue.prototype,"contentId",null),v([_({readOnly:!0})],Ue.prototype,"hasContent",null),v([_({readOnly:!0})],Ue.prototype,"featureNavigationVisible",null),v([_({readOnly:!0})],Ue.prototype,"collapsible",null),v([_({readOnly:!0})],Ue.prototype,"featureMenuVisible",null),v([_({readOnly:!0})],Ue.prototype,"contentCollapsed",null),v([_({readOnly:!0})],Ue.prototype,"dividedActions",null),v([Be("viewModel.actions")],Ue.prototype,"actions",void 0),v([_()],Ue.prototype,"actionsMenuOpen",null),v([_()],Ue.prototype,"alignment",void 0),v([Be("viewModel.autoCloseEnabled")],Ue.prototype,"autoCloseEnabled",void 0),v([Be("viewModel.autoOpenEnabled")],Ue.prototype,"autoOpenEnabled",void 0),v([Be("viewModel.defaultPopupTemplateEnabled")],Ue.prototype,"defaultPopupTemplateEnabled",void 0),v([Be("viewModel.content")],Ue.prototype,"content",void 0),v([_()],Ue.prototype,"collapsed",void 0),v([_()],Ue.prototype,"collapseEnabled",void 0),v([_({readOnly:!0})],Ue.prototype,"currentAlignment",null),v([_({readOnly:!0})],Ue.prototype,"currentDockPosition",null),v([_()],Ue.prototype,"dockOptions",null),v([_()],Ue.prototype,"dockEnabled",void 0),v([Be("viewModel.featureCount")],Ue.prototype,"featureCount",void 0),v([_()],Ue.prototype,"featureMenuOpen",void 0),v([Be("viewModel.features")],Ue.prototype,"features",void 0),v([Be("viewModel.goToOverride")],Ue.prototype,"goToOverride",void 0),v([_()],Ue.prototype,"headingLevel",void 0),v([Be("viewModel.highlightEnabled")],Ue.prototype,"highlightEnabled",void 0),v([Be("viewModel.location")],Ue.prototype,"location",void 0),v([_({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ue.prototype,"label",void 0),v([_()],Ue.prototype,"maxInlineActions",void 0),v([_(),Wr("esri/widgets/Popup/t9n/Popup")],Ue.prototype,"messages",void 0),v([_(),Wr("esri/t9n/common")],Ue.prototype,"messagesCommon",void 0),v([Be("viewModel.promises")],Ue.prototype,"promises",void 0),v([Be("viewModel.selectedFeature")],Ue.prototype,"selectedFeature",void 0),v([Be("viewModel.selectedFeatureIndex")],Ue.prototype,"selectedFeatureIndex",void 0),v([_({readOnly:!0})],Ue.prototype,"selectedFeatureWidget",null),v([_()],Ue.prototype,"spinnerEnabled",void 0),v([Be("viewModel.title")],Ue.prototype,"title",void 0),v([Be("viewModel.updateLocationEnabled")],Ue.prototype,"updateLocationEnabled",void 0),v([Be("viewModel.view")],Ue.prototype,"view",void 0),v([_({type:bR}),PQ(["triggerAction","trigger-action"])],Ue.prototype,"viewModel",void 0),v([Be("viewModel.visible")],Ue.prototype,"visible",void 0),v([_()],Ue.prototype,"visibleElements",void 0),v([mt("visibleElements")],Ue.prototype,"castVisibleElements",null),v([Ds()],Ue.prototype,"_close",null),v([Ds()],Ue.prototype,"_toggleDockEnabled",null),v([Ds()],Ue.prototype,"_toggleFeatureMenu",null),v([Ds()],Ue.prototype,"_toggleActionsMenu",null),v([Ds()],Ue.prototype,"_triggerAction",null),v([Ds()],Ue.prototype,"_selectFeature",null),v([Ds()],Ue.prototype,"_next",null),v([Ds()],Ue.prototype,"_previous",null),Ue=v([H(_R)],Ue);const aM=Ue,Zw=[0,0];function uoe(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return Zw[0]=i.left+t.pageXOffset,Zw[1]=i.top+t.pageYOffset,Zw}function lM(e){e&&(QO(e),e.parentNode&&e.parentNode.removeChild(e))}function hoe(e){const t=document.createElement("div");return e.appendChild(t),t}const Ed=16,fy=750,coe=512,poe=2,doe=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Ed,time:fy},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([Te(()=>this.cursor,s=>{const{surface:l}=this;l&&l.setAttribute("data-cursor",s)}),Te(()=>this.interacting,s=>{const{surface:l}=this;l&&l.setAttribute("data-interacting",s.toString())})])}initialize(){this.handles.add(Te(()=>this.ui,(i,s)=>this._handleUIChange(i,s))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(i){const s=this._get("container");if(s===i)return;const l="dom-size";if(this.handles.remove(l),this._stopMeasuring(),s&&(s.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),lM(this.root),this._set("root",null),s8(this.userContent,s),lM(this.userContent),this._set("userContent",null)),i){i.classList.add("esri-view");const d=document.createElement("div");d.className="esri-view-user-storage",s8(i,d),i.appendChild(d),this._set("userContent",d);const y=document.createElement("div");y.className="esri-view-root",i.insertBefore(y,i.firstChild),this._set("root",y);const g=document.createElement("div");g.className="esri-view-surface",g.setAttribute("role","application"),g.tabIndex=0,y.appendChild(g),this._set("surface",g);const x=new f8;y.appendChild(x.surface),this._set("overlay",x),Te(()=>x.needsRender,$=>{$&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=yp({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(Te(()=>this.size,$=>{const[E,O]=$,P="esri-view-surface--inset-outline";E>=document.body.clientWidth||O>=document.body.clientHeight?g.classList.add(P):g.classList.remove(P)},Ot),l),this._set("container",i),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get popup(){return this._get("popup")||new aM({view:this})}set popup(i){const s=this._get("popup");s&&s!==i&&s.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,s,l){const d=this.position;return i-=d[0],s-=d[1],l?(l[0]=i,l[1]=s):l=[i,s],l}containerToPage(i,s,l){const d=this.position;return i+=d[0],s+=d[1],l?(l[0]=i,l[1]=s):l=[i,s],l}_handleUIChange(i,s){s&&(this.handles.remove("ui"),s.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([Te(()=>this.root,s=>{i.container=s?hoe(s):null},Ot),Te(()=>this.popup,(s,l)=>{const d="popup",y="manual";l&&i.remove(l,d),s&&(s.view=i.view,i.add(s,{key:d,position:y}))},Ot)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Ed,i.time=fy,this.handles.add([(()=>{const s=()=>{i.freq=Ed,i.time=fy};return window.addEventListener("resize",s),{remove(){window.removeEventListener("resize",s)}}})(),yp({prepare:s=>{const l=this._measure(),d=this._freqInfo;if(d.time+=s.deltaTime,l&&(d.freq=Ed,this._get("resizing")||this._set("resizing",!0)),d.time<d.freq)return;d.time=0;const y=this._position();d.freq=y||l?Ed:Math.min(fy,d.freq*poe),!l&&d.freq>=coe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,s=i?i.clientWidth:0,l=i?i.clientHeight:0;if(s===0||l===0)return this.suspended||this._set("suspended",!0),!1;const d=this.width,y=this.height;return s===d&&l===y?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",s),this._set("height",l),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:d,oldHeight:y,width:s,height:l}),!0)}_position(){const i=this.container,s=this.position,l=uoe(i);return(!s||l[0]!==s[0]||l[1]!==s[1])&&(this._set("position",[l[0],l[1]]),!0)}forceDOMReadyCycle(){}};return v([_({value:null,cast:i=>j6(i)})],t.prototype,"container",null),v([_({readOnly:!0})],t.prototype,"focused",null),v([_({readOnly:!0})],t.prototype,"height",void 0),v([_({type:aM})],t.prototype,"popup",null),v([_({type:f8})],t.prototype,"overlay",void 0),v([_({readOnly:!0})],t.prototype,"position",void 0),v([_({readOnly:!0})],t.prototype,"resizing",void 0),v([_({readOnly:!0})],t.prototype,"root",void 0),v([_({value:null,readOnly:!0})],t.prototype,"size",null),v([_({readOnly:!0})],t.prototype,"surface",void 0),v([_({readOnly:!0})],t.prototype,"suspended",void 0),v([_()],t.prototype,"ui",void 0),v([_({readOnly:!0})],t.prototype,"userContent",void 0),v([_({readOnly:!0})],t.prototype,"width",void 0),v([_()],t.prototype,"widthBreakpoint",void 0),t=v([H("esri.views.DOMContainer")],t),t},foe=e=>{let t=class extends e{async fetchPopupFeatures(i,s){await this.when();const{location:l,queryArea:d,layerViewsAndGraphics:y,clientOnlyGraphics:g}=await this._prepareFetchPopupFeatures(i,s),x=Promise.resolve(g),$=this._queryLayerPopupFeatures(d,y,s),E=$.map(O=>O.promise);return{location:l,clientOnlyGraphics:g,allGraphicsPromise:PF([x,...E]).then(O=>Array.from(new Set(O.flat()))),promisesPerLayerView:$}}_queryLayerPopupFeatures(i,s,l){return s.map(({layerView:d,graphics:y})=>{const g={clientGraphics:y,event:Y(l)?l.event:null,signal:Y(l)?l.signal:null,defaultPopupTemplateEnabled:!!Y(l)&&!!l.defaultPopupTemplateEnabled},x=d.fetchPopupFeatures(i,g);return{layerView:d,promise:x}})}_isValidPopupGraphic(i,s){return i&&!!i.getEffectivePopupTemplate(Y(s)&&s.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,s){const{clientGraphics:l,queryArea:d,location:y}=await this._popupHitTestGraphics(i,s),g=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:x,clientOnlyGraphics:$}=this._graphicsPerFetchPopupLayerView(l,g);return{clientOnlyGraphics:$,layerViewsAndGraphics:x,queryArea:d,location:y}}async _popupHitTestGraphics(i,s){const{results:l,mapPoint:d}=await this.popupHitTest(i),y=l.filter(x=>x.type==="graphic"&&this._isValidPopupGraphic(x.graphic,s)),g=y.length?y[0].mapPoint:null;return{clientGraphics:y.map(x=>x.graphic),queryArea:d,location:d||g}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(s=>{this._isValidPopupLayerView(s)&&i.push(s)}),Y(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return Y(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,s){const l=[],d=new Map,y=s.map(g=>{const x=[];return"layer"in g?d.set(g.layer,x):d.set(g.graphics,x),{layerView:g,graphics:x}});for(const g of i){const x=d.get(g.layer)||d.get(g.sourceLayer)||null;x?x.push(g):l.push(g)}return{layerViewsAndGraphics:y,clientOnlyGraphics:l}}};return t=v([H("esri.views.PopupView")],t),t};async function $x(e,t){return await e.load(),yoe(e,t)}async function yoe(e,t){const i=[],s=(...d)=>{for(const y of d)he(y)||(Array.isArray(y)?s(...y):Ge.isCollection(y)?y.forEach(g=>s(g)):vs.isLoadable(y)&&i.push(y))};t(s);let l=null;if(await BQ(i,async d=>{(await n2(moe(d)?d.loadAll():d.load())).ok!==!1||l||(l=d)}),l)throw l.loadError;return e}function moe(e){return"loadAll"in e&&typeof e.loadAll=="function"}async function goe(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,i=await Gk("esri/t9n/basemaps");return i[e]||i[t]}const m5={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return $t("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return $t("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return $t("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return $t("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return $t("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return $t("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return $t("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return $t("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return $t("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return $t("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return $t("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return $t("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return $t("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return $t("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return $t("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return $t("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function v2(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function uM(e){var t;return(e==null?void 0:e.type)==="feature"&&((t=e.source)==null?void 0:t.type)==="feature-layer"}const voe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),woe=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function boe(e){return e.layerContainerType==="basemap"?voe:e.layerContainerType==="operational-layers"?woe:null}function _oe(e,t){if(t.restrictedWebMapWriting){const i=boe(t);return!Y(i)||i.has(e.type)&&!v2(e)}return!0}function xoe(e,t){if(v2(e)){const i=Np("featureCollection.layers",t),s=i&&i[0]&&i[0].layerDefinition;s&&Qw(e,s)}else e.type==="stream"?Qw(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&Qw(e,t)}function Qw(e,t){"maxScale"in e&&(t.maxScale=ig(e.maxScale)),"minScale"in e&&(t.minScale=ig(e.minScale))}function Soe(e,t){if(xoe(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=ig(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(v2(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function g5(e,t,i){if(!("write"in e)||!e.write)return i&&i.messages&&i.messages.push(new te("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(_oe(e,i)){const s={};return e.write(s,i)?s:null}return Y(t)&&Soe(e,t=ie(t)),t}var Pm;let $oe=0;const eb=Me.getLogger("esri.Basemap");let js=Pm=class extends Fp(vs){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+$oe++,this.baseLayers=new Ge,this.referenceLayers=new Ge;const t=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type==="elevation"&&eb.error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=s=>{s.parent=null};this.baseLayers.on("after-add",s=>t(s.item)),this.referenceLayers.on("after-add",s=>t(s.item)),this.baseLayers.on("after-remove",s=>i(s.item)),this.referenceLayers.on("after-remove",s=>i(s.item))}initialize(){this.when().catch(e=>{eb.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const e=this.baseLayers.removeAll();for(const s of e)s.destroy();const t=this.referenceLayers.removeAll();for(const s of t)s.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Mh(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const s=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(l=>{const d=g5(l,i.webmap?i.webmap.getLayerJSONFromResourceInfo(l):null,i);Y(d)&&s.push(d)}),this.referenceLayers.forEach(l=>{const d=g5(l,i.webmap?i.webmap.getLayerJSONFromResourceInfo(l):null,i);Y(d)&&(d.isReference=!0,s.push(d))})),t.baseMapLayers=s}set referenceLayers(e){this._set("referenceLayers",Mh(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return $x(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Pm({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const s=ie(i);return s.url&&vo(s.url)&&(s.url=`https:${s.url}`),s.templateUrl&&vo(s.templateUrl)&&(s.templateUrl=`https:${s.templateUrl}`),s})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i}=this;bi(e);const s=[];if(t){const l=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,l,e)),t.data.id&&!t.data.title){const d=t.data.id;s.push(goe(d).then(y=>{y&&this.read({title:y},t.context)}))}}else i&&s.push(this._loadFromItem(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,i){const s=this.resourceInfo&&this.resourceInfo.context,l=this.portalItem&&this.portalItem.portal||s&&s.portal||null,d=s&&s.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:y}=await fe(()=>import("./layersCreator.eb3cd633.js"),["assets/layersCreator.eb3cd633.js","assets/lazyLayerLoader.0727f24a.js","assets/portalLayers.ba65dd67.js","assets/layersLoader.10f1601e.js","assets/jsonContext.0f34a0dd.js"]),g=[];if(bi(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const x={context:{origin:d,url:t,portal:l,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},$=y(this.baseLayers,e.baseMapLayers.filter(O=>!O.isReference),x);g.push($);const E=y(this.referenceLayers,e.baseMapLayers.filter(O=>O.isReference),x);g.push(E)}await qi(g)}async _loadFromItem(e,t){const i=await e.load(t),s=await i.fetchData("json",t),l=fi(e.itemUrl);return this._set("resourceInfo",{data:s.baseMap,context:{origin:"web-map",portal:e.portal||Ui.getDefault(),url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Ui.getDefault(),url:l}),this._loadLayersFromJSON(this.resourceInfo.data,l,t)}static fromId(e){const t=m5[e];if(t){if(t.deprecated){let i=null;e==="dark-gray"?i="dark-gray-vector":e==="gray"?i="gray-vector":e==="streets"?i="streets-vector":e==="topo"&&(i="topo-vector"),vT(eb,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return Pm.fromJSON(t)}return null}};v([_({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,s){this._writeBaseLayers(e,t,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ge}},writer(e,t,i,s){this._writeBaseLayers(e,t,s)}}}}}})],js.prototype,"baseLayers",null),v([_({type:String,json:{origins:{"web-scene":{write:!0}}}})],js.prototype,"id",void 0),v([_({type:Op})],js.prototype,"portalItem",void 0),v([_()],js.prototype,"referenceLayers",null),v([_({readOnly:!0})],js.prototype,"resourceInfo",void 0),v([_({type:Ye})],js.prototype,"spatialReference",void 0),v([_()],js.prototype,"thumbnailUrl",void 0),v([_({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],js.prototype,"title",void 0),v([Ee("title")],js.prototype,"writeTitle",null),js=Pm=v([H("esri.Basemap")],js);const Qg=js;var Moe=Object.freeze(Object.defineProperty({__proto__:null,default:Qg},Symbol.toStringTag,{value:"Module"})),v5;let Nm=v5=class extends ce{constructor(e){super(e),this.type="none"}clone(){return new v5({type:this.type})}};v([Fe({none:"none",stayAbove:"stay-above"})],Nm.prototype,"type",void 0),Nm=v5=v([H("esri.ground.NavigationConstraint")],Nm);var w5;const hM=Me.getLogger("esri.Ground");let Uo=w5=class extends Fp(vs){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ge;const t=s=>{s.parent&&s.parent!==this&&"remove"in s.parent&&s.parent.remove(s),s.parent=this,s.type!=="elevation"&&s.type!=="base-elevation"&&hM.error(`Layer '${s.title}, id:${s.id}' of type '${s.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=s=>{s.parent=null};this.layers.on("after-add",s=>t(s.item)),this.layers.on("after-remove",s=>i(s.item))}initialize(){this.when().catch(e=>{hM.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Mh(e,this._get("layers")))}writeLayers(e,t,i,s){const l=[];e&&(s={...s,layerContainerType:"ground"},e.forEach(d=>{if("write"in d){const y={};jU(d)().write(y,s)&&l.push(y)}else s&&s.messages&&s.messages.push(new te("layer:unsupported",`Layers (${d.title}, ${d.id}) of type '${d.declaredClass}' cannot be persisted in the ground`,{layer:d}))})),t.layers=l}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return $x(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await fe(()=>import("./ElevationQuery.91d673b8.js"),[]);bi(t);const s=new i,l=this.layers.filter(cM).toArray();return s.queryAll(l,e,t)}async createElevationSampler(e,t){await this.load({signal:t==null?void 0:t.signal});const{ElevationQuery:i}=await fe(()=>import("./ElevationQuery.91d673b8.js"),[]);bi(t);const s=new i,l=this.layers.filter(cM).toArray();return s.createSamplerAll(l,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:ie(this.surfaceColor),navigationConstraint:ie(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new w5({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,i){const s=t&&t.origin||"web-scene",l=t&&t.portal||null,d=t&&t.url||null;return fe(()=>import("./layersCreator.eb3cd633.js"),["assets/layersCreator.eb3cd633.js","assets/lazyLayerLoader.0727f24a.js","assets/portalLayers.ba65dd67.js","assets/layersLoader.10f1601e.js","assets/jsonContext.0f34a0dd.js"]).then(({populateOperationalLayers:y})=>{bi(i);const g=[];if(e.layers&&Array.isArray(e.layers)){const x={context:{origin:s,url:d,portal:l,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};g.push(y(this.layers,e.layers,x))}return qi(g)}).then(()=>{})}};function Ioe(e){return e&&"createElevationSampler"in e}function cM(e){return e.type==="elevation"||Ioe(e)}v([_({json:{read:!1}})],Uo.prototype,"layers",null),v([Ee("layers")],Uo.prototype,"writeLayers",null),v([_({readOnly:!0})],Uo.prototype,"resourceInfo",void 0),v([_({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ft,read:{reader:gf,source:"transparency"},write:{writer:(e,t)=>{t.transparency=Cv(e)},target:"transparency"}}})],Uo.prototype,"opacity",void 0),v([_({type:Je,json:{type:[Ft],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Uo.prototype,"surfaceColor",void 0),v([_({type:Nm,json:{write:!0}})],Uo.prototype,"navigationConstraint",void 0),Uo=w5=v([H("esri.Ground")],Uo);const ev=Uo;function Toe(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&((t=e==null?void 0:e.capabilities)==null?void 0:t.operations)&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const pM=Me.getLogger("esri.support.basemapUtils");function Eoe(){return{}}function Aoe(e){for(const t in e){const i=e[t];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete e[t]}}function koe(e,t){let i;if(typeof e=="string"){if(!(e in m5)){const s=Object.entries(m5).filter(([l,d])=>vt.apiKey&&!d.classic||!vt.apiKey&&d.classic&&!d.deprecated).map(([l])=>`"${l}"`).join(", ");return pM.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`),null}t&&(i=t[e]),i||(i=Qg.fromId(e),t&&(t[e]=i))}else i=ni(Qg,e);return i!=null&&i.destroyed&&(pM.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function Ooe(e){return!!(e!=null&&e.baseLayers.concat(e.referenceLayers).some(xR))}function xR(e){var t;if(dM(e.url))return!0;if(e.type==="vector-tile"){for(const i in e.sourceNameToSource)if(dM((t=e.sourceNameToSource[i])==null?void 0:t.sourceUrl))return!0}return!1}function Coe(e,t){var l,d,y;if(he(t)||he(e))return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=t.baseLayers.getItemAt(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const s=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(l=i.tileInfo)==null?void 0:l.spatialReference:i.spatialReference]).filter(Boolean);return e.spatialReference?{spatialReference:(y=(d=s.find(g=>e.spatialReference.equals(g)))!=null?d:s[0])!=null?y:null,updating:!1}:{spatialReference:s[0],updating:!1}}const Poe=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function dM(e){if(!e)return!1;const t=new Ml(cs(e));return Poe.test(t.authority)}function Noe(e){return new Mp({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return i&&"tables"in i&&i.tables.includes(t)}})}const Roe=Me.getLogger("esri.support.groundUtils"),fM={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function joe(e){let t=null;if(typeof e=="string")if(e in fM){const i=fM[e];t=new ev({resourceInfo:{data:{layers:[i]}}})}else Roe.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=ni(ev,e);return t}function b5(e,t,i){let s,l;if(e)for(let d=0,y=e.length;d<y;d++){if(s=e.getItemAt(d),s[t]===i)return s;if((s==null?void 0:s.type)==="group"&&(l=b5(s.layers,t,i),l))return l}}const yM=Me.getLogger("esri.support.LayersMixin"),Loe=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Ge;const s=y=>{y.parent&&"remove"in y.parent&&y.parent.remove(y)},l=y=>{y.parent=this,this.layerAdded(y),y.type!=="elevation"&&y.type!=="base-elevation"||yM.error(`Layer 'title:${y.title}, id:${y.id}' of type '${y.type}' is not supported as an operational layer and will therefore be ignored.`)},d=y=>{y.parent=null,this.layerRemoved(y)};this.layers.on("before-add",y=>s(y.item)),this.layers.on("after-add",y=>l(y.item)),this.layers.on("after-remove",y=>d(y.item))}destroy(){const i=this.layers.removeAll();for(const s of i)this.layerRemoved(s),s.destroy();this.layers.destroy()}set layers(i){this._set("layers",Mh(i,this._get("layers")))}add(i,s){const l=this.layers;if(s=l.getNextIndex(s),i instanceof Sf){const d=i;d.parent===this?this.reorder(d,s):l.add(d,s)}else fa(i)?i.then(d=>{this.destroyed||this.add(d,s)}):yM.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,s){const l=this.layers;s=l.getNextIndex(s),i.slice().forEach(d=>{d.parent!==this?(l.add(d,s),s+=1):this.reorder(d,s)})}findLayerById(i){return b5(this.layers,"id",i)}findLayerByUid(i){return b5(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,s){return this.layers.reorder(i,s)}layerAdded(i){}layerRemoved(i){}};return v([_()],t.prototype,"layers",null),t=v([H("esri.support.LayersMixin")],t),t},SR="esri.support.TablesMixin",Foe=Me.getLogger(SR);function _5(e,t,i){if(e)for(let s=0,l=e.length;s<l;s++){const d=e.getItemAt(s);if(d[t]===i)return d;if((d==null?void 0:d.type)==="group"){const y=_5(d.tables,t,i);if(y)return y}}}const Doe=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Ge,this.tables.on("after-add",s=>{const l=s.item;l.parent&&l.parent!==this&&"tables"in l.parent&&l.parent.tables.remove(l),l.parent=this,l.type!=="feature"&&Foe.error(`Layer 'title:${l.title}, id:${l.id}' of type '${l.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",s=>{s.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const s of i)s.destroy();this.tables.destroy()}set tables(i){this._set("tables",Mh(i,this._get("tables")))}findTableById(i){return _5(this.tables,"id",i)}findTableByUid(i){return _5(this.tables,"uid",i)}};return v([_()],t.prototype,"tables",null),t=v([H(SR)],t),t};let eo=class extends Doe(Loe(Fl.EventedMixin(ze))){constructor(e){super(e),this.allLayers=new Mp({getCollections:()=>{var t,i,s;return[(t=this.basemap)==null?void 0:t.baseLayers,(i=this.ground)==null?void 0:i.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Noe(this),this.basemap=null,this.editableLayers=new Mp({getCollections:()=>[this.allLayers],itemFilterFunction:Toe}),this.ground=new ev,this._basemapCache=Eoe()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),Aoe(this._basemapCache),this._basemapCache=null}castBasemap(e){return koe(e,this._basemapCache)}castGround(e){const t=joe(e);return he(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};v([_({readOnly:!0,dependsOn:[]})],eo.prototype,"allLayers",void 0),v([_({readOnly:!0})],eo.prototype,"allTables",void 0),v([_({type:Qg})],eo.prototype,"basemap",void 0),v([mt("basemap")],eo.prototype,"castBasemap",null),v([_({readOnly:!0})],eo.prototype,"editableLayers",void 0),v([_({type:ev,nonNullable:!0})],eo.prototype,"ground",void 0),v([mt("ground")],eo.prototype,"castGround",null),eo=v([H("esri.Map")],eo);const $R=eo;Me.getLogger("esri.core.support.OwningCollection");let sf=class extends Fh(Ge){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{he(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Ge.ofType(this.itemType.Type))(e):new Ge(e)}};function mM(e,t){return{type:e,cast:IA,set(i){const s=Mh(i,this._get(t),e);s.owner=this,this._set(t,s)}}}v([_()],sf.prototype,"owner",null),sf=v([H("esri.core.support.OwningCollection")],sf);const zoe=Me.getLogger("esri.support.AnalysesCollection");let tv=class extends sf{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{he(t.item)||t.item.parent===this.owner&&(zoe.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};tv=v([H("esri.support.AnalysesCollection")],tv);let nf=class extends sf{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};v([$4({Type:ws,ensureType:ni(ws)})],nf.prototype,"itemType",void 0),nf=v([H("esri.support.GraphicsCollection")],nf);let Qa=class extends ze{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ge,this.referenceLayerViews=new Ge,this._loadingHandle=Te(()=>{var t,i;return(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap},t=>{t&&t.load().catch(()=>{})},Ot)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,i;if(this.view&&this.view.suspended)return!1;const e=(i=(t=this.view)==null?void 0:t.map)==null?void 0:i.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};v([_({constructOnly:!0})],Qa.prototype,"view",void 0),v([_({readOnly:!0})],Qa.prototype,"baseLayerViews",void 0),v([_({readOnly:!0})],Qa.prototype,"referenceLayerViews",void 0),v([_({readOnly:!0})],Qa.prototype,"suspended",null),v([_({type:Boolean,readOnly:!0})],Qa.prototype,"updating",null),Qa=v([H("esri.views.BasemapView")],Qa);const Voe=Me.getLogger("esri.views.LayerViewManager");class Goe{constructor(t,i,s){this.layer=t,this.view=i,this.layerViewImporter=s,this._controller=new AbortController,this._deferred=ua(),this._started=!1,this.done=!1,Rn(this._controller.signal,()=>{const l=new te("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(l)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:i,view:s}=this;i.emit("layerview-destroy",{view:s,layerView:t}),s.emit("layerview-destroy",{layer:i,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var l,d;if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:s}=this;this._map=s.map;try{let y,g;if(await i.load({signal:t}),"prefetchResources"in i&&await i.prefetchResources({signal:t}),i.createLayerView)y=await i.createLayerView(s,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new te("layer:view-not-supported","No layerview implementation was found");const E=await this.layerViewImporter.importLayerView(i);bi(t),y="default"in E?new E.default({layer:i,view:s}):new E({layer:i,view:s})}const x=()=>{g=ps(g),y.destroyed||y.destroy(),y.layer=null,y.parent=null,y.view=null,this.done=!0};g=Rn(t,x),bi(t);try{await y.when()}catch(E){throw x(),E}if(!((d=(l=this._map)==null?void 0:l.allLayers)==null?void 0:d.includes(i)))return x(),void this._deferred.reject(new te("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=y,i.emit("layerview-create",{view:s,layerView:y}),s.emit("layerview-create",{layer:i,layerView:y}),this.done=!0,this._deferred.resolve(y)}catch(y){i.emit("layerview-create-error",{view:s,error:y}),s.emit("layerview-create-error",{layer:i,error:y}),this.done=!0,this._deferred.reject(new te("layerview:create-error","layerview creation failed",{layer:i,error:y}))}}}let Ls=class extends Ef{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new up,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var i;const t=(i=this.view.map)==null?void 0:i.allLayers;if(t)for(const s of t)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>(he(this._workPromise)&&(this._workPromise=ua()),this.handles.remove("reschedule"),this.handles.add(Lp(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var d,y,g;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),he(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const i=new Mp({getCollections:()=>this._rootCollectionNames.map(x=>this.get(x)),getChildrenFunction:x=>x&&"layers"in x?x.layers:null});if(!i)return this._workPromise.resolve(),void(this._workPromise=null);for(const x of i)this._createLayerView(x);this._refreshCollections();for(const[x,$]of this._layerLayerViewInfoMap)i.includes(x)||(this._layerLayerViewInfoMap.delete($.layer),$.destroy());const s=i.filter(x=>x.type==="group").map(x=>x.layers),l=[(d=t==null?void 0:t.ground)==null?void 0:d.layers,(y=t==null?void 0:t.basemap)==null?void 0:y.baseLayers,(g=t==null?void 0:t.basemap)==null?void 0:g.referenceLayers,t==null?void 0:t.layers,...s].filter(x=>!!x);this.handles.add(l.map(x=>this._watchUpdatingTracking.addOnCollectionChange(()=>x,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([Eh(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Te(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),_u)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return Y(this._workPromise)||this._watchUpdatingTracking.updating||fv(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new te("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,i){if(!e||!t)return void(t&&t.removeAll());let s=0;for(const l of e){const d=this._layerLayerViewInfoMap.get(l);if(!d||!d.layerView)continue;const y=d.layerView;y.layer=l,y.parent=i,t.getItemAt(s)!==y&&t.splice(s,0,y),l.layers&&this._populateLayerViewsOwners(l.layers,y.layerViews,y),s+=1}s<t.length&&t.splice(s,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new Goe(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),i=>{var s,l;i&&(bs(i)||i.name==="cancelled:layerview-create")||Voe.error(`Failed to create layerview for layer title:'${(s=e.title)!=null?s:"no title"}', id:'${(l=e.id)!=null?l:"no id"}' of type '${e.type}'.`,{layer:e,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};v([_()],Ls.prototype,"_workPromise",void 0),v([_({readOnly:!0})],Ls.prototype,"_watchUpdatingTracking",void 0),v([_({readOnly:!0})],Ls.prototype,"_layersToLayerViews",null),v([_({readOnly:!0})],Ls.prototype,"_rootCollectionNames",null),v([_()],Ls.prototype,"layerViewImporter",void 0),v([_()],Ls.prototype,"supportsGround",void 0),v([_({readOnly:!0})],Ls.prototype,"updating",null),v([_({readOnly:!0})],Ls.prototype,"updatingRemaining",null),v([_({constructOnly:!0})],Ls.prototype,"view",void 0),Ls=v([H("esri.views.LayerViewManager")],Ls);const qoe=Ls;let ss=class extends ze{constructor(e){super(e),this.factor=1.5,this.offset=Ur(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};v([_({type:Number})],ss.prototype,"factor",void 0),v([_({nonNullable:!0})],ss.prototype,"offset",void 0),v([_()],ss.prototype,"position",void 0),v([_({type:Number,range:{min:0}})],ss.prototype,"size",void 0),v([_()],ss.prototype,"maskUrl",void 0),v([_()],ss.prototype,"maskEnabled",void 0),v([_()],ss.prototype,"overlayUrl",void 0),v([_()],ss.prototype,"overlayEnabled",void 0),v([_({readOnly:!0})],ss.prototype,"version",null),v([_({type:Boolean})],ss.prototype,"visible",void 0),ss=v([H("esri.views.Magnifier")],ss);const MR=ss;let Rm=class extends ze{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,i){return this.running=!0,new Promise((s,l)=>this._tasks.push(new gM(s,l,e,t,i)))}unshift(e,t,i){return this.running=!0,new Promise((s,l)=>this._tasks.unshift(new gM(s,l,e,t,i)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const i=Nn(t.signal);if(i&&!t.abortCallback)t.reject(pi());else{const s=i?t.abortCallback(pi()):t.callback(e);fa(s)?s.then(t.resolve,t.reject):t.resolve(s)}}catch(i){t.reject(i)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=pi();for(const t of this._tasks)if(t.abortCallback){const i=t.abortCallback(e);t.resolve(i)}else t.reject(e);this._tasks.length=0,this.running=!1}};v([_()],Rm.prototype,"running",void 0),Rm=v([H("esri.layers.support.PromiseQueue")],Rm);class gM{constructor(t,i,s,l,d){this.resolve=t,this.reject=i,this.callback=s,this.signal=l,this.abortCallback=d}}let S0=class extends ze{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};v([_()],S0.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),v([_()],S0.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),S0=v([H("esri.views.support.DebugFlags")],S0);const Uoe=new S0,Boe=Me.getLogger("esri.views.support.Scheduler");var ft;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(ft||(ft={}));const lo=0,vM=new Map([[ft.RESOURCE_CONTROLLER,lo],[ft.SLIDE,lo],[ft.STREAM_DATA_LOADER,lo],[ft.ELEVATION_QUERY,lo],[ft.TERRAIN_SURFACE,1],[ft.SURFACE_GEOMETRY_UPDATES,1],[ft.GRAPHICS_CORE,2],[ft.I3S_CONTROLLER,2],[ft.POINT_CLOUD_LAYER,2],[ft.FEATURE_TILE_FETCHER,2],[ft.OVERLAY,4],[ft.STAGE,4],[ft.GRAPHICS_DECONFLICTOR,4],[ft.FILTER_VISIBILITY,4],[ft.SCALE_VISIBILITY,4],[ft.FRUSTUM_VISIBILITY,4],[ft.POINT_OF_INTEREST_FREQUENT,6],[ft.POINT_OF_INTEREST_INFREQUENT,30],[ft.LABELER,8],[ft.FEATURE_QUERY_ENGINE,8],[ft.FEATURE_TILE_TREE,16],[ft.FEATURE_TILE_TREE_ACTIVE,lo],[ft.ELEVATION_ALIGNMENT,12],[ft.TEXT_TEXTURE_ATLAS,12],[ft.CLOUDS_GENERATOR,12],[ft.TEXTURE_UNLOAD,12],[ft.LINE_OF_SIGHT_TOOL,16],[ft.LINE_OF_SIGHT_TOOL_INTERACTIVE,lo],[ft.SNAPPING,lo],[ft.SHADOW_ACCUMULATOR,30]]);function wM(e){return vM.has(e)?vM.get(e):typeof e=="number"?e:1}var os;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(os||(os={}));const bM=6.5,_M=1,Hoe=30,xM=1e3/30,SM=100,$M=.9;var x5,Jl;(function(e){let t=class extends ze{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new R0("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new s,this._state=os.INTERACTING,this._tasks=new lh,this._runQueue=new lh,this._load=0,this._idleStateCallbacks=new lh,this._idleUpdatesStartFired=!1,this._maxReschedule=yy,this._forceTask=!1,this._debug=!1,this._debugHandle=Te(()=>Uoe.SCHEDULER_LOG_SLOW_TASKS,y=>this._debug=y,Ot);for(const y of Object.keys(ft))this.performanceInfo.tasks.set(ft[y],new R0(ft[y]));let l;const d=this;this._test={get state(){return dv(l,d._state)},set state(y){l=y},FRAME_SAFETY_BUDGET:bM,INTERACTING_BUDGET:xM,IDLE_BUDGET:SM,get availableBudget(){return d._budget.budget},usedBudget:0,getBudget:()=>d._budget,setBudget:y=>d._budget=y,updateTask:y=>this._updateTask(y),getState:y=>this._getState(y),getRuntime:y=>this._getRuntime(y),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(l=>l.remove()),this._tasks.clear(),ps(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=yy,this._schedule(),this.frame()))}))}registerTask(l,d){const y=wM(l),g=new i(this,l,d,y);return this._tasks.push(g),this.performanceInfo.tasks.has(l)||this.performanceInfo.tasks.set(l,new R0(l)),g}registerIdleStateCallbacks(l,d){const y={idleBegin:l,idleEnd:d};this._idleStateCallbacks.push(y),this.state===os.IDLE&&this._idleUpdatesStartFired&&y.idleBegin();const g=this;return{remove:()=>this._removeIdleStateCallbacks(y),set idleBegin(x){g._idleUpdatesStartFired&&(y.idleEnd(),g._state===os.IDLE&&x()),y.idleBegin=x},set idleEnd(x){y.idleEnd=x}}}get load(){return this._load}set state(l){this._state!==l&&(this._state=l,this.state!==os.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(d=>d.idleEnd())))}get state(){return he(this._test.state)?this._state:this._test.state}updateBudget(l){this._test.usedBudget=0;let d=bM,y=l.frameDuration,g=_M;switch(this.state){case os.IDLE:d=0,y=Math.max(SM,l.frameDuration),g=Hoe;break;case os.INTERACTING:y=Math.max(xM,l.frameDuration);case os.ANIMATING:}return y=y-l.elapsedFrameTime-d,this.state!==os.IDLE&&y<_M&&!this._forceTask?(this._forceTask=!0,!1):(y=Math.max(y,g),this._budget.reset(y,this.state),this._maxReschedule=yy,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case os.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(l=>l.idleBegin())),this._runIdle();break;case os.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(l){this._idleUpdatesStartFired&&l.idleEnd(),this._idleStateCallbacks.removeUnordered(l)}removeTask(l){this._tasks.removeUnordered(l),this._runQueue.removeUnordered(l)}_updateTask(l){this._tasks.forAll(d=>{d.name===l&&d.setPriority(l)})}_getState(l){if(this._runQueue.some(y=>y.name===l))return Jl.SCHEDULED;let d=Jl.IDLE;return this._tasks.forAll(y=>{y.name===l&&y.needsUpdate&&(y.schedulePriority<=1?d=Jl.READY:d!==Jl.READY&&(d=Jl.WAITING))}),d}_getRuntime(l){let d=0;return this._tasks.forAll(y=>{y.name===l&&(d+=y.runtime)}),d}_resetRuntimes(){this._tasks.forAll(l=>l.runtime=0)}_getRunning(){const l=new Map;if(this._tasks.forAll(y=>{y.needsUpdate&&l.set(y.name,(l.get(y.name)||0)+1)}),l.size===0)return null;let d="";return l.forEach((y,g)=>{d+=y>1?` ${y}x ${g}`:` ${g}`}),d}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const l=this._tasks.reduce((d,y)=>y.needsUpdate?++d:d,0);this._load=this._load*$M+l*(1-$M)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(l=>!!l.needsUpdate||(l.schedulePriority=l.basePriority,!1)),this._tasks.forAll(l=>{l.basePriority===lo&&l.needsUpdate&&!this._runQueue.includes(l)&&this._runQueue.unshift(l)});this._runQueue.length===0;){let l=!1,d=0;if(this._tasks.forAll(y=>{y.needsUpdate&&y.schedulePriority!==0&&y.basePriority!==lo&&(l=!0,d=Math.max(d,y.basePriority),y.schedulePriority===1?(y.schedulePriority=0,this._runQueue.push(y)):--y.schedulePriority)}),!l)return this.updating=!1,!1;this._maxReschedule===yy&&(this._maxReschedule=d),--this._maxReschedule}return this.updating=!0,!0}_run(){const l=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const d=this._budget.now(),y=this._runQueue.pop();this._budget.resetProgress();try{y.task.runTask(this._budget)}catch(x){Boe.error(`Exception in task "${y.name}"`,x)}y.schedulePriority=y.basePriority;const g=this._budget.now()-d;if(y.runtime+=g,this._frameTaskTimes.set(y.priority,this._frameTaskTimes.get(y.priority)+g),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",y.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(x=>x.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-l)}while(this._schedule());this.updating=this._tasks.some(d=>d.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-l)}_startFrameTaskTimes(){for(const l of Object.keys(ft))this._frameTaskTimes.set(ft[l],0)}_recordFrameTaskTimes(l){this._frameTaskTimes.forEach((d,y)=>this.performanceInfo.tasks.get(y).record(d)),this.performanceInfo.total.record(l)}get test(){return this._test}};v([_()],t.prototype,"updating",void 0),t=v([H("esri.views.support.Scheduler")],t),e.Scheduler=t;let i=class extends ze{constructor(l,d,y,g){super({}),this._scheduler=l,this.name=d,this._basePriority=g,this.runtime=0,this._queue=new Rm,this._handles=new Or,this.schedulePriority=this._basePriority,this.task=Y(y)?y:this._queue,this._handles.add(Ws(()=>this.task.running,()=>l.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(IR),this._scheduler.removeTask(this),this.schedule=S5.schedule,this.reschedule=S5.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(l){this.name=l;const d=wM(l);this._basePriority!==lo&&this.schedulePriority===0||(this.schedulePriority=d),this._basePriority=d}get priority(){return this.name}set priority(l){this.setPriority(l)}get needsUpdate(){return this.updating||this.task.running}schedule(l,d,y){return this._queue.push(l,d,y)}reschedule(l,d,y){return this._queue.unshift(l,d,y)}processQueue(l){this._queue.runTask(l)}};v([_({constructOnly:!0})],i.prototype,"task",void 0),v([_({readOnly:!0})],i.prototype,"updating",null),i=v([H("esri.views.support.SchedulerTask")],i);class s{constructor(){this._begin=typeof performance!="undefined"?performance.now():0,this._budget=0,this._state=os.IDLE,this._didWork=!1,this._enabled=!0}run(d){return!this.done&&(d()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(d){this._enabled=d}reset(d,y){this._begin=this.now(),this._budget=d,this._state=y,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=s})(x5||(x5={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Jl||(Jl={}));const IR=(()=>{const e=new x5.Budget;return e.enabled=!1,e})();class Woe{remove(){}processQueue(){}schedule(t,i,s){try{if(Nn(i)){const l=pi();return s?Promise.resolve(s(l)):Promise.reject(l)}return Nb(t(IR))}catch(l){return Promise.reject(l)}}reschedule(t,i,s){return this.schedule(t,i,s)}}const S5=new Woe,yy=Number.MAX_SAFE_INTEGER;let $0=class extends ze{constructor(e,t){var i;super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i=t==null?void 0:t.registerTask(ft.TEXTURE_UNLOAD))!=null?i:S5}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,i){const s=this.makeUid(e);let l=this._textureRequests.get(s);return l||(l={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:i},this._stage&&(this._stage.add(l.texture),this._stage.loadImmediate(l.texture)),this._textureRequests.set(s,l)),l.referenceCount++,{uid:s,texture:l.texture,release:()=>this._release(s)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return Y(t)?`${e}.${t}px`:e}};v([_()],$0.prototype,"_frameTask",void 0),v([_()],$0.prototype,"updating",null),$0=v([H("esri.views.3d.support.TextureCollection")],$0);var MM;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(MM||(MM={}));const TR=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],ER={};function AR(e){return!!ER[e]}function Joe(e){for(const t of e)if(!AR(t))return!1;return!0}TR.forEach(e=>{ER[e]=!0});class Koe{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:i,priority:s},l)=>this.inputManager.installHandlers(l,[i],s))}disconnect(){this.inputManager&&this.handlers.forEach((t,i)=>this.inputManager.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,i,s,l){const d=Array.isArray(t)?t:t.split(",");if(!Joe(d))return d.some(AR)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let y,g;Array.isArray(i)?g=i:(y=i,g=[]),typeof s=="function"?y=s:l=s,l=l!=null?l:Al.DEFAULT;const x=this._createUniqueGroupName(),$=new Yoe(this.view,d,g,y);this.handlers.set(x,{handler:$,priority:l});for(const E of d){const O=this.handlerCounts.get(E)||0;this.handlerCounts.set(E,O+1)}return this.inputManager&&this.inputManager.installHandlers(x,[$],l),{remove:()=>this._removeHandler(x,d)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,i){if(this.handlers.has(t)){this.handlers.delete(t);for(const s of i){const l=this.handlerCounts.get(s);l===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",s):l===1?this.handlerCounts.delete(s):this.handlerCounts.set(s,l-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class Yoe extends Bi{constructor(t,i,s,l){super(!0),this.view=t;for(const d of i)switch(d){case"click":this.registerIncoming("click",s,y=>l(this._wrapClick(y)));break;case"double-click":this.registerIncoming("double-click",s,y=>l(this._wrapDoubleClick(y)));break;case"immediate-click":this.registerIncoming("immediate-click",s,y=>l(this._wrapImmediateClick(y)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",s,y=>l(this._wrapImmediateDoubleClick(y)));break;case"hold":this.registerIncoming("hold",s,y=>l(this._wrapHold(y)));break;case"drag":this.registerIncoming("drag",s,y=>{const g=this._wrapDrag(y);g&&l(g)});break;case"key-down":this.registerIncoming("key-down",s,y=>l(this._wrapKeyDown(y)));break;case"key-up":this.registerIncoming("key-up",s,y=>l(this._wrapKeyUp(y)));break;case"pointer-down":this.registerIncoming("pointer-down",s,y=>l(this._wrapPointer(y,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",s,y=>l(this._wrapPointer(y,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",s,y=>l(this._wrapPointer(y,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",s,y=>l(this._wrapPointerDrag(y)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",s,y=>l(this._wrapMouseWheel(y)));break;case"pointer-enter":this.registerIncoming("pointer-enter",s,y=>l(this._wrapPointer(y,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",s,y=>l(this._wrapPointer(y,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",s,y=>{l(this._wrapGamepad(y))});break;case"focus":this.registerIncoming("focus",s,y=>{l(this._wrapFocus(y))});break;case"blur":this.registerIncoming("blur",s,y=>{l(this._wrapBlur(y))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:i=>t.async(i),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g,eventId:x}=t.data,{cancelable:$,timestamp:E}=t;return{type:"click",pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:E,screenPoint:Ur(d,y),mapPoint:this._getMapPoint(d,y),eventId:x,cancelable:$,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g,eventId:x}=t.data,{cancelable:$,timestamp:E}=t;return{type:"double-click",pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:E,mapPoint:this._getMapPoint(d,y),eventId:x,cancelable:$,stopPropagation:()=>t.stopPropagation(),async:O=>t.async(O),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g,eventId:x}=t.data,$=g.pointerId,{cancelable:E,timestamp:O}=t;return{type:"immediate-click",pointerId:$,pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:O,mapPoint:this._getMapPoint(d,y),eventId:x,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g,eventId:x}=t.data,$=g.pointerId,{cancelable:E,timestamp:O}=t;return{type:"immediate-double-click",pointerId:$,pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:O,mapPoint:this._getMapPoint(d,y),eventId:x,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:P=>t.async(P),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:i,button:s,buttons:l,x:d,y,native:g}=t.data,{cancelable:x,timestamp:$}=t;return{type:"hold",pointerType:i,button:s,buttons:l,x:d,y,native:g,timestamp:$,mapPoint:this._getMapPoint(d,y),cancelable:x,stopPropagation:()=>t.stopPropagation(),async:E=>t.async(E),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,i){return this.view.toMap(Ur(t,i),{exclude:[]})}_wrapDrag(t){const i=t.data,{x:s,y:l}=i.center,{action:d,pointerType:y,button:g}=i;if(d==="start"&&(this.latestDragStart=i),!this.latestDragStart)return;const x=i.pointer.native,$=i.buttons,{cancelable:E,timestamp:O}=t,P={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return d==="end"&&(this.latestDragStart=void 0),{type:"drag",action:d,x:s,y:l,origin:P,pointerType:y,button:g,buttons:$,radius:i.radius,angle:QE(i.angle),native:x,timestamp:O,cancelable:E,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:i,repeat:s,native:l}=t.data,{cancelable:d,timestamp:y}=t;return{type:"key-down",key:i,repeat:s,native:l,timestamp:y,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:i,native:s}=t.data,{cancelable:l,timestamp:d}=t;return{type:"key-up",key:i,native:s,timestamp:d,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:y=>t.async(y),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,i){const{x:s,y:l,button:d,buttons:y,native:g,eventId:x}=t.data,$=g.pointerId,E=g.pointerType,{cancelable:O,timestamp:P}=t;return{type:i,x:s,y:l,pointerId:$,pointerType:E,button:d,buttons:y,native:g,timestamp:P,eventId:x,cancelable:O,stopPropagation:()=>t.stopPropagation(),async:R=>t.async(R),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:i,y:s,buttons:l,native:d,eventId:y}=t.data.currentEvent,{button:g}=t.data.startEvent,x=t.data.startEvent.native.pointerId,$=t.data.startEvent.native.pointerType,E=t.data.action,O={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:P,timestamp:R}=t;return{type:"pointer-drag",x:i,y:s,pointerId:x,pointerType:$,button:g,buttons:l,action:E,origin:O,native:d,timestamp:R,eventId:y,cancelable:P,stopPropagation:()=>t.stopPropagation(),async:L=>t.async(L),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:i,data:s,timestamp:l}=t,{x:d,y,deltaY:g,native:x}=s;return{type:"mouse-wheel",x:d,y,deltaY:g,native:x,timestamp:l,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:$=>t.async($),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:i,state:s,device:l}=t.data,{cancelable:d,timestamp:y}=t,{buttons:g,axes:x}=s;return{type:"gamepad",device:l,timestamp:y,action:i,buttons:g,axes:x,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:$=>t.async($),preventDefault:()=>t.preventDefault()}}}var Lf,IM,TM;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Lf||(Lf={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(IM||(IM={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(TM||(TM={}));const Xoe=Me.getLogger("esri.views.interactive.interactiveToolUtils");function Zoe(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return Xoe.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.visible=!1,i.active&&(i.view.activeTool=null),i.destroy()})]}function iv(e){return e.visible&&e.getEditableFlag(Lf.USER)&&e.getEditableFlag(Lf.MANAGER)}function to(e){return Ur(e.x,e.y)}function kR(e,t){const i=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Ur(t.clientX-i.left,t.clientY-i.top)}function EM(e,t){return t instanceof Event?kR(e,t):to(t)}function AM(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class Qoe{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,i){const s=()=>t.stopPropagation();switch(t.type){case"pointer-move":kM(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(s(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!OM(t))break;const l=to(t),d=this._intersect(l,t.pointerType,i.forEachTool);if(he(d))break;const y=this._findToolAndManipulatorByKey(d,i.forEachTool,my),g=ho(y,$=>$.manipulator),x=ho(y,$=>$.tool);!(Y(g)&&Y(x)&&g.interactive)||g.grabbable&&g.grabbableForEvent(t)||!g.grabbing||g.dragging||this._ungrabManipulatorBeforeDragging(g,x,t),Y(g)&&g.interactive&&g.grabbable&&g.grabbableForEvent(t)&&!g.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:d,start:l,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool!==d.tool&&(this._currentlyActiveTool=i.activeTool,this._revertToActiveTool=!0,i.setActiveTool(d.tool)),g.grabbing=!0,g.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:l}),s());break}case"pointer-up":this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!OM(t))break;const l=this._grabbedManipulators.get(t.pointerId),d=this._draggedManipulators.get(t.pointerId),y=ho(l||d,({key:E})=>E),g=this._findManipulatorByKey(y,i.forEachTool);if(he(g))break;const x=to(t);x.x=Kr(x.x,0,i.view.width),x.y=Kr(x.y,0,i.view.height);const $=(l||d).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(g.dragging=!0,d?g.events.emit("drag",{action:"update",start:$,screenPoint:x}):g.events.emit("drag",{action:"start",start:$,screenPoint:x,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:y,start:$}));break;case"end":g.dragging=!1,d&&g.events.emit("drag",{action:"end",start:$,screenPoint:x}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}s();break}case"immediate-click":{const l=to(t),d=this._intersect(l,t.pointerType,i.forEachTool),y=this._findToolAndManipulatorByKey(d,i.forEachTool,my);if(eae(t)||i.forEachTool(E=>{if((!Y(y)||y.tool!==E||E.automaticManipulatorSelection)&&E.manipulators){let O=!1;E.manipulators.forEach(({manipulator:P})=>{P.selected&&(P.selected=!1,O=!0)}),O&&E.manipulatorSelectionChanged&&E.manipulatorSelectionChanged()}}),he(y))break;const{manipulator:g,tool:x}=y;if(!g.interactive)break;g.selectable&&x.automaticManipulatorSelection&&(g.selected=!g.selected,x.manipulatorSelectionChanged&&x.manipulatorSelectionChanged());const $=t.native.shiftKey;g.events.emit("immediate-click",{screenPoint:l,button:t.button,pointerType:t.pointerType,shiftKey:$,stopPropagation:s});break}case"click":{const l=to(t),d=this._intersect(l,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(d,i.forEachTool);if(he(y)||!y.interactive)break;const g=t.native.shiftKey;y.events.emit(t.type,{screenPoint:l,button:t.button,pointerType:t.pointerType,shiftKey:g}),s();break}case"double-click":{const l=to(t),d=this._intersect(l,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(d,i.forEachTool);if(he(y)||!y.interactive)break;const g=t.native.shiftKey;y.events.emit("double-click",{screenPoint:l,button:t.button,pointerType:t.pointerType,shiftKey:g,stopPropagation:s});break}case"immediate-double-click":{const l=to(t),d=this._intersect(l,t.pointerType,i.forEachTool),y=this._findManipulatorByKey(d,i.forEachTool);if(he(y)||!y.interactive)break;const g=t.native.shiftKey;y.events.emit("immediate-double-click",{screenPoint:l,button:t.button,pointerType:t.pointerType,shiftKey:g,stopPropagation:s});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(t,i,s){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:s.pointerType,screenPoint:to(s)}),this._grabbedManipulators.forEach(({key:l},d)=>{l.tool===i&&i.manipulators.findById(l.manipulatorId)===t&&this._grabbedManipulators.delete(d)})}_handlePointerEnd(t,i){const s=ho(this._grabbedManipulators.get(t.pointerId),({key:d})=>d),l=this._findManipulatorByKey(s,i.forEachTool);Y(l)&&!l.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(i.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),l.grabbing&&(l.grabbing=!1,l.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:to(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,i){let s=null;return fv(t,({key:l})=>{const d=this._findManipulatorByKey(l,i);return!!(Y(d)&&d.interactive&&"cursor"in d&&d.cursor)&&(s=d.cursor,!0)}),s}_onFocusChange(t){this._updateCursor(t),this._updateFocusedManipulatorTools(t)}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set;this._grabbedManipulators.forEach(({key:{tool:s}})=>{i.add(s)}),this._hoveredManipulators.forEach(({key:{tool:s}})=>{i.add(s)}),t(s=>{s.hasFocusedManipulators=i.has(s)})}clearPointers(t,i,s=!0,l){const d=y=>y.tool===t&&(he(l)||y.manipulatorId===l);this._grabbedManipulators.forEach(({key:y,pointerType:g},x)=>{if(d(y)){this._grabbedManipulators.delete(x);const $=this._findManipulatorByKey(y,i);Y($)&&($.grabbing=!1,$.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:g}))}}),this._draggedManipulators.forEach(({key:y},g)=>{if(d(y)){this._draggedManipulators.delete(g);const x=this._findManipulatorByKey(y,i);Y(x)&&(x.dragging=!1,x.events.emit("drag",{action:"cancel"}))}}),s&&this._hoveredManipulators.forEach(({key:y},g)=>{if(d(y)){this._hoveredManipulators.delete(g);const x=this._findManipulatorByKey(y,i);Y(x)&&(x.hovering=!1)}}),this._onFocusChange(i)}_intersect(t,i,s){let l=null;return s(d=>{if(d.manipulators==null||!iv(d))return!1;const y=d.manipulators.intersect(t,i);return!he(y)&&(l={manipulatorId:y.id,tool:d},!0)}),l}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,s)=>{this._updateHoveredStateForPointerAtScreenPosition(Ur(i.x,i.y),s,i.pointerType,t)})}handleHoverEvent(t,i){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!kM(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(to(t),t.pointerId,t.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(t,i,s,l){const d=this._intersect(t,s,l);let y=this._findManipulatorByKey(d,l);const g=ho(this._hoveredManipulators.get(i),({key:$})=>$),x=this._findManipulatorByKey(g,l);Y(y)&&!y.interactive&&(y=null),x!==y&&(Y(x)&&(x.hovering=!1),Y(y)?(y.hovering=!0,this._hoveredManipulators.set(i,{key:d})):this._hoveredManipulators.delete(i),this._onFocusChange(l))}_findManipulatorByKey(t,i){return this._findToolAndManipulatorByKey(t,i,my)?my.manipulator:null}_findToolAndManipulatorByKey(t,i,s){return he(t)?null:(s.tool=null,s.manipulator=null,i(l=>{if(l!==t.tool||l.manipulators==null||!iv(l))return!1;const d=l.manipulators.findById(t.manipulatorId);return!!Y(d)&&(s.manipulator=d,s.tool=l,!0)}),s.manipulator?s:null)}}function kM(e){return e==="mouse"}function OM(e){return e.pointerType!=="mouse"||e.button===0}function eae(e){return!!e.native.shiftKey}const my={manipulator:null,tool:null},tae=Me.getLogger("esri.views.ToolViewManager"),CM="attached",tb="tools";let Bo=class extends Ef{constructor(e){super(e),this._manipulatorState=new Qoe,this.tools=new Ge,this.cursor=null,this._forEachTool=t=>{for(const i of this.tools.items)if(t(i))return}}initialize(){this.handles.add([this.view.on(TR,e=>{this._handleInputEvent(e)},Al.TOOL),...Zoe(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(Y(e)&&!this.view.ready)return void tae.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),Y(t)&&t.deactivate(),Y(e)&&e.activate(),this._removeIncompleteTools(e);const i=he(this.activeTool);for(const s of this.tools){s.setEditableFlag(Lf.MANAGER,i||s===this.activeTool);const l=iv(s);!i&&l||this._manipulatorState.clearPointers(s,this._forEachTool,!l)}this._updateCursor()}get updating(){var e,t;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||((t=(e=this.textures)==null?void 0:e.updating)!=null?t:!1)}attach(){this.view.type==="3d"?(this._set("textures",new $0(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([Te(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),Rp(()=>this._set("textures",Vs(this.textures)))],CM)):this.handles.add(Te(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){Y(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(CM)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:i})=>e(i,t))})}_handleInputEvent(e){let t=!1;const i={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};Y(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(s=>{!t&&s.visible&&s.handleInputEvent(i)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:s=>{this.activeTool=s},view:this.view}),!t&&Y(this.activeTool)&&this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(tb),this._forEachTool(e=>{if(e instanceof ze){const t=Te(()=>[e.cursor,e.visible,e.editable],()=>{iv(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,tb)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:i})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,i)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),tb)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool(i=>!(!Y(i.cursor)||!i.visible||!he(e)&&i.preferManipulatorCursor)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter(t=>(he(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};v([_({constructOnly:!0,nonNullable:!0})],Bo.prototype,"view",void 0),v([_({readOnly:!0,nonNullable:!0})],Bo.prototype,"textures",void 0),v([_({value:null})],Bo.prototype,"activeTool",null),v([_({readOnly:!0,type:Ge})],Bo.prototype,"tools",void 0),v([_({readOnly:!0})],Bo.prototype,"cursor",void 0),v([_({readOnly:!0})],Bo.prototype,"updating",null),Bo=v([H("esri.views.ToolViewManager")],Bo);const iae=Bo;let Ec=class extends ze{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":rae.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return sae[this.deviceType]}};v([_({nonNullable:!0,readOnly:!0})],Ec.prototype,"nativeIndex",void 0),v([_({type:String,readOnly:!0})],Ec.prototype,"deviceType",null),v([_({type:Number,readOnly:!0})],Ec.prototype,"axisThreshold",null),Ec=v([H("esri.views.input.gamepad.GamepadInputDevice")],Ec);const rae=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),sae={standard:.15,spacemouse:.025,unknown:0},Mx=Ec;let M0=class extends ze{constructor(...e){super(...e),this.devices=new Ge,this.enabledFocusMode="document"}};v([_({type:Ge.ofType(Mx),readOnly:!0})],M0.prototype,"devices",void 0),v([_({type:["document","view","none"]})],M0.prototype,"enabledFocusMode",void 0),M0=v([H("esri.views.input.gamepad.GamepadSettings")],M0);const nae=M0;let jm=class extends ze{constructor(){super(...arguments),this.gamepad=new nae}};v([_({readOnly:!0})],jm.prototype,"gamepad",void 0),jm=v([H("esri.views.input.Input")],jm);const oae=jm;let el=class extends ze{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};v([_({type:Boolean,nonNullable:!0})],el.prototype,"enabled",void 0),v([_({type:Mx})],el.prototype,"device",void 0),v([_({type:["pan","zoom"],nonNullable:!0})],el.prototype,"mode",void 0),v([_({type:["forward-down","forward-up"],nonNullable:!0})],el.prototype,"tiltDirection",void 0),v([_({type:Number,nonNullable:!0})],el.prototype,"velocityFactor",void 0),el=v([H("esri.views.navigation.gamepad.GamepadSettings")],el);const OR=el;let Eu=class extends ze{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new OR,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};v([_({type:Boolean})],Eu.prototype,"browserTouchPanEnabled",void 0),v([_({type:OR,nonNullable:!0})],Eu.prototype,"gamepad",void 0),v([_({type:Boolean})],Eu.prototype,"momentumEnabled",void 0),v([_({type:Boolean})],Eu.prototype,"mouseWheelZoomEnabled",void 0),Eu=v([H("esri.views.navigation.Navigation")],Eu);const CR=Eu;var PM;function aae(e){const t=e.url&&jl(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&Y(t)&&t.serverType==="ImageServer")&&PR(e)&&e.heightModelInfo?e.heightModelInfo:lae(e)?d2.deriveUnitFromSR(hae,e.spatialReference):null}function PR(e){return"heightModelInfo"in e}function NR(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function lae(e){return NR(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):RR(e)}function uae(e){return e.layers!=null||RR(e)||NR(e)||PR(e)}function RR(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(PM||(PM={}));const hae=new d2({heightModel:"gravity-related-height"});var rv;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(rv||(rv={}));let $5,ib=null;async function cae(e){ib||(ib=fe(()=>import("./geometryServiceUtils.3a330c5c.js"),[]).then(t=>$5=t)),await ib,bi(e)}async function jR(e,t,i,s){if(!e)return null;const l=e.spatialReference;return Ah()||Rl(l,t)?Dh(e,t):$5?$5.projectGeometry(e,t,i,s):(await Promise.race([cae(s),kh(s)]),jR(e,t,i,s))}let Rt=class extends ze{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=bb(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return Y(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return he(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var i,s,l,d;const e=(i=this.map)==null?void 0:i.call(this),t=[];return Y(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(l=e==null?void 0:e.ground)==null?void 0:l.layers},{parent:e==null?void 0:e.basemap,layers:(d=e==null?void 0:e.basemap)==null?void 0:d.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var l;if(this.suspended)return(l=this._get("_spatialReferenceTask"))!=null?l:{updating:!1};const{layers:e,updating:t}=this._allLayers;let i=null;for(const d of e){const y=this._getSupportedSpatialReferences(d);if(y.length>0){const g=this._narrowDownSpatialReferenceCandidates(i,y);Y(g)&&(i=g)}if(Y(i)&&i.length===1)break}if(t&&(he(i)||i.length!==1))return{updating:!0};const s=this._pickSpatialReferenceCandidate(i);return{spatialReference:Y(s)?s.spatialReference:null,viewingMode:Y(s)?s.viewingMode:null,updating:!1}}get _tileInfoTask(){var i,s,l,d,y,g,x,$;if(!this.required.tileInfo)return(i=this._get("_tileInfoTask"))!=null?i:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(l=(s=this.map)==null?void 0:s.call(this))==null?void 0:l.basemap,layers:(g=(y=(d=this.map)==null?void 0:d.call(this))==null?void 0:y.basemap)==null?void 0:g.baseLayers},{layers:($=(x=this.map)==null?void 0:x.call(this))==null?void 0:$.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const E=e[0].tileInfo;return{tileInfo:E&&E.spatialReference.equals(this.spatialReference)?E:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var i,s,l,d;if(!this.required.heightModelInfo||this.suspended&&((i=this._get("_heightModelInfoTask"))==null?void 0:i.heightModelInfo))return(s=this._get("_heightModelInfoTask"))!=null?s:{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const y of e)if(uae(y)){const g=aae(y);if(g)return{heightModelInfo:g,vcsWkid:(l=y.spatialReference)==null?void 0:l.vcsWkid,latestVcsWkid:(d=y.spatialReference)==null?void 0:d.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){var s,l;if(this.suspended||!this.required.extent)return(s=this._get("_extentCandidatesTask"))!=null?s:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,i=[];for(const d of e.layers){const y="fullExtents"in d&&d.fullExtents||(Y(d.fullExtent)?[d.fullExtent]:[]),g=this.requiresExtentInSpatialReference?null:y[0],x=(l=y.find($=>$.spatialReference.equals(this.spatialReference)))!=null?l:g;if(x)return{candidates:[{extent:x,layer:d}],updating:!1};if(this._getSupportedSpatialReferences(d).length>0)for(const $ of y)i.push({extent:$,layer:d})}return{candidates:i,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(he(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:Y(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(Y(this._projectExtentTask.task)&&(this._projectExtentTask.task=bb(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:bT(async l=>{try{const d=await jR(i.extent,s,i.layer.portalItem,l);this._projectExtentTask={...this._projectExtentTask,task:null,output:d}}catch{if(Nn(l))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(he(e))return t;const i=[],s=(l,d)=>Y(l)?Y(d)?l===d&&l:l:d;for(const l of e)for(const d of t){if(!l.spatialReference.equals(d.spatialReference))continue;const y=s(l.viewingMode,d.viewingMode);if(y!==!1){i.push({spatialReference:l.spatialReference,viewingMode:y});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return he(e)||e.length<1?Y(t)?{spatialReference:t,viewingMode:null}:null:(Y(t)&&e.length>1&&e.some(({spatialReference:i})=>i.equals(t))&&(e=e.filter(({spatialReference:i})=>i.equals(t))),e.length>1&&e.some(({viewingMode:i})=>i!==rv.Local)&&(e=e.filter(({viewingMode:i})=>i!==rv.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const i=[];for(const s of t){const l=this.getSpatialReferenceSupport({spatialReference:s,layer:e});if(Y(l)){const d=Y(l.constraints)?l.constraints:[{spatialReference:s,viewingMode:null}];for(const{spatialReference:y,viewingMode:g}of d)(!this.requiresExtentInSpatialReference||he(this.userSpatialReference)||y.equals(this.userSpatialReference))&&i.push({spatialReference:y,viewingMode:g})}}return i}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:i})=>t.equals(i.spatialReference))||e[0]}_collectLayers(e){var i;if(this._loadMaybe((i=this.map)==null?void 0:i.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const s of e)if(this._collectCollection(s,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const i of e.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load(),"loading"):e.loadStatus:"loaded"}};v([_()],Rt.prototype,"required",void 0),v([_({constructOnly:!0})],Rt.prototype,"map",void 0),v([_({constructOnly:!0})],Rt.prototype,"getSpatialReferenceSupport",void 0),v([_()],Rt.prototype,"defaultSpatialReference",void 0),v([_()],Rt.prototype,"userSpatialReference",void 0),v([_()],Rt.prototype,"sourcePreloadCount",void 0),v([_()],Rt.prototype,"priorityCollection",void 0),v([_()],Rt.prototype,"requiresExtentInSpatialReference",void 0),v([_()],Rt.prototype,"suspended",void 0),v([_({readOnly:!0})],Rt.prototype,"ready",null),v([_({readOnly:!0})],Rt.prototype,"heightModelInfoReady",null),v([_({readOnly:!0})],Rt.prototype,"spatialReference",null),v([_({readOnly:!0})],Rt.prototype,"extent",null),v([_({readOnly:!0})],Rt.prototype,"heightModelInfo",null),v([_({readOnly:!0})],Rt.prototype,"vcsWkid",null),v([_({readOnly:!0})],Rt.prototype,"latestVcsWkid",null),v([_({readOnly:!0})],Rt.prototype,"viewingMode",null),v([_({readOnly:!0})],Rt.prototype,"tileInfo",null),v([_({readOnly:!0})],Rt.prototype,"mapCollections",null),v([_({readOnly:!0})],Rt.prototype,"_allLayers",null),v([_({readOnly:!0})],Rt.prototype,"_spatialReferenceTask",null),v([_({readOnly:!0})],Rt.prototype,"_tileInfoTask",null),v([_({readOnly:!0})],Rt.prototype,"_heightModelInfoTask",null),v([_({readOnly:!0})],Rt.prototype,"_extentCandidatesTask",null),v([_()],Rt.prototype,"_extentTask",null),v([_()],Rt.prototype,"_projectExtentTask",void 0),Rt=v([H("esri.views.support.DefaultsFromMap")],Rt);var Lm;const gy=Me.getLogger("esri.views.View");let Ke=Lm=class extends Fh(Fl.EventedMixin(Kf(ze))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Mp({getCollections:()=>{var t,i,s;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(s=this.basemapView)==null?void 0:s.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new nf,this.analyses=new tv,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ge,this.magnifier=new MR,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new oae,this.navigation=new CR,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Koe(this),this.persistableViewModels=new Ge,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(Te(()=>this.preconditionsReady,t=>{var i,s;t?(this._currentSpatialReference=this.spatialReference,Lm.views.add(this)):(this._currentSpatialReference=null,Lm.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((i=this.layerViewManager)==null||i.clear(),(s=this.toolViewManager)==null||s.detach(),Y(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(this._startup(),Y(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},$p))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,Tf(()=>this.ready)))),this.basemapView=new Qa({view:this}),this.layerViewManager=new qoe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new iae({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Te(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),Te(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Te(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Te(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var s;const i=((s=this.map)==null?void 0:s.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(Y(e))return;const l=Rp(()=>e=bb(e));e=bT(async d=>{try{await c4(this.spatialReferenceWarningDelay,null,d)}catch{return}finally{e=null}gy.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(l,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Vs(this.graphics),this.analyses=Vs(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Vs(this.analysisViewManager),this.toolViewManager=Vs(this.toolViewManager),this.layerViewManager=Vs(this.layerViewManager),this.basemapView=Vs(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e==null||e.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return gy.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Rt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||vs.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((e=this.defaultsFromMap)!=null&&e.ready)||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e!=null&&e.destroyed&&(gy.warn("#map","The provided map is already destroyed",{map:e}),e=null),vs.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var t,i;let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&((i=(t=this.defaultsFromMap)==null?void 0:t.required)==null?void 0:i.heightModelInfo)&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!dr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return Y(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,i;return(i=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(e=this.defaultsFromMap)==null?void 0:e.heightModelInfo)!=null?i:null}importLayerView(e){throw new te("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return Y(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&gy.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Ws(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Ke.views=new Ge,v([_()],Ke.prototype,"_userSpatialReference",void 0),v([Be("toolViewManager.activeTool")],Ke.prototype,"activeTool",void 0),v([_({readOnly:!0})],Ke.prototype,"allLayerViews",void 0),v([_()],Ke.prototype,"groundView",void 0),v([_()],Ke.prototype,"animation",void 0),v([_()],Ke.prototype,"basemapView",void 0),v([_({readOnly:!0})],Ke.prototype,"_defaultsFromMapSettings",null),v([_()],Ke.prototype,"defaultsFromMap",null),v([_()],Ke.prototype,"fatalError",void 0),v([_({type:xt})],Ke.prototype,"extent",void 0),v([_(mM(nf,"graphics"))],Ke.prototype,"graphics",void 0),v([_(mM(tv,"analyses"))],Ke.prototype,"analyses",void 0),v([_({readOnly:!0,type:d2})],Ke.prototype,"heightModelInfo",null),v([_({readOnly:!0})],Ke.prototype,"interacting",null),v([_({readOnly:!0})],Ke.prototype,"navigating",void 0),v([_({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ke.prototype,"preconditionsReady",null),v([_({readOnly:!0})],Ke.prototype,"typeSpecificPreconditionsReady",void 0),v([_({type:Ge,readOnly:!0})],Ke.prototype,"layerViews",void 0),v([_({type:MR})],Ke.prototype,"magnifier",void 0),v([_({value:null,type:$R})],Ke.prototype,"map",null),v([_()],Ke.prototype,"padding",void 0),v([_({readOnly:!0})],Ke.prototype,"ready",void 0),v([_({type:Ye})],Ke.prototype,"spatialReference",null),v([_()],Ke.prototype,"spatialReferenceWarningDelay",void 0),v([_()],Ke.prototype,"stationary",null),v([_({readOnly:!0})],Ke.prototype,"supportsGround",void 0),v([_({type:kr})],Ke.prototype,"timeExtent",void 0),v([Be("toolViewManager.tools")],Ke.prototype,"tools",void 0),v([_()],Ke.prototype,"toolViewManager",void 0),v([_({readOnly:!0})],Ke.prototype,"type",void 0),v([_({type:Number})],Ke.prototype,"scale",void 0),v([_({readOnly:!0})],Ke.prototype,"updating",void 0),v([_({readOnly:!0})],Ke.prototype,"initialExtentRequired",void 0),v([_({readOnly:!0})],Ke.prototype,"initialExtent",null),v([_()],Ke.prototype,"cursor",null),v([_({readOnly:!0})],Ke.prototype,"input",void 0),v([_({type:CR,nonNullable:!0})],Ke.prototype,"navigation",void 0),v([_()],Ke.prototype,"layerViewManager",void 0),v([_()],Ke.prototype,"analysisViewManager",void 0),v([_()],Ke.prototype,"width",void 0),v([_()],Ke.prototype,"height",void 0),v([_({readOnly:!0})],Ke.prototype,"resizing",void 0),v([_({value:null,readOnly:!0})],Ke.prototype,"size",null),v([_({readOnly:!0})],Ke.prototype,"suspended",void 0),v([_({readOnly:!0})],Ke.prototype,"viewEvents",void 0),v([_({readOnly:!0})],Ke.prototype,"persistableViewModels",void 0),v([_()],Ke.prototype,"_isValid",void 0),v([_()],Ke.prototype,"_readyCycleForced",void 0),v([_()],Ke.prototype,"_currentSpatialReference",void 0),Ke=Lm=v([H("esri.views.View")],Ke);const pae=Ke;let tl=class extends gg{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new te("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=fa(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};v([_({readOnly:!0})],tl.prototype,"done",null),v([_({readOnly:!0,type:String})],tl.prototype,"state",void 0),v([_()],tl.prototype,"target",void 0),tl=v([H("esri.views.ViewAnimation")],tl),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(tl||(tl={}));const M5=tl;function Uu(e,t,i,s){const l=3*e,d=3*(i-e)-l,y=1-l-d,g=3*t,x=3*(s-t)-g,$=1-g-x;function E(L){return((y*L+d)*L+l)*L}function O(L){return(($*L+x)*L+g)*L}function P(L){return(3*y*L+2*d)*L+l}function R(L,z){let V,K,ee,se,oe,ne;for(ee=L,ne=0;ne<8;ne++){if(se=E(ee)-L,Math.abs(se)<z)return ee;if(oe=P(ee),Math.abs(oe)<1e-6)break;ee-=se/oe}if(V=0,K=1,ee=L,ee<V)return V;if(ee>K)return K;for(;V<K;){if(se=E(ee),Math.abs(se-L)<z)return ee;L>se?V=ee:K=ee,ee=.5*(K-V)+V}return ee}return function(L,z=1e-6){return O(R(L,z))}}const dae=/^cubic-bezier\((.*)\)/,zs={};function fae(e){let t=zs[e]||null;if(!t){const i=dae.exec(e);if(i){const s=i[1].split(",").map(l=>parseFloat(l.trim()));s.length!==4||s.some(l=>isNaN(l))||(t=Uu.apply(Uu,s))}}return t}zs.ease=Uu(.25,.1,.25,1),zs.linear=Uu(0,0,1,1),zs.easeIn=zs["ease-in"]=Uu(.42,0,1,1),zs.easeOut=zs["ease-out"]=Uu(0,0,.58,1),zs.easeInOut=zs["ease-in-out"]=Uu(.42,0,.58,1);function kl(){return[1,0,0,1,0,0]}function yae(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function mae(e,t,i,s,l,d){return[e,t,i,s,l,d]}function gae(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:kl,clone:yae,fromValues:mae,createView:gae},Symbol.toStringTag,{value:"Module"}));function Ff(e,t){return e[0]=t[0],e[1]=t[1],e}function Gi(e,t,i){return e[0]=t,e[1]=i,e}function LR(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function Df(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function FR(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function DR(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function vae(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function wae(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function bae(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function _ae(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function xae(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function d1(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function Sae(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e}function f1(e,t){const i=t[0]-e[0],s=t[1]-e[1];return Math.sqrt(i*i+s*s)}function sv(e,t){const i=t[0]-e[0],s=t[1]-e[1];return i*i+s*s}function nv(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function zR(e){const t=e[0],i=e[1];return t*t+i*i}function VR(e,t){return e[0]=-t[0],e[1]=-t[1],e}function $ae(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function I5(e,t){const i=t[0],s=t[1];let l=i*i+s*s;return l>0&&(l=1/Math.sqrt(l),e[0]=t[0]*l,e[1]=t[1]*l),e}function GR(e,t){return e[0]*t[0]+e[1]*t[1]}function qR(e,t,i){const s=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=s,e}function Mae(e,t,i,s){const l=t[0],d=t[1];return e[0]=l+s*(i[0]-l),e[1]=d+s*(i[1]-d),e}function Iae(e,t){t=t||1;const i=2*_l()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function Tae(e,t,i){const s=t[0],l=t[1];return e[0]=i[0]*s+i[2]*l,e[1]=i[1]*s+i[3]*l,e}function uo(e,t,i){const s=t[0],l=t[1];return e[0]=i[0]*s+i[2]*l+i[4],e[1]=i[1]*s+i[3]*l+i[5],e}function Eae(e,t,i){const s=t[0],l=t[1];return e[0]=i[0]*s+i[3]*l+i[6],e[1]=i[1]*s+i[4]*l+i[7],e}function Aae(e,t,i){const s=t[0],l=t[1];return e[0]=i[0]*s+i[4]*l+i[12],e[1]=i[1]*s+i[5]*l+i[13],e}function kae(e,t,i,s){const l=t[0]-i[0],d=t[1]-i[1],y=Math.sin(s),g=Math.cos(s);return e[0]=l*g-d*y+i[0],e[1]=l*y+d*g+i[1],e}function Oae(e,t){const i=e[0],s=e[1],l=t[0],d=t[1];let y=i*i+s*s;y>0&&(y=1/Math.sqrt(y));let g=l*l+d*d;g>0&&(g=1/Math.sqrt(g));const x=(i*l+s*d)*y*g;return x>1?0:x<-1?Math.PI:Math.acos(x)}function Cae(e){return"vec2("+e[0]+", "+e[1]+")"}function Pae(e,t){return e[0]===t[0]&&e[1]===t[1]}function Nae(e,t){const i=e[0],s=e[1],l=t[0],d=t[1];return Math.abs(i-l)<=et*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-d)<=et*Math.max(1,Math.abs(s),Math.abs(d))}function Rae(e,t,i,s,l){let d=t[0]-i[0],y=t[1]-i[1];const g=(s[0]*d+s[1]*y)*(l-1);return d=s[0]*g,y=s[1]*g,e[0]=t[0]+d,e[1]=t[1]+y,e}const jae=nv,Ix=Df,Lae=FR,Fae=DR,Dae=f1,zae=sv,Vae=zR;Object.freeze(Object.defineProperty({__proto__:null,copy:Ff,set:Gi,add:LR,subtract:Df,multiply:FR,divide:DR,ceil:vae,floor:wae,min:bae,max:_ae,round:xae,scale:d1,scaleAndAdd:Sae,distance:f1,squaredDistance:sv,length:nv,squaredLength:zR,negate:VR,inverse:$ae,normalize:I5,dot:GR,cross:qR,lerp:Mae,random:Iae,transformMat2:Tae,transformMat2d:uo,transformMat3:Eae,transformMat4:Aae,rotate:kae,angle:Oae,str:Cae,exactEquals:Pae,equals:Nae,projectAndScale:Rae,len:jae,sub:Ix,mul:Lae,div:Fae,dist:Dae,sqrDist:zae,sqrLen:Vae},Symbol.toStringTag,{value:"Module"}));function di(){return[0,0]}function Gae(e){return[e[0],e[1]]}function y1(e,t){return[e,t]}function qae(e){const t=di(),i=Math.min(2,e.length);for(let s=0;s<i;++s)t[s]=e[s];return t}function Uae(e,t){return new Float64Array(e,t,2)}function UR(){return di()}function BR(){return y1(1,1)}function HR(){return y1(1,0)}function WR(){return y1(0,1)}const Bae=UR(),Hae=BR(),Wae=HR(),Jae=WR();Object.freeze(Object.defineProperty({__proto__:null,create:di,clone:Gae,fromValues:y1,fromArray:qae,createView:Uae,zeros:UR,ones:BR,unitX:HR,unitY:WR,ZEROS:Bae,ONES:Hae,UNIT_X:Wae,UNIT_Y:Jae},Symbol.toStringTag,{value:"Module"}));const JR=96,KR=39.37,Kae=180/Math.PI;function YR(e){return e.wkid?e:e.spatialReference||Ye.WGS84}function Tx(e,t){return t.type?Gi(e,t.x,t.y):Ff(e,t)}function XR(e){return Qf(e)}function of(e,t){const i=Math.max(1,t[0]),s=Math.max(1,t[1]);return Math.max(e.width/i,e.height/s)*sle(e.spatialReference)}async function I0(e,t,i,s){let l,d;if(!e||Array.isArray(e)&&!e.length)return null;if(Ge.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const g=e.every(E=>"attributes"in E),x=e.some(E=>!E.geometry);let $=e;if(g&&x&&t&&t.allLayerViews){const E=new Map;for(const L of e){const z=L.layer,V=E.get(z)||[],K=L.attributes[z.objectIdField];K!=null&&V.push(K),E.set(z,V)}const O=[];E.forEach((L,z)=>{const V=t.allLayerViews.find(K=>K.layer.id===z.id);if("queryFeatures"in V){const K=z.createQuery();K.objectIds=L,K.returnGeometry=!0,O.push(V.queryFeatures(K))}});const P=await Promise.all(O),R=[];for(const L of P)if(L&&L.features&&L.features.length)for(const z of L.features)Y(z.geometry)&&R.push(z.geometry);$=R}for(const E of $)s=await I0(E,t,i,s);return s}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")l=new He(e);else if(e instanceof Jr)l=e;else if("geometry"in e){if(e.geometry)l=e.geometry;else if(e.layer){const g=e.layer,x=t.allLayerViews.find($=>$.layer.id===g.id);if("queryFeatures"in x){const $=g.createQuery();$.objectIds=[e.attributes[g.objectIdField]],$.returnGeometry=!0;const E=await x.queryFeatures($);l=CI(E,"features",0,"geometry")}}}if(he(l)||(d=l.type==="point"?new xt({xmin:l.x,ymin:l.y,xmax:l.x,ymax:l.y,spatialReference:l.spatialReference}):l.extent,!d))return null;Ah()||Rl(d.spatialReference,i)||await kh();const y=Dh(d,i);return y?s=s?s.union(y):y:null}function Yae(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const s of e){const l=s.layer;l&&l.minScale&&l.maxScale&&(t=l.minScale<t?l.minScale:t,i=l.maxScale>i?l.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function rb(e,t){return dr(YR(e),t)?e:Dh(e,t)}async function Xae(e,t){if(!e||!t)return new Zi({targetGeometry:new He,scale:0,rotation:0});let i=t.spatialReference;const{constraints:s,padding:l,viewpoint:d,size:y}=t,g=[l?y[0]-l.left-l.right:y[0],l?y[1]-l.top-l.bottom:y[1]];let x=null;e instanceof Zi?x=e:e.viewpoint?x=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(x=e.target);let $=null;x&&x.targetGeometry?$=x.targetGeometry:e instanceof xt?$=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&($=await I0(e.center,t,i)||await I0(e.extent,t,i)||await I0(e.target,t,i)||await I0(e,t,i)),!$&&d&&d.targetGeometry?$=d.targetGeometry:!$&&t.extent&&($=t.extent),i||(i=YR(t.spatialReference||t.extent||$)),Ah()||dr($.spatialReference,i)||Rl($,i)||await kh();const E=rb($.center?$.center:$,i);let O=null;if(x&&Y(x.targetGeometry)&&x.targetGeometry.type==="point")O=x.scale;else if("scale"in e&&e.scale)O=e.scale;else if("zoom"in e&&e.zoom!==-1&&s&&s.effectiveLODs)O=s.zoomToScale(e.zoom);else if(Array.isArray($)||$.type==="point"||$.type==="extent"&&$.width===0&&$.height===0){const z=rb(t.extent,i);O=Y(z)?of(z,g):t.extent?of(t.extent,g):d.scale}else O=of(rb($.extent,i),g);const P=Yae(e);P&&(P.min&&P.min>O?O=P.min:P.max&&P.max<O&&(O=P.max));let R=0;x?R=x.rotation:e.hasOwnProperty("rotation")?R=e.rotation:d&&(R=d.rotation);let L=new Zi({targetGeometry:E,scale:O,rotation:R});return s&&(L=s.fit(L),s.constrainByGeometry(L),s.rotationEnabled||(L.rotation=R)),L}function Ln(e,t){const i=e.targetGeometry,s=t.targetGeometry;return i.x=s.x,i.y=s.y,i.spatialReference=s.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Zae(e,t,i){return i?Gi(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):d1(e,t,.5)}const Qae=function(){const e=di();return function(t,i,s){const l=i.targetGeometry;Tx(e,l);const d=.5*od(i);return t.xmin=e[0]-d*s[0],t.ymin=e[1]-d*s[1],t.xmax=e[0]+d*s[0],t.ymax=e[1]+d*s[1],t.spatialReference=l.spatialReference,t}}();function ele(e,t,i,s,l){return T5(e,t,i.center),e.scale=of(i,s),l&&l.constraints&&l.constraints.constrain(e),e}function tle(e,t,i,s){return kx(e,t,i,s),_x(e,e)}const ZR=function(){const e=di();return function(t,i,s){return Ix(t,nle(t,i),Zae(e,i,s))}}(),ile=function(){const e=kl(),t=di();return function(i,s,l,d){const y=od(s),g=Ex(s);return Gi(t,y,y),fR(e,t),y2(e,e,g),jf(e,e,ZR(t,l,d)),jf(e,e,[0,d.top-d.bottom]),Gi(i,e[4],e[5])}}();function od(e){return e.scale*rle(e.targetGeometry)}function rle(e){return Y(e)&&pr(e.spatialReference)?1/(XR(e.spatialReference)*KR*JR):1}function Ex(e){return N4(e.rotation)||0}function sle(e){return pr(e)?XR(e)*KR*JR:1}function nle(e,t){return d1(e,t,.5)}const Ax=function(){const e=di(),t=di(),i=di();return function(s,l,d,y,g,x){return VR(e,l),d1(t,d,.5*x),Gi(i,1/y*x,-1/y*x),Sx(s,t),g&&y2(s,s,g),xx(s,s,i),jf(s,s,e),s}}(),kx=function(){const e=di();return function(t,i,s,l){const d=od(i),y=Ex(i);return Tx(e,i.targetGeometry),Ax(t,e,s,d,y,l)}}(),ole=function(){const e=di();return function(t,i,s,l){const d=od(i);return Tx(e,i.targetGeometry),Ax(t,e,s,d,0,l)}}();function ale(e){const t=An(e);return t?t.valid[1]-t.valid[0]:0}function lle(e,t){return Math.round(ale(e)/t)}const ule=function(){const e=di(),t=di(),i=[0,0,0];return function(s,l,d){Df(e,s,l),I5(e,e),Df(t,s,d),I5(t,t),qR(i,e,t);let y=Math.acos(GR(e,t)/(nv(e)*nv(t)))*Kae;return i[2]<0&&(y=-y),isNaN(y)&&(y=0),y}}(),hle=function(){const e=di();return function(t,i,s,l){const d=t.targetGeometry;return Ln(t,i),ile(e,i,s,l),d.x+=e[0],d.y+=e[1],t}}(),T5=function(e,t,i){Ln(e,t);const s=e.targetGeometry;return s.x=i.x,s.y=i.y,s.spatialReference=i.spatialReference,e},cle=function(){const e=di();return function(t,i,s,l,d){d||(d="center"),Ix(e,s,l),d1(e,e,.5);const y=e[0],g=e[1];switch(d){case"center":Gi(e,0,0);break;case"left":Gi(e,-y,0);break;case"top":Gi(e,0,g);break;case"right":Gi(e,y,0);break;case"bottom":Gi(e,0,-g);break;case"top-left":Gi(e,-y,g);break;case"bottom-left":Gi(e,-y,-g);break;case"top-right":Gi(e,y,g);break;case"bottom-right":Gi(e,y,-g)}return w2(t,i,e),t}}();function Dfe(e,t,i){return Ln(e,t),e.rotation+=i,e}function ple(e,t,i){return Ln(e,t),e.rotation=i,e}const dle=function(){const e=di();return function(t,i,s,l,d){return Ln(t,i),isNaN(s)||s===0||(ej(e,l,i,d),t.scale=i.scale*s,tj(e,e,t,d),w2(t,t,Gi(e,e[0]-l[0],l[1]-e[1]))),t}}();function NM(e,t,i){return Ln(e,t),e.scale=i,e}const QR=function(){const e=di();return function(t,i,s,l,d,y){return Ln(t,i),isNaN(s)||s===0||(ej(e,d,i,y),t.scale=i.scale*s,t.rotation+=l,tj(e,e,t,y),w2(t,t,Gi(e,e[0]-d[0],d[1]-e[1]))),t}}(),zfe=function(){const e=di(),t=di();return function(i,s,l,d,y,g,x){return ZR(t,g,x),LR(e,y,t),d?QR(i,s,l,d,e,g):dle(i,s,l,e,g)}}(),ej=function(){const e=kl();return function(t,i,s,l){return uo(t,i,tle(e,s,l,1))}}(),tj=function(){const e=kl();return function(t,i,s,l){return uo(t,i,kx(e,s,l,1))}}(),w2=function(){const e=di(),t=kl();return function(i,s,l){Ln(i,s);const d=od(s),y=i.targetGeometry;return dR(t,Ex(s)),xx(t,t,y1(d,d)),uo(e,l,t),y.x+=e[0],y.y+=e[1],i}}();class fle{constructor(t,i,s,l){const d=t.targetGeometry,y=i.targetGeometry;l?typeof l=="string"&&(l=fae(l)||zs.ease):l=zs.ease,this.easing=l,this.duration=s,this.sCenterX=d.x,this.sCenterY=d.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=y.x,this.tCenterY=y.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const s=this.easing(i);let l,d,y,g;i>=1?(l=this.tCenterX,d=this.tCenterY,y=this.tRotation,g=this.tScale):(l=this.sCenterX+s*this.dCenterX,d=this.sCenterY+s*this.dCenterY,y=this.sRotation+s*this.dRotation,g=this.sScale+s*this.dScale),t.targetGeometry.x=l,t.targetGeometry.y=d,t.scale=g,t.rotation=y}}let Ho=class extends ze{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=zs.ease,this.view=null,this.viewpoint=null,this.viewpoint=new Zi({targetGeometry:new He,scale:0,rotation:0}),this._updateTask=yp({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,i){this.stop();const s=this.viewpoint;Ln(s,t),this.transition=new fle(this.viewpoint,e.target,i&&i.duration||this.duration,i&&i.easing||this.easing);const l=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(l,l),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const i=new M5({target:e.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==M5.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const i=(performance.now()-this._startTime)/this.transition.duration,s=i>=1;this.transition.applyRatio(this.viewpoint,i),s&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};v([_()],Ho.prototype,"animation",void 0),v([_()],Ho.prototype,"duration",void 0),v([_()],Ho.prototype,"transition",void 0),v([_()],Ho.prototype,"easing",void 0),v([_()],Ho.prototype,"view",void 0),v([_()],Ho.prototype,"viewpoint",void 0),Ho=v([H("esri.views.2d.AnimationManager")],Ho);const yle=Ho;class mle{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:i,graphicsView:s,labelManager:l,layerViews:d,state:{id:y}}=this.view;i.baseLayerViews.forEach(this._updateLayerView,this),d.forEach(this._updateLayerView,this),i.referenceLayerViews.forEach(this._updateLayerView,this),Y(l)&&(l.lastUpdateId!==y&&(l.viewChange(),l.lastUpdateId=y),l.updateRequested&&l.processUpdate(this._updateParameters)),Y(s)&&(s.lastUpdateId!==y&&(s.viewChange(),s.lastUpdateId=y),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=Te(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=yp(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const i=this.view.state,s=t.lastUpdateId;s!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),s!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function Mi(){return Promise.all([fe(()=>import("./webglDeps.833747d4.js"),["assets/webglDeps.833747d4.js","assets/VertexArrayObject.e9c17f76.js","assets/Texture.97806b82.js","assets/enums.de935fa5.js","assets/ProgramTemplate.f648ddbe.js","assets/programUtils.f5791d71.js"]),fe(()=>import("./mapViewDeps.7cf88135.js"),["assets/mapViewDeps.7cf88135.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/enums.6e42a319.js","assets/MaterialKey.8d919001.js","assets/Utils.6a347352.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/GeometryUtils.814cb798.js","assets/utils.c9645ca6.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/enums.2a1fad7f.js","assets/programUtils.f5791d71.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/_commonjsHelpers.01f5fe30.js","assets/imageutils.5bcd7789.js","assets/Matcher.2cff3216.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/CircularArray.747a350c.js","assets/requestImageUtils.799dbb6b.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/BaseGraphicContainer.fad6790a.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/vec3f32.8d37ecf5.js","assets/GraphicContainer.a70edf79.js"])])}const Ad=()=>Mi().then(()=>fe(()=>import("./TileLayerView2D.b15bb3a1.js"),["assets/TileLayerView2D.b15bb3a1.js","assets/imageUtils.24bd2246.js","assets/BitmapTileContainer.475138f8.js","assets/Bitmap.72a46501.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/TileContainer.ef5fef68.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/RefreshableLayerView.746a0d52.js","assets/drapedUtils.99aa2b70.js"])),vy=()=>Mi().then(()=>fe(()=>import("./FeatureLayerView2D.76ceb416.js"),["assets/FeatureLayerView2D.76ceb416.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/LayerView.3f957b48.js","assets/schemaUtils.d6eeadc3.js","assets/visualVariablesUtils.15bb2785.js","assets/createSymbolSchema.e034cbfe.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.2ad70fa5.js","assets/RefreshableLayerView.746a0d52.js"])),RM={"base-dynamic":()=>Mi().then(()=>fe(()=>import("./BaseDynamicLayerView2D.710c717a.js"),["assets/BaseDynamicLayerView2D.710c717a.js","assets/BitmapContainer.315a95dc.js","assets/WGLContainer.e8ab7d6c.js","assets/enums.de935fa5.js","assets/pixelUtils.4b18f06d.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/ExportStrategy.c0ebefaa.js","assets/Bitmap.72a46501.js","assets/RefreshableLayerView.746a0d52.js"])),"base-tile":Ad,"bing-maps":Ad,csv:vy,"geo-rss":()=>Mi().then(()=>fe(()=>import("./GeoRSSLayerView2D.c9ca709a.js"),["assets/GeoRSSLayerView2D.c9ca709a.js","assets/LayerView.3f957b48.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/GraphicContainer.a70edf79.js","assets/BaseGraphicContainer.fad6790a.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/VertexArrayObject.e9c17f76.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/Matcher.2cff3216.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/vec3f32.8d37ecf5.js"])),feature:vy,geojson:vy,graphics:()=>Mi().then(()=>fe(()=>import("./GraphicsLayerView2D.b184bf07.js"),["assets/GraphicsLayerView2D.b184bf07.js","assets/LayerView.3f957b48.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/GraphicContainer.a70edf79.js","assets/BaseGraphicContainer.fad6790a.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/VertexArrayObject.e9c17f76.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/Matcher.2cff3216.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/vec3f32.8d37ecf5.js"])),group:()=>Mi().then(()=>fe(()=>import("./GroupLayerView2D.e16572d4.js"),["assets/GroupLayerView2D.e16572d4.js","assets/GroupContainer.b0edcd21.js","assets/WGLContainer.e8ab7d6c.js","assets/enums.de935fa5.js","assets/pixelUtils.4b18f06d.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js"])),imagery:()=>Mi().then(()=>fe(()=>import("./ImageryLayerView2D.ef296f9a.js"),["assets/ImageryLayerView2D.ef296f9a.js","assets/RasterVFDisplayObject.b40d6721.js","assets/VertexArrayObject.e9c17f76.js","assets/Texture.97806b82.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.fa36c568.js","assets/pixelUtils.4b18f06d.js","assets/WGLContainer.e8ab7d6c.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/MaterialKey.8d919001.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/BaseGraphicContainer.fad6790a.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/Matcher.2cff3216.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/vec3f32.8d37ecf5.js","assets/HighlightGraphicContainer.ce7e27fe.js","assets/BitmapContainer.315a95dc.js","assets/Bitmap.72a46501.js","assets/ExportStrategy.c0ebefaa.js","assets/rasterProjectionHelper.88248e8f.js","assets/popupUtils.2ad70fa5.js","assets/RefreshableLayerView.746a0d52.js"])),"imagery-tile":()=>Mi().then(()=>fe(()=>import("./ImageryTileLayerView2D.d557aa76.js"),["assets/ImageryTileLayerView2D.d557aa76.js","assets/RasterVFDisplayObject.b40d6721.js","assets/VertexArrayObject.e9c17f76.js","assets/Texture.97806b82.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.fa36c568.js","assets/pixelUtils.4b18f06d.js","assets/WGLContainer.e8ab7d6c.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/MaterialKey.8d919001.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/TileContainer.ef5fef68.js","assets/RawBlockCache.3f66be3c.js","assets/rasterProjectionHelper.88248e8f.js","assets/util.5179d486.js","assets/popupUtils.2ad70fa5.js","assets/RefreshableLayerView.746a0d52.js"])),kml:()=>Mi().then(()=>fe(()=>import("./KMLLayerView2D.298b30e4.js"),["assets/KMLLayerView2D.298b30e4.js","assets/kmlUtils.bb94b95f.js","assets/Bitmap.72a46501.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/BitmapContainer.315a95dc.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/GraphicContainer.a70edf79.js","assets/BaseGraphicContainer.fad6790a.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/Matcher.2cff3216.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/vec3f32.8d37ecf5.js"])),"map-image":()=>Mi().then(()=>fe(()=>import("./MapImageLayerView2D.c8dcdbbb.js"),["assets/MapImageLayerView2D.c8dcdbbb.js","assets/BitmapContainer.315a95dc.js","assets/WGLContainer.e8ab7d6c.js","assets/enums.de935fa5.js","assets/pixelUtils.4b18f06d.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/BaseGraphicContainer.fad6790a.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/Matcher.2cff3216.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/vec3f32.8d37ecf5.js","assets/HighlightGraphicContainer.ce7e27fe.js","assets/ExportStrategy.c0ebefaa.js","assets/Bitmap.72a46501.js","assets/scaleUtils.5ab2e5ba.js","assets/ExportImageParameters.d4060602.js","assets/floorFilterUtils.69500d62.js","assets/sublayerUtils.d214b136.js","assets/drapedUtils.99aa2b70.js","assets/popupUtils.2ad70fa5.js","assets/RefreshableLayerView.746a0d52.js"])),"map-notes":()=>Mi().then(()=>fe(()=>import("./MapNotesLayerView2D.aa9c9815.js"),["assets/MapNotesLayerView2D.aa9c9815.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/GroupContainer.b0edcd21.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/GraphicContainer.a70edf79.js","assets/BaseGraphicContainer.fad6790a.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/Matcher.2cff3216.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/vec3f32.8d37ecf5.js"])),media:()=>Mi().then(()=>fe(()=>import("./MediaLayerView2D.8bf51dad.js"),["assets/MediaLayerView2D.8bf51dad.js","assets/normalizeUtilsSync.a11435a6.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/VertexArrayObject.e9c17f76.js","assets/vec3f32.8d37ecf5.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js"])),"ogc-feature":()=>Mi().then(()=>fe(()=>import("./OGCFeatureLayerView2D.23400219.js"),["assets/OGCFeatureLayerView2D.23400219.js","assets/FeatureLayerView2D.76ceb416.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/LayerView.3f957b48.js","assets/schemaUtils.d6eeadc3.js","assets/visualVariablesUtils.15bb2785.js","assets/createSymbolSchema.e034cbfe.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.2ad70fa5.js","assets/RefreshableLayerView.746a0d52.js"])),"open-street-map":Ad,route:()=>Mi().then(()=>fe(()=>import("./RouteLayerView2D.6ef94d64.js"),["assets/RouteLayerView2D.6ef94d64.js","assets/Stop.6d8ed615.js","assets/LayerView.3f957b48.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/GraphicContainer.a70edf79.js","assets/BaseGraphicContainer.fad6790a.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/VertexArrayObject.e9c17f76.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/Matcher.2cff3216.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/vec3f32.8d37ecf5.js"])),stream:()=>Mi().then(()=>fe(()=>import("./StreamLayerView2D.aed4efb4.js"),["assets/StreamLayerView2D.aed4efb4.js","assets/FeatureLayerView2D.76ceb416.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/LayerView.3f957b48.js","assets/schemaUtils.d6eeadc3.js","assets/visualVariablesUtils.15bb2785.js","assets/createSymbolSchema.e034cbfe.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.2ad70fa5.js","assets/RefreshableLayerView.746a0d52.js"])),"subtype-group":()=>Mi().then(()=>fe(()=>import("./SubtypeGroupLayerView2D.c08b3afd.js"),["assets/SubtypeGroupLayerView2D.c08b3afd.js","assets/FeatureLayerView2D.76ceb416.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/LayerView.3f957b48.js","assets/schemaUtils.d6eeadc3.js","assets/visualVariablesUtils.15bb2785.js","assets/createSymbolSchema.e034cbfe.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.2ad70fa5.js","assets/RefreshableLayerView.746a0d52.js"])),tile:Ad,"vector-tile":()=>Mi().then(()=>fe(()=>import("./VectorTileLayerView2D.72349811.js"),["assets/VectorTileLayerView2D.72349811.js","assets/enums.2a1fad7f.js","assets/BidiEngine.ec67919b.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/CIMSymbolHelper.437730f6.js","assets/enums.6e42a319.js","assets/MaterialKey.8d919001.js","assets/Utils.6a347352.js","assets/VertexElementDescriptor.d386088d.js","assets/GeometryUtils.814cb798.js","assets/VertexArrayObject.e9c17f76.js","assets/config.40d47db8.js","assets/TileContainer.ef5fef68.js","assets/utils.c9645ca6.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/StyleRepository.349ed8b4.js","assets/colorUtils.e5585cd0.js","assets/Geometry.b68345ae.js","assets/LayerView.3f957b48.js","assets/Bitmap.72a46501.js","assets/BitmapContainer.315a95dc.js"])),wcs:()=>Mi().then(()=>fe(()=>import("./ImageryTileLayerView2D.d557aa76.js"),["assets/ImageryTileLayerView2D.d557aa76.js","assets/RasterVFDisplayObject.b40d6721.js","assets/VertexArrayObject.e9c17f76.js","assets/Texture.97806b82.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.fa36c568.js","assets/pixelUtils.4b18f06d.js","assets/WGLContainer.e8ab7d6c.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/MaterialKey.8d919001.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/TileContainer.ef5fef68.js","assets/RawBlockCache.3f66be3c.js","assets/rasterProjectionHelper.88248e8f.js","assets/util.5179d486.js","assets/popupUtils.2ad70fa5.js","assets/RefreshableLayerView.746a0d52.js"])),"web-tile":Ad,wfs:vy,wms:()=>Mi().then(()=>fe(()=>import("./WMSLayerView2D.a80c694d.js"),["assets/WMSLayerView2D.a80c694d.js","assets/BitmapContainer.315a95dc.js","assets/WGLContainer.e8ab7d6c.js","assets/enums.de935fa5.js","assets/pixelUtils.4b18f06d.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/ExportStrategy.c0ebefaa.js","assets/Bitmap.72a46501.js","assets/RefreshableLayerView.746a0d52.js","assets/ExportWMSImageParameters.d2b51642.js"])),wmts:()=>Mi().then(()=>fe(()=>import("./WMTSLayerView2D.207c2c96.js"),["assets/WMTSLayerView2D.207c2c96.js","assets/imageUtils.24bd2246.js","assets/BitmapTileContainer.475138f8.js","assets/Bitmap.72a46501.js","assets/utils.c9645ca6.js","assets/Utils.6a347352.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.8d919001.js","assets/TileContainer.ef5fef68.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.3f957b48.js","assets/RefreshableLayerView.746a0d52.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function gle(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new te(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const jM={hasLayerViewModule:e=>Y(RM[e.type]),importLayerView:e=>{const t=RM[e.type];if(he(t))throw gle(e);return t(e)}};function vle(e,t){const{spatialReference:i}=t,s=[t.x,t.y];let l=Number.POSITIVE_INFINITY,d=0,y=0;const g=[0,0],x=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const $ of x)for(let E=0;E<$.length-1;E++){BD(g,s,$,E);const O=f1(s,g);O<l&&(l=O,d=g[0],y=g[1])}return{coordinate:new He({x:d,y,spatialReference:i}),distance:l}}var E5;const wle=Me.getLogger("esri.views.MapView");let Bu=E5=class extends ze{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(he(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Dh(this.geometry,this.spatialReference)}catch(e){return wle.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(he(this.normalizedGeometry))return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?Tv(this.normalizedGeometry,i):FT(this.normalizedGeometry,i))return e;const{coordinate:s}=vle(this.normalizedGeometry,i);return s&&(e.targetGeometry=s),e}clone(){var e,t;return new E5({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};v([_({constructOnly:!0})],Bu.prototype,"geometry",void 0),v([_({readOnly:!0})],Bu.prototype,"normalizedGeometry",null),v([_({constructOnly:!0})],Bu.prototype,"spatialReference",void 0),Bu=E5=v([H("esri.views.2d.constraints.GeometryConstraint")],Bu);var A5;let T0=A5=class extends ze{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new A5({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};v([_()],T0.prototype,"enabled",void 0),v([_()],T0.prototype,"rotationEnabled",void 0),T0=A5=v([H("esri.views.2d.constraints.RotationConstraint")],T0);const ij=T0;var k5;let Dr=k5=class extends ze{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:s,minZoom:l,maxZoom:d}=this,y=-1,g=-1,x=!1,$=!1;if(i!==0&&s!==0&&i<s&&([i,s]=[s,i]),!t||!t.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",s);t=t.map(E=>E.clone()),t.sort((E,O)=>O.scale-E.scale),t.forEach((E,O)=>E.level=O);for(const E of t)!x&&i>0&&i>=E.scale&&(y=E.level,x=!0),!$&&s>0&&s>=E.scale&&(g=e?e.level:-1,$=!0),e=E;l===-1&&(l=i===0?0:y),d===-1&&(d=s===0?t.length-1:g),l=Math.max(l,0),l=Math.min(l,t.length-1),d=Math.max(d,0),d=Math.min(d,t.length-1),l>d&&([l,d]=[d,l]),i=t[l].scale,s=t[d].scale,t.splice(0,l),t.splice(d-l+1,t.length),t.forEach((E,O)=>{this._lodByScale[E.scale]=E,this._scales[O]=E.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",l),this._set("effectiveMaxZoom",d),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,s=this.effectiveMaxScale,l=e.targetGeometry,d=t&&t.targetGeometry,y=s!==0&&e.scale<s,g=i!==0&&e.scale>i;if(y||g){const x=g?i:s;if(d){const $=(x-t.scale)/(e.scale-t.scale);l.x=d.x+(l.x-d.x)*$,l.y=d.y+(l.y-d.y)*$}e.scale=x}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[i]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let l=0;l<t.length-1;l++){if(i=t[l],s=t[l+1],s===e)return l+this.effectiveMinZoom+1;if(i>e&&s<e)return l+this.effectiveMinZoom+1-(e-s)/(i-s)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new k5({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};v([_({readOnly:!0})],Dr.prototype,"effectiveLODs",void 0),v([_({readOnly:!0})],Dr.prototype,"effectiveMinZoom",void 0),v([_({readOnly:!0})],Dr.prototype,"effectiveMaxZoom",void 0),v([_({readOnly:!0})],Dr.prototype,"effectiveMinScale",void 0),v([_({readOnly:!0})],Dr.prototype,"effectiveMaxScale",void 0),v([_()],Dr.prototype,"lods",void 0),v([_()],Dr.prototype,"minZoom",void 0),v([_()],Dr.prototype,"maxZoom",void 0),v([_()],Dr.prototype,"minScale",void 0),v([_()],Dr.prototype,"maxScale",void 0),v([_()],Dr.prototype,"snapToZoom",void 0),Dr=k5=v([H("esri.views.2d.constraints.ZoomConstraint")],Dr);const rj=Dr,ble={base:null,key:"type",typeMap:{extent:xt,polygon:gs}};let hi=class extends ze{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((e=this._get("version"))!=null?e:0)+1}get _defaultLODs(){var i,s,l;const e=(s=(i=this.view)==null?void 0:i.defaultsFromMap)==null?void 0:s.tileInfo,t=(l=this.view)==null?void 0:l.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new Bu({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new ij({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,i=this.minZoom,s=this.maxZoom,l=this.minScale,d=this.maxScale,y=this.snapToZoom;return e&&e.lods===t&&e.minZoom===i&&e.maxZoom===s&&e.minScale===l&&e.maxScale===d&&e.snapToZoom===y?e:new rj({lods:t,minZoom:i,maxZoom:s,minScale:l,maxScale:d,snapToZoom:y})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};v([_({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],hi.prototype,"effectiveLODs",void 0),v([_({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],hi.prototype,"effectiveMinScale",void 0),v([_({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],hi.prototype,"effectiveMaxScale",void 0),v([_({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],hi.prototype,"effectiveMinZoom",void 0),v([_({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],hi.prototype,"effectiveMaxZoom",void 0),v([_({types:ble,value:null})],hi.prototype,"geometry",null),v([_({type:[R6]})],hi.prototype,"lods",void 0),v([_()],hi.prototype,"minScale",void 0),v([_()],hi.prototype,"maxScale",void 0),v([_()],hi.prototype,"minZoom",void 0),v([_()],hi.prototype,"maxZoom",void 0),v([_()],hi.prototype,"rotationEnabled",void 0),v([_()],hi.prototype,"snapToZoom",void 0),v([_()],hi.prototype,"view",void 0),v([_({readOnly:!0})],hi.prototype,"version",null),v([_()],hi.prototype,"_defaultLODs",null),v([_({type:Bu})],hi.prototype,"_geometry",null),v([_({type:ij})],hi.prototype,"_rotation",null),v([_({readOnly:!0,type:rj})],hi.prototype,"_zoom",null),hi=v([H("esri.views.2d.MapViewConstraints")],hi);const sj=hi;function _le(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function xle(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function nj(e,t,i,s,l,d,y,g,x,$){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e[4]=d,e[5]=y,e[6]=g,e[7]=x,e[8]=$,e}function oj(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Sle(e,t){if(e===t){const i=t[1],s=t[2],l=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=s,e[7]=l}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function $le(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],x=t[6],$=t[7],E=t[8],O=E*y-g*$,P=-E*d+g*x,R=$*d-y*x;let L=i*O+s*P+l*R;return L?(L=1/L,e[0]=O*L,e[1]=(-E*s+l*$)*L,e[2]=(g*s-l*y)*L,e[3]=P*L,e[4]=(E*i-l*x)*L,e[5]=(-g*i+l*d)*L,e[6]=R*L,e[7]=(-$*i+s*x)*L,e[8]=(y*i-s*d)*L,e):null}function Mle(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],x=t[6],$=t[7],E=t[8];return e[0]=y*E-g*$,e[1]=l*$-s*E,e[2]=s*g-l*y,e[3]=g*x-d*E,e[4]=i*E-l*x,e[5]=l*d-i*g,e[6]=d*$-y*x,e[7]=s*x-i*$,e[8]=i*y-s*d,e}function Ile(e){const t=e[0],i=e[1],s=e[2],l=e[3],d=e[4],y=e[5],g=e[6],x=e[7],$=e[8];return t*($*d-y*x)+i*(-$*l+y*g)+s*(x*l-d*g)}function Ox(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],x=t[5],$=t[6],E=t[7],O=t[8],P=i[0],R=i[1],L=i[2],z=i[3],V=i[4],K=i[5],ee=i[6],se=i[7],oe=i[8];return e[0]=P*s+R*y+L*$,e[1]=P*l+R*g+L*E,e[2]=P*d+R*x+L*O,e[3]=z*s+V*y+K*$,e[4]=z*l+V*g+K*E,e[5]=z*d+V*x+K*O,e[6]=ee*s+se*y+oe*$,e[7]=ee*l+se*g+oe*E,e[8]=ee*d+se*x+oe*O,e}function O5(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],x=t[5],$=t[6],E=t[7],O=t[8],P=i[0],R=i[1];return e[0]=s,e[1]=l,e[2]=d,e[3]=y,e[4]=g,e[5]=x,e[6]=P*s+R*y+$,e[7]=P*l+R*g+E,e[8]=P*d+R*x+O,e}function aj(e,t,i){const s=t[0],l=t[1],d=t[2],y=t[3],g=t[4],x=t[5],$=t[6],E=t[7],O=t[8],P=Math.sin(i),R=Math.cos(i);return e[0]=R*s+P*y,e[1]=R*l+P*g,e[2]=R*d+P*x,e[3]=R*y-P*s,e[4]=R*g-P*l,e[5]=R*x-P*d,e[6]=$,e[7]=E,e[8]=O,e}function Tle(e,t,i){const s=i[0],l=i[1],d=i[2];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=l*t[3],e[4]=l*t[4],e[5]=l*t[5],e[6]=d*t[6],e[7]=d*t[7],e[8]=d*t[8],e}function Ele(e,t,i){const s=i[0],l=i[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=l*t[3],e[4]=l*t[4],e[5]=l*t[5],e}function Ale(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function kle(e,t){const i=Math.sin(t),s=Math.cos(t);return e[0]=s,e[1]=i,e[2]=0,e[3]=-i,e[4]=s,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ole(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Cle(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Ple(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=i+i,g=s+s,x=l+l,$=i*y,E=s*y,O=s*g,P=l*y,R=l*g,L=l*x,z=d*y,V=d*g,K=d*x;return e[0]=1-O-L,e[3]=E-K,e[6]=P+V,e[1]=E+K,e[4]=1-$-L,e[7]=R-z,e[2]=P-V,e[5]=R+z,e[8]=1-$-O,e}function Nle(e,t){const i=t[0],s=t[1],l=t[2],d=t[4],y=t[5],g=t[6],x=t[8],$=t[9],E=t[10],O=E*y-g*$,P=-E*d+g*x,R=$*d-y*x,L=i*O+s*P+l*R;if(!L)return null;const z=1/L;return e[0]=O*z,e[1]=(-E*s+l*$)*z,e[2]=(g*s-l*y)*z,e[3]=P*z,e[4]=(E*i-l*x)*z,e[5]=(-g*i+l*d)*z,e[6]=R*z,e[7]=(-$*i+s*x)*z,e[8]=(y*i-s*d)*z,e}function Rle(e,t){const i=t[0],s=t[1],l=t[2],d=t[3],y=t[4],g=t[5],x=t[6],$=t[7],E=t[8],O=t[9],P=t[10],R=t[11],L=t[12],z=t[13],V=t[14],K=t[15],ee=i*g-s*y,se=i*x-l*y,oe=i*$-d*y,ne=s*x-l*g,ae=s*$-d*g,Ie=l*$-d*x,Se=E*z-O*L,Pe=E*V-P*L,Re=E*K-R*L,De=O*V-P*z,Le=O*K-R*z,qe=P*K-R*V;let Oe=ee*qe-se*Le+oe*De+ne*Re-ae*Pe+Ie*Se;return Oe?(Oe=1/Oe,e[0]=(g*qe-x*Le+$*De)*Oe,e[1]=(x*Re-y*qe-$*Pe)*Oe,e[2]=(y*Le-g*Re+$*Se)*Oe,e[3]=(l*Le-s*qe-d*De)*Oe,e[4]=(i*qe-l*Re+d*Pe)*Oe,e[5]=(s*Re-i*Le-d*Se)*Oe,e[6]=(z*Ie-V*ae+K*ne)*Oe,e[7]=(V*oe-L*Ie-K*se)*Oe,e[8]=(L*ae-z*oe+K*ee)*Oe,e):null}function jle(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Lle(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Fle(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Dle(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function lj(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function zle(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function Vle(e,t,i,s){return e[0]=t[0]+i[0]*s,e[1]=t[1]+i[1]*s,e[2]=t[2]+i[2]*s,e[3]=t[3]+i[3]*s,e[4]=t[4]+i[4]*s,e[5]=t[5]+i[5]*s,e[6]=t[6]+i[6]*s,e[7]=t[7]+i[7]*s,e[8]=t[8]+i[8]*s,e}function Gle(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function qle(e,t){const i=e[0],s=e[1],l=e[2],d=e[3],y=e[4],g=e[5],x=e[6],$=e[7],E=e[8],O=t[0],P=t[1],R=t[2],L=t[3],z=t[4],V=t[5],K=t[6],ee=t[7],se=t[8];return Math.abs(i-O)<=et*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(s-P)<=et*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(l-R)<=et*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(d-L)<=et*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(y-z)<=et*Math.max(1,Math.abs(y),Math.abs(z))&&Math.abs(g-V)<=et*Math.max(1,Math.abs(g),Math.abs(V))&&Math.abs(x-K)<=et*Math.max(1,Math.abs(x),Math.abs(K))&&Math.abs($-ee)<=et*Math.max(1,Math.abs($),Math.abs(ee))&&Math.abs(E-se)<=et*Math.max(1,Math.abs(E),Math.abs(se))}function Ule(e){const t=et,i=e[0],s=e[1],l=e[2],d=e[3],y=e[4],g=e[5],x=e[6],$=e[7],E=e[8];return Math.abs(1-(i*i+d*d+x*x))<=t&&Math.abs(1-(s*s+y*y+$*$))<=t&&Math.abs(1-(l*l+g*g+E*E))<=t}const Ble=Ox,Hle=lj;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:_le,copy:xle,set:nj,identity:oj,transpose:Sle,invert:$le,adjoint:Mle,determinant:Ile,multiply:Ox,translate:O5,rotate:aj,scale:Tle,scaleByVec2:Ele,fromTranslation:Ale,fromRotation:kle,fromScaling:Ole,fromMat2d:Cle,fromQuat:Ple,normalFromMat4Legacy:Nle,normalFromMat4:Rle,projection:jle,str:Lle,frob:Fle,add:Dle,subtract:lj,multiplyScalar:zle,multiplyScalarAndAdd:Vle,exactEquals:Gle,equals:qle,isOrthoNormal:Ule,mul:Ble,sub:Hle},Symbol.toStringTag,{value:"Module"}));function Fm(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function Wle(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Jle(e,t,i,s,l,d,y,g,x){const $=new Float32Array(9);return $[0]=e,$[1]=t,$[2]=i,$[3]=s,$[4]=l,$[5]=d,$[6]=y,$[7]=g,$[8]=x,$}function Kle(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:Fm,clone:Wle,fromValues:Jle,createView:Kle},Symbol.toStringTag,{value:"Module"}));function uj(){return new Float32Array(2)}function Yle(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Cp(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function Xle(e,t){return new Float32Array(e,t,2)}function hj(){return uj()}function cj(){return Cp(1,1)}function pj(){return Cp(1,0)}function dj(){return Cp(0,1)}const Zle=hj(),Qle=cj(),eue=pj(),tue=dj();Object.freeze(Object.defineProperty({__proto__:null,create:uj,clone:Yle,fromValues:Cp,createView:Xle,zeros:hj,ones:cj,unitX:pj,unitY:dj,ZEROS:Zle,ONES:Qle,UNIT_X:eue,UNIT_Y:tue},Symbol.toStringTag,{value:"Module"}));function iue(e){return e instanceof Float32Array&&e.length>=2}function rue(e){return Array.isArray(e)&&e.length>=2}function sb(e){return iue(e)||rue(e)}var C5;const Eo=[0,0];let il=C5=class extends ce{constructor(e){super(e),this._viewpoint2D={center:di(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new xt,this.id=0,this.inverseTransform=kl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=kl(),this.transformNoRotation=kl(),this.displayMat3=Fm(),this.displayViewMat3=Fm(),this.viewMat3=Fm(),this.viewMat2d=hR(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=Ln(i,e.viewpoint),this._set("size",Ff(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new C5({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return sb(t)?uo(e,t,this.inverseTransform):(Eo[0]=t,Eo[1]=i,uo(e,Eo,this.inverseTransform))}toScreen(e,t,i){return sb(t)?uo(e,t,this.transform):(Eo[0]=t,Eo[1]=i,uo(e,Eo,this.transform))}toScreenNoRotation(e,t,i){return sb(t)?uo(e,t,this.transformNoRotation):(Eo[0]=t,Eo[1]=i,uo(e,Eo,this.transformNoRotation))}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,l=this._get("size");return Ax(e,i,l,t,0,s),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:s}=this._viewpoint2D,l=this._get("pixelRatio")||1,d=this._get("size"),y=new Zi({targetGeometry:new He(e[0],e[1],t),scale:i,rotation:s});if(this._set("viewpoint",y),!d||!t||!i)return;this.resolution=od(y),this.rotation=s,this.scale=i,this.spatialReference=t,Ff(this.center,e);const g=d[0]!==0?2/d[0]:0,x=d[1]!==0?-2/d[1]:0;nj(this.displayMat3,g,0,0,0,x,0,-1,1,1);const $=oj(this.viewMat3),E=Cp(d[0]/2,d[1]/2),O=Cp(-d[0]/2,-d[1]/2),P=N4(s);O5($,$,E),aj($,$,P),O5($,$,O),Ox(this.displayViewMat3,this.displayMat3,$);const R=Sx(this.viewMat2d,E);return y2(R,R,P),jf(R,R,O),Qae(this.extent,y,d),kx(this.transform,y,d,l),_x(this.inverseTransform,this.transform),ole(this.transformNoRotation,y,d,l),this.worldScreenWidth=lle(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};v([_({readOnly:!0})],il.prototype,"id",void 0),v([_({value:1,json:{write:!0}})],il.prototype,"pixelRatio",null),v([_({json:{write:!0}})],il.prototype,"size",null),v([_()],il.prototype,"spatialReference",void 0),v([_({type:Zi,json:{write:!0}})],il.prototype,"viewpoint",null),il=C5=v([H("esri.views.2d.ViewState")],il);const LM=il;var P5,N5;let ea=P5=class extends ze{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new P5({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};v([_()],ea.prototype,"left",void 0),v([_()],ea.prototype,"top",void 0),v([_()],ea.prototype,"right",void 0),v([_()],ea.prototype,"bottom",void 0),ea=P5=v([H("esri.views.2d.PaddedViewState.Padding")],ea);let Ac=N5=class extends LM{constructor(...e){super(...e),this.paddedViewState=new LM,this._updateContent=(()=>{const t=di();return()=>{const i=this._get("size"),s=this._get("padding");if(!i||!s)return;const l=this.paddedViewState;Gi(t,s.left+s.right,s.top+s.bottom),Df(t,i,t),Ff(l.size,t);const d=l.viewpoint;d&&(this.viewpoint=d)}})(),this.own(Te(()=>[this.size,this.padding],()=>this._updateContent(),$p)),this.padding=new ea,this.size=[0,0]}set padding(e){this._set("padding",e||new ea)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,hle(t,e,this._get("size"),this._get("padding"));const i=this._viewpoint2D,s=t.targetGeometry;i.center[0]=s.x,i.center[1]=s.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=s.spatialReference,this._update()}}clone(){return new N5({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};v([_()],Ac.prototype,"paddedViewState",void 0),v([_({type:ea})],Ac.prototype,"padding",null),v([_()],Ac.prototype,"viewpoint",null),Ac=N5=v([H("esri.views.2d.PaddedViewState")],Ac);const sue=Ac;class nue{constructor(t,i){this.item=t,this.controller=i,this.promise=null}}class fj{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new $g(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&Y(i)&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,s)=>t(s))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,i){const s=this.get(t);if(s)return s;const l=new AbortController;let d=null;i&&(d=Rn(i,()=>l.abort()));const y=()=>{const E=this._processingItems.get(t);E&&E.controller.abort(),g(),$.reject(pi())},g=()=>{x.remove(),Y(d)&&d.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},x=h4(l.signal,y),$=ua();return this._deferreds.set(t,$),this._controllers.set(t,l),$.promise.then(g,g),this._queue.push(t),this._scheduleNext(),$.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(i=>t.push(i)),this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Lp(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(he(t))return;let i;const s=new AbortController,l=new nue(t,s);this._processingItems.set(t,l);try{i=this.process(t,s.signal)}catch(d){this._processError(l,d)}fa(i)?(l.promise=i,i.then(d=>this._processResult(l,d),d=>this._processError(l,d))):this._processResult(l,i)}get test(){return{update:t=>this.runTask(t)}}}function oue(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const nb=new Set,wy=[],Yh=new Map,FM=[0,0];let Ea=class extends ze{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new fj({concurrency:e,process:(i,s)=>{const l=this._keyToItem.get(i);return t(l,{signal:s})},peeker:i=>i.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const i=e.key.id+"-"+t;if(this.has(i))return this.get(i);const s=this._queue.push(i),l=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),s.then(l,l),this.notifyChange("updating"),s}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach($=>{const E=this._keyToItem.get($),O=this.tileInfoView.getTileScale(E.key);Yh.has(O)||(Yh.set(O,[]),i=Math.max(O,i),s=Math.min(O,s)),Yh.get(O).push(E.key),nb.add(O)});let l=this.state.scale;Yh.has(l)||(oue(wy,nb),wy.sort(($,E)=>$-E),l=wy.reduce(($,E)=>Math.abs(E-l)<Math.abs($-l)?E:$,wy[0])),l=Math.min(l,i),l=Math.max(l,s);const d=Yh.get(l),y=t.getClosestInfoForScale(l),g=y.getColumnForX(this.state.center[0]),x=y.getRowForY(this.state.center[1]);return d.sort(($,E)=>{const O=y.denormalizeCol($.col,$.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((g-O)*(g-O)+(x-$.row)*(x-$.row))-Math.sqrt((g-P)*(g-P)+(x-E.row)*(x-E.row))}),nb.clear(),Yh.clear(),d[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,l=null;return e.forEach(d=>{const y=this._keyToItem.get(d);t.getTileCoords(FM,y.key);const g=f1(FM,i);g<s&&(s=g,l=y.key)}),l.id}};v([_({constructOnly:!0})],Ea.prototype,"concurrency",void 0),v([_({constructOnly:!0})],Ea.prototype,"process",void 0),v([_()],Ea.prototype,"state",void 0),v([_({constructOnly:!0})],Ea.prototype,"strategy",void 0),v([_({constructOnly:!0})],Ea.prototype,"tileInfoView",void 0),v([_({readOnly:!0})],Ea.prototype,"updating",null),Ea=v([H("esri.views.2d.tiling.PagedTileQueue")],Ea);class Gr{constructor(t,i,s,l){this.set(t,i,s,l)}static getId(t,i,s,l){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${s}/${l}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,s=63&this.level;return(3&this.world)<<30|i<<22|t<<8|s}acquire(t,i,s,l){this.set(t,i,s,l)}contains(t){const i=t.level-this.level;return this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Gr(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,s,l){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[d,y,g,x]=t.split("/");this.level=parseFloat(d),this.row=parseFloat(y),this.col=parseFloat(g),this.world=parseFloat(x)}else this.level=+t,this.row=+i,this.col=+s,this.world=+l||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Gr(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,i=this.row<<1,s=this.col<<1,l=this.world;return[new Gr(t,i,s,l),new Gr(t,i,s+1,l),new Gr(t,i+1,s,l),new Gr(t,i+1,s+1,l)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Gr.pool=new Pn(Gr,null,null,25,50);function Aa(e,t){return[e,t]}function Kl(e,t,i){return e[0]=t,e[1]=i,e}function aue(e,t,i,s,l){return e[0]=t,e[1]=i,e[2]=s,e[3]=l,e}const tn=new Gr("0/0/0/0");class Cx{constructor(t,i,s,l,d,y,g,x,$,E,O,P){this.level=t,this.resolution=i,this.scale=s,this.origin=l,this.first=d,this.last=y,this.size=g,this.norm=x,this.worldStart=$,this.worldEnd=E,this.worldSize=O,this.wrap=P}static create(t,i,s=null){const l=An(t.spatialReference),d=i.origin||Aa(t.origin.x,t.origin.y),y=Aa(t.size[0]*i.resolution,t.size[1]*i.resolution),g=Aa(-1/0,-1/0),x=Aa(1/0,1/0),$=Aa(1/0,1/0);Y(s)&&(Kl(g,Math.max(0,Math.floor((s.xmin-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymax)/y[1]))),Kl(x,Math.max(0,Math.floor((s.xmax-d[0])/y[0])),Math.max(0,Math.floor((d[1]-s.ymin)/y[1]))),Kl($,x[0]-g[0]+1,x[1]-g[1]+1));const{cols:E,rows:O}=i;let P,R,L,z;return!s&&E&&O&&(Kl(g,E[0],O[0]),Kl(x,E[1],O[1]),Kl($,E[1]-E[0]+1,O[1]-O[0]+1)),t.isWrappable?(P=Aa(Math.ceil(Math.round((l.valid[1]-l.valid[0])/i.resolution)/t.size[0]),$[1]),R=Aa(Math.floor((l.origin[0]-d[0])/y[0]),g[1]),L=Aa(P[0]+R[0]-1,x[1]),z=!0):(R=g,L=x,P=$,z=!1),new Cx(i.level,i.resolution,i.scale,d,g,x,$,y,R,L,P,z)}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,s=!1){tn.set(i);const l=s?tn.col:this.denormalizeCol(tn.col,tn.world),d=tn.row;return aue(t,this.getXForColumn(l),this.getYForRow(d+1),this.getXForColumn(l+1),this.getYForRow(d)),t}getTileCoords(t,i,s=!1){tn.set(i);const l=s?tn.col:this.denormalizeCol(tn.col,tn.world);return Array.isArray(t)?Kl(t,this.getXForColumn(l),this.getYForRow(tn.row)):(t.x=this.getXForColumn(l),t.y=this.getYForRow(tn.row)),t}}class Pp{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,i){const{spans:s,lodInfo:l}=this,{level:d}=l;if(s.length!==0)for(const{row:y,colFrom:g,colTo:x}of s)for(let $=g;$<=x;$++)t.call(i,d,y,l.normalizeCol($),l.getWorldForColumn($))}}Pp.pool=new Pn(Pp);class ob{constructor(t,i,s){this.row=t,this.colFrom=i,this.colTo=s}}const Ht=new Gr("0/0/0/0");class Px{constructor(t,i,s,l,d,y,g,x){this.x=t,this.ymin=i,this.ymax=s,this.invM=l,this.leftAdjust=d,this.rightAdjust=y,this.leftBound=g,this.rightBound=x}static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[s,l]=t,[d,y]=i,g=d-s,x=y-l,$=x!==0?g/x:0,E=(Math.ceil(l)-l)*$,O=(Math.floor(l)-l)*$;return new Px(s,Math.floor(l),Math.ceil(y),$,g<0?E:O,g<0?O:E,g<0?d:s,g<0?s:d)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const Qr=[[0,0],[0,0],[0,0],[0,0]],lue=1e-6;class uue{constructor(t,i=null){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const s=t.lods.slice();s.sort((d,y)=>y.scale-d.scale);const l=this._lodInfos=s.map(d=>Cx.create(t,d,i));s.forEach((d,y)=>{this._infoByLevel[d.level]=l[y],this._infoByScale[d.scale]=l[y],this.scales[y]=d.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,s=!1){Ht.set(i);const l=this._infoByLevel[Ht.level];return l?l.getTileBounds(t,Ht,s):t}getTileCoords(t,i,s=!1){Ht.set(i);const l=this._infoByLevel[Ht.level];return l?l.getTileCoords(t,Ht,s):t}getTileCoverage(t,i=192,s="closest"){const l=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),d=Pp.pool.acquire(l),y=this._wrap;let g,x,$,E=1/0,O=-1/0;const P=d.spans;Qr[0][0]=Qr[0][1]=Qr[1][1]=Qr[3][0]=-i,Qr[1][0]=Qr[2][0]=t.size[0]+i,Qr[2][1]=Qr[3][1]=t.size[1]+i;for(const V of Qr)t.toMap(V,V),V[0]=l.getColumnForX(V[0]),V[1]=l.getRowForY(V[1]);const R=[];let L=3;for(let V=0;V<4;V++){if(Qr[V][1]===Qr[L][1]){L=V;continue}const K=Px.create(Qr[V],Qr[L]);E=Math.min(K.ymin,E),O=Math.max(K.ymax,O),R[K.ymin]===void 0&&(R[K.ymin]=[]),R[K.ymin].push(K),L=V}if(E==null||O==null||O-E>100)return null;let z=[];for(g=E;g<O;){R[g]!=null&&(z=z.concat(R[g])),x=1/0,$=-1/0;for(let V=z.length-1;V>=0;V--){const K=z[V];x=Math.min(x,K.getLeftCol()),$=Math.max($,K.getRightCol())}if(x=Math.floor(x),$=Math.floor($),g>=l.first[1]&&g<=l.last[1])if(y)if(l.size[0]<l.worldSize[0]){const V=Math.floor($/l.worldSize[0]);for(let K=Math.floor(x/l.worldSize[0]);K<=V;K++)P.push(new ob(g,Math.max(l.getFirstColumnForWorld(K),x),Math.min(l.getLastColumnForWorld(K),$)))}else P.push(new ob(g,x,$));else x>l.last[0]||$<l.first[0]||(x=Math.max(x,l.first[0]),$=Math.min($,l.last[0]),P.push(new ob(g,x,$)));g+=1;for(let V=z.length-1;V>=0;V--){const K=z[V];K.ymax>=g?K.incrRow():z.splice(V,1)}}return d}getTileParentId(t){Ht.set(t);const i=this._infoByLevel[Ht.level],s=this._lodInfos.indexOf(i)-1;return s<0?null:(this._getTileIdAtLOD(Ht,this._lodInfos[s],Ht),Ht.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Ht.set(i);const s=this._infoByLevel[Ht.level],l=t.lodInfo;if(l.resolution>s.resolution){this._getTileIdAtLOD(Ht,l,Ht);const y=l.denormalizeCol(Ht.col,Ht.world);for(const g of t.spans)if(g.row===Ht.row&&g.colFrom<=y&&g.colTo>=y)return!0}if(l.resolution<s.resolution){const[y,g,x,$]=t.spans.reduce((z,V)=>(z[0]=Math.min(z[0],V.row),z[1]=Math.max(z[1],V.row),z[2]=Math.min(z[2],V.colFrom),z[3]=Math.max(z[3],V.colTo),z),[1/0,-1/0,1/0,-1/0]),E=s.denormalizeCol(Ht.col,Ht.world),O=l.getColumnForX(s.getXForColumn(E)),P=l.getRowForY(s.getYForRow(Ht.row)),R=l.getColumnForX(s.getXForColumn(E+1))-1,L=l.getRowForY(s.getYForRow(Ht.row+1))-1;return!(O>$||R<x||P>g||L<y)}const d=l.denormalizeCol(Ht.col,Ht.world);return t.spans.some(y=>y.row===Ht.row&&y.colFrom<=d&&y.colTo>=d)}normalizeBounds(t,i,s){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const l=An(this.tileInfo.spatialReference),d=-s*(l.valid[1]-l.valid[0]);t[0]+=d,t[2]+=d}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let s=1;s<i.length-1;s++)if(t>i[s]+lue)return this._infoByScale[i[s-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((s,l)=>Math.abs(l-t)<Math.abs(s-t)?l:s,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let s=i.length-1;s>=0;s--)if(t<i[s])return s===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[s]].level+(i[s]-t)/(i[s]-i[s+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,i,s){const l=this._infoByLevel[s.level];return t.set(s),i.resolution<l.resolution?null:(i.resolution===l.resolution||(t.level=i.level,t.col=Math.floor(s.col*l.resolution/i.resolution+.01),t.row=Math.floor(s.row*l.resolution/i.resolution+.01)),t)}}function hue(e,t){return e.length=0,t.forEach(i=>e.push(i)),e}const ab=new Set,by=[],Xh=new Map,DM=[0,0];let Wo=class extends ze{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:i}=this;this._queue=new fj({concurrency:e,process:(s,l)=>{const d=this._keyToItem.get(s);return t(d,{signal:l})},peeker:i==="scale-first"?s=>this._peekByScaleFirst(s):s=>this._peekByCenterFirst(s)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const i=this._queue.push(t),s=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),i.then(s,s),this.notifyChange("updating"),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach($=>{const E=this._keyToItem.get($),O=this.tileInfoView.getTileScale(E.key);Xh.has(O)||(Xh.set(O,[]),i=Math.max(O,i),s=Math.min(O,s)),Xh.get(O).push(E.key),ab.add(O)});let l=this.state.scale;Xh.has(l)||(hue(by,ab),by.sort(($,E)=>$-E),l=by.reduce(($,E)=>Math.abs(E-l)<Math.abs($-l)?E:$,by[0])),l=Math.min(l,i),l=Math.max(l,s);const d=Xh.get(l),y=t.getClosestInfoForScale(l),g=y.getColumnForX(this.state.center[0]),x=y.getRowForY(this.state.center[1]);return d.sort(($,E)=>{const O=y.denormalizeCol($.col,$.world),P=y.denormalizeCol(E.col,E.world);return Math.sqrt((g-O)*(g-O)+(x-$.row)*(x-$.row))-Math.sqrt((g-P)*(g-P)+(x-E.row)*(x-E.row))}),ab.clear(),Xh.clear(),d[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,i=this.state.center;let s=Number.POSITIVE_INFINITY,l=null;return e.forEach(d=>{const y=this._keyToItem.get(d);t.getTileCoords(DM,y.key);const g=f1(DM,i);g<s&&(s=g,l=y.key)}),l.id}};v([_({constructOnly:!0})],Wo.prototype,"concurrency",void 0),v([_({constructOnly:!0})],Wo.prototype,"process",void 0),v([_()],Wo.prototype,"state",void 0),v([_({constructOnly:!0})],Wo.prototype,"strategy",void 0),v([_({constructOnly:!0})],Wo.prototype,"tileInfoView",void 0),v([_({readOnly:!0})],Wo.prototype,"updating",null),Wo=v([H("esri.views.2d.tiling.TileQueue")],Wo);const Vfe=Wo;class cue{constructor(t,i,s){this.maxSize=t,this.tileInfoView=i,this.removedFunc=s,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return null;const s=i.key.level,l=this._tileKeysPerLevel[s];zM(this._tilePerId,t);for(let d=0;d<l.length;d++)if(l[d].id===t){l.splice(d,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,s=i.id;if(this._tilePerId.has(s))return;this._tilePerId.set(s,t);const l=i.level;this._tileKeysPerLevel[l]||(this._tileKeysPerLevel[l]=[]),this._tileKeysPerLevel[l].push(i)}prune(t,i,s){let l=this._tilePerId.size;if(l<=this.maxSize)return;let d=this._tileKeysPerLevel.length-1;for(;l>this.maxSize&&d>=0;)d!==t&&(l=this._pruneAroundCenterTile(l,i,s,d)),d--;l>this.maxSize&&(l=this._pruneAroundCenterTile(l,i,s,t))}_pruneAroundCenterTile(t,i,s,l){const d=this._tileKeysPerLevel[l];if(!d||d.length===0)return t;const{size:y,origin:g}=this.tileInfoView.tileInfo,x=s*y[0],$=s*y[1],E=[0,0],O=[0,0];for(d.sort((P,R)=>(E[0]=g.x+x*(P.col+.5),E[1]=g.y-$*(P.row+.5),O[0]=g.x+x*(R.col+.5),O[1]=g.y-$*(R.row+.5),sv(E,i)-sv(O,i)));d.length>0;){const P=d.pop();if(this._removeTile(P.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(i),zM(this._tilePerId,t)}}function zM(e,t){e.delete(t)}const Yl=new Gr(0,0,0,0),Is=new Map,Zh=[],_y=[];class Gfe{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new cue(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:s}=this,l=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(_y.length=0,Zh.length=0,Is.clear(),!l)return;const{minScale:d,maxScale:y}=this.tileInfoView.tileInfo,{spans:g,lodInfo:x}=l,{level:$}=x,{scale:E,center:O,resolution:P}=t.state,R=!t.stationary&&E>this._previousScale;if(this._previousScale=E,this.tiles.length=0,!i&&(E>d||E<y))return this.tiles.length=0,Is.clear(),s.forEach(K=>{this.releaseTile(K)}),s.clear(),_y.length=0,Zh.length=0,Is.clear(),Pp.pool.release(l),!0;s.forEach(K=>K.visible=!0);let L=0,z=0;if(g.length>0)for(const{row:K,colFrom:ee,colTo:se}of g)for(let oe=ee;oe<=se;oe++){L++;const ne=Yl.set($,K,x.normalizeCol(oe),x.getWorldForColumn(oe)).id;if(s.has(ne)){const ae=s.get(ne);ae.isReady?(Is.set(ne,ae),z++):R||this._addParentTile(ne,Is)}else{let ae;if(this._tileCache&&this._tileCache.has(ne)){if(ae=this._tileCache.pop(ne),this.tileIndex.set(ne,ae),ae.isReady){Is.set(ne,ae),z++;continue}}else ae=this.acquireTile(Yl),this.tileIndex.set(ne,ae);R||this._addParentTile(ne,Is)}}const V=z===L;s.forEach((K,ee)=>{if(Yl.set(ee),Is.has(ee))return;const se=this.tileInfoView.intersects(l,Yl),oe=this.cachePolicy==="purge"?Yl.level!==$:Yl.level>$;!se||!R&&V?!oe&&se||Zh.push(ee):K.isReady?oe&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Yl,$)?Zh.push(ee):_y.push(ee):oe&&Zh.push(ee)});for(const K of _y){const ee=s.get(K);ee&&ee.isReady&&Is.set(K,ee)}for(const K of Zh){const ee=s.get(K);this._tileCache?this._tileCache.add(ee):this.releaseTile(ee),s.delete(K)}return Is.forEach(K=>this.tiles.push(K)),s.forEach(K=>{Is.has(K.key.id)||(K.visible=!1)}),this._tileCache&&this._tileCache.prune($,O,P),Pp.pool.release(l),Is.clear(),V}clear(t=!0){const{tileIndex:i}=this;t&&i.forEach(s=>{this.releaseTile(s)}),i.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let s=t,l=null;for(;s=this.tileInfoView.getTileParentId(s),s;)if(this.tileIndex.has(s)){if(l=this.tileIndex.get(s),l&&l.isReady){i.has(l.key.id)||i.set(l.key.id,l);break}}else if(this._tileCache&&this._tileCache.has(s)&&(l=this._tileCache.pop(s),this.tileIndex.set(s,l),l&&l.isReady)){i.has(l.key.id)||i.set(l.key.id,l);break}}_hasReadyAncestor(t,i){const s=Pl();this.tileInfoView.getTileBounds(s,t,!0);for(const l of this.tileIndex.values())if(l.isReady&&l.key.level>=i&&l.key.level<t.level){const d=Pl();if(this.tileInfoView.getTileBounds(d,l.key,!0),jG(d,s))return!0}return!1}}function Nx(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class VM extends Bi{constructor(t,i){super(!0),this.view=t,this.registerIncoming("double-click",i,s=>this._handleDoubleClick(s,i))}_handleDoubleClick(t,i){Nx(t.data,"primary")&&(t.stopPropagation(),i?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class pue extends Bi{constructor(t,i,s){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",s,l=>this._handleDoubleTapDrag(l))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:s}=i;if(s!==this.pointerType)return;t.stopPropagation();const{action:l,delta:d}=i,{view:y}=this,{mapViewNavigation:g}=y;switch(l){case"begin":{const{scale:x}=y;this._startScale=x,this._currentScale=x,this._previousDelta=d,g.begin();break}case"update":{if(this._previousDelta.y===d.y)return;this._previousDelta=d;const x=1.015**d.y,$=this._startScale*x,E=$/this._currentScale;g.setViewpointImmediate(E),this._currentScale=$;break}case"end":{const{constraints:x}=y,{effectiveLODs:$,snapToZoom:E}=x;if(!E||!$)return void g.end();const O=x.snapScale(this._currentScale),P=(d.y>0?Math.max(O,x.snapToPreviousScale(this._startScale)):Math.min(O,x.snapToNextScale(this._startScale)))/this._currentScale;g.zoom(P);break}}}}class b2{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const i=t.data,s=i.pointers.size;switch(i.action){case"start":this.currentCount=s,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=s,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=s,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class due extends Bi{constructor(t,i,s){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",s,l=>this._handleDrag(l)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new b2({start:(i,s)=>{this.view.mapViewNavigation.pan.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{this.view.mapViewNavigation.pan.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{this.view.mapViewNavigation.pan.end(this.view,s.data),s.stopPropagation()},condition:(i,s)=>i===1&&Nx(s.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class fue extends Bi{constructor(t,i,s){super(!0),this.view=t,this.pointerAction=i;const l=this.view.mapViewNavigation;this.dragEventSeparator=new b2({start:(d,y)=>{l.rotate.begin(this.view,y.data),y.stopPropagation()},update:(d,y)=>{l.rotate.update(this.view,y.data),y.stopPropagation()},end:(d,y)=>{l.rotate.end(),y.stopPropagation()},condition:(d,y)=>d===1&&Nx(y.data,this.pointerAction)}),this.registerIncoming("drag",s,d=>this.dragEventSeparator.handle(d))}}function rn(e){let t=e*e;return e<0&&(t*=-1),t}function yue(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function mue(e,t,i){const s=i,l=e.state,d=e.device,y=t.tiltDirection==="forward-down"?1:-1,g=1;return d.deviceType==="standard"?(s.translation[0]=rn(l.axes[0]),s.translation[1]=rn(l.axes[1]),s.translation[2]=rn(l.buttons[7])-rn(l.buttons[6]),s.heading=rn(l.axes[2]),s.tilt=rn(l.axes[3])):d.deviceType==="spacemouse"&&(s.translation[0]=1.2*rn(l.axes[0]),s.translation[1]=1.2*rn(l.axes[1]),s.translation[2]=2*-rn(l.axes[2]),s.heading=1.2*rn(l.axes[5]),s.tilt=1.2*rn(l.axes[3])),s.tilt*=y,zE(s.translation,s.translation,g),s}function gue(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class vue extends Bi{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new Or,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([Te(()=>{var i;return(i=this.view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this.handle.resume(),this.frameTask||(this.frameTask=yp({update:s=>this._frameUpdate(s.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},Ot)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this.view.navigation.gamepad.device;i&&t.data.device!==i||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,yue(this.transformation)):(this.currentDevice=t.data.device,mue(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const i=this.transformation;if(gue(i))return;const s=this.view.viewpoint.clone(),l=this.view.navigation.gamepad.velocityFactor,d=bue*l*t;w2(s,s,[i.translation[0]*d,-i.translation[1]*d]);const y=1+i.translation[2]*_ue*t,g=this.view.constraints.rotationEnabled?-i.heading*wue*t:0,x=this.view.size,$=[x[0]/2,x[1]];QR(s,s,y,g,$,x);const E=this.view.constraints.constrain(s,this.view.viewpoint);this.view.viewpoint=E}}const wue=.06,bue=.7,_ue=6e-4;class xue extends Bi{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",s,l=>this._handleKeyDown(l)),this.registerIncoming("key-up",s,l=>this._handleKeyUp(l)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=this._keyMap[t.data.key];if(this._pressed=s!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),s){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class Sue extends Bi{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",s,l=>this._handleKeyDown(l)),this.registerIncoming("key-up",s,l=>this._handleKeyUp(l)),this.registerIncoming("blur",s,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const s=t.modifiers;if(s.size>0&&!s.has("Shift")||!this.view.constraints.rotationEnabled)return;const l=this._keyToDirection[t.data.key];if(this._pressed=l!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),l){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var ip;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(ip||(ip={}));class $ue extends Bi{constructor(t,i,s){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",s,l=>this._handleKeyDown(l)),i.zoomIn.forEach(l=>this._keysToZoomAction[l]=ip.IN),i.zoomOut.forEach(l=>this._keysToZoomAction[l]=ip.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:s}=t.data;if(!(s in this._keysToZoomAction))return;const l=this._keysToZoomAction[s],{mapViewNavigation:d}=this.view;let y=null;switch(l){case ip.IN:y=d.zoomIn();break;case ip.OUT:y=d.zoomOut();break;default:return}d.begin(),y.then(()=>d.end()),t.stopPropagation()}}const Mue=.6;class Iue extends Bi{constructor(t,i){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,s=>this._handleMouseWheel(s))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this.view.mapViewNavigation,{x:s,y:l,deltaY:d}=t.data,y=1/Mue**(1/60*d),g=i.zoom(y,[s,l]);g&&(this._canZoom=!1,g.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}}class Tue extends Bi{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this.dragEventSeparator=new b2({start:(s,l)=>{i.pinch.begin(this.view,l.data),l.stopPropagation()},update:(s,l)=>{i.pinch.update(this.view,l.data),l.stopPropagation()},end:(s,l)=>{i.pinch.end(this.view),l.stopPropagation()},condition:s=>s>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function GM(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:t.axes.map(i=>kue(i,e.axisThreshold))}:{buttons:[],axes:[]}}function Eue(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function Aue(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function kue(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}class Oue{constructor(t,i){this.element=t,this.input=i,this._hasEventListeners=!1,this._onConnectGamepad=d=>{this._connectGamepad(d.gamepad)},this._onDisconnectGamepad=d=>{const y=d.gamepad,g=y.index,x=this.inputDevices[g];x&&(this._emitGamepadEvent(y,GM(x),!1),this.inputDevices.splice(g,1),this.latestUpdate.splice(g,1),this.input.gamepad.devices.remove(x),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const s="getGamepads"in window.navigator,l=window.isSecureContext;this.supported=s&&l,this.supported&&(this._forEachGamepad(d=>this._connectGamepad(d)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const i=new Mx(t);i.deviceType!=="unknown"&&(this.inputDevices[t.index]=i,this.input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=yp({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this.element.contains(document.activeElement),s=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(l=>{const d=this.inputDevices[l.index];if(!d)return;const y=this.latestUpdate[l.index],g=GM(d),x=s||Aue(g);y&&(y.timestamp===l.timestamp||!y.active&&x||Eue(y.state,g))||this._emitGamepadEvent(l,g,!x)})}_forEachGamepad(t){const i=window.navigator.getGamepads();for(let s=0;s<i.length;s++){const l=i[s];this._validate(l)&&t(l)}}_emitGamepadEvent(t,i,s){const l=this.latestUpdate[t.index],d=l&&l.active;if(!d&&!s)return;const y=!d&&s?"start":d&&s?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:s},this.callback&&this.callback({device:this.inputDevices[t.index],state:i,action:y})}_validate(t){if(!t||!t.connected)return!1;for(let i=0;i<t.axes.length;i++)if(isNaN(t.axes[i]))return!1;return!0}}const qM=pe("trident"),UM=pe("edge"),Cue=pe("chrome"),Pue=pe("ff"),Nue=pe("safari"),Qh={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class _2{constructor(t,i){this.input=i,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Oue(t,this.input),this._gamepadSource.onEvent=s=>this._callback("gamepad",s)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const s=this._active[i];this._element.removeEventListener(lb[i],s),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&lb[i]){const s=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(lb[i],s),this._active[i]=s}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,i){i?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Qh.touchNone:Qh.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Qh.touchPan:Qh.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Qh.touchNone),this._element.classList.remove(Qh.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const s=kR(this._element,t);return _2.test.disableSubpixelCoordinates&&(s.x=Math.round(s.x),s.y=Math.round(s.y)),i.x=s.x,i.y=s.y,i}_handleKey(t,i){const s=Une(i);s&&t==="key-up"&&this._keyDownState.delete(s);const l={native:i,key:s,repeat:s&&this._keyDownState.has(s)};s&&t==="key-down"&&this._keyDownState.add(l.key),this._callback(t,l)}_handlePointer(t,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,s)}_handlePointerPreventDefault(t,i){const s=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,s)}_handleMouseWheel(t,i){let s=i.deltaY;switch(i.deltaMode){case 0:(qM||UM)&&(s=s/document.documentElement.clientHeight*600);break;case 1:s*=30;break;case 2:s*=900}qM||UM?s*=.7:Cue||Nue?s*=.6:Pue&&(s*=1.375);const l=100,d=Math.abs(s);d>l&&(s=s/d*200/(1+Math.exp(-.02*(d-l))));const y=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:s});this._callback(t,y)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const s={native:i};i.preventDefault(),this._callback(t,s)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}_2.test={disableSubpixelCoordinates:!1};const lb={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Rue extends Bi{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function Rx(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function jue(e,t){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}function Lue(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Ur()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[se,oe]=e,[ne,ae]=[oe.x-se.x,oe.y-se.y];return t.radius=Math.sqrt(ne*ne+ae*ae)/2,t.center.x=(se.x+oe.x)/2,t.center.y=(se.y+oe.y)/2,t}let i=0,s=0;for(let se=0;se<e.length;se++)i+=e[se].x,s+=e[se].y;i/=e.length,s/=e.length;const l=e.map(se=>se.x-i),d=e.map(se=>se.y-s);let y=0,g=0,x=0,$=0,E=0,O=0,P=0;for(let se=0;se<l.length;se++){const oe=l[se],ne=d[se],ae=oe*oe,Ie=ne*ne;y+=ae,g+=Ie,x+=oe*ne,$+=ae*oe,E+=Ie*ne,O+=oe*Ie,P+=ne*ae}const R=.5*($+O),L=.5*(E+P),z=y*g-x*x,V=(R*g-L*x)/z,K=(y*L-x*R)/z,ee=Ur(V+i,K+s);return{radius:Math.sqrt(V*V+K*K+(y+g)/e.length),center:ee}}const Bs={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class Fue extends Bi{constructor(t=Bs.maximumDoubleClickDelay,i=Bs.maximumDoubleClickDistance,s=Bs.maximumDoubleTouchDelay,l=Bs.maximumDoubleTouchDistance,d=qf){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=s,this.maximumDoubleTouchDistance=l,this._clock=d,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=ps(t.doubleClickTimeout))}get hasPendingInputs(){return fv(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_handleImmediateClick(t){const i=t.data,s=this._pointerId(i),l=this._pointerState.get(s);if(l){const d=i.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;Rx(l.event.data,i)>d?(this._clearDoubleClickTimeout(s,!0),this._startClick(t)):(this._clearDoubleClickTimeout(s,!1),this._doubleClick.emit(l.event.data,void 0,l.event.modifiers))}else this._startClick(t)}_startClick(t){const i=this._pointerId(t.data),s=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(i,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),s)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const i=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(i,!0)}_handleDrag(t){const i=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(i,!0)}_clearDoubleClickTimeout(t,i){const s=this._pointerState.get(t);s&&(s.doubleClickTimeout.remove(),s.doubleClickTimeout=null,i&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class Due extends Bi{constructor(t=Bs.maximumDoubleClickDelay,i=Bs.maximumDoubleClickDistance,s=Bs.maximumDoubleTouchDelay,l=Bs.maximumDoubleTouchDistance,d=qf){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=s,this.maximumDoubleTouchDistance=l,this._clock=d,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ur(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new b2({start:(y,g)=>this._dragStart(y,g),update:(y,g)=>this._dragUpdate(g),end:(y,g)=>this._dragEnd(g)}),this.registerIncoming("drag",y=>this._dragEventSeparator.handle(y)),this.registerIncoming("pointer-down",y=>this._handlePointerDown(y)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return fv(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout.remove(),i.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,i,s){const{button:l,buttons:d,pointer:y,pointers:g,pointerType:x,timestamp:$}=s;return{action:t,delta:i,button:l,buttons:d,pointer:y,pointers:g,pointerType:x,timestamp:$}}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:s,modifiers:l}=i,{center:d}=s;this._dragStartCenter=d;const y=this._createDoubleTapDragData("begin",Ur(0,0),s);this._doubleTapDrag.emit(y,void 0,l),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:l}=i,d=Ur(l.x-this._dragStartCenter.x,l.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("update",d,i);this._doubleTapDrag.emit(y,void 0,s),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:s}=t,{center:l}=i,d=Ur(l.x-this._dragStartCenter.x,l.y-this._dragStartCenter.y),y=this._createDoubleTapDragData("end",d,i);this._doubleTapDrag.emit(y,void 0,s),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,s=this._pointerId(i),l=this._pointerState.get(s),{pointerType:d}=i.native;if(l){const y=d==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(s),Rx(l.event.data,i)>y?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:i}=t,{pointerId:s,button:l,pointerType:d}=i;return d==="mouse"?`${s}:${l}`:`${d}`}_storePointerDown(t){const{data:i}=t,{pointerType:s}=i.native,l=this._pointerId(i),d=s==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,y=this._clock.setTimeout(()=>this._clearPointerDown(l),d);this._pointerState.set(l,{event:t,doubleTapTimeout:y}),this.refreshHasPendingInputs()}}class zue extends Bi{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,s,l){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:i.buttons,timestamp:l,pointers:Vue(this.activePointerMap),pointer:i,angle:s.angle,radius:s.radius,center:s.center}}_addPointer(t){const i=t.native.pointerId,s=xy(this.activePointerMap).angle,l={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(i,l);const d=Dm(l,yj(this.activePointerMap));l.initialAngle=d,l.lastAngle=d,this._updatePointerAngles(s)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,s=this.activePointerMap.get(i);s?s.event=t:this._addPointer(t)}_removePointer(t){const i=xy(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=xy(this.activePointerMap);this.activePointerMap.forEach(s=>{s.initialAngle=Dm(s,i)-t,s.lastAngle=Dm(s,i)-t})}_emitEvent(t,i,s){const l=xy(this.activePointerMap);this.drag.emit(this._createPayload(t,i,l,s),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,s=t.timestamp;this.activePointerMap.get(i)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,s),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,s=i.currentEvent,l=t.timestamp;switch(i.action){case"start":case"update":this.isDragging?this.activePointerMap.has(s.native.pointerId)?(this._updatePointer(s),!this.isCurrentDragSuppressed&&this._emitEvent("update",s,l)):(this._addPointer(s),this._emitEvent("added",s,l),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(s),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",s,l))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function yj(e){const t=[];return e.forEach(i=>{t.push(Ur(i.event.x,i.event.y))}),Lue(t)}function xy(e){const t=yj(e);let i=0;return e.forEach(s=>{let l=Dm(s,t),d=l-s.lastAngle;for(;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;l=s.lastAngle+d,s.lastAngle=l,i+=l-s.initialAngle}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function Vue(e){const t=new Map;return e.forEach((i,s)=>t.set(s,i.event)),t}function Dm(e,t){const i=e.event,s=i.x-t.center.x,l=i.y-t.center.y;return Math.atan2(l,s)}var BM;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(BM||(BM={}));class Gue extends Bi{constructor(t=Bs.maximumDoubleClickDelay,i=Bs.maximumDoubleClickDistance,s=Bs.maximumDoubleTouchDelay,l=Bs.maximumDoubleTouchDistance,d=qf){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=i,this.maximumDoubleTouchDelay=s,this.maximumDoubleTouchDistance=l,this._clock=d,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",y=>{this._handlePointerLoss(y,"pointer-up")}),this.registerIncoming("pointer-capture-lost",y=>{this._handlePointerLoss(y,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",y=>{this._handlePointerLoss(y,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,s=this._pointerId(i);if(!this._pointerState.has(s)){const l={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(s,l),this.startCapturingPointer(i.native)}}_handlePointerLoss(t,i){const s=t.data,l=this._pointerId(s),d=this._pointerState.get(l);if(d&&i==="pointer-up"&&d.downButton===s.native.button){const y=d.immediateDoubleClick;if(y){y.timeoutHandle.remove();const g=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;Rx(y,t.data)>g?this._startImmediateDoubleClick(t,d):(this._immediateDoubleClick.emit(t.data,void 0,y.modifiers),this._removeState(s))}else this._startImmediateDoubleClick(t,d)}}_startImmediateDoubleClick(t,i){const s=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),s)}}_pointerId(t){const i=t.native;return i.pointerType==="mouse"?`${i.pointerId}:${i.button}`:`${i.pointerType}`}_removeState(t){const i=this._pointerId(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const kd={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class que extends Bi{constructor(t=kd.maximumClickDelay,i=kd.movementUntilMouseDrag,s=kd.movementUntilPenDrag,l=kd.movementUntilTouchDrag,d=kd.holdDelay,y=qf){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=i,this.movementUntilPenDrag=s,this.movementUntilTouchDrag=l,this.holdDelay=d,this._clock=y,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",g=>{this._handlePointerLoss(g,"pointer-up")}),this.registerIncoming("pointer-capture-lost",g=>{this._handlePointerLoss(g,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",g=>{this._handlePointerLoss(g,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,s=i.native.pointerId;let l=null;this._pointerState.size===0&&(l=this._clock.setTimeout(()=>{const y=this._pointerState.get(s);if(y){if(!y.isDragging){const g=y.previousEvent;this._pointerHold.emit(g,void 0,t.modifiers),y.holdEmitted=!0}y.holdTimeout=null}},this.holdDelay));const d={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:l,modifiers:new Set};this._pointerState.set(s,d),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,i,s){return{action:t,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:s}}_handlePointerMove(t){const i=t.data,s=i.native.pointerId,l=this._pointerState.get(s);l&&(l.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",l,i),void 0,l.modifiers):jue(i,l.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),l.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const i=t.data,s=i.native.pointerId;this._pointerState.forEach(l=>{l.holdTimeout!=null&&(l.holdTimeout.remove(),l.holdTimeout=null),l.isDragging||(l.modifiers=t.modifiers,l.isDragging=!0,s===l.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",l,i)):this._pointerDrag.emit(this._createPointerDragData("start",l,l.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const s=t.data,l=s.native.pointerId,d=this._pointerState.get(l);d&&(d.holdTimeout!=null&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,i==="pointer-up"?s:d.previousEvent),void 0,d.modifiers):i==="pointer-up"&&d.downButton===s.native.button&&t.timestamp-d.startTimestamp<=this.maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(s),this._pointerState.delete(l),this.stopCapturingPointer(s.native),this._pointerState.size===0&&this._moveHandle.pause())}}const Sy={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let kc=class extends ze{constructor(){super(...arguments),this._handles=new Or}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([Ws(()=>!e(),()=>this._disconnect()),Ws(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new _2(e,this.view.input),i=[new Gue,new que,new Fue,new zue(this.view.navigation),new Due],s=new Za({eventSource:t,recognizers:i});s.installHandlers("prevent-context-menu",[new Rue],Al.INTERNAL),s.installHandlers("navigation",[new Tue(this.view),new vue(this.view),new Iue(this.view),new VM(this.view),new VM(this.view,[Sy.counter]),new due(this.view,"primary"),new xue(this.view,Sy.pan),new $ue(this.view,Sy.zoom),new Sue(this.view,Sy.rotate),new fue(this.view,"secondary"),new pue(this.view,"touch")],Al.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,Te(()=>{var l,d;return(d=(l=this.view)==null?void 0:l.navigation)==null?void 0:d.browserTouchPanEnabled},l=>{this._source&&(this._source.browserTouchPanningEnabled=!l)},Ot)}get test(){return{inputManager:this._inputManager}}};v([_()],kc.prototype,"view",void 0),v([_()],kc.prototype,"latestPointerType",null),v([_()],kc.prototype,"latestPointerLocation",null),kc=v([H("esri.views.2d.input.MapViewInputManager")],kc);const Uue=kc;var HM,WM,JM,mj={exports:{}};HM=mj,WM=function(){function e(l,d,y,g,x){t(l,d,y||0,g||l.length-1,x||s)}function t(l,d,y,g,x){for(;g>y;){if(g-y>600){var $=g-y+1,E=d-y+1,O=Math.log($),P=.5*Math.exp(2*O/3),R=.5*Math.sqrt(O*P*($-P)/$)*(E-$/2<0?-1:1);t(l,d,Math.max(y,Math.floor(d-E*P/$+R)),Math.min(g,Math.floor(d+($-E)*P/$+R)),x)}var L=l[d],z=y,V=g;for(i(l,y,d),x(l[g],L)>0&&i(l,y,g);z<V;){for(i(l,z,V),z++,V--;x(l[z],L)<0;)z++;for(;x(l[V],L)>0;)V--}x(l[y],L)===0?i(l,y,V):i(l,++V,g),V<=d&&(y=V+1),d<=V&&(g=V-1)}}function i(l,d,y){var g=l[d];l[d]=l[y],l[y]=g}function s(l,d){return l<d?-1:l>d?1:0}return e},(JM=WM())!==void 0&&(HM.exports=JM);const Bue=mj.exports;function ov(e,t){if(!(this instanceof ov))return new ov(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function Hue(e,t,i){if(!i)return t.indexOf(e);for(var s=0;s<t.length;s++)if(i(e,t[s]))return s;return-1}function ec(e,t){E0(e,0,e.children.length,t,e)}function E0(e,t,i,s,l){l||(l=Oc(null)),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0;for(var d,y=t;y<i;y++)d=e.children[y],A0(l,e.leaf?s(d):d);return l}function A0(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function KM(e,t){return e.minX-t.minX}function YM(e,t){return e.minY-t.minY}function ub(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function $y(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Wue(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function Jue(e,t){var i=Math.max(e.minX,t.minX),s=Math.max(e.minY,t.minY),l=Math.min(e.maxX,t.maxX),d=Math.min(e.maxY,t.maxY);return Math.max(0,l-i)*Math.max(0,d-s)}function hb(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function My(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Oc(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function XM(e,t,i,s,l){for(var d,y=[t,i];y.length;)(i=y.pop())-(t=y.pop())<=s||(d=t+Math.ceil((i-t)/s/2)*s,Bue(e,d,t,i,l),y.push(t,d,d,i))}ov.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],s=this.toBBox;if(!My(e,t))return i;for(var l,d,y,g,x=[];t;){for(l=0,d=t.children.length;l<d;l++)y=t.children[l],My(e,g=t.leaf?s(y):y)&&(t.leaf?i.push(y):hb(e,g)?this._all(y,i):x.push(y));t=x.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!My(e,t))return!1;for(var s,l,d,y,g=[];t;){for(s=0,l=t.children.length;s<l;s++)if(d=t.children[s],My(e,y=t.leaf?i(d):d)){if(t.leaf||hb(e,y))return!0;g.push(d)}t=g.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var s=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var l=this.data;this.data=s,s=l}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Oc([]),this},remove:function(e,t){if(!e)return this;for(var i,s,l,d,y=this.data,g=this.toBBox(e),x=[],$=[];y||x.length;){if(y||(y=x.pop(),s=x[x.length-1],i=$.pop(),d=!0),y.leaf&&(l=Hue(e,y.children,t))!==-1)return y.children.splice(l,1),x.push(y),this._condense(x),this;d||y.leaf||!hb(y,g)?s?(i++,y=s.children[i],d=!1):y=null:(x.push(y),$.push(i),i=0,s=y,y=y.children[0])}return this},toBBox:function(e){return e},compareMinX:KM,compareMinY:YM,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,s){var l,d=i-t+1,y=this._maxEntries;if(d<=y)return ec(l=Oc(e.slice(t,i+1)),this.toBBox),l;s||(s=Math.ceil(Math.log(d)/Math.log(y)),y=Math.ceil(d/Math.pow(y,s-1))),(l=Oc([])).leaf=!1,l.height=s;var g,x,$,E,O=Math.ceil(d/y),P=O*Math.ceil(Math.sqrt(y));for(XM(e,t,i,P,this.compareMinX),g=t;g<=i;g+=P)for(XM(e,g,$=Math.min(g+P-1,i),O,this.compareMinY),x=g;x<=$;x+=O)E=Math.min(x+O-1,$),l.children.push(this._build(e,x,E,s-1));return ec(l,this.toBBox),l},_chooseSubtree:function(e,t,i,s){for(var l,d,y,g,x,$,E,O;s.push(t),!t.leaf&&s.length-1!==i;){for(E=O=1/0,l=0,d=t.children.length;l<d;l++)x=ub(y=t.children[l]),($=Wue(e,y)-x)<O?(O=$,E=x<E?x:E,g=y):$===O&&x<E&&(E=x,g=y);t=g||t.children[0]}return t},_insert:function(e,t,i){var s=this.toBBox,l=i?e:s(e),d=[],y=this._chooseSubtree(l,this.data,t,d);for(y.children.push(e),A0(y,l);t>=0&&d[t].children.length>this._maxEntries;)this._split(d,t),t--;this._adjustParentBBoxes(l,d,t)},_split:function(e,t){var i=e[t],s=i.children.length,l=this._minEntries;this._chooseSplitAxis(i,l,s);var d=this._chooseSplitIndex(i,l,s),y=Oc(i.children.splice(d,i.children.length-d));y.height=i.height,y.leaf=i.leaf,ec(i,this.toBBox),ec(y,this.toBBox),t?e[t-1].children.push(y):this._splitRoot(i,y)},_splitRoot:function(e,t){this.data=Oc([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ec(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var s,l,d,y,g,x,$,E;for(x=$=1/0,s=t;s<=i-t;s++)y=Jue(l=E0(e,0,s,this.toBBox),d=E0(e,s,i,this.toBBox)),g=ub(l)+ub(d),y<x?(x=y,E=s,$=g<$?g:$):y===x&&g<$&&($=g,E=s);return E},_chooseSplitAxis:function(e,t,i){var s=e.leaf?this.compareMinX:KM,l=e.leaf?this.compareMinY:YM;this._allDistMargin(e,t,i,s)<this._allDistMargin(e,t,i,l)&&e.children.sort(s)},_allDistMargin:function(e,t,i,s){e.children.sort(s);var l,d,y=this.toBBox,g=E0(e,0,t,y),x=E0(e,i-t,i,y),$=$y(g)+$y(x);for(l=t;l<i-t;l++)d=e.children[l],A0(g,e.leaf?y(d):d),$+=$y(g);for(l=i-t-1;l>=t;l--)d=e.children[l],A0(x,e.leaf?y(d):d),$+=$y(x);return $},_adjustParentBBoxes:function(e,t,i){for(var s=i;s>=0;s--)A0(t[s],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():ec(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class av{constructor(t,i){this.key=new Gr(0,0,0,0),this.bounds=Pl(),this.objectIds=new Set,this.key.set(i);const s=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=s.resolution,this.scale=s.scale,this.level=s.level}get id(){return this.key.id}get extent(){return xt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),i=Sr.acquire();for(let s=0;s<t.length;s++)i[s]=new av(this.tileInfoView,t[s]);return i}getQuantizationParameters(){return uO.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Xl={added:[],removed:[]},cb=new Set,Kue=new Gr(0,0,0,0);class Yue extends Fl{constructor(t){super(),this._tiles=new Map,this._index=ov(9,pe("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const s of t.added)if(!this.has(s)){const l=new av(this.tileScheme,s);this._tiles.set(s,l),this._index.insert(l),i.added.push(l)}for(const s of t.removed)if(this.has(s)){const l=this.get(s);this._tiles.delete(s),this._index.remove(l),i.removed.push(l)}this.tiles.length=0,this._tiles.forEach(s=>this.tiles.push(s)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:s,lodInfo:l}=i,{level:d}=l;if(s.length>0)for(const{row:y,colFrom:g,colTo:x}of s)for(let $=g;$<=x;$++){const E=Kue.set(d,y,l.normalizeCol($),l.getWorldForColumn($)).id;if(cb.add(E),!this.has(E)){const O=new av(this.tileScheme,E);this._tiles.set(E,O),this._index.insert(O),this.tiles.push(O),Xl.added.push(O)}}for(let y=this.tiles.length-1;y>=0;y--){const g=this.tiles[y];cb.has(g.id)||(this._tiles.delete(g.id),this.tiles.splice(y,1),this._index.remove(g),Xl.removed.push(g))}(Xl.added.length||Xl.removed.length)&&this.emit("update",Xl),Pp.pool.release(i),cb.clear(),Xl.added.length=0,Xl.removed.length=0}}let Xue=0,rl=class extends ze{constructor(){super(...arguments),this.color=new Je([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return Xue++}};v([_({readOnly:!0})],rl.prototype,"version",null),v([_({type:Je})],rl.prototype,"color",void 0),v([_({type:Je})],rl.prototype,"haloColor",void 0),v([_()],rl.prototype,"haloOpacity",void 0),v([_()],rl.prototype,"fillOpacity",void 0),rl=v([H("esri.views.2d.support.HighlightOptions")],rl);const gj=rl,Zue=e=>e.includes("Brush");class vj{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),Zue(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function Que(e,t,i,s,l,d,y,g){let x;e.ignorePadding&&(s={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?x=[e.width,e.height]:e.width==null&&e.height!=null?x=[e.height,e.height]:e.width!=null&&e.height==null?x=[e.width,e.width]:e.width==null&&e.height==null&&(x=null);const $=i[0]-(s.left+s.right),E=i[1]-(s.top+s.bottom);let O,P,R=e.area||{x:0,y:0,width:$,height:E};if(x){const L=$/E,z=x[0]/x[1];if(z>L){const V=R.width/z;R={x:R.x,y:Math.round(R.y+(R.height-V)/2),width:R.width,height:Math.round(V)}}else{const V=R.height*z;R={x:Math.round(R.x+(R.width-V)/2),y:R.y,width:Math.round(V),height:R.height}}}else x=[R.width,R.height];return x[0]>R.width?(O=Math.min(x[0]/R.width,t),P=x[0]/R.width/O):(O=1,P=x[0]/R.width),{resolutionScale:O,cropArea:{x:Math.round((R.x+s.left)*O),y:Math.round((R.y+s.top)*O),width:Math.round(R.width*O),height:Math.round(R.height*O)},outputScale:P,format:l,quality:d,children:y,rotation:g}}function ehe(e,t,i){const{ctx:s,canvas:l}=wj(e,i),d=s.getImageData(0,0,e.width,e.height),y=rhe(l,t);return bj(l),{dataUrl:y,data:d}}function the(e,t){const{ctx:i,canvas:s}=wj(e,t),l=i.getImageData(0,0,e.width,e.height);return bj(s),l}function wj(e,t){const i=ihe();t.premultipliedAlpha&&uhe(e),i.width=e.width,i.height=e.height;const s=i.getContext("2d");return s.putImageData(e,0,0),t.flipY&&lhe(s),{ctx:s,canvas:i}}function bj(e){e.width=0,e.height=0}function ihe(){return he(pb)&&(pb=document.createElement("canvas")),pb}let pb=null;function rhe(e,t){const i=hhe[t.format],s=t.quality/100;return e.toDataURL(i,s)}function she(e,t){const i=ahe(e),s=phe[i];return{format:i,quality:Kr(t!=null?t:s,0,100)}}function nhe(e,t){return t/Math.max(e[0],e[1])}function qfe(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(lv)try{return new ImageData(e,t)}catch{lv=!1}return _j(e,t,i)}function Ufe(e,t,i,s){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(lv)try{return new ImageData(e,t,i)}catch{lv=!1}const l=_j(t,i,s);return l.data.set(e,0),l}function Bfe(e,t,i,s=0,l=0,d=e.width-s,y=e.height-l,g=!1){const{data:x}=e,{width:$,height:E,data:O}=t,P=d/$,R=y/E,L=Math.ceil(P/2),z=Math.ceil(R/2),V=e.width;for(let K=0;K<E;K++)for(let ee=0;ee<$;ee++){const se=4*(ee+(g?E-K-1:K)*$);let oe=0,ne=0,ae=0,Ie=0,Se=0,Pe=0;const Re=(K+.5)*R;for(let De=Math.floor(K*R);De<(K+1)*R;De++){const Le=Math.abs(Re-(De+.5))/z,qe=(ee+.5)*P,Oe=Le*Le;for(let zt=Math.floor(ee*P);zt<(ee+1)*P;zt++){const ir=Math.abs(qe-(zt+.5))/L,Xt=Math.sqrt(Oe+ir*ir);if(Xt>=1)continue;let rr=2*Xt*Xt*Xt-3*Xt*Xt+1;const Xr=4*(s+zt+(l+De)*V);Pe+=rr*x[Xr+3],ne+=rr,!i&&x[Xr+3]<255&&(rr=rr*x[Xr+3]/255),ae+=rr*x[Xr],Ie+=rr*x[Xr+1],Se+=rr*x[Xr+2],oe+=rr}}O[se]=ae/oe,O[se+1]=Ie/oe,O[se+2]=Se/oe,O[se+3]=Pe/ne}return t}function _j(e,t,i){return i||(i=ohe()),i.getContext("2d").createImageData(e,t)}let Od=null,lv=!0;function ohe(){return Od||(Od=document.createElement("canvas"),Od.width=1,Od.height=1),Od}function ahe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return che}}function lhe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function uhe(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const l=t[s+3];if(l!==255&&l>0){const d=255/l;t[s+0]=t[s+0]*d,t[s+1]=t[s+1]*d,t[s+2]=t[s+2]*d}}}const hhe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},ZM=98,che="png",phe={png:100,jpg:ZM,jpeg:ZM};var wi;function Hfe(e,t,i={}){const s=xj(e);for(;s.length>1;){const l=uv(t,s.shift(),i);if(Y(l))return l}return dhe(t,s.shift(),i)}function xj(e){const t=pe("esri-force-webgl");if(t===wi.WEBGL1||t===wi.WEBGL2)return[t];switch(e){case"2d":return pe("mac")&&pe("chrome")?[wi.WEBGL1,wi.WEBGL2]:[wi.WEBGL2,wi.WEBGL1];case"3d":return[wi.WEBGL2,wi.WEBGL1]}}function dhe(e,t,i={}){if(!window.WebGLRenderingContext)return QM(e,fhe),null;const s=uv(e,t,i);return he(s)&&QM(e,yhe),s}function uv(e,t,i={}){const s=t===wi.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let l=null;for(const d of s){try{l=e.getContext(d,i)}catch{}if(l)break}return l}function QM(e,t){const i=e.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(wi||(wi={}));const fhe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',yhe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let db,fb;function mhe(e){const t=xj(e);for(;t.length>1;){const i=eI(t.shift());if(i.available)return i}return eI(t.shift())}function eI(e){switch(e){case wi.WEBGL1:return ghe();case wi.WEBGL2:return vhe()}}function ghe(){return db||(db=_he()),db}function vhe(){return fb||(fb=xhe()),fb}class Sj{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class whe extends Sj{constructor(){super(...arguments),this.type=wi.WEBGL1}}class bhe extends Sj{constructor(){super(...arguments),this.type=wi.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function $j(e,t){var d;if(e===wi.WEBGL1&&typeof WebGLRenderingContext===void 0||e===wi.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const i=document.createElement("canvas");if(!i)return null;let s=uv(i,e,{failIfMajorPerformanceCaveat:!0});if(he(s)&&(s=uv(i,e),Y(s)&&(t.majorPerformanceCaveat=!0)),he(s))return s;if(e===wi.WEBGL1){const y=(d=s.getParameter(s.VERSION))==null?void 0:d.match(/^WebGL\s+([\d.]*)/);if(y){const g=parseFloat(y[1]);t.available=g>=.94}}else t.available=!0;t.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const l=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return l&&(t.supportsHighPrecisionFragment=l.precision>0),s}function _he(){const e=new whe,t=$j(wi.WEBGL1,e);return he(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function xhe(){const e=new bhe,t=$j(wi.WEBGL2,e);return he(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function She(e){const t=mhe(e);if(!t.available)return new te("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new te("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new te("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new te("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===wi.WEBGL1){if(!t.supportsElementIndexUint)return new te("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new te("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new te("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function $he(e){return e&&"nodeType"in e}function Mhe(e){return e&&typeof e.render=="function"}const tI={component:"esri-component"};let Au=class extends ze{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(tI.component),t&&t.classList.remove(tI.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||$he(e)?(this._set("widget",null),j6(e)):(Mhe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};v([_({dependsOn:[]})],Au.prototype,"id",null),v([_()],Au.prototype,"node",null),v([mt("node")],Au.prototype,"castNode",null),v([_({readOnly:!0})],Au.prototype,"widget",void 0),Au=v([H("esri.views.ui.Component")],Au);const zm=Au,Ihe={left:0,top:0,bottom:0,right:0},Mj={bottom:30,top:15,right:15,left:15},yb="manual",yr={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function The(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function mb(e){const t=e,i=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(i===null||i===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function gb(e,{top:t,bottom:i,left:s,right:l}){e.style.top=t,e.style.bottom=i,e.style.left=s,e.style.right=l}let Jo=class extends Fl.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new Or,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&gb(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&gb(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([Te(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,Ot),Te(()=>this.padding,this._applyUIPadding,Ot)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(yr.ui),jQ(e),this._attachContainers(e)),t&&(t.classList.remove(yr.ui),gb(t,{top:"",bottom:"",left:"",right:""}),QO(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.top+t.bottom;return Math.max(e-i,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Mj,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),i=t.left+t.right;return Math.max(e-i,0)}add(e,t){let i,s;if(Array.isArray(e))return void e.forEach(d=>this.add(d,t));const l=mb(e);l&&({index:i,position:t,component:e,key:s}=l),t&&typeof t=="object"&&({index:i,key:s,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,s)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,t));const i=this._find(e);if(i){const s=this._componentToKey;if(s.has(e)&&s.get(e)!==t)return;const l=this._components.indexOf(i);return i.node.parentNode&&i.node.parentNode.removeChild(i.node),this._componentToKey.delete(e),this._components.splice(l,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,i)=>t.concat(i)):(e=e||yb)===yb?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(yr.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(d=>this.move(d,t)),!e)return;let i;const s=mb(e)||mb(t);if(s&&(i=s.index,t=s.position,e=s.component||e),t&&!this._isValidPosition(t))return;const l=this.remove(e);l&&this.add(l,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,s){e instanceof zm||(e=new zm({node:e})),this._place({component:e,position:t,index:i}),this._components.push(e),s&&this._componentToKey.set(e,s)}_find(e){return e?e instanceof zm?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||Ihe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(yr.innerContainer),e.classList.add(yr.cornerContainer);const t=document.createElement("div");t.classList.add(yr.innerContainer),t.classList.add(yr.manualContainer);const i=document.createElement("div");i.classList.add(yr.topLeft),i.classList.add(yr.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(yr.topRight),s.classList.add(yr.corner),e.appendChild(s);const l=document.createElement("div");l.classList.add(yr.bottomLeft),l.classList.add(yr.corner),e.appendChild(l);const d=document.createElement("div");d.classList.add(yr.bottomRight),d.classList.add(yr.corner),e.appendChild(d),this._innerContainer=e,this._manualContainer=t;const y=Sl();this._cornerNameToContainerLookup={"top-left":i,"top-right":s,"bottom-left":l,"bottom-right":d,"top-leading":y?s:i,"top-trailing":y?i:s,"bottom-leading":y?d:l,"bottom-trailing":y?l:d},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,i=e.position||yb,s=e.index,l=this._positionNameToContainerLookup[i],d=s>-1;if(The(t.widget)&&t.widget.startup(),!d)return void l.appendChild(t.node);const y=Array.prototype.slice.call(l.children);if(s===0)return void(l.firstChild?r8(t.node,l.firstChild):l.appendChild(t.node));s>=y.length?l.appendChild(t.node):r8(t.node,y[s])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,i=null;return this._components.some(s=>(t=s===e,t&&(i=s),t)),i}_findById(e){let t,i=null;return this._components.some(s=>(t=s.id===e,t&&(i=s),t)),i}_findByNode(e){let t,i=null;return this._components.some(s=>(t=s.node===e,t&&(i=s),t)),i}};v([_()],Jo.prototype,"container",null),v([_()],Jo.prototype,"height",null),v([_({value:Mj})],Jo.prototype,"padding",null),v([mt("padding")],Jo.prototype,"castPadding",null),v([_()],Jo.prototype,"view",void 0),v([_()],Jo.prototype,"width",null),Jo=v([H("esri.views.ui.UI")],Jo);const Ehe=Jo;function iI(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function Ahe(e,t){return e.length!==t.length||e.some((i,s)=>i.text!==t[s].text)}function Iy(e,t,i){!i||!t||e.find(s=>s.layerView===t&&s.text===i)||e.push({text:i,layerView:t})}function khe(e){return e.type==="bing-maps"}const ka=[];let Cc=class extends Ef{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ge,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const i=this.get("view.allLayerViews");i&&this.handles.add(i.map(s=>Te(()=>{var l;return[s.suspended,(l=s.layer)==null?void 0:l.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.handles.add([Eh(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ws(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");ka.length=0,e?(e.forEach(t=>{var l;if(t.suspended||!((l=t.layer)!=null&&l.attributionVisible))return;const i=t.layer;if(iI(i,"user"))return void Iy(ka,t,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(t)){const d=this._fetchedAttributionData.get(t);return void(d?Iy(ka,t,this._getDynamicAttribution(d,this.view,i)):iI(i)&&Iy(ka,t,i.copyright))}return void this._fetchAttributionData(t)}const s=i.get("portalItem.accessInformation");Iy(ka,t,s||i.copyright)}),Ahe(this.items,ka)&&(this.items.removeAll(),this.items.addMany(ka)),ka.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await n2(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,khe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,s={};if(!i)return s;for(let l=0;l<i.length;l++){const d=i[l],y=d.coverageAreas;if(!y)return;for(const g of y){const x=g.bbox,$=g.zoomMin-(t&&g.zoomMin?1:0),E=g.zoomMax-(t&&g.zoomMax?1:0),O={xmin:x[1],ymin:x[0],xmax:x[3],ymax:x[2],spatialReference:Ye.WGS84},P={extent:oa(O),attribution:d.attribution||"",score:g.score!=null?g.score:100,id:l};for(let R=$;R<=E;R++)s[R]=s[R]||[],s[R].push(P)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,t,i){const{extent:s,scale:l}=t;let d=i.tileInfo.scaleToZoom(l);if(d=Math.min(e.maxKey,Math.round(d)),!s||d==null||d<=-1)return"";const y=e[d],g=Iv(s.center.clone().normalize(),t.spatialReference),x={};return y?y.filter($=>{const E=!x[$.id]&&g&&Tv($.extent,g);return E&&(x[$.id]=!0),E}).sort(($,E)=>E.score-$.score||$.objectId-E.objectId).map($=>$.attribution).join(", "):""}};v([_({readOnly:!0,type:Ge})],Cc.prototype,"items",void 0),v([_({readOnly:!0})],Cc.prototype,"state",null),v([_()],Cc.prototype,"view",void 0),Cc=v([H("esri.widgets.Attribution.AttributionViewModel")],Cc);const Ij=Cc,Oa={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let wr=class extends Cr{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.iconClass=Oa.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Ij}initialize(){this.own(Eh(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[Oa.open]:this._isOpen};return le("div",{bind:this,class:this.classes(Oa.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return le("div",{class:Oa.poweredBy},"Powered by"," ",le("a",{class:Oa.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?"0":"",{attributionText:s}=this,l={[Oa.sourcesOpen]:e,[Oa.interactive]:t};return le("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Oa.sources,l),innerHTML:s,tabindex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:s,scrollWidth:l}=e,d=l>s,y=this._attributionTextOverflowed!==d;if(this._attributionTextOverflowed=d,y&&(t=!0),this._isOpen){const g=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,g&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};v([_()],wr.prototype,"_isOpen",void 0),v([_()],wr.prototype,"_isInteractive",null),v([_()],wr.prototype,"_attributionTextOverflowed",void 0),v([_()],wr.prototype,"_prevSourceNodeHeight",void 0),v([_({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],wr.prototype,"attributionText",null),v([_()],wr.prototype,"iconClass",void 0),v([_()],wr.prototype,"itemDelimiter",void 0),v([_({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],wr.prototype,"label",void 0),v([_(),Wr("esri/widgets/Attribution/t9n/Attribution")],wr.prototype,"messages",void 0),v([Be("viewModel.view")],wr.prototype,"view",void 0),v([_({type:Ij})],wr.prototype,"viewModel",void 0),v([Ds()],wr.prototype,"_toggleState",null),wr=v([H("esri.widgets.Attribution")],wr);const Ohe=wr,Che="esri.widgets.CompassViewModel";let ku=class extends vR(ze){constructor(e){super(e),this._handles=new Or,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(Te(()=>this.view,this._updateRotationWatcher,Ot))}destroy(){this._handles=ps(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?Te(()=>e==null?void 0:e.rotation,this._updateForRotation,Ot):Te(()=>e==null?void 0:e.camera,this._updateForCamera,Ot))}};v([_({readOnly:!0})],ku.prototype,"canShowNorth",null),v([_()],ku.prototype,"orientation",void 0),v([_({readOnly:!0})],ku.prototype,"state",null),v([_()],ku.prototype,"view",void 0),ku=v([H(Che)],ku);const Tj=ku,Ca={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let io=class extends Cr{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Ca.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Tj}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,i=t==="disabled",s=(t==="rotation"?"rotation":"compass")=="compass",l=i?-1:0,d={[Ca.disabled]:i,[Ca.interactive]:!i},y={[Ca.northIcon]:s,[Ca.rotationIcon]:!s},{messages:g}=this;return le("div",{bind:this,class:this.classes(Ca.base,d),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:l,"aria-label":g.reset,title:g.reset},le("span",{"aria-hidden":"true",class:this.classes(Ca.icon,y),styles:this._toRotationTransform(e)}),le("span",{class:Ca.text},g.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};v([Be("viewModel.goToOverride")],io.prototype,"goToOverride",void 0),v([_()],io.prototype,"iconClass",void 0),v([_({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],io.prototype,"label",void 0),v([_(),Wr("esri/widgets/Compass/t9n/Compass")],io.prototype,"messages",void 0),v([Be("viewModel.view")],io.prototype,"view",void 0),v([_({type:Tj})],io.prototype,"viewModel",void 0),v([Ds()],io.prototype,"_reset",null),io=v([H("esri.widgets.Compass")],io);const Phe=io;let Pc=class extends ze{constructor(e){super(e),this._handles=new Or,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(Ws(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};v([_({readOnly:!0})],Pc.prototype,"state",null),v([_()],Pc.prototype,"navigationMode",void 0),v([_()],Pc.prototype,"view",void 0),Pc=v([H("esri.widgets.NavigationToggleViewModel")],Pc);const Ej=Pc,Ts={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let ro=class extends Cr{constructor(e,t){super(e,t),this.iconClass=Ts.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Ej}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",i={[Ts.disabled]:e,[Ts.isLayoutHorizontal]:this.layout==="horizontal"},s={[Ts.activeButton]:t},l={[Ts.activeButton]:!t},d=e?-1:0,y=this.messages.toggle;return le("div",{bind:this,class:this.classes(Ts.base,i),onclick:this._toggle,onkeydown:this._toggle,tabIndex:d,"aria-label":y,title:y},le("div",{class:this.classes(Ts.button,Ts.panButton,s)},le("span",{class:Ts.panIcon})),le("div",{class:this.classes(Ts.button,Ts.rotateButton,l)},le("span",{class:Ts.rotationIcon})))}_toggle(){this.toggle()}};v([_()],ro.prototype,"iconClass",void 0),v([_({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ro.prototype,"label",void 0),v([_({value:"vertical"})],ro.prototype,"layout",null),v([_(),Wr("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ro.prototype,"messages",void 0),v([Be("viewModel.view")],ro.prototype,"view",void 0),v([_({type:Ej})],ro.prototype,"viewModel",void 0),v([Ds()],ro.prototype,"_toggle",null),ro=v([H("esri.widgets.NavigationToggle")],ro);const Nhe=ro,Cd={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let sl=class extends Cr{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[Cd.disabled]:!this.enabled,[Cd.interactive]:this.enabled},i={[this.iconClass]:!!this.iconClass};return le("div",{bind:this,class:this.classes(Cd.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},le("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Cd.icon,i)}),le("span",{class:Cd.iconText},this.title))}_triggerAction(){this.action.call(this)}};v([_()],sl.prototype,"action",void 0),v([_()],sl.prototype,"enabled",void 0),v([_()],sl.prototype,"iconClass",void 0),v([_()],sl.prototype,"title",void 0),v([Ds()],sl.prototype,"_triggerAction",null),sl=v([H("esri.widgets.IconButton")],sl);const rI=sl;let Nc=class extends ze{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};v([_({readOnly:!0})],Nc.prototype,"canZoomIn",null),v([_({readOnly:!0})],Nc.prototype,"canZoomOut",null),v([_()],Nc.prototype,"view",void 0),Nc=v([H("esri.widgets.Zoom.ZoomConditions2D")],Nc);const Rhe=Nc;let Rc=class extends ze{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};v([_({readOnly:!0})],Rc.prototype,"canZoomIn",null),v([_({readOnly:!0})],Rc.prototype,"canZoomOut",null),v([_()],Rc.prototype,"view",void 0),Rc=v([H("esri.widgets.Zoom.ZoomConditions3D")],Rc);const jhe=Rc;let nl=class extends ze{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Rhe({view:e}):e.type==="3d"&&(this._zoomConditions=new jhe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Pb(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Pb(e.goTo({zoomFactor:.5}))}};v([_()],nl.prototype,"_zoomConditions",void 0),v([_({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],nl.prototype,"canZoomIn",void 0),v([_({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],nl.prototype,"canZoomOut",void 0),v([_({readOnly:!0})],nl.prototype,"state",null),v([_()],nl.prototype,"view",null),nl=v([H("esri.widgets.Zoom.ZoomViewModel")],nl);const Aj=nl,Pd={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Ko=class extends Cr{constructor(e,t){super(e,t),this.iconClass=Pd.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Aj}initialize(){this._zoomInButton=new rI({action:this.zoomIn.bind(this),iconClass:Pd.zoomInIcon}),this._zoomOutButton=new rI({action:this.zoomOut.bind(this),iconClass:Pd.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Pd.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,le("div",{class:this.classes(Pd.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};v([_()],Ko.prototype,"iconClass",void 0),v([_({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ko.prototype,"label",void 0),v([_({value:"vertical"})],Ko.prototype,"layout",null),v([_(),Wr("esri/widgets/Zoom/t9n/Zoom")],Ko.prototype,"messages",void 0),v([Be("viewModel.view")],Ko.prototype,"view",void 0),v([_({type:Aj})],Ko.prototype,"viewModel",void 0),Ko=v([H("esri.widgets.Zoom")],Ko);const Lhe=Ko,kj="esri.views.ui.DefaultUI";function Fhe(e){return e&&e.view!==void 0}Me.getLogger(kj);let Vm=class extends Ehe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([Te(()=>this.components,this._componentsWatcher.bind(this),Ot),Te(()=>this.view,this._updateViewAwareWidgets.bind(this),Ot)])}_add(e,t,i,s){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,i,s)}_removeComponents(e){e.forEach(t=>{const i=this._find(t);i&&(this.remove(i),i.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const i=this._find(t),s=i&&i.widget;Fhe(s)&&(s.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new zm({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new Ohe({view:this.view})}_createCompass(){return new Phe({view:this.view})}_createNavigationToggle(){return new Nhe({view:this.view})}_createZoom(){return new Lhe({view:this.view})}};v([_()],Vm.prototype,"components",void 0),Vm=v([H(kj)],Vm);const Dhe=Vm;let Gm=class extends Dhe{constructor(e){super(e),this.components=["attribution","zoom"]}};v([_()],Gm.prototype,"components",void 0),Gm=v([H("esri.views.ui.2d.DefaultUI2D")],Gm);const Oj=Gm;var R5;let qm=R5=class extends ce{constructor(e){super(e),this.color=new Je([0,0,0,1])}clone(){return new R5(ie({color:this.color}))}};v([_({type:Je,json:{write:!0}})],qm.prototype,"color",void 0),qm=R5=v([H("esri.webmap.background.ColorBackground")],qm);const x2=qm,Ao=Me.getLogger("esri.views.MapView");let Cj,Pj,Nj,Rj,jj,Lj;async function zhe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:s,MagnifierView2D:l,Stage:d}]=await Promise.all([fe(()=>import("./webglDeps.833747d4.js"),["assets/webglDeps.833747d4.js","assets/VertexArrayObject.e9c17f76.js","assets/Texture.97806b82.js","assets/enums.de935fa5.js","assets/ProgramTemplate.f648ddbe.js","assets/programUtils.f5791d71.js"]),fe(()=>import("./mapViewDeps.7cf88135.js"),["assets/mapViewDeps.7cf88135.js","assets/CIMSymbolHelper.437730f6.js","assets/BidiEngine.ec67919b.js","assets/enums.6e42a319.js","assets/MaterialKey.8d919001.js","assets/Utils.6a347352.js","assets/enums.de935fa5.js","assets/Texture.97806b82.js","assets/VertexElementDescriptor.d386088d.js","assets/GeometryUtils.814cb798.js","assets/utils.c9645ca6.js","assets/WGLContainer.e8ab7d6c.js","assets/pixelUtils.4b18f06d.js","assets/VertexArrayObject.e9c17f76.js","assets/ProgramTemplate.f648ddbe.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/enums.2a1fad7f.js","assets/programUtils.f5791d71.js","assets/ExpandedCIM.e9591122.js","assets/quantizationUtils.852042e2.js","assets/_commonjsHelpers.01f5fe30.js","assets/imageutils.5bcd7789.js","assets/Matcher.2cff3216.js","assets/visualVariablesUtils.3d200005.js","assets/visualVariablesUtils.15bb2785.js","assets/tileUtils.4f6f0a33.js","assets/TileClipper.45a2e905.js","assets/Geometry.b68345ae.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/CircularArray.747a350c.js","assets/requestImageUtils.799dbb6b.js","assets/ComputedAttributeStorage.3978cd1b.js","assets/centroid.cead202c.js","assets/BaseGraphicContainer.fad6790a.js","assets/normalizeUtilsSync.a11435a6.js","assets/projectionSupport.0cf0914c.js","assets/json.d1a0fa35.js","assets/FeatureContainer.52f9bd64.js","assets/TileContainer.ef5fef68.js","assets/schemaUtils.d6eeadc3.js","assets/createSymbolSchema.e034cbfe.js","assets/MD5.97b39efc.js","assets/util.5179d486.js","assets/vec3f32.8d37ecf5.js","assets/GraphicContainer.a70edf79.js"])]);Pj=e,Nj=t,Rj=i,jj=s,Lj=l,Cj=d}const sI=160;function Vhe(e){return e&&e.declaredClass==="esri.Viewpoint"}let Qe=class extends aY(doe(foe(pae))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Mp({getCollections:()=>{var t,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new mle(this),this._pePromise=null,this.floors=new Ge,this.highlightOptions=new gj,this.inputManager=new Uue({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new vj,this.type="2d",this.ui=new Oj,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new sj,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([Te(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(sI)},$p),this.on("resize",t=>this._resizeHandler(t)),Te(()=>{var t;return(t=this.animationManager)==null?void 0:t.animation},t=>{this.animation=t})]),DH()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Yue(this.featuresTilingScheme)}get initialExtentRequired(){var y;const{scale:e,constraints:t,center:i,viewpoint:s,extent:l}=this;let d=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((y=this.map.initialViewProperties)==null?void 0:y.viewpoint))&&!l&&(t!=null&&t.effectiveLODs||(d=-1),(!i||e===0&&d===-1)&&(!s||!Y(s.targetGeometry)||s.targetGeometry.type!=="extent"&&!s.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Ah()||(this._pePromise||(this._pePromise=kh().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,i=e.targetGeometry;return!!Rl(i.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const i=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(i,i)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new He({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(s){return void Ao.error(new te("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:s}))}const i=this.viewpoint;T5(i,i,t),this.viewpoint=i}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(Te(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},$p),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ao.error(new te("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(s){return void Ao.error(new te("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;ele(i,i,t,this.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;ple(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;NM(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,i;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?i=new te("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):he(e.targetGeometry)&&(i=new te("mapview:invalid-viewpoint","geometry not defined"))}catch(l){i=new te("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:l})}if(i)return void Ao.error(i);this._scaleBeforeChangingSpatialReference=null;const s=new Zi({targetGeometry:new He,scale:0,rotation:0});Ln(s,t),this.constraints.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this.frameTask.requestFrame(),this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const i=this._get("extent");return i&&(this._set("extent",null),this._set("center",i.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;NM(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),Tf(()=>this.ready,t).then(()=>{const i={animate:!0,...t},s=Xae(e,this);return this.animation.update(s),this._gotoTask={},i.animate?this._gotoAnimated(s,i):this._gotoImmediate(s,i)});Ao.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const i=AM(e)?EM(this,e):e;if(!this.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set,l=!1,d=null,y=null;t!=null&&t.include?oI(t.include,nI(this,E=>s.add(E),E=>{d||(d=new Set),d.add(E)},E=>s.add(E),()=>l=!0)):(l=!0,s=new Set(this.allLayerViews)),t!=null&&t.exclude&&oI(t.exclude,nI(this,E=>s.delete(E),E=>{y||(y=new Set),y.add(E)}));const g=this.allLayerViews.filter(E=>!E.suspended&&s.has(E)).reverse(),x=this.toMap(i);let $=[...l?this.graphicsView.hitTest(x).map(E=>({type:"graphic",graphic:E,layer:null,mapPoint:x})):[],...await Promise.all(g.map(E=>E.hitTest(x,i)).toArray())].filter(Y).flat().filter(Y);return d&&($=$.filter(E=>!("graphic"in E)||!E.graphic||d.has(j5(E.graphic)))),y&&($=$.filter(E=>!("graphic"in E)||!E.graphic||y.has(j5(E.graphic)))),{screenPoint:i,results:$}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return ehe(i,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),i=await this._stage.takeScreenshot(t);return the(i,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,nhe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let i;e.layers?(i=[],e.layers.forEach(d=>{const y=this.allLayerViews.find(g=>g.layer.id===d.id);y&&"container"in y&&y.container&&i.push(y.container)})):i=this._stage.children;const{format:s,quality:l}=she(e.format,e.quality);return Que(e,t,this.size,this.padding,s,l,i,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=AM(e)?EM(this,e):e,i=[0,0],[s,l]=this.state.toMap(i,[t.x,t.y]),d=this.spatialReference;return new He({x:s,y:l,spatialReference:d})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),i=[t.x,t.y];return this.state.toScreen(i,i),Ur(i[0],i[1])}on(e,t,i,s){return this.inputManager&&this.viewEvents.on(e,t,i,s)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,t,i;return this.map&&"initialViewProperties"in this.map&&((t=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:t.spatialReference)||((i=this.defaultsFromMap)==null?void 0:i.spatialReference)||null}hasLayerViewModule(e){return jM.hasLayerViewModule(e)}importLayerView(e){return jM.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(Ao.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=She(this.type);return pe("safari")&&pe("safari")<9&&(e=new te("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:pe("safari")})),Y(e)?(Ao.warn("#validate()",e.message),Promise.reject(e)):zhe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new M5),this.animation}_cancellableGoTo(e,t,i){const s=()=>e===this._gotoTask,l=i.then(()=>{s()&&(this.animation=null)}).catch(y=>{throw s()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),y}),d=new Promise(y=>y(l));return t.when().catch(()=>{s()&&d.cancel&&d.cancel()}),d}_gotoImmediate(e,t){const i=this._gotoTask,s=this.animation,l=e.then(d=>{if(bi(t),i!==this._gotoTask)throw new te("view:goto-interrupted","Goto was interrupted");this.viewpoint=s.target=d,s.finish()});return this._cancellableGoTo(i,s,l)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<sI&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){var V,K,ee,se;const{constraints:e,initialExtent:t,map:i,padding:s,size:l}=this;if(!e)return null;const d=i&&"initialViewProperties"in i&&i.initialViewProperties,y={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?y.zoom!==-1&&(y.scale=e.zoomToScale(y.zoom)):y.zoom=-1;let g=null,x=null,$=0;const E=y.viewpoint&&y.viewpoint.rotation,O=y.viewpoint&&y.viewpoint.targetGeometry;Y(O)&&(O.type==="extent"?g=O:O.type==="point"&&(x=O,$=y.viewpoint.scale));const P=y.extent||g||((K=(V=d==null?void 0:d.viewpoint)==null?void 0:V.targetGeometry)==null?void 0:K.extent)||t,R=y.center||x||(P==null?void 0:P.center),L=y.scale||$||((ee=d==null?void 0:d.viewpoint)==null?void 0:ee.scale)||P&&of(P,[l[0]-s.left-s.right,l[1]-s.top-s.bottom]),z=y.rotation||E||((se=d==null?void 0:d.viewpoint)==null?void 0:se.rotation)||0;return R&&L?new Zi({targetGeometry:R,scale:L,rotation:z}):null}_gotoAnimated(e,t){const i=this._gotoTask,s=this.animation,l=e.then(d=>{if(bi(t),i!==this._gotoTask)throw new te("view:goto-interrupted","Goto was interrupted");return s.update(d),this.animationManager.animate(s,this.viewpoint,t),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,l)}_project(e,t){var l;const i=e&&e.targetGeometry||e;if(!t)return e;if(!i)return null;if(t.imageCoordinateSystem||((l=i.spatialReference)==null?void 0:l.imageCoordinateSystem)||dr(t,i.spatialReference))return e;const s=Dh(i,t);if(!s)throw new te("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:t});return Vhe(e)?(e.targetGeometry=s,e):s}_resizeHandler(e){if(!this.ready)return;const t=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],cle(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints.constrain(i,null),this.state.viewpoint=i}_startup(){var g,x;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch($){Ao.warn(new Er("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:$})),e.targetGeometry=((g=this.defaultsFromMap.extent)==null?void 0:g.center)||new He({x:0,y:0,spatialReference:this.spatialReference})}(x=this.constraints)==null||x.fit(e),this._set("state",new sue({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const i=new Cj(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=i,this._magnifierView=new Lj,this._magnifierView.magnifier=this.magnifier;const s=new Rj({view:this});this._set("labelManager",s);const l=new yle({view:this});this._set("animationManager",l);const d=new jj({view:this,animationManager:l});this._set("mapViewNavigation",d),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),i.on("post-render",()=>this._set("rendering",i.renderRequested)),i.on("will-render",()=>this._set("rendering",i.renderRequested)),i.on("webgl-error",$=>this.fatalError=$.error),Te(()=>this.stationary,$=>i.stationary=$,_u),Te(()=>this.background,$=>{i.background=$,this._magnifierView.background=$},_u),Te(()=>this.magnifier,$=>this._magnifierView.magnifier=$,_u),Te(()=>this.renderingOptions,$=>i.renderingOptions=$,_u),Te(()=>this.highlightOptions,$=>i.highlightOptions=$,_u),Te(()=>this.state.id,()=>i.state=this.state,_u)],"map-view"),this._updateStageChildren();const y=this._resolveWhenReady;this._resolveWhenReady=[],y.forEach($=>$(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:i,rotation:s,scale:l}=this.state.paddedViewState,d=new He({x:e,y:t,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",d),this._set("zoom",-1),this._set("rotation",s),this._set("scale",l),this._set("spatialReference",i),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new uue(nY.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new Pj({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Nj(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const g of this.allLayerViews)g.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(he(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const g=t.viewpoint.clone();g.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=g}const i=t.clone(),[s,l]=t.center;let d=null;try{d=this._project(new He({x:s,y:l,spatialReference:t.spatialReference}),e)}catch(g){Ah()||Ao.warn(new Er("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:d.toJSON(),spatialReference:e,error:g}))}d||(d=new He({x:0,y:0,spatialReference:e}));const y=T5(new Zi({targetGeometry:new He,scale:0,rotation:0}),t.viewpoint,d);i.viewpoint=y;try{const x=[t.size[0]/2,t.size[1]/2],$=[x[0]+20,x[1]],E=t.toMap([0,0],$),{x:O,y:P}=this._project(new He({x:E[0],y:E[1],spatialReference:t.spatialReference}),e);E[0]=O,E[1]=P,i.toScreen(E,E);const R=ule(x,E,$),L=Math.hypot(E[0]-x[0],E[1]-x[1])/20;!Number.isFinite(L)||Math.abs(L)>4?(y.rotation=0,y.targetGeometry=new He({x:0,y:0,spatialReference:e})):(y.scale*=L,y.scale>pe("mapview-srswitch-adjust-rotation-scale-threshold")?y.rotation=0:y.rotation+=Number.isFinite(R)?R:0)}catch{}this._get("constraints").constrain(y,null),this._get("state").viewpoint=y,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const g of this.allLayerViews)g.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Qe.type="2d",v([_({readOnly:!0})],Qe.prototype,"animationManager",void 0),v([_({constructOnly:!0})],Qe.prototype,"deactivatedWebGLExtensions",void 0),v([_({constructOnly:!0})],Qe.prototype,"debugWebGLExtensions",void 0),v([_({readOnly:!0})],Qe.prototype,"featuresTilingScheme",void 0),v([_({readOnly:!0})],Qe.prototype,"fullOpacity",void 0),v([_({readOnly:!0})],Qe.prototype,"graphicsTileStore",null),v([_()],Qe.prototype,"graphicsView",void 0),v([_({readOnly:!0})],Qe.prototype,"state",void 0),v([_()],Qe.prototype,"initialExtentRequired",null),v([_()],Qe.prototype,"labelManager",void 0),v([_({readOnly:!0})],Qe.prototype,"resourceManager",null),v([_({readOnly:!0})],Qe.prototype,"textureManager",null),v([_({readOnly:!0})],Qe.prototype,"mapViewNavigation",void 0),v([_({constructOnly:!0})],Qe.prototype,"renderCanvas",void 0),v([_()],Qe.prototype,"renderingOptions",void 0),v([_({readOnly:!0})],Qe.prototype,"rendering",void 0),v([_({constructOnly:!0})],Qe.prototype,"supersampleScreenshotsEnabled",void 0),v([_({readOnly:!0})],Qe.prototype,"supportsGround",void 0),v([_()],Qe.prototype,"_stationaryTimer",void 0),v([_()],Qe.prototype,"_defaultsFromMapSettings",null),v([_()],Qe.prototype,"_pePromise",void 0),v([_({readOnly:!0})],Qe.prototype,"typeSpecificPreconditionsReady",null),v([_()],Qe.prototype,"animation",null),v([_({type:x2})],Qe.prototype,"background",null),v([_({value:null,type:He,dependsOn:["state.id","ready"]})],Qe.prototype,"center",null),v([_({type:sj})],Qe.prototype,"constraints",null),v([_({value:null,type:xt,dependsOn:["state.id","ready"]})],Qe.prototype,"extent",null),v([_()],Qe.prototype,"floors",void 0),v([_({type:gj})],Qe.prototype,"highlightOptions",void 0),v([_({readOnly:!0})],Qe.prototype,"inputManager",void 0),v([_()],Qe.prototype,"map",void 0),v([_({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Qe.prototype,"padding",null),v([_()],Qe.prototype,"resizeAlign",void 0),v([_({readOnly:!0,dependsOn:["state.id"]})],Qe.prototype,"resolution",null),v([_({value:0,type:Number,dependsOn:["state.id","ready"]})],Qe.prototype,"rotation",null),v([_({value:0,type:Number,dependsOn:["state.id","ready"]})],Qe.prototype,"scale",null),v([_({constructOnly:!0})],Qe.prototype,"spatialReferenceLocked",void 0),v([_()],Qe.prototype,"stationary",null),v([_({type:vj,readOnly:!0})],Qe.prototype,"timeline",void 0),v([_({readOnly:!0})],Qe.prototype,"type",void 0),v([_({readOnly:!0})],Qe.prototype,"updating",null),v([_({value:null,type:Zi,dependsOn:["state.id","ready"]})],Qe.prototype,"viewpoint",null),v([_({value:-1,dependsOn:["state.id","ready"]})],Qe.prototype,"zoom",null),v([_({type:Boolean})],Qe.prototype,"navigating",null),v([_({type:Oj})],Qe.prototype,"ui",void 0),Qe=v([H("esri.views.MapView")],Qe);const Ghe=Qe;function j5(e){var i,s,l,d;const t=e.getObjectId();return t?`${(d=(l=(i=e.layer)==null?void 0:i.uid)!=null?l:(s=e.sourceLayer)==null?void 0:s.uid)!=null?d:"MapView"}/${t}`:`"MapView/${e.uid}`}function nI(e,t,i,s,l){return d=>{if(d instanceof ws){if(d.layer===e)l==null||l();else{const y=e.allLayerViews.find(g=>g.layer===d.layer);y&&(s==null||s(y))}i(j5(d))}else{const y=e.allLayerViews.find(g=>g.layer===d);y&&t(y)}}}function oI(e,t){if(e)if(Ab(e))for(const i of e)if(Ab(i))for(const s of i)t(s);else t(i);else t(e)}function qhe(e){return e&&"getAtOrigin"in e&&"originOf"in e}function Uhe(e){e&&e.writtenProperties&&e.writtenProperties.forEach(({target:t,propName:i,newOrigin:s})=>{qhe(t)&&s&&t.originOf(i)!==s&&t.updateOrigin(i,s)})}async function Bhe(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=Fj(e));const s=Hhe(e),l=e.capabilities.query.supportsPagination;t.start=0,t.num=s;let d=null;for(;;){const y=await e.source.queryFeaturesJSON(t,i);if(he(d)?d=y:d.features=d.features.concat(y.features),d.exceededTransferLimit=y.exceededTransferLimit,!l||!y.exceededTransferLimit)break;t.start+=s}return d}function Hhe(e){return Fj(e)*Whe(e)}function Whe(e){return e.capabilities.query.maxRecordCount||2e3}function Fj(e){return e.capabilities.query.supportsMaxRecordCountFactor?Yi.MAX_MAX_RECORD_COUNT_FACTOR:1}const Jhe=Me.getLogger("esri.networks.Network");let Vi=class extends r1(vs){constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null}initialize(){this.when().catch(e=>{var t,i;bs(e)||Jhe.error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(i=this.id)!=null?i:"no id"}')`,{error:e})})}get datasetName(){var e;return(e=this.dataElement)==null?void 0:e.name}get owner(){var e;return(e=this.dataElement)==null?void 0:e.userIdentity}get schemaGeneration(){var e;return(e=this.dataElement)==null?void 0:e.schemaGeneration}get parsedUrl(){const e=this.layerUrl;return e?fi(e):null}get featureServiceUrl(){const e=this.parsedUrl&&jl(this.parsedUrl.path);return Y(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&jl(this.parsedUrl.path);return Y(e)?e.sublayer:null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const t=this.dataElement.domainNetworks;for(const i of t){for(const s of i.edgeSources?i.edgeSources:[])if(s.sourceId===e)return s.layerId;for(const s of i.junctionSources?i.junctionSources:[])if(s.sourceId===e)return s.layerId}return null}return null}async _fetchLayerMetaData(e,t){const i=await Vt(e,{responseType:"json",query:{f:"json"},...t});this.sourceJSON=i.data,this.read(i.data,{origin:"service"})}async _fetchDataElement(e,t,i){if(this.dataElement)return;const s=await Vt(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([t]),f:"json"},...i}).then(l=>{var d;return(d=l.data.layerDataElements)==null?void 0:d[0]});s&&this.read(s,{origin:"service"})}};v([_({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],Vi.prototype,"id",void 0),v([_({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],Vi.prototype,"title",void 0),v([_({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Vi.prototype,"layerUrl",void 0),v([_({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Vi.prototype,"dataElement",void 0),v([_({type:xt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Vi.prototype,"fullExtent",void 0),v([_({type:Ye,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Vi.prototype,"spatialReference",void 0),v([_({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Vi.prototype,"type",void 0),v([_({readOnly:!0})],Vi.prototype,"datasetName",null),v([_({readOnly:!0})],Vi.prototype,"owner",null),v([_({readOnly:!0})],Vi.prototype,"schemaGeneration",null),v([_({readOnly:!0})],Vi.prototype,"parsedUrl",null),v([_({readOnly:!0})],Vi.prototype,"featureServiceUrl",null),v([_({readOnly:!0})],Vi.prototype,"networkServiceUrl",null),v([_({readOnly:!0})],Vi.prototype,"layerId",null),v([_()],Vi.prototype,"sourceJSON",void 0),Vi=v([H("esri.networks.Network")],Vi);const Khe=Vi;var hs;(function(e){e[e.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",e[e.RTContainment=2]="RTContainment",e[e.RTAttachment=3]="RTAttachment",e[e.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",e[e.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(hs||(hs={}));const vb=new tt({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});new tt({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});let Ou=class extends Fp(vs){constructor(e){super(e),this.request=Vt}initialize(){}async load(e){const t=this.layer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(t),this}getFeatureSQL(e,t){const i=e.layerId.toString(),s=e.fieldsIndex.normalizeFieldName("assetGroup"),l=e.fieldsIndex.normalizeFieldName("assetType"),d=t.attributes[s],y=t.attributes[l],g=this.rulesHash[i];if(g){const x=g.assetGroupHash[d];if(x)return x.assetTypeHash[y]||null}return null}async _initializeRulesTable(){var s,l,d,y,g,x,$,E,O,P;const e={};let t;(function(R){R[R.from=0]="from",R[R.to=1]="to",R[R.via=2]="via"})(t||(t={}));const i=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const R of this.rules){if(R.ruleType!==hs.RTJunctionJunctionConnectivity&&R.ruleType!==hs.RTJunctionEdgeConnectivity&&R.ruleType!==hs.RTEdgeJunctionEdgeConnectivity)continue;let L=[[t.from,t.to],[t.to,t.from]];R.ruleType===hs.RTEdgeJunctionEdgeConnectivity&&(L=[[t.from,t.via],[t.via,t.from],[t.to,t.via],[t.via,t.to]]);for(const z of L){const V=z.shift(),K=z.shift();let ee=!1;switch(R.ruleType){case hs.RTEdgeJunctionEdgeConnectivity:ee=V===t.from||V===t.to;break;case hs.RTJunctionEdgeConnectivity:ee=V===t.to}const se=i[V],oe=R[se.networkSourceId].layerId.toString(),ne=(l=(s=R[se.assetGroupId])==null?void 0:s.assetGroupCode)==null?void 0:l.toString(),ae=(y=(d=R[se.assetTypeId])==null?void 0:d.assetTypeCode)==null?void 0:y.toString(),Ie=i[K],Se=R[Ie.networkSourceId].layerId.toString(),Pe=(x=(g=R[Ie.assetGroupId])==null?void 0:g.assetGroupCode)==null?void 0:x.toString(),Re=R[Ie.assetTypeId],De=($=Re==null?void 0:Re.assetTypeCode)==null?void 0:$.toString(),Le=e[oe]?e[oe]:{assetGroupHash:{}};if(!(ne&&ae&&Pe&&De))continue;const qe=Le.assetGroupHash[ne]?Le.assetGroupHash[ne]:{assetTypeHash:{}},Oe=qe.assetTypeHash[ae]?qe.assetTypeHash[ae]:{};if(Oe[Se]=Oe[Se]?Oe[Se]:{},ee){Oe[oe]=Oe[oe]?Oe[oe]:{};const ir=`(assetgroup = ${ne} AND assettype = ${ae})`;Oe[oe].anyVertex=Oe[oe].anyVertex?`${Oe[oe].anyVertex}`:`${ir}`,Re.connectivityPolicy==="esriNECPEndVertex"&&(Oe[oe].endVertex=(E=Oe[oe])!=null&&E.endVertex?`${Oe[oe].endVertex}`:`${ir}`)}const zt=`(assetgroup = ${Pe} AND assettype = ${De})`;Oe[Se].anyVertex=(O=Oe[Se])!=null&&O.anyVertex?`${Oe[Se].anyVertex} OR ${zt}`:`${zt}`,Re.connectivityPolicy==="esriNECPEndVertex"&&(Oe[Se].endVertex=(P=Oe[Se])!=null&&P.endVertex?`${Oe[Se].endVertex} OR ${zt}`:`${zt}`),qe.assetTypeHash[ae]=Oe,Le.assetGroupHash[ne]=qe,e[oe]=Le}}this.rulesHash=e}};v([_({constructOnly:!0})],Ou.prototype,"layer",void 0),v([_({constructOnly:!0})],Ou.prototype,"rules",void 0),v([_()],Ou.prototype,"rulesHash",void 0),v([_({constructOnly:!0})],Ou.prototype,"request",void 0),Ou=v([H("esri.networks.RulesTable")],Ou);const Yhe=Ou;let Fs=class extends ce{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};v([_({type:[Object],json:{write:!0}})],Fs.prototype,"conditionBarriers",void 0),v([_({type:[Object],json:{write:!0}})],Fs.prototype,"outputConditions",void 0),v([_({type:[Object],json:{write:!0}})],Fs.prototype,"functions",void 0),v([_({type:[Object],json:{write:!0}})],Fs.prototype,"functionBarriers",void 0),v([_({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Fs.prototype,"traversabilityScope",void 0),v([_({type:String,json:{write:!0}})],Fs.prototype,"shortestPathNetworkAttributeName",void 0),v([_({type:Boolean,json:{write:!0}})],Fs.prototype,"includeBarriers",void 0),v([_({type:Boolean,json:{write:!0}})],Fs.prototype,"validateConsistency",void 0),v([_({type:Boolean,json:{write:!0}})],Fs.prototype,"ignoreBarriersAtStartingPoints",void 0),Fs=v([H("esri.networks.support.TraceConfiguration")],Fs);const jx=Fs;let gi=class extends jx{constructor(e){super(e),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};v([_({type:[Object],json:{write:!0}})],gi.prototype,"filterBarriers",void 0),v([_({type:String,json:{write:!0}})],gi.prototype,"domainNetworkName",void 0),v([_({type:String,json:{write:!0}})],gi.prototype,"filterBitsetNetworkAttributeName",void 0),v([_({type:[Object],json:{write:!0}})],gi.prototype,"filterFunctionBarriers",void 0),v([_({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],gi.prototype,"filterScope",void 0),v([_({type:Boolean,json:{write:!0}})],gi.prototype,"includeContainers",void 0),v([_({type:Boolean,json:{write:!0}})],gi.prototype,"includeContent",void 0),v([_({type:Boolean,json:{write:!0}})],gi.prototype,"includeIsolated",void 0),v([_({type:Boolean,json:{write:!0}})],gi.prototype,"includeStructures",void 0),v([_({type:Boolean,json:{write:!0}})],gi.prototype,"includeUpToFirstSpatialContainer",void 0),v([_({type:Object,json:{write:!0}})],gi.prototype,"nearestNeighbor",void 0),v([_({type:[Object],json:{write:!0}})],gi.prototype,"outputFilterCategories",void 0),v([_({type:[Object],json:{write:!0}})],gi.prototype,"outputFilters",void 0),v([_({type:[Object],json:{write:!0}})],gi.prototype,"propagators",void 0),v([_({type:String,json:{write:!0}})],gi.prototype,"subnetworkName",void 0),v([_({type:String,json:{write:!0}})],gi.prototype,"targetTierName",void 0),v([_({type:String,json:{write:!0}})],gi.prototype,"tierName",void 0),v([_({type:Boolean,json:{write:!0}})],gi.prototype,"validateLocatability",void 0),gi=v([H("esri.networks.support.UNTraceConfiguration")],gi);const Xhe=gi;let zr=class extends Sg{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,t){return e.tierName!==void 0?Xhe.fromJSON(e):jx.fromJSON(e)}};v([_({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],zr.prototype,"globalId",void 0),v([_({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],zr.prototype,"title",void 0),v([_({type:jx,json:{origins:{service:{read:!0}},read:!1}})],zr.prototype,"traceConfiguration",void 0),v([$e("service","traceConfiguration")],zr.prototype,"readTraceConfiguration",null),v([_({type:Date,json:{origins:{service:{read:!0}},read:!1}})],zr.prototype,"creationDate",void 0),v([_({type:String,json:{origins:{service:{read:!0}},read:!1}})],zr.prototype,"creator",void 0),v([_({type:String,json:{origins:{service:{read:!0}},read:!1}})],zr.prototype,"description",void 0),v([_({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],zr.prototype,"minStartingPoints",void 0),v([_({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],zr.prototype,"resultTypes",void 0),v([_({type:[String],json:{origins:{service:{read:!0}},read:!1}})],zr.prototype,"tags",void 0),v([_({type:vb.apiValues,json:{type:vb.jsonValues,origins:{service:{read:vb.read}},read:!1}})],zr.prototype,"traceType",void 0),zr=v([H("esri.networks.support.NamedTraceConfiguration")],zr);const Zhe=zr;let jc=class extends ce{constructor(e){super(e),this.id=null,this.name=null}};v([_({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],jc.prototype,"id",void 0),v([_({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],jc.prototype,"name",void 0),v([_({type:Boolean,json:{write:!0}})],jc.prototype,"isUpstreamTerminal",void 0),jc=v([H("esri.networks.support.Terminal")],jc);const Qhe=jc,Ty=new tt({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let ol=class extends ce{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};v([_({type:String,json:{write:!0}})],ol.prototype,"defaultConfiguration",void 0),v([_({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],ol.prototype,"id",void 0),v([_({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],ol.prototype,"name",void 0),v([_({type:[Qhe],json:{write:!0}})],ol.prototype,"terminals",void 0),v([_({type:Ty.apiValues,json:{type:Ty.jsonValues,read:Ty.read,write:Ty.write}})],ol.prototype,"traversabilityModel",void 0),ol=v([H("esri.networks.support.TerminalConfiguration")],ol);const aI=ol;let ns=class extends Khe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return(e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId}get systemLayers(){var e,t;return{rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null,subnetworksTableId:(t=this.sourceJSON)==null?void 0:t.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}}get rulesTableId(){var e;return(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId}get rulesTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null}get subnetworksTableId(){var e;return(e=this.sourceJSON)==null?void 0:e.systemLayers.subnetworksTableId}get subnetworksTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(t=>aI.fromJSON(t)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(t=>t.domainNetworkName))||[]}get _utilityLayerList(){const e=new Set;return this.dataElement.domainNetworks.map(t=>{t.edgeSources.map(i=>{e.add(i.layerId)}),t.junctionSources.map(i=>{e.add(i.layerId)})}),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var x,$,E,O;let t=null,i=null;const s=e.layer;let l=null;if((s==null?void 0:s.type)!=="feature"||(l=s.layerId,l===null))return null;const d=e.attributes;if(d==null)return null;for(const P of Object.keys(d))P.toUpperCase()==="ASSETGROUP"&&(t=e.getAttribute(P)),P.toUpperCase()==="ASSETTYPE"&&(i=e.getAttribute(P));if(!this.dataElement)return null;let y=null;const g=this.dataElement.domainNetworks;for(const P of g){const R=(x=P.junctionSources)==null?void 0:x.find(L=>L.layerId===l);if(R){const L=($=R.assetGroups)==null?void 0:$.find(z=>z.assetGroupCode===t);if(L){const z=(E=L.assetTypes)==null?void 0:E.find(V=>V.assetTypeCode===i);if(z){y=z.terminalConfigurationId;break}}}}if(y!=null){const P=(O=this.dataElement.terminalConfigurations)==null?void 0:O.find(R=>R.terminalConfigurationId===y);return P?aI.fromJSON(P):null}return null}getTierNames(e){var i;const t=(i=this.dataElement)==null?void 0:i.domainNetworks.find(s=>s.domainNetworkName===e);return(t==null?void 0:t.tiers.map(s=>s.name))||[]}async getRulesTable(){return this._createRulesTable()}isUtilityLayer(e){return this._utilityLayerList.has(e.layerId)}async _loadNamedTraceConfigurationsFromNetwork(e){var s;if(((s=this.sharedNamedTraceConfigurations)==null?void 0:s.length)===0)return;const t=this.sharedNamedTraceConfigurations.map(l=>l.globalId),i=await this._fetchTraceConfigData(this.networkServiceUrl,t,e);for(const l of this.sharedNamedTraceConfigurations){const d=i==null?void 0:i.find(y=>y.globalId===l.globalId);d&&l.read(d,{origin:"service"})}}async _createRulesTable(){var l;const e=new f2({url:this.rulesTableUrl});await e.load();const t=(l=this.dataElement)==null?void 0:l.domainNetworks;if(!t)return null;const i=t.flatMap(d=>[...d.edgeSources,...d.junctionSources]),s=(await this._queryRulesTable(e)).map(d=>this._hydrateRuleInfo(e,i,d));return new Yhe({layer:e,rules:s})}async _queryRulesTable(e){const t=new Yi({where:"1=1",outFields:["*"]});return(await Bhe(e,t)).features}_hydrateRuleInfo(e,t,i){const s=e.fieldsIndex.get("RULETYPE"),l=e.fieldsIndex.get("CREATIONDATE"),d=e.fieldsIndex.get("FROMNETWORKSOURCEID"),y=e.fieldsIndex.get("FROMASSETGROUP"),g=e.fieldsIndex.get("FROMASSETTYPE"),x=e.fieldsIndex.get("FROMTERMINALID"),$=e.fieldsIndex.get("TONETWORKSOURCEID"),E=e.fieldsIndex.get("TOASSETGROUP"),O=e.fieldsIndex.get("TOASSETTYPE"),P=e.fieldsIndex.get("TOTERMINALID"),R=e.fieldsIndex.get("VIANETWORKSOURCEID"),L=e.fieldsIndex.get("VIAASSETGROUP"),z=e.fieldsIndex.get("VIAASSETTYPE"),V=e.fieldsIndex.get("VIATERMINALID"),K=i.attributes[s.name],ee=new Date(i.attributes[l.name]),se=[{networkSourceId:i.attributes[d.name],assetGroupId:i.attributes[y.name],assetTypeId:i.attributes[g.name],terminalId:i.attributes[x.name]},{networkSourceId:i.attributes[$.name],assetGroupId:i.attributes[E.name],assetTypeId:i.attributes[O.name],terminalId:i.attributes[P.name]},{networkSourceId:i.attributes[R.name],assetGroupId:i.attributes[L.name],assetTypeId:i.attributes[z.name],terminalId:i.attributes[V.name]}];let oe;(function(ae){ae[ae.from=0]="from",ae[ae.to=1]="to",ae[ae.via=2]="via"})(oe||(oe={}));const ne={ruleType:K,creationDate:ee};for(const ae of[oe.from,oe.to,oe.via]){if(K!==hs.RTEdgeJunctionEdgeConnectivity&&ae===oe.via)continue;const Ie=se[ae],Se=t.find(qe=>qe.sourceId===Ie.networkSourceId),Pe=Se==null?void 0:Se.assetGroups.find(qe=>qe.assetGroupCode===Ie.assetGroupId),Re=Pe==null?void 0:Pe.assetTypes.find(qe=>qe.assetTypeCode===Ie.assetTypeId);let De=this._getTerminal(K,Re,Ie);K!==hs.RTContainment&&K!==hs.RTAttachment||(De=null);let Le="";switch(ae){case oe.from:Le="from";break;case oe.to:Le="to";break;case oe.via:Le="via"}ne[`${Le}NetworkSource`]=Se,ne[`${Le}AssetGroup`]=Pe,ne[`${Le}AssetType`]=Re,ne[`${Le}Terminal`]=De}return ne}_getTerminal(e,t,i){var d,y;if(e===hs.RTAttachment||e===hs.RTContainment)return null;const s=t==null?void 0:t.terminalConfigurationId,l=(d=this.terminalConfigurations)==null?void 0:d.find(g=>g.id===s);return(y=l==null?void 0:l.terminals)==null?void 0:y.find(g=>g.id===i.terminalId)}_fetchTraceConfigData(e,t,i){return Vt(`${e}/traceConfigurations/query`,{responseType:"json",query:{globalIds:JSON.stringify(t),f:"json"},...i}).then(s=>s.data.traceConfigurations)}};v([_({type:[Zhe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],ns.prototype,"sharedNamedTraceConfigurations",void 0),v([_({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],ns.prototype,"type",void 0),v([_({readOnly:!0})],ns.prototype,"serviceTerritoryFeatureLayerId",null),v([_({readOnly:!0})],ns.prototype,"systemLayers",null),v([_({readOnly:!0})],ns.prototype,"rulesTableId",null),v([_({readOnly:!0})],ns.prototype,"rulesTableUrl",null),v([_({readOnly:!0})],ns.prototype,"subnetworksTableId",null),v([_({readOnly:!0})],ns.prototype,"subnetworksTableUrl",null),v([_({readOnly:!0})],ns.prototype,"terminalConfigurations",null),v([_({readOnly:!0})],ns.prototype,"domainNetworkNames",null),ns=v([H("esri.networks.UtilityNetwork")],ns);const ece=ns;async function tce(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Wu(e);const i=Ye.WGS84;return await RK(t,i),Dh(e,i)}function Nd(e,t){if(!Lc(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function Lc(e,t){var i;return!!((i=e.typeKeywords)!=null&&i.includes(t))}function Es(e,t){const i=e.typeKeywords;if(i){const s=i.indexOf(t);s>-1&&i.splice(s,1)}}async function Wfe(e){const t=e.clone().normalize();let i;if(t.length>1)for(const s of t)i?s.width>i.width&&(i=s):i=s;else i=t[0];return tce(i)}const Lx={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function ice(e,t,i){const s=iE(t);return e.map(l=>{const d=s.fromJSON(l);return d.spatialReference=i,d})}let Cu=class extends ce{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(s=>s.toJSON()),t=this.geometries[0],i={};return i.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),i.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),i.geometries=JSON.stringify({geometryType:Dp(t),geometries:e}),this.transformation&&(i.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(i.transformForward=this.transformForward),i}};v([_()],Cu.prototype,"geometries",void 0),v([_({json:{read:{source:"outSR"}}})],Cu.prototype,"outSpatialReference",void 0),v([_()],Cu.prototype,"transformation",void 0),v([_()],Cu.prototype,"transformForward",void 0),Cu=v([H("esri.rest.support.ProjectParameters")],Cu);const L5=Cu,rce=ni(L5);async function lI(e,t,i){t=rce(t);const s=dP(e),l={...s.query,f:"json",...t.toJSON()},d=t.outSpatialReference,y=Dp(t.geometries[0]),g=gee(l,i);return Vt(s.path+"/project",g).then(({data:{geometries:x}})=>ice(x,y,d))}let al=class extends ce{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};v([_({type:String,json:{write:!0}})],al.prototype,"facilityIdField",void 0),v([_({type:String,json:{write:!0}})],al.prototype,"layerId",void 0),v([_({type:String,json:{write:!0}})],al.prototype,"nameField",void 0),v([_({type:String,json:{write:!0}})],al.prototype,"siteIdField",void 0),v([_({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],al.prototype,"sublayerId",void 0),al=v([H("esri.layers.support.FacilityLayerInfo")],al);const sce=al;let wn=class extends ce{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};v([_({type:String,json:{write:!0}})],wn.prototype,"facilityIdField",void 0),v([_({type:String,json:{write:!0}})],wn.prototype,"layerId",void 0),v([_({type:String,json:{write:!0}})],wn.prototype,"levelIdField",void 0),v([_({type:String,json:{write:!0}})],wn.prototype,"levelNumberField",void 0),v([_({type:String,json:{write:!0}})],wn.prototype,"longNameField",void 0),v([_({type:String,json:{write:!0}})],wn.prototype,"shortNameField",void 0),v([_({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],wn.prototype,"sublayerId",void 0),v([_({type:String,json:{write:!0}})],wn.prototype,"verticalOrderField",void 0),wn=v([H("esri.layers.support.LevelLayerInfo")],wn);const nce=wn;let Pu=class extends ce{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};v([_({type:String,json:{write:!0}})],Pu.prototype,"layerId",void 0),v([_({type:String,json:{write:!0}})],Pu.prototype,"nameField",void 0),v([_({type:String,json:{write:!0}})],Pu.prototype,"siteIdField",void 0),v([_({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Pu.prototype,"sublayerId",void 0),Pu=v([H("esri.layers.support.SiteLayerInfo")],Pu);const oce=Pu;let Fc=class extends ce{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};v([_({type:nce,json:{write:!0}})],Fc.prototype,"levelLayer",void 0),v([_({type:sce,json:{write:!0}})],Fc.prototype,"facilityLayer",void 0),v([_({type:oce,json:{write:!0}})],Fc.prototype,"siteLayer",void 0),Fc=v([H("esri.support.MapFloorInfo")],Fc);const ace=Fc;let Dc=class extends yi(ce){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};v([_({type:String,json:{write:{isRequired:!0}}})],Dc.prototype,"expression",void 0),v([_({type:["number","string"],json:{write:!0}})],Dc.prototype,"returnType",void 0),v([_({type:String,json:{write:!0}})],Dc.prototype,"title",void 0),Dc=v([H("esri.webdoc.geotriggersInfo.ExpressionInfo")],Dc);const Dj=Dc,Ey=new tt({deviceLocation:"device-location"});let k0=class extends yi(ce){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};v([_({type:Dj,json:{write:!0}})],k0.prototype,"filterExpression",void 0),v([_({type:Ey.apiValues,readOnly:!0,json:{type:Ey.jsonValues,read:Ey.read,write:Ey.write}})],k0.prototype,"type",void 0),k0=v([H("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],k0);const lce=k0;let O0=class extends yi(ce){constructor(e){super(e),this.geometry=null,this.where=null}};v([_({types:Ll,json:{read:ha,write:!0}})],O0.prototype,"geometry",void 0),v([_({type:String,json:{write:!0}})],O0.prototype,"where",void 0),O0=v([H("esri.webdoc.geotriggersInfo.FeatureFilter")],O0);const uce=O0;let zc=class extends yi(ce){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};v([_({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],zc.prototype,"layerId",void 0),v([_({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],zc.prototype,"layerUrl",void 0),v([Fe({featureLayer:"feature-layer"},{readOnly:!0})],zc.prototype,"type",void 0),zc=v([H("esri.webdoc.geotriggersInfo.FeatureLayerSource")],zc);const hce=zc;let Nu=class extends yi(ce){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};v([_({type:hce,json:{write:{isRequired:!0}}})],Nu.prototype,"fenceSource",void 0),v([_({type:uce,json:{write:!0}})],Nu.prototype,"filter",void 0),v([_({type:Number,json:{write:!0}})],Nu.prototype,"bufferDistance",void 0),v([Fe({features:"features"},{readOnly:!0})],Nu.prototype,"type",void 0),Nu=v([H("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],Nu);const cce=Nu;let Um=class extends yi(ce){constructor(e){super(e),this.type="fence"}};v([Fe({fence:"fence"},{readOnly:!0})],Um.prototype,"type",void 0),Um=v([H("esri.webdoc.geotriggersInfo.Geotrigger")],Um);const zj=Um;let C0=class extends yi(ce){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};v([_({type:Dj,json:{write:!0}})],C0.prototype,"expressionInfo",void 0),v([_({type:[String],json:{write:!0}})],C0.prototype,"requestedActions",void 0),C0=v([H("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],C0);const pce=C0,dce=new tt({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),fce=new tt({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),Ay=new tt({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let bn=class extends zj{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};v([Fe(dce)],bn.prototype,"enterExitRule",void 0),v([_({type:lce,json:{write:{isRequired:!0}}})],bn.prototype,"feed",void 0),v([Fe(fce)],bn.prototype,"feedAccuracyMode",void 0),v([_({type:Ay.apiValues,json:{type:Ay.jsonValues,read:Ay.read,write:{writer:Ay.write,isRequired:!0}}})],bn.prototype,"fenceNotificationRule",void 0),v([_({type:cce,json:{write:{isRequired:!0}}})],bn.prototype,"fenceParameters",void 0),v([_({type:String,json:{write:!0}})],bn.prototype,"name",void 0),v([_({type:pce,json:{write:!0}})],bn.prototype,"notificationOptions",void 0),v([Fe({fence:"fence"},{readOnly:!0})],bn.prototype,"type",void 0),bn=v([H("esri.webdoc.geotriggersInfo.FenceGeotrigger")],bn);const yce=bn,mce={base:zj,key:"type",typeMap:{fence:yce}};let Bm=class extends yi(ce){constructor(e){super(e),this.geotriggers=null}};v([_({types:[mce],json:{write:{isRequired:!0}}})],Bm.prototype,"geotriggers",void 0),Bm=v([H("esri.webdoc.GeotriggersInfo")],Bm);const gce=Bm;var F5;let Vc=F5=class extends ce{constructor(e){super(e),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new F5(ie({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};v([_({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],Vc.prototype,"activeRange",void 0),v([_({type:[Number],json:{write:!0}})],Vc.prototype,"currentRangeExtent",void 0),v([_({type:[Number],json:{write:!0}})],Vc.prototype,"fullRangeExtent",void 0),Vc=F5=v([H("esri.webdoc.RangeInfo")],Vc);const Fx=Vc;var D5;let so=D5=class extends ce{constructor(e){super(e),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new D5(ie({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};v([_({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],so.prototype,"enabled",void 0),v([_({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],so.prototype,"longNames",void 0),v([_({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],so.prototype,"minimized",void 0),v([_({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],so.prototype,"pinnedLevels",void 0),v([_({type:String,json:{read:{source:"site"},write:{target:"site"}}})],so.prototype,"site",void 0),v([_({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],so.prototype,"facility",void 0),v([_({type:String,json:{read:{source:"level"},write:{target:"level"}}})],so.prototype,"level",void 0),so=D5=v([H("esri.webdoc.widgets.FloorFilter")],so);const vce=so;var z5;const ky=new tt({slider:"slider",picker:"picker"});let Gc=z5=class extends ce{constructor(e){super(e),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new z5({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};v([_({type:ky.apiValues,nonNullable:!0,json:{type:ky.jsonValues,default:null,read:{reader:ky.read},write:{isRequired:!0,writer:ky.write}}})],Gc.prototype,"interactionMode",void 0),v([_({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=this.stopInterval!=null;return{enabled:!e,isRequired:!e}}}}})],Gc.prototype,"numStops",void 0),v([_({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],Gc.prototype,"stopInterval",void 0),Gc=z5=v([H("esri.webdoc.widgets.Range")],Gc);const wce=Gc;var V5;let Ri=V5=class extends ce{constructor(e){super(e),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(e){if(!e)return;const t=e[0]!=null?new Date(e[0]):null,i=e[1]!=null?new Date(e[1]):null;return new kr({start:t,end:i})}writeCurrentTimeExtent(e,t,i){e&&Xi(i,[Y(e.start)?e.start.getTime():null,Y(e.end)?e.end.getTime():null],t)}readFullTimeExtent(e,t){const i=t.properties;if(!i)return;const s=i.endTime!=null?new Date(i.endTime):null,l=i.startTime!=null?new Date(i.startTime):null;return new kr({start:l,end:s})}writeFullTimeExtent(e,t){if(!e)return;const i=t.properties=t.properties||{},s=e.end,l=e.start;s&&(i.endTime=Y(s)?s.getTime():null),l&&(i.startTime=Y(l)?l.getTime():null)}readStopInterval(e,t,i){return e?Th.fromJSON({value:e.interval,unit:e.units},i):null}writeStopInterval(e,t,i,s){if(!e)return;const l=e.toJSON(s);Xi(i,{interval:l.value,units:l.unit},t)}readStops(e){return e&&e.length?e.map(t=>new Date(t)):null}writeStops(e,t,i){e&&e.length&&Xi(i,e.map(s=>s.getTime()),t)}clone(){return new V5(ie({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};v([_({type:kr,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Ri.prototype,"currentTimeExtent",void 0),v([$e("currentTimeExtent")],Ri.prototype,"readCurrentTimeExtent",null),v([Ee("currentTimeExtent")],Ri.prototype,"writeCurrentTimeExtent",null),v([_({type:kr,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Ri.prototype,"fullTimeExtent",void 0),v([$e("fullTimeExtent")],Ri.prototype,"readFullTimeExtent",null),v([Ee("fullTimeExtent")],Ri.prototype,"writeFullTimeExtent",null),v([_({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Ri.prototype,"loop",void 0),v([_({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var s;const e=!!this.stopInterval,t=!!((s=this.stops)!=null&&s.length),i=!(e||t);return{enabled:i,isRequired:i}}}}})],Ri.prototype,"numStops",void 0),v([_({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Ri.prototype,"numThumbs",void 0),v([_({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Ri.prototype,"stopDelay",void 0),v([_({type:Th,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var i;const e=this.numStops!=null,t=!!((i=this.stops)!=null&&i.length);return{enabled:!t,isRequired:!(e||t)}}}}})],Ri.prototype,"stopInterval",void 0),v([$e("stopInterval")],Ri.prototype,"readStopInterval",null),v([Ee("stopInterval")],Ri.prototype,"writeStopInterval",null),v([_({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Ri.prototype,"stops",void 0),v([$e("stops")],Ri.prototype,"readStops",null),v([Ee("stops")],Ri.prototype,"writeStops",null),Ri=V5=v([H("esri.webdoc.widgets.TimeSlider")],Ri);const bce=Ri;var G5;let qc=G5=class extends ce{constructor(e){super(e),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new G5(ie({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};v([_({type:wce,json:{write:!0}})],qc.prototype,"range",void 0),v([_({type:bce,json:{write:!0}})],qc.prototype,"timeSlider",void 0),v([_({type:vce,json:{write:!0}})],qc.prototype,"floorFilter",void 0),qc=G5=v([H("esri.webdoc.Widgets")],qc);const _ce=qc,xce={width:600,height:400},Oy=1.5;function Sce(e,t){t=t||xce;let{width:i,height:s}=t;const l=i/s;return l<Oy?s=i/Oy:l>Oy&&(i=s*Oy),i>e.width&&(s*=e.width/i,i=e.width),s>e.height&&(i*=e.height/s,s=e.height),{width:Math.round(i),height:Math.round(s)}}function uI(e){return{enabled:!!(e!=null&&e.length)}}var q5;let Uc=q5=class extends ce{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new q5({exactMatch:this.exactMatch,type:this.type,name:this.name})}};v([_({type:Boolean,json:{write:!0}})],Uc.prototype,"exactMatch",void 0),v([_({type:String,json:{write:!0}})],Uc.prototype,"name",void 0),v([Fe(m6)],Uc.prototype,"type",void 0),Uc=q5=v([H("esri.webdoc.applicationProperties.SearchLayerField")],Uc);const $ce=Uc;var U5;let Bc=U5=class extends ce{constructor(e){super(e),this.field=null,this.id=null,this.subLayer=null}clone(){return new U5(ie({field:this.field,id:this.id,subLayer:this.subLayer}))}};v([_({type:$ce,json:{write:{isRequired:!0}}})],Bc.prototype,"field",void 0),v([_({type:String,json:{write:{isRequired:!0}}})],Bc.prototype,"id",void 0),v([_({type:Ft,json:{write:!0}})],Bc.prototype,"subLayer",void 0),Bc=U5=v([H("esri.webdoc.applicationProperties.SearchLayer")],Bc);const Mce=Bc;var B5;let Hc=B5=class extends ce{constructor(e){super(e),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new B5({exactMatch:this.exactMatch,type:this.type,name:this.name})}};v([_({type:Boolean,json:{write:!0}})],Hc.prototype,"exactMatch",void 0),v([_({type:String,json:{write:!0}})],Hc.prototype,"name",void 0),v([Fe(m6)],Hc.prototype,"type",void 0),Hc=B5=v([H("esri.webdoc.applicationProperties.SearchTableField")],Hc);const Ice=Hc;var H5;let P0=H5=class extends ce{constructor(e){super(e),this.field=null,this.id=null}clone(){return new H5(ie({field:this.field,id:this.id}))}};v([_({type:Ice,json:{write:{isRequired:!0}}})],P0.prototype,"field",void 0),v([_({type:String,json:{write:{isRequired:!0}}})],P0.prototype,"id",void 0),P0=H5=v([H("esri.webdoc.applicationProperties.SearchTable")],P0);const Tce=P0;var W5;const Vj=Ge.ofType(Mce),Gj=Ge.ofType(Tce);let no=W5=class extends ce{constructor(e){super(e),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Vj,this.tables=new Gj}readAddressSearchEnabled(e){return!e}writeAddressSearchEnabled(e,t,i){t[i]=!e}clone(){return new W5(ie({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};v([_({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],no.prototype,"addressSearchEnabled",void 0),v([$e("addressSearchEnabled")],no.prototype,"readAddressSearchEnabled",null),v([Ee("addressSearchEnabled")],no.prototype,"writeAddressSearchEnabled",null),v([_({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],no.prototype,"enabled",void 0),v([_({type:String,json:{write:!0}})],no.prototype,"hintText",void 0),v([_({type:Vj,json:{write:{overridePolicy:uI},origins:{"web-scene":{write:{isRequired:!0}}}}})],no.prototype,"layers",void 0),v([_({type:Gj,json:{read:!0,write:{overridePolicy:uI}}})],no.prototype,"tables",void 0),no=W5=v([H("esri.webdoc.applicationProperties.Search")],no);const Ece=no;var J5;let Hm=J5=class extends ce{constructor(e){super(e),this.search=null}clone(){return new J5(ie({search:this.search}))}};v([_({type:Ece,json:{write:!0}})],Hm.prototype,"search",void 0),Hm=J5=v([H("esri.webdoc.applicationProperties.Viewing")],Hm);const Ace=Hm;var K5;let Wc=K5=class extends ce{constructor(e){super(e),this.editing=null,this.offline=null,this.viewing=null}clone(){return new K5(ie({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};v([_({json:{write:!0}})],Wc.prototype,"editing",void 0),v([_({json:{write:!0}})],Wc.prototype,"offline",void 0),v([_({type:Ace,json:{write:!0}})],Wc.prototype,"viewing",void 0),Wc=K5=v([H("esri.webmap.ApplicationProperties")],Wc);const kce=Wc;var Y5;let yh=Y5=class extends ce{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new Y5({url:this.url})}};v([_({type:String,json:{write:{isRequired:!0}}})],yh.prototype,"url",void 0),yh=Y5=v([H("esri.webdoc.support.SlideThumbnail")],yh);var X5;const qj="esri.webmap.Bookmark",hI=Me.getLogger(qj);let oo=X5=class extends kv(ce){constructor(e){super(e),this.name=null,this.thumbnail=new yh,this.timeExtent=null}castThumbnail(e){return typeof e=="string"?new yh({url:e}):ni(yh,e)}set viewpoint(e){const{targetGeometry:t,scale:i}=e;Y(t)&&t.type==="point"&&he(i)&&hI.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",e),this._set("viewpoint",e)}readViewpoint(e,t){const{extent:i,viewpoint:s}=t;return Zi.fromJSON(s||{targetGeometry:i})}writeViewpoint(e,t,i,s){if(!e)return;const{targetGeometry:l}=e;if(Y(l)&&l.type!=="extent"){const d="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";s!=null&&s.messages?s.messages.push(new te("property:unsupported",d)):hI.error(d)}else Y(l)&&(t.extent=l.toJSON()),t[i]=e.toJSON()}clone(){return new X5(ie({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};v([_({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],oo.prototype,"name",void 0),v([_({type:yh,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.url)})}}})],oo.prototype,"thumbnail",void 0),v([mt("thumbnail")],oo.prototype,"castThumbnail",null),v([_({type:kr,json:{write:!0}})],oo.prototype,"timeExtent",void 0),v([_({type:Zi,nonNullable:!0,json:{write:!0}})],oo.prototype,"viewpoint",null),v([$e("viewpoint",["extent","viewpoint"])],oo.prototype,"readViewpoint",null),v([Ee("viewpoint")],oo.prototype,"writeViewpoint",null),oo=X5=v([H(qj)],oo);const Oce=oo;var Z5;let Ru=Z5=class extends ze{constructor(e){super(e),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new Z5(ie({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};v([_({type:x2})],Ru.prototype,"background",void 0),v([_({type:Fx})],Ru.prototype,"rangeInfo",void 0),v([_({type:Ye})],Ru.prototype,"spatialReference",void 0),v([_({type:Zi})],Ru.prototype,"viewpoint",void 0),Ru=Z5=v([H("esri.webmap.InitialViewProperties")],Ru);const Wm=Ru;class hv{constructor(t,i,s=""){this.major=t,this.minor=i,this._context=s}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}since(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",s=this._context&&this._context+" ";throw new te(i+"unsupported-version",`Required major ${s}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new hv(this.major,this.minor,this._context)}static parse(t,i=""){const[s,l]=t.split("."),d=/^\s*\d+\s*$/;if(!s||!s.match||!s.match(d))throw new te((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!l||!l.match||!l.match(d))throw new te((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const y=parseInt(s,10),g=parseInt(l,10);return new hv(y,g,i)}}class af extends hv{constructor(t,i){super(t,i,"webmap")}}const Jm=new af(2,25),wb="Web Map",Uj=Ge.ofType(Oce),Cce=Ge.ofType(ece),Cy=Me.getLogger("esri.WebMap"),N0=new Map;N0.set("image/jpeg","jpeg"),N0.set("image/jpg","jpg"),N0.set("image/png","png"),N0.set("image/gif","gif");const Pce="ArcGIS Pro",cI=Lx.JSAPI,pI="CollectorDisabled",dI="Collector",fI="Data Editing",yI="OfflineDisabled",mI="Offline",gI="Workforce Project",vI="Workforce Worker",wI="Workforce Dispatcher",Nce="Offline Map Areas",Rce="FieldMapsDisabled",bI=Lx.DEVELOPER_BASEMAP,jce=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map(e=>e.toLowerCase());let jt=class extends r1(vs.LoadableMixin(Kf($R))){constructor(e){super(e),this.applicationProperties=null,this.bookmarks=new Uj,this.floorInfo=null,this.geotriggersInfo=null,this.initialViewProperties=new Wm,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,e==null||e.destroy()}initialize(){if(this.when().catch(e=>{Cy.error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(t){return void this.addResolvingPromise(Promise.reject(t))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,t){e&&this._isAuthoringAppSetByUser?t.authoringApp=e:t.authoringApp=cI}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,t){e&&this._isAuthoringAppVersionSetByUser?t.authoringAppVersion=e:t.authoringAppVersion=X4}readInitialViewProperties(e,t){var l;const i=new Wm;t.background&&(i.background=x2.fromJSON(t.background));const s=(l=t.initialState)==null?void 0:l.viewpoint;return s&&(s.rotation&&af.parse(t.version||"","webmap").lessThan(2,20)&&t.authoringApp===Pce&&(s.rotation*=-1),i.viewpoint=Zi.fromJSON(s)),t.mapRangeInfo&&(i.rangeInfo=Fx.fromJSON(t.mapRangeInfo)),t.spatialReference&&(i.spatialReference=Ye.fromJSON(t.spatialReference)),i}writeInitialViewProperties(e,t,i,s){if(!e)return;const l=e.background;l&&l.color&&(t.background=l.write({},s)),e.viewpoint&&(t.initialState={viewpoint:e.viewpoint.write({},s)}),e.rangeInfo&&(t.mapRangeInfo=e.rangeInfo.toJSON(s)),e.spatialReference&&(t.spatialReference=e.spatialReference.write({},s))}writeLayers(e,t,i,s){t[i]=this._writeLayers(e,s,"operational-layers")}readSourceVersion(e,t){const[i,s]=t.version.split(".");return new af(parseInt(i,10),parseInt(s,10))}writeSourceVersion(e,t,i){t[i]=`${Jm.major}.${Jm.minor}`}writeTables(e,t,i,s){const l=this._writeLayers(e,s,"tables");l.length&&(t[i]=l)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return $x(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,t){t={...t,origin:"web-map"};const i=this._getAuthoringPropsState();PT(this,e,s=>super.read(e,s),t),this._restoreAuthoringPropsFromState(i)}write(e,t){if(this.loadStatus!=="loaded"){const i=new te("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Cy.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),i}return this._removeDanglingLayerRefs(),t={...t,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,t)}async save(e){e=e||{},this._validateItem(),await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const t=this.portalItem,i={origin:"web-map",messages:[],writtenProperties:[],url:t.itemUrl&&fi(t.itemUrl),portal:t.portal||Ui.getDefault()},s=this.write({},i);return this._validateJSONForWriting(i,e),await this._updateItemProperties(t),await this._updateItem(t,s,i),await this._updateItemThumbnail(),t}async saveAs(e,t){t=t||{};const i=this._getPortalItem(e);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const s={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:i.portal},l=this.write({},s);this._validateJSONForWriting(s,t),await this._updateItemPropertiesForSaveAs(i);const d=this._getThumbnailState();return await this._createItem(i,l,s,t),this._restoreThumbnailFromState(d),await this._updateItemThumbnail(),i}async updateFrom(e,t){const i=this._updateFromInternal(e,t);this._updateFromPromise=i,await i,i===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var i,s,l,d;const t=this.resourceInfo;return this._collectAllLayersJSON(pL([(i=t==null?void 0:t.baseMap)==null?void 0:i.baseMapLayers,t==null?void 0:t.operationalLayers,(d=(l=(s=this.basemap)==null?void 0:s.resourceInfo)==null?void 0:l.data)==null?void 0:d.baseMapLayers])).find(y=>y.id===e.id)}_collectAllLayersJSON(e){return e.reduce((t,i)=>(t.push(i),i.layerType==="GroupLayer"&&(t=t.concat(this._collectAllLayersJSON(i.layers||[]))),t),[])}_writeLayers(e,t,i){return t={...t,layerContainerType:i},e.map(s=>g5(s,i==="tables"?null:this.getLayerJSONFromResourceInfo(s),t)).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(e){return e.load().catch(t=>{throw new te("webmap:load-portal-item","Failed to load portal item",{error:t})}).then(()=>{if(e.type!=="Web Map")throw new te("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:e.type})}).then(()=>e.fetchData()).then(t=>(this.resourceInfo=t,this._readAndLoadFromJSON(t,{origin:"web-map",portal:e.portal||Ui.getDefault()}))).then(()=>this._computeInitialViewpoint())}_readAndLoadFromJSON(e,t){const i=this._validateJSON(e);return this.read(i,t),this._loadFromJSON(i,t)}_validateJSON(e){const t=af.parse(e.version||"","webmap");return Jm.validate(t),e.version=`${t.major}.${t.minor}`,e}_loadFromJSON(e,t){const i={context:{...t,layerContainerType:"operational-layers"}};return this.portalItem&&(i.context.portal=this.portalItem.portal||Ui.getDefault()),fe(()=>import("./layersCreator.eb3cd633.js"),["assets/layersCreator.eb3cd633.js","assets/lazyLayerLoader.0727f24a.js","assets/portalLayers.ba65dd67.js","assets/layersLoader.10f1601e.js","assets/jsonContext.0f34a0dd.js"]).then(({populateOperationalLayers:s})=>{const l=[],d=e.operationalLayers;d&&d.length&&l.push(s(this.layers,d,i));const y={...i,context:{...i.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},g=e.tables;return g&&g.length&&l.push(s(this.tables,g,y)),qi(l).then(()=>{})})}async _computeInitialViewpoint(){var s;let e=this.initialViewProperties;if((s=e==null?void 0:e.viewpoint)==null?void 0:s.targetGeometry)return;const i=await this._getExtentFromItem();i&&(e=e?e.clone():new Wm,e.viewpoint=new Zi,e.viewpoint.targetGeometry=i,this.initialViewProperties=e)}async _getExtentFromItem(){var i,s;const e=(i=this.initialViewProperties)==null?void 0:i.spatialReference,t=(s=this.portalItem)==null?void 0:s.extent;return e&&t?e.isWGS84?t.clone():e.isWebMercator?oa(t):(await fe(()=>import("./geometryServiceUtils.3a330c5c.js"),[])).getGeometryServiceURL(this.portalItem).then(l=>{const d=new L5;return d.geometries=[t],d.outSpatialReference=e,lI(l,d)}).then(l=>l[0]).catch(l=>(Cy.error("Error projecting item's extent:",l),null)):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,t=e&&e.viewing&&e.viewing.search,i=d=>this.allLayers.some(y=>y.id===d);t&&t.layers&&(t.layers=t.layers.filter(d=>i(d.id))),t&&t.tables&&(t.tables=t.tables.filter(d=>this.tables.some(y=>y.id===d.id)));const s=e&&e.editing&&e.editing.locationTracking;s&&s.info&&!i(s.info.layerId)&&(e.editing=null);const l=this.presentation&&this.presentation.slides;l&&l.forEach(d=>{d.visibleLayers&&(d.visibleLayers=d.visibleLayers.filter(y=>i(y.id)))})}async _validateMap(){var t;if(!((t=this.basemap)!=null&&t.baseLayers.length))throw new te("webmap:save","Map does not have a valid basemap with a base layer.");let e=null;if(await Tf(()=>{const i=Coe(this.initialViewProperties,this.basemap);return e=i.spatialReference,!i.updating}),!dr(e,this.initialViewProperties.spatialReference))throw new te("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:e})}_validateItem(){if(!this.portalItem)throw Cy.error("save: requires the portalItem property to be set"),new te("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==wb)throw new te("webmap:portal-item-wrong-type",`Portal item needs to have type "${wb}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),qi(e).then(()=>{})}async _beforeSave(){const e=[];for(const t of this.allLayers)if("beforeSave"in t&&typeof t.beforeSave=="function"){const i=t.beforeSave();i&&e.push(i)}await qi(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map(t=>t.load());return qi(e).then(()=>{})}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,t){let i=e.messages.filter(s=>s.type==="error").map(s=>new te(s.name,s.message,s.details));if(t.ignoreUnsupported&&(i=i.filter(s=>s.name!=="layer:unsupported"&&s.name!=="symbol:unsupported"&&s.name!=="symbol-layer:unsupported"&&s.name!=="property:unsupported"&&s.name!=="url:unsupported")),i.length>0)throw new te("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){Es(e,pI),Es(e,Rce),Es(e,Lx.METADATA),Es(e,yI),Es(e,Nce),Es(e,wI),Es(e,gI),Es(e,vI),await this._updateItemProperties(e)}async _getWGS84Extent(e){const t=e.clone().normalize();let i;if(t.length>1)for(const s of t)i?s.width>i.width&&(i=s):i=s;else i=t[0];return this._projectToWGS84(i)}async _projectToWGS84(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return Wu(e);const i=await fe(()=>import("./geometryServiceUtils.3a330c5c.js"),[]),s=await i.getGeometryServiceURL(this.portalItem),l=new L5;return l.geometries=[e],l.outSpatialReference=Ye.WGS84,(await lI(s,l))[0]}async _updateTypeKeywords(e){Nd(e,cI),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((t,i,s)=>s.indexOf(t)===i))}_evalCollectorKeyword(e){Lc(e,pI)||Lc(e,gI)||Lc(e,vI)||Lc(e,wI)||!this._hasEditableFeatureLayer()?Es(e,dI):Nd(e,dI)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?Nd(e,fI):Es(e,fI)}_evalOfflineKeyword(e){!Lc(e,yI)&&this._isOfflineCapableMap()?Nd(e,mI):Es(e,mI)}_evalDeveloperBasemapKeyword(e){Ooe(this.basemap)?Nd(e,bI):Es(e,bI)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some(e=>e.loaded&&uM(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter(e=>e.type!=="group").every(e=>e.loaded&&this._isOfflineCapableLayer(e))}_isFeatureCollectionLike(e){return v2(e)||e.type==="map-notes"||e.type==="route"}_isOfflineCapableLayer(e){return uM(e)&&e.capabilities.operations.supportsSync||this._isFeatureCollectionLike(e)&&!e.portalItem||(e.type==="tile"||e.type==="vector-tile")&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||xR(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return e.type==="tile"&&Jse(e.url)&&jce.some(t=>e.url.toLowerCase().includes("/"+t+"/"))}async _updateItem(e,t,i){await e.update({data:t}),this._syncUpInstanceWithItem(e,t,i)}async _createItem(e,t,i,s){const l=this.portalItem,d=!!(l&&l.id&&l.portal.user),y=e.portal;if(await y._signIn(),!await this._canCopyItem(l,d,y))throw new te("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");await y.user.addItem({item:e,folder:s.folder,data:t}),this.portalItem=e,this._syncUpInstanceWithItem(e,t,i)}async _canCopyItem(e,t,i){return!(Y(e)&&e.id&&e.typeKeywords&&e.typeKeywords.includes("useOnly"))||e.portal.portalHostname===i.portalHostname&&(t||await e.reload(),e.itemControl==="admin"||e.itemControl==="update")}_syncUpInstanceWithItem(e,t,i){Sg.prototype.read.call(this,{version:t.version,authoringApp:t.authoringApp,authoringAppVersion:t.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&fi(e.itemUrl)}),Uhe(i),this.resourceInfo=t}async _updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())}_getPortalItem(e){let t=Op.from(e);return t.id&&(t=t.clone(),t.id=null),t.type||(t.type=wb),t.portal||(t.portal=Ui.getDefault()),this._validateItemType(t),t}async _updateFromInternal(e,t){if(t=t||{},await Tf(()=>e.ready),this._updateInitialViewProperties(e,t),e.map===this)for(const i of e.allLayerViews)for(const s of["visible","featureEffect"])s in i&&s in i.layer&&i._isOverridden(s)&&(i.layer[s]=i[s]);await this._updateThumbnailUrl(e,t)}_updateInitialViewProperties(e,t){var i;if(t.backgroundExcluded||(this.initialViewProperties.background=(i=e.background)==null?void 0:i.clone()),this.initialViewProperties.spatialReference=e.spatialReference.clone(),t.viewpointExcluded||(this.initialViewProperties.viewpoint=new Zi({rotation:e.rotation,scale:t.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!t.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const t=e.center.clone().normalize(),i=e.extent.clone(),s=i.width/2;return i.xmin=t.x-s,i.xmax=t.x+s,i}async _updateThumbnailUrl(e,t){if(t.thumbnailExcluded)return;const i=Sce(e,t.thumbnailSize),s=await e.takeScreenshot({format:"png",width:i.width,height:i.height});this._setAutoGeneratedThumbnail(s.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(zl(e)){const t=H4(e),i=t&&t.mediaType,s=i&&N0.get(i.toLowerCase())||null,l=`thumbnail${Date.now()}`;return s?`${l}.${s}`:l}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:K4(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const t=e;if(!t)throw new te("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:t})}};jt.VERSION=Jm,v([_({type:kce,json:{write:!0}})],jt.prototype,"applicationProperties",void 0),v([_({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],jt.prototype,"authoringApp",null),v([Ee("authoringApp")],jt.prototype,"writeAuthoringApp",null),v([_({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],jt.prototype,"authoringAppVersion",null),v([Ee("authoringAppVersion")],jt.prototype,"writeAuthoringAppVersion",null),v([_({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],jt.prototype,"basemap",void 0),v([_({type:Uj,json:{write:{overridePolicy:e=>({enabled:!!(e&&e.length>0),ignoreOrigin:!0})}}})],jt.prototype,"bookmarks",void 0),v([_({type:ace,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],jt.prototype,"floorInfo",void 0),v([_({type:gce,json:{write:!0}})],jt.prototype,"geotriggersInfo",void 0),v([_({type:Wm,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:x2},"initialState.viewpoint":{type:Zi},mapRangeInfo:{type:Fx},spatialReference:{type:Ye}}}}})],jt.prototype,"initialViewProperties",void 0),v([$e("initialViewProperties")],jt.prototype,"readInitialViewProperties",null),v([Ee("initialViewProperties")],jt.prototype,"writeInitialViewProperties",null),v([_({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],jt.prototype,"layers",void 0),v([Ee("layers")],jt.prototype,"writeLayers",null),v([_({type:Op})],jt.prototype,"portalItem",void 0),v([_({json:{write:!0}})],jt.prototype,"presentation",void 0),v([_()],jt.prototype,"resourceInfo",void 0),v([_({readOnly:!0,type:af,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],jt.prototype,"sourceVersion",void 0),v([$e("sourceVersion")],jt.prototype,"readSourceVersion",null),v([Ee("sourceVersion")],jt.prototype,"writeSourceVersion",null),v([_({json:{read:!1,write:{ignoreOrigin:!0}}})],jt.prototype,"tables",void 0),v([Ee("tables")],jt.prototype,"writeTables",null),v([_()],jt.prototype,"thumbnailUrl",null),v([_({type:_ce,json:{write:!0}})],jt.prototype,"widgets",void 0),v([_({type:Cce,json:{read:!0,write:!0}})],jt.prototype,"utilityNetworks",void 0),jt=v([H("esri.WebMap")],jt);const Lce=jt;function Fce(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in e)){const d=Object.getOwnPropertyDescriptor(s,l);d&&Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Dx={exports:{}};(function(e,t){function i(){function l(h){if(typeof h=="number")return q.Uc.ah(h);if(h==null)return null;if(_1[h]!=null)return q.Uc.ah(_1[h]);throw Error("Unrecognised Unit Type")}function d(h){if(typeof h=="number")return q.Uc.ah(h);if(h==null)return null;if(ad[h]!=null)return q.Uc.ah(ad[h]);throw Error("Unrecognised Unit Type")}function y(h){if(h)switch(h){case"loxodrome":return 1;case"great-elliptic":return 2;case"normal-section":return 3;case"shape-preserving":return 4}return 0}function g(h,A,w,u){if(w==null||w.B())return null;switch(w.K()){case q.sn.Point:return h.exportPoint(A,w,u);case q.sn.Polygon:return h.exportPolygon(A,w,u);case q.sn.Polyline:return h.exportPolyline(A,w,u);case q.sn.MultiPoint:return h.exportMultipoint(A,w,u);case q.sn.Envelope:return h.exportExtent(A,w,u)}return null}function x(h,A,w,u){if(w.K()!==q.sn.Point)throw Error("Geometry not Point");return h.exportPoint(A,w,u)}function $(h,A,w){return h.convertToGEGeometry(A,w)}function E(h){var A=h.wkid;h=h.wkt;var w=qh.get(A||h);return w==null&&(A!==-1&&A!=null?(w=q.Gg.create(A),qh.set(A,w)):h&&(w=q.Gg.kP(h),qh.set(h,w))),w}function O(h){var A;if(h==null)return null;var w=E(h);return h=w.Id(),w=w.Ln(),(A={}).tolerance=w,A.unitType=h==null?-1:h.od,A.unitID=h==null?-1:h.Fc(),A.unitBaseFactor=h==null?0:h.ci,A.unitSquareDerivative=h==null?0:q.Uc.VF(h).Fc(),A}function P(h,A,w,u){return w==null?null:(w=q.bc.clip($(h,xe,w),$(h,xe,u),E(A)),g(h,xe,w,A))}function R(h,A,w,u){w=q.bc.fl($(h,xe,w),$(h,xe,u),E(A)),u=[];for(var o=0;o<w.length;o++)u.push(g(h,xe,w[o],A));return u}function L(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.contains($(h,xe,w),$(h,xe,u),E(A))}function z(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.vP($(h,xe,w),$(h,xe,u),E(A))}function V(h,A,w,u,o){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.ub($(h,xe,w),$(h,xe,u),E(A),l(o))}function K(h,A,w,u){return!(w==null&&u!=null||u==null&&w!=null)&&q.bc.Nb($(h,xe,w),$(h,xe,u),E(A))}function ee(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.LS($(h,xe,w),$(h,xe,u),E(A))}function se(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.touches($(h,xe,w),$(h,xe,u),E(A))}function oe(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.iY($(h,xe,w),$(h,xe,u),E(A))}function ne(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.NP($(h,xe,w),$(h,xe,u),E(A))}function ae(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.vU($(h,xe,w),$(h,xe,u),E(A))}function Ie(h,A,w,u,o){if(w==null||u==null)throw Error("Illegal Argument Exception");return q.bc.sB($(h,xe,w),$(h,xe,u),E(A),o)}function Se(h,A,w){if(w==null)throw Error("Illegal Argument Exception");return q.bc.WS($(h,xe,w),E(A))}function Pe(h,A,w){if(w==null)throw Error("Illegal Argument Exception");return w=q.bc.ZB($(h,xe,w),E(A)),g(h,xe,w,A)}function Re(h,A,w,u){if(u===void 0&&(u=!1),w==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){var o=u,r=[];for(u=0;u<w.length;u++)r.push($(h,xe,w[u]));for(w=q.bc.dP(r,o),o=Array(w.length),u=0;u<w.length;u++)o[u]=g(h,xe,w[u],A);return o}return u=q.bc.cP($(h,xe,w),E(A)),g(h,xe,u,A)}function De(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var o=[],r=0;r<w.length;r++)o.push($(h,xe,w[r]));for(w=q.bc.KP(o,$(h,xe,u),E(A)),u=Array(w.length),r=0;r<w.length;r++)u[r]=g(h,xe,w[r],A);return u}return r=q.bc.km($(h,xe,w),$(h,xe,u),E(A)),g(h,xe,r,A)}function Le(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var o=[],r=0;r<w.length;r++)o.push($(h,xe,w[r]));for(w=q.bc.NX(o,$(h,xe,u),E(A)),u=Array(w.length),r=0;r<w.length;r++)u[r]=g(h,xe,w[r],A);return u}return r=q.bc.fp($(h,xe,w),$(h,xe,u),E(A)),g(h,xe,r,A)}function qe(h,A,w,u){if(w==null||u==null)throw Error("Illegal Argument Exception");if(Array.isArray(w)){for(var o=[],r=0;r<w.length;r++)o.push($(h,xe,w[r]));for(w=q.bc.JS(o,$(h,xe,u),E(A)),u=Array(w.length),r=0;r<w.length;r++)u[r]=g(h,xe,w[r],A);return u}return r=q.bc.Fa($(h,xe,w),$(h,xe,u),E(A)),g(h,xe,r,A)}function Oe(h,A,w,u){if(w==null)return null;var o=[];if(Array.isArray(w)){if(w.length===0)return null;for(u=0;u<w.length;u++)o.push($(h,xe,w[u]))}else o.push($(h,xe,w)),u!=null&&o.push($(h,xe,u));return g(h,xe,q.bc.bY(o,E(A)),A)}function zt(h,A,w,u,o,r,n,a){var c=0;if(r!=null)switch(r){case"round":c=0;break;case"bevel":c=1;break;case"miter":c=2;break;case"square":c=3}if(Array.isArray(w)){if(w==null)h=null;else if(w.length===0)h=[];else{var p=[];for(r=0;r<w.length;r++)p.push($(h,xe,w[r]));for(w=q.bc.tU(p,E(A),u,c,n,a,l(o)),u=Array(w.length),r=0;r<w.length;r++)u[r]=g(h,xe,w[r],A);h=u}return h}return w=q.bc.offset($(h,xe,w),E(A),u,c,n,a,l(o)),g(h,xe,w,A)}function ir(h,A,w,u,o,r){if(r===void 0&&(r=!1),Array.isArray(w)){if(!Array.isArray(u)){for(var n=[],a=0;a<w.length;a++)n.push(u);u=n}if(u.length!=w.length){if(u.length==0)throw Error("Illegal Argument Exception");n=[];var c=0;for(a=0;a<w.length;a++)u[a]===void 0?n.push(c):(n.push(u[a]),c=u[a]);u=n}return rr(h,A,w,u,o,!1,r,"geodesic",NaN)}return w=q.bc.buffer($(h,xe,w),E(A),u,l(o),!1,0,NaN),g(h,xe,w,A)}function Xt(h,A,w,u,o,r,n,a){if(Array.isArray(w)){if(!Array.isArray(u)){for(var c=[],p=0;p<w.length;p++)c.push(u);u=c}if(u.length!==w.length){if(u.length===0)throw Error("Illegal Argument Exception");c=[];var f=0;for(p=0;p<w.length;p++)u[p]===void 0?c.push(f):(c.push(u[p]),f=u[p]);u=c}return rr(h,A,w,u,o,!0,r,n,a)}return n===void 0&&(n=NaN),w=q.bc.buffer($(h,xe,w),E(A),u,l(o),!0,y(r),n),g(h,xe,w,A)}function rr(h,A,w,u,o,r,n,a,c){if(c===void 0&&(c=NaN),w==null)return null;if(w.length===0)return[];for(var p=[],f=0;f<w.length;f++)p.push($(h,xe,w[f]));for(w=q.bc.GN(p,E(A),u,l(o),r,n,y(a),c),u=Array(w.length),f=0;f<w.length;f++)u[f]=g(h,xe,w[f],A);return u}function Xr(h,A,w,u,o){var r;return o===void 0&&(o=!0),w=q.bc.iz($(h,xe,w),$(h,xe,u),o),(r={}).coordinate=x(h,xe,w.az(),A),r.distance=w.cz(),r.isRightSide=w.Nz(),r.vertexIndex=w.Va(),r.isEmpty=w.B(),r}function $2(h,A,w,u){var o;return w=q.bc.jz($(h,xe,w),$(h,xe,u)),(o={}).coordinate=x(h,xe,w.az(),A),o.distance=w.cz(),o.isRightSide=w.Nz(),o.vertexIndex=w.Va(),o.isEmpty=w.B(),o}function m1(h,A,w,u,o,r){var n;for(w=q.bc.kz($(h,xe,w),$(h,xe,u),o,r),u=[],o=0;o<w.length;o++)w[o].B()===!1&&u.push(((n={}).coordinate=x(h,xe,w[o].az(),A),n.distance=w[o].cz(),n.isRightSide=w[o].Nz(),n.vertexIndex=w[o].Va(),n.isEmpty=w[o].B(),n));return u}function M2(h,A,w,u,o,r){return w=q.bc.KQ($(h,xe,w),E(A),u,o,l(r)),g(h,xe,w,A)}function g1(h,A,w,u,o){return w=q.bc.Sr($(h,xe,w),E(A),u,l(o)),g(h,xe,w,A)}function I2(h,A,w,u,o,r){return r===void 0&&(r=0),w=q.bc.Ry($(h,xe,w),E(A),u,l(o),r),g(h,xe,w,A)}function T2(h,A,w,u){if(w==null)throw Error("Illegal Argument Exception");return q.bc.BU($(h,xe,w),E(A),d(u))}function E2(h,A,w,u){if(w==null)throw Error("Illegal Argument Exception");return q.bc.CU($(h,xe,w),E(A),l(u))}function v1(h,A,w,u,o){if(w==null)throw Error("Illegal Argument Exception");return q.bc.QQ($(h,xe,w),E(A),d(u),y(o))}function A2(h,A,w,u,o){if(w==null)throw Error("Illegal Argument Exception");return q.bc.TQ($(h,xe,w),E(A),l(u),y(o))}function k2(h){q.HL.bind(h)}function O2(h,A,w,u,o){var r=null,n=null;if(u){if(!o)throw q.i.O("AOI missing Spatial Reference");r=$(h,xe,u),n=E(o).hh()}return(h=q.iu.QR(E(A).hh(),E(w).hh(),r,n))!==null?h:null}function C2(h,A,w,u,o){var r=null,n=null;if(u){if(!o)throw q.i.O("AOI missing Spatial Reference");r=$(h,xe,u),n=E(o).hh()}return q.iu.RR(E(A).hh(),E(w).hh(),r,n)}function P2(h,A,w,u,o,r){if(o===void 0&&(o=null),r===void 0&&(r=null),r){var n=new q.sC;n.Xu=r.densificationStep,n.Lr=r.centralMeridianOfOutputGCS,r.clipWithInputHorizon&&n.HW(r.clipWithInputHorizon),r.clipWithOutputHorizon&&n.IW(r.clipWithOutputHorizon)}if(this.CY===!1)throw Error("Projection Engine must be enabled using enableProjection");if(A.length===0)return[];if(o){if(!(r=o.getCachedGeTransformation(w,u)))e:{if(r=o,o=null,r){var a=r.getGTListEntry();if(a!==null){o=new q.qC(null);for(var c=0,p=a.steps;c<p.length;c++){a=p[c];var f=new q.Cx(a.geogtran);a.isInverse&&f.Lz(),o.add(f)}n=q.xr.Pr(E(w).hh(),E(u).hh(),o,n),r.assignCachedGe(w,u,n),r=n;break e}}if(o===null&&r&&r.steps&&0<r.steps.length){for(o=new q.qC(null),c=0,p=r.steps;c<p.length;c++)(a=p[c]).wkid!=-1&&a.wkid!=null?o.add(q.Cx.create(a.wkid,a.isInverse)):o.add(q.Cx.oP(a.wkt,a.isInverse));n=q.xr.Pr(E(w).hh(),E(u).hh(),o,n),r.assignCachedGe(w,u,n),r=n}else r=q.xr.Pr(E(w).hh(),E(u).hh(),o,n)}for(w=[],o=0;o<A.length;o++)n=A[o],w.push(w1(h,n,u,r))}else for(r=q.xr.Pr(E(w).hh(),E(u).hh(),null),w=[],o=0;o<A.length;o++)n=A[o],w.push(w1(h,n,u,r));return w}function w1(h,A,w,u){return A=q.bc.Bh($(h,xe,A),u),g(h,xe,A,w)}var _i,q,sr,b1,gt=this&&this.__extends||function(){function h(A,w){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var r in o)o.hasOwnProperty(r)&&(u[r]=o[r])})(A,w)}return function(A,w){function u(){this.constructor=A}h(A,w),A.prototype=w===null?Object.create(w):(u.prototype=w.prototype,new u)}}();(function(h){var A;(A=h.sn||(h.sn={}))[A.Unknown=0]="Unknown",A[A.Point=33]="Point",A[A.Line=322]="Line",A[A.Envelope=197]="Envelope",A[A.MultiPoint=550]="MultiPoint",A[A.Polyline=1607]="Polyline",A[A.Polygon=1736]="Polygon",function(u){u[u.enumMild=0]="enumMild",u[u.enumMedium=1]="enumMedium",u[u.enumHot=2]="enumHot"}(h.SK||(h.SK={}));var w=function(){function u(){this.description=null,this.PA=0}return u.prototype.K=function(){return 0},u.prototype.Eb=function(){return-1},u.prototype.kg=function(o){this.wc(),o!=this.description&&this.un(o)},u.prototype.un=function(){},u.prototype.Ll=function(o){this.wc(),o!=this.description&&(o=h.ee.wR(this.description,o))!=this.description&&this.un(o)},u.prototype.hasAttribute=function(o){return this.description.hasAttribute(o)},u.prototype.se=function(o){this.wc(),this.description.hasAttribute(o)||(o=h.ee.vR(this.description,o),this.un(o))},u.prototype.Vg=function(){return null},u.prototype.dn=function(){},u.prototype.A=function(){},u.prototype.Ro=function(){},u.prototype.yc=function(o){this.A(o)},u.prototype.B=function(){return!0},u.prototype.Pa=function(){},u.prototype.Pc=function(){},u.prototype.Ja=function(){return null},u.prototype.copyTo=function(){},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.cG=function(){return this.hasAttribute(1)},u.uf=function(o){return 1+((192&o)>>6)>>1},u.Sn=function(o){return(32&o)!=0},u.MS=function(o){return(128&o)!=0},u.zd=function(o){return(256&o)!=0},u.zj=function(o){return(512&o)!=0},u.Ic=function(o){return(1024&o)!=0},u.prototype.Pf=function(){var o=this.Ja();return this.copyTo(o),o},u.prototype.mg=function(){return null},u.ig=function(o){var r=o.Ja();return o.copyTo(r),r},u.prototype.wc=function(){0<=this.PA&&(this.PA+=2147483649)},u.zx=function(o){var r=o.K();if(u.zj(r))return o.I();if(o.B())return 0;if(r==197)return 4;if(r==33)return 1;if(u.zd(r))return 2;throw h.i.ga("missing type")},u}();h.ba=w})(q||(q={})),sr=q||(q={}),b1=function(){function h(){this.y=this.x=0}return h.construct=function(A,w){var u=new h;return u.x=A,u.y=w,u},h.cl=function(A){var w=new h;return w.x=A.x,w.y=A.y,w},h.prototype.na=function(A,w){this.x=A,this.y=w},h.prototype.N=function(A){this.x=A.x,this.y=A.y},h.prototype.hq=function(A,w){return this.x===A&&this.y===w},h.prototype.Mz=function(A){return 2220446049250313e-31>=Math.abs(this.x-A.x)&&2220446049250313e-31>=Math.abs(this.y-A.y)},h.prototype.rb=function(A){return this.x===A.x&&this.y===A.y},h.prototype.Nb=function(A){return A==this||A instanceof h&&this.x==A.x&&this.y==A.y},h.prototype.sub=function(A){this.x-=A.x,this.y-=A.y},h.prototype.vc=function(A,w){this.x=A.x-w.x,this.y=A.y-w.y},h.prototype.add=function(A,w){w!==void 0?(this.x=A.x+w.x,this.y=A.y+w.y):(this.x+=A.x,this.y+=A.y)},h.prototype.Uq=function(){this.x=-this.x,this.y=-this.y},h.prototype.nt=function(A){this.x=-A.x,this.y=-A.y},h.prototype.GS=function(A,w,u){this.x=A.x*(1-u)+w.x*u,this.y=A.y*(1-u)+w.y*u},h.prototype.Dt=function(A,w){this.x=this.x*A+w.x,this.y=this.y*A+w.y},h.prototype.yW=function(A,w,u){this.x=w.x*A+u.x,this.y=w.y*A+u.y},h.prototype.scale=function(A){this.x*=A,this.y*=A},h.prototype.compare=function(A){return this.y<A.y?-1:this.y>A.y?1:this.x<A.x?-1:this.x>A.x?1:0},h.prototype.normalize=function(){var A=this.length();A==0&&(this.x=1,this.y=0),this.x/=A,this.y/=A},h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},h.prototype.Tk=function(){return this.x*this.x+this.y*this.y},h.ub=function(A,w){return Math.sqrt(this.zc(A,w))},h.Jy=function(A,w,u,o){return A-=u,w-=o,Math.sqrt(A*A+w*w)},h.prototype.Sh=function(A){return this.x*A.x+this.y*A.y},h.prototype.$C=function(A){return Math.abs(this.x*A.x)+Math.abs(this.y*A.y)},h.prototype.yi=function(A){return this.x*A.y-this.y*A.x},h.prototype.Ct=function(A,w){var u=-this.x*w+this.y*A;this.x=this.x*A+this.y*w,this.y=u},h.prototype.Jv=function(){var A=this.x;this.x=-this.y,this.y=A},h.prototype.GG=function(A){this.x=-A.y,this.y=A.x},h.prototype.cr=function(){var A=this.x;this.x=this.y,this.y=-A},h.prototype.su=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:this.x==0?4:3},h.pu=function(A,w){var u=A.su(),o=w.su();return o==u?0>(A=A.yi(w))?1:0<A?-1:0:u<o?-1:1},h.zc=function(A,w){var u=A.x-w.x;return u*u+(A=A.y-w.y)*A},h.prototype.toString=function(){return"("+this.x+" , "+this.y+")"},h.prototype.Sc=function(){this.y=this.x=NaN},h.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)},h.prototype.offset=function(A,w){var u=h.ub(A,w),o=h.construct(this.x,this.y);if(u==0)return h.ub(o,A);var r=new h;return r.N(w),r.sub(A),o.sub(A),o.yi(r)/u},h.Wq=function(A,w,u){var o=new sr.Xb;o.set(w.x),o.sub(A.x);var r=new sr.Xb;r.set(u.y),r.sub(A.y);var n=new sr.Xb;n.set(w.y),n.sub(A.y);var a=new sr.Xb;return a.set(u.x),a.sub(A.x),o.Ag(r),n.Ag(a),o.sub(n),o.rs()?(o=new sr.ip(w.x),r=new sr.ip(A.x),n=new sr.ip(A.y),o=o.kt(r),A=(A=new sr.ip(u.y)).kt(n),w=(w=new sr.ip(w.y)).kt(n),u=(u=new sr.ip(u.x)).kt(r),o=o.nr(A),w=w.nr(u),(o=o.nr(w)).fT()?-1:o.ZR()?1:0):0>(u=o.value())?-1:0<u?1:0},h.prototype.dc=function(){return sr.P.wj(sr.P.wj())},h}(),sr.h=b1,function(h){var A=function(){function w(u){this.Ay=this.Ot=0,this.GX=u}return w.prototype.reset=function(){this.Ay=this.Ot=0},w.prototype.add=function(u){u-=this.Ay;var o=this.Ot+u;this.Ay=o-this.Ot-u,this.Ot=o},w.prototype.sub=function(u){this.add(-u)},w.prototype.tm=function(){return this.GX+this.Ot},w}();h.Ex=A,h.mc=function(){function w(){}return w.Dn=function(u,o){return 0<=o?Math.abs(u):-Math.abs(u)},w.sign=function(u){return 0>u?-1:0<u?1:0},w.LK=function(u){return u-360*Math.floor(u/360)},w.round=function(u){return Math.floor(u+.5)},w.ox=function(u){return u*u},w.jq=function(u,o,r){return .5>=r?u+(o-u)*r:o-(o-u)*(1-r)},w.IG=function(u,o,r,n){.5>=r?(n.x=u.x+(o.x-u.x)*r,n.y=u.y+(o.y-u.y)*r):(n.x=o.x-(o.x-u.x)*(1-r),n.y=o.y-(o.y-u.y)*(1-r))},w.dT=function(u,o,r,n,a,c){.5>=a?(c.x=u+(r-u)*a,c.y=o+(n-o)*a):(c.x=r-(r-u)*(1-a),c.y=n-(n-o)*(1-a))},w}()}(q||(q={})),function(h){var A=function(w){function u(){var o=w.call(this)||this;return o.sa=0,o.oa=0,o.qa=0,o.ma=0,o.la=null,o}return gt(u,w),u.prototype.ac=function(){return h.h.construct(this.sa,this.oa)},u.prototype.$p=function(o){o.x=this.sa,o.y=this.oa},u.prototype.Ec=function(o){this.gm(0,o)},u.prototype.TB=function(o,r){this.gm(0,h.h.construct(o,r))},u.prototype.Uo=function(o){this.bD(0,o)},u.prototype.setStart=function(o){this.oD(0,o)},u.prototype.yv=function(o,r){return this.Pd(0,o,r)},u.prototype.SB=function(o,r,n){this.vn(0,o,r,n)},u.prototype.xc=function(){return h.h.construct(this.qa,this.ma)},u.prototype.Vr=function(o){o.x=this.qa,o.y=this.ma},u.prototype.Rc=function(o){this.gm(1,o)},u.prototype.Sl=function(o,r){this.gm(1,h.h.construct(o,r))},u.prototype.Qo=function(o){this.bD(1,o)},u.prototype.setEnd=function(o){this.oD(1,o)},u.prototype.jv=function(o,r){return this.Pd(1,o,r)},u.prototype.IB=function(o,r,n){this.vn(1,o,r,n)},u.prototype.Eb=function(){return 1},u.prototype.B=function(){return this.Bc()},u.prototype.Pa=function(){},u.prototype.He=function(){return 0},u.prototype.Fa=function(o,r,n,a,c){return this.EM(o,r,n,a,c)},u.prototype.isIntersecting=function(o,r){return this.Br(o,r,!1)!=0},u.prototype.ss=function(o,r){return this.tu(o,r,!1)},u.prototype.tu=function(){return null},u.prototype.Bc=function(){return!1},u.prototype.$x=function(o){if(this.wc(),this.la==null&&0<o)this.la=h.P.lg(2*o);else if(this.la!=null&&this.la.length<2*o){for(var r=this.la.slice(0),n=this.la.length;n<2*o;n++)r[n]=0;this.la=r}},u.aM=function(o,r,n){if(0<n)var a=0;for(var c=0;c<n;c++)r[0+a]=o[0],a++},u.prototype.gm=function(o,r){o!=0?(this.qa=r.x,this.ma=r.y):(this.sa=r.x,this.oa=r.y)},u.prototype.un=function(o){if(this.la!=null){for(var r=h.ee.Kw(o,this.description),n=[],a=u.Ig(this.description,0),c=u.Ig(this.description,1),p=u.Ig(o,0),f=u.Ig(o,1),m=0,b=1,S=o.Ba;b<S;b++){var M=o.qd(b),T=h.ua.Wa(M);if(r[b]==-1){var k=h.ua.te(M);for(M=0;M<T;M++)n[p+m]=k,n[f+m]=k,m++}else for(k=this.description.ak(r[b])-2,M=0;M<T;M++)n[p+m]=this.la[a+k],n[f+m]=this.la[c+k],m++,k++}this.la=n}this.description=o},u.prototype.bD=function(o,r){if(this.Bc())throw h.i.ga("empty geometry");r.kg(this.description),r.Bc()&&r.up();for(var n=0;n<this.description.Ba;n++)for(var a=this.description.Fd(n),c=0,p=h.ua.Wa(a);c<p;c++){var f=this.Pd(o,a,c);r.setAttribute(a,c,f)}},u.prototype.oD=function(o,r){if(this.wc(),r.Bc())throw h.i.ga("empty geometry");for(var n=r.description,a=0,c=n.Ba;a<c;a++)for(var p=n.Fd(a),f=h.ua.Wa(p),m=0;m<f;m++){var b=r.Vc(p,m);this.vn(o,p,m,b)}},u.prototype.Pd=function(o,r,n){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.ma:this.qa:n!=0?this.oa:this.sa;if(n>=h.ua.Wa(r))throw h.i.re();var a=this.description.Qf(r);return 0<=a?(this.la!=null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.ak(a)-2+n]):h.ua.te(r)},u.prototype.vn=function(o,r,n,a){if(this.wc(),n>=h.ua.Wa(r))throw h.i.re();var c=this.description.Qf(r);0>c&&(this.se(r),c=this.description.Qf(r)),r==0?o!=0?n!=0?this.ma=a:this.qa=a:n!=0?this.oa=a:this.sa=a:(this.la==null&&this.$x(this.description.Be.length-2),this.la[u.Ig(this.description,o)+this.description.ak(c)-2+n]=a)},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();o.description=this.description,o.$x(this.description.Be.length-2),u.aM(this.la,o.la,2*(this.description.Be.length-2)),o.sa=this.sa,o.oa=this.oa,o.qa=this.qa,o.ma=this.ma,o.wc(),this.pp(o)},u.prototype.Vg=function(o,r){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(n.pa=this.Pd(0,o,r),n.wa=n.pa,n.Mk(this.Pd(1,o,r)),n)},u.prototype.TI=function(o){this.Bc()?o.Pa():(o.pa=this.Pd(0,0,0),o.wa=o.pa,o.Mk(this.Pd(1,0,0)))},u.prototype.Vw=function(o,r){r.kg(this.description),r.Db(this.ic(o));for(var n=1,a=this.description.Ba;n<a;n++)for(var c=this.description.Fd(n),p=h.ua.Wa(c),f=0;f<p;f++){var m=this.Vc(o,c,f);r.setAttribute(c,f,m)}},u.prototype.zM=function(o){if(this.description!=o.description||this.sa!=o.sa||this.qa!=o.qa||this.oa!=o.oa||this.ma!=o.ma)return!1;for(var r=0;r<2*(this.description.Be.length-2);r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.vG=function(){return this.sa==this.qa&&this.oa==this.ma},u.prototype.reverse=function(){var o=this.sa;this.sa=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=1;for(var r=this.description.Ba;o<r;o++)for(var n=this.description.qd(o),a=0,c=h.ua.Wa(n);a<c;a++){var p=this.Pd(0,n,a),f=this.Pd(1,n,a);this.vn(0,n,a,f),this.vn(1,n,a,p)}},u.prototype.Br=function(o,r,n){var a=o.K();if(this.K()===322){if(a==322)return h.zb.IM(this,o,r,n);throw h.i.Ra()}throw h.i.Ra()},u.prototype.EM=function(o,r,n,a,c){var p=o.K();if(this.K()===322){if(p==322)return h.zb.Yx(this,o,r,n,a,c);throw h.i.Ra()}throw h.i.Ra()},u.prototype.Sx=function(){return null},u.Ig=function(o,r){return r*(o.Be.length-2)},u.prototype.ic=function(o,r){if(r===void 0)return r=new h.h,this.ic(o,r),r;h.mc.dT(this.sa,this.oa,this.qa,this.ma,o,r)},u.prototype.fe=function(){return null},u.prototype.ZF=function(){return null},u.prototype.fq=function(){return null},u.prototype.Di=function(){return null},u.prototype.Qn=function(){return null},u.prototype.jg=function(){return null},u.prototype.Tx=function(o,r){return r!==void 0?this.ux(r)-this.ux(o):this.ux(o)},u.prototype.pp=function(){},u.prototype.fl=function(){return null},u.prototype.dh=function(){},u.prototype.Vc=function(){return null},u.prototype.Me=function(){return null},u.prototype.ux=function(){return null},u.prototype.HG=function(){return null},u.prototype.ub=function(o,r){if(!r&&this.Br(o,0,!1)!=0)return 0;r=17976931348623157e292;var n=this.ac(),a=o.fe(n,!1);return n.sub(o.ic(a)),(n=n.length())<r&&(r=n),n=this.xc(),a=o.fe(n,!1),n.sub(o.ic(a)),(n=n.length())<r&&(r=n),n=o.ac(),a=this.fe(n,!1),n.sub(this.ic(a)),(n=n.length())<r&&(r=n),n=o.xc(),a=this.fe(n,!1),n.sub(this.ic(a)),(n=n.length())<r&&(r=n),r},u.prototype.mg=function(){return h.si.im(this,null)},u}(h.ba);h.MC=A}(q||(q={})),new q.h,function(h){var A;(A=h.UK||(h.UK={}))[A.Unknown=-1]="Unknown",A[A.Not=0]="Not",A[A.Weak=1]="Weak",A[A.Strong=2]="Strong",function(u){u[u.DirtyIsKnownSimple=1]="DirtyIsKnownSimple",u[u.IsWeakSimple=2]="IsWeakSimple",u[u.IsStrongSimple=4]="IsStrongSimple",u[u.DirtyOGCFlags=8]="DirtyOGCFlags",u[u.DirtyVerifiedStreams=32]="DirtyVerifiedStreams",u[u.DirtyExactIntervals=64]="DirtyExactIntervals",u[u.DirtyLooseIntervals=128]="DirtyLooseIntervals",u[u.DirtyIntervals=192]="DirtyIntervals",u[u.DirtyIsEnvelope=256]="DirtyIsEnvelope",u[u.DirtyLength2D=512]="DirtyLength2D",u[u.DirtyRingAreas2D=1024]="DirtyRingAreas2D",u[u.DirtyCoordinates=1993]="DirtyCoordinates",u[u.DirtyAllInternal=65535]="DirtyAllInternal",u[u.DirtyAll=16777215]="DirtyAll"}(h.GK||(h.GK={}));var w=function(u){function o(){var r=u.call(this)||this;return r.Jm=65535,r.xa=0,r.Rg=-1,r.Cb=null,r}return gt(o,u),o.prototype.pp=function(){},o.prototype.Zx=function(){},o.prototype.ey=function(){},o.prototype.I=function(){return this.xa},o.prototype.B=function(){return this.Bc()},o.prototype.Bc=function(){return this.xa==0},o.prototype.bk=function(r){return(this.Jm&r)!=0},o.prototype.Nf=function(r,n){this.Jm=n?this.Jm|r:this.Jm&~r},o.prototype.rc=function(){this.bk(32)&&this.WM()},o.prototype.vx=function(){if(this.Bc())throw h.i.ga("This operation was performed on an Empty Geometry.")},o.prototype.we=function(r,n){if(0>r||r>=this.xa)throw h.i.ga("index out of bounds");this.rc(),n.kg(this.description),n.B()&&n.up();for(var a=0;a<this.description.Ba;a++)for(var c=this.description.Fd(a),p=0,f=h.ua.Wa(c);p<f;p++){var m=this.Aa[a].Bg(f*r+p);n.setAttribute(c,p,m)}},o.prototype.It=function(r,n){this.rc();for(var a=n.description,c=0;c<a.Ba;c++)for(var p=a.Fd(c),f=h.ua.Wa(p),m=0;m<f;m++){var b=n.Vc(p,m);this.setAttribute(p,r,m,b)}},o.prototype.D=function(r,n){if(0>r||r>=this.I())throw h.i.re();this.rc(),this.Aa[0].uc(2*r,n)},o.prototype.Oa=function(r){var n=new h.h;return this.D(r,n),n},o.prototype.Hc=function(r,n){this.Aa[0].uc(2*r,n)},o.prototype.Db=function(r,n,a){if(0>r||r>=this.xa)throw h.i.re();this.rc();var c=this.Aa[0];a!==void 0?(c.write(2*r,n),c.write(2*r+1,a)):c.Vt(2*r,n),this.Qc(1993)},o.prototype.xz=function(){if(void 0>=this.I())throw h.i.re();this.rc();var r=this.Aa[0],n=new h.Od;return n.x=r.read(NaN),n.y=r.read(NaN),n.z=this.hasAttribute(1)?this.Aa[1].Bg(void 0):h.ua.te(1),n},o.prototype.YB=function(r){if(0>r||r>=this.I())throw h.i.re();this.se(1),this.rc(),this.Qc(1993);var n=this.Aa[0];n.write(2*r,(void 0).x),n.write(2*r+1,(void 0).y),this.Aa[1].rr(r,(void 0).z)},o.prototype.Vc=function(r,n,a){if(0>n||n>=this.xa)throw h.i.re();var c=h.ua.Wa(r);if(a>=c)throw h.i.re();this.rc();var p=this.description.Qf(r);return 0<=p?this.Aa[p].Bg(n*c+a):h.ua.te(r)},o.prototype.sF=function(r,n){return this.Vc(r,n,void 0)},o.prototype.setAttribute=function(r,n,a,c){if(0>n||n>=this.xa)throw h.i.re();var p=h.ua.Wa(r);if(a>=p)throw h.i.re();this.se(r),this.rc(),r=this.description.Qf(r),this.Qc(1993),this.Aa[r].rr(n*p+a,c)},o.prototype.vb=function(r){return this.vx(),this.se(r),this.rc(),this.Aa[this.description.Qf(r)]},o.prototype.kn=function(r,n){if(n!=null&&h.ua.Vp(r)!=n.Vp())throw h.i.O();this.se(r),r=this.description.Qf(r),this.Aa==null&&(this.Aa=h.Zc.kI(this.description.Ba)),this.Aa[r]=n,this.Qc(16777215)},o.prototype.un=function(r){var n=null;if(this.Aa!=null){var a=h.ee.Kw(r,this.description);n=[];for(var c=0,p=r.Ba;c<p;c++)a[c]!=-1&&(n[c]=this.Aa[a[c]])}this.description=r,this.Aa=n,this.Rg=-1,this.Qc(16777215)},o.prototype.uD=function(r){this.yu(!0),r instanceof h.l?this.aa.A(r):this.aa.Ro(r)},o.prototype.VM=function(r){this.yu(!1),r instanceof h.l?this.aa.A(r):this.aa.Ro(r)},o.prototype.dn=function(r){this.yu(!0),this.aa.copyTo(r)},o.prototype.A=function(r){this.uD(r)},o.prototype.Ro=function(r){this.uD(r)},o.prototype.yc=function(r){this.VM(r)},o.prototype.Vg=function(r,n){var a=new h.Oc;return this.Bc()?(a.Pa(),a):(this.yu(!0),this.aa.Vg(r,n))},o.prototype.dc=function(){var r=this.description.dc();if(!this.Bc())for(var n=this.I(),a=0,c=this.description.Ba;a<c;a++)r=this.Aa[a].Bn(r,0,n*h.ua.Wa(this.description.Fd(a)));return r},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&this.description.Nb(r.description))||this.Bc()!=r.Bc())return!1;if(this.Bc())return!0;var n=this.I();if(n!=r.I())return!1;for(var a=0;a<this.description.Ba;a++){var c=this.description.qd(a),p=this.vb(c),f=r.vb(c);if(!p.Nb(f,0,n*h.ua.Wa(c)))return!1}return!0},o.prototype.copyTo=function(r){if(r.K()!=this.K())throw h.i.O();this.YC(r)},o.prototype.YC=function(r){this.rc(),r.description=this.description,r.Aa=null;var n=this.description.Ba,a=null;if(this.Aa!=null){a=[];for(var c=0;c<n;c++)this.Aa[c]!=null&&(a[c]=this.Aa[c].AB(this.I()*h.ua.Wa(this.description.Fd(c))))}this.aa!=null?(r.aa=this.aa.Ja(),this.aa.copyTo(r.aa)):r.aa=null,r.xa=this.xa,r.Jm=this.Jm,r.Aa=a;try{this.pp(r)}catch{throw r.Pa(),h.i.hu()}},o.prototype.qD=function(){this.xa=0,this.Rg=-1,this.Aa=null,this.Qc(16777215)},o.prototype.Qc=function(r){r==16777215&&(this.Rg=-1,this.Zx()),this.Jm|=r,this.fM(),this.wc()},o.prototype.yu=function(r){if(this.rc(),this.bk(192))if(this.aa==null?this.aa=new h.Hh(this.description):this.aa.kg(this.description),this.B())this.aa.Pa();else{this.dy(r);for(var n=1;n<this.description.Ba;n++)for(var a=this.description.Fd(n),c=h.ua.Wa(a),p=this.Aa[n],f=0;f<c;f++){var m=new h.Oc;m.Pa();for(var b=0;b<this.xa;b++){var S=p.Bg(b*c+f);m.$b(S)}this.aa.setInterval(a,f,m)}r&&this.Nf(192,!1)}},o.prototype.dy=function(){this.aa.Pa();for(var r=this.Aa[0],n=new h.h,a=0;a<this.xa;a++)r.uc(2*a,n),this.aa.$b(n)},o.prototype.Ap=function(r){r.Pa();for(var n=this.Aa[0],a=new h.h,c=0;c<this.xa;c++)n.uc(2*c,a),r.$b(a)},o.prototype.WM=function(){if(this.Rg<this.xa){this.Aa==null&&(this.Aa=h.Zc.kI(this.description.Ba)),this.Rg=2147483647;for(var r=0;r<this.description.Ba;r++){var n=this.description.Fd(r);if(this.Aa[r]!=null){var a=h.ua.Wa(n),c=h.P.truncate(this.Aa[r].size/a);c<this.xa&&(c=h.P.truncate(this.Rg>this.xa+5?(5*this.xa+3)/4:this.xa),this.Aa[r].resize(c*a,h.ua.te(n))),c<this.Rg&&(this.Rg=c)}else this.Aa[r]=h.Zc.SE(n,this.xa),this.Rg=this.xa}}this.ey(),this.Nf(32,!1)},o.prototype.fm=function(r){if(0>r)throw h.i.O();r!=this.xa&&(this.xa=r,this.Qc(65535))},o.prototype.qm=function(r){if(!this.bk(1)){if(!this.bk(2))return 0;if(this.IT>=r)return this.bk(8)?1:2}return-1},o.prototype.Eh=function(r,n){if(this.IT=n,r==-1)this.Nf(1,!0),this.Nf(8,!0);else if(this.Nf(1,!1),this.Nf(8,!0),r==0)this.Nf(2,!1),this.Nf(4,!1);else if(r==1)this.Nf(2,!0),this.Nf(4,!1);else{if(r!=2)throw h.i.ga("internal error.");this.Nf(2,!0),this.Nf(4,!0)}},o.prototype.fM=function(){this.Cb!=null&&(this.Cb=null)},o.prototype.eD=function(r,n,a,c){if(0>r||r>=this.xa||0>n||n>=this.xa)throw h.i.ga("index out of bounds");this.rc(),c.kg(this.description),c.B()&&c.up();for(var p=0;p<this.description.Ba;p++)for(var f=this.description.Fd(p),m=0,b=h.ua.Wa(f);m<b;m++){var S=this.Aa[p].Bg(b*r+m),M=this.Aa[p].Bg(b*n+m);c.setAttribute(f,m,h.mc.jq(S,M,a))}},o.prototype.Ar=function(r,n){var a=this.Aa[0].o,c=a[2*r]-a[2*n];return r=a[2*r+1]-a[2*n+1],Math.sqrt(c*c+r*r)},o.prototype.Fh=function(r,n){if(0>r||r>=this.xa)throw h.i.re();if(n.B())throw h.i.O();this.rc();for(var a=n.description,c=0;c<a.Ba;c++)for(var p=a.qd(c),f=h.ua.Wa(p),m=0;m<f;m++){var b=n.Vc(p,m);this.setAttribute(p,r,m,b)}},o.prototype.nu=function(){return null},o.prototype.hj=function(){return null},o}(h.ba);h.Fx=w}(q||(q={})),function(h){var A=function(){function w(){this.ob=this.$n=null,this.Vm=124234251,this.Tv=!0,this.Ne=-1,this.ob=new h.ad(7),this.$n=null}return w.prototype.Wo=function(u){this.$n=u},w.prototype.LP=function(){this.Tv=!1},w.prototype.Ee=function(u){this.ob.Ee(u)},w.prototype.Rr=function(u){var o=this.ob.De();return this.jX(o),this.mX(u,o),o},w.prototype.GP=function(u){this.ob.kd(u)},w.prototype.addElement=function(u,o){return o==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),o=this.Ne),this.zD(u,0,o)},w.prototype.DD=function(u){return this.Ne==-1&&(this.Ne=this.Rr(-1)),this.zD(u,1,this.Ne)},w.prototype.yn=function(u){this.Ne==-1&&(this.Ne=this.Rr(-1));var o=this.Ne,r=this.ob.o;if(o==-1||r[7*o]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(r=this.ob.o)[7*o]=u,this.xp(-1,u,o,r),u;var n=o==-1?-1:r[7*o+2];return u=this.ob.Nl([-1,-1,n,u,this.il(),-1,-1]),(r=this.ob.o)[7*n+1]=u,this.ky(u,r),r[7*u+2]===-1&&(r[7*o]=u),this.xp(-1,u,o,r),u},w.prototype.Bu=function(u,o,r,n){var a=-1;a==-1&&(this.Ne==-1&&(this.Ne=this.Rr(-1)),a=this.Ne);var c=this.ob.o;if(a==-1||c[7*a]==-1)return r=this.ob.Nl([-1,-1,-1,r,this.il(),-1,-1]),(c=this.ob.o)[7*a]=r,this.xp(-1,r,a,c),r;if(n){n=o!=-1?this.$n.compare(this,r,o):-1;var p=u!=-1?this.$n.compare(this,r,u):1}else n=-1,p=1;if(n==0||p==0)return c[7*a+3]=n==0?o:u,-1;for((o!=-1&&u!=-1?this.Vm>h.P.WA(this.Vm)>>1:o!=-1)?u=o:n=p,o=!0;;){if(0>n){if((p=c[7*u])==-1){n=u,r=this.ob.Nl([-1,-1,u,r,this.il(),-1,-1]),(c=this.ob.o)[7*u]=r;break}u=p}else{if((p=c[7*u+1])==-1){n=c[7*u+6],r=this.ob.Nl([-1,-1,u,r,this.il(),-1,-1]),(c=this.ob.o)[7*u+1]=r;break}u=p}o&&(n*=-1,o=!1)}return this.ky(r,c),c[7*r+2]===-1&&(c[7*a]=r),this.xp(n,r,a,c),r},w.prototype.zF=function(){return this.cR(this.Ne)},w.prototype.wd=function(u,o){o=o==-1?this.Ne:o,this.Tv?this.FP(u,o):this.aY(u,o)},w.prototype.search=function(u,o){for(o=this.uv(o);o!=-1;){var r=this.$n.compare(this,u,o);if(r==0)return o;o=0>r?this.nl(o):this.Zp(o)}return-1},w.prototype.zW=function(u){for(var o=this.uv(-1),r=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?o=this.nl(o):(r=o,o=this.Zp(o))}return r},w.prototype.oJ=function(u){for(var o=this.uv(-1),r=-1;o!=-1;){var n=u.compare(this,o);if(n==0)return o;0>n?(r=o,o=this.nl(o)):o=this.Zp(o)}return r},w.prototype.ka=function(u){return this.ob.U(u,3)},w.prototype.nl=function(u){return this.ob.U(u,0)},w.prototype.Zp=function(u){return this.ob.U(u,1)},w.prototype.getParent=function(u){return this.ob.U(u,2)},w.prototype.lb=function(u){return this.ob.U(u,6)},w.prototype.xe=function(u){return this.ob.U(u,5)},w.prototype.sc=function(u){return u==-1?this.ml(this.Ne):this.ml(u)},w.prototype.Gc=function(u){return u==-1?this.bs(this.Ne):this.bs(u)},w.prototype.SR=function(u){return u==-1?this.WF(this.Ne):this.WF(u)},w.prototype.Uj=function(u,o){this.HB(u,o)},w.prototype.uv=function(u){return u==-1?this.SF(this.Ne):this.SF(u)},w.prototype.clear=function(){this.ob.oj(!1),this.Ne=-1},w.prototype.size=function(u){return u==-1?this.UF(this.Ne):this.UF(u)},w.prototype.EN=function(u,o){for(var r=o[7*u],n=o[7*u+1],a=o[7*u+4];r!=-1||n!=-1;){var c=r!=-1?o[7*r+4]:2147483647;if(n=n!=-1?o[7*n+4]:2147483647,a<=Math.min(c,n))break;c<=n?this.mJ(r,o):this.lJ(u,o),r=o[7*u],n=o[7*u+1]}},w.prototype.ky=function(u,o){if(this.Tv)for(var r=o[7*u+4],n=o[7*u+2];n!=-1&&o[7*n+4]>r;)o[7*n]==u?this.mJ(u,o):this.lJ(n,o),n=o[7*u+2]},w.prototype.lJ=function(u,o){var r=o[7*u+1];o[7*r+2]=o[7*u+2],o[7*u+2]=r;var n=o[7*r];o[7*u+1]=n,n!=-1&&(o[7*n+2]=u),o[7*r]=u,(n=o[7*r+2])!=-1&&(o[7*n]==u?o[7*n]=r:o[7*n+1]=r)},w.prototype.mJ=function(u,o){var r=o[7*u+2];o[7*u+2]=o[7*r+2],o[7*r+2]=u;var n=o[7*u+1];o[7*r]=n,n!=-1&&(o[7*n+2]=r),o[7*u+1]=r,(n=o[7*u+2])!=-1&&(o[7*n]===r?o[7*n]=u:o[7*n+1]=u)},w.prototype.Qk=function(u,o){this.ob.T(u,2,o)},w.prototype.NB=function(u,o){this.ob.T(u,0,o)},w.prototype.RB=function(u,o){this.ob.T(u,1,o)},w.prototype.QB=function(u,o){this.ob.T(u,5,o)},w.prototype.fx=function(u,o){this.ob.T(u,6,o)},w.prototype.RJ=function(u,o){this.ob.T(o,0,u)},w.prototype.jX=function(u){this.ob.T(u,4,0)},w.prototype.mX=function(u,o){this.ob.T(o,5,u)},w.prototype.SF=function(u){return u==-1?-1:this.ob.U(u,0)},w.prototype.ml=function(u){return u==-1?-1:this.ob.U(u,1)},w.prototype.bs=function(u){return u==-1?-1:this.ob.U(u,2)},w.prototype.cR=function(u){return u==-1?-1:this.ob.U(u,3)},w.prototype.UF=function(u){return u==-1?0:this.ob.U(u,4)},w.prototype.WF=function(u){return this.ob.U(u,5)},w.prototype.Rw=function(){return this.ob.Nl([-1,-1,-1,void 0,this.il(),-1,-1])},w.prototype.hl=function(u){u!=-1&&this.ob.kd(u)},w.prototype.il=function(){return this.Vm=h.P.WA(this.Vm),1073741823&this.Vm},w.prototype.zD=function(u,o,r){var n=this.ob.o;if(r==-1||n[7*r]==-1)return u=this.ob.Nl([-1,-1,-1,u,this.il(),-1,-1]),(n=this.ob.o)[7*r]=u,this.xp(-1,u,r,n),u;for(var a=r==-1?-1:n[7*r];;){var c=o==-1?1:this.$n.compare(this,u,a);if(0>c){if((c=this.nl(a))==-1){o=a,u=this.ob.Nl([-1,-1,a,u,this.il(),-1,-1]),(n=this.ob.o)[7*a]=u;break}a=c}else{if(o==1&&c==0)return n[7*r+3]=a,-1;if((c=n[7*a+1])==-1){o=n[7*a+6],u=this.ob.Nl([-1,-1,a,u,this.il(),-1,-1]),(n=this.ob.o)[7*a+1]=u;break}a=c}}return this.ky(u,n),n[7*u+2]===-1&&(n[7*r]=u),this.xp(o,u,r,n),u},w.prototype.xp=function(u,o,r,n){if(u!=-1){var a=n[7*u+5];n[7*u+5]=o}else a=r==-1?-1:n[7*r+2];n[7*o+5]=a,a!=-1&&(n[7*a+6]=o),n[7*o+6]=u,u==(r==-1?-1:n[7*r+1])&&(n[7*r+1]=o),u==-1&&(n[7*r+2]=o),n[7*r+4]=(r==-1?0:n[7*r+4])+1},w.prototype.uB=function(u,o){var r=this.ob.o,n=r[7*u+5];u=r[7*u+6],n!=-1?r[7*n+6]=u:r[7*o+1]=u,u!=-1?r[7*u+5]=n:r[7*o+2]=n,r[7*o+4]=o===-1?-1:r[7*o+4]-1},w.prototype.aY=function(u,o){this.uB(u,o);var r=this.nl(u),n=this.Zp(u),a=this.getParent(u),c=u;if(r!=-1&&n!=-1){this.Vm=h.P.WA(this.Vm);var p=1073741823<this.Vm?this.lb(u):this.xe(u),f=this.getParent(p)==u;this.ob.aC(u,p,0),this.ob.aC(u,p,1),this.ob.aC(u,p,2),a!=-1?this.nl(a)==u?this.NB(a,p):this.RB(a,p):this.RJ(p,o),f?(r==p?(this.NB(p,u),this.Qk(n,p)):n==p&&(this.RB(p,u),this.Qk(r,p)),this.Qk(u,p),a=p):(this.Qk(r,p),this.Qk(n,p),a=this.getParent(u),c=p),r=this.nl(u),n=this.Zp(u),r!=-1&&this.Qk(r,u),n!=-1&&this.Qk(n,u)}r=r!=-1?r:n,a==-1?this.RJ(r,o):this.nl(a)==c?this.NB(a,r):this.RB(a,r),r!=-1&&this.Qk(r,a),this.hl(u)},w.prototype.FP=function(u,o){var r=this.ob.o;r[7*u+4]=2147483647;var n=-1,a=-1,c=o===-1?-1:r[7*o],p=c==u;if(p&&(n=r[7*c],a=r[7*c+1],n==-1&&a==-1))return this.uB(c,o),this.hl(c),void(r[7*o]=-1);this.EN(u,r),(c=r[7*u+2])!=-1&&(r[7*c]==u?r[7*c]=-1:r[7*c+1]=-1),this.uB(u,o),this.hl(u),p&&(r[7*o]=n==-1||r[7*n+2]!=-1?a:n)},w.prototype.HB=function(u,o){this.ob.T(u,3,o)},w}();h.Zj=A}(q||(q={})),function(h){var A=function(){function w(u,o){u!==void 0&&this.L(u,o)}return w.prototype.L=function(u,o){this.pa=u,this.wa=o,this.normalize()},w.prototype.isIntersecting=function(u){return this.pa<=u.pa?this.wa>=u.pa:u.wa>=this.pa},w.prototype.move=function(u){this.B()||(this.pa+=u,this.wa+=u)},w.prototype.normalize=function(){if(!isNaN(this.pa)){if(this.pa>this.wa){var u=this.pa;this.pa=this.wa,this.wa=u}isNaN(this.wa)&&this.Pa()}},w.prototype.Pa=function(){this.wa=this.pa=NaN},w.prototype.B=function(){return isNaN(this.pa)},w.prototype.$b=function(u){typeof u=="number"?this.B()?this.wa=this.pa=u:this.Mk(u):u.B()||(this.B()?(this.pa=u.pa,this.wa=u.wa):(this.pa>u.pa&&(this.pa=u.pa),this.wa<u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa()))},w.prototype.Mk=function(u){u<this.pa?this.pa=u:u>this.wa&&(this.wa=u)},w.prototype.contains=function(u){return typeof u=="number"?u>=this.pa&&u<=this.wa:u.pa>=this.pa&&u.wa<=this.wa},w.prototype.Fa=function(u){this.B()||u.B()?this.Pa():(this.pa<u.pa&&(this.pa=u.pa),this.wa>u.wa&&(this.wa=u.wa),this.pa>this.wa&&this.Pa())},w.prototype.X=function(u){this.B()||(this.pa-=u,this.wa+=u,this.wa<this.pa&&this.Pa())},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.pa)+Math.abs(this.wa)+1)},w.prototype.EB=function(u,o){u>o?(this.pa=o,this.wa=u):(this.pa=u,this.wa=o)},w.prototype.Kt=function(u){return h.P.Sk(u,this.pa,this.wa)},w.prototype.S=function(){return this.wa-this.pa},w.prototype.tf=function(){return .5*(this.pa+this.wa)},w.prototype.Nb=function(u){return u==this||u instanceof w&&(!(!this.B()||!u.B())||this.pa==u.pa&&this.wa==u.wa)},w.prototype.dc=function(){return h.P.wj(h.P.wj())},w}();h.Oc=A}(q||(q={})),function(h){var A=new h.Oc,w=new h.Oc,u=function(){this.ne=null,this.pb=-1,this.tb=new h.zb,this.kA=55555555,this.Vv=this.Xv=!1,this.Vf=new h.Oc,this.Vf.EB(0,0)};h.AY=u;var o=function(){function r(n,a,c){this.g=n,this.Ik=NaN,this.HH=this.Mq=0,this.IH=NaN,this.ra=a,this.Pq=10*a,this.JH=this.KH=NaN,this.rg=!1,this.Fm=this.ht=this.Mo=this.Zs=this.Ys=-1,this.bA=c,this.NA=new u,this.SH=new u,h.P.truncate(3*n.gd/2)}return r.prototype.gG=function(n,a,c,p){n.ne=p===null?null:p[c[5*a]],n.Vv=n.ne!=null,n.Vv||((p=c[5*a+2])!==-1&&this.g.eW(c[5*a],c[5*p],n.tb),n.ne=n.tb,n.Vf.EB(n.tb.sa,n.tb.qa),n.Vf.wa+=this.ra,n.tb.lI(),n.Xv=n.tb.ma==n.tb.oa,n.Xv||(n.kA=(n.tb.qa-n.tb.sa)/(n.tb.ma-n.tb.oa)))},r.prototype.IO=function(n,a){var c=n.Br(a,this.ra,!0);return c!=0?c==2?this.Ly():this.zi():(n.$p(Ks),n.Vr(Fn),a.$p(Dn),a.Vr(So),Zt.na(this.Mq,this.Ik),Ks.rb(Dn)&&this.Ik==Ks.y?0>Fn.compare(So)?Zt.N(Fn):Zt.N(So):Ks.rb(So)&&this.Ik==Ks.y?0>Fn.compare(Dn)?Zt.N(Fn):Zt.N(Dn):Dn.rb(Fn)&&this.Ik==Dn.y?0>Ks.compare(So)?Zt.N(Ks):Zt.N(So):Fn.rb(So)&&this.Ik==Fn.y&&(0>Ks.compare(Dn)?Zt.N(Ks):Zt.N(Dn)),n.Me(Zt.y,Zt.x)<a.Me(Zt.y,Zt.x)?-1:1)},r.prototype.GO=function(n,a){if(n.tb.oa==a.tb.oa&&n.tb.sa==a.tb.sa)return n.tb.ma==a.tb.ma&&n.tb.qa==a.tb.qa?this.bA?this.Ly():0:this.JE(n,a);if(n.tb.ma==a.tb.ma&&n.tb.qa==a.tb.qa)return this.IE(n,a);var c=this.IE(n,a);return n=this.JE(n,a),0>c&&0>n?-1:0<c&&0<n?1:this.zi()},r.prototype.CO=function(n,a){if(n.qa>a.qa){if(a.qa>a.sa&&a.ma-a.oa<2*this.ra&&n.xi(a.qa,a.ma,this.ra))return this.zi()}else if((a.ma-a.oa)/(a.qa-a.sa)*(n.qa-n.sa)<this.Pq&&a.xi(n.qa,n.ma,this.ra))return this.zi();return 1},r.prototype.DO=function(n,a){if(n.sa<a.sa){if(a.qa>a.sa&&a.ma-a.oa<2*this.ra&&n.xi(a.qa,a.ma,this.ra))return this.zi()}else if((a.ma-a.oa)/(a.qa-a.sa)*(n.sa-n.qa)<this.Pq&&a.xi(n.sa,n.oa,this.ra))return this.zi();return-1},r.prototype.EO=function(n,a){var c=new h.h;c.vc(a.xc(),a.ac()),c.cr(),c.normalize();var p=new h.h;p.vc(n.ac(),a.ac());var f=new h.h;f.vc(n.xc(),a.ac()),p=p.Sh(c),c=f.Sh(c),f=Math.abs(p);var m=Math.abs(c);if(f<m){if(f<this.Pq&&a.xi(n.sa,n.oa,this.ra))return this.zi()}else if(m<this.Pq&&a.xi(n.qa,n.ma,this.ra))return this.zi();return 0>p&&0>c?-1:0<p&&0<c?1:this.zi()},r.prototype.HE=function(n,a){return n.oa==a.oa&&n.sa==a.sa?this.CO(n,a):n.ma==a.ma&&n.qa==a.qa?this.DO(n,a):this.EO(n,a)},r.prototype.FO=function(n,a){return n.ma==a.ma&&n.qa==a.qa&&n.oa==a.oa&&n.sa==a.sa?this.bA?this.Ly():0:this.zi()},r.prototype.IE=function(n,a){var c=1;if(n.tb.oa<a.tb.oa){c=-1;var p=n;n=a,a=p}n=n.tb,p=a.tb;var f=n.sa-p.sa;a=a.kA*(n.oa-p.oa);var m=this.Pq;return f<a-m?-c:f>a+m?c:p.xi(n.sa,n.oa,this.ra)?this.zi():f<a?-c:c},r.prototype.JE=function(n,a){var c=1;if(a.tb.ma<n.tb.ma){c=-1;var p=n;n=a,a=p}n=n.tb,p=a.tb;var f=n.qa-p.sa;a=a.kA*(n.ma-p.oa);var m=this.Pq;return f<a-m?-c:f>a+m?c:p.xi(n.qa,n.ma,this.ra)?this.zi():f<a?-c:c},r.prototype.Ly=function(){return this.rg=!0,this.Pi=new h.Nd(5,this.Mo,this.ht),-1},r.prototype.zi=function(){return this.rg=!0,this.bA?this.Pi=new h.Nd(4,this.Mo,this.ht):this.ht=this.Mo=this.Zs=this.Ys=-1,-1},r.prototype.HO=function(n,a,c,p){if(this.rg)return-1;var f=this.IH==this.Ik&&this.HH==this.Mq;if(f&&n==this.Ys)var m=this.JH;else m=NaN,this.Ys=-1;return f&&a==this.Zs?f=this.KH:(f=NaN,this.Zs=-1),c.ne.TI(A),p.ne.TI(w),A.wa<w.pa?-1:w.wa<A.pa?1:(this.IH=this.Ik,this.HH=this.Mq,isNaN(m)&&(this.Ys=n,this.JH=m=n=c.ne.Me(this.Ik,this.Mq)),isNaN(f)&&(this.Zs=a,this.KH=f=n=p.ne.Me(this.Ik,this.Mq)),Math.abs(m-f)<=this.ra?this.IO(c.ne,p.ne):m<f?-1:m>f?1:0)},r.prototype.Mr=function(){this.rg=!1},r.prototype.tm=function(){return this.Pi},r.prototype.UJ=function(n,a){this.Ik=n,this.Mq=a,this.ht=this.Mo=this.Zs=this.Ys=-1},r.prototype.compare=function(n,a,c){return this.rg?-1:(n=n.ka(c),this.Fm=c,this.LE(a,a,n,n))},r.prototype.LE=function(n,a,c,p){if(this.Mo==a)var f=this.NA;else this.Mo=a,f=this.NA,this.NA.pb=n,this.gG(f,a,this.g.ud.o,this.g.Te);if(m==null){this.ht=p;var m=this.SH;this.SH.pb=c,this.gG(m,p,this.g.ud.o,this.g.Te)}return f.Vv||m.Vv?this.HO(a,p,f,m):f.Vf.wa<m.Vf.pa?-1:m.Vf.wa<f.Vf.pa?1:(n=f.Xv?1:0,(n|=m.Xv?2:0)==0?this.GO(f,m):n==1?this.HE(f.tb,m.tb):n==2?-1*this.HE(m.tb,f.tb):this.FO(f.tb,m.tb))},r}();h.OC=o}(q||(q={})),function(h){var A=function(){function w(u,o){this.g=u,this.ra=o,this.rg=!1,this.Mo=-1,this.Vf=new h.Oc,this.Iq=new h.h,this.Iq.Sc(),this.ie=new h.zb,this.Fm=-1,this.vA=17976931348623157e292}return w.prototype.Mr=function(){this.rg=!1,this.vA=17976931348623157e292},w.prototype.Fh=function(u){this.Iq.N(u)},w.prototype.compare=function(u,o){return this.ME(o,u.ka(o))},w.prototype.ME=function(u,o){var r=this.g.cc(o)!=null;if(r||(this.g.fd(o,this.ie),this.Vf.EB(this.ie.sa,this.ie.qa)),r)throw h.i.ga("not implemented");if(this.Iq.x+this.ra<this.Vf.pa)return-1;if(this.Iq.x-this.ra>this.Vf.wa)return 1;if(this.ie.oa==this.ie.ma)return this.Fm=u,this.rg=!0,0;this.ie.lI(),r=this.ie.ac(),(o=new h.h).vc(this.ie.xc(),r),o.cr();var n=new h.h;return n.vc(this.Iq,r),r=o.Sh(n),(r/=o.length())<10*-this.ra?-1:r>10*this.ra?1:this.ie.ss(this.Iq,this.ra)&&((o=Math.abs(r))<this.vA&&(this.Fm=u,this.vA=o),this.rg=!0,o<.25*this.ra)?0:0>r?-1:1},w}();h.VL=A}(q||(q={})),function(h){function A(u,o,r,n){r=new Float64Array(u.subarray(r,n)),u.set(r,o)}var w=function(){function u(o){this.Pb=this.qk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Float64Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Cn=function(o){var r=new u(0);return r.o=new Float64Array(o.o),r.size=o.size,r},u.Nr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Float64Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Float64Array(o):o<=this.o.length||(0<this.o.length?((o=new Float64Array(o)).set(this.o),this.o=o):this.o=new Float64Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Vt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.AB=function(o){return u.Nr(this,o)},u.prototype.Bg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Float64Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Float64Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Bn=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.P.wj(this.read(r));return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},u.prototype.Nn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.O();var m=this.size-f;if(m<a&&this.resize(this.size+a-m),A(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p)for(c-=p,m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]},u.prototype.Dz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,A(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.Mn=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,A(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.xj=function(o,r,n){if(this.Pb)throw h.i.Hb();A(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Wt=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},u.prototype.Fn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&A(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Cr=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.P.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.pC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.oC=function(o,r,n){if(0>o||0>r)throw h.i.O();if(r!=0){this.size<(r<<1)+o&&this.resize((r<<1)+o),r+=0;for(var a=0;a<r;a++)this.o[o]=n[a][0],this.o[o+1]=n[a][1],o+=2}},u.prototype.Xw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.oB=function(o,r,n){if(0>o||0>r||this.size<(r>>1)+o)throw h.i.O();if(r!=0){r=0+r;for(var a=0;a<r;a++)n[a][0]=this.o[o],n[a][1]=this.o[o+1],o+=2}},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.qk=this.Pb=!0},u.prototype.Wd=function(o,r,n){Array.prototype.sort.call(this.o.subarray(o,r),n)},u.prototype.Vp=function(){return 1},u}();h.ce=w}(q||(q={})),function(h){function A(u,o,r,n){r=new Int32Array(u.subarray(r,n)),u.set(r,o)}h.jY=function(){this.random=1973};var w=function(){function u(o){this.Pb=this.qk=!1,this.o=null;var r=o;2>r&&(r=2),this.o=new Int32Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Cn=function(o){var r=new u(0);return r.o=new Int32Array(o.o),r.size=o.size,r},u.Nr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int32Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int32Array(o):o<=this.o.length||(0<this.o.length?((o=new Int32Array(o)).set(this.o),this.o=o):this.o=new Int32Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Vt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.AB=function(o){return u.Nr(this,o)},u.prototype.Bg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int32Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int32Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Bn=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.P.Vh(this.read(r),o);return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},u.prototype.Nn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.O();if(A(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p){c-=p;for(var m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]}},u.prototype.Dz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,A(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.Mn=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,A(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.xj=function(o,r,n){if(this.Pb)throw h.i.Hb();A(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Wt=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},u.prototype.Fn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&A(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Cr=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.P.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.pC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.Xw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.qk=this.Pb=!0},u.prototype.Wd=function(o,r,n){10>r-o?u.lG(this.o,o,r,n):u.kB(this.o,o,r-1,n)},u.prototype.Vp=function(){return 2},u.prototype.Gc=function(){return this.o[this.size-1]},u.prototype.Jf=function(){this.resize(this.size-1)},u.prototype.TW=function(o){this.o[this.size-1]=o},u.prototype.KV=function(o){o<this.size-1&&(this.o[o]=this.o[this.size-1]),this.resize(this.size-1)},u.prototype.fF=function(o){for(var r=0,n=this.size;r<n;r++)if(this.o[r]==o)return r;return-1},u.prototype.bG=function(o){return 0<=this.fF(o)},u.lG=function(o,r,n,a){for(var c=r;c<n;c++){for(var p=o[c],f=c-1;f>=r&&0<a(o[f],p);)o[f+1]=o[f],f--;o[f+1]=p}},u.sx=function(o,r,n){var a=o[n];o[n]=o[r],o[r]=a},u.kB=function(o,r,n,a){if(!(r>=n))for(;;){if(9>n-r){u.lG(o,r,n+1,a);break}var c=o[r];u.sx(o,r,n);for(var p=r,f=r;f<n;f++)0>=a(o[f],c)&&(u.sx(o,p,f),p+=1);u.sx(o,p,n),p-r<n-p?(u.kB(o,r,p-1,a),r=p+1):(u.kB(o,p+1,n,a),n=p-1)}},u}();h.ja=w}(q||(q={})),function(h){function A(u,o,r,n){r=new Int8Array(u.subarray(r,n)),u.set(r,o)}var w=function(){function u(o){this.o=null;var r=o;2>r&&(r=2),this.o=new Int8Array(r),this.size=o}return u.prototype.rotate=function(o,r,n){if(this.Pb)throw h.i.ga("invalid_call");if(r<o||r>n||o>n)throw h.i.O();o!=r&&n!=r&&(this.pi(o,r-o,1),this.pi(r,n-r,1),this.pi(o,n-o,1))},u.rf=function(o,r){var n=new u(o),a=n.o;if(2>o&&(o=2),r!==0)for(var c=0;c<o;c++)a[c]=r;return n},u.Cn=function(o){var r=new u(0);return r.o=new Int8Array(o.o),r.size=o.size,r},u.Nr=function(o,r){var n=new u(0);return n.size=o.size,n.size>r&&(n.size=r),2>(r=n.size)&&(r=2),n.o=new Int8Array(r),n.o.set(o.o.length<=r?o.o:o.o.subarray(0,r),0),n},u.prototype.Jb=function(o){0>=o||(this.o==null?this.o=new Int8Array(o):o<=this.o.length||(0<this.o.length?((o=new Int8Array(o)).set(this.o),this.o=o):this.o=new Int8Array(o)))},u.prototype.read=function(o){return this.o[o]},u.prototype.uc=function(o,r){r.x=this.o[o],r.y=this.o[o+1]},u.prototype.get=function(o){return this.o[o]},u.prototype.write=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.set=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r},u.prototype.Vt=function(o,r){if(this.Pb)throw h.i.Hb();this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.add=function(o){this.resize(this.size+1),this.o[this.size-1]=o},u.prototype.AB=function(o){return u.Nr(this,o)},u.prototype.Bg=function(o){return this.read(o)},u.prototype.resize=function(o,r){if(r===void 0&&(r=0),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");if(o<=this.size){if(30<this.o.length&&5*o/4<this.o.length){var n=new Int8Array(this.o,0,o);this.o=n}}else{o>this.o.length&&(n=h.P.truncate(64>o?Math.max(2*o,4):5*o/4),(n=new Int8Array(n)).set(this.o),this.o=n),n=this.o;for(var a=this.size;a<o;a++)n[a]=r}this.size=o},u.prototype.Dh=function(o){if((this.o==null||o>this.o.length)&&this.resize(o),this.qk)throw h.i.ga("invalid call. Attribute Stream is locked and cannot be resized.");this.size=o},u.prototype.rr=function(o,r){this.write(o,r)},u.prototype.Bn=function(o,r,n){for(var a=this.size;r<a&&r<n;r++)o=h.P.Vh(this.read(r),o);return o},u.prototype.Nb=function(o,r,n){if(o==null||!(o instanceof u))return!1;var a=this.size,c=o.size;if(n>a||n>c&&a!=c)return!1;for(n>a&&(n=a);r<n;r++)if(this.read(r)!=o.read(r))return!1;return!0},u.prototype.addRange=function(o,r,n,a,c){if(this.Pb)throw h.i.Hb();if(!a&&(1>c||n%c!=0))throw h.i.O();var p=this.size;if(this.resize(p+n),a)this.o.set(o.o.subarray(r,r+n),p);else{a=n;for(var f=0;f<n;f+=c){a-=c;for(var m=0;m<c;m++)this.o[p+f+m]=o.o[r+a+m]}}},u.prototype.Nn=function(o,r,n,a,c,p,f){if(this.Pb)throw h.i.Hb();if(!c&&(1>p||a%p!=0))throw h.i.O();if(A(this.o,o+a,o,o+(f-o)),this.o==r.o&&o<n&&(n+=a),c)this.o.set(r.o.subarray(n,n+a),o);else for(c=a,f=0;f<a;f+=p){c-=p;for(var m=0;m<p;m++)this.o[o+f+m]=r.o[n+c+m]}},u.prototype.Mn=function(o,r,n,a){if(this.Pb)throw h.i.Hb();for(a-=o,A(this.o,o+a,o,o+a),a=0;a<n;a++)this.o[o+a]=r},u.prototype.Dz=function(o,r,n,a,c,p){if(this.Pb)throw h.i.Hb();if(0>p&&(p=this.size),this.size+2*a>this.o.length?this.resize(this.size+2*a):this.size+=2*a,A(this.o,o+2*a,o,o+(p-o)),c)for(c=0;c<a;c++)p=r[n++],this.o[o++]=p.x,this.o[o++]=p.y;else{c=0;for(var f=a-1;c<a;++c)p=r[n+f],this.o[o++]=p.x,this.o[o++]=p.y,f--}},u.prototype.xj=function(o,r,n){if(this.Pb)throw h.i.Hb();A(this.o,o+2,o,o+(n-o)),this.o[o]=r.x,this.o[o+1]=r.y},u.prototype.Wt=function(o,r,n,a,c,p){if(0>o||0>r||0>a||!c&&(0>=p||r%p!=0)||n.size<a+r)throw h.i.O();if(r!=0)if(this.size<r+o&&this.resize(r+o),n==this)this.Cr(o,r,a,c,p);else if(c)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a++;else if(a=a+r-p,p==1)for(c=0;c<r;c++)this.o[o]=n.o[a],o++,a--;else for(c=0,r=h.P.truncate(r/p);c<r;c++){for(var f=0;f<p;f++)this.o[o+f]=n.o[a+f];o+=p,a-=p}},u.prototype.Fn=function(o,r,n){if(this.Pb||o+r>this.size)throw h.i.Hb();0<n-(o+r)&&A(this.o,o,o+r,o+(n-(o+r))+r),this.size-=r},u.prototype.pi=function(o,r,n){if(this.Pb||1>n||r%n!=0)throw h.i.Hb();for(var a=r>>1,c=0;c<a;c+=n){r-=n;for(var p=0;p<n;p++){var f=this.o[o+c+p];this.o[o+c+p]=this.o[o+r+p],this.o[o+r+p]=f}}},u.prototype.Yj=function(o,r,n){if(0>r||0>n||0>r||n+r>this.size)throw h.i.O();for(var a=r;a<r+n;a++)this.o[a]=o},u.prototype.Cr=function(o,r,n,a,c){if(!(a&&o==n||(this.o.set(this.o.subarray(n,n+r),o),a)))for(n=o,o=o+r-c,a=0,r=h.P.truncate(r/2);a<r;a++){for(var p=0;p<c;p++){var f=this.o[n+p];this.o[n+p]=this.o[o+p],this.o[o+p]=f}n+=c,o-=c}},u.prototype.pC=function(o,r,n,a,c){if(0>o||0>r||0>a)throw h.i.O();if(r!=0)for(this.size<(r<<1)+o&&this.resize((r<<1)+o),c||(o+=r-1<<1),c=c?2:-2,r+=a;a<r;a++)this.o[o]=n[a].x,this.o[o+1]=n[a].y,o+=c},u.prototype.Xw=function(o,r,n,a,c){if(0>o||0>r||0>a||this.size<r+o)throw h.i.O();if(c)for(c=0;c<r;c++)n[a+c]=this.o[o+c];else for(a=a+r-1;o<r;o++)n[a]=this.o[o],a--},u.prototype.clear=function(o){o?this.resize(0):this.Dh(0)},u.prototype.ix=function(){this.qk=this.Pb=!0},u.prototype.Wd=function(o,r,n){r=this.o.subarray(o,r),Array.prototype.sort.call(r,n),this.o.set(r,o)},u.prototype.tJ=function(o,r){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]|=r},u.prototype.EE=function(o,r){if(this.Pb)throw h.i.ga("invalid call. Attribute Stream is read only.");this.o[o]&=~r},u.prototype.Vp=function(){return 1},u}();h.rn=w}(q||(q={})),function(h){h.Zc=function(){function A(){}return A.Or=function(w,u){return h.rn.rf(w,u)},A.En=function(w,u){return h.ce.rf(w,u)},A.jP=function(w,u,o){switch(w){case 1:w=h.ce.rf(u,o);break;case 2:w=h.ja.rf(u,o);break;case 4:w=h.rn.rf(u,o);break;default:throw h.i.Ra()}return w},A.SE=function(w,u){return A.jP(h.ua.Vp(w),u*h.ua.Wa(w),h.ua.te(w))},A.Qh=function(w,u){return h.ja.rf(w,u)},A.kI=function(w){var u,o=[];for(u=0;u<w;u++)o.push(null);return o},A}()}(q||(q={})),function(h){h.ha=function(A){A===void 0&&(A=0),this.u=A}}(q||(q={})),function(h){h.HL=function(){function A(){}return A.bind=function(w){h.Tc=w.PeDefs,h.qf=w.PeFactory,h.HC=w.PeVertcs,h.gj=w.PeCSTransformations,h.GC=w.PeGTTransformations,h.FL=w.PeGeogtran,h.EL=w.PeFactoryCodechange,h.FC=w.PeGCSExtent,h.Eg=w.PePCSInfo,h.GL=w.PeHorizon,h.DL=w.PeCoordsys,h.mp=w.PeGTlistExtended,h.mp.PE_GTLIST_OPTS_USE_DEFAULT=128,h.qf.initialize(null),h.Lx=w.PeGTlistExtendedEntry,h.qf.fromString(h.Tc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')},A}(),h.qf=null,h.HC=null,h.DL=null,h.GL=null,h.Eg=null,h.mp=null,h.Lx=null,h.FC=null,h.EL=null,h.FL=null,h.Tc=null,h.GC=null,h.gj=null}(q||(q={})),function(h){var A=function(){function w(){}return w.Mb=function(u,o){return 0<=o?w.R(u):-w.R(u)},w.R=function(u){return 0>u?-u:u},w.vi=function(u){return 3552713678800501e-30>u},w.EC=function(u,o,r){return w.R(u-o)<=r*(1+(w.R(u)+w.R(o))/2)},w.$=function(u,o){return w.EC(u,o,3552713678800501e-30)},w.zL=function(u){return 3552713678800501e-30>=w.R(u)},w.Dd=function(u){return w.zL(u)},w}();h.s=A,h.F=function(){function w(){}return w.hp=function(u,o){var r=0;return(u=A.R(u))+(o=A.R(o))!=0&&(u>o?(r=o/u,r=u*Math.sqrt(1+r*r)):(r=u/o,r=o*Math.sqrt(1+r*r))),r},w.Yq=function(u,o,r,n,a){for(var c=[0,0,0],p=[0,0,0],f=0;2>=f;f++)o[f]-=u[f],r[f]-=o[f];r=c[1]*p[2]-c[2]*p[1],o=c[2]*p[0]-c[0]*p[2],c=c[0]*p[1]-c[1]*p[0],u=-1*(r*u[0]+o*u[1]+c*u[2]),n[0]=r,n[1]=o,n[2]=c,n[3]=u,p=w.qn(n),n[0]/=p,n[1]/=p,n[2]/=p,n[3]/=p,a!=0&&(p=A.Dd(c)?A.Dd(u)?A.Mb(1,o):-A.Mb(1,u):A.Mb(1,c),p*=A.Mb(1,a),n[0]*=p,n[1]*=p,n[2]*=p,n[3]*=p)},w.yx=function(u,o,r){r[0]=u[1]*o[2]-o[1]*u[2],r[1]=u[2]*o[0]-o[2]*u[0],r[2]=u[0]*o[1]-o[0]*u[1]},w.Ut=function(u,o){return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]},w.qn=function(u){return w.hp(w.hp(u[0],u[1]),u[2])},w.el=function(u,o,r,n,a,c,p,f){u=w.n(u,o,r);var m=Math.cos(r);c.u=(u+a)*m*Math.cos(n),p.u=(u+a)*m*Math.sin(n),f.u=(u*(1-o)+a)*Math.sin(r)},w.dO=function(u,o,r,n,a,c,p){var f=w.hp(o,r),m=1*Math.sqrt(1-u),b=m/1;if(A.$(f,0))c.u=0,a.u=A.Mb(1.570796326794897,n),p.u=A.R(n)-m;else{c.u=Math.atan2(r,o),r=Math.atan2(1*n,m*f),c=Math.cos(r);var S=Math.sin(r);o=m*u/(1-u),u*=1,r=Math.atan2(n+o*S*S*S,f-u*c*c*c),3.141592653589793<A.R(r)&&(r=A.Mb(3.141592653589793,r)-r),r=Math.atan(b*Math.tan(r)),S=Math.sin(r),c=Math.cos(r),a.u=Math.atan2(n+o*S*S*S,f-u*c*c*c),1.570796326794897<A.R(a.u)&&(a.u=A.Mb(3.141592653589793,a.u)-a.u),r=Math.atan(b*Math.tan(a.u)),S=Math.sin(r),c=Math.cos(r),p.u=(n-m*S)*Math.sin(a.u)+(f-1*c)*Math.cos(a.u)}},w.n=function(u,o,r){return r=Math.sin(r),u/Math.sqrt(1-o*r*r)},w.pt=function(u,o){return Math.atan2(Math.sin(o)*(1-u),Math.cos(o))},w.Sj=function(u,o){return Math.atan2(Math.sin(o),Math.cos(o)*(1-u))},w.Tq=function(u,o){if(A.vi(u)||o==0||A.$(A.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=Math.sqrt(1-u),n=(1-r)/(1+r),a=n*n,c=n*a,p=n*c,f=n*p,m=n*f,b=n*m,S=1.572916666666667*c-3.2578125*f+4.295068359375*b;u=2.142578125*p-6.071484375*m,r=3.129296875*f-11.249837239583334*b;var M=4.775276692708333*m,T=7.958636765252976*b,k=Math.cos(2*o);return o+Math.sin(2*o)*(1.5*n-.84375*c+.525390625*f-.2688395182291667*b-S+r-T+k*(2*(1.3125*a-1.71875*p+1.650146484375*m)-4*u+6*M+k*(4*S-12*r+24*T+k*(8*u-32*M+k*(16*r-80*T+k*(32*M+64*k*T))))))}for(r=1-u,n=u/2,c=(a=A.R(o))*w.av(u)/(1.570796326794897*r),p=9999,m=a,a=0;1e-16<p&&50>a;a++)b=w.w(u,m),f=m-(S=(f=(w.eG(m,u)-n*Math.sin(2*m)/b)/r-c)/(b=1/(b*b*b))),p=A.R(S),m=f;return 0<=o?m:-m},w.iW=function(u,o){return A.vi(o)?u:u*w.av(o)/1.570796326794897},w.ca=function(u){return 0>(u=w.jF(u,6.283185307179586))?u+6.283185307179586:3.141592653589793>A.R(u)||A.$(A.R(u),3.141592653589793)?u:u-6.283185307179586},w.jF=function(u,o){return u-Math.floor(u/o)*o},w.Ch=function(u,o){if(.006884661117170036>o){var r=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,n=r*r;return u/(1+o)*(1+.25*r+.015625*n+.00390625*r*n)*1.570796326794897}return u*w.av(o)},w.Xq=function(u,o){var r=A.Mb(1,Math.sin(o));return o=1.570796326794897>=(o=A.R(w.jF(o,3.141592653589793)))?o:3.141592653589793-o,(A.$(o,1.570796326794897)?o:Math.atan(Math.sqrt(1-u)*Math.tan(o)))*r},w.q=function(u,o,r){if(.006884661117170036>o){var n=(o=(1-(o=Math.sqrt(1-o)))/(1+o))*o,a=o*n,c=o*a,p=o*c,f=o*p,m=o*f,b=-.7291666666666666*a+.2278645833333333*p+.03987630208333334*m,S=.615234375*c-.21533203125*f,M=-.54140625*p+.20302734375*m,T=.48876953125*f,k=-.4488699776785715*m,C=Math.cos(2*r);return u/(1+o)*((1+.25*n+.015625*c+.00390625*f)*r+Math.sin(2*r)*(-1.5*o+.1875*a+.0234375*p+.00732421875*m-b+M-k+C*(2*(.9375*n-.234375*c-.03662109375*f)-4*S+6*T+C*(4*b-12*M+24*k+C*(8*S-32*T+C*(16*M-80*k+C*(32*T+64*C*k)))))))}return u*(w.eG(r,o)-.5*o*Math.sin(2*r)/w.w(o,r))},w.w=function(u,o){return o=Math.sin(o),Math.sqrt(1-u*o*o)},w.av=function(u){return A.EC(u,1,2220446049250313e-31)?1:1>u?w.Zw(0,1-u)-u/3*w.Ww(0,1-u):NaN},w.eG=function(u,o){var r=A.Mb(1,u);u=A.R(u);var n=Math.floor(u/1.570796326794897);if(1<o)o=u==0?0:NaN;else if(A.Dd(n))o=(u=w.sin(u))*w.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*w.Ww(1-u*u,1-o*u*u);else{var a=h.P.truncate(n%2),c=w.av(o);0<a?o=c*(n+1)-(o=(u=Math.sin(1.570796326794897*(n+1)-u))*w.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*w.Ww(1-u*u,1-o*u*u)):o=c*n+(o=(u=Math.sin(u-1.570796326794897*n))*w.Zw(1-u*u,1-o*u*u)-o/3*u*u*u*w.Ww(1-u*u,1-o*u*u))}return o*r},w.sin=function(u){u=w.ca(u);var o=A.Mb(1,u);return u=A.R(u),A.$(u,3.141592653589793)?0:A.$(u,1.570796326794897)?1*o:Math.sin(u)*o},w.Ww=function(u,o){var r,n,a,c,p=u,f=o,m=1;for(o=0,u=1;n=((r=.2*(p+f+3*m))-p)/r,a=(r-f)/r,c=(r-m)/r,!(1e-4>A.R(n)&&1e-4>A.R(a)&&1e-4>A.R(c));)c=Math.sqrt(f),o+=u/((r=Math.sqrt(m))*(m+(c=Math.sqrt(p)*(c+r)+c*r))),u*=.25,p=.25*(p+c),f=.25*(f+c),m=.25*(m+c);return f=(p=n*a)-(m=c*c),3*o+u*(1+(m=p-6*m)*(.10227272727272728*m-.2142857142857143-.1730769230769231*c*(n=m+f+f))+c*(.1666666666666667*n+c*(-.4090909090909091*f+.1153846153846154*c*p)))/(r*Math.sqrt(r))},w.Zw=function(u,o){for(var r,n,a,c,p=1;n=2-((r=(u+o+p)/3)+u)/r,a=2-(r+o)/r,c=2-(r+p)/r,!(1e-4>A.R(n)&&1e-4>A.R(a)&&1e-4>A.R(c));p=.25*(p+r))r=Math.sqrt(o),n=Math.sqrt(p),u=.25*(u+(r=Math.sqrt(u)*(r+n)+r*n)),o=.25*(o+r);return(1+(.04166666666666666*(u=n*a-c*c)-.1-.06818181818181818*(o=n*a*c))*u+.07142857142857142*o)/Math.sqrt(r)},w.Sw=function(u,o){if(A.vi(u)||o==0||A.$(A.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=u*u,n=u*r,a=u*n,c=u*a,p=u*c,f=u*p,m=-(.02708333333333333*n+.03430059523809524*a+.03149181547619048*c+.02634359154541446*p+.02156896735835538*f),b=.007669890873015873*a+.01299603174603175*c+.0148051353064374*p+.01454454953803912*f,S=-(.002275545634920635*c+.004830845032667949*p+.006558395368616723*f),M=.0006957236677288761*p+.001775193002406544*f,T=-.000217324089394402*f,k=Math.cos(2*o);return o+Math.sin(2*o)*(-(.5*u+.2083333333333333*r+.09375*n+.04878472222222222*a+.02916666666666667*c+.01938905423280423*p+.01388255931712963*f)-m+S-T+k*(2*(.1041666666666667*r+.0875*n+.06050347222222222*a+.04151785714285714*c+.02958958540013228*p+.02203667534722222*f)-4*b+6*M+k*(4*m-12*S+24*T+k*(8*b-32*M+k*(16*S-80*T+k*(32*M+64*k*T))))))}return o==0||A.$(A.R(o),1.570796326794897)?r=o:(a=(n=Math.sqrt(u))*Math.sin(o),r=Math.tan(.7853981633974483+o/2)*Math.pow((1-a)/(1+a),n/2),r=2*Math.atan(r)-1.570796326794897),r},w.sO=function(u,o){if(A.vi(u)||o==0||A.$(A.R(o),1.570796326794897))return o;if(.006884661117170036>u){var r=u*(M=u*(S=u*(k=u*u))),n=u*(T=u*r),a=.05833333333333333*S+.07232142857142858*M+.05634300595238095*r+.0355325796406526*T+.020235546186067*n,c=.02653149801587302*M+.04379960317460317*r+.0429211791776896*T+.03255384637546096*n,p=.01294022817460318*r+.02668104344536636*T+.03155651254609588*n,f=.00659454790965208*T+.0163075268674227*n,m=.003463473736911237*n,b=Math.cos(2*o);return o+Math.sin(2*o)*(.5*u+.2083333333333333*k+.08333333333333333*S+.03611111111111111*M+.01875*r+.01195601851851852*T+.008863673941798942*n-a+p-m+b*(2*(.1458333333333333*k+.1208333333333333*S+.07039930555555556*M+.03616071428571429*r+.01839451058201058*T+.01017113095238095*n)-4*c+6*f+b*(4*a-12*p+24*m+b*(8*c-32*f+b*(16*p-80*m+b*(32*f+64*b*m))))))}var S=Math.sqrt(u),M=S/2,T=Math.tan(.7853981633974483+o/2);u=0,a=1;for(var k=o;a!=0;k=n)r=S*Math.sin(k),n=T*Math.pow((1+r)/(1-r),M),n=2*Math.atan(n)-1.570796326794897,u++,(A.$(n,k)||3e4<u)&&(a=0);return k},w}()}(q||(q={})),function(h){var A=function(){function w(u){this.wl=this.Ws=null,this.Kv=!1,this.AA=this.BA=0,this.BH=new h.h,this.RH=new h.h,this.EA=!1,this.xq=new h.l,this.qH=this.uw=0,this.vw=null,this.Bl=!1,this.Fo=null,this.Xz=0,this.Re=u,this.Cs=h.Ab.zv(this.Re,0,!0),this.BH.Sc(),this.RH.Sc(),this.LH=NaN;var o=u.getCode();0<o?(this.Lk=o,h.qf.getCode(u)):this.Lk=h.qf.getCode(u),0>this.Lk&&(this.Lk=0);var r=this.Re.getType();if(this.dH=r==h.Tc.PE_TYPE_PROJCS?2:1,r==h.Tc.PE_TYPE_PROJCS&&!u.loadConstants())throw h.i.O("PeProjcs.loadConstants failed");o=r==h.Tc.PE_TYPE_GEOGCS?this.Re:this.Re.getGeogcs(),r!=h.Tc.PE_TYPE_GEOGCS&&h.qf.getCode(o),this.Fo=u.getUnit(),this.LH=o.getPrimem().getLongitude(),this.qH=u=o.getUnit().getUnitFactor(),u=Math.PI/(180*u),1e-10>Math.abs(u-1)&&(u=1),this.AA=u,(r&h.Tc.PE_TYPE_PROJCS)!=0?(o=this.Re,this.BA=1/o.getUnit().getUnitFactor(),this.uw=.001/this.Re.getUnit().getUnitFactor(),this.vw=h.Eg.generate(o,h.Eg.PE_PCSINFO_OPTION_NONE),this.Bl=this.vw.isPannableRectangle(),this.Xz=h.Ab.kN(this.vw.getCentralMeridian(),this.AA)):(this.EA=this.Bl=!0,this.BA=0,r=1/o.getUnit().getUnitFactor(),this.uw=.001/o.getDatum().getSpheroid().getAxis()*r,this.Xz=0),this.Bl&&(this.wx(),this.xK(),this.fY(),this.wK(),this.dY(),this.eY())}return w.prototype.cs=function(){return this.Lk},w.prototype.lk=function(){return this.vw},w.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.Lk==0&&o.Lk==0&&u.Cs===o.Cs},w.prototype.Xc=function(){return this.Bl},w.prototype.ih=function(u){u.L(this.to)},w.prototype.rv=function(){return this.to.v},w.prototype.qv=function(){return this.to.C},w.prototype.AR=function(u){u.L(this.ww)},w.prototype.dY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){u=this.Re;var o=this.lk().getCentralMeridian(),r=u.getGeogcs();if(r==null)throw h.i.ga("internal error");o=[[o+(r=1/r.getUnit().getUnitFactor()*Math.PI),0]],h.gj.geogToProj(u,1,o),o=o[0][0],r=u.getParameters()[h.Tc.PE_PARM_X0].getValue();var n=this.ol();u=new h.l,n.A(u),o=(n=Math.abs(o-r))+r,r=-1*n+r,n=u.H,u=u.G;var a=new h.l;a.L(r,u,o,n),this.to==null&&(this.to=a)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");r=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-r,-r/2,r,r/2),this.to==null&&(this.to=u)}},w.prototype.eY=function(){var u=this.Re.getType();if(u==h.Tc.PE_TYPE_PROJCS){var o=this.Re;if(u=this.lk().getCentralMeridian(),(o=o.getGeogcs())==null)throw h.i.ga("internal error");o=1/o.getUnit().getUnitFactor()*Math.PI;var r=this.Xr(),n=new h.l;r.A(n),(r=new h.l).L(u-o,n.G,u+o,n.H),this.ww==null&&(this.ww=r)}else{if(u!=h.Tc.PE_TYPE_GEOGCS)throw h.i.ga("internal error");o=1/this.Re.getUnit().getUnitFactor()*Math.PI,(u=new h.l).L(-o,-o/2,o,o/2),this.ww==null&&(this.ww=u)}},w.prototype.bf=function(){return this.AA},w.prototype.rm=function(){return this.BA},w.prototype.Xr=function(){if(this.Bl)return this.wl;var u=this.wl;return u!=null?u:(this.wx(),this.wl)},w.prototype.Yr=function(){return this.Bl?null:(this.wl!=null||this.wx(),this.SG)},w.prototype.wx=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=this.Re,o=u.getGeogcs(),r=u.horizonGcsGenerate();if(r!=null){var n=r[0].getNump(),a=r[0].getKind();u=0<r[0].getInclusive();var c=this.bf(),p=90*c,f=360*c,m=370*c,b=180*c*h.Tc.PE_HORIZON_DELTA/Math.PI,S=new h.l,M=null;if(1<n){for(var T=1;T<n;T++)if(r[T].getKind()==h.Tc.PE_HORIZON_LINE){M==null&&(M=new h.Ua);var k=r[T].getCoord();M.rx(k[0][0],k[0][1]),M.Aj(k[1][0],k[1][1])}}if(a==h.Tc.PE_HORIZON_RECT)r=r[0].getCoord(),S.L(r[0][0],r[0][1]),S.$b(r[1][0],r[1][1]),Math.abs(S.H-p)<1e-7*b&&(S.H=p),Math.abs(S.G+p)<1e-7*b&&(S.G=-p),S.S()>m&&(r=-400*c,S.L(r,S.G,r+5*f,S.H)),r=new h.Hh(S),this.wl==null&&(this.wl=r,this.Kv=u);else{if(m=new h.Ea,f=this.lk().isGcsHorizonMultiOverlap(),S=h.iu.WE(o,h.ju.Integer64),f){for(m=new h.aL,b=h.Ih.local().W(m,S,null),T=0;T<n;T++)if(r[T].getKind()==h.Tc.PE_HORIZON_POLY){for(o=r[T].getSize(),c=r[T].getCoord(),a=[],p=0;p<o;p++)a[p]=h.h.construct(c[p][0],c[p][1]);r[T].getInclusive(),f&&((c=new h.Ea).$k(a,o-1),m.RX(c),b.qe())}m=b.next()}else for(T=0;T<n;T++)if(r[T].getKind()==h.Tc.PE_HORIZON_POLY){for(o=r[T].getSize(),c=r[T].getCoord(),f=[],p=0;p<o;p++)f[p]=h.h.construct(c[p][0],c[p][1]);r[T].getInclusive(),m.$k(f,o-1)}u?h.Xk.local().xn(m,S,1):h.lp.local().xn(m,S,1),h.fj.local().xn(m,S,1),this.wl==null&&(this.wl=m,this.Kv=u,this.SG=M)}}}},w.prototype.kv=function(){return this.Bl||this.wl==null&&this.wx(),this.Kv},w.prototype.xK=function(){if(this.dH==2){var u=this.Re.horizonPcsGenerate();if(u!=null){var o=u[0].getKind();u[0].getInclusive();var r=u[0].getNump(),n=!1;if(o==h.Tc.PE_HORIZON_RECT)u=u[0].getCoord(),(r=new h.l).L(u[0][0],u[0][1]),r.$b(u[1][0],u[1][1]),u=new h.Hh(r);else{for(o=-1,n=0;n<r;n++)u[n].getKind()==h.Tc.PE_HORIZON_POLY&&(o=n);for(n=u[o].getSize()-1,u=u[o].getCoord(),r=[],o=0;o<n;o++)r[o]=h.h.construct(u[o][0],u[o][1]);u=o=new h.Ea,o.$k(r,n),n=!0}this.lk().isDensificationNeeded()&&(r=1e5*this.rm(),u=h.Zl.local().W(u,r,null)),n&&(n=new h.Hh,u.dn(n),u.He(),u.Rb(),u.jR(),h.Xk.local().xn(u,null,1)),this.Ws==null&&(this.Ws=u)}}},w.prototype.ol=function(){if(this.Bl)return this.Ws;var u=this.Ws;return u!=null?u:(this.xK(),this.Ws)},w.prototype.fY=function(){if(this.Re.getType()==h.Tc.PE_TYPE_PROJCS){var u=90*this.bf();u=[[0,u],[0,-u]],h.gj.geogToProj(this.Re,2,u);var o=this.lk(),r=o.getNorthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY;o=o.getSouthPoleLocation()!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY,this.EA||(r&&this.BH.na(u[0][0],u[0][1]),o&&this.RH.na(u[1][0],u[1][1]))}this.EA=!0},w.prototype.wK=function(){if(this.dH==1){var u=400*this.bf();this.xq.L(-u,-u,u,u)}else u=h.Eg.generate(this.Re,h.Eg.PE_PCSINFO_OPTION_DOMAIN),u=h.l.construct(u.getDomainMinx(),u.getDomainMiny(),u.getDomainMaxx(),u.getDomainMaxy()),this.xq.B()&&this.xq.L(u)},w.prototype.bR=function(u){this.Bl&&u.L(this.xq),this.xq.B()&&this.wK(),u.L(this.xq)},w.prototype.Wp=function(){return this.LH},w.prototype.Bi=function(){return this.Xz},w.prototype.Id=function(){return this.Fo},w.prototype.Zr=function(){return this.qH},w}();h.IC=A}(q||(q={})),function(h){var A=function(){function w(u){this.CT=u,this.Cs=h.Ab.zv(u,0,!0);var o=u.getCode();this.us=0<o?o:h.qf.getCode(u),0>this.us&&(this.us=0),this.Fo=o=this.CT.getUnit(),this.CH=1/o.getUnitFactor(),h.qf.getCode(u)}return w.Ky=function(u,o){return u==o||u!=null&&o!=null&&u.us==0&&o.us==0&&u.Cs===o.Cs},w.prototype.cs=function(){return this.us},w}();h.JL=A}(q||(q={})),function(h){h.$g=function(){function A(){}return A.ub=function(w,u,o,r,n,a,c,p){if(a!=null||c!=null||p!=null){r=h.F.ca(r),u=h.F.ca(u),o=h.F.ca(o),n=h.F.ca(n),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),1.570796326794897<h.s.R(n)&&(n=h.s.Mb(3.141592653589793,n)-n,r=h.F.ca(r+3.141592653589793));var f=h.F.ca(r-u);if(h.s.$(o,n)&&(h.s.$(u,r)||h.s.$(h.s.R(o),1.570796326794897)))a!=null&&(a.u=0),c!=null&&(c.u=0),p!=null&&(p.u=0);else{if(h.s.$(o,-n)){if(h.s.$(h.s.R(o),1.570796326794897))return a!=null&&(a.u=3.141592653589793*w),c!=null&&(c.u=0<o?h.F.ca(3.141592653589793-h.F.ca(r)):h.F.ca(r)),void(p!=null&&(p.u=0<o?h.F.ca(r):h.F.ca(3.141592653589793-h.F.ca(r))));if(h.s.$(h.s.R(f),3.141592653589793))return a!=null&&(a.u=3.141592653589793*w),c!=null&&(c.u=0),void(p!=null&&(p.u=0))}var m=h.s.R(o)==1.570796326794897?0:Math.cos(o),b=Math.sin(o),S=h.s.R(n)==1.570796326794897?0:Math.cos(n),M=Math.sin(n),T=h.s.R(f)==1.570796326794897?0:Math.cos(f),k=h.s.R(f)==3.141592653589793?0:Math.sin(f);if(a!=null){var C=Math.sin((n-o)/2);f=Math.sin(f/2),a.u=2*Math.asin(Math.sqrt(C*C+m*S*f*f))*w}c!=null&&(c.u=h.s.$(h.s.R(o),1.570796326794897)?0>o?r:h.F.ca(3.141592653589793-r):Math.atan2(S*k,m*M-b*S*T)),p!=null&&(h.s.$(h.s.R(n),1.570796326794897)?p.u=0>n?u:h.F.ca(3.141592653589793-u):(p.u=Math.atan2(m*k,M*m*T-S*b),p.u=h.F.ca(p.u+3.141592653589793)))}}},A.sf=function(w,u,o,r,n,a,c){if(a!=null||c!=null){u=h.F.ca(u),o=h.F.ca(o),1.570796326794897<h.s.R(o)&&(o=h.s.Mb(3.141592653589793,o)-o,u=h.F.ca(u+3.141592653589793)),h.s.$(h.s.R(o),1.570796326794897)&&(u=0),n=h.F.ca(n);var p=h.s.$(h.s.R(n),1.570796326794897)?0:Math.cos(n),f=h.s.$(h.s.R(n),3.141592653589793)?0:Math.sin(n),m=h.s.$(h.s.R(o),1.570796326794897)?0:Math.cos(o),b=Math.sin(o);w=r/w,r=h.s.$(h.s.R(w),1.570796326794897)?0:Math.cos(w);var S=h.s.$(h.s.R(w),3.141592653589793)?0:Math.sin(w),M=Math.asin(b*r+m*S*p);c!=null&&(c.u=M),a!=null&&(a.u=h.s.$(h.s.R(M),1.570796326794897)?h.s.$(o,-M)?0>M?n:h.F.ca(3.141592653589793-n):u:h.s.$(h.s.R(o),1.570796326794897)&&h.s.$(w,3.141592653589793)?0>o?n:h.F.ca(3.141592653589793-n):h.F.ca(u+Math.atan2(S*f,m*r-b*S*p)))}},A}()}(q||(q={})),function(h){h.Yk=function(){function A(){}return A.ub=function(w,u,o,r,n,a,c,p,f){var m=new h.ha(0),b=new h.ha(0),S=[0,0,0],M=[0,0,0],T=[0,0,0],k=new h.ha(0),C=new h.ha(0),N=new h.ha(0),F=new h.ha(0),D=new h.ha(0);if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(w,o,r,n,a,c,p,f);else{n=h.F.ca(n),o=h.F.ca(o);var j=h.F.ca(n-o);if(h.s.$(r,a)&&(h.s.$(o,n)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-a)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(w,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(j),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(w,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(a),1.570796326794897))&&(h.s.$(h.s.R(r),1.570796326794897)?o=n:n=o);var G=0;if(0>j){G=1;var W=o;o=n,n=W,W=r,r=a,a=W}j=h.F.pt(u,r);var J=h.F.pt(u,a);p==null&&f==null||(h.$g.ub(w,o,j,n,J,null,m,b),m=Math.atan2(Math.sin(m.u)*Math.cos(r-j),Math.cos(m.u)),b=Math.atan2(Math.sin(b.u)*Math.cos(a-J),Math.cos(b.u)),G!=0&&(W=m,m=b,b=W),p!=null&&(p.u=m),f!=null&&(f.u=b)),c!=null&&(h.F.el(1,u,r,o,0,N,F,D),S[0]=N.u,S[1]=F.u,S[2]=D.u,h.F.el(1,u,a,n,0,N,F,D),M[0]=N.u,M[1]=F.u,M[2]=D.u,T[0]=S[1]*M[2]-M[1]*S[2],T[1]=-(S[0]*M[2]-M[0]*S[2]),T[2]=S[0]*M[1]-M[0]*S[1],u=1-h.F.w(u,h.F.Xq(u,h.F.Sj(u,Math.acos(T[2]/Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2]))))),u*=2-u,p=Math.atan2(-T[1],-T[0]),T=h.F.ca(p-1.570796326794897),p=h.F.ca(p+1.570796326794897),T=h.s.R(h.F.ca(o-T))<=h.s.R(h.F.ca(o-p))?T:p,h.$g.ub(1,T,0,o,j,k,null,null),h.$g.ub(1,T,0,n,J,C,null,null),3.141592653589793<k.u+C.u&&(T=h.F.ca(T+3.141592653589793),h.$g.ub(1,T,0,o,j,k,null,null),h.$g.ub(1,T,0,n,J,C,null,null)),k.u*=h.s.Mb(1,r),C.u*=h.s.Mb(1,a),k.u=h.F.Sj(u,k.u),C.u=h.F.Sj(u,C.u),o=h.F.q(w,u,k.u),w=h.F.q(w,u,C.u),c.u=h.s.R(w-o))}}},A.sf=function(w,u,o,r,n,a,c,p){var f=0,m=new h.ha(0),b=new h.ha(0),S=[0,0,0],M=[0,0,0],T=new h.ha(0),k=new h.ha(0),C=new h.ha(0);if(c!=null||p!=null)if(h.s.vi(u))h.$g.sf(w,o,r,n,a,c,p);else if(h.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(a=h.F.ca(a),0>n&&(n=h.s.R(n),a=h.F.ca(a+3.141592653589793)),o=h.F.ca(o),r=h.F.ca(r),1.570796326794897<h.s.R(r)&&(o=h.F.ca(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.$(h.s.R(r),1.570796326794897)&&(o=0),h.s.Dd(r)){var N=h.s.R(1.570796326794897-h.s.R(a));N=h.F.Sj(u,N),N=1-h.F.w(u,h.F.Xq(u,N)),N*=2-N,w=n/h.F.Ch(w,N)*1.570796326794897,w=h.F.Tq(N,w),w=h.F.pt(N,w),h.$g.sf(1,o,r,w,a,c,m),p!=null&&(f=m.u),p!=null&&(p.u=h.F.Sj(u,f))}else if(h.s.$(h.s.R(r),1.570796326794897))m=2*(f=h.F.Ch(w,u)),a=0<(w=h.s.Mb(1.570796326794897,r))?h.F.ca(3.141592653589793-a):a,r=f-n,h.s.R(r)<=f?c!=null&&(c.u=a):(r=Math.floor(n/m),h.P.truncate(r%2)==0?(c!=null&&(c.u=a),n-=r*m):(c!=null&&(c.u=h.F.ca(a+3.141592653589793)),n=(r+1)*m-n),r=f-n),p!=null&&(p.u=h.F.Tq(u,r/f*w));else{N=h.F.pt(u,r),a=Math.atan2(Math.sin(a),Math.cos(a)*Math.cos(r-N));var F=h.P.truncate(h.s.Mb(1,N))*(1.570796326794897>=h.s.R(a)?1:-1);a=h.F.ca(o+Math.atan(Math.tan(a)*-Math.sin(N))),h.$g.ub(w,a,0,o,N,null,b,null),N=h.s.R(1.570796326794897-h.s.R(b.u)),N=h.F.Sj(u,N),N=1-h.F.w(u,h.F.Xq(u,N)),N*=2-N,h.F.el(1,u,0,a,0,T,k,C),S[0]=T.u,S[1]=k.u,S[2]=C.u,h.F.el(1,u,r,o,0,T,k,C),M[0]=T.u,M[1]=k.u,M[2]=C.u,r=Math.acos((S[0]*M[0]+S[1]*M[1]+S[2]*M[2])/Math.sqrt(M[0]*M[0]+M[1]*M[1]+M[2]*M[2])),r=h.F.Sj(N,r),n=0<(r=h.F.q(w,N,r)+n*F)?b.u:h.F.ca(b.u+3.141592653589793),w=h.s.R(r)/h.F.Ch(w,N)*1.570796326794897,w=h.F.Tq(N,w),w=h.F.pt(N,w),h.$g.sf(1,a,0,w,n,c,m),p!=null&&(f=m.u),p!=null&&(p.u=h.F.Sj(u,f))}},A}()}(q||(q={})),function(h){h.eu=function(){function A(){}return A.ub=function(w,u,o,r,n,a,c,p,f){var m=0,b=0,S=0;if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(w,o,r,n,a,c,p,f);else{var M=h.F.ca(n-o);if(h.s.$(r,a)&&(h.s.Dd(M)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-a)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(w,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(M),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(w,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(a),1.570796326794897)||h.s.Dd(M)||h.s.$(h.s.R(M),3.141592653589793))return void h.Yk.ub(w,u,o,r,n,a,c,p,f);var T=1-Math.sqrt(1-u),k=u/(1-u),C=w*(1-T);w=h.F.Xq(u,r);var N=h.F.Xq(u,a);u=h.s.R(w)==1.570796326794897?0:Math.cos(w);var F=Math.sin(w),D=h.s.R(N)==1.570796326794897?0:Math.cos(N),j=Math.sin(N),G=M,W=Math.cos(G),J=Math.sin(G),B=1,Q=0;do{var ue=G,ge=Math.sqrt(Math.pow(D*J,2)+Math.pow(u*j-F*D*W,2)),ye=F*j+u*D*W,de=Math.atan2(ge,ye);if(ge==0){B=0;break}var we=u*D*J/ge;if(m=Math.cos(Math.asin(we)),b=ye-2*F*j/(m*=m),1<h.s.R(b)&&(b=h.s.Mb(1,b)),G=M+(1-(G=T/16*m*(4+T*(4-3*m))))*T*we*(de+G*ge*(b+G*ye*(2*(S=b*b)-1))),W=Math.cos(G),J=Math.sin(G),Q++,3.141592653589793<h.s.R(G)&&30<Q){B=0;break}}while(5e3>=Q&&!h.s.$(ue,G));if(B!=0)T=(k*=m)*(256+k*(k*(74-47*k)-128))/1024,c!=null&&(c.u=C*(1+k*(4096+k*(k*(320-175*k)-768))/16384)*(de-T*ge*(b+T/4*(ye*(2*S-1)-T/6*b*(4*ge*ge-3)*(4*S-3))))),p!=null&&(p.u=h.s.$(h.s.R(r),1.570796326794897)?0>r?n:h.F.ca(3.141592653589793-n):Math.atan2(D*J,u*j-F*D*W)),f!=null&&(h.s.$(h.s.R(a),1.570796326794897)?f.u=0>a?o:h.F.ca(3.141592653589793-o):(f.u=Math.atan2(u*J,u*j*W-F*D),f.u=h.F.ca(f.u+3.141592653589793)));else{G=h.s.Mb(3.141592653589793,M),ye=F*j-u*D,de=Math.acos(ye),ge=Math.sin(de),m=1,Q=we=0;do S=we,W=1-.25*(we=T*(m*=m)*(1+T+T*T))+.1875*(b=T*T*(W=m*m)*(1+2.25*T))-.1953125*(B=T*T*T*W*m),we=.25*we-.25*b+.29296875*B,J=.03125*b-.05859375*B,B*=.00651041666666667,b=ye-2*F*j/m,1<h.s.R(b)&&(b=h.s.Mb(1,b)),m=Math.acos(b),ye=Math.cos(2*m),ue=Math.cos(3*m),J=(we=h.s.$(r,-a)?h.F.ca(3.141592653589793-M)/(3.141592653589793*T*W):h.F.ca(G-M)/(T*(W*de+we*ge*b+J*Math.sin(2*de)*ye+B*Math.sin(3*de)*ue)))*ge/(u*D),G=1.570796326794897<h.s.R(M)?h.s.Mb(3.141592653589793,J)-Math.asin(J):Math.asin(J),W=Math.cos(G),ge=Math.sqrt(Math.pow(D*J,2)+Math.pow(u*j-F*D*W,2)),de=3.141592653589793-Math.asin(h.s.R(ge)),ye=Math.cos(de),m=Math.cos(Math.asin(we)),Q++;while(70>=Q&&!h.s.$(S,we));c!=null&&(W=1+(k*=m*=m)*(4096+k*(k*(320-175*k)-768))/16384,h.s.$(r,-a)?c.u=3.141592653589793*C*W:(b=ye-2*F*j/m,m=Math.acos(b),ye=Math.cos(2*m),ue=Math.cos(3*m),c.u=C*(W*de+k*(k*(128+k*(35*k-60))-512)/2048*ge*b+k*(5*k-4)/6144*k*k*Math.sin(2*de)*ye+B*Math.sin(3*de)*ue+-762939453125e-16*k*k*k*k*Math.sin(4*de)*Math.cos(4*m)))),p!=null&&(h.s.Dd(r)&&h.s.Dd(a)?(m=Math.sqrt(1-we*we),p.u=Math.acos(m),0>M&&(p.u*=-1)):h.s.$(h.s.R(r),1.570796326794897)?p.u=0>r?n:h.F.ca(3.141592653589793-n):(c=we/u,C=Math.sqrt(1-c*c),0>u*j-F*D*Math.cos(G)&&(C*=-1),p.u=Math.atan2(c,C),h.s.$(r,-a)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-T*Math.cos(r))&&(0<r&&1.570796326794897>h.s.R(p.u)||0>r&&1.570796326794897<h.s.R(p.u))&&(p.u=h.s.Mb(3.141592653589793,p.u)-p.u))),f!=null&&(h.s.Dd(r)&&h.s.Dd(a)?(m=Math.sqrt(1-we*we),f.u=Math.acos(m),0<=M&&(f.u*=-1)):h.s.$(h.s.R(a),1.570796326794897)?f.u=0>a?o:h.F.ca(3.141592653589793-o):(M=we/D,c=Math.sqrt(1-M*M),C=Math.sin(G/2),0>Math.sin(N-w)-2*u*j*C*C&&(c*=-1),f.u=Math.atan2(M,c),f.u=h.F.ca(f.u+3.141592653589793),h.s.$(r,-a)&&!h.s.Dd(r)&&!h.s.$(h.s.R(r),1.570796326794897)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-T*Math.cos(r))&&(p!=null?C=p.u:(c=we/u,C=Math.sqrt(1-c*c),0>u*j-F*D*Math.cos(G)&&(C*=-1),C=Math.atan2(c,C),h.s.$(r,-a)&&h.s.R(h.F.ca(o-n))>3.141592653589793*(1-T*Math.cos(r))&&(0<r&&1.570796326794897>h.s.R(C)||0>r&&1.570796326794897<h.s.R(C))&&(C=h.s.Mb(3.141592653589793,C)-C)),1.570796326794897>=h.s.R(C)&&1.570796326794897<h.s.R(f.u)||1.570796326794897<=h.s.R(C)&&1.570796326794897>h.s.R(f.u))&&(f.u=-1*h.F.ca(f.u+3.141592653589793))))}}}},A.sf=function(w,u,o,r,n,a,c,p){if(c!=null||p!=null)if(h.s.vi(u))h.$g.sf(w,o,r,n,a,c,p);else if(a=h.F.ca(a),h.s.$(h.s.R(r),1.570796326794897)||h.s.Dd(a)||h.s.$(h.s.R(a),3.141592653589793))h.Yk.sf(w,u,o,r,n,a,c,p);else{var f=h.s.R(a)==1.570796326794897?0:Math.cos(a),m=h.s.R(a)==3.141592653589793?0:Math.sin(a);h.s.$(h.s.R(r),1.570796326794897)&&(o=0),a=1-Math.sqrt(1-u);var b=h.F.Xq(u,r);r=h.s.R(b)==1.570796326794897?0:Math.cos(b);var S=Math.sin(b);b=Math.atan2(Math.tan(b),f);var M=r*m,T=M*M,k=1-T,C=u/(1-u)*k,N=(u=C*(256+C*(C*(74-47*C)-128))/1024)/4,F=u/6,D=n/(w*(1-a)*(1+C*(4096+C*(C*(320-175*C)-768))/16384)),j=D;do{var G=j;n=h.s.R(j)==1.570796326794897?0:Math.cos(j);var W=(C=h.s.R(j)==3.141592653589793?0:Math.sin(j))*C;j=u*C*((w=Math.cos(2*b+j))+N*(n*(2*(j=w*w)-1)-F*w*(4*W-3)*(4*j-3)))+D}while(!h.s.$(G,j));n=h.s.R(j)==1.570796326794897?0:Math.cos(j),C=h.s.R(j)==3.141592653589793?0:Math.sin(j),c!=null&&(m=Math.atan2(C*m,r*n-S*C*f),k=a/16*k*(4+a*(4-3*k)),w=Math.cos(2*b+j),c.u=h.F.ca(o+(m-(1-k)*a*M*(j+k*C*(w+k*n*(2*w*w-1)))))),p!=null&&(k=S*C-r*n*f,k=(1-a)*Math.sqrt(T+k*k),p.u=Math.atan2(S*n+r*C*f,k))}},A}()}(q||(q={})),function(h){h.JC=function(){function A(){}return A.ub=function(w,u,o,r,n,a,c,p,f){var m=h.F.ca(n-o),b=h.s.$(h.s.R(r),1.570796326794897),S=h.s.$(h.s.R(a),1.570796326794897);if(h.s.$(r,a)&&(h.s.Dd(m)||b))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.vi(u)){var M=Math.sin(r),T=Math.sin(a);M=Math.sqrt((1+M)/(1-M)),T=Math.sqrt((1+T)/(1-T)),M=Math.log(T)-Math.log(M),M=Math.atan2(m,M),c!=null&&(c.u=h.s.$(r,a)?h.s.R(w*Math.cos(r)*m):h.s.R((w*a-w*r)/Math.cos(M)))}else T=h.F.Sw(u,a),M=Math.sin(h.F.Sw(u,r)),T=Math.sin(T),M=Math.sqrt((1+M)/(1-M)),T=Math.sqrt((1+T)/(1-T)),M=Math.log(T)-Math.log(M),M=Math.atan2(m,M),c!=null&&(h.s.$(r,a)?c.u=h.s.R(w*m*Math.cos(r)/h.F.w(u,r)):(m=h.F.q(w,u,r),w=h.F.q(w,u,a),c.u=h.s.R((w-m)/Math.cos(M))));p==null&&f==null||(c=h.F.ca(M+3.141592653589793),b&&S||!b&&!S||(b?M=0>r?n:h.F.ca(3.141592653589793-n):S&&(c=0>a?o:h.F.ca(3.141592653589793-o))),p!=null&&(p.u=M),f!=null&&(f.u=c))}},A.sf=function(w,u,o,r,n,a,c,p){a=h.F.ca(a),0>n&&(n=h.s.R(n),a=h.F.ca(a+3.141592653589793)),h.s.vi(u)?h.s.$(h.s.R(r),1.570796326794897)?(o=0>r?a:h.F.ca(3.141592653589793-a),3.141592653589793>=(a=n/w%6.283185307179586)?w=r-h.s.Mb(a,r):(o=h.F.ca(o+3.141592653589793),w=-r+h.s.Mb(a-3.141592653589793,r))):h.s.$(h.s.R(a),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,a)/(w*Math.cos(r))),w=r):(w=r+n*Math.cos(a)/w,1.570796326794897<h.s.R(w)&&(w=1.570796326794897),h.s.$(h.s.R(w),1.570796326794897)&&(h.s.Dd(a)||h.s.$(h.s.R(a),3.141592653589793))||(1.570796316258184<h.s.R(w)&&(w=h.s.Mb(1.570796316258184,w)),u=Math.sin(r),r=Math.sin(w),u=Math.sqrt((1+u)/(1-u)),r=Math.sqrt((1+r)/(1-r)),u=Math.log(r)-Math.log(u),o=h.F.ca(o+Math.tan(a)*u))):h.s.$(h.s.R(r),1.570796326794897)?(o=0>r?a:h.F.ca(3.141592653589793-a),a=n/h.F.iW(w,u),3.141592653589793>=(a%=6.283185307179586)?w=r-h.s.Mb(a,r):(o=h.F.ca(o+3.141592653589793),w=-r+h.s.Mb(a-3.141592653589793,r)),w=h.F.Tq(u,w)):h.s.$(h.s.R(a),1.570796326794897)?(o=h.F.ca(o+h.s.Mb(n,a)*h.F.w(u,r)/(w*Math.cos(r))),w=r):(w=1.570796326794897*(n*Math.cos(a)+h.F.q(w,u,r))/h.F.Ch(w,u),1.570796326794897<h.s.R(w)&&(w=h.s.Mb(1.570796326794897,w)),w=h.F.Tq(u,w),h.s.$(h.s.R(w),1.570796326794897)&&(h.s.Dd(a)||h.s.$(h.s.R(a),3.141592653589793))||(n=h.F.Sw(u,r),r=h.F.Sw(u,w),1.570796316258184<h.s.R(r)&&(r=h.s.Mb(1.570796316258184,w),w=h.F.sO(u,r)),u=Math.sin(n),r=Math.sin(r),u=Math.sqrt((1+u)/(1-u)),r=Math.sqrt((1+r)/(1-r)),u=Math.log(r)-Math.log(u),o=h.F.ca(o+Math.tan(a)*u))),c!=null&&(c.u=o),p!=null&&(p.u=w)},A}()}(q||(q={})),function(h){h.kb=function(){function A(){}return A.Sy=function(w,u,o,r,n,a,c){h.eu.ub(w,u,o,r,n,a,null,c,null)},A.Ai=function(w,u,o,r,n,a,c,p){h.eu.sf(w,u,o,r,n,a,c,p)},A.xd=function(w,u,o,r,n,a,c,p,f,m){switch(m){case 2:h.Yk.ub(w,u,o,r,n,a,c,p,f);break;case 3:h.KC.ub(w,u,o,r,n,a,c,p,f);break;case 1:h.JC.ub(w,u,o,r,n,a,c,p,f);break;default:h.eu.ub(w,u,o,r,n,a,c,p,f)}},A.qj=function(w,u,o,r,n,a,c,p,f){switch(f){case 2:h.Yk.sf(w,u,o,r,n,a,c,p);break;case 3:h.KC.sf(w,u,o,r,n,a,c,p);break;case 1:h.JC.sf(w,u,o,r,n,a,c,p);break;default:h.eu.sf(w,u,o,r,n,a,c,p)}},A}()}(q||(q={})),function(h){var A=function(){function u(){this.y=this.x=null}return u.construct=function(o){var r=new u;return r.x=new h.Xb,r.x.set(o.x),r.y=new h.Xb,r.y.set(o.y),r},u.PE=function(o,r){var n=new u;return n.x=new h.Xb,n.x.set(o),n.y=new h.Xb,n.y.set(r),n},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()},u.prototype.value=function(){return h.h.construct(this.x.value(),this.y.value())},u}();h.nY=A;var w=function(){function u(){this.z=this.y=this.x=null}return u.construct=function(o){var r=new u;return r.x=new h.Xb,r.x.set(o.x),r.y=new h.Xb,r.y.set(o.y),r.z=new h.Xb,r.z.set(o.z),r},u.PE=function(o,r,n){var a=new u;return a.x=new h.Xb,a.x.set(o),a.y=new h.Xb,a.y.set(r),a.z=new h.Xb,a.z.set(n),a},u.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()},u.prototype.value=function(){return new h.Od(this.x.value(),this.y.value(),this.z.value())},u.prototype.Sh=function(o){var r=new h.Xb,n=new h.Xb,a=new h.Xb;return r.Ml(this.x,o.x),n.Ml(this.y,o.y),a.Ml(this.z,o.z),(o=new h.Xb).YM(r,n),o.add(a),o},u.prototype.XE=function(o){var r=new u;r.x.Ml(this.y,o.z),r.y.Ml(this.z,o.x),r.z.Ml(this.x,o.y);var n=new h.Xb,a=new h.Xb,c=new h.Xb;return n.Ml(this.z,o.y),a.Ml(this.x,o.z),c.Ml(this.y,o.x),r.x.sub(n),r.y.sub(a),r.z.sub(c),r},u}();h.oY=w,h.Nx=function(){function u(){}return u.yP=function(o,r,n){var a=r.x;r=r.y,u.el(1,o,Math.cos(a),Math.sin(a),Math.cos(r),Math.sin(r),n)},u.xP=function(o,r){var n=new h.Od;return u.yP(o,r,n),n},u.el=function(o,r,n,a,c,p,f){o/=Math.sqrt(1-r*p*p),f.L(o*c*n,o*c*a,o*(1-r)*p)},u.$u=function(o,r){var n=new h.Xb,a=new h.Xb,c=new h.Xb,p=new h.Xb;n.cos(r.x),a.sin(r.x),c.cos(r.y),p.sin(r.y);var f=new h.Xb;return f.set(p),f.Ag(p),f.Oo(o),f.Oo(-1),f.eN(),f.sqrt(),(r=new h.Xb).set(1),r.lm(f),(f=new h.Xb).set(r),f.Ag(c),f.Ag(n),(n=new h.Xb).set(r),n.Ag(c),n.Ag(a),(a=new h.Xb).set(r),a.Oo(1-o),a.Ag(p),w.PE(f,n,a)},u.KS=function(o,r,n,a){if(Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x)return NaN;if(a=u.XA(a,Math.min(r.x,n.x),Math.max(r.x,n.x)),!new h.Oc(r.x,n.x).contains(a))return NaN;var c=A.construct(r);if(n=A.construct(n),c=u.$u(o,c),n=u.$u(o,n),(n=c.XE(n)).z.qg())return r.y;var p=new h.Xb;p.set(n.x),p.lm(n.z),p.Oo(-1);var f=new h.Xb;f.set(n.y),f.lm(n.z),f.Oo(-1);var m=new h.Xb;return m.set(f),m.Ag(f),(c=new h.Xb).set(p),c.Ag(p),c.add(m),c.sqrt(),c.qg()||p.qg()&&f.qg()?r.y:(r=Math.atan2(f.value(),p.value()),r=Math.atan2(c.value()*Math.cos(r-a),1-o),a=u.xP(o,h.h.construct(a,r)),o=new h.Od(a.x,a.y,-a.z),a=n.value().Sh(a),o=n.value().Sh(o),Math.abs(o)<Math.abs(a)&&(r=-r),r)},u.Jz=function(o,r,n,a,c){if(c[0]=NaN,c[1]=NaN,Math.abs(r.x-n.x)>Math.PI||Math.abs(r.y)>.5*Math.PI||Math.abs(n.y)>.5*Math.PI||(Math.abs(r.y)==.5*Math.PI||Math.abs(n.y)==.5*Math.PI)&&r.x!=n.x||Math.abs(a)>=.5*Math.PI||0<r.y&&0<n.y&&r.y>a&&n.y>a||0>r.y&&0>n.y&&r.y<a&&n.y<a)return 0;var p=A.construct(r),f=A.construct(n);p=u.$u(o,p),f=u.$u(o,f);var m=p.XE(f);if(m.z.qg())return new h.Oc(r.y,n.y).contains(a)?(c[0]=r.x,1):0;(f=new h.Xb).set(m.x),f.lm(m.z),f.Oo(-1),(p=new h.Xb).set(m.y),p.lm(m.z),p.Oo(-1),(m=new h.Xb).set(p),m.Ag(p);var b=new h.Xb;return b.set(f),b.Ag(f),b.add(m),b.sqrt(),b.qg()||f.qg()&&p.qg()?a==0?(c[0]=r.x,c[1]=n.x,2):0:(o=(1-o)*Math.tan(a)/b.value(),1<Math.abs(o)?0:(o=Math.acos(o),m=Math.atan2(p.value(),f.value()),f=Math.min(r.x,n.x),p=Math.max(r.x,n.x),n=u.XA(m-o,f,p),o=a!=0?u.XA(m+o,f,p):n,a=0,f<=n&&n<=p&&(c[a]=n,a++),o!=n&&f<=o&&o<=p&&(c[a]=o,++a==2&&Math.abs(c[0]-r.x)>Math.abs(c[1]-r.x)&&(r=c[0],c[0]=c[1],c[1]=r)),a))},u.XA=function(o,r,n){return o>n?o-=2*(r=Math.ceil((o-n)/(2*Math.PI)))*Math.PI:o<r&&(o+=2*(r=Math.ceil((r-o)/(2*Math.PI)))*Math.PI),o},u}()}(q||(q={})),function(h){h.RK=function(){function A(){}return A.SX=function(w,u){var o=8,r=[0,0,0,0],n=new h.h;n.N(u),n.scale(h.cb.tc(w).Id().Fc()==9102?1:h.cb.tc(w).Id().ci/3.141592653589793*180),-180>n.x?(n.x-=n.x%360,-180>n.x&&(n.x+=360)):180<n.x&&(n.x-=n.x%360,180<n.x&&(n.x-=360)),90<n.y&&(n.y=90),-90>n.y&&(n.y=-90);for(var a=-180,c=180,p=(w=5*o)-1,f=(u=(w+31)/32)-1;0<=f;f--)for(var m=p-32*f,b=Math.min(32,w-32*f),S=1;S<b;S+=2){var M=.5*(c+a);n.x>=M?(r[f]|=1<<m,a=M):c=M,m-=2,p-=2}for(a=-90,c=90,p=w-2,f=u-1;0<=f;f--)for(m=p-32*f,b=Math.min(32,w-32*f),S=0;S<b;S+=2)M=.5*(c+a),n.y>=M?(r[f]|=1<<m,a=M):c=M,m-=2,p-=2;return A.UP(r,o,o)},A.UP=function(w,u,o){for(var r=[],n=0;n<u;n++)r[n]="";for(var a=n=0,c=0;c<u;c++){var p=w[n]>>a&31;if(31<(a+=5)){var f=37-a;p&=(1<<f)-1,a-=32,p|=(w[++n]&(1<<a)-1)<<f}r[u-1-c]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[p]}if(o>u)for(c=0;c<o-u;c++)r.push("0");else o<u&&(r.length=o);return r.join("")},A}()}(q||(q={})),function(h){var A={gcstol:[0,2e-9,1,2241706620489156e-24,2,2313672246530541e-24,3,898240164660333e-23,4,8982433838020134e-24,5,8982439417325895e-24,6,8982466029667677e-24,7,8982476760268133e-24,8,8982492642167149e-24,9,898251968292634e-23,10,898253685210448e-23,11,8982546725256576e-24,12,8982557456049832e-24,13,898257333682596e-23,14,8982575482995276e-24,15,8982578488197342e-24,16,8982579775336987e-24,17,89825840676828e-22,18,8982599090925448e-24,19,8982605529473397e-24,20,8982609220517402e-24,21,8982611968030573e-24,22,8982616260407152e-24,23,8982620552787834e-24,24,8982633429954492e-24,25,8982637722351582e-24,26,898264416095491e-23,27,8982646307158072e-24,28,8982654891980968e-24,29,8982667769246082e-24,30,8982674207892485e-24,31,8982680646548117e-24,32,8982682792768713e-24,33,8982685798042582e-24,34,8982689231436652e-24,35,898269137766135e-23,36,898269266624163e-23,37,8982705114087017e-24,38,8982706830791106e-24,39,8982711958374661e-24,40,8982712839964735e-24,41,8982717991496125e-24,42,8982721424914803e-24,43,8982723571154887e-24,44,8982727863638127e-24,45,8982730868942154e-24,46,8982734302370678e-24,47,8982745033612112e-24,48,8982751472369276e-24,49,8982755764879183e-24,50,8982762203651733e-24,51,8982764776628385e-24,52,8982766496171896e-24,53,898277722749025e-23,54,898278152002477e-23,55,898279933943848e-23,56,89829143024805e-22,57,8982922161948598e-24,58,898292327314211e-23,59,8982925667349601e-24,60,8982932222965576e-24,61,8982961298941316e-24,62,8982965524049989e-24,63,8982994818246099e-24,64,8982994895706967e-24,65,898299489597736e-23,66,8983000733443498e-24,67,8983055097289157e-24,68,8983064111047368e-24,69,8983111996941178e-24,70,8983120447446023e-24,71,898312748954554e-23,72,8983134531656096e-24,73,8983141573777694e-24,74,8983148615910332e-24,75,8983152841195215e-24,76,8983153545409748e-24,77,8983153827095593e-24,78,898315396793852e-23,79,8983154249624393e-24,80,8983155658054012e-24,81,8983960794340072e-24,82,8984061344391998e-24,83,8984072829255685e-24,84,8984194981201908e-24,85,8984275233099427e-24,86,8984326127007554e-24,87,8984330099816539e-24,88,898433275258421e-23,89,8984333047023206e-24,90,8984333885258723e-24,91,8984337959508212e-24,92,8984365176209457e-24,93,8984727360418079e-24,94,8984901041679577e-24,95,898542662091587e-23,96,898610024130669e-23,97,8992894229037531e-24,98,8993203677616635e-24,99,8993206178094346e-24,100,8993216059187305e-24,101,899322029394808e-23,102,8994627867045891e-24,103,9467559984315793e-24,104,946881168618118e-23,105,9980888154931644e-24,106,9981105353606775e-24,107,9983807356573187e-24,108,1687060485811522e-23,109,1688447560354875e-23,110,2176606011487185e-23,111,2225078816042032e-23,112,2348476432064694e-23,113,2348765250187846e-23,114,2378108974103778e-23,115,314559636297708e-22,116,3297788621680806e-23,117,3667892343788279e-23,118,4235973644320739e-23,119,4794625900676345e-23,120,7262742998235812e-23,121,7499447580246377e-23,122,7525056410964318e-23,123,7979913581209237e-23,124,9662020153976783e-23,125,9799175562353741e-23,126,9897353517547472e-23,127,102313891987647e-21,128,1081460541960784e-22,129,121905913857622e-21,130,2246893314238523e-22,131,2297344808062643e-22,132,242984645941825e-21,133,2754604784282804e-22,134,2884548130346993e-22,135,3370339971357784e-22,136,4307953346848296e-22,137,5208707228462029e-22,138,5509209568565608e-22,139,6452227422644406e-22,140,6740679942715567e-22,141,6861770001566745e-22,142,7252630318111686e-22,143,7441010326374328e-22,144,7742672907173287e-22,145,9629542775307953e-22,146,1061032953945969e-21,147,1143628333594458e-21,148,1162186197019925e-21,149,136418522650196e-20,150,1367441038498385e-21,151,1432394487827058e-21,152,1736235742820677e-21,153,1848250952034914e-21,154,1909859317102744e-21,155,1975716534933873e-21,156,2122065907891938e-21,157,272837045300392e-20,158,3183098861837907e-21,159,3580986219567645e-21,160,3819718634205488e-21,161,409255567950588e-20,162,4407367654852486e-21,163,4774648292756861e-21,164,5161781938115525e-21,165,520870722846203e-20,166,5729577951308232e-21,167,6031134685587613e-21,168,6987290184522236e-21,169,9241254760174569e-21,170,1145915590261646e-20],pcstol:[0,6666666666666667e-24,1,2e-8,2,4970973863636364e-20,3,4970978156565657e-20,4,4970980410559237e-20,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103e3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9e3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25e3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2e3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32e3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},w={c:[[2e3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9e3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32e3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25e3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};h.yr=function(){function u(){}return u.Ny=function(o){u.zp===!1&&u.zt();var r=u.zQ(o);if(r==-1){var n=u.Ax(o);n!=o&&(r=u.Ny(n))}return r==-1&&(n=u.zK(o))!=o&&(r=u.Ny(n)),r},u.zQ=function(o){return u.Hw[o]!==void 0?u.Hw[o]:-1},u.wQ=function(o){u.zp===!1&&u.zt();var r=u.hF(o);if(r==1e38){var n=u.Ax(o);if(n!=o&&(r=u.hF(n)),r==1e38)return 1e-10}return r},u.RS=function(o){if(u.Ks[o]!==void 0)return!0;var r=u.Ax(o);return r!=o&&u.Ks[r]!==void 0},u.TS=function(o){if(u.yo[o]!==void 0)return!0;var r=u.Ax(o);return r!=o&&u.yo[r]!==void 0},u.hF=function(o){return u.zp===!1&&u.zt(),u.Ks[o]!==void 0?u.Ks[o]:u.yo[o]!==void 0?u.yo[o]:1e38},u.zK=function(o){return u.zp===!1&&u.zt(),u.QA[o]!==void 0?u.QA[o]:o},u.Ax=function(o){return u.zp===!1&&u.zt(),u.RA[o]!==void 0?u.RA[o]:o},u.zt=function(){for(var o,r=A,n=0;n<r.pcsid.length;n+=2)u.yo[r.pcsid[n]]=r.pcstol[2*r.pcsid[n+1]+1];for(n=0;n<r.pcsidc.length;n+=1)for(var a=(o=r.pcsidc[n])[0];a<=o[1];a++)u.yo[a]=r.pcstol[2*o[2]+1];for(n=0;n<r.gcsid.length;n+=2)u.Ks[r.gcsid[n]]=r.gcstol[2*r.gcsid[n+1]+1];for(n=0;n<r.gcsidc.length;n+=1)for(a=(o=r.gcsidc[n])[0];a<=o[1];a++)u.yo[a]=r.gcstol[2*o[2]+1];for(n=0;n<w.c.length;n+=1)for(a=(o=w.c[n])[0];a<=o[1];a++)u.Hw[a]=o[2];for(n=0;n<w.nc.length;n+=2)u.Hw[w.nc[n]]=w.nc[n+1];for(w=null,n=0;n<r.newtoold.length;n+=2)u.QA[r.newtoold[n+1]]=r.newtoold[n],u.RA[r.newtoold[n]]=r.newtoold[n+1];A=null,u.zp=!0},u.zp=!1,u.Ks=[],u.yo=[],u.QA=[],u.RA=[],u.Hw=[],u}()}(q||(q={})),function(h){function A(u){return u.length===0?'""':u[0]=='"'||u[0]=="."||"0"<=u[0]&&"9">=u[0]?u:'"'+u.trim()+'"'}var w=[];h.RC=function(){function u(){}return u.yQ=function(o){try{for(var r=0;r<w.length;r++)if(w[r].wkttext===o)return w[r].unit;for(var n,a=r="",c=!1,p=0;p<o.length;p++){var f=o[p];c===!0?f=='"'?o[p+1]=='"'?r+=f:c=c=!1:r+=f:/[\s]/.test(f)||(f==","?(a=r!==""?a+(A(r)+","):a+",",r=""):f==")"||f=="]"?(a=r!==""?a+(A(r)+"]}"):a+"]}",r=""):f=="("||f=="["?(a+='{ "entity": "'+r.toUpperCase().trim()+'", "values":[',r=""):f=='"'?(c=!0,r=""):r+=f)}n=JSON.parse(a);var m=u.gF(n);if(m===null)return null;for(n=null,f=0;f<m.values.length;f++)if(typeof m.values[f]=="object"&&m.values[f].entity==="UNIT"){n=m.values[f];break}if(n===null)return null;var b=h.Uc.TO(m.entity==="GEOGCS"?1:0,n.values[1],n.values[2]);return w.push({wkttext:o,unit:b}),10<w.length&&w.shift(),b}catch{return null}},u.gF=function(o){if(o===null)return null;if(o.entity==="GEOGCS"||o.entity==="PROJCS")return o;for(var r=[],n=0;n<o.values.length;n++)if(typeof o.values[n]=="object"&&o.values[n].entity!==void 0){if(o.values[n].entity==="GEOGCS"||o.values[n].entity=="PROJCS")return o.values[n];r.push(o.values[n])}for(o=0;o<r.length;o++)if((n=u.gF(r[o]))!==null)return n;return null},u.xQ=function(o){var r=-1;if(o!=null&&0<o.length){var n=o.indexOf("PROJCS");if(0<=n){var a=0;if(0<=(n=o.lastIndexOf("UNIT"))&&0<(n=o.indexOf(",",n+4))){n++;var c=o.indexOf("]",n+1);if(0<c)try{a=parseFloat(o.substring(n,c))}catch{a=0}}0<a&&(r=.001/a)}else if(0<=(n=o.indexOf("GEOGCS"))){var p=0;if(a=0,0<(n=o.indexOf("SPHEROID",n+6))&&0<(n=o.indexOf(",",n+8))){if(n++,0<(c=o.indexOf(",",n+1)))try{p=parseFloat(o.substring(n,c))}catch{p=0}if(0<p&&0<=(n=o.indexOf("UNIT",c+1))&&0<(n=o.indexOf(",",n+4))&&(n++,0<(c=o.indexOf("]",n+1))))try{a=parseFloat(o.substring(n,c))}catch{a=0}}0<p&&0<a&&(r=.001/(p*a))}}return r},u}()}(q||(q={})),function(h){var A;(A=h.ZK||(h.ZK={}))[A.NONE=0]="NONE",A[A.LINEAR=1]="LINEAR",A[A.ANGULAR=2]="ANGULAR",function(u){u[u.enumFloat=0]="enumFloat",u[u.enumDouble=1]="enumDouble",u[u.enumInt32=2]="enumInt32",u[u.enumInt64=3]="enumInt64",u[u.enumInt8=4]="enumInt8",u[u.enumInt16=5]="enumInt16"}(h.KL||(h.KL={})),function(u){u[u.POSITION=0]="POSITION",u[u.Z=1]="Z",u[u.M=2]="M",u[u.ID=3]="ID",u[u.NORMAL=4]="NORMAL",u[u.TEXTURE1D=5]="TEXTURE1D",u[u.TEXTURE2D=6]="TEXTURE2D",u[u.TEXTURE3D=7]="TEXTURE3D",u[u.ID2=8]="ID2",u[u.MAXSEMANTICS=10]="MAXSEMANTICS"}(h.Kh||(h.Kh={}));var w=function(){function u(o,r){if(this.Xs=this.Be=null,this.Qq=this.Ba=0,this.wh=this.cg=null,this.yl=0,r!==void 0){for(this.Ba=r.Ba,this.Qq=r.Qq,this.cg=r.cg.slice(0),this.wh=r.wh.slice(0),this.yl=r.yl,this.Xs=[],o=r=0;o<this.Ba;o++)this.Xs[o]=r,r+=u.Wa(this.cg[o]);for(this.Qq=r,this.Be=[],o=0;o<this.Ba;o++){r=u.Wa(this.qd(o));for(var n=u.te(this.qd(o)),a=0;a<r;a++)this.Be[this.Xs[o]+a]=n}}else this.Qq=this.Ba=0}return u.prototype.qd=function(o){if(0>o||o>this.Ba)throw h.i.O();return this.cg[o]},u.prototype.Qf=function(o){return this.wh[o]},u.gz=function(o){return u.DM[o]},u.Vp=function(o){return u.MM[o]},u.Wa=function(o){return u.lM[o]},u.prototype.hasAttribute=function(o){return 0<=this.wh[o]},u.prototype.cG=function(){return this.hasAttribute(1)},u.te=function(o){return u.ZC[o]},u.prototype.ER=function(o){return this.Xs[o]},u.xG=function(o,r){return u.ZC[o]===r},u.prototype.Nb=function(o){return this===o},u.prototype.Bn=function(){for(var o=h.P.Vh(this.cg[0]),r=1;r<this.Ba;r++)o=h.P.Vh(this.cg[r],o);return o},u.prototype.ak=function(o){return this.Xs[o]},u.prototype.dc=function(){return this.yl},u.prototype.Fd=function(o){return this.cg[o]},u.ZC=[0,0,NaN,0,0,0,0,0,0],u.DM=[1,1,1,0,2,1,1,1,0],u.MM=[1,1,1,2,0,0,0,0,2],u.lM=[2,1,1,1,3,1,2,3,2],u}();h.ua=w}(q||(q={})),function(h){function A(c,p,f){var m=p-(c=new a(c)).e,b=c.c;for(b.length>++p&&w(c,m,a.gu),b[0]?f?m=p:(b=c.c,m=c.e+m+1):++m;b.length<m;b.push(0));return m=c.e,f===1||f&&(p<=m||m<=o)?(0>c.Cd&&b[0]?"-":"")+(1<b.length?b[0]+"."+b.join("").slice(1):b[0])+(0>m?"e":"e+")+m:c.toString()}function w(c,p,f,m){var b=c.c,S=c.e+p+1;if(f===1?m=5<=b[S]:f===2?m=5<b[S]||b[S]==5&&(m||0>S||b[S+1]!==void 0||1&b[S-1]):f===3?m=m||b[S]!==void 0||0>S:(m=!1,f!==0&&u("!Big.RM!")),1>S||!b[0])m?(c.e=-p,c.c=[1]):c.c=[c.e=0];else{if(b.length=S--,m)for(;9<++b[S];)b[S]=0,S--||(++c.e,b.unshift(1));for(S=b.length;!b[--S];b.pop());}return c}function u(c){throw(c=Error(c)).name="BigError",c}var o=-7,r=21,n=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,a=function(){function c(p){if(p instanceof c)this.Cd=p.Cd,this.e=p.e,this.c=p.c.slice();else{var f,m,b;for(p===0&&0>1/p?p="-0":n.test(p+="")||u(NaN),this.Cd=p.charAt(0)=="-"?(p=p.slice(1),-1):1,-1<(f=p.indexOf("."))&&(p=p.replace(".","")),0<(m=p.search(/e/i))?(0>f&&(f=m),f+=+p.slice(m+1),p=p.substring(0,m)):0>f&&(f=p.length),m=0;p.charAt(m)=="0";m++);if(m==(b=p.length))this.c=[this.e=0];else{for(;p.charAt(--b)=="0";);for(this.e=f-m-1,this.c=[],f=0;m<=b;this.c[f++]=+p.charAt(m++));}}}return c.prototype.abs=function(){var p=new c(this);return p.Cd=1,p},c.prototype.cmp=function(p){var f=this.c,m=(p=new c(p)).c,b=this.Cd,S=p.Cd,M=this.e,T=p.e;if(!f[0]||!m[0])return f[0]?b:m[0]?-S:0;if(b!=S)return b;if(p=0>b,M!=T)return M>(T^p)?1:-1;for(b=-1,S=(M=f.length)<(T=m.length)?M:T;++b<S;)if(f[b]!=m[b])return f[b]>(m[b]^p)?1:-1;return M==T?0:M>(T^p)?1:-1},c.prototype.lm=function(p){var f=this.c,m=(p=new c(p)).c,b=this.Cd==p.Cd?1:-1,S=c.tr;if((S!==~~S||0>S||1e6<S)&&u("!Big.DP!"),!f[0]||!m[0])return f[0]==m[0]&&u(NaN),m[0]||u(b/0),new c(0*b);var M,T,k=m.slice(),C=M=m.length,N=f.length,F=f.slice(0,M),D=F.length,j=p,G=j.c=[],W=0,J=S+(j.e=this.e-p.e)+1;for(j.Cd=b,b=0>J?0:J,k.unshift(0);D++<M;F.push(0));do{for(T=0;10>T;T++){if(M!=(D=F.length))var B=M>D?1:-1;else{var Q=-1;for(B=0;++Q<M;)if(m[Q]!=F[Q]){B=m[Q]>F[Q]?1:-1;break}}if(!(0>B))break;for(p=D==M?m:k;D;){if(F[--D]<p[D]){for(Q=D;Q&&!F[--Q];F[Q]=9);--F[Q],F[D]+=10}F[D]-=p[D]}for(;!F[0];F.shift());}G[W++]=B?T:++T,F[0]&&B?F[D]=f[C]||0:F=[f[C]]}while((C++<N||F[0]!==void 0)&&b--);return G[0]||W==1||(G.shift(),j.e--),W>J&&w(j,S,c.gu,F[0]!==void 0),j},c.prototype.ZR=function(){return 0<this.cmp(0)},c.prototype.fT=function(){return 0>this.cmp(0)},c.prototype.kt=function(p){var f,m=this.Cd,b=(p=new c(p)).Cd;if(m!=b)return p.Cd=-b,this.nI(p);var S=this.c.slice(),M=this.e,T=p.c,k=p.e;if(!S[0]||!T[0])return T[0]?(p.Cd=-b,p):new c(S[0]?this:0);if(m=M-k){for((f=0>m)?(m=-m,M=S):(k=M,M=T),M.reverse(),b=m;b--;M.push(0));M.reverse()}else for(M=((f=S.length<T.length)?S:T).length,m=b=0;b<M;b++)if(S[b]!=T[b]){f=S[b]<T[b];break}if(f&&(M=S,S=T,T=M,p.Cd=-p.Cd),0<(b=(M=T.length)-(f=S.length)))for(;b--;S[f++]=0);for(b=f;M>m;){if(S[--M]<T[M]){for(f=M;f&&!S[--f];S[f]=9);--S[f],S[M]+=10}S[M]-=T[M]}for(;S[--b]==0;S.pop());for(;S[0]==0;)S.shift(),--k;return S[0]||(p.Cd=1,S=[k=0]),p.c=S,p.e=k,p},c.prototype.nI=function(p){var f=this.Cd,m=(p=new c(p)).Cd;if(f!=m)return p.Cd=-m,this.kt(p);m=this.e;var b=this.c,S=p.e,M=p.c;if(!b[0]||!M[0])return M[0]?p:new c(b[0]?this:0*f);if(b=b.slice(),f=m-S){for(0<f?(S=m,m=M):(f=-f,m=b),m.reverse();f--;m.push(0));m.reverse()}for(0>b.length-M.length&&(m=M,M=b,b=m),f=M.length,m=0;f;)m=(b[--f]=b[f]+M[f]+m)/10|0,b[f]%=10;for(m&&(b.unshift(m),++S),f=b.length;b[--f]==0;b.pop());return p.c=b,p.e=S,p},c.prototype.pow=function(p){var f=this,m=new c(1),b=m,S=0>p;for((p!==~~p||-1e6>p||1e6<p)&&u("!pow!"),p=S?-p:p;1&p&&(b=b.nr(f)),p>>=1;)f=f.nr(f);return S?m.lm(b):b},c.prototype.round=function(p,f){var m=this;return p==null?p=0:(p!==~~p||0>p||1e6<p)&&u("!round!"),w(m=new c(m),p,f==null?c.gu:f),m},c.prototype.sqrt=function(){var p=this.c,f=this.Cd,m=this.e,b=new c("0.5");if(!p[0])return new c(this);0>f&&u(NaN),(f=Math.sqrt(this.toString()))==0||f==1/0?((f=p.join("")).length+m&1||(f+="0"),(p=new c(Math.sqrt(f).toString())).e=((m+1)/2|0)-(0>m||1&m)):p=new c(f.toString()),f=p.e+(c.tr+=4);do m=p,p=b.nr(m.nI(this.lm(m)));while(m.c.slice(0,f).join("")!==p.c.slice(0,f).join(""));return w(p,c.tr-=4,c.gu),p},c.prototype.nr=function(p){var f=this.c,m=(p=new c(p)).c,b=f.length,S=m.length,M=this.e,T=p.e;if(p.Cd=this.Cd==p.Cd?1:-1,!f[0]||!m[0])return new c(0*p.Cd);if(p.e=M+T,b<S){var k=f;f=m,m=k,T=b,b=S,S=T}for(k=Array(T=b+S);T--;k[T]=0);for(M=S;M--;){for(S=0,T=b+M;T>M;)S=k[T]+m[M]*f[T-M-1]+S,k[T--]=S%10,S=S/10|0;k[T]=(k[T]+S)%10}for(S&&++p.e,k[0]||k.shift(),M=k.length;!k[--M];k.pop());return p.c=k,p},c.prototype.toString=function(){var p=this.e,f=this.c.join(""),m=f.length;if(p<=o||p>=r)f=f.charAt(0)+(1<m?"."+f.slice(1):"")+(0>p?"e":"e+")+p;else if(0>p){for(;++p;f="0"+f);f="0."+f}else if(0<p)if(++p>m)for(p-=m;p--;f+="0");else p<m&&(f=f.slice(0,p)+"."+f.slice(p));else 1<m&&(f=f.charAt(0)+"."+f.slice(1));return 0>this.Cd&&this.c[0]?"-"+f:f},c.prototype.toExponential=function(p){return p==null?p=this.c.length-1:(p!==~~p||0>p||1e6<p)&&u("!toExp!"),A(this,p,1)},c.prototype.toFixed=function(p){var f=o,m=r;if(o=-(r=1/0),p==null)var b=this.toString();else p===~~p&&0<=p&&1e6>=p&&(b=A(this,this.e+p),0>this.Cd&&this.c[0]&&0>b.indexOf("-")&&(b="-"+b));return o=f,r=m,b||u("!toFix!"),b},c.prototype.toPrecision=function(p){return p==null?this.toString():((p!==~~p||1>p||1e6<p)&&u("!toPre!"),A(this,p-1,2))},c.tr=20,c.gu=1,c}();h.ip=a}(q||(q={})),function(h){var A=function(){function w(u){this.lf=u}return w.prototype.qr=function(u,o,r){var n=new h.h,a=new h.h,c=this.lf;r.Wd(u,o,function(p,f){return c.uc(2*p,n),c.uc(2*f,a),n.compare(a)})},w.prototype.bq=function(u){return this.lf.read(2*u+1)},w}();h.si=function(){function w(){}return w.cq=function(u){if(u.B())return!1;var o=u.K();return o==1736?u.He()!=0:o==1607?(o=[!1],w.mE(u,!0,o),o[0]):!(o!=197&&(!h.ba.zd(o)||u.vG()))},w.im=function(u){var o=u.K();if(o==1736)return o=new h.Ua(u.description),u.B()||u.YC(o),o;if(o==1607)return w.mE(u,!1,null);if(o==197)return o=new h.Ua(u.description),u.B()||o.bd(u,!1),o;if(h.ba.zd(o)){if(o=new h.de(u.description),!u.B()&&!u.vG()){var r=new h.Ta;u.Uo(r),o.add(r),u.Qo(r),o.add(r)}return o}if(h.ba.Sn(o))return null;throw h.i.O()},w.mE=function(u,o,r){r!=null&&(r[0]=!1);var n=null;if(o||(n=new h.de(u.description)),!u.B()){var a=new h.ja(0);a.Jb(2*u.ea());for(var c=0,p=u.ea();c<p;c++)if(0<u.Ka(c)&&!u.On(c)){var f=u.Ca(c);a.add(f),f=u.Wc(c)-1,a.add(f)}if(0<a.size){p=new h.Zt,c=u.vb(0),p.sort(a,0,a.size,new A(c)),p=new h.h,c.uc(2*a.get(0),p),f=0;for(var m=1,b=new h.Ta,S=new h.h,M=1,T=a.size;M<T;M++)if(c.uc(2*a.get(M),S),S.rb(p))a.get(f)>a.get(M)?(a.set(f,2147483647),f=M):a.set(M,2147483647),m++;else{if((1&m)==0)a.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;p.N(S),f=M,m=1}if((1&m)==0)a.set(f,2147483647);else if(o)return r!=null&&(r[0]=!0),null;if(!o)for(a.Wd(0,a.size,function(k,C){return k-C}),M=0,T=a.size;M<T&&a.get(M)!=2147483647;M++)u.we(a.get(M),b),n.add(b)}}return o?null:n},w}()}(q||(q={})),function(h){var A=function(){function w(){this.zf=new h.ja(0),this.As=new h.ja(0),this.yH=1,this.Gs=NaN}return w.prototype.sort=function(u,o,r,n){if(32>r-o)n.qr(o,r,u);else{var a=!0;try{for(var c=1/0,p=-1/0,f=o;f<r;f++){var m=n.bq(u.get(f));m<c&&(c=m),m>p&&(p=m)}if(this.reset(r-o,c,p,r-o)){for(f=o;f<r;f++){var b=u.get(f);m=n.bq(b);var S=this.tF(m);this.zf.set(S,this.zf.get(S)+1),this.As.write(f-o,b)}var M=this.zf.get(0);this.zf.set(0,0),f=1;for(var T=this.zf.size;f<T;f++){var k=this.zf.get(f);this.zf.set(f,M),M+=k}for(f=o;f<r;f++){b=this.As.read(f-o),m=n.bq(b),S=this.tF(m);var C=this.zf.get(S);u.set(C+o,b),this.zf.set(S,C+1)}a=!1}}catch{this.zf.resize(0),this.As.resize(0)}if(a)n.qr(o,r,u);else{for(f=r=0,T=this.zf.size;f<T;f++)a=r,(r=this.zf.get(f))>a&&n.qr(o+a,o+r,u);100<this.zf.size&&(this.zf.resize(0),this.As.resize(0))}}},w.prototype.reset=function(u,o,r,n){return!(2>u||r==o)&&(u=Math.min(w.bL,u),this.zf.Jb(u),this.zf.resize(u),this.zf.Yj(0,0,this.zf.size),this.yH=o,this.As.resize(n),this.Gs=(r-o)/(u-1),!0)},w.prototype.tF=function(u){return h.P.truncate((u-this.yH)/this.Gs)},w.bL=65536,w}();h.Zt=A}(q||(q={})),function(h){var A,w;(w=A||(A={}))[w.enum_line=1]="enum_line",w[w.enum_arc=2]="enum_arc",w[w.enum_dummy=4]="enum_dummy",w[w.enum_concave_dip=8]="enum_concave_dip",w[w.enum_connection=3]="enum_connection";var u=function(){function c(){}return c.Su=function(p,f,m,b,S,M){var T=new c;return T.Km=new h.h,T.Xm=new h.h,T.cw=new h.h,T.Km.N(p),T.Xm.N(f),T.cw.N(m),T.Do=b,T.sh=S,T.uh=M,T},c.construct=function(p,f,m,b){var S=new c;return S.Km=new h.h,S.Xm=new h.h,S.cw=new h.h,S.Km.N(p),S.Xm.N(f),S.cw.Sc(),S.Do=4,S.sh=m,S.uh=b,S},c}(),o=function(){function c(p,f,m,b,S,M){this.$v=null,this.za=0,this.yA=p,this.WH=this.UH=0,this.La=f,this.Oj=m,this.wk=b,this.Fq=S,this.Vb=M}return c.prototype.next=function(){for(var p=new h.Ta;;){if(this.za==this.yA.I())return null;if(this.yA.we(this.za,p),this.za++,!p.B())break}var f=!1;if(this.$v==null&&(this.UH=p.Ng(),this.WH=p.kh(),this.$v=a.buffer(p,this.La,this.Oj,this.wk,this.Fq,this.Vb),f=!0),this.za<this.yA.I()){var m=new h.Ea;this.$v.copyTo(m)}else m=this.$v;if(!f){f=new h.Ed;var b=p.Ng()-this.UH;p=p.kh()-this.WH,f.gg(b,p),m.Pc(f)}return m},c.prototype.Ma=function(){return 0},c.prototype.qe=function(){},c}(),r=function(){function c(p,f){this.Xa=p,this.za=0,this.qq=f}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;if(this.za++,!p.On(f))for(var m=p.Oa(p.Wc(f)-1);this.za<p.ea();){var b=p.Oa(p.Ca(this.za));if(p.On(this.za)||b!=m)break;m=p.Oa(p.Wc(this.za)-1),this.za++}if(this.za-f==1)return this.Xa.eE(this.Xa.Y,f,this.qq);for((m=new h.Ua(this.Xa.Y.description)).addPath(this.Xa.Y,f,!0),f+=1;f<this.za;f++)m.Fr(this.Xa.Y,f,0,p.tv(f),!1);return this.Xa.eE(m,0,this.qq)}return null},c.prototype.Ma=function(){return 0},c.prototype.qe=function(){},c}(),n=function(){function c(p){this.Xa=p,this.za=0}return c.prototype.next=function(){var p=this.Xa.Y;if(this.za<p.ea()){var f=this.za;for(p.Kr(this.za),this.za++;this.za<p.ea()&&!(0<p.Kr(this.za));)this.za++;return f==0&&this.za==p.ea()?this.Xa.ly(p,0,p.ea()):this.Xa.ly(p,f,this.za)}return null},c.prototype.Ma=function(){return 0},c.prototype.qe=function(){},c}(),a=function(){function c(p){this.Ms=this.nw=this.Ns=this.Jd=null,this.$d=[],this.Vb=p,this.sb=this.Mv=this.BT=this.La=this.nA=this.dt=this.ra=0,this.iA=this.wk=-1,this.qq=!0}return c.buffer=function(p,f,m,b,S,M){if(p==null||0>b)throw h.i.O();if(p.B())return new h.Ea(p.description);var T=new h.l;return p.yc(T),0<f&&T.X(f,f),(M=new c(M)).Oj=m,M.Y=p,M.ra=h.ta.Xd(m,T,!0),M.dt=h.ta.Xd(null,T,!0),M.La=f,M.BT=p.K(),0>=S&&(S=96),M.sb=Math.abs(M.La),M.Mv=M.sb!=0?1/M.sb:0,isNaN(b)||b==0?b=1e-5*M.sb:b>.5*M.sb&&(b=.5*M.sb),12>S&&(S=12),(p=Math.abs(f)*(1-Math.cos(Math.PI/S)))>b?b=p:(p=Math.PI/Math.acos(1-b/Math.abs(f)))<S-1&&12>(S=h.P.truncate(p))&&(S=12,b=Math.abs(f)*(1-Math.cos(Math.PI/S))),M.wk=b,M.Fq=S,M.nA=Math.min(M.dt,.25*b),M.fE()},c.prototype.ev=function(){if(this.Jd==null)this.Jd=[];else if(this.Jd.length!==0)return;var p=this.kE();p=h.P.truncate((p+3)/4);var f=.5*Math.PI/p;this.iA=f;for(var m=0;m<4*p;m++)this.Jd.push(null);var b=Math.cos(f);f=Math.sin(f);var S=h.h.construct(0,1);for(m=0;m<p;m++)this.Jd[m+0*p]=h.h.construct(S.y,-S.x),this.Jd[m+1*p]=h.h.construct(-S.x,-S.y),this.Jd[m+2*p]=h.h.construct(-S.y,S.x),this.Jd[m+3*p]=S,(S=h.h.construct(S.x,S.y)).Ct(b,f)},c.prototype.fE=function(){var p=this.Y.K();if(h.ba.zd(p))return(p=new h.Ua(this.Y.description)).oc(this.Y,!0),this.Y=p,this.fE();if(this.La<=this.ra){if(!h.ba.MS(p))return new h.Ea(this.Y.description);if(0>=this.La&&(p=new h.l,this.Y.A(p),p.S()<=2*-this.La||p.da()<=2*this.La))return new h.Ea(this.Y.description)}switch(this.Y.K()){case 33:return this.JN();case 550:return this.IN();case 1607:return this.LN();case 1736:return this.KN();case 197:return this.FN();default:throw h.i.Ra()}},c.prototype.LN=function(){if(this.yG(this.Y)){var p=new h.Ta;this.Y.we(0,p);var f=new h.l;return this.Y.A(f),p.Db(f.tf()),this.Iu(p)}return this.Y=this.OV(this.Y),p=new r(this,this.qq),h.Ih.local().W(p,this.Oj,this.Vb).next()},c.prototype.KN=function(){if(this.La==0)return this.Y;var p=h.$l.local();if(this.ev(),this.Y=p.W(this.Y,null,!1,this.Vb),0>this.La){var f=this.Y;return f=this.ly(f,0,f.ea()),p.W(f,this.Oj,!1,this.Vb)}return this.yG(this.Y)?(p=new h.Ta,this.Y.we(0,p),f=new h.l,this.Y.A(f),p.Db(f.tf()),this.Iu(p)):(p=new n(this),h.Ih.local().W(p,this.Oj,this.Vb).next())},c.prototype.ly=function(p,f,m){for(var b=new h.Ea(p.description);f<m;f++)if(!(1>p.Ka(f))){var S=p.Kr(f),M=new h.l;if(p.Tj(f,M),0<this.La){if(0<S)if(this.zG(p,f))S=new h.Ta,p.we(p.Ca(f),S),S.Db(M.tf()),this.Au(b,S);else{var T=S=new h.Ua(p.description);T=h.au.DG(this.Y,f)||this.An(this.Y,f,T,!0,1)==2?this.dE(p,f):this.zn(S),b.add(T,!1)}else if(!(M.S()+this.ra<=2*this.sb||M.da()+this.ra<=2*this.sb||(T=S=new h.Ua(p.description),this.An(this.Y,f,T,!0,1),S.B()))){var k=new h.l;for(k.L(M),k.X(this.sb,this.sb),T.vp(k),M=1,S=(T=this.zn(S)).ea();M<S;M++)b.addPath(T,M,!0)}}else if(0<S){if(!(M.S()+this.ra<=2*this.sb||M.da()+this.ra<=2*this.sb||(T=S=new h.Ua(p.description),this.An(this.Y,f,T,!0,-1),S.B())))for(k=new h.l,T.yc(k),k.X(this.sb,this.sb),T.vp(k),M=1,S=(T=this.zn(S)).ea();M<S;M++)b.addPath(T,M,!0)}else for(T=S=new h.Ua(p.description),this.An(this.Y,f,T,!0,-1),M=0,S=(T=this.zn(S)).ea();M<S;M++)b.addPath(T,M,!0)}if(0<this.La)return 1<b.ea()?b=this.zn(b):c.kx(b);if(p=new h.l,b.yc(p),b.B())return c.kx(b);for(p.X(this.sb,this.sb),b.vp(p),b=this.zn(b),p=new h.Ea(b.description),M=1,S=b.ea();M<S;M++)p.addPath(b,M,!1);return c.kx(p)},c.prototype.JN=function(){return this.Iu(this.Y)},c.prototype.Iu=function(p){var f=new h.Ea(this.Y.description);return this.Au(f,p),this.kX(f)},c.prototype.IN=function(){var p=new o(this.Y,this.La,this.Oj,this.wk,this.Fq,this.Vb);return h.Ih.local().W(p,this.Oj,this.Vb).next()},c.prototype.FN=function(){var p=new h.Ea(this.Y.description);if(0>=this.La){if(this.La==0)p.bd(this.Y,!1);else{var f=new h.Hh;this.Y.dn(f),f.X(this.La,this.La),p.bd(f,!1)}return p}return p.bd(this.Y,!1),this.Y=p,this.dE(p,0)},c.prototype.dE=function(p,f){this.ev();var m=new h.Ea(p.description),b=new h.h,S=new h.h,M=new h.h,T=new h.h,k=new h.h,C=new h.h,N=new h.h,F=new h.h,D=p.Ka(f),j=p.Ca(f),G=0;for(f=p.Ka(f);G<f;G++){if(p.D(j+G,S),p.D(j+(G+1)%D,T),p.D(j+(G+2)%D,C),N.vc(T,S),N.length()==0||(N.Jv(),N.normalize(),N.scale(this.sb),b.add(N,S),M.add(N,T),G==0?m.Nt(b):m.Ei(b),m.Ei(M),F.vc(C,T),F.length()==0))throw h.i.Ra();F.Jv(),F.normalize(),F.scale(this.sb),k.add(F,T),this.AD(m,T,M,k,!1)}return c.kx(m)},c.prototype.eE=function(p,f,m){if(this.ev(),1>p.Ka(f))return null;if(this.zG(p,f)&&0<this.La){m=new h.Ta,p.we(p.Ca(f),m);var b=new h.l;return p.Tj(f,b),m.Db(b.tf()),this.Iu(m)}if(b=new h.Ua(p.description),p.On(f))this.An(p,f,b,m,1),this.An(p,f,b,m,-1);else{var S=new h.Ua(p.description);S.addPath(p,f,!1),S.Fr(p,f,0,p.tv(f),!1),this.An(S,0,b,m,1)}return this.zn(b)},c.prototype.Zq=function(){if(this.$s++,this.$s%1024==0&&this.Vb!=null&&!this.Vb.progress(-1,-1))throw h.i.hu("user_canceled")},c.prototype.zn=function(p){return h.Hg.Nk(p,this.dt,!0,!0,this.Vb)},c.prototype.kE=function(){if(this.wk==0)return this.Fq;var p=1-this.wk*Math.abs(this.Mv);return 4>(p=-1>p?4:2*Math.PI/Math.acos(p)+.5)?p=4:p>this.Fq&&(p=this.Fq),h.P.truncate(p)},c.prototype.AD=function(p,f,m,b,S){this.ev();var M=new h.h;M.vc(m,f),M.scale(this.Mv);var T=new h.h;T.vc(b,f),T.scale(this.Mv),0>(M=Math.atan2(M.y,M.x)/this.iA)&&(M=this.Jd.length+M),M=this.Jd.length-M,0>(T=Math.atan2(T.y,T.x)/this.iA)&&(T=this.Jd.length+T),(T=this.Jd.length-T)<M&&(T+=this.Jd.length);var k=h.P.truncate(T);T=h.P.truncate(Math.ceil(M)),(M=new h.h).N(this.Jd[T%this.Jd.length]),M.Dt(this.sb,f);var C=10*this.ra;for(M.sub(m),M.length()<C&&(T+=1),M.N(this.Jd[k%this.Jd.length]),M.Dt(this.sb,f),M.sub(b),M.length()<C&&--k,m=k-T,m++,k=0,T%=this.Jd.length;k<m;k++,T=(T+1)%this.Jd.length)M.N(this.Jd[T]),M.Dt(this.sb,f),p.Ei(M),this.Zq();S&&p.Ei(b)},c.prototype.An=function(p,f,m,b,S){var M=new h.hd,T=M.gN(p,f);if(M.Ip(this.nA,!1,!1),2>M.I(T))return 0>S||(S=p,M=new h.Ta,S.we(S.Ca(f),M),this.Au(m,M)),1;var k=M.Oa(M.Ya(M.Ob(T))),C=new h.Ed;if(C.gg(-k.x,-k.y),M.Pc(C),b&&(this.nQ(M,T,S),2>M.I(T)))return 0>S||(S=p,M=new h.Ta,S.we(S.Ca(f),M),this.Au(m,M)),1;this.$d.length=0;var N=M.Ob(T);f=M.Ya(N);var F=S==1?M.Na(f):M.V(f);p=S==1?M.V(f):M.Na(f);var D=!0;b=new h.h,T=new h.h;var j=new h.h,G=new h.h,W=new h.h,J=new h.h,B=new h.h,Q=new h.h,ue=new h.h,ge=new h.h,ye=this.sb;N=M.Ka(N);for(var de=0;de<N;de++)M.D(p,T),D&&(M.D(f,b),M.D(F,j),Q.vc(b,j),Q.normalize(),ge.GG(Q),ge.scale(ye),G.add(ge,b)),B.vc(T,b),B.normalize(),ue.GG(B),ue.scale(ye),W.add(b,ue),F=Q.yi(B),D=Q.Sh(B),0>F||0>D&&F==0?this.$d.push(u.Su(G,W,b,2,this.$d.length+1,this.$d.length-1)):G.rb(W)||(this.$d.push(u.construct(G,b,this.$d.length+1,this.$d.length-1,"dummy")),this.$d.push(u.construct(b,W,this.$d.length+1,this.$d.length-1,"dummy"))),J.add(T,ue),this.$d.push(u.Su(W,J,b,1,this.$d.length+1,this.$d.length-1)),G.N(J),ge.N(ue),j.N(b),b.N(T),Q.N(B),F=f,f=p,D=!1,p=S==1?M.V(f):M.Na(f);return this.$d[this.$d.length-1].sh=0,this.$d[0].uh=this.$d.length-1,this.QV(m),C.gg(k.x,k.y),m.SD(C,m.ea()-1),1},c.prototype.QV=function(p){for(var f=this.tO(),m=!0,b=f+1,S=f;b!=f;S=b){var M=this.$d[S];b=M.sh!=-1?M.sh:(S+1)%this.$d.length,M.Do!=0&&(m&&p.Nt(M.Km),M.Do==2?this.AD(p,M.cw,M.Km,M.Xm,!0):p.Ei(M.Xm),m=!1)}},c.prototype.tO=function(){this.Ms==null&&(this.Ms=[null,null,null,null,null,null,null,null,null]);for(var p=0,f=0,m=this.$d.length;f<m;){var b=this.$d[f];if((3&b.Do)!=0){p=f;break}f=b.sh}for(m=p+1,f=p;m!=p;f=m){m=(b=this.$d[f]).sh;for(var S=1,M=null;m!=f&&(3&(M=this.$d[m]).Do)==0;)m=M.sh,S++;S!=1&&(b.Do&M.Do)==1&&(this.Ns==null&&(this.Ns=new h.zb,this.nw=new h.zb),this.Ns.Ec(b.Km),this.Ns.Rc(b.Xm),this.nw.Ec(M.Km),this.nw.Rc(M.Xm),this.Ns.Fa(this.nw,this.Ms,null,null,this.dt)==1&&(b.Xm.N(this.Ms[0]),M.Km.N(this.Ms[0]),b.sh=m,M.uh=f))}return p},c.prototype.Hv=function(p,f,m){var b=new h.h;if(b.vc(m,p),m=b.length(),0<(m=this.sb*this.sb-m*m*.25)){m=Math.sqrt(m),b.normalize(),b.cr();var S=new h.h;if(S.vc(f,p),S.Sh(b)+m>=this.sb)return!0}return!1},c.prototype.nQ=function(p,f,m){for(var b=0;1>b;b++){var S=!1,M=p.Ob(f),T=p.Ka(M);if(T==0)break;var k=T;if(3>T)break;!p.ec(M)&&(k=T-1),M=p.Ya(M),T=0<m?p.Na(M):p.V(M);for(var C=0<m?p.V(M):p.Na(M),N=T,F=!0,D=new h.h,j=new h.h,G=new h.h,W=new h.h,J=new h.h,B=h.h.construct(0,0),Q=new h.h,ue=new h.h,ge=new h.h,ye=new h.h,de=this.sb,we=0,je=0;je<k&&(p.D(C,j),F&&(p.D(M,D),p.D(T,G),N=T),ue.vc(D,G),ue.normalize(),Q.vc(j,D),Q.normalize(),N!=C);){var Ve=ue.yi(Q),pt=ue.Sh(Q),dt=!0;if(0>Ve||0>pt&&Ve==0||!this.Hv(G,D,j)||(B.N(j),dt=!1,++we,S=!0),dt){if(0<we)for(;(Ve=0<m?p.Na(N):p.V(N))!=M;){if(p.D(Ve,W),!this.Hv(W,G,B)){Ve!=C&&this.Hv(W,G,j)&&this.Hv(W,D,j)&&(G.N(W),N=Ve,dt=!1,++we);break}G.N(W),N=Ve,dt=!1,++we}if(!dt)continue;if(0<we){for(N=0<m?p.Na(T):p.V(T),F=1;F<we;F++)dt=0<m?p.Na(N):p.V(N),p.pd(N,!0),N=dt;ge.vc(D,G),we=de*de-(we=ge.length())*we*.25,de-(we=Math.sqrt(we))>.5*this.wk?(J.add(G,D),J.scale(.5),ge.normalize(),ge.cr(),ye.N(ge),ye.scale(de-we),J.add(ye),p.mf(T,J)):p.pd(T,!0),we=0}G.N(D),N=M}D.N(j),T=M,M=C,C=0<m?p.V(M):p.Na(M),je++,F=!1}if(0<we){for(N=0<m?p.Na(T):p.V(T),F=1;F<we;F++)dt=0<m?p.Na(N):p.V(N),p.pd(N,!0),N=dt;J.add(G,D),J.scale(.5),ge.vc(D,G),we=de*de-(we=ge.length())*we*.25,we=Math.sqrt(we),ge.normalize(),ge.cr(),ye.N(ge),ye.scale(de-we),J.add(ye),p.mf(T,J)}if(p.Ip(this.nA,!1,!1),!S)break}},c.prototype.zG=function(p,f){if(p.Ka(f)==1)return!0;var m=new h.l;return p.Tj(f,m),Math.max(m.S(),m.da())<.5*this.wk},c.prototype.yG=function(p){var f=new h.l;return p.A(f),Math.max(f.S(),f.da())<.5*this.wk},c.prototype.OV=function(p){for(var f=0,m=0,b=(p=h.yC.local().W(p,.25*this.wk,!1,this.Vb)).ea();m<b;m++)f=Math.max(p.Ka(m),f);return 32>f?(this.qq=!1,p):(this.qq=!0,h.Hg.Nk(p,this.dt,!1,!0,this.Vb))},c.prototype.Au=function(p,f){if(f=f.D(),this.Jd!=null&&this.Jd.length!==0){var m=new h.h;m.N(this.Jd[0]),m.Dt(this.sb,f),p.Nt(m);for(var b=1,S=this.Jd.length;b<S;b++)m.N(this.Jd[b]),m.Dt(this.sb,f),p.Ei(m)}else{b=this.kE(),m=h.P.truncate((b+3)/4),b=.5*Math.PI/m,S=Math.cos(b);for(var M=Math.sin(b),T=new h.h,k=3;0<=k;k--){switch(T.na(0,this.sb),k){case 0:for(b=0;b<m;b++)p.Aj(T.x+f.x,T.y+f.y),T.Ct(S,M);break;case 1:for(b=0;b<m;b++)p.Aj(-T.y+f.x,T.x+f.y),T.Ct(S,M);break;case 2:for(b=0;b<m;b++)p.Aj(-T.x+f.x,-T.y+f.y),T.Ct(S,M);break;default:for(p.rx(T.y+f.x,-T.x+f.y),b=1;b<m;b++)T.Ct(S,M),p.Aj(T.y+f.x,-T.x+f.y)}this.Zq()}}},c.kx=function(p){return p.Eh(1,0),p},c.prototype.kX=function(p){return p.Eh(2,this.ra),p.hm(),p},c}();h.BK=a}(q||(q={})),function(h){var A=function(){function w(u){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0)}return w.prototype.Nh=function(u,o,r){switch(o){case 0:if(u.v<r&&u.C<=r)break;return u.v>=r?1:-1;case 1:if(u.G<r&&u.H<=r)break;return u.G>=r?1:-1;case 2:if(u.v>=r&&u.C>r)break;return u.C<=r?1:-1;case 3:if(!(u.G>=r&&u.H>r))return u.H<=r?1:-1}return 0},w.prototype.vy=function(u,o){return u.K()==1736?this.xy(u,o):this.yy(u)},w.prototype.xy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var r=new h.l;u.yc(r),this.Y=this.g.Ib(u);var n=new h.l,a=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0];new h.hg;var b=new h.zb,S=new h.ja(0);S.Jb(Math.min(100,u.I()));for(var M=!1,T=0;!M&&4>T;T++){var k=!1,C=(1&T)!=0,N=0;switch(T){case 0:N=this.Da.v,k=r.v<=N&&r.C>=N;break;case 1:N=this.Da.G,k=r.G<=N&&r.H>=N;break;case 2:N=this.Da.C,k=r.v<=N&&r.C>=N;break;case 3:N=this.Da.H,k=r.G<=N&&r.H>=N}if(k)for(M=!0,k=this.g.Ob(this.Y);k!=-1;){var F=-1,D=-1,j=this.g.Ya(k),G=j;do{var W=this.g.cc(G);W==null&&(W=b,this.g.D(G,c),W.Ec(c),this.g.D(this.g.V(G),p),W.Rc(p)),W.A(n);var J=this.Nh(n,T,N),B=0,Q=-1;if(J==-1){B=0<(W=W.fq(C,N,f,m))?this.g.Wl(G,m,W):0,B+=1;var ue=G,ge=this.g.V(ue);for(W=0;W<B;W++){if(this.g.D(ue,c),this.g.D(ge,p),(Q=this.g.cc(ue))==null&&((Q=b).Ec(c),Q.Rc(p)),Q.A(a),(Q=this.Nh(a,T,N))==-1){if(C)(Q=Math.abs(c.y-N))<(ye=Math.abs(p.y-N))?(c.y=N,this.g.mf(ue,c)):(p.y=N,this.g.mf(ge,p));else{Q=Math.abs(c.x-N);var ye=Math.abs(p.x-N);Q<ye?(c.x=N,this.g.mf(ue,c)):(p.x=N,this.g.mf(ge,p))}(Q=this.g.cc(ue))==null&&((Q=b).Ec(c),Q.Rc(p)),Q.A(a),Q=this.Nh(a,T,N)}ye=F,F=Q,D==-1&&(D=F),ye==0&&F==1||ye==1&&F==0||ye!=0||F!=0||S.add(ue),F==1&&(M=!1),Q=ue=ge,ge=this.g.V(ge)}}B==0&&(ye=F,F=J,D==-1&&(D=F),ye==0&&F==1||ye==1&&F==0||ye!=0||F!=0||S.add(G),F==1&&(M=!1),Q=this.g.V(G)),G=Q}while(G!=j);for(D==0&&F==0&&S.add(j),W=0,F=S.size;W<F;W++)D=S.get(W),this.g.pd(D,!1);S.clear(!1),k=3>this.g.Ka(k)?this.g.ar(k):this.g.Sb(k)}}return M?u.Ja():(this.zB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},w.prototype.yy=function(u){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],c=new h.hg,p=u,f=new h.l;u.yc(f);for(var m=0;4>m;m++){var b=!1,S=(1&m)!=0,M=0;switch(m){case 0:M=this.Da.v,b=f.v<=M&&f.C>=M;break;case 1:M=this.Da.G,b=f.G<=M&&f.H>=M;break;case 2:M=this.Da.C,b=f.v<=M&&f.C>=M;break;case 3:M=this.Da.H,b=f.G<=M&&f.H>=M}if(b){b=p,p=u.Ja(),(b=b.Ha()).aj();for(var T,k=new h.h;b.ab();)for(var C,N=!0;b.Ia();){var F=b.ia();F.A(o);var D=this.Nh(o,m,M);if(D==-1){if(0<(D=F.fq(S,M,n,a))){var j=0;T=F.ac();for(var G=0;G<=D;G++)if(j!=(C=G<D?a[G]:1)){F.dh(j,C,c);var W=c.get();W.Ec(T),G<D&&(S?(k.x=n[G],k.y=M):(k.x=M,k.y=n[G]),W.Rc(k)),W.A(r);var J=this.Nh(r,m,M);if(J==-1){if(T=W.ac(),j=W.xc(),S)(J=Math.abs(T.y-M))<(B=Math.abs(j.y-M))?(T.y=M,W.Ec(T)):(j.y=M,W.Rc(j));else{J=Math.abs(T.x-M);var B=Math.abs(j.x-M);J<B?(T.x=M,W.Ec(T)):(j.x=M,W.Rc(j))}W.A(r),J=this.Nh(r,m,M)}T=W.xc(),j=C,(C=J)==1?(p.oc(W,N),N=!1):N=!0}}}else(C=D)==1?(p.oc(F,N),N=!1):N=!0}}}return p},w.prototype.zB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var r=this.g.Ya(o),n=0,a=this.g.Ka(o);n<a;n++,r=this.g.V(r))this.g.D(r,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(r,this.li,this.ed.size),this.ed.add(r));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(u){for(var o=new h.h,r=new h.h,n=h.P.lg(2048,0),a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a)){var c=this.g.Ya(a),p=c;do{var f=this.g.V(p);this.g.D(p,o);var m=-1;if(o.x==this.Da.v?(this.g.D(f,r),r.x==this.Da.v&&(m=1)):o.x==this.Da.C&&(this.g.D(f,r),r.x==this.Da.C&&(m=1)),o.y==this.Da.G?(this.g.D(f,r),r.y==this.Da.G&&(m=0)):o.y==this.Da.H&&(this.g.D(f,r),r.y==this.Da.H&&(m=0)),m!=-1&&(m=h.h.ub(o,r),!(1>=(m=h.P.truncate(Math.min(Math.ceil(m/u),2048)))))){for(var b=1;b<m;b++)n[b-1]=1*b/m;this.g.Wl(p,n,m-1)}p=f}while(p!=c)}},w.prototype.Xl=function(u,o){var r=this.g.Hd(),n=new h.h,a=new h.ja(0);a.Jb(100);for(var c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,m=this.g.Ka(c);f<m;f++){var b=this.g.V(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(b,n),(u?n.y==o:n.x==o)&&(this.g.Qa(p,r)!=1&&(a.add(p),this.g.Sa(p,r,1)),this.g.Qa(b,r)!=1&&(a.add(b),this.g.Sa(b,r,1)))),p=b}if(this.g.Ud(r),!(3>a.size)){var S=this;a.Wd(0,a.size,function(J,B){return S.Oh(J,B)}),r=new h.h,c=new h.h,p=new h.h,c.Sc();var M=-1;f=new h.ja(0),m=new h.ja(0),b=this.g.Hd();for(var T=this.g.Hd(),k=0,C=a.size;k<C;k++){var N=a.get(k);if(this.g.D(N,n),!n.rb(c)){if(M!=-1){for(var F=M;F<k;F++){M=a.get(F);var D=this.g.V(M);N=this.g.Na(M);var j=!1;0>this.Oh(M,D)&&(this.g.D(D,r),u?r.y==o:r.x==o)&&(f.add(M),j=!0,this.g.Sa(M,T,1)),0>this.Oh(M,N)&&(this.g.D(N,r),u?r.y==o:r.x==o)&&(j||f.add(M),this.g.Sa(M,b,1))}for(F=0,j=f.size;F<j;F++){if(M=f.get(F),N=this.g.Qa(M,b),D=this.g.Qa(M,T),N==1){N=this.g.Na(M),this.g.D(N,p);var G=[0];if(G[0]=0,!p.rb(n)){var W=h.h.ub(c,p);G[0]=h.h.ub(p,n)/W,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(N,G,1),N=this.g.Na(M),this.g.mf(N,n),m.add(N),this.g.Sa(N,b,1),this.g.Sa(N,T,-1)}}D==1&&(D=this.g.V(M),this.g.D(D,p),(G=[0])[0]=0,p.rb(n)||(W=h.h.ub(c,p),G[0]=h.h.ub(c,n)/W,G[0]==0?G[0]=2220446049250313e-31:G[0]==1&&(G[0]=.9999999999999998),this.g.Wl(M,G,1),N=this.g.V(M),this.g.mf(N,n),m.add(N),this.g.Sa(N,b,-1),this.g.Sa(N,T,1)))}M=f,f=m,(m=M).clear(!1)}M=k,c.N(n)}}this.g.Ud(b),this.g.Ud(T)}},w.prototype.Pl=function(u,o){var r=new h.h,n=new h.ja(0);n.Jb(100);for(var a=this.g.Hd(),c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var m=this.g.V(f);this.g.D(f,r),(u?r.y==o:r.x==o)&&(this.g.D(m,r),(u?r.y==o:r.x==o)&&(this.g.Qa(f,a)!=-2&&(n.add(f),this.g.Sa(f,a,-2)),this.g.Qa(m,a)!=-2&&(n.add(m),this.g.Sa(m,a,-2))))}}if(n.size!=0){var b=this;for(n.Wd(0,n.size,function(B,Q){return b.Oh(B,Q)}),c=0,p=n.size;c<p;c++){var S=n.get(c);this.g.Sa(S,a,c)}f=new h.h,(m=new h.h).Sc();var M=-1;for(c=0,p=n.size;c<p;c++)if((S=n.get(c))!=-1&&(this.g.D(S,r),!r.rb(m))){if(M!=-1)for(;;){S=!1;for(var T=1<c-M?c-1:c,k=M;k<T;k++){var C=n.get(k);if(C!=-1){var N=-1,F=this.g.V(C);0>this.Oh(C,F)&&(this.g.D(F,f),u?f.y==o:f.x==o)&&(N=F),F=-1;var D=this.g.Na(C);if(0>this.Oh(C,D)&&(this.g.D(D,f),u?f.y==o:f.x==o)&&(F=D),N!=-1&&F!=-1)this.Mh(C,n,a),this.g.pd(C,!1),this.Mh(N,n,a),this.g.pd(N,!1),S=!0;else if(N!=-1||F!=-1){for(D=k+1;D<c;D++){var j=n.get(D);if(j!=-1){var G=this.g.V(j),W=-1;0>this.Oh(j,G)&&(this.g.D(G,f),u?f.y==o:f.x==o)&&(W=G),G=this.g.Na(j);var J=-1;if(0>this.Oh(j,G)&&(this.g.D(G,f),u?f.y==o:f.x==o)&&(J=G),W!=-1&&J!=-1){this.Mh(j,n,a),this.g.pd(j,!1),this.Mh(W,n,a),this.g.pd(W,!1),S=!0;break}if(N!=-1&&J!=-1){this.At(n,C,N,j,J,a),S=!0;break}if(F!=-1&&W!=-1){this.At(n,j,W,C,F,a),S=!0;break}}}if(S)break}}}if(!S)break}M=c,m.N(r)}}this.g.Ud(a)},w.prototype.Mh=function(u,o,r){r=this.g.Qa(u,r),o.set(r,-1),r=this.g.Qa(u,this.li),this.ed.set(r,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},w.prototype.At=function(u,o,r,n,a,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(r,a),this.g.Cc(a,r),this.Mh(n,u,c),this.g.oi(n,!1),this.Mh(a,u,c),this.g.oi(a,!0)},w.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var r=this.ed.get(u);r!=-1&&this.g.cj(r,-1)}for(var n=0,a=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{r=p,f=0;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.pd(p,!1),f==2&&(r=this.g.Qa(p,this.li),this.ed.set(r,-1),this.g.pd(p,!1)),f=c,c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)):(this.g.ep(c,!1),this.g.Yg(c,this.g.Na(p)),this.g.Xj(c,f),a+=f,n++,c=this.g.Sb(c))}}for(u=0,o=this.ed.size;u<o;u++)if((r=this.ed.get(u))!=-1&&(c=this.g.cd(r))==-1){c=this.g.wf(this.Y,-1),f=0,p=r;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.pd(p,!1),f==2&&(0<=(r=this.g.Qa(p,this.li))&&this.ed.set(r,-1),this.g.pd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,p),this.g.Yg(c,this.g.Na(p)),this.g.ep(c,!1),a+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,a),u=0,o=this.g.ld;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.WB(u)},w.wy=function(u,o,r){return new w(o).vy(u,r)},w.clip=function(u,o,r,n){if(u.B())return u;if(o.B())return u.Ja();if((r=u.K())==33)return n=u.D(),o.contains(n)?u:u.Ja();if(r==197)return n=new h.l,u.A(n),n.Fa(o)?(o=new h.Hh,u.copyTo(o),o.Yo(n),o):u.Ja();var a=new h.l;if(u.yc(a),o.contains(a))return u;if(!o.isIntersecting(a))return u.Ja();if((a=u.Cb)!=null&&(a=a.Gk)!=null){if((a=a.So(o))==1){if(r!=1736)throw h.i.Ra();return(u=new h.Ea(u.description)).vp(o),u}if(a==0)return u.Ja()}switch(r){case 550:r=null,a=u.I();for(var c=u.vb(0),p=0,f=0;f<a;f++)n=new h.h,c.uc(2*f,n),o.contains(n)||(p==0&&(r=u.Ja()),p<f&&r.Gd(u,p,f),p=f+1);return 0<p&&r.Gd(u,p,a),p==0?u:r;case 1736:case 1607:return w.wy(u,o,n);default:throw h.i.Ra()}},w.prototype.Oh=function(u,o){var r=new h.h;return this.g.D(u,r),u=new h.h,this.g.D(o,u),r.compare(u)},w}();h.Vd=A}(q||(q={})),function(h){var A=function(){function w(u,o){this.Da=u,this.g=new h.hd,this.ed=new h.ja(0),this.nd=o}return w.prototype.Nh=function(u,o,r){switch(o){case 0:if(u.v<r&&u.C<=r)break;return u.v>=r?1:-1;case 1:if(u.G<r&&u.H<=r)break;return u.G>=r?1:-1;case 2:if(u.v>=r&&u.C>r)break;return u.C<=r?1:-1;case 3:if(!(u.G>=r&&u.H>r))return u.H<=r?1:-1}return 0},w.prototype.vy=function(u,o){return u.K()==1736?this.xy(u,o):this.yy(u)},w.prototype.xy=function(u,o){if(this.Da.S()==0||this.Da.da()==0)return u.Ja();var r=new h.l;u.yc(r),this.Y=this.g.Ib(u);var n=new h.l,a=new h.l,c=new h.h,p=new h.h,f=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0],b=new h.zb,S=new h.ja(0);S.Jb(256);for(var M=!1,T=0;!M&&4>T;T++){var k=!1,C=(1&T)!=0,N=0;switch(T){case 0:N=this.Da.v,k=r.v<=N&&r.C>=N;break;case 1:N=this.Da.G,k=r.G<=N&&r.H>=N;break;case 2:N=this.Da.C,k=r.v<=N&&r.C>=N;break;case 3:N=this.Da.H,k=r.G<=N&&r.H>=N}if(k)for(M=!0,k=this.g.Ob(this.Y);k!=-1;){var F=!0,D=-1,j=-1,G=this.g.Ya(k),W=G;do{var J=this.g.cc(W);J==null&&(J=b,this.g.D(W,c),J.Ec(c),this.g.D(this.g.V(W),p),J.Rc(p)),J.A(n);var B=this.Nh(n,T,N),Q=0,ue=-1;if(B==-1){Q=0<(J=J.fq(C,N,f,m))?this.g.DX(W,m,J):0,Q+=1;var ge=W,ye=this.g.V(ge);for(J=0;J<Q;J++){if(this.g.D(ge,c),this.g.D(ye,p),(ue=this.g.cc(ge))==null&&((ue=b).Ec(c),ue.Rc(p)),ue.A(a),(ue=this.Nh(a,T,N))==-1){if(C)(ue=Math.abs(c.y-N))<(de=Math.abs(p.y-N))?(c.y=N,this.g.mf(ge,c)):(p.y=N,this.g.mf(ye,p));else{ue=Math.abs(c.x-N);var de=Math.abs(p.x-N);ue<de?(c.x=N,this.g.mf(ge,c)):(p.x=N,this.g.mf(ye,p))}(ue=this.g.cc(ge))==null&&((ue=b).Ec(c),ue.Rc(p)),ue.A(a),ue=this.Nh(a,T,N)}de=D,D=ue,j==-1&&(j=D),de==0&&D==1||de==1&&D==0||de!=0||D!=0||S.add(ge),D==1&&(F=M=!1),ue=ge=ye,ye=this.g.V(ye)}}if(Q==0&&(de=D,D=B,j==-1&&(j=D),de==0&&D==1||de==1&&D==0||de!=0||D!=0||S.add(W),D==1&&(F=M=!1),ue=this.g.V(W)),W=ue,256<=S.size){for(J=1,B=S.size-1;J<B;J++)Q=S.get(J),this.g.pd(Q,!1);S.set(1,S.Gc()),S.Dh(2)}}while(W!=G);if(!F)for(j==0&&D==0&&S.add(G),J=0,B=S.size;J<B;J++)Q=S.get(J),this.g.pd(Q,!1);S.clear(!1),k=F||this.g.Ka(k)==0?this.g.ar(k):this.g.Sb(k)}}return M?u.Ja():(this.zB(),0<o&&this.Hy(o),this.g.Ke(this.Y))},w.prototype.yy=function(u){var o=new h.l,r=new h.l,n=[0,0,0,0,0,0,0,0,0],a=[0,0,0,0,0,0,0,0,0],c=new h.hg,p=u,f=new h.l;u.yc(f);for(var m=new h.h,b=new h.h,S=null,M=null,T=0;4>T;T++){var k=!1,C=(1&T)!=0,N=0;switch(T){case 0:N=this.Da.v,k=f.v<=N&&f.C>=N;break;case 1:N=this.Da.G,k=f.G<=N&&f.H>=N;break;case 2:N=this.Da.C,k=f.v<=N&&f.C>=N;break;case 3:N=this.Da.H,k=f.G<=N&&f.H>=N}if(k)for(k=p,p=u.Ja(),(k=k.Ha()).aj();k.ab();)for(var F,D=!0;k.Ia();){var j=k.ia();j.A(o);var G=this.Nh(o,T,N);if(G==-1){if(0<(G=j.fq(C,N,n,a))){var W=0;j.$p(m);for(var J=0;J<=G;J++)if(W!=(F=J<G?a[J]:1)){j.dh(W,F,c);var B=c.get();B.Ec(m),J<G&&(C?(b.x=n[J],b.y=N):(b.x=N,b.y=n[J]),B.Rc(b)),B.A(r);var Q=this.Nh(r,T,N);Q==-1&&(S==null&&(S=new h.h),M==null&&(M=new h.h),B.$p(S),B.Vr(M),C?(W=Math.abs(S.y-N))<(Q=Math.abs(M.y-N))?(S.y=N,B.Ec(S)):(M.y=N,B.Rc(M)):(W=Math.abs(S.x-N))<(Q=Math.abs(M.x-N))?(S.x=N,B.Ec(S)):(M.x=N,B.Rc(M)),B.A(r),Q=this.Nh(r,T,N)),B.Vr(m),W=F,(F=Q)==1?(p.oc(B,D),D=!1):D=!0}}}else(F=G)==1?(p.oc(j,D),D=!1):D=!0}}return p},w.prototype.zB=function(){this.li=-1,this.Xl(!1,this.Da.v),this.Xl(!1,this.Da.C),this.Xl(!0,this.Da.G),this.Xl(!0,this.Da.H),this.ed.resize(0),this.ed.Jb(100),this.li=this.g.Hd();for(var u=new h.h,o=this.g.Ob(this.Y);o!=-1;o=this.g.Sb(o))for(var r=this.g.Ya(o),n=0,a=this.g.Ka(o);n<a;n++,r=this.g.V(r))this.g.D(r,u),(this.Da.v==u.x||this.Da.C==u.x||this.Da.G==u.y||this.Da.H==u.y)&&(this.g.Sa(r,this.li,this.ed.size),this.ed.add(r));this.Pl(!1,this.Da.v),this.Pl(!1,this.Da.C),this.Pl(!0,this.Da.G),this.Pl(!0,this.Da.H),this.Oy()},w.prototype.Hy=function(u){for(var o=new h.h,r=new h.h,n=null,a=null,c=h.P.lg(2048,0),p=this.g.Ob(this.Y);p!=-1;p=this.g.Sb(p)){var f=this.g.Ya(p),m=f;do{var b=this.g.V(m);this.g.D(m,o);var S=-1;if(o.x==this.Da.v?(this.g.D(b,r),r.x==this.Da.v&&(S=1)):o.x==this.Da.C&&(this.g.D(b,r),r.x==this.Da.C&&(S=1)),o.y==this.Da.G?(this.g.D(b,r),r.y==this.Da.G&&(S=0)):o.y==this.Da.H&&(this.g.D(b,r),r.y==this.Da.H&&(S=0)),S!=-1){if(n==null&&(n=new h.h),a==null&&(a=new h.h),n.N(o),a.na(0,0),S==0){var M=o.x-this.Da.v;a.x=h.mc.sign(r.x-o.x),n.x=u*h.mc.Dn(Math.floor(Math.abs(M/u)),M)+this.Da.v,0>n.x&&(n.x+=u)}else M=o.y-this.Da.G,a.y=h.mc.sign(r.y-o.y),n.y=u*h.mc.Dn(Math.floor(Math.abs(M/u)),M)+this.Da.G,0>n.y&&(n.y+=u);M=S!=0?r.y-o.y:r.x-o.x;var T=Math.abs(M);if(65536<T/u)throw h.i.ga("internal error");if(0<T){T=h.P.truncate(T/u)+2,c.length<T&&(c=h.P.lg(T));for(var k=T=0;;k++){var C=new h.h;if(C.x=n.x+a.x*k*u,C.y=n.y+a.y*k*u,1<=(C=(S!=0?C.y-o.y:C.x-o.x)/M))break;0>=C||(c[T]=C,T++)}T!=0&&this.g.Wl(m,c,T)}}m=b}while(m!=f)}},w.prototype.Xl=function(u,o){for(var r=-1,n=new h.h,a=null,c=this.g.Ob(this.Y);c!=-1;c=this.g.Sb(c))for(var p=this.g.Ya(c),f=0,m=this.g.Ka(c);f<m;f++){var b=this.g.V(p);this.g.D(p,n),(u?n.y==o:n.x==o)&&(this.g.D(b,n),(u?n.y==o:n.x==o)&&(r==-1&&(r=this.g.Hd()),a==null&&(a=new h.ja(0)).Jb(100),this.g.Qa(p,r)!=1&&(a.add(p),this.g.Sa(p,r,1)),this.g.Qa(b,r)!=1&&(a.add(b),this.g.Sa(b,r,1)))),p=b}if(r!=-1&&this.g.Ud(r),!(a==null||3>a.size)){var S=this;a.Wd(0,a.size,function(J,B){return S.Oh(J,B)}),r=new h.h,c=new h.h,p=new h.h,c.Sc();var M=-1;f=new h.ja(0),m=new h.ja(0),b=null;for(var T=this.g.Hd(),k=this.g.Hd(),C=0,N=a.size;C<N;C++){var F=a.get(C);if(this.g.D(F,n),!n.rb(c)){if(M!=-1){for(var D=M;D<C;D++){M=a.get(D);var j=this.g.V(M);F=this.g.Na(M);var G=!1;this.g.D(j,r),0>c.compare(r)&&(u?r.y==o:r.x==o)&&(f.add(M),G=!0,this.g.Sa(M,k,1)),this.g.D(F,r),0>c.compare(r)&&(u?r.y==o:r.x==o)&&(G||f.add(M),this.g.Sa(M,T,1))}for(D=0,G=f.size;D<G;D++){if(M=f.get(D),F=this.g.Qa(M,T),j=this.g.Qa(M,k),F==1&&(F=this.g.Na(M),this.g.D(F,p),!p.rb(n))){b==null&&(b=[]);var W=h.h.ub(c,p);b[0]=h.h.ub(p,n)/W,b[0]==0?b[0]=2220446049250313e-31:b[0]==1&&(b[0]=.9999999999999998),this.g.Wl(F,b,1),F=this.g.Na(M),this.g.mf(F,n),m.add(F),this.g.Sa(F,T,1),this.g.Sa(F,k,-1)}j==1&&(j=this.g.V(M),this.g.D(j,p),p.rb(n)||(b==null&&(b=[]),W=h.h.ub(c,p),b[0]=h.h.ub(c,n)/W,b[0]==0?b[0]=2220446049250313e-31:b[0]==1&&(b[0]=.9999999999999998),this.g.Wl(M,b,1),F=this.g.V(M),this.g.mf(F,n),m.add(F),this.g.Sa(F,T,-1),this.g.Sa(F,k,1)))}M=f,f=m,(m=M).clear(!1)}M=C,c.N(n)}}this.g.Ud(T),this.g.Ud(k)}},w.prototype.Pl=function(u,o){for(var r=new h.h,n=null,a=-1,c=0,p=this.ed.size;c<p;c++){var f=this.ed.get(c);if(f!=-1){var m=this.g.V(f);this.g.D(f,r),(u?r.y==o:r.x==o)&&(this.g.D(m,r),(u?r.y==o:r.x==o)&&(a==-1&&(a=this.g.Hd()),n==null&&(n=new h.ja(0)).Jb(100),this.g.Qa(f,a)!=-2&&(n.add(f),this.g.Sa(f,a,-2)),this.g.Qa(m,a)!=-2&&(n.add(m),this.g.Sa(m,a,-2))))}}if(n==null)a!=-1&&this.g.Ud(a);else{var b=this;for(n.Wd(0,n.size,function(B,Q){return b.Oh(B,Q)}),c=0,p=n.size;c<p;c++){var S=n.get(c);this.g.Sa(S,a,c)}f=new h.h,(m=new h.h).Sc();var M=-1;for(c=0,p=n.size;c<p;c++)if((S=n.get(c))!=-1&&(this.g.D(S,r),!r.rb(m))){if(M!=-1)for(;;){S=!1;for(var T=1<c-M?c-1:c,k=M;k<T;k++){var C=n.get(k);if(C!=-1){var N=-1,F=this.g.V(C);this.g.D(F,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(N=F),F=-1;var D=this.g.Na(C);if(this.g.D(D,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(F=D),N!=-1&&F!=-1)this.Mh(C,n,a),this.g.pd(C,!1),this.Mh(N,n,a),this.g.pd(N,!1),S=!0;else if(N!=-1||F!=-1){for(D=k+1;D<c;D++){var j=n.get(D);if(j!=-1){var G=this.g.V(j),W=-1;this.g.D(G,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(W=G),G=this.g.Na(j);var J=-1;if(this.g.D(G,f),0>m.compare(f)&&(u?f.y==o:f.x==o)&&(J=G),W!=-1&&J!=-1){this.Mh(j,n,a),this.g.pd(j,!1),this.Mh(W,n,a),this.g.pd(W,!1),S=!0;break}if(N!=-1&&J!=-1){this.At(n,C,N,j,J,a),S=!0;break}if(F!=-1&&W!=-1){this.At(n,j,W,C,F,a),S=!0;break}}}if(S)break}}}if(!S)break}M=c,m.N(r)}this.g.Ud(a)}},w.prototype.Mh=function(u,o,r){r=this.g.Qa(u,r),o.set(r,-1),r=this.g.Qa(u,this.li),this.ed.set(r,-1),(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u&&(this.g.Kf(o,-1),this.g.Yg(o,-1))},w.prototype.At=function(u,o,r,n,a,c){this.g.Cc(o,n),this.g.Dc(n,o),this.g.Dc(r,a),this.g.Cc(a,r),this.Mh(n,u,c),this.g.oi(n,!1),this.Mh(a,u,c),this.g.oi(a,!0)},w.prototype.Oy=function(){for(var u=0,o=this.ed.size;u<o;u++){var r=this.ed.get(u);r!=-1&&this.g.cj(r,-1)}for(var n=0,a=0,c=this.g.Ob(this.Y);c!=-1;){var p=this.g.Ya(c);if(p==-1||c!=this.g.cd(p)){var f=c;c=this.g.Sb(c),this.g.Kf(f,-1),this.g.br(f)}else{r=p,f=0;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);this.g.ep(c,!1),this.g.Yg(c,this.g.Na(p)),this.g.Xj(c,f),a+=f,n++,c=this.g.Sb(c)}}for(u=0,o=this.ed.size;u<o;u++)if((r=this.ed.get(u))!=-1&&(c=this.g.cd(r))==-1){c=this.g.wf(this.Y,-1),f=0,p=r;do this.g.cj(r,c),f++,r=this.g.V(r);while(r!=p);2>=f?(r=this.g.Qa(p,this.li),this.ed.set(r,-1),p=this.g.pd(p,!1),f==2&&(0<=(r=this.g.Qa(p,this.li))&&this.ed.set(r,-1),this.g.pd(p,!1)),f=c,this.g.Kf(f,-1),this.g.br(f)):(this.g.mn(c,!0),this.g.Xj(c,f),this.g.Kf(c,p),this.g.Yg(c,this.g.Na(p)),this.g.ep(c,!1),a+=f,n++)}for(this.g.Tl(this.Y,n),this.g.Vj(this.Y,a),u=0,o=this.g.ld;o!=-1;o=this.g.ve(o))u+=this.g.I(o);this.g.WB(u)},w.wy=function(u,o,r,n){return new w(o,n).vy(u,r)},w.clip=function(u,o,r,n,a){return w.Pu(u,o,null,r,n,a)},w.Pu=function(u,o,r,n,a,c){var p=u.K();if(p==33)return a=u.D(),o.contains(a)?u:u.Ja();if(p==197)return a=new h.l,u.A(a),a.Fa(o)?(o=new h.Hh,u.copyTo(o),o.Yo(a),o):u.Ja();if(u.B())return u;if(o.B())return u.Ja();var f=new h.l;if(u.yc(f),o.contains(f))return u;if(!o.isIntersecting(f))return u.Ja();if((r!=null||isNaN(n))&&h.ta.oy(r,o,!1),!h.ba.zj(p))throw h.i.O();if((r=u.Cb)!=null&&(r=r.Gk)!=null){if((r=r.So(o))==1){if(p!=1736)throw h.i.ga("internal error");return(u=new h.Ea(u.description)).vp(o),u}if(r==0)return u.Ja()}switch(p){case 550:for(c=null,p=u.I(),r=u.vb(0),n=0,a=new h.h,f=0;f<p;f++)r.uc(2*f,a),o.contains(a)||(n==0&&(c=u.Ja()),n<f&&c.Gd(u,n,f),n=f+1);return 0<n&&c.Gd(u,n,p),n==0?u:c;case 1736:case 1607:return w.wy(u,o,a,c);default:throw h.i.ga("internal error")}},w.prototype.Oh=function(u,o){var r=new h.h;return this.g.D(u,r),u=new h.h,this.g.D(o,u),r.compare(u)},w}();h.ti=A}(q||(q={})),function(h){var A=new h.h,w=function(){function o(r,n,a,c,p){this.Rm=new h.h,this.Ek=new h.h,this.Ri=new h.h,this.g=r,this.Cw=a,this.oo=c,this.Rm=n,this.Al=p,this.Ek.Sc(),this.Ri.Sc()}return o.prototype.rE=function(r){this.g.D(r,this.Ek),r=h.P.truncate((this.Ek.x-this.Rm.x)*this.oo+.5);var n=h.P.truncate((this.Ek.y-this.Rm.y)*this.oo+.5);return u.dG(r,n)},o.prototype.ez=function(r){return this.g.Qa(r,this.Al)},o.prototype.Ky=function(r,n){return this.g.D(r,this.Ek),this.g.D(n,this.Ri),u.Ev(this.Ek.x,this.Ek.y,this.Ri.x,this.Ri.y,this.Cw)},o}();h.kY=function(){};var u=function(){function o(){this.Rm=new h.h,this.rq=[0,0,0,0],this.zs=[0,0,0,0],this.ro=this.Al=-1}return o.cQ=function(r,n){var a=new o;return a.g=r,a.ra=n,a.Cw=n*n,a.bw=2*n,a.oo=1/a.bw,a.vO()},o.Ev=function(r,n,a,c,p){return(r-=a)*r+(n-=c)*n<=p},o.dG=function(r,n){return h.P.Vh(n,h.P.Vh(r))},o.prototype.xO=function(r,n){this.g.Hc(r,A);for(var a=(A.y-this.Rm.y)*this.oo,c=h.P.truncate((A.x-this.Rm.x)*this.oo),p=h.P.truncate(a),f=a=0;1>=f;f+=1)for(var m=0;1>=m;m+=1){var b=o.dG(c+f,p+m),S=this.zl.kR(b);S!=-1&&(this.rq[a]=S,this.zs[a]=b,a++)}for(c=a-1;1<=c;c--)for(S=this.rq[c],p=c-1;0<=p;p--)if(S==this.rq[p]){this.zs[p]=-1,c!=--a&&(this.zs[c]=this.zs[a],this.rq[c]=this.rq[a]);break}for(p=0;p<a;p++)this.yO(r,this.zs[p],A,this.rq[p],n)},o.prototype.yO=function(r,n,a,c,p){for(var f=new h.h;c!=-1;c=this.zl.yR(c)){var m=this.zl.ka(c);r==m||n!=-1&&this.g.Qa(m,this.Al)!=n||(this.g.Hc(m,f),o.Ev(a.x,a.y,f.x,f.y,this.Cw)&&p.add(c))}},o.prototype.Zm=function(r,n,a){var c=this.g.Qa(r,this.ro),p=this.g.Qa(n,this.ro);return c==-1&&(c=this.Ad.Rh(),this.Ad.addElement(c,r),this.g.Sa(r,this.ro,c)),p==-1?this.Ad.addElement(c,n):this.Ad.Cy(c,p),this.g.Sa(n,this.ro,-2),n=this.QT(r,n),a&&(a=this.mw.rE(r),this.g.Sa(r,this.Al,a)),n},o.OT=function(r,n,a){r.Nb(n),a=r;var c=new h.h;o.PT(r.D(),n.D(),c),a.Db(c)},o.PT=function(r,n,a){var c=r.x;r.x!=n.x&&(c=(1*r.x+1*n.x)/2);var p=r.y;r.y!=n.y&&(p=(1*r.y+1*n.y)/2),a.na(c,p)},o.prototype.QT=function(r,n){var a=new h.h;this.g.D(r,a);var c=new h.h;this.g.D(n,c);var p=this.g.XF(r),f=p+(n=this.g.XF(n)),m=0,b=a.x;a.x!=c.x&&(b=(a.x*p+c.x*n)/f,m++);var S=a.y;return a.y!=c.y&&(S=(a.y*p+c.y*n)/f,m++),0<m&&this.g.Db(r,b,S),this.g.nX(r,f),m!=0},o.prototype.vO=function(){var r=this.g.gd,n=this.g.CF();for(this.Rm=n.hz(),n=Math.max(n.da(),n.S())/2147483646,this.bw<n&&(this.bw=n,this.oo=1/this.bw),this.Ad=new h.cu,this.Ad.Bt(h.P.truncate(this.g.gd/3+1)),this.Ad.hn(h.P.truncate(this.g.gd/3+1)),this.Al=this.g.Hd(),this.ro=this.g.Hd(),this.mw=new w(this.g,this.Rm,this.Cw,this.oo,this.Al),this.zl=new h.YK(h.P.truncate(4*r/3),this.mw),this.zl.sW(this.g.gd),r=!1,n=this.g.ld;n!=-1;n=this.g.ve(n))for(var a=this.g.Ob(n);a!=-1;a=this.g.Sb(a))for(var c=this.g.Ya(a),p=0,f=this.g.Ka(a);p<f;p++){var m=this.mw.rE(c);this.g.Sa(c,this.Al,m),this.zl.addElement(c,m),c=this.g.V(c)}var b=new h.ja(0);for(b.Jb(10),n=this.g.ld;n!=-1;n=this.g.ve(n))for(a=this.g.Ob(n);a!=-1;a=this.g.Sb(a))for(c=this.g.Ya(a),p=0,f=this.g.Ka(a);p<f;p++){if(this.g.Qa(c,this.ro)!=-2)for(m=this.g.Qa(c,this.Al),this.zl.kd(c,m);this.xO(c,b),b.size!=0;){m=!1;for(var S=0,M=b.size;S<M;S++){var T=b.get(S),k=this.zl.ka(T);this.zl.wd(T),m=this.Zm(c,k,S+1==M)||m}if(r=r||m,b.clear(!1),!m)break}c=this.g.V(c)}return r&&this.pN(),this.mw=this.zl=null,this.g.Ud(this.Al),this.g.Ud(this.ro),r},o.prototype.pN=function(){for(var r=new h.h,n=this.Ad.je;n!=-1;n=this.Ad.lz(n)){var a=this.Ad.sc(n);for(this.g.D(this.Ad.ka(a),r),a=this.Ad.lb(a);a!=-1;a=this.Ad.lb(a))this.g.mf(this.Ad.ka(a),r)}},o}();h.$t=u}(q||(q={})),function(h){var A=function(){function w(u){u===void 0&&(u=null),this.yg=null,this.Pb=!1,this.yg=u===null?[]:u}return w.prototype.copyTo=function(u){if(u.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");for(var o=0;o<this.yg.length;o++)u.yg.push(this.yg[o].Pf())},w.prototype.count=function(){return this.yg.length},w.prototype.add=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.push(u.Pf())},w.prototype.clear=function(){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.length=0},w.prototype.remove=function(u){if(this.Pb)throw h.i.ga("CompositeGeographicTransformation is read-only");this.yg.splice(u,1)},w.prototype.ig=function(){var u=new w;return this.copyTo(u),u},w.prototype.Pf=function(){return this.ig()},w.prototype.transform=function(u,o,r,n){if(u.length<o)throw h.i.ga("invalid Argument");var a=r;for(r=0;r<this.yg.length;r++){var c=this.yg[r];if(c.sm()!=null){var p=c.Vn,f=p?1:0,m=p?c.sm().getGeogcs2():c.sm().getGeogcs1();if(m=a/(m=m.getUnit().getUnitFactor()),3552713678800501e-30<Math.abs(m-1))for(a=0;a<o;a++)u[a][0]*=m,u[a][1]*=m;h.GC.geogToGeog(c.sm(),o,u,null,f),a=(p?c.sm().getGeogcs1():c.sm().getGeogcs2()).getUnit().getUnitFactor()}}if(m=a/n,3552713678800501e-30<Math.abs(m-1))for(a=0;a<o;a++)u[a][0]*=m,u[a][1]*=m;return o},w.prototype.Nb=function(u){if(u==this)return!0;if(!(u instanceof w)||this.yg.length!=u.yg.length)return!1;for(var o=0;o<this.yg.length;o++)if(!this.yg[o].Nb(u.yg[o]))return!1;return!0},w.prototype.ix=function(){this.Pb=!0},w.prototype.toString=function(){for(var u="CGT ("+this.count()+") ",o=0,r=this.count();o<r;++o)u+=this.yg[o].toString()+", ";return 200<u.length?u.substring(0,197)+"... ("+u.length.toString()+" characters)":u},w.create=function(){return new w},w}();h.qC=A}(q||(q={})),function(h){var A,w=Math.PI,u=2*Math.PI,o=Math.PI/2,r=function(){function c(){}return c.NO=function(p,f){var m=new c;return m.x=p,m.y=f,m.type=0,m.Wh=0,m},c.cl=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=0,f.Wh=0,f},c.MO=function(p){var f=new c;return f.x=p.x,f.y=p.y,f.type=p.type,f.Wh=p.Wh,f},c.Qd=function(p,f,m){var b=new c;return b.x=p.x+f*Math.cos(m),b.y=p.y+f*Math.sin(m),b.type=p.type,b.Wh=p.Wh,b},c.Ru=function(p,f){var m=new c;return m.x=.5*(p.x+f.x),m.y=.5*(p.y+f.y),m.type=p.type,m.Wh=p.Wh,m},c.NE=function(p,f){var m=new c;return m.x=p.x+.001*(f.x-p.x),m.y=p.y+.001*(f.y-p.y),m.type=p.type,m.Wh=p.Wh,m},c}(),n=function(){};(A=h.$K||(h.$K={}))[A.Round=0]="Round",A[A.Bevel=1]="Bevel",A[A.Miter=2]="Miter",A[A.Square=3]="Square";var a=function(){function c(p){this.HA=this.Zb=this.wg=null,this.nd=p}return c.W=function(p,f,m,b,S,M){if(p==null||1>p.Eb())throw h.i.O();return f==0||p.B()?p:((M=new c(M)).lo=p,M.La=f,M.ra=S,M.Mi=m,M.wA=b,M.Qx())},c.prototype.ZL=function(){var p=this.lo,f=p.ac(),m=p.xc(),b=new h.h;return b.vc(m,f),b.normalize(),b.Jv(),b.scale(this.La),f.add(b),m.add(b),b=p.Ja(),p.Ec(f),p.Rc(m),b},c.prototype.YL=function(){var p=this.lo;if(0<this.La&&this.Mi!=2){var f=new h.Ea;return f.bd(p,!1),this.lo=f,this.Qx()}return(p=new h.Hh(p.aa)).X(this.La,this.La),p},c.prototype.nJ=function(p,f,m,b){return(f.x-p.x)*(b.x-m.x)+(f.y-p.y)*(b.y-m.y)},c.prototype.hc=function(p,f){if(f===void 0)this.Zb.push(p),this.gf++;else if(this.gf==0)this.hc(p);else{var m=this.Dw,b=this.wg[f==0?m-1:f-1],S=this.wg[f],M=this.nJ(b,S,this.Zb[this.gf-1],p);0<M?this.hc(p):0>M&&(0<this.nJ(b,S,S,this.Zb[this.gf-1])?(S=this.wg[f==0?m-2:f==1?m-1:f-2],m=r.Qd(b,this.La,Math.atan2(b.y-S.y,b.x-S.x)-o),this.Zb[this.gf-1]=m,this.Mi==1||this.Mi==2?(m=r.Ru(m,b),this.hc(m),m=r.Qd(b,this.La,this.Lv+o),(b=r.Ru(m,b)).type|=256,this.hc(b)):(m=r.Qd(b,this.La,this.Lv+o)).type|=256,this.hc(m),this.hc(p,f)):(m=r.Qd(S,this.La,this.Lv+o),this.hc(m),this.Mi==1||this.Mi==2?(m=r.Ru(m,S),this.hc(m),m=r.Qd(S,this.La,this.Wz-o),(b=r.Ru(m,S)).type|=256,this.hc(b)):(m=r.Qd(S,this.La,this.Wz-o)).type|=256,this.hc(m)))}},c.prototype.gE=function(){var p,f=this.Dw;this.gf=0;var m=.5*this.ra,b=0,S=0;for(p=0;p<f;p++){var M=this.wg[p],T=p==0?this.wg[f-1]:this.wg[p-1],k=p==f-1?this.wg[0]:this.wg[p+1],C=T.x-M.x,N=T.y-M.y,F=k.x-M.x,D=k.y-M.y,j=Math.atan2(N,C),G=Math.atan2(D,F);if(this.Lv=j,this.Wz=G,p==0&&(b=j,S=G),C=C*D-F*N,N=G,G<j&&(G+=u),0<C*this.La)this.Mi==1||this.Mi==2?(j=r.Qd(M,this.La,j+o),this.hc(j),j=r.NE(M,j),this.hc(j),j=r.Qd(M,this.La,G-o),(M=r.NE(M,j)).type|=256,this.hc(M),this.hc(j)):(C=.5*(G-j),C=this.La/Math.abs(Math.sin(C)),j=r.Qd(M,C,.5*(j+G)),this.hc(j,p));else if((512&M.type)!=0){for(C=1-m/Math.abs(this.La),T=1,k=0>this.La?-w:w,-1<C&&1>C&&(.017453292519943295>(N=2*Math.acos(C))&&(N=.017453292519943295),1<(T=h.P.truncate(w/N+1.5))&&(k/=T)),N=j+o,j=r.Qd(M,this.La,N),p==0&&(j.type|=1024),this.hc(j,p),C=this.La/Math.cos(k/2),N+=k/2,(j=r.Qd(M,C,N)).type|=1024,this.hc(j);0<--T;)N+=k,(j=r.Qd(M,C,N)).type|=1024,this.hc(j);(j=r.Qd(M,this.La,G-o)).type|=1024,this.hc(j)}else if(this.Mi==1)j=r.Qd(M,this.La,j+o),this.hc(j,p),j=r.Qd(M,this.La,G-o),this.hc(j);else if(this.Mi==0)for(C=1-m/Math.abs(this.La),T=1,k=G-o-(j+o),-1<C&&1>C&&(.017453292519943295>(N=2*Math.acos(C))&&(N=.017453292519943295),1<(T=h.P.truncate(Math.abs(k)/N+1.5))&&(k/=T)),C=this.La/Math.cos(.5*k),N=j+o+.5*k,j=r.Qd(M,C,N),this.hc(j,p);0<--T;)N+=k,j=r.Qd(M,C,N),this.hc(j);else this.Mi==2?(C=T.x-M.x,N=T.y-M.y,.99999999<(T=(C*(F=k.x-M.x)+N*(D=k.y-M.y))/Math.sqrt(C*C+N*N)/Math.sqrt(F*F+D*D))?(j=r.Qd(M,1.4142135623730951*this.La,G-.25*w),this.hc(j,p),j=r.Qd(M,1.4142135623730951*this.La,G+.25*w),this.hc(j)):(T=Math.abs(this.La/Math.sin(.5*Math.acos(T))))>(k=Math.abs(this.wA*this.La))?(C=.5*(G-j),C=this.La/Math.abs(Math.sin(C)),j=r.Qd(M,C,.5*(j+G)),G=h.h.construct(j.x,j.y),j=h.h.construct(M.x,M.y),(M=new h.h).vc(G,j),(G=new h.h).yW(k/M.length(),M,j),j=(T-k)*Math.abs(this.La)/Math.sqrt(T*T-this.La*this.La),0<this.La?M.Jv():M.cr(),M.scale(j/M.length()),(j=new h.h).add(G,M),(T=new h.h).vc(G,M),j=r.cl(j),this.hc(j,p),j=r.cl(T),this.hc(j)):(C=.5*(G-j),C=this.La/Math.abs(Math.sin(C)),j=r.Qd(M,C,.5*(j+G)),this.hc(j,p))):(G=N,0<this.La?(G>j&&(G-=u),T=j-G<o):(G<j&&(G+=u),T=G-j<o),T?(N=0>(C=1.4142135623730951*this.La)?j+.25*w:j+.75*w,j=r.Qd(M,C,N),this.hc(j,p),N=0>C?G-.25*w:G-.75*w,j=r.Qd(M,C,N),this.hc(j)):(C=.5*(G-j),C=this.La/Math.abs(Math.sin(C)),G<j&&(G+=u),j=r.Qd(M,C,(j+G)/2),this.hc(j,p)))}return this.Lv=b,this.Wz=S,this.hc(this.Zb[0],0),M=r.MO(this.Zb[this.gf-1]),this.Zb[0]=M,this.oW()},c.prototype.Cu=function(p,f){if(!(2>f))for(var m=0;m<f;m++){var b=this.Zb[p+m];m!=0?this.HA.Ei(h.h.construct(b.x,b.y)):this.HA.Nt(h.h.construct(b.x,b.y))}},c.prototype.$L=function(p,f,m){var b=p.Ca(f),S=p.Wc(f);if(this.Zb=[],this.HA=m,p.ec(f)){for(f=p.Oa(b);p.Oa(S-1).rb(f);)S--;if(2<=S-b){for(this.Dw=S-b,this.wg=[],f=b;f<S;f++)this.wg.push(r.cl(p.Oa(f)));this.gE()&&this.Cu(0,this.gf-1)}}else{for(f=p.Oa(b);b<S&&p.Oa(b+1).rb(f);)b++;for(f=p.Oa(S-1);b<S&&p.Oa(S-2).rb(f);)S--;if(2<=S-b){for(this.Dw=2*(S-b)-2,this.wg=[],(m=r.cl(p.Oa(b))).type|=1536,this.wg.push(m),f=b+1;f<S-1;f++)m=r.cl(p.Oa(f)),this.wg.push(m);for((m=r.cl(p.Oa(S-1))).type|=512,this.wg.push(m),f=S-2;f>=b+1;f--)(m=r.cl(p.Oa(f))).type|=1024,this.wg.push(m);if(this.gE())if(2<=this.Zb.length){for(p=-1,(S=(1024&this.Zb[this.gf-1].type)!=0)||(p=0),f=1;f<this.gf;f++)(b=(1024&this.Zb[f].type)!=0)?S||1<(S=f-1)-p+1&&this.Cu(p,S-p+1):S&&(p=f-1),S=b;S||1<(S=this.gf-1)-p+1&&this.Cu(p,S-p+1)}else p=0,S=this.gf-1,0<=p&&1<=S-p&&this.Cu(p,S-p+1)}}this.wg=null,this.Dw=0,this.Zb=null,this.gf=0},c.prototype.oW=function(){for(var p=!1,f=0;f<this.gf;f++){var m=this.Zb[f];m.sh=f+1,m.uh=f-1,this.Zb[f]=m}for((m=this.Zb[0]).uh=this.gf-2,this.Zb[0]=m,(m=this.Zb[this.gf-2]).sh=0,this.Zb[this.gf-2]=m,f=m=0;f<this.gf;f++)if((256&this.Zb[m].type)!=0){var b=this.AP(m);if(b==-1){p=!0;break}m=b}else m=this.Zb[m].sh;return!p&&(this.KO(m),!0)},c.prototype.AP=function(p){for(var f,m,b=this.gf-1,S=p,M=1;M<=b-2;M++){f=S=this.Zb[S].sh,m=p;for(var T=1;T<=M;T++){if(m=this.Zb[m].uh,(256&this.Zb[m].type)==0&&(256&this.Zb[f].type)==0){var k=this.$R(m,f);if(k!=-1)return k}f=this.Zb[f].uh}}return-1},c.prototype.$R=function(p,f){var m=this.Zb[this.Zb[p].uh],b=this.Zb[p],S=this.Zb[this.Zb[f].uh],M=this.Zb[f];if(!this.AW(m,b,S,M))return-1;var T=new n;return this.rQ(m,b,S,M,T)&&!T.WD&&h.P.WJ((b.x-m.x)*(M.y-S.y)-(b.y-m.y)*(M.x-S.x))!=h.P.WJ(this.La)?(m=this.Zb[p].uh,T.cn.type=b.type,T.cn.sh=f,T.cn.uh=m,this.Zb[p]=T.cn,T.cn=this.Zb[f],T.cn.uh=p,this.Zb[f]=T.cn,f):-1},c.prototype.AW=function(p,f,m,b){return Math.max(p.x,f.x)>=Math.min(m.x,b.x)&&Math.max(m.x,b.x)>=Math.min(p.x,f.x)&&Math.max(p.y,f.y)>=Math.min(m.y,b.y)&&Math.max(m.y,b.y)>=Math.min(p.y,f.y)},c.prototype.rQ=function(p,f,m,b,S){S.WD=!1;var M=(f.y-p.y)*(b.x-m.x)-(f.x-p.x)*(b.y-m.y),T=(m.y-p.y)*(f.x-p.x)-(m.x-p.x)*(f.y-p.y);if(0<=(M=M==0?2:T/M)&&1>=M){var k=M;if(M=(b.y-m.y)*(f.x-p.x)-(b.x-m.x)*(f.y-p.y),T=(p.y-m.y)*(b.x-m.x)-(p.x-m.x)*(b.y-m.y),0<=(M=M==0?2:T/M)&&1>=M)return S.cn=r.NO(p.x+M*(f.x-p.x),p.y+M*(f.y-p.y)),S.cn.Wh=m.Wh+k*(b.Wh-m.Wh),k!=0&&k!=1||M!=0&&M!=1||(S.WD=!0),S.NY=M,S.OY=k,!((k==0||k==1)&&0<M&&1>M||(M==0||M==1)&&0<k&&1>k)}return!1},c.prototype.KO=function(p){for(;this.Zb[p].uh<p;)p=this.Zb[p].uh;var f=0,m=p;do m=this.Zb[m],this.Zb[f]=m,m=m.sh,f++;while(m!=p);this.Zb[f]=this.Zb[0],this.gf=f+1},c.prototype.UC=function(p){var f=this.lo,m=f.Ha();if(m!=null){m.aj();for(var b=-1;m.ab();)b++,this.$L(f,b,p)}},c.prototype.Qx=function(){var p=this.lo.K();return p==322?this.ZL():p==197?this.YL():h.ba.zd(p)?((p=new h.Ua).oc(this.lo,!0),this.lo=p,this.Qx()):p==1607?(p=new h.Ua,this.UC(p),p):p==1736?(p=new h.Ea,this.UC(p),p):null},c}();h.CK=a}(q||(q={})),function(h){var A=function(){function r(n){this.rk=n}return r.prototype.D=function(n,a){this.rk.g.D(n,a)},r.prototype.wd=function(n){var a=this.rk.Ga.ka(n);this.rk.Ga.wd(n,-1),this.rk.g.pd(a,!1)},r}(),w=function(){function r(n){this.rk=n}return r.prototype.D=function(n,a){this.rk.AT.D(n,a)},r.prototype.wd=function(n){this.rk.Ga.wd(n,-1)},r}(),u=function(){function r(n){this.rk=n}return r.prototype.D=function(n,a){a.N(this.rk.DT[n])},r.prototype.wd=function(n){this.rk.Ga.wd(n,-1)},r}(),o=function(){function r(n){n===void 0?(this.Ga=new h.Zj,this.Ga.Ee(20),this.g=new h.hd,this.oT=this.g.Kg(550),this.Us=this.g.wf(this.oT,-1),this.Zh=new A(this)):n instanceof Array?(this.Ga=new h.Zj,this.Ga.Ee(20),this.DT=n,this.Zh=new u(this)):(this.Ga=new h.Zj,this.Ga.Ee(20),this.AT=n,this.Zh=new w(this))}return r.prototype.Ib=function(n){var a=n.K();if(h.Fx.zj(a))this.dN(n);else if(h.Wk.zd(a))this.iN(n);else if(a==197)this.aN(n);else{if(a!=33)throw h.i.O("invalid shape type");this.hN(n)}},r.prototype.XQ=function(){var n=new h.Ta,a=this.Ga.sc(-1),c=new h.Ea(this.g.it);for(this.g.Xi(this.Ga.ka(a),n),c.nf(n),a=this.Ga.lb(a);a!=-1;a=this.Ga.lb(a))this.g.Xi(this.Ga.ka(a),n),c.lineTo(n);return c},r.LO=function(n){var a=new r(n),c=n.I(),p=1,f=new h.h,m=new h.h,b=new h.h;for(n.D(0,f);n.D(p,m),m.Mz(f)&&p<c-1;)p++;for(a.Ga.addElement(0,-1),a.Ga.yn(p),c=p+1;c<n.I();c++)n.D(c,b),(p=a.jC(b))!=-1&&a.Ga.Uj(p,c);for(b=new h.Ta,p=a.Ga.sc(-1),c=new h.Ea(n.description),n.we(a.Ga.ka(p),b),c.nf(b),p=a.Ga.lb(p);p!=-1;p=a.Ga.lb(p))n.we(a.Ga.ka(p),b),c.lineTo(b);return c},r.construct=function(n,a,c){for(var p=new r(n),f=1,m=n[0];n[f].Mz(m)&&f<a-1;)f++;for(p.Ga.addElement(0,-1),p.Ga.yn(f),f+=1;f<a;f++)(m=p.jC(n[f]))!=-1&&p.Ga.Uj(m,f);for(n=0,a=p.Ga.sc(-1);a!=-1;a=p.Ga.lb(a))c[n++]=p.Ga.ka(a);return n},r.DG=function(n,a){var c=n.Ca(a),p=n.Wc(a);if(a=!n.ec(a)&&n.On(a),n=n.vb(0),p*=2,a&&(p-=2),6>p-(c*=2))return!0;a=new h.h;var f=new h.h,m=new h.h;n.uc(c,a),n.uc(c+2,f),n.uc(c+4,m);var b=r.Yu(f,m,a);if(b.rs()||!r.wm(b.value()))return!1;var S=h.h.construct(f.x,f.y),M=new h.h;for(c+=6;c<p;c+=2)if(M.N(f),f.N(m),n.uc(c,m),(b=r.Yu(f,m,a)).rs()||!r.wm(b.value())||(b=r.Yu(S,m,a)).rs()||!r.wm(b.value())||(b=r.Yu(f,m,M)).rs()||!r.wm(b.value()))return!1;return!0},r.prototype.dN=function(n){for(var a=new h.Ta,c=new h.h,p=0;p<n.I();p++){n.D(p,c);var f=this.Er(c);if(f!=-1){n.we(p,a);var m=this.g.hc(this.Us,a);this.Ga.Uj(f,m)}}},r.prototype.aN=function(n){for(var a=new h.Ta,c=new h.h,p=0;4>p;p++){n.gB(p,c);var f=this.Er(c);if(f!=-1){n.If(p,a);var m=this.g.hc(this.Us,a);this.Ga.Uj(f,m)}}},r.prototype.iN=function(n){var a=new h.Ta,c=n.ac();if((c=this.Er(c))!=-1){n.Uo(a);var p=this.g.hc(this.Us,a);this.Ga.Uj(c,p)}c=n.xc(),(c=this.Er(c))!=-1&&(n.Qo(a),n=this.g.hc(this.Us,a),this.Ga.Uj(c,n))},r.prototype.hN=function(n){var a=n.D();(a=this.Er(a))!=-1&&(n=this.g.hc(this.Us,n),this.Ga.Uj(a,n))},r.prototype.Er=function(n){var a=-1;if(this.Ga.size(-1)==0)return this.Ga.addElement(-4,-1);if(this.Ga.size(-1)==1){var c=this.g.Oa(this.Ga.ka(this.Ga.sc(-1)));return n.Mz(c)||(a=this.Ga.yn(-5)),a}return this.jC(n)},r.prototype.jC=function(n){var a=-1;do{var c=this.Ga.sc(-1),p=this.Ga.Gc(-1),f=this.Ga.ka(c),m=this.Ga.ka(p),b=new h.h,S=new h.h;if(this.Zh.D(f,b),this.Zh.D(m,S),f=h.h.Wq(S,n,b),r.wm(f))a=this.Ga.yn(-1),(b=this.hC(n,p,c))!=c&&this.iC(n,c,this.Ga.xe(b));else if(r.wG(f)){S=this.Ga.uv(-1);var M=this.Ga.sc(-1),T=this.Ga.Gc(-1);for(f=new h.h,m=new h.h;M!=this.Ga.xe(T);){var k=this.Ga.ka(S);this.Zh.D(k,f),k=h.h.Wq(f,n,b),r.wG(k)?(T=S,S=this.Ga.nl(S)):(M=S,S=this.Ga.Zp(S))}if(S=T,b=M,k=this.Ga.ka(S),M=this.Ga.ka(b),this.Zh.D(k,f),this.Zh.D(M,m),b!=c&&(f=h.h.Wq(m,n,f),!r.wm(f)))continue;a=this.Ga.Bu(b,S,-2,!1),this.iC(n,S,p),this.hC(n,b,c)}else this.tb==null&&(this.tb=new h.zb),this.tb.Ec(S),this.tb.Rc(b),0>(b=this.tb.fe(n,!0))?(b=this.Ga.xe(p),this.Ga.wd(p,-1),a=this.Ga.yn(-3),this.hC(n,b,c)):1<b&&(b=this.Ga.lb(c),this.Ga.wd(c,-1),a=this.Ga.Bu(-1,b,-3,!1),this.iC(n,b,p))}while(0);return a},r.prototype.iC=function(n,a,c){if(a!=c){var p=this.Ga.ka(a),f=this.Ga.lb(a),m=new h.h,b=new h.h;for(this.Zh.D(p,m);a!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),b),p=h.h.Wq(b,n,m),!r.wm(p));)p=a,a=f,m.N(b),f=this.Ga.lb(a),this.Zh.wd(p)}},r.prototype.hC=function(n,a,c){if(a==c)return c;var p=this.Ga.ka(a),f=this.Ga.xe(a),m=new h.h,b=new h.h;for(this.Zh.D(p,m);a!=c&&2<this.Ga.size(-1)&&(this.Zh.D(this.Ga.ka(f),b),p=h.h.Wq(m,n,b),!r.wm(p));)p=a,a=f,m.N(b),f=this.Ga.xe(a),this.Zh.wd(p);return a},r.Yu=function(n,a,c){var p=new h.Xb;p.set(a.x),p.sub(n.x);var f=new h.Xb;f.set(c.y),f.sub(n.y);var m=new h.Xb;return m.set(a.y),m.sub(n.y),(a=new h.Xb).set(c.x),a.sub(n.x),p.Ag(f),m.Ag(a),p.sub(m),p},r.wm=function(n){return 0>n},r.wG=function(n){return 0<n},r}();h.au=o}(q||(q={})),function(h){var A=function(){function w(u){this.g=null,this.nH=!0,this.nd=u}return w.rU=function(u,o,r){return u=h.ta.Gr(u),h.$t.Ev(o.Ng(),o.kh(),r.Ng(),r.kh(),h.mc.ox(u))},w.wO=function(u,o){var r=new h.Ta;return h.$t.OT(u,o,r),r},w.W=function(u,o,r,n){return(r=new w(r)).g=u,r.ra=o,r.nH=n,r.yM()},w.prototype.hM=function(u){return h.$t.cQ(this.g,u)},w.prototype.mM=function(u){return h.bu.W(this.g,u,this.nd)},w.prototype.yM=function(){var u=this.ra,o=h.ta.Gr(u),r=1.00001*(u=h.ta.lN(u));u*=1.000001;for(var n=!1,a=30<this.g.gd+10?1e3:(this.g.gd+10)*(this.g.gd+10),c=0,p=this.g.cS();;c++){if(c>a)throw h.i.ga("Internal Error: max number of iterations exceeded");var f=this.hM(o);if(n=n||f,this.nH&&(f=this.g.Ip(o,!0,!1)!=0,n=n||f),f=!1,(c==0||p||h.bu.eI(!0,this.g,u,null,this.nd))&&(f=this.mM(r),n=n||f),!f)break;h.np.Bp(this.nd)}return n},w}();h.Uk=A}(q||(q={})),function(h){var A=function(){function u(o){this.ae=this.Nc=null,this.$s=0,this.Vb=o,this.Yz=!0}return u.prototype.wv=function(o,r){var n=this.g.cc(o);if(n==null){if(!this.g.fd(o,r))return null;n=r}return n},u.prototype.Zq=function(){var o;o===void 0&&(o=!1),this.$s++,(o||(4095&this.$s)==0)&&(this.$s=0,h.np.Bp(this.Vb))},u.prototype.hP=function(){var o=this.g.$q(!1),r=!1,n=new h.zb,a=new h.zb,c=new h.l;c.Pa();var p=new h.l;p.Pa();for(var f=new h.Ta,m=new h.NC,b=o.next();b!=-1;b=o.next()){h.np.Bp(this.Vb);var S=null,M=!1;if(!h.ba.Sn(this.g.jc(o.dk))){if((S=this.wv(b,n))==null)continue;if(S.A(c),c.X(this.ra,this.ra),S.Di(this.ra)){if(!S.Di(0))continue;M=!0,S=null}}var T=this.g.$q(o),k=T.next();for(k!=-1&&(k=T.next());k!=-1;k=T.next()){var C=null,N=!1;if(!h.ba.Sn(this.g.jc(T.dk))){if((C=this.wv(k,a))==null)continue;if(C.A(p),C.Di(this.ra)){if(!C.Di(0))continue;N=!0,C=null}}var F=0,D=0;if(S!=null&&C!=null)c.BG(p)&&(m.Po(S),m.Po(C),m.Fa(this.ra,!1),0<(F=m.ql(0))+(D=m.ql(1))&&(this.g.lr(b,m,0,!0),this.g.lr(k,m,1,!0)),m.clear());else if(S!=null){var j=new h.h;if(this.g.D(k,j),c.contains(j)){if(m.Po(S),this.g.Xi(k,f),m.Fz(this.ra,f,!1),0<(F=m.ql(0)))if(this.g.lr(b,m,0,!0),N){for(N=-1,j=this.g.V(k);j!=-1&&j!=k&&(N=j,(C=this.wv(j,a))!=null&&C.Di(0));j=this.g.V(j));for(j=k;j!=-1&&(this.g.Fh(j,m.Cf),j!=N);j=this.g.V(j));}else this.g.Fh(k,m.Cf);m.clear()}}else{if(C==null)continue;if(j=new h.h,this.g.D(b,j),p.X(this.ra,this.ra),p.contains(j)){if(m.Po(C),this.g.Xi(b,f),m.Fz(this.ra,f,!1),0<(D=m.ql(0)))if(this.g.lr(k,m,0,!0),M){for(N=-1,j=this.g.V(b);j!=-1&&j!=b&&(N=j,(C=this.wv(j,a))!=null&&C.Di(0));j=this.g.V(j));for(j=b;j!=-1&&(this.g.Fh(j,m.Cf),j!=N);j=this.g.V(j));}else this.g.Fh(b,m.Cf);m.clear()}}if(F+D!=0){if(F!=0){if((S=this.g.cc(b))==null){if(!this.g.fd(b,n))continue;S=n,n.A(c)}else S.A(c);if(S.Di(this.ra))break}r=!0}}}return r},u.prototype.iP=function(){return this.IU()},u.prototype.IU=function(){return new h.LC().HX(this.g,this.ra)},u.prototype.fI=function(){var o=!1;this.Nc==null&&(this.Nc=new h.Zj);var r=new h.ja(0);r.Jb(this.g.gd+1);for(var n=this.g.$q(),a=n.next();a!=-1;a=n.next())r.add(a);this.g.nx(r,r.size),r.add(-1),n=this.g.Hd(),a=this.g.Hd(),this.ae=new h.OC(this.g,this.ra,!this.Yz),this.Nc.Wo(this.ae);var c=new h.ja(0),p=new h.ja(0),f=0;new h.h;var m=this.g.ud;this.g.wb.rc();for(var b,S,M=this.g.wb.Aa[0].o,T=r.get(f++);T!=-1;){var k=b=M[2*(S=m.U(T,0))],C=S=M[2*S+1];do{var N=m.U(T,2),F=m.U(T,1);if(N!=-1){var D=m.U(N,0),j=M[2*D];0>(C<(D=M[2*D+1])?-1:C>D?1:k<j?-1:k>j?1:0)&&(p.add(T),p.add(N))}F!=-1&&(j=M[2*(D=m.U(F,0))],0>(C<(D=M[2*D+1])?-1:C>D?1:k<j?-1:k>j?1:0)&&(p.add(F),p.add(F))),(j=this.g.Qa(T,n))!=-1&&(c.add(j),this.g.Sa(T,n,-1)),(j=this.g.Qa(T,a))!=-1&&(c.add(j),this.g.Sa(T,a,-1)),(T=r.get(f++))!==-1&&(k=M[2*(C=m.U(T,0))],C=M[2*C+1])}while(T!=-1&&k===b&&C===S);for(k=c.size==1&&p.size==2,j=C=-1,N=0,F=c.size;N<F;N++){D=c.get(N);var G=this.Nc.xe(D);if(G==-1||c.bG(G)||(C=G),(D=this.Nc.lb(D))==-1||c.bG(D)||(j=D),C!=-1&&j!=-1)break}for(this.ae.UJ(S,b),N=0,F=c.size;N<F;N++)D=c.get(N),this.Nc.wd(D,-1);if(c.clear(!1),!k&&C!=-1&&j!=-1&&this.kO(C,j)){o=!0,this.Pi=this.ae.tm();break}for(N=0,F=p.size;N<F;N+=2){if(S=p.get(N),b=p.get(N+1),k?(S=this.Nc.Bu(C,j,S,!0),k=!1):S=this.Nc.addElement(S,-1),this.ae.rg){this.Pi=this.ae.tm(),o=!0;break}this.g.Qa(b,n)==-1?this.g.Sa(b,n,S):this.g.Sa(b,a,S)}if(o)break;p.Dh(0)}return this.g.Ud(n),this.g.Ud(a),o},u.prototype.kO=function(o,r){return this.ae.compare(this.Nc,this.Nc.ka(o),r),o=this.ae.rg,this.ae.Mr(),o},u.sE=function(o){for(var r=o.ld;r!=-1;r=o.ve(r))if(h.ba.Ic(o.jc(r)))return!0;return!1},u.$P=function(o,r,n,a){return!!u.sE(o)&&((r=new u(a)).g=o,r.ra=n,15>o.gd?o=r.hP():r.iP())},u.W=function(o,r,n){return u.$P(o,o.CF(),r,n)},u.eI=function(o,r,n,a,c){if(!u.sE(r))return!1;var p=new u(c);if(p.g=r,p.ra=n,p.Yz=o,p.fI())return a!=null&&a.Yt(p.Pi),!0;var f=new h.Ed;return f.UB(),r.Pc(f),(p=new u(c)).g=r,p.ra=n,p.Yz=o,o=p.fI(),f.UB(),r.Pc(f),!!o&&(a!=null&&a.Yt(p.Pi),!0)},u.Ol=function(o,r){return!(16>(o=o.I()))&&2*o+Math.log(o)*Math.LOG10E/Math.log(2)*r<1*o*r},u.fP=function(o,r,n,a){if(h.ba.Ic(r.K()))return new u(a).gP(o,r,n);throw h.i.ga("crack_A_with_B")},u.prototype.gP=function(o,r,n){var a=new h.l;o.yc(a);var c=new h.l;if(r.yc(c),c.X(n,n),!c.isIntersecting(a))return o;var p=o.Cb,f=null;p!=null&&(f=p.Gb),u.Ol(o,o.I())&&(f=h.ta.lj(o,c));var m=f!=null?f.getIterator():null,b=r.Ha();r=o.Ha();var S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(c=[];b.ab();)for(;b.Ia();){var M=b.ia();if(f!=null){for(m.Vo(M,n),p=m.next();p!=-1;p=m.next())if(this.Zq(),r.Wb(f.ka(p),-1),r.Ia()){var T=(p=r.ia()).Fa(M,null,S,null,n);for(p=0;p<T;++p){var k=S[p];if(k!=0&&k!=1){var C=r.xb(),N=new w;N.t=k,N.index=C,c.push(N)}}}}else{var F=new h.l;if(M.yc(F),F.X(n,n),a.isIntersecting(F)){for(r.aj();r.ab();)for(;r.Ia();)if(this.Zq(),p=r.ia(),k=new h.l,p.yc(k),k.isIntersecting(F))for(T=p.Fa(M,null,S,null,n),p=0;p<T;++p)(k=S[p])!=0&&k!=1&&(C=r.xb(),(N=new w).t=k,N.index=C,c.push(N))}}}if(c.length==0)return o;for(c=c.sort(w.zy),o=o.Ja(),r.aj();r.ab()&&!r.Ia(););for(n=r.ia(),a=new h.hg,f=-1,p=0,m=c.length;p<m;){for(S=c[p].index,b=p+1;b<m&&c[b].index==S;)++b;for(;r.xb()<S;){if(this.Zq(),M=r.Ia(),k=r.gb,(F=M||!r.Pn()||r.Qn())&&o.oc(n,f!=k),f=k,!M)for(;r.ab()&&!r.Ia(););n=r.ia()}for(S=0;p<b;p++)(k=c[p].t)!=S&&(n.dh(S,k,a),S=k,k=r.gb,o.oc(a.get(),f!=k),f=k);if((F=(M=r.Ia())||!r.Pn()||r.Qn())&&(n.dh(S,1,a),o.oc(a.get(),!1)),M)n=r.ia();else{for(;r.ab()&&!r.Ia(););n=r.Ia()?r.ia():null}p=b}for(n!=null&&(k=r.gb,(F=(M=r.Ia())||!r.Pn()||r.Qn())&&o.oc(n,f!=k),f=k),M=r.Ia();;){if(!M){for(;r.ab()&&!(M=r.Ia()););if(!M)break}n=r.ia(),k=r.gb,(F=(M=r.Ia())||!r.Pn()||r.Qn())&&o.oc(n,f!=k),f=k}return o},u}();h.bu=A;var w=function(){function u(){}return u.zy=function(o,r){return o.index==r.index?o.t>r.t?1:o.t<r.t?-1:0:o.index>r.index?1:-1},u}()}(q||(q={})),function(h){var A;(A=h.EK||(h.EK={}))[A.Left=0]="Left",A[A.Right=1]="Right",A[A.Coincident=2]="Coincident",A[A.Undefined=3]="Undefined",A[A.Uncut=4]="Uncut";var w=function(r,n,a,c,p,f,m,b,S,M,T){this.Y=r,this.ct=n,this.Ps=a,this.tg=c,this.Nm=M,this.Cl=T};h.mY=w;var u=function(){function r(n,a){this.DH=n,this.Ji=a}return r.prototype.kM=function(n,a){var c=new h.h;this.Ji.D(n,c);var p=new h.h;return this.Ji.D(a,p),(c=c.compare(p))!=0?c:(n=this.Ji.Qa(n,this.DH))<(a=this.Ji.Qa(a,this.DH))?-1:n==a?0:1},r}(),o=function(r,n,a,c,p,f,m,b,S){this.tg=r,this.Ps=n,this.IA=a,this.OH=c,this.Gi=p,this.Cl=f,this.Nm=m,this.PH=b,this.GT=S};h.lY=o,h.FK=function(){function r(){}return r.DK=function(n,a,c,p,f,m){if(a.B())n=new w(a,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else if(c.B())n=new w(a,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{var b=new h.hd;if(b.Ib(a),b.Ib(c),h.Uk.W(b,p,m,!0),b.gd==0)n=new w(a.Ja(),4,-1,-1,NaN,4,-1,-1,NaN,-1,-1),f.push(n);else{for(a=0,c=b.Hd(),p=b.ld;p!=-1;p=b.ve(p))for(m=b.Ob(p);m!=-1;m=b.Sb(m))for(var S=b.Ya(m),M=0,T=b.Ka(m);M<T;S=b.V(S),M++)b.Sa(S,c,a++);a=r.BM(c,b),r.XL(n,a,b,f)}}},r.BM=function(n,a){for(var c=a.gd,p=new h.ja(0),f=a.ld;f!=-1;f=a.ve(f))for(var m=a.Ob(f);m!=-1;m=a.Sb(m))for(var b=a.Ya(m),S=0,M=a.Ka(m);S<M;b=a.V(b),S++)p.add(b);var T=new u(n,a);p.Wd(0,c,function(ge,ye){return T.kM(ge,ye)}),n=[];var k=[],C=a.Hd(),N=a.Hd();f=a.ld,m=a.ve(f),M=new h.h;var F=new h.h,D=p.get(0),j=a.cd(D),G=a.Rf(j);a.D(D,M);var W=1;for(b=0;W<c-1;){var J=!1;for(S=W;S<c;S++)if(S!=b){var B=p.get(S),Q=a.cd(B),ue=a.Rf(Q);if(a.D(B,F),!M.rb(F))break;G==f&&ue==m&&(J=r.oM(C,N,a,n,k,j,D,Q,B))}if(J||b==W-1){if(J&&b==W-1&&W--,++b==c)break;D=p.get(b),j=a.cd(D),G=a.Rf(j),a.D(D,M)}J||(W=b+1)}for(c=[],f=a.ld;f!=-1;f=a.ve(f))for(m=a.Ob(f);m!=-1;m=a.Sb(m))for(p=a.Ya(m),S=0,M=a.Ka(m);S<M;p=a.V(p),S++){if(0<=(b=a.Qa(p,N)))for(;b<k.length&&k[b].tg==p;)c.push(k[b++]);if(0<=(b=a.Qa(p,C)))for(;b<n.length&&n[b].tg==p;)c.push(n[b++])}return a.Ud(C),a.Ud(N),c},r.oM=function(n,a,c,p,f,m,b,S,M){var T=c.tj(m),k=c.tj(S),C=c.Ya(m),N=c.Ya(S),F=c.Na(b),D=c.Na(M),j=!1,G=!1,W=!1,J=!1;return b!=C&&(M!=N&&(j=r.pM(n,c,p,m,F,S,D)),M!=k&&(G=r.qM(n,c,p,m,F,S,M))),b!=T&&(M!=N&&(W=r.rM(a,c,f,m,b,S,D,C)),M!=k&&(J=r.sM(a,c,f,m,b,S,M,C))),j&&G&&W?(n=p.length-1,f[J?f.length-2:f.length-1].Gi==2&&(p[n-1]=p[n],--p.length)):j&&G&&J&&f[f.length-1].Gi==2&&(f=p[p.length-1],--p.length,c.Qa(f.tg,n)==p.length&&c.Sa(f.tg,n,-1)),j||G||W||J},r.pM=function(n,a,c,p,f,m,b){var S=new h.zb,M=new h.zb,T=[0,0],k=[0,0],C=a.cc(f);return C==null&&(a.fd(f,S),C=S),(S=a.cc(b))==null&&(a.fd(b,M),S=M),2>(C=C.Fa(S,null,T,k,0))&&(p=new o(f,p,T[0],NaN,C,b,m,k[0],NaN),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1)),!0},r.qM=function(n,a,c,p,f,m,b){var S=new h.zb,M=new h.zb,T=[0,0],k=[0,0],C=a.cc(f);return C==null&&(a.fd(f,S),C=S),(S=a.cc(b))==null&&(a.fd(b,M),S=M),2>(C=C.Fa(S,null,T,k,0))&&(p=new o(f,p,T[0],NaN,C,b,m,k[0],NaN),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),!0)},r.rM=function(n,a,c,p,f,m,b,S){var M=new h.zb,T=new h.zb,k=[0,0],C=[0,0],N=a.cc(f);return N==null&&(a.fd(f,M),N=M),(M=a.cc(b))==null&&(a.fd(b,T),M=T),(N=N.Fa(M,null,k,C,0))==2?(p=new o(f,p,k[0],k[1],N,b,m,C[0],C[1]),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),!0):(T=!1,f==S&&(p=new o(f,p,k[0],NaN,N,b,m,C[0],NaN),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),T=!0),T)},r.sM=function(n,a,c,p,f,m,b,S){var M=new h.zb,T=new h.zb,k=[0,0],C=[0,0],N=a.cc(f);return N==null&&(a.fd(f,M),N=M),(M=a.cc(b))==null&&(a.fd(b,T),M=T),(N=N.Fa(M,null,k,C,0))==2?(p=new o(f,p,k[0],k[1],N,b,m,C[0],C[1]),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),!0):(T=!1,f==S&&(p=new o(f,p,k[0],NaN,N,b,m,C[0],NaN),c.push(p),0>(p=a.Qa(f,n))&&a.Sa(f,n,c.length-1),T=!0),T)},r.XL=function(n,a,c,p){var f=[];f[0]=new h.h,f[1]=new h.h,f[2]=new h.h,f[3]=new h.h;var m=new h.h,b=new h.h,S=new h.h,M=new h.h,T=null;p!=null&&(T=new h.hg).Qr();var k=0,C=null,N=new h.zb;new h.zb;for(var F=c.Ob(c.ld);F!=-1;F=c.Sb(F)){for(var D=4,j=-1,G=-1,W=-1,J=-1,B=NaN,Q=!0,ue=!1,ge=!0,ye=!0,de=!0,we=0,je=F,Ve=0,pt=c.Ya(F),dt=c.Ka(F),ai=0;ai<dt;pt=c.V(pt),ai++){var Ct=c.cc(pt);if(Ct==null){if(!c.fd(pt,N))continue;Ct=N}G==-1&&(G=pt);for(var ke=0;k<a.length&&pt==a[k].tg;){j=a[k].Ps;var wt=a[k].tg,st=a[k].IA,Bt=a[k].Nm,Dt=a[k].Cl,fr=a[k].PH;if(a[k].Gi==2){if(ue||(je=j,G=wt,Ve=st,W=Bt,J=Dt,B=fr,D=2,p!=null?C=new h.Ua:we=0,de=!1,ye=!0),st=a[k].OH,fr=a[k].GT,p!=null?(Ct.dh(ke,a[k].OH,T),C.oc(T.get(),ye)):we++,ke=st,ue=!0,ye=Q=!1,k+1==a.length||a[k+1].Gi!=2||a[k+1].tg==wt&&a[k+1].IA!=ke){if(p!=null){var at=new w(C,2,j,wt,st,D,je,G,Ve,Bt,Dt);p.push(at)}else null.add(we);je=j,G=wt,Ve=st,W=Bt,J=Dt,B=fr,D=2,ue=Q=!1,ye=de=!0}}else{var Ei=c.V(wt);if(k<a.length-1&&a[k+1].tg==Ei&&a[k+1].Cl==Dt&&a[k+1].Gi==2)st!=ke&&(de&&(p!=null?C=new h.Ua:we=0),Q=0<k&&a[k-1].Ps==j?D==1?0:D==0?1:3:3,p!=null?(Ct.dh(ke,st,T),C.oc(T.get(),ye),at=new w(C,Q,j,wt,st,D,je,G,Ve,Bt,Dt),p.push(at)):(we++,null.add(we)),ke=st,je=j,G=wt,Ve=st,W=Bt,J=Dt,B=fr,D=Q,Q=ge=!1,ye=de=!0);else if(!r.wM(n,c,a,k,m,b)){r.tM(c,a,k,F,pt,S,M);var Xe=!1;if(Ei=!1,at=!0,!(m.rb(S)||b.rb(S)||m.rb(M)||b.rb(M))){f[0].N(m),f[1].N(b),f[2].N(S),f[3].N(M),f.sort(h.h.pu);var Uh=f[0],ql=f[1],Bh=f[2],ld=f[3];Uh.rb(m)?ql.rb(b)?n?(Ei=Xe=!0,at=!1):Xe=!1:ld.rb(b)?n?at=Ei=Xe=!0:Xe=!1:(Xe=!0,at=ql.rb(S)):ql.rb(m)?Bh.rb(b)?n?(Ei=Xe=!0,at=!1):Xe=!1:Uh.rb(b)?n?at=Ei=Xe=!0:Xe=!1:(Xe=!0,at=Bh.rb(S)):Bh.rb(m)?ld.rb(b)?n?(Ei=Xe=!0,at=!1):Xe=!1:ql.rb(b)?n?at=Ei=Xe=!0:Xe=!1:(Xe=!0,at=ld.rb(S)):Uh.rb(b)?n?(Ei=Xe=!0,at=!1):Xe=!1:Bh.rb(b)?n?at=Ei=Xe=!0:Xe=!1:(Xe=!0,at=Uh.rb(S))}Xe&&(Xe=pt==wt,(st!=ke||Xe&&ke==0)&&(de&&(p!=null?C=new h.Ua:we=0),p!=null?(Ct.dh(ke,st,T),C.oc(T.get(),ye)):we++),at?D!=1?((st!=ke||Xe&&ke==0)&&(p!=null?(at=new w(C,1,j,wt,st,D,je,G,Ve,Bt,Dt),p.push(at)):null.add(we)),Ei?(k>=a.length-2||a[k+2].Ps!=j)&&(D=0):D=1):((st!=ke||Xe&&ke==0)&&(p!=null?(at=new w(C,3,j,wt,st,D,je,G,Ve,Bt,Dt),p.push(at)):null.add(we)),D=1):D!=0?((st!=ke||Xe&&ke==0)&&(p!=null?(at=new w(C,0,j,wt,st,D,je,G,Ve,Bt,Dt),p.push(at)):null.add(we)),Ei?(k>=a.length-2||a[k+2].Ps!=j)&&(D=1):D=0):((st!=ke||Xe&&ke==0)&&(p!=null?(at=new w(C,3,j,wt,st,D,je,G,Ve,Bt,Dt),p.push(at)):null.add(we)),D=0),(st!=ke||Xe&&ke==0)&&(ke=st,je=j,G=wt,Ve=st,W=Bt,J=Dt,B=fr,Q=ge=!1,ye=de=!0))}}k++}ke!=1&&(de&&(p!=null?C=new h.Ua:we=0),p!=null?(Ct.dh(ke,1,T),C.oc(T.get(),ye)):we++,ye=de=!1,ge=!0)}ge&&(st=1,wt=c.tj(F),wt=c.Na(wt),Dt=Bt=-1,fr=NaN,Q?p!=null?(at=new w(C,4,j,wt,st,D,je,G,Ve,Bt,Dt),p.push(at)):null.add(we):(Q=D==1?0:D==0?1:3,p!=null?(at=new w(C,Q,j,wt,st,D,je,G,Ve,Bt,Dt),p.push(at)):null.add(we)))}},r.wM=function(n,a,c,p,f,m){var b=c[p].PH;if(b==1)return r.uM(n,a,c,p,f,m);if(b==0)return r.vM(n,a,c,p,f,m);throw h.i.Ra()},r.uM=function(n,a,c,p,f,m){var b=new h.zb,S=c[p].tg,M=c[p].Nm,T=c[p].Cl,k=-1,C=-1,N=-1,F=-1;if(!n&&0<p){var D=c[p-1];k=D.tg,C=D.Nm,N=D.Cl,F=D.Gi}var j=-1,G=-1,W=-1,J=-1;p<c.length-1&&(j=(D=c[p+1]).tg,G=D.Nm,W=D.Cl,J=D.Gi);var B=a.V(S);return D=a.V(T),n?p==c.length-1||j!=S||G!=M||W!=D||J==2?((n=a.cc(T))==null&&(a.fd(T,b),n=b),m.N(n.jg()),f.nt(m),m.normalize(),f.normalize(),!1):((n=a.cc(T))==null&&(a.fd(T,b),n=b),f.N(n.jg()),(n=a.cc(D))==null&&(a.fd(D,b),n=b),m.N(n.jg()),f.Uq(),m.normalize(),f.normalize(),!1):0<p&&k==S&&C==M&&N==D&&F==2||p<c.length-1&&j==B&&G==M&&W==D&&J==2?((n=a.cc(T))==null&&(a.fd(T,b),n=b),m.N(n.jg()),f.nt(m),m.normalize(),f.normalize(),!1):!(p<c.length-1&&j==S&&G==M&&W==D)||((n=a.cc(T))==null&&(a.fd(T,b),n=b),f.N(n.jg()),(n=a.cc(D))==null&&(a.fd(D,b),n=b),m.N(n.jg()),f.Uq(),m.normalize(),f.normalize(),!1)},r.vM=function(n,a,c,p,f,m){var b=new h.zb,S=c[p].tg,M=c[p].Nm,T=c[p].Cl,k=-1,C=-1,N=-1,F=-1;if(!n&&p<c.length-1){var D=c[p+1];k=D.tg,C=D.Nm,N=D.Cl,F=D.Gi}var j=-1,G=-1,W=-1;D=-1,0<p&&(j=(D=c[p-1]).tg,G=D.Nm,W=D.Cl,D=D.Gi);var J=a.V(S),B=a.Na(T);return n?p!=0&&j==S&&G==M&&W==B&&D!=2||((n=a.cc(T))==null&&(a.fd(T,b),n=b),m.N(n.jg()),f.nt(m),m.normalize(),f.normalize(),!1):!(0<p&&j==S&&G==M&&W==B&&D==2||p<c.length-1&&k==J&&C==M&&N==B&&F==2)||((n=a.cc(T))==null&&(a.fd(T,b),n=b),m.N(n.jg()),f.nt(m),m.normalize(),f.normalize(),!1)},r.tM=function(n,a,c,p,f,m,b){var S=new h.zb,M=n.cc(f);if(M==null&&(n.fd(f,S),M=S),a=(c=a[c]).tg,c=c.IA,f=n.V(a),c==1)m.N(M.jg()),f!=-1&&f!=n.tj(p)?((M=n.cc(f))==null&&(n.fd(f,S),M=S),b.N(M.jg()),(M=n.cc(a))==null&&n.fd(a,S)):b.N(m),m.Uq(),b.normalize(),m.normalize();else{if(c!=0)throw h.i.Ra();b.N(M.jg()),m.nt(b),b.normalize(),m.normalize()}},r}()}(q||(q={})),function(h){var A;(A=h.WL||(h.WL={}))[A.Linear=0]="Linear",A[A.Angular=1]="Angular",A[A.Area=2]="Area";var w=function(){function p(f,m,b){this.od=m,this.ci=b,this.pA=f}return p.prototype.Nb=function(f){return f instanceof p&&this.ci===f.ci},p.VF=function(f){return f.od!==0?null:f.pA===-1?new p(-1,2,f.ci*f.ci):p.ah(a[f.pA])},p.ah=function(f){return(f=n[f])===void 0?null:f},p.TO=function(f,m,b){var S=null;if(b!=null)try{b.values[0]==="EPSG"&&(S=p.ah(parseInt(b.values[1])))}catch{}return S===null&&(S=new p(-1,f,m)),S},p.prototype.Fc=function(){return this.pA},p.prototype.wF=function(f){if(f.od!=this.od)throw h.i.Hb();return this.ci/f.ci},p.Ph=function(f,m,b){return m.wF(b)*f},p.RE=function(f,m,b,S,M){for(b=b.wF(S),S=0;S<m;S++)M[S]=f[S]*b},p}();h.Uc=w;for(var u=[109401,1e4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2.5899984703195216e6,109414,1e6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988110336e-6,109440,.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1e-4,109452,1e-6,109453,64516e-8,109454,.0006451625806477421,109455,25.292852640000003,109456,25.29295381171408,109457,3.4345281495040003e6,109458,3434290937856e-6,109459,2.89612324,109460,25e8,109461,225e8,109462,.7168473118308245,109463,100,109464,1244521604938272e-22,109465,1e-12,109466,1e-18],o=[1031,484813681109536e-23,9101,1,9102,.0174532925199433,9103,.0002908882086657216,9104,484813681109536e-20,9105,.01570796326794897,9106,.01570796326794897,9109,1e-6,9112,.0001570796326794897,9113,1570796326794897e-21,9114,.0009817477042468104],r=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1e3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,.0003527777777777778,109464,109017,1e-6,109465,109018,1e-9,109466,109030,5e4,109460,109031,15e4,109461],n=[],a=[],c=0;c<u.length;c+=2)n[u[c]]=new w(u[c],2,u[c+1]);for(u=null,c=0;c<o.length;c+=2)n[o[c]]=new w(o[c],1,o[c+1]);for(o=null,c=0;c<r.length;c+=3)n[r[c]]=new w(r[c],0,r[c+1]),a[r[c]]=r[c+2];r=null}(q||(q={})),function(h){var A=function(){function w(){this.yb=this.pb=0}return w.prototype.set=function(u,o){o!==void 0?(this.pb=u,this.yb=o):typeof u=="number"?(this.pb=u,this.yb=0):(this.pb=u.pb,this.yb=u.yb)},w.prototype.value=function(){return this.pb},w.prototype.add=function(u){var o=this.pb+u.pb;u=this.yb+u.yb+2220446049250313e-31*Math.abs(o),this.pb=o,this.yb=u},w.prototype.eN=function(){var u=this.pb+1,o=this.yb+2220446049250313e-31*Math.abs(u);this.pb=u,this.yb=o},w.prototype.YM=function(u,o){this.pb=u.pb+o.pb,this.yb=u.yb+o.yb+2220446049250313e-31*Math.abs(this.pb)},w.prototype.sub=function(u){if(typeof u=="number"){var o=this.pb-u;u=this.yb+2220446049250313e-31*Math.abs(o)}else o=this.pb-u.pb,u=this.yb+u.yb+2220446049250313e-31*Math.abs(o);this.pb=o,this.yb=u},w.prototype.Ag=function(u){var o=this.pb*u.pb;this.yb=this.yb*Math.abs(u.pb)+u.yb*Math.abs(this.pb)+this.yb*u.yb+2220446049250313e-31*Math.abs(o),this.pb=o},w.prototype.Oo=function(u){var o=this.pb*u;this.yb=this.yb*Math.abs(u)+2220446049250313e-31*Math.abs(o),this.pb=o},w.prototype.Ml=function(u,o){var r=Math.abs(u.pb)*Math.abs(o.pb);this.yb=u.yb*Math.abs(o.pb)+o.yb*Math.abs(u.pb)+u.yb*o.yb+2220446049250313e-31*Math.abs(r),this.pb=r},w.prototype.lm=function(u){var o=Math.abs(u.pb),r=this.pb/u.pb,n=(this.yb+Math.abs(r)*u.yb)/o;u.yb>.01*o&&(n*=1+(1+(u=u.yb/o))*u),this.pb=r,this.yb=n+2220446049250313e-31*Math.abs(r)},w.prototype.sqrt=function(){if(0<=this.pb){var u=Math.sqrt(this.pb),o=this.pb>10*this.yb?.5*this.yb/u:this.pb>this.yb?u-Math.sqrt(this.pb-this.yb):Math.max(u,Math.sqrt(this.pb+this.yb)-u);o+=2220446049250313e-31*Math.abs(u)}else this.pb<-1*this.yb?o=u=NaN:(u=0,o=Math.sqrt(this.yb));this.pb=u,this.yb=o},w.prototype.sin=function(u){var o=Math.sin(u.pb),r=Math.cos(u.pb);this.pb=o,o=Math.abs(o),this.yb=(Math.abs(r)+.5*o*u.yb)*u.yb+2220446049250313e-31*o},w.prototype.cos=function(u){var o=Math.sin(u.pb),r=Math.cos(u.pb);this.pb=r,r=Math.abs(r),this.yb=(Math.abs(o)+.5*r*u.yb)*u.yb+2220446049250313e-31*r},w.prototype.qg=function(){return Math.abs(this.pb)<=this.yb},w.prototype.rs=function(){return this.qg()&&this.yb!=0},w}();h.Xb=A}(q||(q={}));var Zt=new q.h,Ks=new q.h,Fn=new q.h,Dn=new q.h,So=new q.h;(function(h){var A,w;(w=A||(A={}))[w.closedPath=1]="closedPath",w[w.exteriorPath=2]="exteriorPath",w[w.ringAreaValid=4]="ringAreaValid";var u=function(){function o(r,n,a,c,p,f,m){n!==void 0?(this.ib=r,this.dk=n,this.dl=a,this.ki=c,this.za=f,this.cA=m,this.gw=p):(this.ib=r.ib,this.dk=r.dk,this.dl=r.dl,this.ki=r.ki,this.za=r.za,this.cA=r.cA,this.gw=r.gw),this.WG=!0}return o.prototype.next=function(){return this.WG?(this.WG=!1,this.ki):this.ki!=-1?(this.ki=this.ib.V(this.ki),this.za++,this.ki!=-1&&this.ki!=this.gw?this.ki:this.ST()):-1},o.prototype.ST=function(){for(this.dl=this.ib.Sb(this.dl),this.za=0;this.dk!=-1;){for(;this.dl!=-1;this.dl=this.ib.Sb(this.dl))if(this.gw=this.ki=this.ib.Ya(this.dl),this.ki!=-1)return this.ki;if(this.dk=this.ib.ve(this.dk),this.dk==-1)break;this.cA&&!h.ba.Ic(this.ib.jc(this.dk))||(this.dl=this.ib.Ob(this.dk))}return-1},o.uP=function(r,n,a,c,p,f,m){return new o(r,n,a,c,p,f,m)},o}();h.rY=u,A=function(){function o(){this.ko=this.Cm=this.xk=this.dd=this.Dk=this.wo=this.Qi=this.md=this.di=this.Ug=this.Te=this.Kl=null,this.sw=this.ld=-1,this.gd=0,this.aA=!1,this.it=this.jt=this.wb=null}return o.prototype.Uh=function(r){return this.Te!=null?this.Te[r]:null},o.prototype.Zg=function(r,n){if(this.Te==null){if(n==null)return;this.Te=[];for(var a=0,c=this.wb.I();a<c;a++)this.Te.push(null)}this.Te[r]=n},o.prototype.cp=function(r,n){this.md.T(r,1,n)},o.prototype.bp=function(r,n){this.md.T(r,2,n)},o.prototype.PB=function(r,n){this.md.T(r,6,n)},o.prototype.Up=function(r){return this.md.U(r,6)},o.prototype.gx=function(r,n){this.md.T(r,7,n)},o.prototype.sv=function(r){return this.md.U(r,0)},o.prototype.IJ=function(r,n){this.dd.T(r,1,n)},o.prototype.MJ=function(r,n){this.dd.T(r,0,n)},o.prototype.DF=function(r){return this.dd.U(r,7)},o.prototype.$o=function(r,n){this.dd.T(r,3,n)},o.prototype.ap=function(r,n){this.dd.T(r,4,n)},o.prototype.mU=function(r){this.dd==null&&(this.dd=new h.ad(8));var n=this.dd.De();return this.dd.T(n,2,r),this.dd.T(n,5,0),this.dd.T(n,6,0),this.dd.T(n,7,n),n},o.prototype.IQ=function(r){this.dd.kd(r)},o.prototype.oU=function(r){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.wo=new h.ce(0));var n=this.md.De();return this.md.T(n,0,n),this.md.T(n,3,0),this.md.T(n,6,0),this.gx(n,r),n>=this.Qi.size&&(r=16>n?16:h.P.truncate(3*n/2),this.Qi.resize(r),this.wo.resize(r)),this.Qi.set(n,0),this.wo.set(n,0),n},o.prototype.mF=function(r){this.md.kd(r)},o.prototype.Qy=function(r){this.ud.kd(r),this.gd--},o.prototype.iI=function(r){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.wo=new h.ce(0));var n=this.ud.De(),a=0<=r?r:n;if(this.ud.T(n,0,a),0>r){if(a>=this.wb.I()){if(r=16>a?16:h.P.truncate(3*a/2),this.wb.resize(r),this.Te!=null)for(var c=0;c<r;c++)this.Te.push(null);this.Ug!=null&&this.Ug.resize(r),this.jt=this.wb.vb(0)}this.wb.Db(a,-1e38,-1e38),this.Te!=null&&(this.Te[a]=null),this.Ug!=null&&this.Ug.write(a,1)}return this.ud.T(n,4,2*a),this.gd++,n},o.prototype.yj=function(r,n,a){var c=n!=-1?this.Na(n):this.tj(r),p=c!=-1?this.V(c):-1,f=this.iI(a==null?this.gd:-1),m=this.Va(f);return a!=null&&this.wb.It(m,a),this.cj(f,r),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),a=this.ec(r),c=this.Ya(r),n==-1&&this.Yg(r,f),n==c&&this.Kf(r,f),a&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(r,this.Ka(r)+1),r=this.Rf(r),this.Vj(r,this.I(r)+1),f},o.prototype.pm=function(){return this.ko==null&&(this.ko=new h.Ta(this.wb.description)),this.ko},o.prototype.Zo=function(r,n){this.dd.T(r,2,-134217729&this.dd.U(r,2)||(n==1?134217728:0))},o.prototype.Jn=function(r){return(134217728&this.dd.U(r,2))!=0?1:0},o.prototype.bN=function(r){var n=this.Kg(r.K(),r.description);return r.K()==1736&&this.Zo(n,r.Jn()),this.OD(n,r),n},o.prototype.cN=function(r){var n=this.Kg(r.K(),r.description);return this.PD(n,r),n},o.prototype.PV=function(r,n){this.md==null&&(this.md=new h.ad(8),this.ud=new h.ad(5),this.Qi=new h.ce(0),this.wo=new h.ce(0)),this.md.Ee(this.md.Jg+r),this.ud.Ee(this.ud.Jg+n),this.Qi.Jb(this.Qi.size+r),this.wo.Jb(this.wo.size+r)},o.prototype.OD=function(r,n){this.PV(n.ea(),n.I()),this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0);for(var a=this.Te!=null&&n.Se!=null,c=0,p=n.ea();c<p;c++)if(!(2>n.Ka(c))){var f=this.wf(r,-1);this.mn(f,n.ec(c));for(var m=n.Ca(c),b=n.Wc(c);m<b;m++){var S=this.yj(f,-1,null);if(a)if(S=this.Va(S),(1&n.TF(m))!=0)this.Zg(S,null);else{var M=new h.hg;n.cc(m,M,!0),this.Zg(S,M.get())}}}},o.prototype.PD=function(r,n){this.Kl.Gd(n,0,n.I()),this.jt=this.wb.vb(0),r=this.wf(r,-1);var a=0;for(n=n.I();a<n;a++)this.yj(r,-1,null)},o.prototype.FX=function(r,n,a){var c=this.V(r);if(c==-1)throw h.i.Ra();for(var p=this.pm(),f=this.cd(r),m=0,b=n.ql(a);m<b;m++){var S=this.Va(r),M=this.V(r),T=n.Xp(a,m);m==0&&(T.Uo(p),this.Fh(r,p)),T.K()==322?this.Zg(S,null):this.Zg(S,h.ba.ig(T)),T.Qo(p),m<b-1?r=this.yj(f,M,p):this.Fh(c,p)}},o.prototype.EX=function(r,n,a){var c=this.V(r);if(c==-1)throw h.i.Ra();for(var p=this.pm(),f=this.cd(r),m=0,b=n.ql(a);m<b;m++){var S=this.Va(r),M=this.V(r),T=n.Xp(a,b-m-1);m==0&&(T.Qo(p),this.Fh(r,p)),T.K()==322?this.Zg(S,null):this.Zg(S,h.ba.ig(T)),T.Uo(p),m<b-1?r=this.yj(f,M,p):this.Fh(c,p)}},o.prototype.CF=function(){var r=new h.l;r.Pa();for(var n=this.$q(),a=new h.h,c=!0,p=n.next();p!=-1;p=n.next())this.D(p,a),c?r.$b(a.x,a.y):r.Mk(a.x,a.y),c=!1;return r},o.prototype.Ib=function(r){var n=r.K();if(h.ba.Ic(n))return this.bN(r);if(n==550)return this.cN(r);throw h.i.Ra()},o.prototype.oN=function(r,n){var a=n.K();if(h.ba.Ic(a))this.OD(r,n);else{if(a!=550)throw h.i.Ra();this.PD(r,n)}},o.prototype.gN=function(r,n){var a=this.Kg(1736,r.description);if(2>r.Ka(n))return a;this.Kl.Gd(r,r.Ca(n),r.Wc(n)),this.jt=this.wb.vb(0);var c=this.wf(a,-1);this.mn(c,r.ec(n)||!0);var p=this.Te!=null&&r.Se!=null,f=r.Ca(n);for(n=r.Wc(n);f<n;f++){var m=this.yj(c,-1,null);if(p)if(m=this.Va(m),(1&r.TF(f))!=0)this.Zg(m,null);else{var b=new h.hg;r.cc(f,b,!0),this.Zg(m,b.get())}}return a},o.prototype.Ke=function(r){var n=this.jc(r),a=h.TK.Kg(n,this.Kl.description),c=this.I(r);if(c==0)return a;if(h.ba.Ic(n)){n=this.ea(r);for(var p=h.Zc.Qh(n+1),f=h.Zc.Or(n+1,0),m=a.description,b=0,S=m.Ba;b<S;b++){for(var M=m.qd(b),T=h.ua.Wa(M),k=h.Zc.SE(M,c),C=this.wb.vb(M),N=0,F=0,D=0,j=this.Ob(r);j!=-1;j=this.Sb(j)){var G=0;this.ec(j)&&(G|=1),this.QS(j)&&(G|=4),G!=0&&f.tJ(F,G);var W=this.Ka(j);if(p.write(F++,D),D+=W,M==0){W=C;var J=k,B=new h.h;for(G=this.Ya(j);N<D;G=this.V(G),N++){var Q=this.Va(G);W.uc(2*Q,B),J.Vt(2*N,B)}}else for(G=this.Ya(j);N<D;G=this.V(G),N++)for(Q=this.Va(G),J=0;J<T;J++)B=C.Bg(Q*T+J),k.rr(N*T+J,B)}a.kn(M,k),p.write(n,c)}a.JJ(f),a.KJ(p),a.Qc(16777215)}else if(n==550){for(m=a.description,a.resize(c),b=0,S=m.Ba;b<S;b++){for(M=m.qd(b),T=h.ua.Wa(M),k=a.vb(M),C=this.wb.vb(M),N=0,j=this.Ob(r),W=this.Ka(j),G=this.Ya(j);N<W;G=this.V(G),N++)for(Q=this.Va(G),J=0;J<T;J++)B=C.Bg(Q*T+J),k.rr(N*T+J,B);a.kn(M,k)}a.Qc(16777215)}return a},o.prototype.vB=function(r){for(var n=this.Ob(r);n!=-1;n=this.ar(n));n=this.IR(r);var a=this.ve(r);n!=-1?this.IJ(n,a):this.ld=a,a!=-1?this.MJ(a,n):this.sw=n,this.IQ(r)},o.prototype.Kg=function(r,n){return n===void 0?this.UE(r,h.ee.og()):this.UE(r,n)},o.prototype.UE=function(r,n){return r=this.mU(r),this.wb==null?this.wb=this.Kl=new h.de(n):this.Kl.Ll(n),this.it=this.Kl.description,this.aA=1<this.it.Ba,this.ld==-1?this.ld=r:(this.MJ(r,this.sw),this.IJ(this.sw,r)),this.sw=r},o.prototype.ve=function(r){return this.dd.U(r,1)},o.prototype.IR=function(r){return this.dd.U(r,0)},o.prototype.jc=function(r){return 2147483647&this.dd.U(r,2)},o.prototype.BJ=function(r,n,a){n=this.xk[n],(r=this.DF(r))>=n.size&&n.resize(Math.max(h.P.truncate(1.25*r),16),-1),n.write(r,a)},o.prototype.EF=function(r,n){return(r=this.DF(r))<(n=this.xk[n]).size?n.read(r):-1},o.prototype.VE=function(){this.xk==null&&(this.xk=[]);for(var r=0;r<this.xk.length;r++)if(this.xk[r]==null)return this.xk[r]=h.Zc.Qh(0),r;return this.xk.push(h.Zc.Qh(0)),this.xk.length-1},o.prototype.pW=function(r){this.xk[r]=null},o.prototype.Ob=function(r){return this.dd.U(r,3)},o.prototype.mv=function(r){return this.dd.U(r,4)},o.prototype.I=function(r){return this.dd.U(r,5)},o.prototype.ea=function(r){return this.dd.U(r,6)},o.prototype.Ip=function(r,n,a){for(var c=0,p=this.ld;p!=-1;p=this.ve(p)){var f=this.jc(p);if(h.ba.Ic(f)&&(!a||f==1736)){f=this.jc(p)==1736;for(var m=this.Ob(p);m!=-1;){for(var b=0,S=this.Ya(m);b<h.P.truncate(this.Ka(m)/2);){var M=this.V(S);if(M==-1)break;var T=this.Va(S),k=this.Uh(T);k!=null?T=k.Rb():(k=this.Va(M),T=this.wb.Ar(T,k)),T<=r?(T==0?c==0&&(c=-1):c=1,M!=this.tj(m)&&(this.fC(M,S),this.pd(M,!0))):S=this.V(S),b++}for(b=this.Ya(m),S=this.ec(m)?b:this.tj(m);0<this.Ka(m);){if((M=this.Na(S))==-1){this.pd(S,!0),c==0&&(c=-1);break}var C=this.Va(M);if((k=this.Uh(C))!=null?T=k.Rb():(T=this.Va(S),T=this.wb.Ar(T,C)),T<=r)T==0?c==0&&(c=-1):c=1,this.fC(M,S),this.pd(M,!1),b==M&&(b=this.Ya(m));else if((S=this.Na(S))==b)break}S=this.Ka(m),n&&(f?3>S:2>S)?(m=this.ar(m),c=0<S?1:c==0?-1:c):m=this.Sb(m)}}}return c},o.prototype.fC=function(r,n){var a=this.Va(r),c=this.Va(n);if(this.Ug!=null&&(a=this.Ug.read(a),this.Ug.write(c,a)),this.di!=null){for(c=0,a=this.di.length;c<a;c++)if(this.di[c]!=null){var p=this.Qa(r,c);p!=-1&&this.Sa(n,c,p)}}},o.prototype.Wl=function(r,n,a){var c=0,p=this.V(r);if(p==-1)throw h.i.Ra();for(var f=this.Va(r),m=this.Va(p),b=this.Uh(f),S=b==null?this.wb.Ar(f,m):b.Rb(),M=0;M<a;M++){var T=n[M];if(0<T&&1>T){var k=T;b!=null&&(k=0<S?b.Tx(T)/S:0),this.wb.eD(f,m,k,this.pm());var C=this.yj(this.cd(r),p,this.pm());if(c++,b!=null){var N=b.fl(0,T);k=this.Va(this.Na(C)),this.Zg(k,N),this.mf(C,N.xc()),M!=a-1&&n[M+1]!=1||(T=b.fl(T,1),this.Zg(k,T))}}}return c},o.prototype.DX=function(r,n,a){var c=0,p=this.V(r);if(p==-1)throw h.i.ga("internal error");var f=this.Va(r),m=this.Va(p),b=this.Uh(f),S=b==null?this.wb.Ar(f,m):b.Rb(),M=0;r=this.cd(r);for(var T=0;T<a;T++){var k=n[T];if(M<k&&1>k){var C=k;if(b!=null&&(C=0<S?b.Tx(k)/S:0),this.wb.eD(f,m,C,this.pm()),C=this.rS(r,p,this.pm()),c++,b!=null){M=b.fl(M,k);var N=this.Va(this.Na(C));this.Zg(N,M),this.Db(C,M.qa,M.ma),T!=a-1&&n[T+1]!=1||(M=b.fl(k,1),C=this.Va(C),this.Zg(C,M))}}M=k}return c},o.prototype.rS=function(r,n,a){var c=n!=-1?this.Na(n):this.tj(r),p=c!=-1?this.V(c):-1,f=this.iI(a==null?this.gd:-1),m=this.Va(f);return a!=null&&this.wb.It(m,a),this.cj(f,r),this.Cc(f,p),this.Dc(f,c),p!=-1&&this.Dc(p,f),c!=-1&&this.Cc(c,f),a=this.ec(r),c=this.Ya(r),n==-1&&this.Yg(r,f),n==c&&(a&&c!=-1||this.Kf(r,f)),a&&p==-1&&(this.Cc(f,f),this.Dc(f,f)),this.Xj(r,this.Ka(r)+1),r=this.Rf(r),this.Vj(r,this.I(r)+1),f},o.prototype.oE=function(r,n,a){var c=this.Va(n),p=this.Va(a);if(0>c||p>this.gd-1)throw h.i.O("invalid call");if(c>p&&!this.ec(r))throw h.i.O("cannot iterate across an open path");for(r=0;n!=a;n=this.V(n))c=this.Va(n),(p=this.Uh(c))!=null?r+=p.Rb():(p=this.Va(this.V(n)),r+=this.wb.Ar(c,p));return r},o.prototype.Fh=function(r,n){var a=this.Va(r);this.wb.It(a,n),(a=this.Uh(a))!=null&&a.setStart(n),(r=this.Na(r))!=-1&&(r=this.Va(r),this.Uh(r)!=null&&a.setEnd(n))},o.prototype.Xi=function(r,n){r=this.Va(r),this.wb.we(r,n)},o.prototype.mf=function(r,n){this.Db(r,n.x,n.y)},o.prototype.Db=function(r,n,a){var c=this.Va(r);this.wb.Db(c,n,a),(c=this.Uh(c))!=null&&c.TB(n,a),(r=this.Na(r))!=-1&&(r=this.Va(r),this.Uh(r)!=null&&c.Sl(n,a))},o.prototype.D=function(r,n){this.wb.D(this.ud.U(r,0),n)},o.prototype.Hc=function(r,n){this.wb.Aa[0].uc(2*this.ud.U(r,0),n)},o.prototype.Oa=function(r){var n=new h.h;return this.wb.D(this.ud.U(r,0),n),n},o.prototype.YF=function(r,n){this.jt.uc(2*r,n)},o.prototype.Vc=function(r,n,a){return this.wb.Vc(r,this.Va(n),a)},o.prototype.setAttribute=function(r,n,a,c){this.wb.setAttribute(r,this.Va(n),a,c)},o.prototype.Va=function(r){return this.ud.U(r,0)},o.prototype.kh=function(){var r=new h.h;return this.D(void 0,r),r.y},o.prototype.hq=function(r,n){r=this.Va(r),n=this.Va(n);var a=this.wb.Aa[0].o;return a[2*r]===a[2*n]&&a[2*r+1]===a[2*n+1]},o.prototype.Fv=function(r,n){r=this.Va(r);var a=this.wb.Aa[0].o;return a[2*r]===n.x&&a[2*r+1]===n.y},o.prototype.nX=function(r,n){if(1>n&&(n=1),this.Ug==null){if(n==1)return;this.Ug=h.Zc.En(this.wb.I(),1)}(r=this.Va(r))>=this.Ug.size&&this.Ug.resize(r+1,1),this.Ug.write(r,n)},o.prototype.XF=function(r){return r=this.Va(r),this.Ug==null||r>=this.Ug.size?1:this.Ug.read(r)},o.prototype.Sa=function(r,n,a){n=this.di[n],r=this.Va(r),n.size<this.wb.I()&&n.resize(this.wb.I(),-1),n.write(r,a)},o.prototype.Qa=function(r,n){return(r=this.Va(r))<(n=this.di[n]).size?n.read(r):-1},o.prototype.Hd=function(){this.di==null&&(this.di=[]);for(var r=0;r<this.di.length;r++)if(this.di[r]==null)return this.di[r]=h.Zc.Qh(0,-1),r;return this.di.push(h.Zc.Qh(0,-1)),this.di.length-1},o.prototype.Ud=function(r){this.di[r]=null},o.prototype.cc=function(r){return this.Te!=null?(r=this.Va(r),this.Te[r]):null},o.prototype.fd=function(r,n){var a=this.ud.U(r,2);if(a==-1)return!1;if(this.aA){var c=new h.Ta;this.Xi(r,c),n.setStart(c),this.Xi(a,c),n.setEnd(c)}else this.wb.Hc(this.ud.U(r,0),Zt),n.gm(0,Zt),this.wb.Hc(this.ud.U(a,0),Zt),n.gm(1,Zt);return!0},o.prototype.eW=function(r,n,a){if(this.aA){var c=new h.Ta;this.Xi(r,c),a.setStart(c),this.Xi(n,c),a.setEnd(c)}else this.wb.Hc(r,Zt),a.gm(0,Zt),this.wb.Hc(n,Zt),a.gm(1,Zt)},o.prototype.wf=function(r,n){if(n!=-1){if(r!=this.Rf(n))throw h.i.Ra();var a=this.es(n)}else a=this.mv(r);var c=this.oU(r);return n!=-1&&this.cp(n,c),this.bp(c,n),this.cp(c,a),a!=-1?this.bp(a,c):this.$o(r,c),n==-1&&this.ap(r,c),this.Tl(r,this.ea(r)+1),c},o.prototype.hG=function(r,n,a,c){r=this.wf(r,-1);for(var p=0,f=n,m=!1;f==a&&(m=!0),this.cj(f,r),p++,(f=this.V(f))!=n;);return this.mn(r,!0),this.Xj(r,p),m&&(n=a),this.Kf(r,n),this.Yg(r,this.Na(n)),this.ep(r,!1),c!=null&&(c[0]=m),r},o.prototype.ar=function(r){var n=this.es(r),a=this.Sb(r),c=this.Rf(r);return n!=-1?this.bp(n,a):this.$o(c,a),a!=-1?this.cp(a,n):this.ap(c,n),this.uO(r),this.Tl(c,this.ea(c)-1),this.mF(r),a},o.prototype.uO=function(r){var n=this.Ya(r);if(n!=-1){for(var a=0,c=this.Ka(r);a<c;a++){var p=n;n=this.V(n),this.Qy(p)}n=this.Rf(r),this.Vj(n,this.I(n)-this.Ka(r))}this.Xj(r,0)},o.prototype.Sb=function(r){return this.md.U(r,2)},o.prototype.es=function(r){return this.md.U(r,1)},o.prototype.Ka=function(r){return this.md.U(r,3)},o.prototype.ec=function(r){return(1&this.Up(r))!=0},o.prototype.mn=function(r,n){if(this.ec(r)!=n){if(0<this.Ka(r)){var a=this.Ya(r),c=this.tj(r);n?(this.Cc(c,a),this.Dc(a,c),a=this.Va(c)):(this.Cc(c,-1),this.Dc(a,-1),a=this.Va(c)),this.Zg(a,null)}this.PB(r,(1|this.Up(r))-1|(n?1:0))}},o.prototype.Rf=function(r){return this.md.U(r,7)},o.prototype.QS=function(r){return(2&this.Up(r))!=0},o.prototype.JB=function(r,n){this.PB(r,(2|this.Up(r))-2|(n?2:0))},o.prototype.qz=function(r){if(this.VS(r))return this.Qi.get(this.sv(r));var n=new h.zb,a=this.Ya(r);if(a==-1)return 0;var c=new h.h;this.D(a,c);for(var p=0,f=0,m=this.Ka(r);f<m;f++,a=this.V(a)){var b=this.cc(a);if(b==null){if(!this.fd(a,n))continue;b=n}p+=b.Sx(c.x,c.y)}return this.ep(r,!0),this.Qi.set(this.sv(r),p),p},o.prototype.ir=function(r,n,a){n=this.Dk[n],r=this.sv(r),n.size<this.Qi.size&&n.resize(this.Qi.size,-1),n.write(r,a)},o.prototype.uj=function(r,n){return(r=this.sv(r))<(n=this.Dk[n]).size?n.read(r):-1},o.prototype.Fy=function(){this.Dk==null&&(this.Dk=[]);for(var r=0;r<this.Dk.length;r++)if(this.Dk[r]==null)return this.Dk[r]=h.Zc.Qh(0),r;return this.Dk.push(h.Zc.Qh(0)),this.Dk.length-1},o.prototype.wB=function(r){this.Dk[r]=null},o.prototype.RT=function(r,n,a){if(a==-1)throw h.i.O();if(n!=a){var c=this.Sb(a),p=this.es(a),f=this.Rf(a);p==-1?this.$o(f,c):this.bp(p,c),c==-1?this.ap(f,p):this.cp(c,p),this.Vj(f,this.I(f)-this.Ka(a)),this.Tl(f,this.ea(f)-1),p=n==-1?this.mv(r):this.es(n),this.cp(a,p),this.bp(a,n),n==-1?this.ap(r,a):this.cp(n,a),p==-1?this.$o(r,a):this.bp(p,a),this.Vj(r,this.I(r)+this.Ka(a)),this.Tl(r,this.ea(r)+1),this.gx(a,r)}},o.prototype.kj=function(r,n){this.wb.we(this.Va(n),this.pm()),this.yj(r,-1,this.pm())},o.prototype.pd=function(r,n){var a=this.cd(r),c=this.Na(r),p=this.V(r);c!=-1&&this.Cc(c,p);var f=this.Ka(a);if(r==this.Ya(a)&&this.Kf(a,1<f?p:-1),p!=-1&&this.Dc(p,c),r==this.tj(a)&&this.Yg(a,1<f?c:-1),c!=-1&&p!=-1){c=this.Va(c);var m=this.Va(p);n?(n=this.Uh(c))!=null&&(c=new h.h,this.wb.D(m,c),n.Rc(c)):(m=this.Va(r),n=this.Uh(m),this.Zg(c,n),n!=null&&(c=this.wb.Oa(c),n.Ec(c)))}return this.Xj(a,f-1),a=this.Rf(a),this.Vj(a,this.I(a)-1),this.Qy(r),p},o.prototype.Ya=function(r){return this.md.U(r,4)},o.prototype.tj=function(r){return this.md.U(r,5)},o.prototype.V=function(r){return this.ud.U(r,2)},o.prototype.Na=function(r){return this.ud.U(r,1)},o.prototype.cd=function(r){return this.ud.U(r,3)},o.prototype.hc=function(r,n){return this.yj(r,-1,n)},o.prototype.$q=function(r){if(r===void 0)return this.$q(!1);if(r instanceof u)return new u(r);var n,a=-1,c=-1,p=-1,f=0,m=!1;for(n=this.ld;n!=-1;n=this.ve(n))if(!r||h.ba.Ic(this.jc(n))){for(a=this.Ob(n);a!=-1;a=this.Sb(a))if(p=c=this.Ya(a),f=0,c!=-1){m=!0;break}if(m)break}return u.uP(this,n,a,c,p,f,r)},o.prototype.Pc=function(r){if(this.Kl.Pc(r),this.Te!=null)for(var n=0,a=this.Te.length;n<a;n++)this.Te[n]!=null&&this.Te[n].Pc(r)},o.prototype.lr=function(r,n,a,c){c?this.FX(r,n,a):this.EX(r,n,a)},o.prototype.Dc=function(r,n){this.ud.T(r,1,n)},o.prototype.Cc=function(r,n){this.ud.T(r,2,n)},o.prototype.cj=function(r,n){this.ud.T(r,3,n)},o.prototype.Xj=function(r,n){this.md.T(r,3,n)},o.prototype.Kf=function(r,n){this.md.T(r,4,n)},o.prototype.Yg=function(r,n){this.md.T(r,5,n)},o.prototype.Tl=function(r,n){this.dd.T(r,6,n)},o.prototype.Vj=function(r,n){this.dd.T(r,5,n)},o.prototype.jJ=function(r){var n=r;do{var a=this.V(n);this.Cc(n,this.Na(n)),this.Dc(n,a),n=a}while(n!=r)},o.prototype.WB=function(r){this.gd=r},o.prototype.br=function(r){var n=this.es(r),a=this.Sb(r),c=this.Rf(r);n!=-1?this.bp(n,a):this.$o(c,a),a!=-1?this.cp(a,n):this.ap(c,n),this.Kf(r,-1),this.Yg(r,-1),this.mF(r)},o.prototype.oi=function(r,n){var a=this.Na(r),c=this.V(r);if(a!=-1&&this.Cc(a,c),c!=-1&&this.Dc(c,a),a!=-1&&c!=-1)if(a=this.Va(a),c=this.Va(c),n){if((n=this.Uh(a))!=null){var p=new h.h;this.wb.D(c,p),n.Rc(p)}}else n=this.Va(r),n=this.Uh(n),this.Zg(a,n),n!=null&&(p=new h.h,this.wb.D(a,p),n.Ec(p));this.Qy(r)},o.prototype.VS=function(r){return(4&this.Up(r))!=0},o.prototype.ep=function(r,n){this.PB(r,(4|this.Up(r))-4|(n?4:0))},o.prototype.nx=function(r,n){var a=this.ud.o;this.wb.rc();var c=this.wb.Aa[0].o;r.Wd(0,n,function(p,f){var m=a[5*p];p=a[5*f],f=c[2*m],m=c[2*m+1];var b=c[2*p];return m<(p=c[2*p+1])?-1:m>p?1:f<b?-1:f>b?1:0})},o.prototype.cS=function(){for(var r=this.ld;r!=-1;r=this.ve(r))if(!h.ba.Ic(this.jc(r)))return!0;return!1},o.prototype.bC=function(r,n){for(var a=this.Ob(r),c=this.Ob(n),p=this.mv(r),f=this.mv(n),m=this.Ob(r);m!=-1;m=this.Sb(m))this.gx(m,n);for(m=this.Ob(n);m!=-1;m=this.Sb(m))this.gx(m,r);this.$o(r,c),this.$o(n,a),this.ap(r,f),this.ap(n,p),a=this.I(r),c=this.ea(r),p=this.ea(n),this.Vj(r,this.I(n)),this.Vj(n,a),this.Tl(r,p),this.Tl(n,c),a=this.dd.U(r,2),this.dd.T(r,2,this.dd.U(n,2)),this.dd.T(n,2,a)},o}(),h.hd=A})(q||(q={})),function(h){var A=function(w){function u(o,r,n,a){var c=w.call(this)||this;return c.aa=new h.l,o===void 0?c.OE():typeof o=="number"?c.PO(o,r,n,a):o instanceof h.Ta?r!==void 0?c.Su(o,r,n):c.QO(o):o instanceof h.ua?r!==void 0?c.SO(o,r):c.RO(o):o instanceof h.l?c.OO(o):c.OE(),c}return gt(u,w),u.prototype.Su=function(o,r,n){this.description=h.ee.og(),this.aa.Pa(),o.B()||this.vu(o,r,n)},u.prototype.OO=function(o){this.description=h.ee.og(),this.aa.L(o),this.aa.normalize()},u.prototype.RO=function(o){if(o==null)throw h.i.O();this.description=o,this.aa.Pa()},u.prototype.SO=function(o,r){if(o==null)throw h.i.O();this.description=o,this.aa.L(r),this.aa.normalize()},u.prototype.OE=function(){this.description=h.ee.og(),this.aa.Pa()},u.prototype.QO=function(o){this.description=h.ee.og(),this.aa.Pa(),o.B()||this.vu(o)},u.prototype.PO=function(o,r,n,a){this.description=h.ee.og(),this.L(o,r,n,a)},u.prototype.L=function(o,r,n,a){if(this.wc(),typeof o=="number")this.aa.L(o,r,n,a);else for(this.Pa(),r=0,n=o.length;r<n;r++)this.$b(o[r])},u.prototype.Yo=function(o){if(this.wc(),!o.YS())throw h.i.O();this.aa.L(o)},u.prototype.Pa=function(){this.wc(),this.aa.Pa()},u.prototype.B=function(){return this.aa.B()},u.prototype.S=function(){return this.aa.S()},u.prototype.da=function(){return this.aa.da()},u.prototype.hk=function(){return this.aa.hk()},u.prototype.Lp=function(){return this.aa.Lp()},u.prototype.Kp=function(){return this.aa.tf()},u.prototype.$b=function(o){if(o instanceof h.h)this.wc(),this.aa.$b(o);else if(o instanceof h.l)this.wc(),this.aa.$b(o);else if(o instanceof h.Ta){if(this.wc(),!o.Bc()){var r=o.description;if(this.description!=r&&this.Ll(r),this.B())this.vu(o);else{this.aa.$b(o.D());for(var n=1,a=r.Ba;n<a;n++)for(var c=r.Fd(n),p=h.ua.Wa(c),f=0;f<p;f++){var m=o.Vc(c,f),b=this.Vg(c,f);b.$b(m),this.setInterval(c,f,b)}}}}else if(o instanceof u&&!o.B())for((r=o.description)!=this.description&&this.Ll(r),this.aa.$b(o.aa),n=1,a=r.Ba;n<a;n++)for(c=r.qd(n),p=h.ua.Wa(c),f=0;f<p;f++)m=o.Vg(c,f),(b=this.Vg(c,f)).$b(m),this.setInterval(c,f,b)},u.prototype.vu=function(o,r,n){if(r!==void 0){this.aa.L(o.D(),r,n),n=1;for(var a=(r=o.description).Ba;n<a;n++)for(var c=r.Fd(n),p=h.ua.Wa(c),f=0;f<p;f++){var m=o.Vc(c,f);this.setInterval(c,f,m,m)}}else for(this.aa.L(o.la[0],o.la[1]),n=1,a=(r=o.description).Ba;n<a;n++)for(c=r.Fd(n),p=h.ua.Wa(c),f=0;f<p;f++)m=o.Vc(c,f),this.setInterval(c,f,m,m)},u.prototype.setInterval=function(o,r,n,a){if(n=typeof n=="number"?new h.Oc(n,a):n,this.wc(),o==0)if(r==0)this.aa.v=n.pa,this.aa.C=n.wa;else{if(r!=1)throw h.i.re();this.aa.G=n.pa,this.aa.H=n.wa}else this.pD(0,o,r,n.pa),this.pD(1,o,r,n.wa)},u.prototype.X=function(o,r){this.wc(),this.aa.X(o,r)},u.prototype.Pc=function(o){if(o instanceof h.Ed)this.wc(),o.gC(this.aa);else if(this.wc(),!this.aa.B()){var r=new h.IK;this.Ro(r),r.PS()?r.Pa():o.gC(r)}},u.prototype.copyTo=function(o){if(o.K()!=this.K())throw h.i.O();if(o.wc(),o.description=this.description,o.aa.L(this.aa),o.la=null,this.la!=null){o.qu();for(var r=0;r<2*(this.description.Be.length-2);r++)o.la[r]=this.la[r]}},u.prototype.Ja=function(){return new u(this.description)},u.prototype.He=function(){return this.aa.qF()},u.prototype.Rb=function(){return this.aa.sR()},u.prototype.K=function(){return 197},u.prototype.Eb=function(){return 2},u.prototype.dn=function(o){this.copyTo(o)},u.prototype.A=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H},u.prototype.Ro=function(o){o.v=this.aa.v,o.G=this.aa.G,o.C=this.aa.C,o.H=this.aa.H,o.L(this.aa.v,this.aa.G,this.Pd(0,1,0),this.aa.C,this.aa.H,this.Pd(1,1,0))},u.prototype.Vg=function(o,r){var n=new h.Oc;return n.L(this.Pd(0,o,r),this.Pd(1,o,r)),n},u.prototype.If=function(o,r){r.kg(this.description);var n=this.description.Ba-1;switch(o){case 0:for(o=0;o<n;o++)for(var a=this.description.qd(o),c=h.ua.Wa(a),p=0;p<c;p++)r.setAttribute(a,p,this.Pd(0,a,p));r.Db(this.aa.v,this.aa.G);break;case 1:for(o=0;o<n;o++)for(a=this.description.qd(o),c=h.ua.Wa(a),p=0;p<c;p++)r.setAttribute(a,p,this.Pd(1,a,p));r.Db(this.aa.v,this.aa.H);break;case 2:for(o=0;o<n;o++)for(a=this.description.qd(o),c=h.ua.Wa(a),p=0;p<c;p++)r.setAttribute(a,p,this.Pd(0,a,p));r.Db(this.aa.C,this.aa.H);break;case 3:for(o=0;o<n;o++)for(a=this.description.qd(o),c=h.ua.Wa(a),p=0;p<c;p++)r.setAttribute(a,p,this.Pd(1,a,p));r.Db(this.aa.C,this.aa.G);break;default:throw h.i.re()}},u.prototype.gB=function(o,r){o=this.aa.gB(o),r.na(o.x,o.y)},u.prototype.eR=function(o,r){return r*(o.Qq-2)},u.prototype.rF=function(o,r,n){if(this.aa.B())throw h.i.ga("empty geometry");if(r==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.ua.Wa(r))throw h.i.O();var a=this.description.Qf(r);return this.qu(),0<=a?this.la[this.eR(this.description,o)+this.description.ER(a)-2+n]:h.ua.te(r)},u.prototype.qu=function(){if(this.wc(),this.la==null&&2<this.description.Be.length){this.la=[];for(var o=u.Ig(this.description,0),r=u.Ig(this.description,1),n=0,a=1,c=this.description.Ba;a<c;a++){var p=this.description.qd(a),f=h.ua.Wa(p);p=h.ua.te(p);for(var m=0;m<f;m++)this.la[o+n]=p,this.la[r+n]=p,n++}}},u.prototype.un=function(o){if(this.la!=null)if(2<o.Be.length){for(var r=h.ee.Kw(o,this.description),n=[],a=u.Ig(this.description,0),c=u.Ig(this.description,1),p=u.Ig(o,0),f=u.Ig(o,1),m=0,b=1,S=o.Ba;b<S;b++){var M=o.qd(b),T=h.ua.Wa(M);if(r[b]==-1){var k=h.ua.te(M);for(M=0;M<T;M++)n[p+m]=k,n[f+m]=k,m++}else for(k=this.description.ak(r[b])-2,M=0;M<T;M++)n[p+m]=this.la[a+k],n[f+m]=this.la[c+k],m++,k++}this.la=n}else this.la=null;this.description=o},u.prototype.Pd=function(o,r,n){if(this.aa.B())throw h.i.ga("This operation was performed on an Empty Geometry.");if(r==0)return o!=0?n!=0?this.aa.H:this.aa.C:n!=0?this.aa.G:this.aa.v;if(n>=h.ua.Wa(r))throw h.i.re();var a=this.description.Qf(r);return 0<=a?(this.qu(),this.la[u.Ig(this.description,o)+this.description.ak(a)-2+n]):h.ua.te(r)},u.prototype.pD=function(o,r,n,a){if(this.wc(),r==0)o!=0?n!=0?this.aa.H=a:this.aa.C=a:n!=0?this.aa.G=a:this.aa.v=a;else{if(n>=h.ua.Wa(r))throw h.i.re();if(!this.hasAttribute(r)){if(h.ua.xG(r,a))return;this.se(r)}r=this.description.Qf(r),this.qu(),this.la[u.Ig(this.description,o)+this.description.ak(r)-2+n]=a}},u.Ig=function(o,r){return r*(o.Be.length-2)},u.prototype.Fa=function(o){this.wc();var r=new h.l;return o.A(r),this.aa.Fa(r)},u.prototype.isIntersecting=function(o){return o instanceof h.l?this.aa.isIntersecting(o):this.aa.isIntersecting(o.aa)},u.prototype.Lu=function(o,r){this.wc(),o.B()?this.Pa():r!==void 0?this.vu(o,r,void 0):this.aa.Lu(o.Ng(),o.kh())},u.prototype.offset=function(o,r){this.wc(),this.aa.offset(o,r)},u.prototype.normalize=function(){this.wc(),this.aa.normalize()},u.prototype.tf=function(o){if(o===void 0){if(o=new h.Ta(this.description),this.B())return o;for(r=this.description.Ba,n=1;n<r;n++)for(a=this.description.Fd(n),c=h.ua.Wa(a),p=0;p<c;p++)f=.5*(this.Pd(0,a,p)+this.Pd(1,a,p)),o.setAttribute(a,p,f);return o.Db(this.aa.hk(),this.aa.Lp()),o}if(o.kg(this.description),this.B())o.Pa();else{for(var r=this.description.Ba,n=1;n<r;n++)for(var a=this.description.qd(n),c=h.ua.Wa(a),p=0;p<c;p++){var f=.5*(this.rF(0,a,p)+this.rF(1,a,p));o.setAttribute(a,p,f)}o.Db(this.aa.tf())}},u.prototype.hz=function(){return new h.Ta(this.aa.hz())},u.prototype.contains=function(o){return o instanceof h.Ta?!o.B()&&this.aa.contains(o.Ng(),o.kh()):this.aa.contains(o.aa)},u.prototype.YO=function(o){return this.aa.contains(o)},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.B())return!!o.B();if(!this.aa.Nb(o.aa))return!1;for(var r=0,n=2*(this.description.Be.length-2);r<n;r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(o=h.P.Vh(o,this.aa.dc()),!this.B()&&this.la!=null)for(var r=0,n=2*(this.description.Be.length-2);r<n;r++)o=h.P.Vh(o,this.la[r]);return o},u.prototype.gs=function(){return this.aa.v},u.prototype.js=function(){return this.aa.G},u.prototype.fs=function(){return this.aa.C},u.prototype.hs=function(){return this.aa.H},u.prototype.mg=function(){return h.si.im(this,null)},u.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.aa.v+", "+this.aa.G+", "+this.aa.C+", "+this.aa.H+"]"},u}(h.ba);h.Hh=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n){u===void 0?this.Pa():(this.v=u,this.G=o,this.C=r,this.H=n)}return w.construct=function(u,o,r,n){var a=new w;return a.v=u,a.G=o,a.C=r,a.H=n,a},w.prototype.L=function(u,o,r,n){typeof u=="number"?r!==void 0?(this.v=u,this.G=o,this.C=r,this.H=n,this.normalize()):(this.v=u,this.G=o,this.C=u,this.H=o):u instanceof h.h?o!==void 0?(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*r,this.H=this.G+r,this.normalize()):(this.v=u.x,this.G=u.y,this.C=u.x,this.H=u.y):u instanceof w?this.L(u.v,u.G,u.C,u.H):u instanceof h.Oc&&(u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa))},w.prototype.bx=function(u,o){if(o!==void 0)if(o==0)this.Pa();else{this.v=u[0].x,this.G=u[0].y,this.C=this.v,this.H=this.G;for(var r=1;r<o;r++){var n=u[r];n.x<this.v?this.v=n.x:n.x>this.C&&(this.C=n.x),n.y<this.G?this.G=n.y:n.y>this.H&&(this.H=n.y)}}else if(u==null||u.length==0)this.Pa();else for(n=u[0],this.L(n.x,n.y),r=1;r<u.length;r++)o=u[r],this.Mk(o.x,o.y)},w.prototype.Pa=function(){this.H=this.C=this.G=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.$b=function(u,o){typeof u=="number"?this.B()?(this.v=u,this.G=o,this.C=u,this.H=o):(this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)):u instanceof h.h||u instanceof h.Od?this.$b(u.x,u.y):u instanceof w&&!u.B()&&(this.$b(u.v,u.G),this.$b(u.C,u.H))},w.prototype.Mk=function(u,o){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o)},w.prototype.X=function(u,o){this.B()||(this.v-=u,this.C+=u,this.G-=o,this.H+=o,(this.v>this.C||this.G>this.H)&&this.Pa())},w.prototype.scale=function(u){0>u&&this.Pa(),this.B()||(this.v*=u,this.C*=u,this.G*=u,this.H*=u)},w.prototype.zoom=function(u,o){this.B()||this.L(this.tf(),u*this.S(),o*this.da())},w.prototype.isIntersecting=function(u){return!this.B()&&!u.B()&&(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},w.prototype.BG=function(u){return(this.v<=u.v?this.C>=u.v:u.C>=this.v)&&(this.G<=u.G?this.H>=u.G:u.H>=this.G)},w.prototype.Fa=function(u){return!this.B()&&!u.B()&&(u.v>this.v&&(this.v=u.v),u.C<this.C&&(this.C=u.C),u.G>this.G&&(this.G=u.G),u.H<this.H&&(this.H=u.H),(u=this.v<=this.C&&this.G<=this.H)||this.Pa(),u)},w.prototype.gB=function(u){switch(u){case 0:return h.h.construct(this.v,this.G);case 1:return h.h.construct(this.v,this.H);case 2:return h.h.construct(this.C,this.H);case 3:return h.h.construct(this.C,this.G);default:throw h.i.re()}},w.prototype.hB=function(u){if(u==null||4>u.length)throw h.i.O();u[0]!=null?u[0].na(this.v,this.G):u[0]=h.h.construct(this.v,this.G),u[1]!=null?u[1].na(this.v,this.H):u[1]=h.h.construct(this.v,this.H),u[2]!=null?u[2].na(this.C,this.H):u[2]=h.h.construct(this.C,this.H),u[3]!=null?u[3].na(this.C,this.G):u[3]=h.h.construct(this.C,this.G)},w.prototype.qF=function(){return this.B()?0:this.S()*this.da()},w.prototype.sR=function(){return this.B()?0:2*(this.S()+this.da())},w.prototype.hk=function(){return(this.C+this.v)/2},w.prototype.Lp=function(){return(this.H+this.G)/2},w.prototype.S=function(){return this.C-this.v},w.prototype.da=function(){return this.H-this.G},w.prototype.move=function(u,o){this.B()||(this.v+=u,this.G+=o,this.C+=u,this.H+=o)},w.prototype.Lu=function(u,o){if(o!==void 0)this.move(u-this.hk(),o-this.Lp());else if(u instanceof h.h)this.Lu(u.x,u.y);else{if(!(u instanceof h.Ta))throw h.i.O();o=(this.C-this.v)/2;var r=(this.H-this.G)/2;this.v=u.Ng()-o,this.C=u.Ng()+o,this.G=u.kh()-r,this.H=u.kh()+r}},w.prototype.offset=function(u,o){this.v+=u,this.C+=u,this.G+=o,this.H+=o},w.prototype.normalize=function(){if(!this.B()){var u=Math.min(this.v,this.C),o=Math.max(this.v,this.C);this.v=u,this.C=o,u=Math.min(this.G,this.H),o=Math.max(this.G,this.H),this.G=u,this.H=o}},w.prototype.fn=function(u){u.na(this.v,this.G)},w.prototype.UI=function(u){u.na(this.C,this.G)},w.prototype.XI=function(u){u.na(this.v,this.H)},w.prototype.gn=function(u){u.na(this.C,this.H)},w.prototype.YS=function(){return this.B()||this.v<=this.C&&this.G<=this.H},w.prototype.tf=function(){return h.h.construct((this.C+this.v)/2,(this.H+this.G)/2)},w.prototype.hz=function(){return h.h.construct(this.v,this.G)},w.prototype.contains=function(u,o){if(o!==void 0)return u>=this.v&&u<=this.C&&o>=this.G&&o<=this.H;if(u instanceof h.Ta)return this.contains(u.Ng(),u.kh());if(u instanceof h.h)return this.contains(u.x,u.y);if(u instanceof w)return u.v>=this.v&&u.C<=this.C&&u.G>=this.G&&u.H<=this.H;throw h.i.O()},w.prototype.jm=function(u,o){if(o!==void 0)return u>this.v&&u<this.C&&o>this.G&&o<this.H;if(u instanceof h.h)return this.jm(u.x,u.y);if(u instanceof w)return u.v>this.v&&u.C<this.C&&u.G>this.G&&u.H<this.H;throw h.i.O()},w.prototype.Nb=function(u){return u==this||u instanceof w&&(!(!this.B()||!u.B())||this.v==u.v&&this.G==u.G&&this.C==u.C&&this.H==u.H)},w.prototype.dc=function(){var u=this.v;u=h.P.truncate(u^u>>>32);var o=h.P.Vh(u);return u=this.C,u=h.P.truncate(u^u>>>32),o=h.P.Vh(u,o),u=this.G,u=h.P.truncate(u^u>>>32),o=h.P.Vh(u,o),u=this.H,u=h.P.truncate(u^u>>>32),h.P.Vh(u,o)},w.prototype.zr=function(){return this.B()?2220446049250313e-29:2220446049250313e-29*(Math.abs(this.v)+Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)},w.prototype.uy=function(u,o){var r=this.$j(u),n=this.$j(o);if((r&n)!=0)return 0;if((r|n)==0)return 4;var a=(r!=0?1:0)|(n!=0?2:0);do{var c=o.x-u.x,p=o.y-u.y;if(c>p?(r&w.SC)!=0?((r&w.lu)!=0?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),r=this.$j(u)):(n&w.SC)!=0?((n&w.lu)!=0?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.$j(o)):r!=0?((r&w.mu)!=0?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),r=this.$j(u)):((n&w.mu)!=0?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.$j(o)):(r&w.TC)!=0?((r&w.mu)!=0?(u.x+=c*(this.G-u.y)/p,u.y=this.G):(u.x+=c*(this.H-u.y)/p,u.y=this.H),r=this.$j(u)):(n&w.TC)!=0?((n&w.mu)!=0?(o.x+=c*(this.G-o.y)/p,o.y=this.G):(o.x+=c*(this.H-o.y)/p,o.y=this.H),n=this.$j(o)):r!=0?((r&w.lu)!=0?(u.y+=p*(this.v-u.x)/c,u.x=this.v):(u.y+=p*(this.C-u.x)/c,u.x=this.C),r=this.$j(u)):((n&w.lu)!=0?(o.y+=p*(this.v-o.x)/c,o.x=this.v):(o.y+=p*(this.C-o.x)/c,o.x=this.C),n=this.$j(o)),(r&n)!=0)return 0}while((r|n)!=0);return a},w.prototype.$j=function(u){return(u.x<this.v?1:0)|(u.x>this.C?1:0)<<1|(u.y<this.G?1:0)<<2|(u.y>this.H?1:0)<<3},w.prototype.Di=function(u){return!this.B()&&(this.S()<=u||this.da()<=u)},w.prototype.ub=function(u){return u instanceof h.h?Math.sqrt(this.cK(u)):Math.sqrt(this.px(u))},w.prototype.px=function(u){var o=0,r=0,n=this.v-u.C;return n>o&&(o=n),(n=this.G-u.H)>r&&(r=n),(n=u.v-this.C)>o&&(o=n),(n=u.G-this.H)>r&&(r=n),o*o+r*r},w.prototype.cK=function(u){var o=0,r=0,n=this.v-u.x;return n>o&&(o=n),(n=this.G-u.y)>r&&(r=n),(n=u.x-this.C)>o&&(o=n),(n=u.y-this.H)>r&&(r=n),o*o+r*r},w.prototype.en=function(u){this.B()?u.Pa():u.L(this.v,this.C)},w.lu=1,w.mu=4,w.SC=3,w.TC=12,w}();h.l=A}(q||(q={})),function(h){var A,w;(w=A||(A={}))[w.initialize=0]="initialize",w[w.initializeRed=1]="initializeRed",w[w.initializeBlue=2]="initializeBlue",w[w.initializeRedBlue=3]="initializeRedBlue",w[w.sweep=4]="sweep",w[w.sweepBruteForce=5]="sweepBruteForce",w[w.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce",w[w.sweepRedBlue=7]="sweepRedBlue",w[w.sweepRed=8]="sweepRed",w[w.sweepBlue=9]="sweepBlue",w[w.iterate=10]="iterate",w[w.iterateRed=11]="iterateRed",w[w.iterateBlue=12]="iterateBlue",w[w.iterateBruteForce=13]="iterateBruteForce",w[w.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce",w[w.resetRed=15]="resetRed",w[w.resetBlue=16]="resetBlue";var u=function(){function o(r,n){this.ei=r,this.YG=n}return o.prototype.qr=function(r,n,a){this.ei.BX(a,r,n,this.YG)},o.prototype.bq=function(r){return this.ei.Tr(r,this.YG)},o}();A=function(){function o(){this.qw=this.po=this.ff=this.sd=null,this.yq=new h.l,this.Cm=this.Jj=this.Kj=this.Bd=this.Ff=this.Md=this.ew=this.ho=this.rd=this.Fb=null,this.Yb=-1,this.ra=0,this.Ok()}return o.prototype.mr=function(){this.Ok(),this.Rv=!0,this.Fb==null?(this.ho=new h.ja(0),this.Fb=[]):(this.ho.Dh(0),this.Fb.length=0)},o.prototype.bd=function(r,n){if(!this.Rv)throw h.i.Hb();var a=new h.l;a.L(n),this.ho.add(r),this.Fb.push(a)},o.prototype.Hp=function(){if(!this.Rv)throw h.i.Hb();this.Rv=!1,this.Fb!=null&&0<this.Fb.length&&(this.Yb=0,this.Jc=!1)},o.prototype.jK=function(){this.Ok(),this.Qv=!0,this.Fb==null?(this.ho=new h.ja(0),this.Fb=[]):(this.ho.Dh(0),this.Fb.length=0)},o.prototype.CD=function(r,n){if(!this.Qv)throw h.i.Hb();var a=new h.l;a.L(n),this.ho.add(r),this.Fb.push(a)},o.prototype.cF=function(){if(!this.Qv)throw h.i.Hb();this.Qv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==2?this.Yb=3:this.Yb!=3&&(this.Yb=1),this.Jc=!1)},o.prototype.iK=function(){this.Ok(),this.Pv=!0,this.rd==null?(this.ew=new h.ja(0),this.rd=[]):(this.ew.Dh(0),this.rd.length=0)},o.prototype.yD=function(r,n){if(!this.Pv)throw h.i.Hb();var a=new h.l;a.L(n),this.ew.add(r),this.rd.push(a)},o.prototype.bF=function(){if(!this.Pv)throw h.i.Hb();this.Pv=!1,this.Fb!=null&&0<this.Fb.length&&this.rd!=null&&0<this.rd.length&&(this.Yb==-1||this.Yb==1?this.Yb=3:this.Yb!=3&&(this.Yb=2),this.Jc=!1)},o.prototype.next=function(){if(this.Jc)return!1;for(var r=!0;r;)switch(this.Yb){case 0:r=this.Bz();break;case 1:r=this.kS();break;case 2:r=this.hS();break;case 3:r=this.jS();break;case 4:r=this.MX();break;case 5:r=this.IX();break;case 6:r=this.JX();break;case 7:r=this.KX();break;case 8:r=this.tx();break;case 9:r=this.cC();break;case 10:r=this.Pz();break;case 11:r=this.bT();break;case 12:r=this.ZS();break;case 13:r=this.$S();break;case 14:r=this.aT();break;case 15:r=this.eJ();break;case 16:r=this.dJ();break;default:throw h.i.Ra()}return!this.Jc},o.prototype.VB=function(r){this.ra=r},o.prototype.oz=function(r){return this.Fb[r]},o.prototype.Wy=function(r){return this.rd[r]},o.prototype.pl=function(r){return this.ho.read(r)},o.prototype.jl=function(r){return this.ew.read(r)},o.Oz=function(r){return(1&r)==1},o.gq=function(r){return(1&r)==0},o.prototype.Ok=function(){this.Rv=this.Pv=this.Qv=!1,this.Df=this.Ef=this.Tg=this.pe=-1,this.Jc=!0},o.prototype.Bz=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length)return this.pe=this.Fb.length,this.Yb=5,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);return this.Mt(this.Md,2*this.Fb.length,!0),this.pe=2*this.Fb.length,this.Yb=4,!0},o.prototype.kS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.Md.Jb(2*this.Fb.length),this.Md.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);return this.Mt(this.Md,this.Md.size,!0),this.pe=this.Md.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Yb=7,this.dJ()},o.prototype.hS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.ff.mr();for(var r=0;r<this.rd.length;r++){var n=this.rd[r];this.ff.Dr(n.v,n.C)}for(this.ff.Hp(),this.Ff.Jb(2*this.rd.length),this.Ff.resize(0),r=0;r<2*this.rd.length;r++)this.Ff.add(r);return this.Mt(this.Ff,this.Ff.size,!1),this.Tg=this.Ff.size,this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,this.eJ()},o.prototype.jS=function(){if(this.Bf=this.Wf=-1,10>this.Fb.length||10>this.rd.length)return this.pe=this.Fb.length,this.Yb=6,!0;this.sd==null&&(this.sd=new h.ur(!0),this.po=this.sd.getIterator(),this.Md=new h.ja(0)),this.ff==null&&(this.ff=new h.ur(!0),this.qw=this.ff.getIterator(),this.Ff=new h.ja(0)),this.sd.mr();for(var r=0;r<this.Fb.length;r++){var n=this.Fb[r];this.sd.Dr(n.v,n.C)}for(this.sd.Hp(),this.ff.mr(),r=0;r<this.rd.length;r++)n=this.rd[r],this.ff.Dr(n.v,n.C);for(this.ff.Hp(),this.Md.Jb(2*this.Fb.length),this.Ff.Jb(2*this.rd.length),this.Md.resize(0),this.Ff.resize(0),r=0;r<2*this.Fb.length;r++)this.Md.add(r);for(r=0;r<2*this.rd.length;r++)this.Ff.add(r);return this.Mt(this.Md,this.Md.size,!0),this.Mt(this.Ff,this.Ff.size,!1),this.pe=this.Md.size,this.Tg=this.Ff.size,this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Yb=7,!0},o.prototype.MX=function(){var r=this.Md.get(--this.pe),n=r>>1;return o.gq(r)?(this.sd.remove(n),this.pe!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1)):(this.po.yB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Wf=n,this.Yb=10,!0)},o.prototype.IX=function(){return--this.pe==-1?(this.Bf=this.Wf=-1,this.Jc=!0,!1):(this.Tg=this.Wf=this.pe,this.Yb=13,!0)},o.prototype.JX=function(){return--this.pe==-1?(this.Bf=this.Wf=-1,this.Jc=!0,!1):(this.Wf=this.pe,this.Tg=this.rd.length,this.Yb=14,!0)},o.prototype.KX=function(){var r=this.Md.get(this.pe-1),n=this.Ff.get(this.Tg-1),a=this.Tr(r,!0),c=this.Tr(n,!1);return a>c?this.tx():a<c?this.cC():o.Oz(r)?this.tx():o.Oz(n)?this.cC():this.tx()},o.prototype.tx=function(){var r=this.Md.get(--this.pe),n=r>>1;if(o.gq(r))return this.Ef!=-1&&this.Kj.get(n)!=-1?(this.Bd.kd(this.Ef,this.Kj.get(n)),this.Kj.set(n,-1)):this.sd.remove(n),this.pe!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1);if(this.Df!=-1&&0<this.Bd.ds(this.Df))for(r=this.Bd.sc(this.Df);r!=-1;){var a=this.Bd.getData(r);this.ff.xj(a),this.Jj.set(a,-1),a=this.Bd.lb(r),this.Bd.kd(this.Df,r),r=a}return 0<this.ff.size()?(this.qw.yB(this.Fb[n].v,this.Fb[n].C,this.ra),this.Wf=n,this.Yb=12):(this.Ef==-1&&(this.Bd==null&&(this.Bd=new h.kp),this.Kj=new h.ja(0),this.Kj.resize(this.Fb.length,-1),this.Kj.Yj(-1,0,this.Fb.length),this.Ef=this.Bd.Rh(1)),this.Kj.set(n,this.Bd.addElement(this.Ef,n)),this.Yb=7),!0},o.prototype.cC=function(){var r=this.Ff.get(--this.Tg),n=r>>1;if(o.gq(r))return this.Df!=-1&&this.Jj.get(n)!=-1?(this.Bd.kd(this.Df,this.Jj.get(n)),this.Jj.set(n,-1)):this.ff.remove(n),this.Tg!=0||(this.Bf=this.Wf=-1,this.Jc=!0,!1);if(this.Ef!=-1&&0<this.Bd.ds(this.Ef))for(r=this.Bd.sc(this.Ef);r!=-1;){var a=this.Bd.getData(r);this.sd.xj(a),this.Kj.set(a,-1),a=this.Bd.lb(r),this.Bd.kd(this.Ef,r),r=a}return 0<this.sd.size()?(this.po.yB(this.rd[n].v,this.rd[n].C,this.ra),this.Bf=n,this.Yb=11):(this.Df==-1&&(this.Bd==null&&(this.Bd=new h.kp),this.Jj=new h.ja(0),this.Jj.resize(this.rd.length,-1),this.Jj.Yj(-1,0,this.rd.length),this.Df=this.Bd.Rh(0)),this.Jj.set(n,this.Bd.addElement(this.Df,n)),this.Yb=7),!0},o.prototype.Pz=function(){if(this.Bf=this.po.next(),this.Bf!=-1)return!1;var r=this.Md.get(this.pe)>>1;return this.sd.xj(r),this.Yb=4,!0},o.prototype.bT=function(){if(this.Wf=this.po.next(),this.Wf!=-1)return!1;this.Bf=this.Wf=-1;var r=this.Ff.get(this.Tg)>>1;return this.ff.xj(r),this.Yb=7,!0},o.prototype.ZS=function(){if(this.Bf=this.qw.next(),this.Bf!=-1)return!1;var r=this.Md.get(this.pe)>>1;return this.sd.xj(r),this.Yb=7,!0},o.prototype.$S=function(){if(--this.Tg==-1)return this.Yb=5,!0;this.yq.L(this.Fb[this.pe]);var r=this.Fb[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(r)||(this.Bf=this.Tg,!1)},o.prototype.aT=function(){if(--this.Tg==-1)return this.Yb=6,!0;this.yq.L(this.Fb[this.pe]);var r=this.rd[this.Tg];return this.yq.X(this.ra,this.ra),!this.yq.isIntersecting(r)||(this.Bf=this.Tg,!1)},o.prototype.eJ=function(){return this.sd==null?(this.Jc=!0,!1):(this.pe=this.Md.size,0<this.sd.size()&&this.sd.reset(),this.Ef!=-1&&(this.Bd.eh(this.Ef),this.Kj.resize(0),this.Ef=-1),this.Jc=!1,!0)},o.prototype.dJ=function(){return this.ff==null?(this.Jc=!0,!1):(this.Tg=this.Ff.size,0<this.ff.size()&&this.ff.reset(),this.Df!=-1&&(this.Bd.eh(this.Df),this.Jj.resize(0),this.Df=-1),this.Jc=!1,!0)},o.prototype.Mt=function(r,n,a){this.Cm==null&&(this.Cm=new h.Zt),a=new u(this,a),this.Cm.sort(r,0,n,a)},o.prototype.BX=function(r,n,a,c){var p=this;r.Wd(n,a,function(f,m){var b=p.Tr(f,c),S=p.Tr(m,c);return b<S||b==S&&o.gq(f)&&o.Oz(m)?-1:1})},o.prototype.Tr=function(r,n){var a=.5*this.ra;return n?(n=this.Fb[r>>1],o.gq(r)?n.G-a:n.H+a):(n=this.rd[r>>1],o.gq(r)?n.G-a:n.H+a)},o}(),h.rC=A}(q||(q={})),function(h){var A=function(){function w(){}return w.construct=function(u,o,r,n,a,c){var p=new w;return p.v=u,p.G=o,p.Xe=r,p.C=n,p.H=a,p.Dg=c,p},w.prototype.Pa=function(){this.Xe=this.v=NaN},w.prototype.B=function(){return isNaN(this.v)},w.prototype.PS=function(){return isNaN(this.Xe)},w.prototype.L=function(u,o,r,n,a,c){n!==void 0?typeof u=="number"?(this.v=u,this.G=o,this.Xe=r,this.C=n,this.H=a,this.Dg=c):(this.v=u.x-.5*o,this.C=this.v+o,this.G=u.y-.5*r,this.H=this.G+r,this.Xe=u.z-.5*n,this.Dg=this.Xe+n):(this.v=u,this.G=o,this.Xe=r,this.C=u,this.H=o,this.Dg=r)},w.prototype.move=function(u){this.v+=u.x,this.G+=u.y,this.Xe+=u.z,this.C+=u.x,this.H+=u.y,this.Dg+=u.z},w.prototype.copyTo=function(u){u.v=this.v,u.G=this.G,u.C=this.C,u.H=this.H},w.prototype.Mk=function(u,o,r){this.v>u?this.v=u:this.C<u&&(this.C=u),this.G>o?this.G=o:this.H<o&&(this.H=o),isNaN(this.Xe)==0?this.Xe>r?this.Xe=r:this.Dg<r&&(this.Dg=r):this.Dg=this.Xe=r},w.prototype.$b=function(u,o,r){if(typeof u=="number")this.B()?(this.v=u,this.G=o,this.Xe=r,this.C=u,this.H=o,this.Dg=r):this.Mk(u,o,r);else if(u instanceof h.Od)this.$b(u.x,u.y,u.z);else{if(!(u instanceof w))throw h.i.O();u.B()||(this.$b(u.v,u.G,u.Xe),this.$b(u.C,u.H,u.Dg))}},w.prototype.construct=function(u,o,r){u.B()||o.B()?this.Pa():(this.v=u.pa,this.C=u.wa,this.G=o.pa,this.H=o.wa,this.Xe=r.pa,this.Dg=r.wa)},w.prototype.hB=function(u){if(u==null||8>u.length)throw h.i.O();u[0]=new h.Od(this.v,this.G,this.Xe),u[1]=new h.Od(this.v,this.H,this.Xe),u[2]=new h.Od(this.C,this.H,this.Xe),u[3]=new h.Od(this.C,this.G,this.Xe),u[4]=new h.Od(this.v,this.G,this.Dg),u[5]=new h.Od(this.v,this.H,this.Dg),u[6]=new h.Od(this.C,this.H,this.Dg),u[7]=new h.Od(this.C,this.G,this.Dg)},w.prototype.bx=function(u){if(u==null||u.length==0)this.Pa();else{var o=u[0];for(this.L(o.x,o.y,o.z),o=1;o<u.length;o++){var r=u[o];this.Mk(r.x,r.y,r.z)}}},w}();h.IK=A}(q||(q={})),function(h){(function(A){A.Ra=function(){var w=Error();return w.message="Internal Error",w},A.Fe=function(){var w=Error();return w.message="Not Implemented",w},A.Zk=function(){var w=Error();return w.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular",w},A.Hb=function(){var w=Error();return w.message="Invalid Call",w},A.O=function(w){var u=Error();return u.message="Illegal Argument Exception",w!==void 0&&(u.message+=": "+w),u},A.hu=function(w){var u=Error();return u.message=w!==void 0?"Runtime Exception: "+w:"Runtime Exception.",u},A.ga=function(w){var u=Error();return u.message="Geometry Exception: "+w,u},A.AK=function(){var w=Error();return w.message="Assert Failed Exception",w},A.re=function(){var w=Error();return w.message="IndexOutOfBoundsException",w},A.QC=function(){var w=Error();return w.message="UserCancelException",w}})(h.i||(h.i={}))}(q||(q={})),function(h){(h=h.dm||(h.dm={}))[h.forward=0]="forward",h[h.reverse=1]="reverse"}(q||(q={})),function(h){var A=function(){function o(r,n){this.Xa=r,this.zH=n,this.FH=-1,this.ul=!1}return o.prototype.qe=function(){},o.prototype.next=function(){if(++this.FH==this.zH.I())return null;var r=this.zH.Oa(this.FH);r.scale(this.Xa.fc);var n=new h.Ea;return this.Xa.ny(r,this.ul,n),n},o.prototype.Ma=function(){return 0},o}(),w=function(){function o(r,n,a){this.Xa=r,this.tw=n,this.Yn=!1,this.eo=a,this.dw=[0],this.tk=[0],this.Pj=[0],this.Is=[0],this.ul=!1,this.sq=new h.Ea,this.vk=[]}return o.prototype.qe=function(){},o.prototype.next=function(){if(this.Yn){this.Yn=!1,this.td.ia();var r=h.ba.ig(this.sq);return h.Hg.Nk(r,this.Xa.Cq,!0,!0,this.Xa.Vb)}if(this.td==null&&(this.td=this.tw.Ha(),this.td.ab(),this.eo!=null&&this.eo.$k(null,0)),!this.td.Ia()){if(!this.td.ab())return null;this.eo!=null&&this.eo.$k(null,0)}r=null,this.tk[0]=0,this.zA=this.dw[0]=0,this.fi=NaN,this.Yn=!1;for(var n=this.vk.length=0,a=new h.h,c=new h.h,p=[0];this.td.Ia()&&8>this.zA;){var f=this.td.ia();if(a.N(f.ac()),c.N(f.xc()),a.scale(this.Xa.fc),c.scale(this.Xa.fc),h.ej.Ou(a,c)?a.x=c.x:h.ej.Mu(a,c)&&(c.x=a.x),this.vk.length=0,h.ej.nF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,a,c,this.Xa.KA,this.Xa.at,p,this.Pj,this.Is,this.vk,this.dw),this.eo!=null&&(f=this.vk.slice(0),this.eo.kG(this.eo.ea()-1,f,f.length-1)),h.ej.Nu(a,c)?(this.sq.Pa(),this.Xa.ny(a,this.ul,this.sq),this.Yn=!0):(this.sq.Pa(),this.Yn=this.sy(p[0],this.sq)),this.Yn){if(this.td.ni(),this.td.zz()){this.td.ni(),this.td.ia();break}this.td.uW();break}r==null&&(r=new h.Ea).$k(null,0),this.HD(r),n++}if(this.dw[0]=0,0<n){for(p=this.td.xb();0<n;)this.td.ni(),a.N(this.tw.Oa(this.td.xb())),c.N(this.tw.Oa(this.td.jk())),a.scale(this.Xa.fc),c.scale(this.Xa.fc),this.ul&&(h.ej.Ou(a,c)?a.x=c.x:h.ej.Mu(a,c)&&(c.x=a.x)),this.vk.length=0,h.ej.nF(this.Xa.Ub,this.Xa.lc,this.Xa.Ae,c,a,this.Xa.KA,this.Xa.at,null,this.Pj,this.Is,this.vk,this.dw),this.HD(r),n--;return a.N(this.tw.Oa(this.td.xb())),a.scale(this.Xa.fc),u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,a,this.fi+1.570796326794897,this.fi+4.71238898038469,this.Xa.bo,this.ul,this.tk,r,NaN,NaN),this.td.Wb(p),this.td.ia(),n=h.ta.mj(null,r,!0),h.Hg.Nk(r,n,!0,!0,this.Xa.Vb)}return this.Yn=!1,this.td.ia(),r=h.ba.ig(this.sq),h.Hg.Nk(r,this.Xa.Cq,!0,!0,this.Xa.Vb)},o.prototype.HD=function(r){var n=this.vk[0],a=this.Pj[0]-1.570796326794897,c=this.Is[0]+1.570796326794897;if(!isNaN(this.fi)){if(this.fi>=this.Pj[0]){var p=this.fi+1.570796326794897;a=p+3.141592653589793-(this.fi-this.Pj[0])}else a=(p=this.fi+1.570796326794897)+3.141592653589793-(6.283185307179586-(this.Pj[0]-this.fi));var f=!(this.fi>=this.Pj[0]&&3.141592653589793>=this.fi-this.Pj[0])&&!(this.fi<this.Pj[0]&&3.141592653589793<=this.Pj[0]-this.fi),m=!1;if(Math.abs(a-p)<=.5*this.Xa.bo)if(f){var b=r.Oa(r.I()-2);b.scale(this.Xa.fc);var S=new h.ha(0);for(h.kb.Sy(this.Xa.Ub,this.Xa.lc,n.x,n.y,b.x,b.y,S),b=S.u;b<=p;)b+=6.283185307179586;for(;b>p;)b-=6.283185307179586;b<a&&(m=!0)}else m=!0;m?(r.xB(0,r.I()-1),this.ul||((n=new h.h).N(r.Oa(r.I()-1)),n.scale(this.Xa.fc),-3.141592653589793>n.x-this.tk[0]?this.tk[0]-=6.283185307179586:3.141592653589793<n.x-this.tk[0]&&(this.tk[0]+=6.283185307179586)),f||(a=.5*(a+p))):(f?((p=new h.h).N(n),p.scale(1/this.Xa.fc),r.xf(0,-1,p)):u.Jr(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.vk[0],p,a,this.Xa.bo,this.ul,this.tk,r,NaN,NaN),this.zA+=1)}u.my(this.Xa.Ub,this.Xa.lc,this.Xa.fc,this.Xa.sb,this.Xa.Ae,this.vk,a,c,this.ul,this.tk,r),this.fi=this.Is[0]},o.prototype.sy=function(r,n){return this.Xa.sy(this.vk,r,this.Pj[0],this.Is[0],this.ul,n)},o.prototype.Ma=function(){return 0},o}(),u=function(){function o(){}return o.buffer=function(r,n,a,c,p,f){if(r==null)throw h.i.O("Geometry::Geodesic_bufferer::buffer");if(r.B())return new h.Ea(r.description);var m=new o;m.Sg=n,m.Kc=h.cb.tc(n);var b=h.cb.xv(m.Kc);if(m.Vb=f,m.Ub=h.cb.gv(m.Kc),m.lc=b*(2-b),m.fc=m.Kc.Id().ci,m.ra=m.Sg.Ln(),m.Cq=m.Kc.Ln(),m.at=m.Cq*m.fc,m.Bq=1.570796326794897/m.fc,m.GY=3.141592653589793/m.fc,m.Ls=6.283185307179586/m.fc,m.HY=m.Ls/6,m.FA=0,m.FY=1.5707963267948966*m.Ub/m.FA,a==4?(m.Ae=2,m.Yv=!0):(m.Ae=a,m.Yv=!1),m.La=c,m.sb=Math.abs(c),isNaN(p)||.001>p?m.pX():m.ao=p,a=r.K(),h.ba.zd(a)?((a=new h.Ua(r.description)).oc(r,!0),r=a,a=1607):a==197&&(a=new h.l,r.A(a),a.S()<=m.ra||a.da()<=m.ra?((a=new h.Ua(r.description)).bd(r,!1),r=a,a=1607):((a=new h.Ea(r.description)).bd(r,!1),r=a,a=1736)),m.qX(),h.ba.Sn(a)||m.rX(),m.sb<=.5*m.ao)return a!=1736?new h.Ea(r.description):m.Yv?r:h.ej.Sr(r,m.Sg,m.Ae,m.KA,-1,f);if(0>m.La&&a!=1736)return new h.Ea(r.description);if(m.Yv&&h.ba.Ic(a)?(n=h.ej.Sr(r,n,4,NaN,m.ao,f),r=h.cb.Bh(n,m.Sg,m.Kc)):r=h.cb.Bh(r,m.Sg,m.Kc),(r=h.Jh.nj(r,m.Kc)).B())return new h.Ea(r.description);switch(!m.Yv&&h.ba.Ic(a)&&(r=h.ej.jI(m.fc,r)),r=o.CX(r,m.Kc),a){case 1736:n=m.ON(r);break;case 1607:n=m.PN(r);break;case 550:n=m.MN(r);break;case 33:n=m.NN(r);break;default:throw h.i.ga("corrupted_geometry")}return(m=h.cb.Bh(n,m.Kc,m.Sg)).Ll(r.description),m},o.prototype.ON=function(r){var n=new h.Ea;r=new w(this,r,n),r=h.Ih.local().W(r,this.Kc,this.Vb).next(),r=h.jp.pj(r,this.Kc,2);var a=new h.Ed;return a.scale(1/this.fc,1/this.fc),n.Pc(a),n=h.jp.pj(n,this.Kc,2),0<=this.La?h.Ih.local().W(n,r,this.Kc,this.Vb):h.lp.local().W(n,r,this.Kc,this.Vb)},o.prototype.PN=function(r){return r=new w(this,r,null),r=h.Ih.local().W(r,this.Kc,this.Vb).next(),h.jp.pj(r,this.Kc,2)},o.prototype.MN=function(r){return r=new A(this,r),r=h.Ih.local().W(r,this.Kc,this.Vb).next(),h.jp.pj(r,this.Kc,2)},o.prototype.NN=function(r){(r=r.D()).scale(this.fc);var n=new h.Ea;return this.ny(r,!1,n),h.jp.pj(n,this.Kc,2)},o.prototype.sy=function(r,n,a,c,p,f){var m=r[0],b=r[r.length-1],S=m.y>b.y?m.y:b.y,M=h.F.q(this.Ub,this.lc,m.y<b.y?m.y:b.y);if(S=h.F.q(this.Ub,this.lc,S),.001<this.FA-(M+n+this.sb)&&.001<this.FA+(S-n-this.sb))return!1;M=(n=a-1.570796326794897)-3.141592653589793,S=n+3.141592653589793;var T=(a=c+1.570796326794897)+3.141592653589793,k=[NaN],C=[NaN],N=[NaN],F=[NaN];if(c=!1,o.YI(this.Ub,this.lc,this.sb,m,n,M,b,a,k,C),o.YI(this.Ub,this.lc,this.sb,b,T,a,m,M,N,F),(a<k[0]&&k[0]<T||a<C[0]&&C[0]<T)&&(c=!0),c||(M<N[0]&&N[0]<n||M<F[0]&&F[0]<n)&&(c=!0),!c&&p)return!1;for(var D=[],j=r.length-1;0<=j;j--)D.push(r[j]);return f.Pa(),f.$k(null,0),j=[0],o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,r,n,a,p,j,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,b,a,T,this.bo,p,j,f,k[0],C[0]),o.my(this.Ub,this.lc,this.fc,this.sb,this.Ae,D,T,S,p,j,f),o.Jr(this.Ub,this.lc,this.fc,this.sb,m,M,n,this.bo,p,j,f,N[0],F[0]),r=!1,p||(r=this.CE(this.fc,f)),c||r},o.prototype.ny=function(r,n,a){a.Pa(),a.$k(null,0),o.Jr(this.Ub,this.lc,this.fc,this.sb,r,-this.bo,6.283185307179586,this.bo,n,[0],a,NaN,NaN),n||this.CE(this.fc,a)},o.prototype.CE=function(r,n){var a=this.pO(r,n);return r=this.qO(r,n),a||r},o.prototype.pO=function(r,n){var a=n.I(),c=!1,p=new h.l;if(n.A(p),!h.s.$(p.H*r,1.570796326794897)&&!h.s.$(p.G*r,-1.570796326794897))return!1;var f=new h.h;for(--a;0<=a;a--)n.D(a,f),(f.y==p.H&&h.s.$(f.y*r,1.570796326794897)||f.y==p.G&&h.s.$(f.y*r,-1.570796326794897))&&(c=!0,this.II(f,a,n));return c},o.prototype.qO=function(r,n){var a=n.Oa(0),c=n.Oa(n.I()-1);return 3.141592653589793<Math.abs(a.x-c.x)*r?(this.NV(n),!0):this.oO(n)},o.prototype.oO=function(r){return 0>r.He()&&(this.MV(r),!0)},o.prototype.II=function(r,n,a){var c=a.I(),p=0<n?n-1:c-1;if(c=a.Oa(n<c-1?n+1:0),p=a.Oa(p),!h.s.$(c.y,r.y)&&!h.s.$(c.x,r.x)){var f=new h.h;f.na(c.x,r.y),a.Db(n,f)}h.s.$(p.y,r.y)||h.s.$(p.x,r.x)||((c=new h.h).na(p.x,r.y),a.xf(0,n,c))},o.prototype.NV=function(r){var n=new h.Ea,a=new h.Ea,c=new h.Ed,p=r.Oa(0),f=r.Oa(r.I()-1),m=new h.h;p.x>f.x?(f=this.Bq,c.gg(-this.Ls,0)):(f=-this.Bq,c.gg(this.Ls,0)),n.add(r,!1),r.Pa(),a.add(n,!1),a.Pc(c),p=new h.l,a.A(p),p.X((this.Ls-p.S())/2,0),p.G=-this.Bq,p.H=this.Bq;for(var b=0;b<a.I();b++)a.D(b,m),n.xf(0,-1,m);for(a.Pc(c),b=0;b<a.I();b++)a.D(b,m),n.xf(0,-1,m);a=n.Oa(0),c=n.Oa(n.I()-1),m.na(c.x,f),n.xf(0,-1,m),m.na(.5*(c.x+a.x),f),n.xf(0,-1,m),m.na(a.x,f),n.xf(0,-1,m),n=h.Jh.ms(n,this.Kc,2,!0,p.v),n=h.Jh.ms(n,this.Kc,2,!0,p.C),n=h.Vd.clip(n,p,this.Cq,NaN),r.add(n,!1)},o.prototype.MV=function(r){var n=new h.l;r.A(n),n.X((this.Ls-n.S())/2,0),n.G=-this.Bq,n.H=this.Bq,r.$k(null,0);var a=new h.h;a.na(n.v,n.G),r.xf(1,-1,a),a.na(n.v,n.H),r.xf(1,-1,a),a.na(.5*(n.v+n.C),n.H),r.xf(1,-1,a),a.na(n.C,n.H),r.xf(1,-1,a),a.na(n.C,n.G),r.xf(1,-1,a),a.na(.5*(n.v+n.C),n.G),r.xf(1,-1,a)},o.my=function(r,n,a,c,p,f,m,b,S,M,T){var k=null;S||((k=new h.h).Sc(),0<T.I()&&(k.N(T.Oa(T.I()-1)),k.scale(a)));var C=new h.ha(0),N=new h.ha(0),F=new h.ha(0),D=new h.h,j=new h.h,G=f[f.length-1];a=1/a;for(var W=0;W<f.length;W++){var J=f[W];if(W==0)var B=m;else W==f.length-1?B=b:(h.kb.xd(r,n,G.x,G.y,J.x,J.y,null,null,C,p),B=C.u-1.570796326794897);h.kb.Ai(r,n,J.x,J.y,c,B,N,F),S?j.na(N.u,F.u):(D.na(N.u,F.u),o.aJ(J.x,D.x,k.x,M),j.na(M[0]+D.x,D.y),k.N(j)),j.scale(a),T.xf(0,-1,j)}},o.Jr=function(r,n,a,c,p,f,m,b,S,M,T,k,C){if(!(m-f<b)){var N=new h.ha(0),F=new h.ha(0),D=new h.h,j=new h.h,G=null;S||((G=new h.h).Sc(),0<T.I()&&(G.N(T.Oa(T.I()-1)),G.scale(a)));var W=h.P.truncate(Math.ceil(f/b)),J=W++*b;for(J==f&&(J=W++*b),a=1/a;J<m+b&&(f<k&&k<J?(J=k,W--):f<C&&C<J&&(J=C,W--),!(J>=m));)h.kb.Ai(r,n,p.x,p.y,c,J,N,F),S?j.na(N.u,F.u):(D.na(N.u,F.u),o.aJ(p.x,D.x,G.x,M),j.na(M[0]+D.x,D.y),G.N(j)),j.scale(a),T.xf(0,-1,j),f=J,J=W++*b}},o.YI=function(r,n,a,c,p,f,m,b,S,M){var T=new h.h,k=new h.h,C=new h.ha(0),N=new h.ha(0);for(h.kb.Ai(r,n,c.x,c.y,a,p,C,N),T.na(C.u,N.u),h.kb.Ai(r,n,c.x,c.y,a,f,C,N),k.na(C.u,N.u),a=new h.ha(0),h.kb.Sy(r,n,m.x,m.y,T.x,T.y,a),S[0]=a.u,h.kb.Sy(r,n,m.x,m.y,k.x,k.y,a),M[0]=a.u;S[0]<=M[0];)S[0]+=6.283185307179586;for(;S[0]>M[0];)S[0]-=6.283185307179586;for(;S[0]>=b;)S[0]-=6.283185307179586,M[0]-=6.283185307179586;for(;S[0]<b;)S[0]+=6.283185307179586,M[0]+=6.283185307179586},o.aJ=function(r,n,a,c){if(isNaN(a)){for(;3.141592653589793<c[0]+n-r;)c[0]-=6.283185307179586;for(;3.141592653589793<r-(c[0]+n);)c[0]+=6.283185307179586}else 3.141592653589793<c[0]+n-a?c[0]-=6.283185307179586:3.141592653589793<a-(c[0]+n)&&(c[0]+=6.283185307179586)},o.CX=function(r,n){var a=r.K(),c=h.ba.Ic(a)?r.ea():a==550?r.I():1;if(c==1)return r;var p=new h.ja(0);p.resize(c);for(var f=[],m=new h.l,b=0;b<c;b++){if(p.write(b,b),h.ba.Ic(a)){r.Tj(b,m);var S=m.tf()}else S=r.Oa(b);S=h.RK.SX(n,S),f[b]=S}for(p.Wd(0,p.size,function(M,T){return f[M]<f[T]?-1:f[M]>f[T]?1:0}),n=r.Ja(),b=0;b<c;b++)m=p.read(b),h.ba.Ic(a)?n.addPath(r,m,!0):n.Gd(r,m,m+1);return n},o.prototype.qX=function(){var r=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);r=Math.min(r,.39269908169872414*this.Ub);var n=new h.h;n.na(0,10*this.fc);var a=45*this.fc,c=new h.ha(0),p=new h.ha(0),f=new h.ha(0),m=new h.ha(0),b=new h.ha(0),S=new h.ha(0),M=new h.ha(0),T=new h.ha(0),k=new h.h,C=new h.h,N=new h.h,F=new h.h;h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,0,c,p),k.na(c.u,p.u),h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,a,f,m),C.na(f.u,m.u),c=new h.ha(0),p=new h.ha(0);for(var D=new h.ha(0);h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,.5*(0+a),b,S),N.na(b.u,S.u),h.kb.xd(this.Ub,this.lc,k.x,k.y,C.x,C.y,c,p,null,2),h.kb.qj(this.Ub,this.lc,k.x,k.y,.5*c.u,p.u,M,T,2),F.na(M.u,T.u),h.kb.xd(this.Ub,this.lc,N.x,N.y,F.x,F.y,D,null,null,2),!(D.u<=this.ao);)a*=.9,h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,a,f,m),C.na(f.u,m.u);this.bo=6.283185307179586/Math.ceil(6.283185307179586/(a-0))},o.prototype.rX=function(){var r=Math.min(3.141592653589793*this.Ub-this.sb,this.sb);r=Math.min(r,.39269908169872414*this.Ub);var n=new h.h,a=new h.h;n.na(0,10*this.fc),a.na(10*this.fc,10*this.fc);var c=new h.ha(0),p=new h.ha(0),f=new h.ha(0);h.kb.xd(this.Ub,this.lc,n.x,n.y,a.x,a.y,f,c,p,this.Ae);var m=new h.ha(0),b=new h.ha(0),S=new h.ha(0),M=new h.ha(0),T=new h.h,k=new h.ha(0),C=new h.ha(0),N=new h.ha(0),F=new h.ha(0),D=new h.ha(0),j=new h.ha(0),G=new h.ha(0),W=new h.ha(0),J=new h.ha(0),B=new h.h,Q=new h.h,ue=new h.h,ge=new h.h,ye=1;c=c.u,p=p.u+1.570796326794897,f=f.u,h.kb.Ai(this.Ub,this.lc,n.x,n.y,r,c-1.570796326794897,C,N),B.na(C.u,N.u),h.kb.Ai(this.Ub,this.lc,a.x,a.y,r,p,F,D),Q.na(F.u,D.u),C=new h.ha(0),N=new h.ha(0),p=new h.ha(0);for(var de=new h.ha(0);h.kb.qj(this.Ub,this.lc,n.x,n.y,.5*(0+ye)*f,c,m,b,this.Ae),T.na(m.u,b.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,T.x,T.y,null,null,k,this.Ae),h.kb.Ai(this.Ub,this.lc,T.x,T.y,r,k.u+1.570796326794897,j,G),ue.na(j.u,G.u),h.kb.xd(this.Ub,this.lc,B.x,B.y,Q.x,Q.y,C,N,null,2),h.kb.qj(this.Ub,this.lc,B.x,B.y,.5*C.u,N.u,W,J,2),ge.na(W.u,J.u),h.kb.xd(this.Ub,this.lc,ue.x,ue.y,ge.x,ge.y,p,null,null,2),!(p.u<=this.ao);)ye*=.9,h.kb.qj(this.Ub,this.lc,n.x,n.y,ye*f,c,S,M,this.Ae),a.na(S.u,M.u),h.kb.xd(this.Ub,this.lc,n.x,n.y,a.x,a.y,null,null,de,this.Ae),h.kb.Ai(this.Ub,this.lc,a.x,a.y,r,de.u+1.570796326794897,F,D),Q.na(F.u,D.u);1e5<(r=ye*f)&&(r=1e5),this.KA=r},o.prototype.pX=function(){var r=5e4<this.sb?100:1e4<this.sb?10:1;500>this.sb/r&&(r=this.sb/500),.01>r&&(r=.01),this.ao=r},o}();h.PK=u}(q||(q={})),function(h){var A=function(){function w(){}return w.Of=function(u,o){var r=new h.h;r.N(o),u.push(r)},w.wp=function(u,o){u.add(o.x),u.add(o.y)},w.bB=function(u){u.Dh(u.size-2)},w.iB=function(u,o){o.na(u.get(u.size-2),u.get(u.size-1))},w.Sr=function(u,o,r,n,a,c){if(u==null)throw h.i.O();var p=u.K();if(u.B()||h.ba.Sn(p))return u;var f=new w;f.Sg=o,f.Kc=h.cb.tc(o);var m=h.cb.xv(f.Kc);if(f.Vb=c,f.Ub=h.cb.gv(f.Kc),f.lc=m*(2-m),f.fc=f.Kc.Id().ci,f.Cq=f.Kc.Ln(),f.at=f.Cq*f.fc,f.uA=n,f.tA=a,f.Ae=r,p==197?(r=new h.Ea(u.description)).bd(u,!1):h.ba.zd(p)?(r=new h.Ua(u.description)).oc(u,!0):r=u,f.Ae!=4){if((o=f.Sg.Nb(f.Kc)==0?h.cb.Bh(r,f.Sg,f.Kc):h.Jh.nj(r,f.Kc)).B())return o;o=w.jI(f.fc,o),o=f.Uy(o),o=h.jp.pj(o,f.Kc,f.Ae),f=h.cb.Bh(o,f.Kc,f.Sg)}else{if(h.Gg.Tb(o)==2?(u=h.cb.ol(),(o=h.Xk.local().W(r,u,o,c))==u&&(o=new h.Ea,u.copyTo(o))):o=h.Jh.nj(r,f.Kc),o.B())return o;f=f.uX(o)}return f},w.jI=function(u,o){var r=new h.l;if(o.yc(r),3.141592653589793>r.S()*u)return o;var n=!1;r=o.Ha();for(var a=new h.h,c=new h.h;r.ab();)for(;r.Ia();){var p=r.ia();if(a.N(p.ac()),c.N(p.xc()),a.scale(u),c.scale(u),3.141592653589793<Math.abs(a.x-c.x)){var f=w.Nu(a,c);if(!f){n=!0;break}if(6.283185307179586<Math.abs(a.x-c.x)){n=!0;break}}}if(!n)return o;n=o.Ja();var m=1<o.description.Ba,b=new h.h,S=new h.h,M=new h.h,T=new h.h,k=new h.Ta;for(r.aj();r.ab();)for(var C=NaN,N=[0];r.Ia();){if(p=r.ia(),a.N(p.ac()),c.N(p.xc()),a.scale(u),c.scale(u),isNaN(C)?(w.Yi(a.x,NaN,N),S.N(a)):S.N(M),C=S.x,f=w.Nu(a,c)){if(6.283185307179586<c.x-a.x)for(;6.283185307179586<c.x-a.x;)c.x-=6.283185307179586;if(-6.283185307179586>c.x-a.x)for(;-6.283185307179586>c.x-a.x;)c.x+=6.283185307179586;w.Yi(c.x,NaN,N),M.N(c)}else b.N(c),w.sU(b),w.Yi(b.x,C,N),M.na(N[0]+b.x,b.y);.5>Math.abs(M.x-c.x)&&M.N(c),m?(p.Vw(0,k),T.N(S),T.scale(1/u),k.Db(T),(f=r.xm())?n.nf(k):n.lineTo(k),r.Rn()&&!o.ec(r.gb)&&(p.Vw(1,k),T.N(M),T.scale(1/u),k.Db(T),n.lineTo(k))):((f=r.xm())&&n.Cz(null,0),p=n.ea()-1,T.N(S),T.scale(1/u),n.xf(p,-1,T),r.Rn()&&!o.ec(r.gb)&&(T.N(M),T.scale(1/u),n.xf(p,-1,T)))}return n},w.nF=function(u,o,r,n,a,c,p,f,m,b,S,M){var T=new h.h,k=new h.h,C=0<n.compare(a);w.$I(C,n,a,T,k),w.oF(u,o,r,T,k,c,NaN,p,f,m,b,null,S,M),C&&w.$B(m,b,null,S)},w.prototype.Uy=function(u){var o=u.Ja(),r=u.Ha(),n=[],a=null,c=null,p=1<u.description.Ba;p&&(a=new h.ce(0),c=new h.hg);for(var f=[0],m=new h.h,b=new h.h,S=new h.h,M=new h.h;r.ab();)for(f[0]=0;r.Ia();){var T=r.ia();m.N(T.ac()),b.N(T.xc()),m.scale(this.fc),b.scale(this.fc);var k=0<m.compare(b);w.$I(k,m,b,S,M),n.length=0,a!=null&&a.Dh(0),0<this.uA?w.oF(this.Ub,this.lc,this.Ae,S,M,this.uA,this.tA,this.at,null,null,null,p?a:null,n,f):w.VQ(this.Ub,this.lc,this.Ae,S,M,this.tA,this.at,p?a:null,n,f),k&&w.$B(null,null,p?a:null,n),n[0].N(T.ac()),n[n.length-1].N(T.xc());for(var C=1;C<n.length-1;C++)n[C].scale(1/this.fc);p?(k=w.ZI(k,T,c),w.ND(r.xm(),r.Rn()&&!u.ec(r.gb),T,k,a,n,o)):w.MD(r.xm(),r.Rn()&&!u.ec(r.gb),n,o)}return o},w.prototype.uX=function(u){var o=u.Ja(),r=u.Ha(),n=[],a=null,c=new h.hg,p=1<u.description.Ba;for(p&&(a=new h.ce(0));r.ab();)for(;r.Ia();){var f=r.ia(),m=f.ac(),b=f.xc();m=0<m.compare(b),b=w.ZI(m,f,c),n.length=0,a!=null&&a.Dh(0),w.tX(this.Ub,this.lc,this.fc,b,this.Sg,this.uA,this.tA,p?a:null,n),m&&w.$B(null,null,p?a:null,n),p?w.ND(r.xm(),r.Rn()&&!u.ec(r.gb),f,b,a,n,o):w.MD(r.xm(),r.Rn()&&!u.ec(r.gb),n,o)}return o},w.MD=function(u,o,r,n){u&&n.Cz(null,0),u=n.ea()-1;var a=r.slice(0);n.kG(u,a,a.length-1),o&&n.xf(u,-1,r[r.length-1])},w.ND=function(u,o,r,n,a,c,p){var f=new h.Ta;if(r.Uo(f),u?p.nf(f):p.lineTo(f),2<c.length){u=n.Rb();for(var m=1;m<c.length-1;m++){var b=n.HG(a.get(m)*u);n.Vw(b,f),f.Db(c[m]),p.lineTo(f)}}o&&(r.Qo(f),p.lineTo(f))},w.oF=function(u,o,r,n,a,c,p,f,m,b,S,M,T,k){var C=new h.ha(0),N=new h.ha(0),F=new h.ha(0);h.kb.xd(u,o,n.x,n.y,a.x,a.y,F,C,N,r),F=F.u;var D=C=C.u;0>D&&(D+=6.283185307179586),0>(N=N.u)&&(N+=6.283185307179586),m!=null&&(m[0]=F),b!=null&&(b[0]=D),S!=null&&(S[0]=N),b=m=NaN,M!=null&&(m=((b=h.F.Ch(u,o))-(S=h.F.q(u,o,n.y)))/F,b=(b+S)/F),S=w.Ou(n,a),N=w.Mu(n,a),D=S||N;var j=w.zE(n,a,f),G=new h.ha(0),W=new h.ha(0),J=new h.h,B=new h.h,Q=new h.h;w.Yi(n.x,NaN,k);var ue=[k[0]];if(F<=c)w.Of(T,n),w.Yi(a.x,NaN,k),M!=null&&M.add(0),D?(S&&w.eB(n,a,M,T),N&&w.cB(n,a,M,T)):j?w.dB(n,a,C,m,b,M,T):0<p&&(B.na(n.x-ue[0],n.y),J.na(a.x-k[0],a.y),w.Ty(u,o,r,n,F,C,B,J,0,1,p,M,T,ue)),w.Of(T,a);else{var ge=F/((c=1+h.P.truncate(Math.ceil(F/c)))-1),ye=new h.h,de=0;w.Of(T,n),ye.N(n),B.na(n.x-k[0],n.y),M!=null&&M.add(0);for(var we=1;we<c;we++){if(we<c-1){h.kb.qj(u,o,n.x,n.y,we*ge,C,G,W,r),J.na(G.u,W.u),w.Yi(J.x,ye.x,k),Q.na(k[0]+J.x,J.y);var je=we/(c-1)}else w.Yi(a.x,NaN,k),J.na(a.x-k[0],a.y),Q.N(a),je=1;D?(we==1&&S&&w.eB(n,Q,M,T),we==c-1&&N&&w.cB(ye,a,M,T)):j?w.yE(ye,Q,f)&&(n.x<a.x?ye.x>Q.x&&(k[0]+=6.283185307179586,Q.na(k[0]+J.x,J.y)):ye.x<Q.x&&(k[0]-=6.283185307179586,Q.na(k[0]+J.x,J.y)),w.dB(ye,Q,C,m,b,M,T)):0<p&&w.Ty(u,o,r,n,F,C,B,J,de,je,p,M,T,ue),w.Of(T,Q),M!=null&&M.add(je),ye.N(Q),B.N(J),ue[0]=k[0],de=je}}},w.VQ=function(u,o,r,n,a,c,p,f,m,b){var S=new h.ha(0),M=new h.ha(0),T=new h.ha(0);h.kb.xd(u,o,n.x,n.y,a.x,a.y,T,S,M,r),M=T.u,S=S.u;var k=T=NaN;if(f!=null){k=h.F.Ch(u,o);var C=h.F.q(u,o,n.y);T=(k-C)/M,k=(k+C)/M}C=w.Ou(n,a);var N=w.Mu(n,a),F=C||N;p=w.zE(n,a,p);var D=w.Nu(n,a);D=F||p||D,w.Yi(n.x,NaN,b);var j=new h.h;w.Of(m,n),j.N(n),f!=null&&f.add(0),D?(F?(C&&w.eB(n,a,f,m),N&&w.cB(n,a,f,m)):p&&w.dB(n,a,S,T,k,f,m),w.Yi(a.x,NaN,b),w.Of(m,a)):M<=c?(w.Yi(a.x,NaN,b),w.Of(m,a)):(T=new h.h,p=new h.h,T.N(n),p.N(a),T.x-=b[0],p.x-=b[0],-3.141592653589793>p.x?p.x+=6.283185307179586:3.141592653589793<p.x&&(p.x-=6.283185307179586),w.Ty(u,o,r,n,M,S,T,p,0,1,c,f,m,b),w.Of(m,a),w.Yi(a.x,NaN,b)),f!=null&&f.add(1)},w.Ty=function(u,o,r,n,a,c,p,f,m,b,S,M,T,k){var C=new h.h,N=new h.h;C.na(p.x+k[0],p.y),new h.ha(0),new h.ha(0),new h.ha(0),new h.ha(0);var F=new h.ha(0),D=new h.ha(0),j=new h.ha(0),G=new h.h,W=new h.h,J=new h.h,B=new h.h;G.N(p),W.N(f),p=new h.ce(0),f=new h.ce(0),w.wp(p,W),f.add(b);var Q=new h.h,ue=new h.zb,ge=[];for(w.SJ(4,ge);0<p.size;){for(var ye,de=!1,we=NaN,je=0;3>je;je++)if(ye=ge[je]*b+(1-ge[je])*m,h.kb.qj(u,o,n.x,n.y,ye*a,c,F,D,r),J.na(F.u,D.u),je==0&&(we=ye,B.N(J)),w.NW(G,J,W,ue),ue.ic(ue.fe(J,!0),Q),h.kb.xd(u,o,J.x,J.y,Q.x,Q.y,j,null,null,2),j.u>S){de=!0;break}de?(W.N(B),b=we,w.wp(p,W),f.add(b)):(w.bB(p),f.Fn(f.size-1,1,f.size-1),0<p.size&&(w.Yi(W.x,C.x,k),N.na(k[0]+W.x,W.y),w.Of(T,N),C.N(N),M!=null&&M.add(b),G.N(W),m=b,w.iB(p,W),b=f.get(f.size-1)))}},w.tX=function(u,o,r,n,a,c,p,f,m){var b=new h.h,S=new h.h,M=new h.h,T=new h.h,k=new h.h,C=new h.h,N=new h.h,F=new h.h,D=new h.h,j=new h.h,G=new h.ha(0),W=new h.ha(0),J=new h.h,B=[[],[]],Q=h.Gg.Tb(a)==1;a=a.Yd(0);var ue=n.ac(),ge=n.xc();Q?(C.na(ue.x*r,ue.y*r),N.na(ge.x*r,ge.y*r)):(B[0][0]=ue.x,B[0][1]=ue.y,B[1][0]=ge.x,B[1][1]=ge.y,h.cb.wt(),C.x=B[0][0]*r,C.y=B[0][1]*r,N.x=B[1][0]*r,N.y=B[1][1]*r);var ye=0,de=0,we=1,je=n.Qn();b.N(ue),S.N(ge),ge=new h.ce(0);var Ve=new h.ce(0),pt=new h.ce(0);w.wp(ge,S),w.wp(Ve,N),pt.add(we),w.Of(m,b),f!=null&&f.add(de);var dt=[],ai=0<p?je?5:3:je?5:1;w.SJ(ai,dt);for(var Ct=new h.ha(0),ke=new h.ha(0),wt=new h.ha(0),st=new h.ha(0),Bt=new h.ha(0),Dt=new h.ha(0),fr=new h.ha(0);0<Ve.size;){var at=!1,Ei=NaN;for(h.kb.xd(u,o,C.x,C.y,N.x,N.y,Ct,ke,null,2),ue=0;ue<ai&&!(ue==0&&(!je&&0>=p&&Ct.u<=c&&3.141592653589793>Math.abs(C.x-N.x)||n.Tx(de,we)<=a));ue++){var Xe=dt[ue]*we+(1-dt[ue])*de;if(n.ic(Xe,M),Q?F.na(M.x*r,M.y*r):(B[0][0]=M.x,B[0][1]=M.y,h.cb.wt(),F.x=B[0][0]*r,F.y=B[0][1]*r),ue==0&&(Ei=Xe,k.N(M),j.N(F),0<c&&(Ct.u>c||3.141592653589793<=Math.abs(C.x-N.x)))){at=!0;break}if(je&&0<c){if(h.kb.xd(u,o,C.x,C.y,F.x,F.y,wt,null,null,2),wt.u>c||3.141592653589793<=Math.abs(C.x-F.x)){at=!0;break}}else if(0<p){if(je?(T.GS(b,S,dt[ue]),Q?D.na(T.x*r,T.y*r):(B[0][0]=T.x,B[0][1]=T.y,h.cb.wt(),D.x=B[0][0]*r,D.y=B[0][1]*r)):(T.N(M),D.N(F)),h.kb.xd(u,o,C.x,C.y,D.x,D.y,st,null,null,2),!(st.u<=Ct.u)){at=!0;break}if(h.kb.qj(u,o,C.x,C.y,st.u,ke.u,G,W,2),J.na(G.u,W.u),h.kb.xd(u,o,J.x,J.y,F.x,F.y,Bt,null,null,2),Bt.u>p){at=!0;break}if(je){if(h.kb.xd(u,o,J.x,J.y,D.x,D.y,Dt,null,null,2),Dt.u>p){at=!0;break}if(h.kb.xd(u,o,D.x,D.y,F.x,F.y,fr,null,null,2),fr.u>p){at=!0;break}}}}at?(S.N(k),N.N(j),we=Ei,w.wp(ge,S),w.wp(Ve,N),pt.add(we)):(w.bB(ge),w.bB(Ve),pt.Fn(pt.size-1,1,pt.size-1),w.Of(m,S),ye+=Ct.u,f!=null&&f.add(ye),0<Ve.size&&(b.N(S),C.N(N),de=we,w.iB(ge,S),w.iB(Ve,N),we=pt.get(pt.size-1)))}if(f!=null)for(u=1/ye,ue=0;ue<f.size;ue++)f.write(ue,f.read(ue)*u)},w.$B=function(u,o,r,n){n.reverse(),r!=null&&r.pi(0,r.size,1),r=u!=null?u[0]:NaN,n=o!=null?o[0]:NaN,u!=null&&(u[0]=n),o!=null&&(o[0]=r)},w.$I=function(u,o,r,n,a){u?(n.N(r),a.N(o)):(n.N(o),a.N(r))},w.ZI=function(u,o,r){return u?(r.create(o.K()),o.copyTo(r.get()),r.get().reverse(),r.get()):o},w.Yi=function(u,o,r){if(isNaN(o)){for(;3.141592653589793<r[0]-u;)r[0]-=6.283185307179586;for(;3.141592653589793<u-r[0];)r[0]+=6.283185307179586}else 3.141592653589793<r[0]+u-o?r[0]-=6.283185307179586:3.141592653589793<o-(r[0]+u)&&(r[0]+=6.283185307179586)},w.NW=function(u,o,r,n){3.141592653589793>Math.abs(o.x-u.x)?(n.Ec(u),3.141592653589793<=r.x-u.x?n.Sl(r.x-6.283185307179586,r.y):3.141592653589793<=u.x-r.x?n.Sl(r.x+6.283185307179586,r.y):n.Sl(r.x,r.y)):(n.Ec(r),3.141592653589793<=u.x-r.x?n.Sl(u.x-6.283185307179586,u.y):3.141592653589793<=r.x-u.x?n.Sl(u.x+6.283185307179586,u.y):n.Sl(u.x,u.y))},w.SJ=function(u,o){for(var r=0;r<u;r++){var n=Math.ceil(r/2)/(u+1);r%2!=0&&(n=-n),o[r]=.5+n}},w.Ou=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&!h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&!h.s.$(o.y,-1.570796326794897))},w.Mu=function(u,o){return!!(h.s.$(o.y,1.570796326794897)&&!h.s.$(u.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897)&&!h.s.$(u.y,-1.570796326794897))},w.zE=function(u,o,r){return!(!w.yE(u,o,r)||h.s.$(u.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)||h.s.$(o.y,1.570796326794897)||h.s.$(o.y,-1.570796326794897))},w.yE=function(u,o,r){return Math.abs(Math.abs(u.x-o.x)-3.141592653589793)<=r},w.Nu=function(u,o){return!!(h.s.$(u.y,1.570796326794897)&&h.s.$(o.y,1.570796326794897)||h.s.$(u.y,-1.570796326794897)&&h.s.$(o.y,-1.570796326794897))},w.eB=function(u,o,r,n){if(0<u.y){var a=new h.h;a.na(o.x,1.570796326794897)}else(a=new h.h).na(o.x,-1.570796326794897);h.s.$(u.x,a.x)||h.s.$(o.y,a.y)||(w.Of(n,a),r!=null&&r.add(0))},w.cB=function(u,o,r,n){if(0<o.y){var a=new h.h;a.na(u.x,1.570796326794897)}else(a=new h.h).na(u.x,-1.570796326794897);h.s.$(o.x,a.x)||h.s.$(u.y,a.y)||(w.Of(n,a),r!=null&&r.add(1))},w.dB=function(u,o,r,n,a,c,p){h.s.Dd(r)?(0<1.570796326794897-u.y&&((r=new h.h).na(u.x,1.570796326794897),w.Of(p,r),c!=null&&c.add(n)),0<1.570796326794897-o.y&&((r=new h.h).na(o.x,1.570796326794897),w.Of(p,r),c!=null&&c.add(n))):(0<1.570796326794897+u.y&&((r=new h.h).na(u.x,-1.570796326794897),w.Of(p,r),c!=null&&c.add(a)),0<1.570796326794897+o.y&&((r=new h.h).na(o.x,-1.570796326794897),w.Of(p,r),c!=null&&c.add(a)))},w.sU=function(u){if(-3.141592653589793>u.x)for(;-3.141592653589793>u.x;)u.x+=6.283185307179586;if(3.141592653589793<u.x)for(;3.141592653589793<u.x;)u.x-=6.283185307179586},w}();h.ej=A}(q||(q={})),function(h){h.jp=function(){function A(){}return A.pj=function(w,u,o){if(w==null||u==null||!h.cb.Xc(u))throw h.i.O();if(w.B())return w;var r=w,n=r.K();if(h.ba.Ic(n)){r=h.Jh.nj(w,u),w=new h.l,r.A(w),n=h.ta.Xd(u,w,!1);for(var a=h.cb.ih(u),c=Math.floor((w.v-a.v)/a.S())*a.S()+a.v;c<w.C;)c>w.v+n&&c<w.C-n&&(r=h.Jh.ms(r,u,o,!0,c)),c+=a.S()}else{if(n==197)return(w=new h.Ea(r.description)).bd(r,!1),A.pj(w,u,o);if(h.ba.zd(n))return(w=new h.Ua(r.description)).oc(r,!0),A.pj(w,u,o)}return A.Py(r,u)},A.Py=function(w,u){if(w==null||u==null||!h.cb.Xc(u))throw h.i.O();if(w.B())return w;var o=w.K();return o==197?(o=new h.Ea(w.description)).bd(w,!1):h.ba.zd(o)?(o=new h.Ua(w.description)).oc(w,!0):o=w,(o=h.Jh.nj(o,u)).B()?o:h.Gg.Tb(u)==1?h.Jh.Gn(o,u,0,o!=w,0):A.HQ(o,u,o!=w)},A.HQ=function(w,u,o){if(!h.cb.Xc(u))throw h.i.O();if(w.B())return w;var r=h.cb.bf(u),n=-180*r;return r*=360,h.Gg.Tb(u)==2&&(r=(n=h.cb.ih(u)).C,r-=n=n.v),h.Jh.Jp(w,n,r,u,o,0,!0)},A}()}(q||(q={})),function(h){h.tY=function(){function A(){}return A.R=function(w){return 0>w?-w:w},A.Mb=function(w,u){return 0<=u?A.R(w):-A.R(w)},A.$=function(w,u){return w==u||A.R(w-u)<=A.DC*(1+(A.R(w)+A.R(u))/2)},A.Dd=function(w){return w==0||A.R(w)<=A.DC},A.Ch=function(w,u){var o=(u=(1-(u=Math.sqrt(1-u)))/(1+u))*u;return w/(1+u)*(1+o*(.25+o*(.015625+1/256*o)))*A.yL},A.yL=1.5707963267948966,A.DC=3552713678800501e-30,A}()}(q||(q={})),function(h){var A=function(u){this.Xf=u,this.Lk=this.Xf.getCode(),0>this.Lk&&(this.Lk=0)};h.vY=A;var w=function(){function u(o){o===void 0&&(o=null),this.Ej=null,this.Vn=!1,o!==null&&(this.Ej=new A(o))}return u.prototype.Fc=function(){return this.Ej!=null?this.Ej.Lk:0},u.prototype.Pf=function(){var o=new u;return this.copyTo(o),o},u.prototype.copyTo=function(o){o.Ej=this.Ej,o.Vn=this.Vn},u.prototype.Lz=function(){this.Vn=!this.Vn},u.prototype.sm=function(){return this.Ej!=null?this.Ej.Xf:null},u.prototype.FJ=function(o){if(0>=o)throw h.i.O();if(o!=this.Fc()){if((o=h.qf.geogtran(o))==null)throw h.i.O("Geogtran not found.");this.Ej=new A(o)}},u.prototype.wz=function(){return this.Ej==null?null:this.Ej.Xf.toString()},u.prototype.lX=function(o){if(o==null)throw h.i.O();var r=null;try{r=h.qf.fromString(h.Tc.PE_TYPE_GEOGTRAN,o)}catch{throw h.i.O()}this.Ej=new A(r)},u.prototype.Nb=function(o){return o==this||!(!(o instanceof u)||(0>=this.Fc()||this.Fc()!=o.Fc())&&!this.sm().isEqual(o.sm()))&&this.Vn==o.Vn},u.prototype.toString=function(){var o="GeographicTransformation: "+this.wz();return 200<o.length?o.substring(0,197)+"... ("+o.length.toString()+" characters)":o},u.create=function(o,r){var n=new u;return n.FJ(o),r&&n.Lz(),n},u.oP=function(o,r){var n=new u;return n.lX(o),r&&n.Lz(),n},u}();h.Cx=w}(q||(q={})),function(h){var A=function(){function u(){}return u.construct=function(o,r,n,a){var c=new u;return c.jw=o,c.kw=r,c.IY=n,c.JY=a,c},u.zy=function(o,r){return o.jw==r.jw?o.kw==r.kw?0:o.kw<r.kw?-1:1:o.jw<r.jw?-1:1},u}(),w=function(){function u(){this.qT=[],this.rT=[],this.rp()}return u.fz=function(){return u.dK==null&&(u.dK=new u),u.dK},u.prototype.rp=function(){this.cD(this.qT),this.cD(this.rT)},u.prototype.cD=function(o){try{var r=[];r=r.sort(A.zy);for(var n=0;n<r.length;n++)o.push(r[n])}catch{}},u}();h.uY=w}(q||(q={})),function(h){var A=function(){function w(){}return w.prototype.sD=function(u){this.Gk=u},w.prototype.QM=function(u){this.Gb=u},w.prototype.rD=function(u){this.Ao=u},w.wE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736)},w.uE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},w.vE=function(u){return!(u.B()||u.K()!=1607&&u.K()!=1736||20>u.I())},w}();h.Vk=A}(q||(q={})),function(h){h.bc=function(){function A(){}return A.LT=function(w){var u=new h.Ea;return u.rx(w.gs(),w.js()),u.Aj(w.gs(),w.hs()),u.Aj(w.fs(),w.hs()),u.Aj(w.fs(),w.js()),u},A.Bh=function(w,u){return w===null?null:h.Gx.local().W(w,u,null)},A.bY=function(w,u){var o=h.Ih.local();return w=new h.$c(w),o.W(w,u,null).next()},A.km=function(w,u,o){return h.lp.local().W(w,u,o,null)},A.fp=function(w,u,o){return h.Jx.local().W(w,u,o,null)},A.NX=function(w,u,o){var r=h.Jx.local();for(w=new h.$c(w),u=new h.$c(u),o=r.W(w,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},A.Nb=function(w,u,o){return h.fj.local().W(3,w,u,o,null)},A.NP=function(w,u,o){return h.fj.local().W(4,w,u,o,null)},A.JS=function(w,u,o){var r=h.Xk.local();for(w=new h.$c(w),u=new h.$c(u),o=r.W(w,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},A.KP=function(w,u,o){var r=h.lp.local();for(w=new h.$c(w),u=new h.$c(u),o=r.W(w,u,o,null),r=[];(u=o.next())!=null;)r.push(u);return r},A.Fa=function(w,u,o){return h.Xk.local().W(w,u,o,null)},A.iY=function(w,u,o){return h.fj.local().W(2,w,u,o,null)},A.contains=function(w,u,o){return h.fj.local().W(1,w,u,o,null)},A.vP=function(w,u,o){return h.fj.local().W(16,w,u,o,null)},A.touches=function(w,u,o){return h.fj.local().W(8,w,u,o,null)},A.vU=function(w,u,o){return h.fj.local().W(32,w,u,o,null)},A.LS=function(w,u,o){return h.fj.local().W(1073741824,w,u,o,null)},A.sB=function(w,u,o,r){return h.tL.local().W(w,u,o,r,null)},A.ub=function(w,u,o,r){var n=null;if(o!=null){if(n=o.Id(),r!=null&&n.Fc()!=r.Fc()&&n.od!=r.od)throw h.i.Zk()}else if(r!=null)throw h.i.O();return w=h.kL.local().W(w,u,null),n!==null&&r!==null&&(w=h.Uc.Ph(w,n,r)),w},A.clip=function(w,u,o){return h.eL.local().W(w,h.l.construct(u.gs(),u.js(),u.fs(),u.hs()),o,null)},A.fl=function(w,u,o){if(w==null||u==null)return null;for(w=h.gL.local().W(!0,w,u,o,null),u=[];(o=w.next())!=null;)o.B()||u.push(o);return u.slice(0)},A.GN=function(w,u,o,r,n,a,c,p){if(n===!0)return A.HN(w,u,o,r,a,c,p);if(n=o,u!=null){if(c=u.Id(),r!=null&&c.Fc()!=r.Fc()){if(c.od!=r.od)throw h.i.Zk();n=[],h.Uc.RE(o,o.length,r,c,n)}}else if(r!=null)throw h.i.O();if(o=h.uC.local(),a){for(w=new h.$c(w),u=o.W(w,u,n,a,null),w=[];(a=u.next())!=null;)w.push(a);a=w.slice(0)}else for(a=[],r=0;r<w.length;r++)a[r]=o.W(w[r],u,n[r],null);return a},A.HN=function(w,u,o,r,n,a,c){if(u===null||(r==null&&(r=u.Fc()!==4326?u.Id():h.Uc.ah(9001)),r.od!==0))throw h.i.O();if(h.Uc.RE(o,o.length,r,h.Uc.ah(9001),o),r=h.zC.local(),n){for(w=new h.$c(w),u=r.W(w,u,a,o,c,!1,n,null),o=[];(a=u.next())!=null;)o.push(a);n=o.slice(0)}else{n=[];for(var p=0;p<w.length;p++)n[p]=r.W(w[p],u,a,o[p],c,!1,null)}return n},A.buffer=function(w,u,o,r,n,a,c){var p=o;if(n===!1){if(u!=null){if(n=u.Id(),r!=null&&n.Fc()!=r.Fc()){if(n.od!=r.od)throw h.i.Zk();p=h.Uc.Ph(o,r,n)}}else if(r!=null)throw h.i.O();w=h.uC.local().W(w,u,p,null)}else{if(u===null||(r==null&&(r=u.Fc()!==4326?u.Id():h.Uc.ah(9001)),r.od!==0))throw h.i.O();p=h.Uc.Ph(o,r,h.Uc.ah(9001)),w=h.zC.local().W(w,u,a,p,c,!1,null)}return w},A.tU=function(w,u,o,r,n,a,c){if(u!=null){var p=u.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.od!=c.od)throw h.i.Zk();o=h.Uc.Ph(o,c,p)}}else if(c!=null)throw h.i.O();for(w=new h.$c(w),u=h.CC.local().W(w,u,o,r,n,a,null),o=[];(r=u.next())!=null;)o.push(r);return o.slice(0)},A.offset=function(w,u,o,r,n,a,c){if(u!=null){var p=u.Id();if(c!=null&&p.Fc()!=c.Fc()){if(p.od!=c.od)throw h.i.Zk();o=h.Uc.Ph(o,c,p)}}else if(c!=null)throw h.i.O();return h.CC.local().W(w,u,o,r,n,a,null)},A.cP=function(w){return h.wC.local().W(w,null)},A.dP=function(w,u){var o=h.wC.local();for(w=new h.$c(w),u=o.W(w,u,null),o=[];(w=u.next())!=null;)o.push(w);return o},A.iz=function(w,u,o){return h.Hx.local().iz(w,u,o)},A.jz=function(w,u){return h.Hx.local().jz(w,u)},A.kz=function(w,u,o,r){return h.Hx.local().kz(w,u,o,r)},A.ZB=function(w,u){return h.$l.local().W(w,u,!1,null)},A.WS=function(w,u){return h.$l.local().ts(w,u,null)},A.KQ=function(w,u,o,r,n){var a=h.yC.local();if(u!=null){if(u=u.Id(),n!=null&&u.Fc()!=n.Fc()){if(u.od!=n.od)throw h.i.Zk();o=h.Uc.Ph(o,n,u)}}else if(n!=null)throw h.i.O();return a.W(w,o,r,null)},A.Sr=function(w,u,o,r){var n=h.Zl.local();if(u!=null){if(u=u.Id(),r!=null&&u.Fc()!=r.Fc()){if(u.od!=r.od)throw h.i.Zk();o=h.Uc.Ph(o,r,u)}}else if(r!=null)throw h.i.O();return n.W(w,o,null)},A.Ry=function(w,u,o,r,n){n===void 0&&(n=0);var a=h.mL.local();if(n==4||n!==0)throw h.i.Fe();if(r!==null){if(r.od!==0)throw h.i.O("Unit must be a linear unit type");o=h.Uc.Ph(o,r,h.Uc.ah(9001))}return a.W(w,o,u,n,null)},A.QQ=function(w,u,o,r){if(w===null)return 0;if(r==4||r!==0)throw h.i.Fe();if(w.K()==197)w=A.LT(w);else if(w.K()!=1736)return 0;if(r=h.cb.tc(u),w=h.cb.Bh(w,u,r),w=h.OK.RQ([w])[0],o!==null){if(o.od!==2)throw h.i.O("Unit must be a area unit type");w=h.Uc.Ph(w,h.Uc.ah(109404),o)}return w},A.TQ=function(w,u,o,r){if(w=h.oL.local().W(w,u,r,null),o!==null){if(o.od!==0)throw h.i.O("Unit must be a linear unit type");w=h.Uc.Ph(w,h.Uc.ah(9001),o)}return w},A.BU=function(w,u,o){if(w===null)return 0;var r=null;if(u!=null){if((r=u.Id()).od==0&&(r=h.Uc.VF(r))==null&&o!==null)throw h.i.O();if(o!=null&&r.Fc()!=o.Fc()&&r.od!=o.od)throw h.i.Zk()}else if(o!=null)throw h.i.O();return w.K()==1736||w.K()==197?(w=w.He(),o!==null?h.Uc.Ph(w,r,o):w):0},A.CU=function(w,u,o){if(w===null||w.B()||1>w.Eb())return 0;var r=null;if(u!=null){if(r=u.Id(),o!=null&&r.Fc()!=o.Fc()&&r.od!=o.od)throw h.i.Zk()}else if(o!=null)throw h.i.O();w.K()==1736||w.K()==197?u=w.mg():h.ba.zd(w.K())?(u=new h.Ua(w.description)).oc(w,!0):u=w,w=0,u=u.Ha();for(var n=new h.h,a=new h.h;u.ab();)for(;u.Ia();){var c=u.ia();c.$p(n),c.Vr(a),w+=h.h.ub(n,a)}return r!==null&&o!==null&&(w=h.Uc.Ph(w,r,o)),w},A.$O=function(w){return w.points!==void 0?A.fS(w,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM):w.rings!==void 0?A.fG(w.rings,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"P"):w.paths!==void 0?A.fG(w.paths,w.hasZ!==void 0&&w.hasZ,w.hasM!==void 0&&w.hasM,"L"):w.x!==void 0?A.gS(w):w.xmin!==void 0?A.eS(w):null},A.gS=function(w){if(w.x==null||w.x=="NaN")return new h.Ta;var u=new h.Ta(w.x,w.y);return w.z!==void 0&&w.z!==null&&u.oX(w.z),w.m!==void 0&&w.m!==null&&u.ZW(w.m),u},A.eS=function(w){if(w.xmin==null||w.xmin=="NaN")return new h.Hh;var u=new h.Hh(w.xmin,w.ymin,w.xmax,w.ymax);return w.zmin!==void 0&&w.zmin!==null&&u.setInterval(1,0,w.zmin,w.zmax),w.mmin!==void 0&&w.mmin!==null&&u.setInterval(2,0,w.mmin,w.mmax),u},A.fS=function(w,u,o){var r=0,n=new h.de,a=3*w.points.length;a%2!=0&&a++,2>a&&(a=2);var c=h.P.truncate(3*w.points.length/2);4>c?c=4:16>c&&(c=16),a=h.Zc.En(a,0);var p=h.Zc.En(c);c=h.Zc.En(c);for(var f=0;f<w.points.length;f++)a.write(2*f,w.points[f][0]),a.write(2*f+1,w.points[f][1]),p.write(f,u||o?w.points[f][2]:NaN),c.write(f,o&&u?w.points[f][3]:NaN),r++;return r!=0&&(n.resize(r),n.kn(0,a)),u&&(n.se(1),n.kn(1,p)),o&&(n.se(2),n.kn(2,u==0?p:c)),n.Qc(16777215),n},A.fG=function(w,u,o,r){var n=0,a=2;if(r=="P"){var c=new h.Ea;n=1,a=3}else c=new h.Ua;for(var p=h.Zc.Qh(0),f=h.Zc.Or(0),m=0,b=0,S=[],M=[],T=0;T<w.length;T++){var k=w[T].length;if(S[T]=!1,r==="P"&&w[T][0][0]===w[T][w[T].length-1][0]&&w[T][0][1]===w[T][w[T].length-1][1]){var C=o==0||w[T][0][3]===w[T][w[T].length-1][3]||w[T][0][3]===void 0&&w[T][w[T].length-1][3]===void 0;(u==0||w[T][0][2]===w[T][w[T].length-1][2]||w[T][0][2]===void 0&&w[T][w[T].length-1][2]===void 0)&&C&&(S[T]=!0,--k)}k>=a?(M[T]=!1,b+=1,p.add(m),f.add(n),m+=k):M[T]=!0}for((r=3*m)%2!=0&&r++,2>r&&(r=2),4>(T=h.P.truncate(3*m/2))?T=4:16>T&&(T=16),r=h.Zc.En(r,0),n=h.Zc.En(T),a=h.Zc.En(T),T=k=0;T<w.length;T++)if(M[T]===!1)for(C=0;C<w[T].length;C++){var N=!1;C===w[T].length-1&&S[T]===!0&&(N=!0),N||(r.write(2*k,w[T][C][0]),r.write(2*k+1,w[T][C][1]),n.write(k,u||o?w[T][C][2]:NaN),a.write(k,o&&u?w[T][C][3]:NaN),k++)}return m!=0&&(w=c,p.resize(b),f.resize(b),0<m&&(p.add(m),f.add(0)),w.kn(0,r),w.JJ(f),w.KJ(p)),u&&(c.se(1),c.kn(1,n)),o&&(c.se(2),c.kn(2,u==0?n:a)),c.Qc(16777215),c},A}()}(q||(q={})),function(h){h.Dx=function(){function A(){}return A.dr=function(w){var u,o=0,r=w.length,n=w[0];for(u=0;u<r-1;u++){var a=w[u+1];o+=(a[0]-n[0])*(a[1]+n[1]),n=a}return 0<=o},A.rotate=function(w,u,o){u=u*Math.PI/180;var r=Math.cos(u),n=Math.sin(u);if(w.paths!==void 0){u={paths:[]};for(var a=0;a<w.paths.length;a++){for(var c=w.paths[a],p=[],f=0;f<c.length;f++){var m=c[f].slice(0);p.push(m);var b=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,S=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y;m[0]=b,m[1]=S}u.paths.push(p)}return u}if(w.rings!==void 0){for(u={rings:[]},a=0;a<w.rings.length;a++){c=w.rings[a],p=[];var M=A.dr(c);for(f=0;f<c.length;f++)m=c[f].slice(0),p.push(m),b=r*(c[f][0]-o.x)-n*(c[f][1]-o.y)+o.x,S=n*(c[f][0]-o.x)+r*(c[f][1]-o.y)+o.y,m[0]=b,m[1]=S;A.dr(p)!==M&&p.reverse(),u.rings.push(p)}return u}if(w.x!==void 0)return u={x:r*(w.x-o.x)-n*(w.y-o.y)+o.x,y:n*(w.x-o.x)+r*(w.y-o.y)+o.y},w.z!==void 0&&(u.z=w.z),w.m!==void 0&&(u.m=w.m),u;if(w.points!==void 0){for(u={points:[]},w=w.points,f=0;f<w.length;f++)(a=w[f].slice(0))[0]=r*(w[f][0]-o.x)-n*(w[f][1]-o.y)+o.x,a[1]=n*(w[f][0]-o.x)+r*(w[f][1]-o.y)+o.y,u.points.push(a);return u}return null},A.DQ=function(w,u){if(w.paths!==void 0){for(var o={paths:[]},r=0;r<w.paths.length;r++){for(var n=w.paths[r],a=[],c=0;c<n.length;c++){var p=n[c].slice(0);a.push(p);var f=u.x-n[c][0];p[0]=n[c][0]+2*f}o.paths.push(a)}return o}if(w.rings!==void 0){for(o={rings:[]},r=0;r<w.rings.length;r++){n=w.rings[r];var m=A.dr(n);for(a=[],c=0;c<n.length;c++)p=n[c].slice(0),a.push(p),f=u.x-n[c][0],p[0]=n[c][0]+2*f;A.dr(a)!==m&&a.reverse(),o.rings.push(a)}return o}if(w.x!==void 0)return f=u.x-w.x,o={x:w.x+2*f,y:w.y},w.z!==void 0&&(o.z=w.z),w.m!==void 0&&(o.m=w.m),o;if(w.points!==void 0){for(o={points:[]},w=w.points,c=0;c<w.length;c++)r=w[c].slice(0),f=u.x-r[0],r[0]+=2*f,o.points.push(r);return o}return w.xmin!==void 0?(o={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(o.zmin=w.zmin,o.zmax=w.zmax),w.mmin!==void 0&&(o.mmin=w.mmin,o.mmax=w.mmax),f=u.x-w.xmin,o.xmax=w.xmin+2*f,f=u.x-w.xmax,o.xmin=w.xmax+2*f,o):null},A.EQ=function(w,u){if(w.paths!==void 0){for(var o={paths:[]},r=0;r<w.paths.length;r++){for(var n=w.paths[r],a=[],c=0;c<n.length;c++){var p=n[c].slice(0);a.push(p);var f=u.y-n[c][1];p[1]=n[c][1]+2*f}o.paths.push(a)}return o}if(w.rings!==void 0){for(o={rings:[]},r=0;r<w.rings.length;r++){n=w.rings[r];var m=A.dr(n);for(a=[],c=0;c<n.length;c++)p=n[c].slice(0),a.push(p),f=u.y-n[c][1],p[1]=n[c][1]+2*f;A.dr(a)!==m&&a.reverse(),o.rings.push(a)}return o}if(w.x!==void 0)return f=u.y-w.y,o={y:w.y+2*f,x:w.x},w.z!==void 0&&(o.z=w.z),w.m!==void 0&&(o.m=w.m),o;if(w.points!==void 0){for(o={points:[]},w=w.points,c=0;c<w.length;c++)r=w[c].slice(0),f=u.y-r[1],r[1]+=2*f,o.points.push(r);return o}return w.xmin!==void 0?(o={v:w.xmin,G:w.ymin,C:w.xmax,H:w.ymax},w.zmin!==void 0&&(o.zmin=w.zmin,o.zmax=w.zmax),w.mmin!==void 0&&(o.mmin=w.mmin,o.mmax=w.mmax),f=u.y-w.ymin,o.ymax=w.ymin+2*f,f=u.y-w.ymax,o.ymin=w.ymax+2*f,o):null},A}()}(q||(q={})),function(h){h.TK=function(){function A(){}return A.Kg=function(w,u){switch(u==null&&(u=h.ee.og()),w){case 33:return new h.Ta(u);case 322:return new h.zb(u);case 197:return new h.Hh(u);case 550:return new h.de(u);case 1607:return new h.Ua(u);case 1736:return new h.Ea(u);default:throw h.i.ga("invalid argument.")}},A}()}(q||(q={})),function(h){var A=function(){function w(u,o){this.Qe=h.ja.rf(u,-1),this.va=new h.cu,this.yl=o}return w.prototype.sW=function(u){this.va.Bt(Math.min(this.Qe.size,u)),this.va.hn(u)},w.prototype.addElement=function(u,o){if(o===void 0)return this.ZM(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);return r==-1&&(r=this.va.Rh(),this.Qe.set(o,r)),this.va.addElement(r,u)},w.prototype.ZM=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);return r==-1&&(r=this.va.Rh(),this.Qe.set(o,r)),this.va.addElement(r,u)},w.prototype.kd=function(u,o){if(o===void 0)this.EP(u);else{o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),a=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(r,a,n),this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1))):a=n,n=c}}},w.prototype.EP=function(u){var o=this.yl.ez(u);o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),a=-1;n!=-1;){var c=this.va.lb(n);this.va.ka(n)==u?(this.va.kd(r,a,n),this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1))):a=n,n=c}},w.prototype.kR=function(u){return u=h.P.truncate(u%this.Qe.size),(u=this.Qe.get(u))==-1?-1:this.va.sc(u)},w.prototype.yR=function(u){return this.va.lb(u)},w.prototype.wd=function(u){var o=this.yl.ez(this.ka(u));o=h.P.truncate(o%this.Qe.size);var r=this.Qe.get(o);if(r==-1)throw h.i.O();for(var n=this.va.sc(r),a=-1;n!=-1;){if(n==u)return this.va.kd(r,a,n),void(this.va.sc(r)==-1&&(this.va.eh(r),this.Qe.set(o,-1)));a=n,n=this.va.lb(n)}throw h.i.O()},w.prototype.ka=function(u){return this.va.ka(u)},w.prototype.clear=function(){this.Qe=h.ja.rf(this.Qe.size,-1),this.va.clear()},w.prototype.size=function(){return this.va.NF()},w}();h.YK=A}(q||(q={})),function(h){var A=function(){function w(){this.Ni=new h.ad(3),this.va=new h.ad(6),this.jT=!1,this.je=-1}return w.prototype.hl=function(u){this.Ni.kd(u)},w.prototype.Rw=function(){return this.Ni.De()},w.prototype.dv=function(u){this.va.kd(u)},w.prototype.UA=function(){return this.va.De()},w.prototype.QB=function(u,o){this.Ni.T(u,1,o)},w.prototype.fx=function(u,o){this.Ni.T(u,2,o)},w.prototype.YW=function(u,o){this.Ni.T(u,3,o)},w.prototype.OB=function(u,o){this.va.T(u,4,o)},w.prototype.aX=function(u,o){this.va.T(u,3,o)},w.prototype.NJ=function(u,o){this.va.T(u,2,o)},w.prototype.Rh=function(u){var o=this.UA();return this.va.T(o,3,this.je),this.va.T(o,4,0),this.va.T(o,5,u),this.je!=-1&&this.NJ(this.je,o),this.je=o},w.prototype.eh=function(u){this.FE(u);var o=this.va.U(u,2),r=this.va.U(u,3);return o!=-1?this.aX(o,r):this.je=r,r!=-1&&this.NJ(r,o),this.dv(u),r},w.prototype.Bt=function(u){this.va.Ee(u)},w.prototype.JF=function(u){return this.va.U(u,5)},w.prototype.XW=function(u,o){this.va.T(u,5,o)},w.prototype.addElement=function(u,o){return this.mS(u,o)},w.prototype.mS=function(u,o){var r=this.Rw();this.fx(r,-1),this.va.U(u,0)==-1&&this.va.T(u,0,r);var n=this.va.U(u,1);return this.QB(r,n),n!=-1&&this.fx(n,r),this.va.T(u,1,r),this.setData(r,o),this.OB(u,this.ds(u)+1),this.jT&&this.YW(r,u),r},w.prototype.kd=function(u,o){var r=this.xe(o),n=this.lb(o);return r!=-1?this.fx(r,n):this.va.T(u,0,n),n!=-1?this.QB(n,r):this.va.T(u,1,r),this.hl(o),this.OB(u,this.ds(u)-1),n},w.prototype.hn=function(u){this.Ni.Ee(u)},w.prototype.getData=function(u){return this.Ni.U(u,0)},w.prototype.setData=function(u,o){this.Ni.T(u,0,o)},w.prototype.lb=function(u){return this.Ni.U(u,2)},w.prototype.xe=function(u){return this.Ni.U(u,1)},w.prototype.sc=function(u){return this.va.U(u,0)},w.prototype.Gc=function(u){return this.va.U(u,1)},w.prototype.clear=function(){for(var u=this.je;u!=-1;)u=this.eh(u)},w.prototype.FE=function(u){for(var o=this.Gc(u);o!=-1;){var r=o;o=this.xe(r),this.hl(r)}this.va.T(u,0,-1),this.va.T(u,1,-1),this.OB(u,0)},w.prototype.B=function(){return this.Ni.size==0},w.prototype.NF=function(){return this.Ni.size},w.prototype.ds=function(u){return this.va.U(u,4)},w.prototype.lz=function(u){return this.va.U(u,3)},w}();h.kp=A}(q||(q={})),function(h){var A=function(){function w(u){u===void 0?(this.ug=new h.ad(2),this.va=new h.ad(4),this.je=-1,this.Sv=!0):(this.ug=new h.ad(2),this.va=new h.ad(u?4:2),this.je=-1,this.Sv=u)}return w.prototype.hl=function(u){this.ug.kd(u)},w.prototype.Rw=function(){return this.ug.De()},w.prototype.dv=function(u){this.va.kd(u)},w.prototype.UA=function(){return this.va.De()},w.prototype.Rh=function(){var u=this.UA();return this.Sv&&(this.va.T(u,3,this.je),this.je!=-1&&this.va.T(this.je,2,u),this.je=u),u},w.prototype.eh=function(u){for(var o=this.sc(u);o!=-1;){var r=o;o=this.lb(o),this.hl(r)}this.Sv&&(o=this.va.U(u,2),r=this.va.U(u,3),o!=-1?this.va.T(o,3,r):this.je=r,r!=-1&&this.va.T(r,2,o)),this.dv(u)},w.prototype.Bt=function(u){this.va.Ee(u)},w.prototype.addElement=function(u,o){var r=this.va.U(u,1),n=this.Rw();return r!=-1?this.ug.T(r,1,n):this.va.T(u,0,n),this.va.T(u,1,n),this.ug.T(n,0,o),n},w.prototype.hn=function(u){this.ug.Ee(u)},w.prototype.kd=function(u,o,r){o!=-1?(this.ug.T(o,1,this.ug.U(r,1)),this.va.U(u,1)==r&&this.va.T(u,1,o)):(this.va.T(u,0,this.ug.U(r,1)),this.va.U(u,1)==r&&this.va.T(u,1,-1)),this.hl(r)},w.prototype.Cy=function(u,o){var r=this.va.U(u,1),n=this.va.U(o,0);n!=-1&&(r!=-1?this.ug.T(r,1,n):this.va.T(u,0,n),this.va.T(u,1,this.va.U(o,1))),this.Sv&&(u=this.va.U(o,2),r=this.va.U(o,3),u!=-1?this.va.T(u,3,r):this.je=r,r!=-1&&this.va.T(r,2,u)),this.dv(o)},w.prototype.ka=function(u){return this.ug.U(u,0)},w.prototype.Uj=function(u,o){this.ug.T(u,0,o)},w.prototype.lb=function(u){return this.ug.U(u,1)},w.prototype.sc=function(u){return this.va.U(u,0)},w.prototype.Kn=function(u){return this.ka(this.sc(u))},w.prototype.clear=function(){this.ug.oj(!0),this.va.oj(!0),this.je=-1},w.prototype.B=function(){return this.ug.size==0},w.prototype.NF=function(){return this.ug.size},w.prototype.lz=function(u){return this.va.U(u,3)},w}();h.cu=A}(q||(q={})),function(h){h.ta=function(){function A(){}return A.Xd=function(w,u,o){return u=u.zr(),w=w!=null&&w.Yd!==void 0?w.Yd(0):0,o&&(u*=4,w*=1.1),Math.max(w,u)},A.Gr=function(w){return 2*Math.sqrt(2)*w},A.lN=function(w){return Math.sqrt(2)*w},A.mj=function(w,u,o){var r=new h.l;return u.A(r),A.Xd(w,r,o)},A.qE=function(w,u,o){return u=u.Vg(1,0).zr(),w=w!=null?w.Yd(1):0,o&&(u*=4,w*=1.1),Math.max(w,u)},A.ov=function(w,u){var o=new h.l;return w.yc(o),w=new h.l,u.yc(w),o.$b(w),o},A.SN=function(w){var u=new h.l;if(w.yc(u),u.B())return null;var o=new h.fu(u,8),r=-1,n=new h.l,a=!1;do for(var c=0,p=w.ea();c<p;c++){if(w.Tj(c,n),(r=o.Ez(c,n,r))==-1){if(a)throw h.i.ga("internal error");w.Ap(u,!1),a=!0,o.reset(u,8);break}a=!1}while(a);return o},A.hE=function(w){var u=new h.l;w.yc(u);for(var o=new h.fu(u,8),r=-1,n=w.Ha(),a=new h.l,c=!1;n.ab();)for(;n.Ia();){var p=n.ia(),f=n.xb();if(p.A(a),(r=o.Ez(f,a,r))==-1){if(c)throw h.i.Ra();w.Ap(u,!1),c=!0,o.reset(u,8),n.aj();break}}return o},A.lj=function(w,u){var o=new h.l;w.yc(o);for(var r=new h.fu(o,8),n=-1,a=new h.l,c=w.Ha(),p=!1;c.ab();)for(;c.Ia();){var f=c.ia(),m=c.xb();if(f.A(a),a.isIntersecting(u)&&(n=r.Ez(m,a,n))==-1){if(p)throw h.i.ga("internal error.");w.Ap(o,!1),p=!0,r.reset(o,8),c.aj();break}}return r},A.iE=function(w,u){for(var o=new h.fu(u,8),r=new h.h,n=!1,a=new h.l,c=0;c<w.I();c++)if(w.D(c,r),u.contains(r)&&(a.L(r),o.xj(c,a)==-1)){if(n)throw h.i.Ra();n=!0,c=new h.l,w.Ap(c,!1),o.reset(c,8),c=-1}return o},A.fR=function(w,u,o){var r=new h.l,n=new h.l;w.yc(r),u.yc(n),r.X(o,o),n.X(o,o);var a=new h.l;a.L(r),a.Fa(n),w=w.Ha(),u=u.Ha();var c=new h.rC;c.VB(o);var p=!1;for(c.jK();w.ab();)for(;w.Ia();)w.ia().A(r),r.isIntersecting(a)&&(p=!0,(o=new h.l).L(r),c.CD(w.xb(),o));if(c.cF(),!p)return null;for(r=!1,c.iK();u.ab();)for(;u.Ia();)u.ia().A(n),n.isIntersecting(a)&&(r=!0,(o=new h.l).L(n),c.yD(u.xb(),o));return c.bF(),r?c:null},A.gR=function(w,u,o,r,n){var a=w.K(),c=u.K(),p=new h.l,f=new h.l;w.yc(p),u.yc(f),p.X(o,o),f.X(o,o);var m=new h.l;m.L(p),m.Fa(f);var b=new h.rC;b.VB(o);var S=!1;b.jK();var M=0;for(o=w.ea();M<o;M++)r&&a==1736&&!w.Gv(M)||(w.Tj(M,p),p.isIntersecting(m)&&(S=!0,b.CD(M,p)));if(b.cF(),!S)return null;for(w=!1,b.iK(),r=0,o=u.ea();r<o;r++)n&&c==1736&&!u.Gv(r)||(u.Tj(r,f),f.isIntersecting(m)&&(w=!0,b.yD(r,f)));return b.bF(),w?b:null},A.Tu=function(w,u,o){if(w!=u)for(var r=0;r<o;r++)w[r]==null?w[r]=h.h.cl(u[r]):w[r].N(u[r])},A.Ey=function(w,u,o,r){var n=0;for(r+=0;n<r;o++,n++)w[n]==null&&(w[n]=[0,0]),w[n][0]=u[o].x,w[n][1]=u[o].y},A.Dy=function(w,u,o,r){var n=u,a=0;for(u=r+u;n<u;a++,n++)w[n]==null?w[n]=h.h.construct(o[a][0],o[a][1]):w[n].na(o[a][0],o[a][1])},A.eP=function(w,u,o){if(w!=u)for(var r=0;r<o;r++)w[r]==null?w[r]=new h.Ta(u[r]):u[r].copyTo(w[r])},A.pE=function(w,u,o,r){var n=0;return w!=null&&(n=w.Yd(0),r&&!o||w==null||(n+=1.01*w.pz(0))),o&&(u*=4,n*=1.01),Math.max(n,u)},A.oy=function(w,u,o){return A.pE(w,u.zr(),o,!1)},A.aO=function(w,u){var o=new h.l;return u.A(o),A.oy(w,o,!0)},A.py=function(w,u){return A.pE(w,u.zr(),!1,!0)},A.Ju=function(w,u){var o=new h.l;return u.A(o),A.py(w,o)},A.uG=function(w,u,o,r){r*=r;var n=new h.h;if(n.vc(w,u),(w=new h.h).vc(o,u),u=n.Tk(),o=w.Tk(),u<=r&&o<=r)return!0;var a=h.mc.ox(n.yi(w));return(a<=r*u||a<=r*o)&&0<=n.Sh(w)},A.YJ=function(w,u,o,r){for(var n=0;n<u;n++){var a=w[n].y,c=h.P.Sk(a,o,r);c!=a&&(w[n].y=c)}},A}()}(q||(q={})),function(h){var A,w,u=function(){function a(c){this.Za=c}return a.prototype.compare=function(c,p,f){c=c.ka(f),f=this.Za.pk(p);var m=this.Za.pk(c);return f<m?-1:f==m?n.iq(p)&&n.Iv(c)?-1:n.iq(c)&&n.Iv(p)?1:0:1},a}(),o=function(){function a(c){this.Za=c}return a.prototype.qr=function(c,p,f){this.Za.yX(f,c,p)},a.prototype.bq=function(c){return this.Za.pk(c)},a}();(w=A||(A={}))[w.initialize=0]="initialize",w[w.pIn=1]="pIn",w[w.pL=2]="pL",w[w.pR=3]="pR",w[w.pT=4]="pT",w[w.right=5]="right",w[w.left=6]="left",w[w.all=7]="all";var r=function(){function a(){this.Za=null,this.Si=new h.Oc,this.ji=new h.ja(0),this.sg=[0,0]}return a.prototype.Zi=function(c,p){this.Si.pa=c.pa-p,this.Si.wa=c.wa+p,this.ji.resize(0),this.he=0,this.sg[0]=0},a.prototype.yB=function(c,p,f){if(c>p)throw h.i.O();this.Si.pa=c-f,this.Si.wa=p+f,this.ji.resize(0),this.he=0,this.sg[0]=0},a.prototype.Vo=function(c,p){this.Si.pa=c-p,this.Si.wa=c+p,this.ji.resize(0),this.he=0,this.sg[0]=0},a.prototype.next=function(){if(!this.Za.nq)throw h.i.Hb();if(0>this.he)return-1;for(var c=!0;c;)switch(this.sg[this.he]){case 1:c=this.xU();break;case 2:c=this.yU();break;case 3:c=this.zU();break;case 4:c=this.AU();break;case 5:c=this.xW();break;case 6:c=this.cT();break;case 7:c=this.nN();break;case 0:c=this.Bz();break;default:throw h.i.Ra()}return this.Qg!=-1?this.Op()>>1:-1},a.construct=function(c){var p=new a;return p.Za=c,p.ji.Jb(20),p.he=-1,p},a.prototype.Bz=function(){return this.Qg=this.pH=this.Oi=this.Mc=-1,this.Za.me!=null&&0<this.Za.me.size?(this.sg[0]=1,this.Oi=this.Za.kf,!0):(this.he=-1,!1)},a.prototype.xU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.Qg=this.he=-1,!1;var c=this.Za.Pp(this.Mc);return this.Si.wa<c?(c=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.sg[++this.he]=6),!0):c<this.Si.pa?(c=this.Za.nk(this.Mc),this.Oi=this.Za.mk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.sg[++this.he]=5),!0):(this.sg[this.he]=2,this.pH=this.Mc,c=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.sg[++this.he]=7),!0)},a.prototype.yU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.sg[this.he]=3,this.Oi=this.Za.mk(this.pH),!0;if(this.Za.Pp(this.Mc)<this.Si.pa){var c=this.Za.nk(this.Mc);return this.Oi=this.Za.mk(this.Mc),c!=-1&&(this.gi=this.Za.bs(c),this.sg[++this.he]=5),!0}return c=this.Za.nk(this.Mc),this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.sg[++this.he]=7),(c=this.Za.mk(this.Mc))!=-1&&this.ji.add(c),!0},a.prototype.zU=function(){if(this.Mc=this.Oi,this.Mc==-1)return this.sg[this.he]=4,!0;if(this.Si.wa<this.Za.Pp(this.Mc)){var c=this.Za.nk(this.Mc);return this.Oi=this.Za.sj(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.sg[++this.he]=6),!0}return c=this.Za.nk(this.Mc),this.Oi=this.Za.mk(this.Mc),c!=-1&&(this.gi=this.Za.ml(c),this.sg[++this.he]=7),(c=this.Za.sj(this.Mc))!=-1&&this.ji.add(c),!0},a.prototype.AU=function(){if(this.ji.size==0)return this.Qg=this.he=-1,!1;this.Mc=this.ji.get(this.ji.size-1),this.ji.resize(this.ji.size-1);var c=this.Za.nk(this.Mc);return c!=-1&&(this.gi=this.Za.ml(c),this.sg[++this.he]=7),this.Za.sj(this.Mc)!=-1&&this.ji.add(this.Za.sj(this.Mc)),this.Za.mk(this.Mc)!=-1&&this.ji.add(this.Za.mk(this.Mc)),!0},a.prototype.cT=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())&&this.Za.pk(this.Op())<=this.Si.wa?(this.gi=this.MF(),!1):(this.he--,!0)},a.prototype.xW=function(){return this.Qg=this.gi,this.Qg!=-1&&n.Iv(this.Op())&&this.Za.pk(this.Op())>=this.Si.pa?(this.gi=this.JR(),!1):(this.he--,!0)},a.prototype.nN=function(){return this.Qg=this.gi,this.Qg!=-1&&n.iq(this.Op())?(this.gi=this.MF(),!1):(this.he--,!0)},a.prototype.MF=function(){return this.Za.Tf?this.Za.ag.lb(this.Qg):this.Za.Vi.lb(this.Qg)},a.prototype.JR=function(){return this.Za.Tf?this.Za.ag.xe(this.Qg):this.Za.Vi.xe(this.Qg)},a.prototype.Op=function(){return this.Za.Tf?this.Za.ag.ka(this.Qg):this.Za.Vi.getData(this.Qg)},a}();h.wY=r;var n=function(){function a(c){this.Cm=this.bi=this.ag=this.Vi=this.Mm=this.Gj=this.me=this.Hj=null,this.Tf=c,this.nq=this.Uv=!1}return a.prototype.mr=function(){this.Ok(!0)},a.prototype.Dr=function(c,p){if(!this.Uv)throw h.i.Hb();this.Hj.push(new h.Oc(c,p))},a.prototype.Hp=function(){if(!this.Uv)throw h.i.ga("invalid call");this.Uv=!1,this.nq=!0,this.Tf||(this.oS(),this.aw=this.Hj.length)},a.prototype.xj=function(c){if(!this.Tf||!this.nq)throw h.i.O("invalid call");if(this.kf==-1){var p=this.Hj.length;if(this.dA){var f=new h.ja(0);f.Jb(2*p),this.WI(f),this.bi.Jb(2*p),this.bi.resize(0),this.VI(f),this.Mm.resize(p,-1),this.Mm.Yj(-1,0,p),this.dA=!1}else this.Mm.Yj(-1,0,p);this.kf=this.Vu()}p=this.jG(c<<1,this.kf),f=this.ag.addElement(1+(c<<1),this.rz(p)),this.PJ(p,f),this.Mm.set(c,p),this.aw++},a.prototype.remove=function(c){if(!this.Tf||!this.nq)throw h.i.ga("invalid call");var p=this.Mm.get(c);if(p==-1)throw h.i.O("the interval does not exist in the interval tree");this.Mm.set(c,-1),this.aw--;var f=this.rz(p),m=this.ag.SR(f);this.ag.wd(this.qR(p),f),this.ag.wd(this.MR(p),f),(c=this.ag.size(f))==0&&(this.ag.GP(f),this.TJ(m,-1)),this.Gj.kd(p),f=this.OF(m);var b=this.sj(m),S=this.mk(m);for(p=0;!(0<c||m==this.kf||b!=-1&&S!=-1);)m==this.sj(f)?b!=-1?(this.Pk(f,b),this.Wj(b,f),this.Pk(m,-1)):S!=-1?(this.Pk(f,S),this.Wj(S,f),this.Rk(m,-1)):this.Pk(f,-1):b!=-1?(this.Rk(f,b),this.Wj(b,f),this.Pk(m,-1)):S!=-1?(this.Rk(f,S),this.Wj(S,f),this.Rk(m,-1)):this.Rk(f,-1),this.Wj(m,-1),p++,m=f,c=(f=this.nk(m))!=-1?this.ag.size(f):0,b=this.sj(m),S=this.mk(m),f=this.OF(m)},a.prototype.reset=function(){if(!this.Tf||!this.nq)throw h.i.O("invalid call");this.Ok(!1)},a.prototype.size=function(){return this.aw},a.prototype.getIterator=function(){return r.construct(this)},a.prototype.WI=function(c){for(var p=this.Hj.length,f=0;f<2*p;f++)c.add(f);this.zX(c,2*p)},a.prototype.VI=function(c){for(var p=NaN,f=0;f<c.size;f++){var m=c.get(f),b=this.pk(m);b!=p&&(this.bi.add(m),p=b)}},a.prototype.oS=function(){var c=this.Hj.length,p=new h.ja(0);p.Jb(2*c),this.WI(p),this.bi.Jb(2*c),this.bi.resize(0),this.VI(p),this.Gj.Ee(c),this.Vi.hn(2*c);var f=h.Zc.Qh(c);for(f.Yj(-1,0,c),this.kf=this.Vu(),c=0;c<p.size;c++){var m=p.get(c),b=f.get(m>>1);b!=-1?this.PJ(b,this.Vi.addElement(this.rz(b),m)):(b=this.jG(m,this.kf),f.set(m>>1,b))}},a.prototype.jG=function(c,p){var f=p,m=p,b=-1,S=0,M=this.bi.size-1,T=0,k=c>>1,C=NaN,N=NaN,F=!0,D=this.xR(k);for(k=this.uR(k);F;){S<M?(T=S+h.P.truncate((M-S)/2),this.bz(f)==-1&&this.zJ(f,this.bi.get(T),this.bi.get(T+1))):this.bz(f)==-1&&this.zJ(f,this.bi.get(S),this.bi.get(S));var j=this.Pp(f);if(k<j)p!=-1&&(p==f?(m=f,C=j,N=(p=this.sj(f))!=-1?this.Pp(p):NaN):N>j&&(j<C?this.Pk(m,f):this.Rk(m,f),this.Rk(f,p),this.Tf&&(this.Wj(f,m),this.Wj(p,f)),m=f,C=j,p=-1,N=NaN)),(M=this.rR(f))==-1&&(M=this.Vu(),this.VW(f,M)),f=M,M=T;else if(D>j)p!=-1&&(p==f?(m=f,C=j,N=(p=this.mk(f))!=-1?this.Pp(p):NaN):N<j&&(j<C?this.Pk(m,f):this.Rk(m,f),this.Pk(f,p),this.Tf&&(this.Wj(f,m),this.Wj(p,f)),m=f,C=j,p=-1,N=NaN)),(S=this.NR(f))==-1&&(S=this.Vu(),this.fX(f,S)),f=S,S=T+1;else{(F=this.nk(f))==-1&&(F=this.tP(f),this.TJ(f,F));var G=this.$M(F,c);b=this.rP(),this.iX(b,F),this.UW(b,G),f!=p&&(j<C?this.Pk(m,f):this.Rk(m,f),this.Tf&&this.Wj(f,m),p!=-1&&(N<j?this.Pk(f,p):this.Rk(f,p),this.Tf&&this.Wj(p,f))),F=!1}}return b},a.prototype.Vu=function(){return this.me.De()},a.prototype.tP=function(c){return this.Tf?this.ag.Rr(c):this.Vi.Rh(c)},a.prototype.rP=function(){return this.Gj.De()},a.prototype.Ok=function(c){c?(this.Uv=this.dA=!0,this.nq=!1,this.bi==null?this.bi=h.Zc.Qh(0):this.bi.resize(0),this.Hj==null?this.Hj=[]:this.Hj.length=0):this.dA=!1,this.Tf?this.Mm==null?(this.Mm=h.Zc.Qh(0),this.ag=new h.Zj,this.ag.Wo(new u(this))):this.ag.clear():this.Vi==null?this.Vi=new h.kp:this.Vi.clear(),this.me==null?(this.Gj=new h.ad(3),this.me=new h.ad(this.Tf?8:7)):(this.Gj.oj(!1),this.me.oj(!1)),this.kf=-1,this.aw=0},a.prototype.zJ=function(c,p,f){this.OW(c,p),this.PW(c,f)},a.prototype.Pp=function(c){var p=this.bz(c);return p==-1?NaN:(p=this.pk(p))==(c=this.pk(this.aR(c)))?p:.5*(p+c)},a.prototype.OW=function(c,p){this.me.T(c,0,p)},a.prototype.PW=function(c,p){this.me.T(c,1,p)},a.prototype.VW=function(c,p){this.me.T(c,3,p)},a.prototype.fX=function(c,p){this.me.T(c,4,p)},a.prototype.TJ=function(c,p){this.me.T(c,2,p)},a.prototype.Pk=function(c,p){this.me.T(c,5,p)},a.prototype.Rk=function(c,p){this.me.T(c,6,p)},a.prototype.Wj=function(c,p){this.me.T(c,7,p)},a.prototype.iX=function(c,p){this.Gj.T(c,0,p)},a.prototype.$M=function(c,p){return this.Tf?this.ag.addElement(p,c):this.Vi.addElement(c,p)},a.prototype.UW=function(c,p){this.Gj.T(c,1,p)},a.prototype.PJ=function(c,p){this.Gj.T(c,2,p)},a.prototype.ml=function(c){return this.Tf?this.ag.sc(c):this.Vi.sc(c)},a.prototype.bs=function(c){return this.Tf?this.ag.Gc(c):this.Vi.Gc(c)},a.iq=function(c){return(1&c)==0},a.Iv=function(c){return(1&c)==1},a.prototype.bz=function(c){return this.me.U(c,0)},a.prototype.aR=function(c){return this.me.U(c,1)},a.prototype.nk=function(c){return this.me.U(c,2)},a.prototype.rR=function(c){return this.me.U(c,3)},a.prototype.NR=function(c){return this.me.U(c,4)},a.prototype.sj=function(c){return this.me.U(c,5)},a.prototype.mk=function(c){return this.me.U(c,6)},a.prototype.OF=function(c){return this.me.U(c,7)},a.prototype.rz=function(c){return this.Gj.U(c,0)},a.prototype.qR=function(c){return this.Gj.U(c,1)},a.prototype.MR=function(c){return this.Gj.U(c,2)},a.prototype.xR=function(c){return this.Hj[c].pa},a.prototype.uR=function(c){return this.Hj[c].wa},a.prototype.zX=function(c,p){this.Cm==null&&(this.Cm=new h.Zt);var f=new o(this);this.Cm.sort(c,0,p,f)},a.prototype.yX=function(c,p,f){var m=this;c.Wd(p,f,function(b,S){var M=m.pk(b),T=m.pk(S);return M<T||M==T&&a.iq(b)&&a.Iv(S)?-1:1})},a.prototype.pk=function(c){var p=this.Hj[c>>1];return a.iq(c)?p.pa:p.wa},a}();h.ur=n}(q||(q={})),function(h){var A=function(){function w(u){if(u==null)throw h.i.ga("Invalid arguement");this.hf=u;var o=u.hR();o.aS()?u.ef.CG()?this.mo=h.ui.PannableFold:this.mo=h.ui.Clip:this.mo=h.ui.DontClip,o.bS()?u.Zf.CG()?this.Sm=h.ui.PannableFold:this.Sm=h.ui.Clip:this.Sm=h.ui.DontClip,this.Dm=o.Lr,this.gH=o.Xu,u=this.hf.mH,this.VG=u.ks(2147483648),this.Wv=u.ks(1073741824)}return w.Bh=function(u,o,r){return o.yw.Bh(u,r)},w.Tt=function(u,o,r,n){return u.yw.Tt(o,r,n)},w.St=function(u,o,r,n){if(r=0>r?o.length:r,(u=u.yw.Tt(o,r,n))==r)return u;for(var a=o=0;a<r;a++){var c=n[a];c.isNaN()||(o<a&&n[o].N(c),o++)}for(;o<r;o++)n[o].Sc();return u},w.transform=function(u,o,r,n,a){if(u.isIdentity())return h.ta.eP(n,o,r),r;for(var c=[],p=0,f=0;f<r;){for(var m=Math.min(c.length,r-f),b=f,S=0;b<m;b++,S++)c[S]==null?c[S]=o[b].D():o[b].D(c[S]);var M=a?w.St(u,c,m,c):w.Tt(u,c,m,c);for(S=b=0;b<M;b++,S++)n[f]==null&&(n[f]=new h.Ta(o[f])),n[f].Db(c[S]);f+=m,p+=M}return p},w.prototype.Tt=function(u,o,r){if(this.hf.isIdentity())return u!=r&&h.ta.Tu(r,u,o),o;var n=this.hf.ef,a=this.hf.Zf,c=n.Tb(),p=a.Tb();if(c==0&&c===p){var f=n.Sp();return a=f/(a=a.Sp()),(f=new h.Ed).Jt(a,a),f.XX(u,o,r),o}if(f=h.P.Hu(Math.min(o,64)),c==3){var m=n.Li;c=(n=m.gk()).Tb(),r!=u&&h.ta.Tu(r,u,o),h.Ab.bl(m,r,o,!0),m.St(h.dm.forward,r,o),h.Ab.al(m,r,o,!0)}if(c==3||p===3)throw h.i.ga("image: transform_in_place_");if(c==2)this.mo==h.ui.Clip?(r!=u&&h.ta.Tu(r,u,o),u=n.ol(),h.Ab.HS(u,n,r,o)):(r!=u&&h.ta.Tu(r,u,o),n.Xc()&&(c=n.Yd(0),m=n.Le(),h.Ab.wX(r,o,m,c),h.Ab.kF(r,o,n,0))),h.Ab.CL(n,r,o,f);else for(c=n.Yd(0),m=n.Le(),n=0;n<o;n++)h.Ab.xX(u[n],m,c,r[n]);for(h.Ab.AL(this.hf,r,o,f),u=0,(p=p==2)?u=a.Bi():isNaN(this.Dm)||(u=this.Dm),p&&this.Sm!=h.ui.Clip||h.Ab.kF(r,o,a.tc(),u),p&&(h.Ab.sG(r,o,a,this.Sm),h.Ab.BL(a,r,o,f)),u=o,n=0;n<o;++n)r[n].isNaN()&&u--;return u},w.prototype.Bh=function(u,o){if(this.hf.isIdentity()||u.B())return u;if(u.K()==33)return this.RI(u);var r=this.hf.ef,n=this.hf.Zf,a=r.Tb(),c=n.Tb();if(a==0&&a==c)return o=r.Sp(),o/=n=n.Sp(),(n=new h.Ed).Jt(o,o),(u=h.ba.ig(u)).Pc(n),u;switch(u.K()){case 1607:case 1736:u=this.OI(u,o);break;case 550:u=this.YV(u,o);break;case 197:u=this.XV(u,o);break;default:throw h.i.ga("")}return u},w.prototype.RI=function(u){var o=u.D(),r=[];return r[0]=o,this.Tt(r,1,r),(u=new h.Ta(u)).Db(r[0]),u},w.prototype.OI=function(u,o){if(u.vm())throw h.i.ga("curves not supported");var r=u.K();if(r==1736)return this.ZV(u,o);if(r==1607)return this.$V(u,o);throw h.i.ga("projectMultiPath")},w.prototype.ZV=function(u,o){var r=this.hf.ef,n=this.hf.Zf,a=r.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64)),f=h.Ea.ig(u);a==3&&(a=(r=(u=r.Li).gk()).Tb(),f=u.bl(f,!0),this.yp(u,h.dm.forward,f),f=u.al(f,!0)),u=null,c==3&&(c=(n=(u=n.Li).gk()).Tb());var m=a==2,b=c==2,S=b?n.tc():n,M=!b&&!this.Wv;c=!1;var T=f;if(m){if((T=h.Ab.NI(T,r,this.mo,o)).B())return T}else{if(f=new h.l,T.yc(f),a=r.Le(),f.G<a.G||f.H>a.H){var k=h.l.construct(f.v-1,a.G,f.C+1,a.H);if((T=h.ti.Pu(T,k,r,NaN,0,o)).B())return T}f.S()>2*a.S()&&(T=h.Ab.Jp(T,-2*a.S(),2*a.S(),r,!0,0,!0,o))}f=this.gH,(a=!isNaN(f))&&(T=h.Zl.local().W(T,f,o)),k=b?n.lk():null;var C=NaN;m&&(C=r.Bi());var N=n.Yr()!=null;if(this.VG)m&&(h.Ab.wr(r,C,T,p),a&&(m=r.jh(),f*=(C=r.tc().jh())/m)),h.Ab.vr(this.hf,T,M,p),a&&(m=r.tc().jh(),f*=(C=n.tc().jh())/m),r=T;else{var F=new h.Ua(T.description);F.xD(T),m&&(h.Ab.wr(r,C,F,p),a&&(m=r.jh(),f*=(C=r.tc().jh())/m)),h.Ab.vr(this.hf,F,M,p),a&&(m=r.tc().rm(),f*=(C=n.tc().rm())/m),M=NaN,b?(k=n.lk(),M=n.Bi()):isNaN(this.Dm)||(M=this.Dm),m=w.vv(r)|w.vv(n),C=10*S.Yd(0),this.Wv&&(m=3,C=0),r=h.Ab.OQ(T,r,F,S,M,o,m,C)}return N&&(r=h.Ab.RD(r,n,o)),b&&(c||(b=S.Le().S(),r.Vg(0,0).S()>=b-S.Yd(0)&&(S=k.getNorthPoleLocation(),b=k.getSouthPoleLocation(),T=k.getNorthPoleGeometry(),k=k.getSouthPoleGeometry(),M=0,T==h.Eg.PE_POLE_POINT&&S!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(M=1),k==h.Eg.PE_POLE_POINT&&b!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(M|=2),M!==0&&(c=!0))),r=h.Ab.Hz(r,n,this.Sm,o),a&&(r=h.Zl.local().W(r,f,o)),h.Ab.Kx(n,r,p)),r.B()||(c&&(r=h.$l.local().W(r,n,!1,o)),u!=null&&(r=u.al(r,!1),this.yp(u,h.dm.reverse,r),r=u.bl(r,!1))),r},w.vv=function(u){if(u.Tb()!=2)return 0;var o=0,r=u.lk();u=r.getNorthPoleLocation();var n=r.getSouthPoleLocation(),a=r.getNorthPoleGeometry();return r=r.getSouthPoleGeometry(),a==h.Eg.PE_POLE_POINT&&u!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o=1),r==h.Eg.PE_POLE_POINT&&n!=h.Eg.PE_POLE_OUTSIDE_BOUNDARY&&(o|=2),o},w.prototype.$V=function(u,o){var r=this.hf.ef,n=this.hf.Zf,a=r.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64)),f=h.Ua.ig(u);a==3&&(a=(r=(u=r.Li).gk()).Tb(),f=u.bl(f,!0),this.yp(u,h.dm.forward,f),f=u.al(f,!0)),u=null,c==3&&(c=(n=(u=n.Li).gk()).Tb());var m=a==2;a=(c=c==2)?n.tc():n;var b=!c&&!this.Wv;if(m){if((f=h.Ab.NI(f,r,this.mo,o)).B())return f}else{var S=new h.l;f.yc(S);var M=r.Le();if((S.G<M.G||S.H>M.H)&&(S=h.l.construct(S.v-1,M.G,S.C+1,M.H),(f=h.ti.Pu(f,S,r,NaN,0,o)).B()))return f}var T=NaN;m&&(T=r.Bi()),S=n.Yr()!=null,M=this.gH;var k=!isNaN(M);if(k&&(f=h.Zl.local().W(f,M,o)),this.VG)m&&h.Ab.wr(r,T,f,p),k&&(m=r.jh(),M*=(T=r.tc().jh())/m),h.Ab.vr(this.hf,f,b,p),k&&(m=r.tc().jh(),M*=(T=n.tc().jh())/m),r=f;else{var C=new h.Ua(f.description);C.xD(f),m&&(h.Ab.wr(r,T,C,p),k&&(m=r.jh(),M*=(T=r.tc().jh())/m)),h.Ab.vr(this.hf,C,b,p),k&&(m=r.tc().jh(),M*=(T=n.tc().jh())/m),b=NaN,c?b=n.Bi():isNaN(this.Dm)||(b=this.Dm),m=w.vv(r)|w.vv(n),T=10*a.Yd(0),this.Wv&&(m=3,T=0),r=h.Ab.PQ(f,r,C,a,b,o,m,T)}return S&&(r=h.Ab.RD(r,n,o)),c&&(r=h.Ab.Hz(r,n,this.Sm,o),k&&(r=h.Zl.local().W(r,M,o)),h.Ab.Kx(n,r,p)),r.B()||u!=null&&(r=u.al(r,!1),this.yp(u,h.dm.reverse,r),r=u.bl(r,!1)),r},w.prototype.XV=function(u,o){var r=(u.da()+u.S())/400;return r!=0?(r=h.Zl.local().W(u,r,o),r=this.OI(r,o),o=u.Ja(),r.dn(o)):(o=new h.Ta(u.Kp()),r=this.RI(o),o=u.Ja(),r.B()?o.Pa():(u.copyTo(o),u=r.D(),o.L(u.x,u.y,u.x,u.y))),o},w.prototype.YV=function(u,o){u=h.ba.ig(u);var r=this.hf.ef,n=this.hf.Zf,a=r.Tb(),c=n.Tb(),p=h.P.Hu(Math.min(u.I(),64));if(a==3){var f=r.Li;a=(r=f.gk()).Tb(),u=f.al(u,!0),this.yp(f,h.dm.forward,u),u=f.bl(u,!0)}if(a==2){if(this.mo==h.ui.Clip?u=h.Xk.local().W(u,r.ol(),r,o):r.Xc()&&(a=new h.l,u.yc(a),r.Le().contains(a)||(this.mo==h.ui.PannableFold&&(u=h.Ab.nj(u,r)),h.Ab.Lt(u,r.Le(),r.Yd(0),!0),u=h.Ab.Gn(u,r,0,!0,0,o))),u.B())return u;h.Ab.wr(r,0,u,p)}else h.Ab.Lt(u,r.Le(),r.Yd(0),!0);return h.Ab.vr(this.hf,u,!1,p),r=0,a=!1,f=null,c==3&&(a=!0,c=(n=(f=n.Li).gk()).Tb()),(c=c==2)?r=n.Bi():isNaN(this.Dm)||(r=this.Dm),c&&this.Sm!=h.ui.Clip||(u=h.Ab.Gn(u,n.tc(),r,!1,0,o)),c&&(u=h.Ab.Hz(u,n,this.Sm,o),h.Ab.Kx(n,u,p),u.B())||a&&(u=f.al(u,!0),this.yp(f,h.dm.reverse,u),u=f.bl(u,!0)),u},w.prototype.yp=function(u,o,r){var n=r.I();if(n!=0){for(var a=r.vb(0),c=h.P.lg(200,0),p=[],f=0;f<n;){var m=Math.min(100,n-f);a.Xw(2*f,2*m,c,2,!0);for(var b=0;b<m;++b)p[b]=h.h.construct(c[2*f],c[2*f+1]);u.St(o,p,m),f+=m}r.Qc(1993)}},w.Py=function(u,o,r){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var n=u.K();return n==197?(n=new h.Ea(u.description)).bd(u,!1):h.ba.zd(n)?(n=new h.Ua(u.description)).oc(u,!0):n=u,(n=h.Ab.nj(n,o)).B()?n:h.Ab.Gn(n,o,0,n!=u,0,r)},w.pj=function(u,o,r,n){if(u==null||o==null||!o.Xc())throw h.i.ga("Invalid Arguement");if(u.B())return u;var a=u.K();if(h.ba.Ic(a)){u=h.Ab.nj(u,o),a=new h.l,u.A(a);for(var c=h.ta.oy(o,a,!1),p=o.ih(),f=Math.floor((a.v-p.v)/p.S())*p.S()+p.v;f<a.C;)f>a.v+c&&f<a.C-c&&(u=h.Ab.nS(u,o,r,f)),f+=p.S()}else{if(a==197)return(a=new h.Ea(u.description)).bd(u,!1),w.pj(a,o,r,n);if(h.ba.zd(a))return(a=new h.Ua(u.description)).oc(u,!0),w.pj(a,o,r,n)}return w.Py(u,o,n)},w}();h.du=A}(q||(q={})),function(h){var A=function(w){function u(o,r,n,a){var c=w.call(this)||this;return o===void 0?c.description=h.ee.og():n===void 0?c.description=o:(c.description=h.ee.og(),c.TB(o,r),c.Sl(n,a)),c}return gt(u,w),u.prototype.K=function(){return 322},u.prototype.Rb=function(){var o=this.sa-this.qa,r=this.oa-this.ma;return Math.sqrt(o*o+r*r)},u.prototype.Di=function(o){var r=this.sa-this.qa,n=this.oa-this.ma;return Math.sqrt(r*r+n*n)<=o},u.prototype.Qn=function(){return!1},u.prototype.jg=function(){var o=new h.h;return o.vc(this.xc(),this.ac()),o},u.XO=function(o,r){return new u(o.x,o.y,r.x,r.y)},u.prototype.dn=function(o){o.Pa(),o.kg(this.description);var r=new h.l;this.A(r),o.Yo(r),r=1;for(var n=this.description.Ba;r<n;r++)for(var a=this.description.qd(r),c=h.ua.Wa(a);r<c;r++){var p=this.Vg(a,0);o.setInterval(a,0,p)}},u.prototype.A=function(o){o.L(this.sa,this.oa,this.qa,this.ma),o.normalize()},u.prototype.Ro=function(o){o.Pa(),o.$b(this.sa,this.oa,this.Pd(0,1,0)),o.$b(this.qa,this.ma,this.Pd(1,1,0))},u.prototype.Pc=function(o){if(o instanceof h.Ed){this.wc();var r=new h.h;r.x=this.sa,r.y=this.oa,o.Gh(r,r),this.sa=r.x,this.oa=r.y,r.x=this.qa,r.y=this.ma,o.Gh(r,r),this.qa=r.x,this.ma=r.y}else this.wc(),(r=new h.Od).x=this.sa,r.y=this.oa,r.z=this.Pd(0,1,0),r=o.gp(r),this.sa=r.x,this.oa=r.y,this.vn(0,1,0,r.z),r.x=this.qa,r.y=this.ma,r.z=this.Pd(1,1,0),r=o.gp(r),this.qa=r.x,this.ma=r.y,this.vn(1,1,0,r.z)},u.prototype.Ja=function(){return new u(this.description)},u.prototype.Sx=function(o,r){return(this.qa-o-(this.sa-o))*(this.ma-r+(this.oa-r))*.5},u.prototype.ux=function(o){return o*this.Rb()},u.prototype.HG=function(o){return o/this.Rb()},u.prototype.xF=function(o){return h.mc.jq(this.sa,this.qa,o)},u.prototype.$Q=function(o){return h.mc.jq(this.oa,this.ma,o)},u.prototype.fl=function(o,r){var n=new h.hg;return this.dh(o,r,n),n.get()},u.prototype.dh=function(o,r,n){if(n==null)throw h.i.O();n.Qr(),(n=n.get()).kg(this.description);var a=new h.h;this.ic(o,a),n.TB(a.x,a.y),this.ic(r,a),n.Sl(a.x,a.y),a=1;for(var c=this.description.Ba;a<c;a++)for(var p=this.description.Fd(a),f=h.ua.Wa(p),m=0;m<f;m++){var b=this.Vc(o,p,m);n.SB(p,m,b),b=this.Vc(r,p,m),n.IB(p,m,b)}},u.prototype.Vc=function(o,r,n){if(r==0)return n==0?this.ic(o).x:this.ic(o).y;switch(h.ua.gz(r)){case 0:return .5>o?this.yv(r,n):this.jv(r,n);case 1:var a=this.yv(r,n);return r=this.jv(r,n),h.mc.jq(a,r,o);case 2:throw h.i.ga("not implemented")}throw h.i.Ra()},u.prototype.fe=function(o,r){var n=this.qa-this.sa,a=this.ma-this.oa,c=n*n+a*a;return c==0?.5:(o=((o.x-this.sa)*n+(o.y-this.oa)*a)/c,r||(0>o?o=0:1<o&&(o=1)),o)},u.prototype.fq=function(o,r,n,a){if(o){if((o=this.ma-this.oa)==0)return r==this.ma?-1:0;if(0>(r=(r-this.oa)/o)||1<r)return 0;n!=null&&(n[0]=this.xF(r))}else{if((o=this.qa-this.sa)==0)return r==this.qa?-1:0;if(0>(r=(r-this.sa)/o)||1<r)return 0;n!=null&&(n[0]=this.$Q(r))}return a!=null&&(a[0]=r),1},u.prototype.Me=function(o,r){var n=this.ma-this.oa;return n==0?o==this.ma?r:NaN:(o=(o-this.oa)/n,r=this.xF(o),o==1&&(r=this.qa),r)},u.prototype.tu=function(o,r,n){return 0<=this.sp(o.x,o.y,r,n)},u.prototype.xi=function(o,r,n){return 0<=this.sp(o,r,n,!0)},u.prototype.ss=function(o,r){return this.tu(o,r,!1)},u.prototype.lI=function(){if(this.ma<this.oa||this.ma==this.oa&&this.qa<this.sa){var o=this.sa;this.sa=this.qa,this.qa=o,o=this.oa,this.oa=this.ma,this.ma=o,o=0;for(var r=this.description.Qq-2;o<r;o++){var n=this.la[o];this.la[o]=this.la[o+r],this.la[o+r]=n}}},u.prototype.wu=function(o,r){(r=h.h.construct(o,r)).sub(this.ac());var n=new h.h;return n.vc(this.xc(),this.ac()),(o=n.yi(r))>(r=8881784197001252e-31*(Math.abs(n.x*r.y)+Math.abs(n.y*r.x)))?-1:o<-r?1:0},u.prototype.sp=function(o,r,n,a){var c=this.sa,p=this.oa,f=o-c,m=r-p;if((f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return a&&f==0?NaN:0;if(f=o-this.qa,m=r-this.ma,(f=Math.sqrt(f*f+m*m))<=Math.max(n,6661338147750939e-31*f))return a&&f==0?NaN:1;if(f=this.qa-this.sa,m=this.ma-this.oa,0<(a=Math.sqrt(f*f+m*m))){var b=1/a,S=o-c,M=r-p,T=S*(f*=b)+M*(m*=b),k=17763568394002505e-31*(Math.abs(S*f)+Math.abs(M*m)),C=f;if(f=-m,m=C,T<-(k=Math.max(n,k))||T>a+k)return NaN;if(Math.abs(S*f+M*m)<=Math.max(n,17763568394002505e-31*(Math.abs(S*f)+Math.abs(M*m)))&&(.5>=(f=h.P.Sk(T*b,0,1))?(m=this.sa+(this.qa-this.sa)*f,a=this.oa+(this.ma-this.oa)*f):(m=this.qa-(this.qa-this.sa)*(1-f),a=this.ma-(this.ma-this.oa)*(1-f)),h.h.Jy(m,a,o,r)<=n)){if(.5>f){if(h.h.Jy(m,a,c,p)<=n)return 0}else if(h.h.Jy(m,a,this.qa,this.ma)<=n)return 1;return f}}return NaN},u.prototype.Nb=function(o){return o!=null&&(o==this||o.constructor===this.constructor&&this.zM(o))},u.prototype.lD=function(o,r,n){var a=n?this.sa:this.qa;n=n?this.oa:this.ma;var c=new h.h;return c.x=o.qa-a,c.y=o.ma-n,!(r.Sh(c)>6661338147750939e-31*r.$C(c))||(c.x=o.sa-a,c.y=o.oa-n,r.Sh(c)<=6661338147750939e-31*r.$C(c))},u.prototype.kD=function(o){var r=new h.h;return r.x=this.qa-this.sa,r.y=this.ma-this.oa,!!this.lD(o,r,!1)&&(r.Uq(),!!this.lD(o,r,!0))},u.HM=function(o,r){var n=o.wu(r.sa,r.oa),a=o.wu(r.qa,r.ma);return!(0>n&&0>a||0<n&&0<a)&&(n=r.wu(o.sa,o.oa),a=r.wu(o.qa,o.ma),!(0>n&&0>a||0<n&&0<a)&&((n=o.Rb())>(a=r.Rb())?o.kD(r):r.kD(o)))},u.FM=function(o,r,n){var a=h.h.construct(NaN,NaN),c=o.qa-o.sa,p=o.ma-o.oa,f=r.qa-r.sa,m=r.ma-r.oa,b=f*p-c*m;if(b==0)return a;var S=8881784197001252e-31*(Math.abs(f*p)+Math.abs(c*m)),M=r.sa-o.sa,T=r.oa-o.oa,k=f*T-M*m,C=k/b,N=Math.abs(b);return C<-(f=(8881784197001252e-31*(Math.abs(f*T)+Math.abs(M*m))*N+S*Math.abs(k))/(b*b)+2220446049250313e-31*Math.abs(C))||C>1+f||(f=(m=c*T-M*p)/b)<-(c=(8881784197001252e-31*(Math.abs(c*T)+Math.abs(M*p))*N+S*Math.abs(m))/(b*b)+2220446049250313e-31*Math.abs(f))||f>1+c||(C=h.P.Sk(C,0,1),c=h.P.Sk(f,0,1),p=o.ic(C),b=r.ic(c),(S=new h.h).vc(p,b),S.length()>n&&(S.add(p,b),S.scale(.5),C=o.fe(S,!1),c=r.fe(S,!1),o=o.ic(C),r=r.ic(c),o.sub(r),o.length()>n)||a.na(C,c)),a},u.IM=function(o,r,n,a){var c=0;if((o.sa==r.sa&&o.oa==r.oa||o.sa==r.qa&&o.oa==r.ma)&&(c++,!a))return 1;if(o.qa==r.sa&&o.ma==r.oa||o.qa==r.qa&&o.ma==r.ma){if(++c==2)return 2;if(!a)return 1}return r.xi(o.sa,o.oa,n)||r.xi(o.qa,o.ma,n)||o.xi(r.sa,r.oa,n)||o.xi(r.qa,r.ma,n)?1:a&&c!=0||u.HM(o,r)==0?0:1},u.Yx=function(o,r,n,a,c,p){var f=0,m=o.sp(r.sa,r.oa,p,!1),b=o.sp(r.qa,r.ma,p,!1),S=r.sp(o.sa,o.oa,p,!1),M=r.sp(o.qa,o.ma,p,!1);return isNaN(m)||(a!=null&&(a[f]=m),c!=null&&(c[f]=0),n!=null&&(n[f]=h.h.construct(r.sa,r.oa)),f++),isNaN(b)||(a!=null&&(a[f]=b),c!=null&&(c[f]=1),n!=null&&(n[f]=h.h.construct(r.qa,r.ma)),f++),f==2||isNaN(S)||m==0&&S==0||b==0&&S==1||(a!=null&&(a[f]=0),c!=null&&(c[f]=S),n!=null&&(n[f]=h.h.construct(o.sa,o.oa)),f++),f==2||isNaN(M)||m==1&&M==0||b==1&&M==1||(a!=null&&(a[f]=1),c!=null&&(c[f]=M),n!=null&&(n[f]=h.h.construct(r.qa,r.ma)),f++),0<f?(f==2&&a!=null&&a[0]>a[1]&&(o=a[0],a[0]=a[1],a[1]=o,c!=null&&(a=c[0],c[0]=c[1],c[1]=a),n!=null&&(c=h.h.construct(n[0].x,n[0].y),n[0]=n[1],n[1]=c)),f):(f=u.FM(o,r,p),isNaN(f.x)?0:(n!=null&&(n[0]=o.ic(f.x)),a!=null&&(a[0]=f.x),c!=null&&(c[0]=f.y),1))},u.prototype.ZF=function(){return 0},u.prototype.pp=function(){},u.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.oa.toString()+", "+this.qa.toString()+", "+this.ma.toString()+"]"},u}(h.MC);h.zb=A}(q||(q={})),function(h){var A=function(){function w(){this.Lm=[],this.za=-1}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){if(this.Lm!=null&&this.Lm.length!=0){this.za++;var u=this.Lm[0];return this.Lm=1>=this.Lm.length?[]:this.Lm.slice(1),u}return this.Lm=null},w.prototype.RX=function(u){this.Lm.push(u)},w.prototype.qe=function(){},w}();h.aL=A}(q||(q={})),function(h){var A;(A=h.ML||(h.ML={}))[A.enumFillRuleOddEven=0]="enumFillRuleOddEven",A[A.enumFillRuleWinding=1]="enumFillRuleWinding";var w=function(u){function o(r,n){var a=u.call(this)||this;if(a.yf=!1,a.Gq=null,a.uq=0,a.tq=0,a.Cj=null,a.Og=!1,a.nb=null,a.mb=null,a.Se=null,a.Nj=null,a.Td=null,a.vq=0,a.gb=0,a.zq=0,n===void 0)a.yf=r,a.Og=!1,a.vq=0,a.uq=0,a.tq=0,a.xa=0,a.description=h.ee.og();else{if(n==null)throw h.i.O();a.yf=r,a.Og=!1,a.vq=0,a.uq=0,a.tq=0,a.xa=0,a.description=n}return a.Cj=null,a.gb=0,a}return gt(o,u),o.prototype.vm=function(){return 0<this.vq},o.prototype.Xx=function(){this.wc(),this.Gq==null?this.Gq=new h.Ta(this.description):this.Gq.kg(this.description)},o.prototype.rx=function(r,n){var a=new h.h;a.x=r,a.y=n,this.Nt(a)},o.prototype.Nt=function(r){this.Xx(),this.Gq.Db(r),this.Og=!0},o.prototype.nf=function(r){if(r.B())throw h.i.O();this.Ll(r.description),this.Xx(),r.copyTo(this.Gq),this.Og=!0},o.prototype.Rx=function(){var r=1;this.Og&&(this.Xx(),this.nb==null?(this.nb=h.Zc.Qh(2),this.nb.write(0,0),this.mb=h.Zc.Or(2,0)):(this.nb.resize(this.nb.size+1,0),this.mb.resize(this.mb.size+1,0)),this.yf&&this.mb.write(this.mb.size-2,1),r++);var n=this.xa;this.nb.write(this.nb.size-1,this.xa+r),this.fm(n+r),this.mb.write(this.nb.size-1,0),this.Og&&(this.It(n,this.Gq),this.Og=!1)},o.prototype.Aj=function(r,n){this.Rx(),this.Db(this.xa-1,r,n)},o.prototype.Ei=function(r){this.Rx(),this.Db(this.xa-1,r)},o.prototype.lineTo=function(r){this.Rx(),this.It(this.xa-1,r)},o.prototype.uU=function(r){if(this.wc(),this.yf)throw h.i.Ra();var n=this.ea();if(r>n)throw h.i.Ra();if(this.ec(r)){if(this.mb==null)throw h.i.Ra();var a=this.xa,c=this.Ca(r),p=this.Wc(r);this.fm(this.xa+1),this.rc();for(var f=0,m=this.description.Ba;f<m;f++)if(this.Aa[f]!=null){var b=h.ua.Wa(this.description.Fd(f));this.Aa[f].Nn(b*p,this.Aa[f],b*c,b,!0,1,b*a)}for(;n>r;n--)a=this.nb.read(n),this.nb.write(n,a+1);this.mb.EE(r,1)}},o.prototype.Cp=function(){if(this.vx(),r===void 0){this.Og=!1;var r=this.ea()-1}var n=this.mb.read(r);this.mb.write(r,1|n),this.Se!=null&&(r=this.Wc(r)-1,this.Se.write(r,1),this.Nj.write(r,-1))},o.prototype.ec=function(r){return(1&this.mb.read(r))!=0},o.prototype.On=function(r){if(this.ec(r))return!0;var n=this.Ca(r);return!(n>(r=this.Wc(r)-1))&&(n=this.Oa(n),r=this.Oa(r),n.rb(r))},o.prototype.Av=function(r){return(2&this.mb.read(r))!=0},o.prototype.oc=function(r,n){if(this.Ll(r.description),r.K()!=322)throw h.i.Ra();var a=new h.Ta;(n||this.B())&&(r.Uo(a),this.nf(a)),r.Qo(a),this.lineTo(a)},o.prototype.vp=function(r){var n=this.xa==0;this.rx(r.v,r.G),this.Aj(r.v,r.H),this.Aj(r.C,r.H),this.Aj(r.C,r.G),this.Cp(),this.Og=!1,n&&this.Nf(256,!1)},o.prototype.bd=function(r,n){if(!r.B()){for(var a=this.xa==0,c=new h.Ta(this.description),p=0;4>p;p++)r.If(n?4-p-1:p,c),p==0?this.nf(c):this.lineTo(c);this.Cp(),this.Og=!1,a&&!n&&this.Nf(256,!1)}},o.prototype.add=function(r,n){for(var a=0;a<r.ea();a++)this.addPath(r,a,!n)},o.prototype.addPath=function(r,n,a){this.wf(-1,r,n,a)},o.prototype.$k=function(r,n){this.Cz(r,n)},o.prototype.Fr=function(r,n,a,c,p){if(p||this.ea()!=0||(p=!0),0>n&&(n=r.ea()-1),n>=r.ea()||0>a||0>c||c>r.tv(n))throw h.i.ga("index out of bounds");if(c!=0){var f=r.ec(n)&&a+c==r.tv(n);if(!f||c!=1){if(this.Og=!1,this.Ll(r.description),a=r.Ca(n)+a+1,p&&(c++,a--),f&&c--,f=this.xa,this.fm(this.xa+c),this.rc(),p){if(c==0)return;this.nb.add(this.xa),p=r.mb.read(n),p&=-5,this.yf&&(p|=1),this.mb.write(this.mb.size-1,p),this.mb.add(0)}else this.nb.write(this.mb.size-1,this.xa);p=0;for(var m=this.description.Ba;p<m;p++){var b=this.description.qd(p),S=h.ua.Wa(b),M=r.description.Qf(b);0>M||r.Aa[M]==null?this.Aa[p].Mn(S*f,h.ua.te(b),c*S,S*f):this.Aa[p].Nn(S*f,r.Aa[M],S*a,c*S,!0,S,S*f)}if(this.vm()||r.Av(n))throw h.i.Ra();this.Qc(1993)}}},o.prototype.iJ=function(){for(var r=0,n=this.ea();r<n;r++)this.wW(r)},o.prototype.wW=function(r){if(this.rc(),r>=this.ea())throw h.i.O();var n=this.Ca(r),a=this.Ka(r);r=this.ec(r)?1:0;for(var c=0,p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=h.ua.Wa(this.description.Fd(c));this.Aa[c].pi(f*(n+r),f*(a-r),f)}this.Qc(1993)},o.prototype.ar=function(r){this.rc();var n=this.ea();if(0>r&&(r=n-1),r>=n)throw h.i.O();for(var a=this.Ca(r),c=this.Ka(r),p=0,f=this.description.Ba;p<f;p++)if(this.Aa[p]!=null){var m=h.ua.Wa(this.description.Fd(p));this.Aa[p].Fn(m*a,m*c,m*this.xa)}for(a=r+1;a<=n;a++)p=this.nb.read(a),this.nb.write(a-1,p-c);if(this.mb==null)for(a=r+1;a<=n;a++)r=this.mb.read(a),this.mb.write(a-1,r);this.nb.resize(n),this.mb.resize(n),this.xa-=c,this.Rg-=c,this.Qc(1993)},o.prototype.wf=function(r,n,a,c){if(n==this||a>=n.ea())throw h.i.O();var p=this.ea();if(r>p)throw h.i.O();0>r&&(r=p),0>a&&(a=n.ea()-1),this.Og=!1,this.Ll(n.description),n.rc();var f=n.Ca(a),m=n.Ka(a),b=this.xa,S=n.ec(a)&&!c?1:0;this.fm(this.xa+m),this.rc();for(var M=r<p?this.Ca(r):b,T=0,k=this.description.Ba;T<k;T++){var C=this.description.Fd(T),N=n.description.Qf(C),F=h.ua.Wa(C);0<=N&&n.Aa[N]!=null?(S!=0&&this.Aa[T].Nn(M*F,n.Aa[N],F*f,F,!0,F,F*b),this.Aa[T].Nn((M+S)*F,n.Aa[N],F*(f+S),F*(m-S),c,F,F*(b+S))):this.Aa[T].Mn(M*F,h.ua.te(C),F*m,F*b)}for(this.nb.add(b+m),c=p;c>=r+1;c--)f=this.nb.read(c-1),this.nb.write(c,f+m);for(n.Av(a),this.mb.add(0),c=p-1;c>=r+1;c--)p=this.mb.read(c),p&=-5,this.mb.write(c+1,p);p=n.DR().read(a),p&=-5,this.yf&&(p|=1),this.mb.write(r,p)},o.prototype.Cz=function(r,n){var a=-1,c=this.ea();if(a>c)throw h.i.O();0>a&&(a=c),this.Og=!1;var p=this.xa;this.fm(this.xa+n),this.rc();var f=a<c?this.Ca(a):p;if(r!=null)this.Aa[0].Dz(2*f,r,0,n,!0,2*p);else{var m=h.ua.te(0);this.Aa[0].Mn(2*f,m,2*n,2*p)}r=1;for(var b=this.description.Ba;r<b;r++){m=this.description.qd(r);var S=h.ua.Wa(m);m=h.ua.te(m),this.Aa[r].Mn(f*S,m,S*n,S*p)}for(this.nb.add(this.xa),p=c;p>=a+1;p--)f=this.nb.read(p-1),this.nb.write(p,f+n);for(this.mb.add(0),p=c-1;p>=a+1;p--)n=this.mb.read(p),n&=-5,this.mb.write(p+1,n);this.yf&&this.mb.write(a,1)},o.prototype.kG=function(r,n,a){var c=-1;if(0>r&&(r=this.ea()),r>this.ea()||c>this.Ka(r)||a>n.length)throw h.i.ga("index out of bounds");if(a!=0){r==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>c&&(c=this.Ka(r)),this.rc();var p=this.xa;this.fm(this.xa+a),this.rc();for(var f=0,m=this.description.Ba;f<m;f++){var b=this.description.Fd(f),S=h.ua.Wa(b);this.Aa[f].Wt(S*(this.Ca(r)+c+a),(p-this.Ca(r)-c)*S,this.Aa[f],S*(this.Ca(r)+c),!0,S),f==0?this.Aa[f].pC(S*(this.Ca(r)+c),a,n,0,!0):this.Aa[f].Yj(h.ua.te(b),(this.Ca(r)+c)*S,a*S)}for(this.vm()&&(this.Se.Wt(this.Ca(r)+c+a,p-this.Ca(r)-c,this.Se,this.Ca(r)+c,!0,1),this.Nj.Wt(this.Ca(r)+c+a,p-this.Ca(r)-c,this.Nj,this.Ca(r)+c,!0,1),this.Se.Yj(1,this.Ca(r)+c,a),this.Nj.Yj(-1,this.Ca(r)+c,a)),r+=1,n=this.ea();r<=n;r++)this.nb.write(r,this.nb.read(r)+a)}},o.prototype.xf=function(r,n,a){var c=this.ea();if(0>r&&(r=this.ea()),r>=c||n>this.Ka(r))throw h.i.ga("index out of bounds");r==this.ea()&&(this.nb.add(this.xa),this.yf?this.mb.add(1):this.mb.add(0)),0>n&&(n=this.Ka(r));var p=this.xa;this.fm(this.xa+1),this.rc();var f=this.Ca(r);this.Aa[0].xj(2*(f+n),a,2*p),a=1;for(var m=this.description.Ba;a<m;a++){var b=this.description.Fd(a),S=h.ua.Wa(b);this.Aa[a].Mn(S*(f+n),h.ua.te(b),S,S*p)}for(r+=1;r<=c;r++)this.nb.write(r,this.nb.read(r)+1)},o.prototype.xB=function(r,n){var a=this.ea();if(0>r&&(r=a-1),r>=a||n>=this.Ka(r))throw h.i.ga("index out of bounds");this.rc();var c=this.Ca(r);0>n&&(n=this.Ka(r)-1),n=c+n,c=0;for(var p=this.description.Ba;c<p;c++)if(this.Aa[c]!=null){var f=h.ua.Wa(this.description.Fd(c));this.Aa[c].Fn(f*n,f,f*this.xa)}for(;a>=r+1;a--)n=this.nb.read(a),this.nb.write(a,n-1);this.xa--,this.Rg--,this.Qc(1993)},o.prototype.oE=function(r,n,a,c){if(r=this.Ca(r)+n,(a=this.Ca(a)+c)<r||0>r||a>this.I()-1)throw h.i.O();n=0,(c=this.Ha()).Wb(r);do{for(;c.Ia()&&(r=c.ia(),c.xb()!=a);)n+=r=r.Rb();if(c.xb()==a)break}while(c.ab());return n},o.prototype.$N=function(r,n,a){if(n=this.Ca(r)+n,a=this.Ca(r)+a,0>n||a>this.I()-1)throw h.i.O();var c=this.Ha();if(n>a){if(!this.ec(r))throw h.i.O("cannot iterate across an open path");c.DB()}var p=r=0;c.Wb(n);do p+=r,r=c.ia().Rb();while(c.xb()!=a);return p},o.prototype.mg=function(){return h.si.im(this,null)},o.prototype.DS=function(r,n,a){for(var c=r;c<a-1;c++)if(this.ec(c))throw h.i.O("cannot interpolate across closed paths");if((c=this.description.Ba)!=1){var p=this.oE(r,n,a,void 0);if(p!=0)for(var f=1;f<c;f++){var m=this.description.qd(f);if(h.ua.gz(m)!=2)for(var b=h.ua.Wa(m),S=0;S<b;S++)this.FS(m,r,n,a,p,S)}}},o.prototype.CS=function(r,n,a){var c=this.description.Ba;if(c!=1){var p=this.$N(r,n,a);if(p!=0)for(var f=1;f<c;f++){var m=this.description.qd(f);if(h.ua.gz(m)!=2)for(var b=h.ua.Wa(m),S=0;S<b;S++)this.ES(m,r,n,a,p,S)}}},o.prototype.FS=function(r,n,a,c,p,f){var m=this.Ha(),b=this.Ca(n)+a;c=this.Ca(c)+void 0,n=this.Vc(r,b,f),a=this.Vc(r,c,f);var S=n,M=0;m.Wb(b);do if(m.Ia()){if(m.ia(),m.xb()==c)break;this.setAttribute(r,m.xb(),f,S),m.ni();do{if(b=m.ia(),m.jk()==c)return;M+=b=b.Rb(),S=h.mc.jq(n,a,M/p),m.Pn()||this.setAttribute(r,m.jk(),f,S)}while(m.Ia())}while(m.ab())},o.prototype.ES=function(r,n,a,c,p,f){var m=this.Ha(),b=this.Ca(n)+a;if((n=this.Ca(n)+c)!=b){c=this.Vc(r,b,f),a=this.Vc(r,n,f);var S=0;m.Wb(b),m.DB(),b=c;do{var M=m.ia();this.setAttribute(r,m.xb(),f,b),S+=b=M.Rb(),b=h.mc.jq(c,a,S/p)}while(m.jk()!=n)}},o.prototype.Pa=function(){this.vq=0,this.Og=!1,this.Td=this.Se=this.Nj=this.mb=this.nb=null,this.qD()},o.prototype.Pc=function(r){r instanceof h.Ed?this.SD(r,-1):this.qN(r)},o.prototype.SD=function(r,n){if(!this.B()&&!r.isIdentity()){this.rc();var a=this.Aa[0],c=new h.h,p=new h.h;if(0>n){var f=this.vm(),m=0;n=this.xa}else f=this.Av(n),m=this.Ca(n),n=this.Wc(n);for(;m<n;m++){if(c.x=a.read(2*m),c.y=a.read(2*m+1),f){var b=this.Nj.read(m);if(0<=b)switch(7&this.Se.read(m)){case 2:p.x=this.Td.read(b),p.y=this.Td.read(b+1),r.Gh(p,p),this.Td.write(b,p.x),this.Td.write(b+1,p.y),p.x=this.Td.read(b+3),p.y=this.Td.read(b+4),r.Gh(p,p),this.Td.write(b+3,p.x),this.Td.write(b+4,p.y);break;case 4:throw h.i.Ra()}}r.Gh(c,c),a.write(2*m,c.x),a.write(2*m+1,c.y)}this.Qc(1993)}},o.prototype.qN=function(r){if(!this.B()){this.se(1),this.rc();for(var n=this.Aa[0],a=this.Aa[1],c=new h.Od,p=new h.Od,f=this.vm(),m=0;m<this.xa;m++){if(c.x=n.read(2*m),c.y=n.read(2*m+1),c.z=a.read(m),f){var b=this.Nj.read(m);if(0<=b)switch(7&this.Se.read(m)){case 2:p.x=this.Td.read(b),p.y=this.Td.read(b+1),p.z=this.Td.read(b+2),p=r.gp(p),this.Td.write(b,p.x),this.Td.write(b+1,p.y),this.Td.write(b+1,p.z),p.x=this.Td.read(b+3),p.y=this.Td.read(b+4),p.z=this.Td.read(b+5),p=r.gp(p),this.Td.write(b+3,p.x),this.Td.write(b+4,p.y),this.Td.write(b+5,p.z);break;case 4:throw h.i.Ra()}}c=r.gp(c),n.write(2*m,c.x),n.write(2*m+1,c.y),a.write(m,c.z)}this.Qc(1993)}},o.prototype.ey=function(){this.nb==null&&(this.nb=h.Zc.Qh(1,0),this.mb=h.Zc.Or(1,0)),this.Se!=null&&(this.Se.resize(this.Rg,1),this.Nj.resize(this.Rg,-1))},o.prototype.pp=function(r){r.Og=!1,r.vq=this.vq,r.zq=this.zq,r.nb=this.nb!=null?h.ja.Cn(this.nb):null,r.mb=this.mb!=null?h.rn.Cn(this.mb):null,r.Nj=this.Nj!=null?h.ja.Cn(this.Nj):null,r.Se=this.Se!=null?h.rn.Cn(this.Se):null,r.Td=this.Td!=null?h.ce.Cn(this.Td):null,r.uq=this.uq,r.tq=this.tq,r.Cj=this.bk(1024)?null:this.Cj},o.prototype.Rb=function(){if(!this.bk(512))return this.uq;for(var r=this.Ha(),n=new h.Ex(0);r.ab();)for(;r.Ia();)n.add(r.ia().Rb());return this.uq=n.tm(),this.Nf(512,!1),n.tm()},o.prototype.Nb=function(r){if(r==this)return!0;if(!(r instanceof o&&u.prototype.Nb.call(this,r)))return!1;var n=this.ea();return!(n!=r.ea()||this.nb!=null&&!this.nb.Nb(r.nb,0,n+1)||this.zq!=r.zq||this.mb!=null&&!this.mb.Nb(r.mb,0,n))&&u.prototype.Nb.call(this,r)},o.prototype.Ha=function(){return new h.SL(this)},o.prototype.dy=function(r){if(u.prototype.dy.call(this,r),this.vm())for(r=this.Ha();r.ab();)r.Ia()},o.prototype.Ap=function(r,n){if(u.prototype.Ap.call(this,r,n),this.vm())for(r=this.Ha();r.ab();)r.Ia()},o.prototype.Zx=function(){this.xa=this.nb==null||this.nb.size==0?0:this.nb.read(this.nb.size-1)},o.prototype.He=function(){return this.yf?(this.zu(),this.tq):0},o.prototype.Gv=function(r){return!!this.yf&&(this.bk(8)?(this.zu(),0<this.Cj.read(r)):(4&this.mb.read(r))!=0)},o.prototype.Kr=function(r){return this.yf?(this.zu(),this.Cj.read(r)):0},o.prototype.zu=function(){if(this.bk(1024)){var r=this.ea();this.Cj==null?this.Cj=new h.ce(r):this.Cj.size!=r&&this.Cj.resize(r),r=new h.Ex(0);for(var n=new h.Ex(0),a=new h.h,c=0,p=this.Ha();p.ab();){for(n.reset(),this.D(this.Ca(p.gb),a);p.Ia();)n.add(p.ia().Sx(a.x,a.y));r.add(n.tm());var f=c++;this.Cj.write(f,n.tm())}this.tq=r.tm(),this.Nf(1024,!1)}},o.prototype.zR=function(){if(this.yf){this.hm();for(var r=this.ea(),n=0;n<r;n++)4&this.mb.read(n)}},o.prototype.hm=function(){if(this.bk(8)){this.zu();var r=this.ea();(this.mb==null||this.mb.size<r)&&(this.mb=h.Zc.Or(r+1));for(var n=1,a=0;a<r;a++){var c=this.Cj.read(a);a==0&&(n=0<c?1:-1),0<c*n?this.mb.tJ(a,4):this.mb.EE(a,4)}this.Nf(8,!1)}},o.prototype.nz=function(r){var n=this.gb,a=this.ea();if(0<=n&&n<a){if(r<this.Wc(n)){if(r>=this.Ca(n))return n;n--}else n++;if(0<=n&&n<a&&r>=this.Ca(n)&&r<this.Wc(n))return this.gb=n}if(5>a){for(n=0;n<a;n++)if(r<this.Wc(n))return this.gb=n;throw h.i.ga("corrupted geometry")}for(n=0,--a;a>n;){var c=n+(a-n>>1);if(r<this.Ca(c))a=c-1;else{if(!(r>=(n=this.Wc(c))))return this.gb=c;n=c+1}}return this.gb=n},o.prototype.sz=function(){var r=this.I();if(!this.yf){r-=this.ea();for(var n=0,a=this.ea();n<a;n++)this.ec(n)&&r++}return r},o.prototype.tv=function(r){var n=this.Ka(r);return this.ec(r)||n--,n},o.prototype.Ja=function(){return new o(this.yf,this.description)},o.prototype.Eb=function(){return this.yf?2:1},o.prototype.K=function(){return this.yf?1736:1607},o.prototype.KJ=function(r){this.nb=r,this.Qc(16777215)},o.prototype.OR=function(){return this.vx(),this.Se},o.prototype.DR=function(){return this.vx(),this.mb},o.prototype.JJ=function(r){this.mb=r,this.Qc(16777215)},o.prototype.ea=function(){return this.nb!=null?this.nb.size-1:0},o.prototype.Wc=function(r){return this.nb.read(r+1)},o.prototype.Ka=function(r){return this.nb.read(r+1)-this.nb.read(r)},o.prototype.Ca=function(r){return this.nb.read(r)},o.prototype.nu=function(r,n){this.Cb==null&&(this.Cb=new h.Vk),n=h.Mx.hW(n);var a=this.Cb.Gk;if(a!=null){if(!(a.Jk<r||n>a.KR()))return!0;this.Cb.sD(null)}return a=h.Mx.create(this,r,n),this.Cb.sD(a),!0},o.prototype.dc=function(){var r=u.prototype.dc.call(this);if(!this.Bc()){var n=this.ea();this.nb!=null&&this.nb.Bn(r,0,n+1),this.mb!=null&&this.mb.Bn(r,0,n)}return r},o.prototype.TF=function(r){return this.Se!=null?this.Se.read(r):1},o.prototype.cc=function(r,n,a){var c=this.nz(r);if(r==this.Wc(c)-1&&!this.ec(c))throw h.i.ga("index out of bounds");this.rc();var p=this.Se,f=1;if(p!=null&&(f=7&p.read(r)),f!==1)throw h.i.Ra();if(n.Qr(),n=n.get(),a?n.kg(h.ee.og()):n.kg(this.description),c=r==this.Wc(c)-1&&this.ec(c)?this.Ca(c):r+1,p=new h.h,this.D(r,p),n.Ec(p),this.D(c,p),n.Rc(p),!a)for(a=1,p=this.description.Ba;a<p;a++){f=this.description.Fd(a);for(var m=h.ua.Wa(f),b=0;b<m;b++){var S=this.Vc(f,r,b);n.SB(f,b,S),S=this.Vc(f,c,b),n.IB(f,b,S)}}},o.prototype.Tj=function(r,n){if(r>=this.ea())throw h.i.O();if(this.B())n.Pa();else{if(this.Av(r))throw h.i.ga("not implemented");var a=this.vb(0),c=new h.h,p=new h.l;p.Pa();var f=this.Ca(r);for(r=this.Wc(r);f<r;f++)a.uc(2*f,c),p.$b(c);n.L(p)}},o.prototype.hj=function(r){return this.Cb==null&&(this.Cb=new h.Vk),!(r==0||16>this.I())&&(r=h.ta.hE(this),this.Cb.QM(r),!0)},o.prototype.bM=function(){if(this.Cb==null&&(this.Cb=new h.Vk),this.Cb.Ao==null){this.Cb.rD(null);var r=h.ta.SN(this);this.Cb.rD(r)}},o.prototype.Zo=function(r){this.zq=r},o.prototype.Jn=function(){return this.zq},o.prototype.xD=function(r){if(this==r)throw h.i.ga("MultiPathImpl.add");for(var n=this.ea(),a=0;a<r.ea();a++)this.addPath(r,a,!0),this.uU(n),n++},o.prototype.eO=function(r){var n=this.nz(r),a=this.Ca(n);if(a!=r){if(r>=(n=this.Wc(n))||r<a)throw h.i.ga("change_ring_start_point");for(var c=0,p=this.description.Ba;c<p;c++){var f=this.description.qd(c);f=h.ua.Wa(f),this.Aa[c].rotate(a*f,r*f,n*f)}}},o}(h.Fx);h.Wk=w}(q||(q={})),function(h){var A=function(w){function u(o){var r=w.call(this)||this;if(o!==void 0){if(o==null)throw h.i.O();r.description=o}else r.description=h.ee.og();return r.xa=0,r}return gt(u,w),u.prototype.Ja=function(){return new u(this.description)},u.prototype.add=function(o){this.resize(this.xa+1),this.Fh(this.xa-1,o)},u.prototype.Du=function(o,r){this.resize(this.xa+1);var n=new h.h;n.na(o,r),this.Db(this.xa-1,n)},u.prototype.Gd=function(o,r,n){if(n=0>n?o.I():n,0>r||r>o.I()||n<r)throw h.i.O();if(r!=n){this.Ll(o.description),n-=r;var a=this.xa;this.resize(this.xa+n),this.rc();for(var c=0,p=o.description.Ba;c<p;c++){var f=o.description.Fd(c),m=h.ua.Wa(f),b=this.vb(f);f=o.vb(f),b.Nn(a*m,f,r*m,n*m,!0,1,a*m)}}},u.prototype.BD=function(o,r){var n=o.length;if(r=0>r?n:r,0>n||0>r)throw h.i.O();if(r!=0){n=r-0,r=this.xa,this.resize(this.xa+n);for(var a=0;a<n;a++)this.Db(r+a,o[0+a])}},u.prototype.xB=function(o){if(0>o||o>=this.I())throw h.i.ga("index out of bounds");this.rc();for(var r=0,n=this.description.Ba;r<n;r++)if(this.Aa[r]!=null){var a=h.ua.Wa(this.description.Fd(r));this.Aa[r].Fn(a*o,a,a*this.xa)}this.xa--,this.Rg--,this.Qc(1993)},u.prototype.resize=function(o){this.fm(o)},u.prototype.pp=function(){},u.prototype.Pa=function(){w.prototype.qD.call(this)},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(this.B())return;this.rc();for(var r=this.Aa[0],n=new h.h,a=0;a<this.xa;a++)n.x=r.read(2*a),n.y=r.read(2*a+1),o.Gh(n,n),r.write(2*a,n.x),r.write(2*a+1,n.y)}else{if(this.B())return;this.rc(),this.se(1),this.rc(),r=this.Aa[0],n=this.Aa[1];var c=new h.Od;for(a=0;a<this.xa;a++){c.x=r.read(2*a),c.y=r.read(2*a+1),c.z=n.read(a);var p=o.gp(c);r.write(2*a,p.x),r.write(2*a+1,p.y),n.write(a,p.z)}}this.Qc(1993)},u.prototype.Eb=function(){return 0},u.prototype.K=function(){return 550},u.prototype.He=function(){return 0},u.prototype.Rb=function(){return 0},u.prototype.Nb=function(o){return o==this||o instanceof u&&w.prototype.Nb.call(this,o)},u.prototype.dW=function(o,r){var n=this.xa;if(n=Math.min(n,r+1e3),0>r||r>=this.xa||n<r||o.length!=1e3)throw h.i.O();var a=n-r,c=[];for(this.vb(0).Xw(2*r,2*a,c,0,!0),r=0;r<a;r++)o[r]=h.h.construct(c[2*r],c[2*r+1]);return n},u.prototype.Zx=function(){},u.prototype.ey=function(){},u.prototype.nu=function(){return!1},u.prototype.hj=function(){return!1},u.prototype.mg=function(){return null},u}(h.Fx);h.de=A}(q||(q={})),function(h){var A;(A=h.cL||(h.cL={}))[A.NotDetermined=0]="NotDetermined",A[A.Structure=1]="Structure",A[A.DegenerateSegments=2]="DegenerateSegments",A[A.Clustering=3]="Clustering",A[A.Cracking=4]="Cracking",A[A.CrossOver=5]="CrossOver",A[A.RingOrientation=6]="RingOrientation",A[A.RingOrder=7]="RingOrder",A[A.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency",A[A.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency",A[A.OGCDisconnectedInterior=10]="OGCDisconnectedInterior";var w=function(){function u(o,r,n){o===void 0?(this.Lj=0,this.Lo=this.Ko=-1):(this.Lj=o,this.Ko=r,this.Lo=n)}return u.prototype.Yt=function(o){this.Lj=o.Lj,this.Ko=o.Ko,this.Lo=o.Lo},u}();h.Nd=w}(q||(q={})),function(h){h.P=function(){function A(){}return A.assert=function(w){if(w===!1)throw h.i.AK()},A.WJ=function(w){return isNaN(w)?NaN:w===0?w:0<w?1:-1},A.Hu=function(w){var u;u===void 0&&(u=0);for(var o=[],r=0;r<w;r++)o[r]=A.lg(2,u);return o},A.lg=function(w,u){u===void 0&&(u=0);for(var o=[],r=0;r<w;r++)o[r]=u;return o},A.bv=function(w,u){var o,r;for(o===void 0&&(o=0),r===void 0&&(r=w.length-1);o<=r;o++)w[o]=u},A.Sk=function(w,u,o){return w<u?u:w>o?o:w},A.Vh=function(w,u){var o=5381;return((o=((o=((o=u!==void 0?(u<<5)+u+(255&w):(o<<5)+o+(255&w))<<5)+o+(w>>8&255))<<5)+o+(w>>16&255))<<5)+o+(w>>24&255)&2147483647},A.wj=function(){throw Error("Not Implemented")},A.WA=function(w){return A.TT(w)+12345&2147483647},A.QG=function(w){var u=32,o=w%A.Px|0,r=w/A.Px|0;return(u&=63)==0?w:(32>u?(w=o>>>u|r<<32-u,u=r>>u):(w=r>>u-32,u=0<=r?0:-1),u*A.Px+(w>>>0))},A.TT=function(w){var u=1103515245,o=65535&u;return((u-o)*(w|=0)|0)+(o*w|0)|0},A.truncate=function(w){return 0>w?-1*Math.floor(Math.abs(w)):Math.floor(w)},A.MAX_SAFE_INTEGER=Math.pow(2,53)-1,A.MIN_SAFE_INTEGER=-A.MAX_SAFE_INTEGER,A.PC=65536,A.Px=A.PC*A.PC,A}()}(q||(q={})),function(h){var A;(A=h.wL||(h.wL={}))[A.Project=0]="Project",A[A.Union=1]="Union",A[A.Difference=2]="Difference",A[A.Proximity2D=3]="Proximity2D",A[A.Relate=4]="Relate",A[A.Equals=5]="Equals",A[A.Disjoint=6]="Disjoint",A[A.Intersects=7]="Intersects",A[A.Within=8]="Within",A[A.Contains=9]="Contains",A[A.Crosses=10]="Crosses",A[A.Touches=11]="Touches",A[A.Overlaps=12]="Overlaps",A[A.Buffer=13]="Buffer",A[A.Distance=14]="Distance",A[A.Intersection=15]="Intersection",A[A.Clip=16]="Clip",A[A.Cut=17]="Cut",A[A.DensifyByLength=18]="DensifyByLength",A[A.DensifyByAngle=19]="DensifyByAngle",A[A.LabelPoint=20]="LabelPoint",A[A.GeodesicBuffer=21]="GeodesicBuffer",A[A.GeodeticDensifyByLength=22]="GeodeticDensifyByLength",A[A.ShapePreservingDensify=23]="ShapePreservingDensify",A[A.GeodeticLength=24]="GeodeticLength",A[A.GeodeticArea=25]="GeodeticArea",A[A.Simplify=26]="Simplify",A[A.SimplifyOGC=27]="SimplifyOGC",A[A.Offset=28]="Offset",A[A.Generalize=29]="Generalize",A[A.SymmetricDifference=30]="SymmetricDifference",A[A.ConvexHull=31]="ConvexHull",A[A.Boundary=32]="Boundary",A[A.SimpleRelation=33]="SimpleRelation";var w=function(){function u(){}return u.prototype.K=function(){return null},u.prototype.xn=function(){},u.prototype.Ku=function(){return!1},u}();h.Ge=w}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 13},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c){return o instanceof h.ba?(c=new h.$c(o),this.W(c,r,[n],!1,a).next()):a===!0?(n=new h.vC(o,r,n,!1,c),h.Ih.local().W(n,r,c)):new h.vC(o,r,n,!1,c)},u.instance=null,u}(h.Ge);h.uC=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n,a){this.za=-1,this.Sd=u,this.Vz=o,this.Es=r,this.kT=new h.l,this.kT.Pa(),this.fo=-1,this.Vb=a}return w.prototype.next=function(){for(var u;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.fo+1<this.Es.length&&this.fo++,this.buffer(u,this.Es[this.fo]);return null},w.prototype.Ma=function(){return this.za},w.prototype.buffer=function(u,o){return h.BK.buffer(u,o,this.Vz,NaN,96,this.Vb)},w.prototype.qe=function(){},w}();h.vC=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 16},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a).next()):new h.fL(o,r,n,a)},u.instance=null,u}(h.Ge);h.eL=A}(q||(q={})),function(h){var A=function(){function w(u,o,r){if(this.za=-1,u==null)throw h.i.O();this.aa=o,this.zk=u,this.ra=h.ta.Xd(r,o,!1)}return w.prototype.next=function(){var u;return(u=this.zk.next())!=null?(this.za=this.zk.Ma(),h.Vd.clip(u,this.aa,this.ra,0)):null},w.prototype.Ma=function(){return this.za},w.prototype.qe=function(){},w}();h.fL=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 31},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){return o instanceof h.ba?h.xC.lE(o):new h.xC(r,o,n)},u.instance=null,u}(h.Ge);h.wC=A}(q||(q={})),function(h){var A=function(){function w(u,o,r){if(this.oA=new h.au,this.za=-1,o==null)throw h.i.O();this.XG=u,this.Jc=!1,this.zk=o,this.Vb=r}return w.prototype.next=function(){if(this.XG){if(!this.Jc){var u=this.YN(this.zk);return this.Jc=!0,u}return null}if(!this.Jc){if((u=this.zk.next())!=null)return this.za=this.zk.Ma(),w.lE(u);this.Jc=!0}return null},w.prototype.Ma=function(){return this.za},w.prototype.YN=function(u){for(var o;(o=u.next())!=null;)this.oA.Ib(o);return this.oA.XQ()},w.prototype.qe=function(){if(!this.Jc){if(!this.XG)throw h.i.ga("Invalid call for non merging convex hull.");var u=this.zk.next();if(u==null)throw h.i.ga("Expects a non-null geometry.");this.oA.Ib(u)}},w.lE=function(u){if(w.NS(u))return u;var o=u.K();if(h.Wk.zd(o))return(o=new h.Ua(u.description)).oc(u,!0),o;if(o==550&&u.I()==2){var r=new h.Ta;return o=new h.Ua(u.description),u.we(0,r),o.nf(r),u.we(1,r),o.lineTo(r),o}return h.au.LO(u)},w.NS=function(u){if(u.B())return!0;var o=u.K();return o==33||o==197||!h.Wk.zd(o)&&(o==550?u.I()==1:o==1607?u.ea()==1&&2>=u.I():u.ea()==1&&(2>=u.I()||h.au.DG(u,0)))},w}();h.xC=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 17},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c){return new h.hL(o,r,n,a,c)},u.instance=null,u}(h.Ge);h.gL=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n,a){if(this.Uf=null,o==null||r==null)throw h.i.ga("invalid argument");this.hT=u,this.hA=o,this.fH=r,u=h.ta.ov(o,r),this.ra=h.ta.Xd(n,u,!0),this.eH=-1,this.nd=a}return w.prototype.Ma=function(){return 0},w.prototype.next=function(){return this.LQ(),++this.eH<this.Uf.length?this.Uf[this.eH]:null},w.prototype.LQ=function(){if(this.Uf==null)switch(this.Uf=[],this.hA.K()){case 1607:this.NQ();break;case 1736:this.MQ()}},w.prototype.NQ=function(){var u=new h.Ua,o=new h.Ua,r=new h.Ua;this.Uf.push(u),this.Uf.push(o);var n=[];h.FK.DK(this.hT,this.hA,this.fH,this.ra,n,this.nd);for(var a=0;a<n.length;a++){var c=n[a];if(c.ct==0)u.add(c.Y,!1);else if(c.ct==1||c.ct==2)o.add(c.Y,!1);else if(c.ct==3)this.Uf.push(c.Y);else{if(c.ct!=4)throw h.i.ga("internal");r.add(c.Y,!1)}}r.B()||u.B()&&o.B()&&!(3<=this.Uf.length)||this.Uf.push(r),u.B()&&o.B()&&3>this.Uf.length&&(this.Uf.length=0)},w.prototype.MQ=function(){var u=new h.ja(0),o=new h.hd,r=o.VE(),n=o.Ib(this.hA),a=o.Ib(this.fH),c=new h.Hg;try{c.Gt(o,this.ra,this.nd),c.fl(r,n,a,u);var p=o.Ke(n),f=new h.Ea,m=new h.Ea;for(this.Uf.length=0,this.Uf.push(f),this.Uf.push(m),n=0;n<u.size;n++){var b=new h.hd,S=b.Ib(p),M=b.Ib(o.Ke(u.get(n)));c.fr(b,this.nd);var T=c.Cv(S,M),k=b.Ke(T);if(!k.B()){var C=o.EF(u.get(n),r);C==2?f.add(k,!1):C==1?m.add(k,!1):this.Uf.push(k);var N=new h.hd;S=N.Ib(p),M=N.Ib(o.Ke(u.get(n))),c.fr(N,this.nd),p=N.Ke(c.km(S,M))}}!p.B()&&0<u.size&&this.Uf.push(p),f.B()&&m.B()&&(this.Uf.length=0)}finally{c.Wg()}},w.prototype.qe=function(){},w}();h.hL=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){if(o instanceof h.ba)return o=new h.$c(o),this.W(o,r,n).next();if(0>=r)throw h.i.O();return new h.iL(o,r,n)},u.instance=null,u}(h.Ge);h.Zl=A}(q||(q={})),function(h){var A=function(){function w(u,o){this.za=-1,this.Sd=u,this.Rs=o}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){var u;return(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),this.HP(u)):null},w.prototype.HP=function(u){if(u.B()||1>u.Eb())return u;var o=u.K();if(o==1736||o==1607)return this.Iy(u);if(h.ba.zd(o))return this.JP(u);if(o==197)return this.IP(u);throw h.i.Ra()},w.prototype.JP=function(u){if(u.Rb()<=this.Rs)return u;var o=new h.Ua(u.description);return o.oc(u,!0),this.Iy(o)},w.prototype.IP=function(u){var o=new h.Ea(u.description);o.bd(u,!1);var r=new h.l;return u.A(r),u=r.da(),r.S()<=this.Rs&&u<=this.Rs?o:this.Iy(o)},w.prototype.Iy=function(u){for(var o=u.Ja(),r=u.Ha();r.ab();)for(var n=!0;r.Ia();){var a=r.ia();if(a.K()!=322)throw h.i.ga("not implemented");var c=r.Pn(),p=a.Rb();if(p>this.Rs){var f=Math.ceil(p/this.Rs);p=new h.Ta(u.description),n&&(a.Uo(p),o.nf(p));var m=n=1/f,b=0;for(--f;b<f;b++)a.Vw(m,p),o.lineTo(p),m+=n;c?o.Cp():(a.Qo(p),o.lineTo(p))}else c?o.Cp():o.oc(a,n);n=!1}return o},w.prototype.qe=function(){},w}();h.iL=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 2},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,a).next()):new h.jL(o,r,n,a)},u.km=function(o,r,n,a){if(o.B()||r.B())return o;var c=o.Eb(),p=r.Eb();if(c>p)return o;var f=o.K(),m=r.K(),b=new h.l,S=new h.l,M=new h.l;o.A(b),r.A(S),M.L(b),M.$b(S);var T=(M=h.ta.Xd(n,M,!0))*Math.sqrt(2)*1.00001,k=new h.l;if(k.L(b),k.X(T,T),!k.isIntersecting(S))return o;if(c==1&&p==2)return u.CV(o,r,m,n,a);if(f==33)switch(h.Wk.zd(m)?(n=new h.Ua(r.description),n.oc(r,!0)):n=r,m){case 1736:return u.PU(o,n,M);case 1607:return u.QU(o,n,M);case 550:return u.NU(o,n,M);case 197:return u.MU(o,n,M);case 33:return u.OU(o,n,M);default:throw h.i.O()}else if(f==550)switch(m){case 1736:return u.fU(o,r,M);case 197:return u.dU(o,r,M);case 33:return u.eU(o,r,M)}return h.Hg.km(o,r,n,a)},u.PU=function(o,r,n){return h.jd.EG(r,o,n)==0?o:o.Ja()},u.QU=function(o,r,n){var a=o.D();r=r.Ha();for(var c=n*Math.sqrt(2)*1.00001,p=c*c,f=new h.l;r.ab();)for(;r.Ia();){var m=r.ia();if(m.A(f),f.X(c,c),f.contains(a)){if(m.ss(a,n))return o.Ja();var b=m.ac();if(h.h.zc(a,b)<=p||(b=m.xc(),h.h.zc(a,b)<=p))return o.Ja()}}return o},u.NU=function(o,r,n){var a=r.vb(0);r=r.I();var c=o.D(),p=new h.h;n=n*Math.sqrt(2)*1.00001,n*=n;for(var f=0;f<r;f++)if(a.uc(2*f,p),h.h.zc(p,c)<=n)return o.Ja();return o},u.MU=function(o,r,n){var a=new h.l;return r.A(a),a.X(n,n),r=o.D(),a.contains(r)?o.Ja():o},u.OU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var a=o.D();return r=r.D(),h.h.zc(a,r)<=n?o.Ja():o},u.fU=function(o,r,n){var a=new h.l;r.A(a),a.X(n,n);for(var c=o.I(),p=!1,f=[],m=0;m<c;m++)f[m]=!1;var b=new h.h;for(m=0;m<c;m++)o.D(m,b),a.contains(b)&&h.jd.Zd(r,b,n)!=0&&(p=!0,f[m]=!0);if(!p)return o;for(r=o.Ja(),m=0;m<c;m++)f[m]||r.Gd(o,m,m+1);return r},u.dU=function(o,r,n){var a=new h.l;r.A(a),a.X(n,n),r=o.I();var c=!1;n=[];for(var p=0;p<r;p++)n[p]=!1;var f=new h.h;for(p=0;p<r;p++)o.D(p,f),a.contains(f)&&(c=!0,n[p]=!0);if(!c)return o;for(a=o.Ja(),p=0;p<r;p++)n[p]||a.Gd(o,p,p+1);return a},u.eU=function(o,r,n){var a=o.vb(0),c=o.I(),p=r.D(),f=new h.h,m=!1;r=[];for(var b=0;b<c;b++)r[b]=!1;for(n=(b=n*Math.sqrt(2)*1.00001)*b,b=0;b<c;b++)a.uc(2*b,f),h.h.zc(f,p)<=n&&(m=!0,r[b]=!0);if(!m)return o;for(a=o.Ja(),b=0;b<c;b++)r[b]||a.Gd(o,b,b+1);return a},u.CV=function(o,r,n,a,c){var p=new h.Hh;o.dn(p);var f=new h.l;return r.A(f),p.$b(f),p.X(.1*p.S(),.1*p.da()),(f=new h.Ea).bd(p,!1),n==1736?f.add(r,!0):f.bd(r,!0),h.Xk.local().W(o,f,a,c)},u.instance=null,u}(h.Ge);h.lp=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n){this.vs=o==null,this.za=-1,this.Sd=u,this.Vz=r,this.nT=o.next(),this.Vb=n}return w.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.lp.km(u,this.nT,this.Vz,this.Vb)):null;var u},w.prototype.Ma=function(){return this.za},w.prototype.qe=function(){},w}();h.jL=A}(q||(q={})),function(h){var A=function(){function u(o){this.nd=o,this.Dj=new h.l,this.Dj.Pa(),this.qh=new h.l,this.qh.Pa()}return u.prototype.Pt=function(){var o=this.Dj.v;this.Dj.v=this.qh.v,this.qh.v=o,o=this.Dj.C,this.Dj.C=this.qh.C,this.qh.C=o,o=this.Dj.G,this.Dj.G=this.qh.G,this.qh.G=o,o=this.Dj.H,this.Dj.H=this.qh.H,this.qh.H=o},u.prototype.ZP=function(o,r){if(this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.hu("user_canceled");var n=!this.Dj.isIntersecting(this.qh);return h.ba.Ic(o.K())&&h.ba.Ic(r.K())?o.I()>r.I()?this.aE(o,r,n):(this.Pt(),o=this.aE(r,o,n),this.Pt(),o):o.K()==550&&h.ba.Ic(r.K())?(o=this.bE(r,o,n),this.Pt(),o):r.K()==550&&h.ba.Ic(o.K())?this.bE(o,r,n):o.K()==550&&r.K()==550?o.I()>r.I()?this.cE(o,r):(this.Pt(),o=this.cE(r,o),this.Pt(),o):0},u.prototype.aE=function(o,r,n){var a=o.Ha(),c=r.Ha(),p=new h.l,f=new h.l,m=17976931348623157e292;if(!n&&this.hY(o,r,a,c))return 0;for(;a.ab();)for(;a.Ia();)if((o=a.ia()).A(p),!(p.px(this.qh)>m)){for(;c.ab();)for(;c.Ia();)if((r=c.ia()).A(f),p.px(f)<m&&(r=o.ub(r,n),(r*=r)<m)){if(r==0)return 0;m=r}c.aj()}return Math.sqrt(m)},u.prototype.bE=function(o,r,n){var a=o.Ha(),c=new h.l,p=17976931348623157e292,f=new h.h,m=r.I();for(n=!n&&o.K()==1736;a.ab();)for(;a.Ia();){var b=a.ia();if(b.A(c),!(1<m&&c.px(this.qh)>p)){for(var S=0;S<m;S++){if(r.D(S,f),n&&h.jd.Zd(o,f,0)!=0)return 0;var M=b.fe(f,!1);if(f.sub(b.ic(M)),(M=f.Tk())<p){if(M==0)return 0;p=M}}n=!1}}return Math.sqrt(p)},u.prototype.cE=function(o,r){for(var n,a=17976931348623157e292,c=new h.h,p=new h.h,f=o.I(),m=r.I(),b=0;b<f;b++)if(o.D(b,c),!(1<m&&this.qh.cK(c)>a)){for(var S=0;S<m;S++)if(r.D(S,p),(n=h.h.zc(c,p))<a){if(n==0)return 0;a=n}}return Math.sqrt(a)},u.prototype.hY=function(o,r,n,a){if(o.K()==1736){for(;a.ab();)if(a.Ia()){var c=a.ia();if(h.jd.Zd(o,c.xc(),0)!=0)return!0}a.aj()}if(r.K()==1736){for(;n.ab();)if(n.Ia()&&(o=n.ia(),h.jd.Zd(r,o.xc(),0)!=0))return!0;n.aj()}return!1},u.prototype.im=function(o,r){return o.B()||r.B()?NaN:(o.A(this.Dj),r.A(this.qh),this.ZP(o,r))},u}(),w=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return gt(o,u),o.prototype.W=function(r,n,a){if(r==null||n==null)throw h.i.O();if(r.B()||n.B())return NaN;var c=r.K(),p=n.K();if(c==33){if(p==33)return h.h.ub(r.D(),n.D());if(p==197)return a=new h.l,n.A(a),a.ub(r.D());(c=new h.de).add(r),r=c}else if(c==197){if(p==197)return p=new h.l,r.A(p),a=new h.l,n.A(a),a.ub(p);(c=new h.Ea).bd(r,!1),r=c}return p==33?((p=new h.de).add(n),n=p):p==197&&((p=new h.Ea).bd(n,!1),n=p),new A(a).im(r,n)},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 14},o.instance=null,o}(h.Ge);h.kL=w}(q||(q={})),function(h){var A=function(){function w(u,o,r,n){this.tH=u,this.xH=o,this.nd=n,this.UG=r}return w.prototype.next=function(){var u=this.tH.next();return u==null?null:this.tC(u)},w.prototype.Ma=function(){return this.tH.Ma()},w.prototype.tC=function(u){var o=u.K();if(h.ba.Sn(o))return u;if(o==197)return(o=new h.Ea(u.description)).bd(u,!1),this.tC(o);if(u.B())return u;if(u==null)throw h.i.Ra();o=u.Ja();for(var r=new h.zb,n=0,a=u.ea();n<a;n++)this.NK(u,n,o,r);return o},w.prototype.NK=function(u,o,r,n){if(!(2>u.Ka(o))){var a=u.Ca(o),c=u.Wc(o)-1,p=u.vb(0),f=u.ec(o),m=new h.ja(0);m.Jb(u.Ka(o)+1);var b=new h.ja(0);for(b.Jb(u.Ka(o)+1),m.add(f?a:c),m.add(a),a=new h.h;1<m.size;){var S=m.Gc();m.Jf();var M=m.Gc();u.D(S,a),n.Ec(a),u.D(M,a),n.Rc(a),0<=(M=this.MK(n,a,p,S,M,c))?(m.add(M),m.add(S)):b.add(S)}if(f||b.add(m.get(0)),b.size==m.size)r.addPath(u,o,!0);else if(2<=b.size&&(!this.UG||b.size!=2||!(f||h.h.ub(u.Oa(b.get(0)),u.Oa(b.get(1)))<=this.xH))){for(o=new h.Ta,n=0,c=b.size;n<c;n++)u.we(b.get(n),o),n==0?r.nf(o):r.lineTo(o);f&&(this.UG||b.size!=2||r.lineTo(o),r.Cp())}}},w.prototype.MK=function(u,o,r,n,a,c){var p=a-1;for(a<=n&&(p=c),c=a=-1,n+=1;n<=p;n++){r.uc(2*n,o);var f=o.x,m=o.y;u.ic(u.fe(o,!1),o),o.x-=f,o.y-=m,(f=o.length())>this.xH&&f>c&&(a=n,c=f)}return a},w.prototype.qe=function(){},w}();h.lL=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 29},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a).next()):new h.lL(o,r,n,a)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.yC=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 21},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c,p,f,m){return o instanceof h.ba?(m=new h.$c(o),this.W(m,r,n,[a],c,p,!1,f).next()):f===!0?(n=new h.AC(o,r,n,a,c,!1,!1,m),h.Ih.local().W(n,r,m)):new h.AC(o,r,n,a,c,!1,!1,m)},u.instance=null,u}(h.Ge);h.zC=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n,a,c,p,f){if(c)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Os=u,this.vg=o,this.Ae=r,this.Es=n,this.ao=a,this.fo=-1,this.Vb=f,this.lT=new h.l,this.lT.Pa()}return w.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.fo+1<this.Es.length&&this.fo++,this.UQ(u,this.Es[this.fo]);return null},w.prototype.Ma=function(){return this.za},w.prototype.UQ=function(u,o){return h.PK.buffer(u,this.vg,this.Ae,o,this.ao,this.Vb)},w.prototype.qe=function(){},w}();h.AC=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 24},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n){if(r==null)throw h.i.O();if(o.B()||1>o.Eb())return 0;if(n==4)throw h.i.Fe();var a=h.cb.tc(r),c=h.cb.xv(a),p=h.cb.gv(a);c*=2-c;var f=a.Id().ci,m=o.K();if(m==1736||m==197)var b=o.mg();else h.ba.zd(m)?(b=new h.Ua(o.description)).oc(o,!0):b=o;if(a.Nb(r)==0){if(h.cb.Xc(r)){b=h.Jh.nj(b,r),m==1607&&b==o&&(b=h.ba.ig(o)),o=new h.Oc,h.cb.ih(r).en(o),m=0;for(var S=b.I();m<S;m++){var M=b.Oa(m);M.x=h.Jh.an(M.x,o),b.Db(m,M)}}o=b.Ja(),b=h.Jh.QI(r,a,b,o)?o:h.cb.Bh(b,r,a)}return this.bQ(b,n,p,c,f)},u.prototype.bQ=function(o,r,n,a,c){var p=new h.ha(0),f=0;for(o=o.Ha();o.ab();)for(;o.Ia();){var m=o.ia(),b=m.ac();m=m.xc(),b.scale(c),m.scale(c),h.kb.xd(n,a,b.x,b.y,m.x,m.y,p,null,null,r),f+=p.u}return f},u.instance=null,u}(h.Ge);h.oL=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 18},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a,c).next()):new h.nL(o,n,a,r,-1,-1,c)},u.instance=null,u}(h.Ge);h.mL=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n,a,c){if(0<c||r!=4&&0<a)throw h.i.Fe();if(o==null)throw h.i.O();this.za=-1,this.Os=u,this.vg=o,this.Ae=r,this.vT=n,this.uT=a}return w.prototype.next=function(){for(var u;(u=this.Os.next())!=null;)return this.za=this.Os.Ma(),this.Uy(u);return null},w.prototype.Ma=function(){return this.za},w.prototype.Uy=function(u){return h.ej.Sr(u,this.vg,this.Ae,this.vT,this.uT,this.Vb)},w.prototype.qe=function(){},w}();h.nL=A}(q||(q={})),function(h){(function(A){A[A.Unknown=0]="Unknown",A[A.Contains=1]="Contains",A[A.Within=2]="Within",A[A.Equals=3]="Equals",A[A.Disjoint=4]="Disjoint",A[A.Touches=8]="Touches",A[A.Crosses=16]="Crosses",A[A.Overlaps=32]="Overlaps",A[A.NoThisRelation=64]="NoThisRelation",A[A.Intersects=1073741824]="Intersects",A[A.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(h.XK||(h.XK={})),h.qL=function(){function A(){}return A.fW=function(w,u){var o=w.K(),r=u.K();if(h.ba.zj(o)){var n=w.Cb;if(n!=null&&(n=n.Gk)!=null){if(r==33){var a=u.D();n=n.To(a.x,a.y)}else a=new h.l,u.A(a),n=n.So(a);if(n==1)return 1;if(n==0)return 4}}if(h.ba.zj(r)&&(n=u.Cb)!=null&&(n=n.Gk)!=null){if(o==33?(w=w.D(),n=n.To(w.x,w.y)):(u=new h.l,w.A(u),n=n.So(u)),n==1)return 2;if(n==0)return 4}return 0},A}()}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.K=function(){return 15},u.prototype.W=function(o,r,n,a,c){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,a,c).next()):c===void 0?new h.BC(o,r,n,a,-1):new h.BC(o,r,n,a,c)},u.prototype.xn=function(o,r,n){this.Ku(o)&&(r=h.ta.mj(r,o,!1),o.hj(n)||o.nu(r,n))},u.prototype.Ku=function(o){return h.Mx.tE(o)},u.instance=null,u}(h.Ge);h.Xk=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n,a){if(this.vs=o==null,this.za=-1,this.Sd=u,this.vg=r,this.Pe=o.next(),this.Fj=this.Pe.K(),this.Vb=n,this.Hi=a,this.Hi!=-1&&(0>=this.Hi||7<this.Hi))throw h.i.O("bad dimension mask")}return w.prototype.next=function(){if(this.vs)return null;if(this.Bw!=null){var u=this.Bw.next();if(u!=null)return u;this.Bw=null}for(;(u=this.Sd.next())!=null;)return this.za=this.Sd.Ma(),this.Hi==-1?u=this.Fa(u):(this.Bw=this.IS(u),u=this.Bw.next()),u;return null},w.prototype.Ma=function(){return this.za},w.prototype.Fa=function(u){var o=this.tK(u);if(o!=null)return o;o=h.ta.ov(this.Pe,u);var r=h.ta.Xd(this.vg,o,!0);o=new h.l,this.Pe.A(o);var n=new h.l;return u.A(n),o.X(2*r,2*r),o.Fa(n),o.X(100*r,100*r),r=h.Vd.clip(this.Pe,o,0,0),u=h.Vd.clip(u,o,0,0),h.Hg.Cv(u,r,this.vg,this.Vb)},w.prototype.JI=function(u,o,r){var n=0;if((1&o)!=0)r[0]==null&&(r[0]=new h.de(u)),n++;else for(var a=0;a<r.length-1;a++)r[a]=r[a+1];if((2&o)!=0)r[n]==null&&(r[n]=new h.Ua(u)),n++;else for(a=n;a<r.length-1;a++)r[a]=r[a+1];if((4&o)!=0)r[n]==null&&(r[n]=new h.Ea(u)),n++;else for(a=n;a<r.length-1;a++)r[a]=r[a+1];if(n!=3){for(u=[],a=0;a<n;a++)u[a]=r[a];return new h.$c(u)}return new h.$c(r)},w.prototype.IS=function(u){var o=this.tK(u);if(o!=null){var r=[null,null,null];return r[o.Eb()]=o,this.JI(u.description,this.Hi,r)}o=h.ta.ov(this.Pe,u),r=h.ta.Xd(this.vg,o,!0),o=new h.l,this.Pe.A(o),o.X(2*r,2*r);var n=new h.l;return u.A(n),o.Fa(n),o.X(100*r,100*r),r=h.Vd.clip(this.Pe,o,0,0),o=h.Vd.clip(u,o,0,0),r=h.Hg.Kz(o,r,this.vg,this.Vb),this.JI(u.description,this.Hi,r)},w.prototype.tK=function(u){var o=h.ta.ov(u,this.Pe),r=h.ta.Xd(this.vg,o,!0);o=u.K();var n=u.B(),a=this.Pe.B();if(!(a=n||a)){a=new h.l,u.A(a);var c=new h.l;this.Pe.A(c),c.X(2*r,2*r),a=!a.isIntersecting(c)}if(!a)if((c=h.qL.fW(this.Pe,u))==4)a=!0;else{if((2&c)!=0)return this.Pe;if((1&c)!=0)return u}if(a)return(r=h.ba.uf(o))<(a=h.ba.uf(this.Fj))?w.BB(u,n):r>a||r==0&&o==550&&this.Fj==33?this.hJ():w.BB(u,n);if((this.Hi==-1||this.Hi==4)&&o==197&&this.Fj==197)return r=this.Pe,o=new h.l,u.A(o),n=new h.l,r.A(n),o.Fa(n),r=new h.Hh,u.copyTo(r),r.Yo(o),r;if(o==197&&h.ba.uf(this.Fj)==0||this.Fj==197&&h.ba.uf(o)==0)return n=o==197?u:this.Pe,u=o==197?this.Pe:u,o=new h.l,n.A(o),h.Vd.clip(u,o,r,0);if(h.ba.uf(o)==0&&0<h.ba.uf(this.Fj)||0<h.ba.uf(o)&&h.ba.uf(this.Fj)==0){if(r=h.ta.mj(this.vg,u,!1),o==550||o==33)return h.Hg.tG(u,this.Pe,r);if(this.Fj==550||this.Fj==33)return h.Hg.tG(this.Pe,u,r);throw h.i.Ra()}return this.Hi!=-1&&this.Hi!=2||o!=1607||this.Fj!=1736?this.Hi!=-1&&this.Hi!=2||o!=1736||this.Fj!=1607?null:this.qK(this.Pe,u):this.qK(u,this.Pe)},w.prototype.qK=function(u,o){var r=u,n=o,a=h.ta.mj(this.vg,o,!1),c=new h.l;n.A(c);var p=new h.l;r.A(p),p.X(2*a,2*a),c.Fa(p),c.X(10*a,10*a),r=u=h.Vd.clip(u,c,0,0),p=new h.ja(0);var f=-1,m=n.Cb;if(m!=null){var b=m.Gk;if(b!=null){f=0,p.Jb(r.I()+r.ea());for(var S=new h.l,M=r.Ha();M.ab();)for(;M.Ia();){M.ia().A(S);var T=b.So(S);T==1?p.add(1):T==0?p.add(0):(p.add(-1),f++)}}}if(5<o.I()&&(m=(n=o=h.Vd.clip(o,c,0,0)).Cb),0>f&&(f=r.sz()),c=r.I()+n.I(),f*n.I()>Math.log(c)*c*4)return null;c=null,f=n.Ha(),m!=null&&m.Gb!=null&&(c=m.Gb),c==null&&20<n.I()&&(c=h.ta.hE(n)),u=u.Ja(),n=null,m=r.Ha(),b=[0,0,0,0,0,0,0,0,0],S=new h.ce(0),M=new h.hg,T=-1;for(var k=0,C=0,N=0<p.size,F=-1;m.ab();){F=m.gb;var D=0;for(T=-1,k=0;m.Ia();){var j=N?h.P.truncate(p.get(C)):-1;C++;var G=m.ia();if(0>j){if(c!=null)for(n==null?n=c.oR(G,a):n.Vo(G,a),j=n.next();j!=-1;j=n.next()){f.Wb(c.ka(j)),j=f.ia();var W=G.Fa(j,null,b,null,a);for(j=0;j<W;j++)S.add(b[j])}else for(f.aj();f.ab();)for(;f.Ia();)for(j=f.ia(),W=G.Fa(j,null,b,null,a),j=0;j<W;j++)S.add(b[j]);if(0<S.size){S.Wd(0,S.size,function(ge,ye){return ge-ye});var J=0;S.add(1),W=-1,j=0;for(var B=S.size;j<B;j++){var Q=S.get(j);if(Q!=J){var ue=!1;if(J!=0||Q!=1?(G.dh(J,Q,M),J=M.get()):(J=G,ue=!0),2<=D){if(u.Fr(r,F,T,k,D==3),this.KD(o,J.ac(),a)!=1&&this.LD(o,J,a)!=1)return null;u.oc(J,!1),D=1,k=0}else switch(W=this.LD(o,J,a),W){case 1:ue?2>D?(T=m.xb()-r.Ca(F),k=1,D=D==0?3:2):k++:(u.oc(J,D==0),D=1);break;case 0:D=0,T=-1,k=0;break;default:return null}J=Q}}}else{if(0>(j=this.KD(o,G.ac(),a)))return null;j==1?(2>D&&(T=m.xb()-r.Ca(F),D=D==0?3:2),k++):(T=-1,k=0)}S.clear(!1)}else j!=0&&j==1&&(D==0?(D=3,T=m.xb()-r.Ca(F)):D==1?(D=2,T=m.xb()-r.Ca(F)):k++)}2<=D&&(u.Fr(r,F,T,k,D==3),T=-1)}return u},w.prototype.KD=function(u,o,r){return h.Fg.ym(u,o,r)},w.prototype.LD=function(u,o,r){var n=o.ac();o=o.xc();var a=h.Fg.ym(u,n,r),c=h.Fg.ym(u,o,r);return a==1&&c==0||a==0&&c==1?-1:a==0||c==0?0:a==1||c==1?1:((a=new h.h).add(n,o),a.scale(.5),(u=h.Fg.ym(u,a,r))==0?0:u==1?1:-1)},w.BB=function(u,o){return o?u:u.Ja()},w.prototype.hJ=function(){return this.sH==null&&(this.sH=this.Pe.Ja()),this.sH},w.prototype.qe=function(){},w}();h.BC=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 28},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a,c,p,f){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a,c,p,f).next()):new h.rL(o,r,n,a,c,p,f)},u.instance=null,u}(h.Ge);h.CC=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n,a,c,p){this.za=-1,this.Sd=u,this.Oj=o,this.La=r,this.Mi=n,this.wA=a,this.oH=c,this.nd=p}return w.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),this.dL(u)):null},w.prototype.Ma=function(){return this.za},w.prototype.dL=function(u){var o=0>=this.oH?h.ta.mj(this.Oj,u,!1):this.oH;return h.CK.W(u,this.La,this.Mi,this.wA,o,this.nd)},w.prototype.qe=function(){},w}();h.rL=A}(q||(q={})),function(h){var A;(A=h.HK||(h.HK={}))[A.clipToDomainOnly=1]="clipToDomainOnly",A[A.clipWithHorizon=2]="clipWithHorizon",A[A.foldAndClipWithHorizon=3]="foldAndClipWithHorizon";var w=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return gt(o,u),o.prototype.K=function(){return 0},o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.W=function(r,n,a){return r instanceof h.ba?(r=new h.$c(r),this.W(r,n,a).next()):new h.sL(r,n,a)},o.prototype.transform=function(r,n,a,c){return h.du.transform(r,n,a,c,!0)},o.prototype.St=function(r,n,a,c){return h.du.St(r,n,a,c)},o.instance=null,o}(h.Ge);h.Gx=w}(q||(q={})),function(h){var A=function(){function w(u,o,r){this.za=-1,this.Sd=u,this.ET=o,this.nd=r}return w.prototype.next=function(){var u=this.Sd.next();return u!=null?(this.za=this.Sd.Ma(),h.du.Bh(u,this.ET,this.nd)):null},w.prototype.Ma=function(){return this.za},w.prototype.qe=function(){},w}();h.sL=A}(q||(q={})),function(h){var A=function(){function u(){}return u.prototype.reset=function(){this.rh=this.yk=-1,this.ws=this.mq=!1},u.prototype.uQ=function(o,r,n){for(o.Wb(r,n);o.Ia();){var a=o.ia();if((a=a.Rb())!=0)return o.xb()}for(o.Wb(r,n);o.zz();)if((a=(a=o.ni()).Rb())!=0)return o.xb();return-1},u.prototype.vQ=function(o,r){for(o.Wb(r,-1);o.zz();)if(o.ni().Rb()!=0)return o.xb();return-1},u.prototype.tQ=function(o,r){for(o.Wb(r,-1),o.ia();o.Ia();)if(o.ia().Rb()!=0)return o.xb();return-1},u.prototype.sQ=function(o,r,n,a){if(this.yk=this.uQ(r,n,a),this.yk!=-1){r.Wb(this.yk,-1);var c=r.ia(),p=c.ic(c.fe(o,!1));if(n=h.h.zc(p,o),(a=new h.h).N(p),a.sub(c.ac()),(p=new h.h).N(o),p.sub(c.ac()),this.mq=0>a.yi(p),this.rh=this.tQ(r,this.yk),this.rh!=-1){r.Wb(this.rh,-1);var f=(c=r.ia()).fe(o,!1);f=c.ic(f);var m=h.h.zc(f,o);m>n?this.rh=-1:(a.N(f),a.sub(c.ac()),p.N(o),p.sub(c.ac()),this.ws=0>a.yi(p))}this.rh==-1&&(this.rh=this.vQ(r,this.yk),this.rh!=-1&&(r.Wb(this.rh,-1),f=(c=r.ia()).fe(o,!1),f=c.ic(f),(m=h.h.zc(f,o))>n?this.rh=-1:(a.N(f),a.sub(c.ac()),p.N(o),p.sub(c.ac()),this.ws=0>a.yi(p),o=this.yk,this.yk=this.rh,this.rh=o,o=this.mq,this.mq=this.ws,this.ws=o)))}},u.prototype.XN=function(o,r,n,a,c){return n=n.Ha(),this.sQ(o,n,a,c),this.yk!=-1&&this.rh==-1?this.mq:this.yk!=-1&&this.rh!=-1?this.mq==this.ws?this.mq:(n.Wb(this.yk,-1),o=n.ia().jg(),n.Wb(this.rh,-1),r=n.ia().jg(),0<=o.yi(r)):r},u}(),w=function(u){function o(){return u!==null&&u.apply(this,arguments)||this}return gt(o,u),o.local=function(){return o.instance===null&&(o.instance=new o),o.instance},o.prototype.K=function(){return 3},o.prototype.iz=function(r,n,a){var c;if(c===void 0&&(c=!1),r.B())return new h.bm;n=n.D();var p=r,f=r.K();switch(f==197&&((p=new h.Ea).bd(r,!1),f=1736),f){case 33:return this.rI(p,n);case 550:return this.dI(p,n);case 1607:case 1736:return this.UT(p,n,a,c);default:throw h.i.ga("not implemented")}},o.prototype.jz=function(r,n){if(r.B())return new h.bm;n=n.D();var a=r,c=r.K();switch(c==197&&((a=new h.Ea).bd(r,!1),c=1736),c){case 33:return this.rI(a,n);case 550:case 1607:case 1736:return this.dI(a,n);default:throw h.i.ga("not implemented")}},o.prototype.kz=function(r,n,a,c){if(0>c)throw h.i.O();if(r.B())return[];n=n.D();var p=r,f=r.K();switch(f==197&&((p=new h.Ea).bd(r,!1),f=1736),f){case 33:return this.LU(p,n,a,c);case 550:case 1607:case 1736:return this.lU(p,n,a,c);default:throw h.i.ga("not implemented")}},o.prototype.UT=function(r,n,a,c){if(r.K()==1736&&a&&(a=new h.l,r.A(a),a=h.ta.Xd(null,a,!1),(c?h.jd.Zd(r,n,0):h.jd.Zd(r,n,a))!=0)){var p=new h.bm(n,0,0);return c&&p.QJ(!0),p}var f=r.Ha();p=new h.h;for(var m=a=-1,b=17976931348623157e292,S=0;f.ab();)for(;f.Ia();){var M=f.ia();M=M.ic(M.fe(n,!1));var T=h.h.zc(M,n);T<b?(S=1,p=M,a=f.xb(),m=f.gb,b=T):T==b&&S++}return p=new h.bm(p,a,Math.sqrt(b)),c&&(f.Wb(a,m),M=f.ia(),c=0>h.h.Wq(n,M.ac(),M.xc()),1<S&&((S=new A).reset(),c=S.XN(n,c,r,a,m)),p.QJ(c)),p},o.prototype.rI=function(r,n){return r=r.D(),n=h.h.ub(r,n),new h.bm(r,0,n)},o.prototype.dI=function(r,n){for(var a=r.vb(0),c=r.I(),p=r=0,f=0,m=17976931348623157e292,b=0;b<c;b++){var S=new h.h;a.uc(2*b,S);var M=h.h.zc(S,n);M<m&&(p=S.x,f=S.y,r=b,m=M)}return(n=new h.bm).by(p,f,r,Math.sqrt(m)),n},o.prototype.LU=function(r,n,a,c){return c==0?[]:(a*=a,r=r.D(),(n=h.h.zc(r,n))<=a?(a=[],(c=new h.bm).by(r.x,r.y,0,Math.sqrt(n)),a[0]=c):a=[],a)},o.prototype.lU=function(r,n,a,c){if(c==0)return[];var p=r.vb(0),f=r.I();r=[],a*=a;for(var m=0;m<f;m++){var b=p.read(2*m),S=p.read(2*m+1),M=n.x-b,T=n.y-S;(M=M*M+T*T)<=a&&((T=new h.bm).by(b,S,m,Math.sqrt(M)),r.push(T))}return n=r.length,r.sort(function(k,C){return k.La<C.La?-1:k.La==C.La?0:1}),c>=n||(r.length=c),r.slice(0)},o.instance=null,o}(h.Ge);h.Hx=w}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 4},u.prototype.W=function(o,r,n,a,c){return h.cm.sB(o,r,n,a,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(o){return h.Xt.ry(o)},u.prototype.xn=function(o,r,n){h.Xt.wD(o,r,n)},u.instance=null,u}(h.Ge);h.tL=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 33},u.prototype.W=function(o,r,n,a,c){return o===1073741824?!h.vd.tB(r,n,a,4,c):h.vd.tB(r,n,a,o,c)},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.Ku=function(o){return h.Xt.ry(o)},u.prototype.xn=function(o,r,n){h.Xt.wD(o,r,n)},u.instance=null,u}(h.Ge);h.fj=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n){if(this.nd=n,this.iT=r,this.za=-1,u==null)throw h.i.O();this.zk=u,this.Oj=o}return w.prototype.next=function(){var u;if((u=this.zk.next())!=null){if(this.za=this.zk.Ma(),this.nd!=null&&!this.nd.progress(-1,-1))throw h.i.hu("user_canceled");return this.ZB(u)}return null},w.prototype.Ma=function(){return this.za},w.prototype.ZB=function(u){if(u==null)throw h.i.O();return h.Ix.XJ(u,this.Oj,this.iT,this.nd)},w.prototype.qe=function(){},w}();h.uL=A}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 26},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),this.W(o,r,n,a).next()):new h.uL(o,r,n,a)},u.prototype.ts=function(o,r,n,a,c){return 0<(a!==void 0?h.Ix.ts(o,r,n,a,c):h.Ix.ts(o,r,!1,null,n))},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.$l=A}(q||(q={})),function(h){var A=function(){function c(){this.Aq=0}return c.prototype.eX=function(p){this.Aq&=-2,this.Aq|=p?1:0},c.prototype.Yp=function(){return(1&this.Aq)!=0},c.prototype.RF=function(){return this.Yp()?0:1},c}();h.pY=A;var w=function(){},u=function(c,p,f,m){this.x=c,this.y=p,this.Ci=f,this.zm=m},o=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,m){return p=p.ka(m),f=this.Ce.lf.read(2*f),0>(f-=p=this.Ce.lf.read(2*p))?-1:0<f?1:0},c}(),r=function(){function c(p){this.Ce=p}return c.prototype.compare=function(p,f,m){f=this.Ce.hb[f],p=this.Ce.hb[p.ka(m)];var b=f.Yp(),S=p.Yp();m=f.ne.Me(this.Ce.No,0);var M=p.ne.Me(this.Ce.No,0);return m==M&&((b=.5*((m=Math.min(b?f.ne.oa:f.ne.ma,S?p.ne.oa:p.ne.ma))-this.Ce.No)+this.Ce.No)==this.Ce.No&&(b=m),m=f.ne.Me(b,0),M=p.ne.Me(b,0)),m<M?-1:m>M?1:0},c}(),n=function(){function c(p,f){this.SI=new h.h,this.parent=p,this.XR=f}return c.prototype.qr=function(p,f,m){var b=this.parent,S=this.XR;m.Wd(p,f,function(M,T){return b.Oh(M,T,S)})},c.prototype.bq=function(p){return p=this.parent.ii.get(p),this.parent.lf.uc(2*(p>>1),this.SI),this.SI.y+((1&p)!=0?this.parent.Qj:-this.parent.Qj)},c}(),a=function(){function c(p,f,m,b,S){this.hH=p.description,this.Y=p,this.Sg=f,this.Qj=h.ta.mj(this.Sg,p,!1),this.Co=h.ta.mj(this.Sg,p,!0),this.rA=m,this.gT=this.hH.Ba,this.hb=[],this.qo=[],this.oh=new h.kp,this.fb=new h.Zj,this.ke=new h.Nd,this.TG=this.sl=S}return c.prototype.XS=function(){return this.TG=!0,(!h.ba.Ic(this.Y.K())||this.AE()&&this.xE(!1))&&this.gO()?h.ba.Ic(this.Y.K())?this.jO()?this.Y.K()==1607?this.lO()?2:0:this.mO()?this.nO():0:0:2:0},c.prototype.eC=function(p,f){var m=this.lf.read(2*p);p=this.lf.read(2*p+1);var b=this.lf.read(2*f);f=this.lf.read(2*f+1);var S=!h.$t.Ev(m,p,b,f,this.Qj*this.Qj);return S||this.Y.Eb()!=0&&m==b&&p==f},c.prototype.AE=function(){for(var p=this.Y,f=p.yf?3:2,m=0,b=p.ea();m<b;m++)if(p.Ka(m)<f)return this.ke=new h.Nd(1,m,0),!1;return!0},c.prototype.xE=function(p){var f=this.Y,m=f.Ha(),b=f.hasAttribute(1);for(f=b?h.ta.qE(this.Sg,f,!1):0;m.ab();)for(;m.Ia();){var S=m.ia();if(!(S.Rb()>this.Qj)){if(p&&b){var M=S.yv(1,0);if(S=S.yv(1,0),Math.abs(S-M)>f)continue}return this.ke=new h.Nd(2,m.xb(),-1),!1}}return!0},c.prototype.gO=function(){var p=this.Y,f=null;h.ba.Ic(this.Y.K())&&(f=this.Y);var m=(this.TG||this.sl)&&f!=null,b=p.I();this.lf=p.vb(0),this.ii=new h.ja(0),this.ii.Jb(2*b),this.hi=new h.ja(0),this.hi.Jb(2*b),m&&(this.Hl==null&&(this.Hl=new h.ja(0)),this.Hl.Jb(b));for(var S=p=0;S<b;S++)if(this.ii.add(2*S),this.ii.add(2*S+1),this.hi.add(2*S),this.hi.add(2*S+1),m){for(;S>=f.Wc(p);)p++;this.Hl.add(p)}for(new h.Zt().sort(this.hi,0,2*b,new n(this,m)),this.fb.clear(),this.fb.Wo(new o(this)),this.fb.Ee(b),f=0,b*=2;f<b;f++)if(m=this.hi.get(f),m=(p=this.ii.get(m))>>1,(1&p)==0){if(p=this.fb.addElement(m,-1),(S=this.fb.xe(p))!=-1&&!this.eC(this.fb.ka(S),m))return this.ke=new h.Nd(3,m,this.fb.ka(S)),!1;var M=this.fb.lb(p);if(M!=-1&&!this.eC(this.fb.ka(M),m))return this.ke=new h.Nd(3,m,this.fb.ka(M)),!1}else if(p=this.fb.search(m,-1),S=this.fb.xe(p),M=this.fb.lb(p),this.fb.wd(p,-1),S!=-1&&M!=-1&&!this.eC(this.fb.ka(S),this.fb.ka(M)))return this.ke=new h.Nd(3,this.fb.ka(S),this.fb.ka(M)),!1;return!0},c.prototype.jO=function(){return 10>this.Y.I()?this.hO():this.iO()},c.prototype.iO=function(){var p=new h.hd;p.Ib(this.Y);var f=new h.Nd;return!h.bu.eI(!1,p,this.Qj,f,this.nd)||(f.Ko=p.Va(f.Ko),f.Lo=p.Va(f.Lo),this.ke.Yt(f),!1)},c.prototype.hO=function(){var p=this.Y,f=p.Ha();for(p=p.Ha();f.ab();)for(;f.Ia();){var m=f.ia();if(!f.Rn()||!f.SS()){p.tW(f);do for(;p.Ia();){var b=p.ia();if((b=m.Br(b,this.Qj,!0))!=0)return this.ke=new h.Nd(b==2?5:4,f.xb(),p.xb()),!1}while(p.ab())}}return!0},c.prototype.mO=function(){var p=this.Y;this.hb.length=0,this.qo.length=0,this.$f=p.Ha(),this.$f.DB();var f=new h.ja(0);f.Jb(10);var m=NaN,b=0,S=0;for(p=2*p.I();S<p;S++){var M=this.hi.get(S);if((1&(M=this.ii.get(M)))==0){M>>=1;var T=this.lf.read(2*M),k=this.lf.read(2*M+1);if(f.size!=0&&(T!=m||k!=b)){if(!this.KI(f))return!1;f!=null&&f.clear(!1)}f.add(M),m=T,b=k}}return!!this.KI(f)},c.prototype.lO=function(){for(var p=this.Y,f=Array(p.ea()),m=0,b=p.ea();m<b;m++)f[m]=p.On(m);b=new w;var S=new h.h;m=this.hi.get(0);var M=(m=this.ii.get(m))>>1;this.lf.uc(2*M,S);var T=f[m=this.Hl.get(M)],k=p.Ca(m),C=p.Wc(m)-1;b.gl=M==k||M==C,b.jy=this.sl?!T&&b.gl:b.gl,b.Ci=m,b.x=S.x,b.y=S.y,b.zm=M;for(var N=new w,F=1,D=this.hi.size;F<D;F++)if(m=this.hi.get(F),(1&(m=this.ii.get(m)))==0){M=m>>1,this.lf.uc(2*M,S),(m=this.Hl.get(M))!=b.Ci&&(T=f[m],k=p.Ca(m),C=p.Wc(m)-1);var j=M==k||M==C,G=this.sl?!T&&b.gl:b.gl;if(N.x=S.x,N.y=S.y,N.Ci=m,N.zm=M,N.jy=G,N.gl=j,N.x==b.x&&N.y==b.y){if(this.sl){if(!(N.jy&&b.jy||N.Ci==b.Ci&&(N.gl||b.gl)))return this.ke=new h.Nd(8,N.zm,b.zm),!1}else if(!N.gl||!b.gl)return this.ke=new h.Nd(5,N.zm,b.zm),!1}m=b,b=N,N=m}return!0},c.prototype.DE=function(){for(var p=this.Y,f=[],m=-1,b=!1,S=0,M=p.ea();S<M;S++)p.Gv(S)&&(b=!1,m++,S<M-1&&(p.Gv(S+1)||(b=!0))),f[S]=b?m:-1;b=new h.h,S=this.hi.get(0);var T=(S=this.ii.get(S))>>1;this.lf.uc(2*T,b),S=this.Hl.get(T),m=new u(b.x,b.y,S,T,f[S]),p=[];var k=1;for(M=this.hi.size;k<M;k++)if(S=this.hi.get(k),(1&(S=this.ii.get(S)))==0){if(T=S>>1,this.lf.uc(2*T,b),S=this.Hl.get(T),(S=new u(b.x,b.y,S,T,f[S])).x==m.x&&S.y==m.y){if(S.Ci==m.Ci)return this.ke=new h.Nd(9,S.zm,m.zm),!1;0<=f[S.Ci]&&f[S.Ci]==f[m.Ci]&&(p.length!=0&&p[p.length-1]==m||p.push(m),p.push(S))}m=S}if(p.length==0)return!0;for(S=new h.kp(!0),h.P.bv(f,-1),b=-1,(k=new h.h).Sc(),m=0,M=p.length;m<M;m++){(T=p[m]).x==k.x&&T.y==k.y||(b=S.Rh(0),k.x=T.x,k.y=T.y);var C=f[T.Ci];C==-1&&(C=S.Rh(2),f[T.Ci]=C),S.addElement(C,b),S.addElement(b,C)}for((M=new h.ja(0)).Jb(10),m=S.je;m!=-1;m=S.lz(m))if((1&(p=S.JF(m)))==0&&(2&p)!=0){for(p=-1,M.add(m),M.add(-1);0<M.size;){if(b=M.Gc(),M.Jf(),k=M.Gc(),M.Jf(),(1&(T=S.JF(k)))!=0){p=(2&T)==0?b:k;break}for(S.XW(k,1|T),T=S.sc(k);T!=-1;T=S.lb(T))(C=S.getData(T))!=b&&(M.add(C),M.add(k))}if(p!=-1){for(S=-1,m=0,M=f.length;m<M;m++)if(f[m]==p){S=m;break}return this.ke=new h.Nd(10,S,-1),!1}}return!0},c.prototype.nO=function(){var p=this.Y;if(0>=p.He())return this.ke=new h.Nd(6,p.ea()==1?1:-1,-1),0;if(p.ea()==1)return this.sl&&!this.DE()?0:2;this.uo=h.ja.rf(p.ea(),0),this.DA=h.ja.rf(p.ea(),-1);for(var f=-1,m=0,b=0,S=p.ea();b<S;b++){var M=p.Kr(b);if(this.uo.write(b,0>M?0:256),0<M)f=b,m=M;else{if(M==0)return this.ke=new h.Nd(6,b,-1),0;if((0>f||m<Math.abs(M))&&(this.ke=new h.Nd(7,b,-1),this.sl))return 0;this.DA.write(b,f)}}for(this.et=p.ea(),this.Qm=new h.ja(0),this.Qm.Jb(10),S=p.I(),this.No=NaN,(p=new h.ja(0)).Jb(10),this.Sq=h.ja.rf(S,-1),this.Jw=h.ja.rf(S,-1),this.Bj!=null?this.Bj.clear(!1):this.Bj=new h.ja(0),this.Bj.Jb(10),this.fb.clear(),this.fb.Wo(new r(this)),f=0,S*=2;0<this.et&&f<S;f++)if(m=this.hi.get(f),(1&(m=this.ii.get(m)))==0){if(m>>=1,(b=this.lf.read(2*m+1))!=this.No&&p.size!=0){if(!this.vt(p))return 0;p!=null&&p.clear(!1)}p.add(m),this.No=b}return 0<this.et&&!this.vt(p)?0:this.sl?this.ke.Lj==0&&this.DE()?2:0:this.ke.Lj==0?2:1},c.prototype.KI=function(p){if(p.size==1)return!0;for(var f=0,m=p.size;f<m;f++){var b=p.get(f);this.$f.Wb(b);var S=this.$f.ni();this.hb.push(this.Uu(S,b,this.$f.gb,!0)),this.$f.ia(),S=this.$f.ia(),this.hb.push(this.Uu(S,b,this.$f.gb,!1))}var M=this;for(this.hb.sort(function(C,N){return M.RP(C,N)}),(b=this.oh.je)==-1&&(b=this.oh.Rh(0)),this.oh.hn(this.hb.length),f=0,m=this.hb.length;f<m;f++)this.oh.addElement(b,f);f=!0;for(var T=m=-1;f&&(f=!1,(S=this.oh.sc(b))!=-1);)for(var k=this.oh.lb(S);k!=-1;)if(m=this.oh.getData(S),T=this.oh.getData(k),(m=this.hb[m].Jo)!=(T=this.hb[T].Jo))S=k,k=this.oh.lb(S);else if(f=!0,this.oh.kd(b,S),S=this.oh.xe(k),(k=this.oh.kd(b,k))==-1||S==-1)break;if(f=this.oh.ds(b),this.oh.FE(b),0<f)return this.ke=new h.Nd(5,m,T),!1;for(f=0,m=p.size;f<m;f++)this.pB(this.hb[f]);return this.hb.length=0,!0},c.prototype.vt=function(p){for(var f=0,m=p.size;f<m;f++){var b=p.get(f),S=this.Sq.read(b);if(S!=-1){var M=this.fb.ka(S);this.Bj.add(M),this.fb.wd(S,-1),this.pB(this.hb[M]),this.hb[M]=null,this.Sq.write(b,-1)}(S=this.Jw.read(b))!=-1&&(M=this.fb.ka(S),this.Bj.add(M),this.fb.wd(S,-1),this.pB(this.hb[M]),this.hb[M]=null,this.Jw.write(b,-1))}for(f=0,m=p.size;f<m;f++){if(b=p.get(f),this.$f.Wb(b),(S=this.$f.ni()).oa>S.ma){var T=this.$f.xb(),k=this.Uu(S,b,this.$f.gb,!0);0<this.Bj.size?(M=this.Bj.Gc(),this.Bj.Jf(),this.hb[M]=k):(M=this.hb.length,this.hb.push(k)),S=this.fb.addElement(M,-1),this.Sq.read(T)==-1?this.Sq.write(T,S):this.Jw.write(T,S),(3&this.uo.read(this.$f.gb))==0&&this.Qm.add(S)}this.$f.ia(),(S=this.$f.ia()).oa<S.ma&&(T=this.$f.jk(),k=this.Uu(S,b,this.$f.gb,!1),0<this.Bj.size?(M=this.Bj.Gc(),this.Bj.Jf(),this.hb[M]=k):(M=this.hb.length,this.hb.push(k)),S=this.fb.addElement(M,-1),this.Sq.read(T)==-1?this.Sq.write(T,S):this.Jw.write(T,S),(3&this.uo.read(this.$f.gb))==0&&this.Qm.add(S))}for(f=0,m=this.Qm.size;f<m&&0<this.et;f++)if(S=this.Qm.get(f),(3&this.uo.read(this.hb[this.fb.ka(S)].CA))==0){p=-1,b=this.fb.xe(S);var C=S;k=null,M=-1;for(var N=0;b!=-1&&(M=this.fb.ka(b),M=(k=this.hb[M]).CA,(3&(N=this.uo.read(M)))==0);)C=b,b=this.fb.xe(b);b==-1?(T=1,b=C):(p=(3&N)==1?M:this.DA.read(M),T=k.RF()!=0?0:1,b=this.fb.lb(b));do{if(M=this.fb.ka(b),M=(k=this.hb[M]).CA,(3&(C=this.uo.read(M)))==0){if(T!=k.RF())return this.ke=new h.Nd(6,M,-1),!1;if(C=252&C|(N=T==0||k.Yp()?2:1),this.uo.write(M,N),N==2&&this.ke.Lj==0&&this.DA.read(M)!=p&&(this.ke=new h.Nd(7,M,-1),this.sl))return!1;if(this.et--,this.et==0)return!0}(3&C)==1&&(p=M),C=b,b=this.fb.lb(b),T=T!=0?0:1}while(C!=S)}return this.Qm!=null?this.Qm.clear(!1):this.Qm=new h.ja(0),!0},c.prototype.Uu=function(p,f,m,b){if(p.K()!=322)throw h.i.Ra();return(p=this.mP(p)).Jo=f,p.CA=m,p.Aq=0,p.eX(b),p},c.prototype.mP=function(p){if(0<this.qo.length){var f=this.qo[this.qo.length-1];--this.qo.length,p.copyTo(f.ne)}else(f=new A).ne=h.MC.ig(p);return f},c.prototype.pB=function(p){p.ne.K()==322&&this.qo.push(p)},c.prototype.cU=function(){for(var p=this.Y.I(),f=new h.ja(0),m=0;m<p;m++)f.add(m);var b=this;for(f.Wd(0,p,function(S,M){return b.Qu(S,M)}),m=1;m<p;m++)if(this.Qu(f.get(m-1),f.get(m))==0)return this.ke=new h.Nd(3,f.get(m-1),f.get(m)),0;return 2},c.prototype.BV=function(){return this.AE()&&this.xE(!0)?2:0},c.prototype.gV=function(){return this.XS()},c.prototype.hU=function(){for(var p=this.Y.I(),f=new h.ja(0),m=0;m<p;m++)f.add(m);var b=this;f.Wd(0,p,function(C,N){return b.JO(C,N)});var S=Array(p);for(h.P.bv(S,!1),S[f.get(0)]=!0,m=1;m<p;m++){var M=f.get(m-1),T=f.get(m);this.Qu(M,T)==0?S[T]=!1:S[T]=!0}f=this.Y.Ja(),M=this.Y,T=0;var k=1;for(m=0;m<p;m++)S[m]?k=m+1:(T<k&&f.Gd(M,T,k),T=m+1);return T<k&&f.Gd(M,T,k),f.Eh(2,this.Co),f},c.prototype.FV=function(){var p=this.Y,f=p.Ha(),m=p.Ha(),b=this.Y.Ja(),S=this.Y,M=p.hasAttribute(1),T=M?h.ta.qE(this.Sg,p,!0):0,k=new h.ja(0),C=new h.ja(0);for(k.Jb(h.P.truncate(p.I()/2+1)),C.Jb(h.P.truncate(p.I()/2+1));f.ab();)if(m.ab(),!(2>p.Ka(f.gb))){m.vW();for(var N,F,D=!0;f.Ia();){var j=f.ia(),G=m.ni();if(f.xb()>m.xb())break;D&&(k.add(f.xb()),C.add(m.jk()),D=!1),F=k.Gc();var W=f.jk();if(1<W-F){var J=new h.h;J.vc(p.Oa(F),p.Oa(W)),N=J.length()}else N=j.Rb();F=C.Gc(),1<(W=m.xb())-F?((J=new h.h).vc(p.Oa(F),p.Oa(W)),F=J.length()):F=G.Rb(),N>this.Co?k.add(f.jk()):M&&(N=p.Vc(1,k.Gc(),0),j=j.jv(1,0),Math.abs(j-N)>T&&k.add(f.jk())),F>this.Co?C.add(m.xb()):M&&(N=p.Vc(1,C.Gc(),0),j=G.jv(1,0),Math.abs(j-N)>T&&C.add(m.xb()))}if(k.Gc()<C.Gc()?k.size>C.size?k.Jf():C.Jf():(k.Gc()!=C.Gc()&&C.Jf(),C.Jf()),2<=C.size+k.size){for(D=new h.Ta,G=0,j=k.size;G<j;G++)S.we(k.get(G),D),G==0?b.nf(D):b.lineTo(D);for(G=C.size-1;0<G;G--)S.we(C.get(G),D),b.lineTo(D);S.ec(f.gb)?b.Cp():0<C.size&&(S.we(C.get(0),D),b.lineTo(D))}k!=null&&k.clear(!1),C!=null&&C.clear(!1)}return b.Eh(2,this.Co),b},c.prototype.jV=function(){return this.vX()},c.prototype.vX=function(){return this.Y.K()==1736&&this.Y.Jn()==1?h.Hg.Nk(this.Y,this.Co,!0,!1,this.nd):(this.Ji=new h.hd,this.Ji.Ib(this.Y),this.Ji.gd!=0&&(this.rA!=1&&h.Uk.W(this.Ji,this.Co,this.nd,!0),this.Y.K()==1736&&h.tn.W(this.Ji,this.Ji.ld,this.rA,!1,this.nd)),this.Y=this.Ji.Ke(this.Ji.ld),this.Y.K()==1736&&(this.Y.hm(),this.Y.Zo(0)),this.Y.Eh(2,this.Co),this.Y)},c.ts=function(p,f,m,b,S){if(b!=null&&(b.Lj=0,b.Ko=-1,b.Lo=-1),p.B())return 1;var M=p.K();if(M==33)return 1;var T=h.ta.mj(f,p,!1);if(M==197)return f=new h.l,p.A(f),f.Di(T)?(b!=null&&(b.Lj=2,b.Ko=-1,b.Lo=-1),0):1;if(h.ba.zd(M))return(T=new h.Ua(p.description)).oc(p,!0),c.ts(T,f,m,b,S);var k=p.qm(T);if((m=m?-1:k)!=-1)return m;if(f=new c(p,f,m,S,!1),M==550)m=f.cU();else if(M==1607)m=f.BV();else{if(M!=1736)throw h.i.Ra();m=f.gV()}return p.Eh(m,T),b!=null&&m==0&&b.Yt(f.ke),m},c.XJ=function(p,f,m,b){if(p.B())return p;var S=p.K();if(S==33)return p;var M=h.ta.mj(f,p,!1);if(S==197)return f=new h.l,p.A(f),f.Di(M)?p.Ja():p;if(h.ba.zd(S))return(S=new h.Ua(p.description)).oc(p,!0),c.XJ(S,f,m,b);if(M=p.qm(M),(m=m?-1:M)==2)return p;if(p=new c(p,f,m,b,!1),S==550)p=p.hU();else if(S==1607)p=p.FV();else{if(S!=1736)throw h.i.Ra();p=p.jV()}return p},c.prototype.Oh=function(p,f,m){if(p==f)return 0;p=this.ii.get(p);var b=this.ii.get(f);f=p>>1;var S=b>>1,M=new h.h,T=new h.h;return this.lf.uc(2*f,M),M.y+=(1&p)!=0?this.Qj:-this.Qj,this.lf.uc(2*S,T),T.y+=(1&b)!=0?this.Qj:-this.Qj,(p=M.compare(T))==0&&m?0>(m=this.Hl.get(f)-this.Hl.get(S))?-1:0<m?1:0:p},c.prototype.Qu=function(p,f){if(p==f)return 0;var m=this.Y,b=m.Oa(p),S=m.Oa(f);if(b.x<S.x)return-1;if(b.x>S.x)return 1;if(b.y<S.y)return-1;if(b.y>S.y)return 1;for(b=1;b<this.gT;b++){S=this.hH.qd(b);for(var M=h.ua.Wa(S),T=0;T<M;T++){var k=m.Vc(S,p,T),C=m.Vc(S,f,T);if(k<C)return-1;if(k>C)return 1}}return 0},c.prototype.JO=function(p,f){var m=this.Qu(p,f);return m==0?p<f?-1:1:m},c.prototype.RP=function(p,f){if(p===f)return 0;var m=p.ne.jg();p.Yp()&&m.Uq(),p=f.ne.jg(),f.Yp()&&p.Uq(),f=m.su();var b=p.su();return b==f?(f=m.yi(p),Math.abs(f)<=8881784197001252e-31*(Math.abs(p.x*m.y)+Math.abs(p.y*m.x))&&(f--,f++),0>f?1:0<f?-1:0):f<b?-1:1},c}();h.Ix=a}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 30},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.prototype.W=function(o,r,n,a){return o instanceof h.ba?(o=new h.$c(o),r=new h.$c(r),this.W(o,r,n,a).next()):new h.vL(o,r,n,a)},u.fp=function(o,r,n,a){var c=o.Eb(),p=r.Eb();if(o.B()&&r.B())return c>p?o:r;if(o.B())return r;if(r.B())return o;var f=new h.l,m=new h.l,b=new h.l;return o.A(f),r.A(m),b.L(f),b.$b(m),f=h.ta.Xd(n,b,!0),m=o.K(),b=r.K(),m==33&&b==33?u.TU(o,r,f):m!=b?0<c||0<p?c>p?o:r:m==550?u.cI(o,r,f):u.cI(r,o,f):h.Hg.fp(o,r,n,a)},u.TU=function(o,r,n){n=n*Math.sqrt(2)*1.00001,n*=n;var a=o.D(),c=r.D(),p=new h.de(o.description);return h.h.zc(a,c)>n&&(p.add(o),p.add(r)),p},u.cI=function(o,r,n){var a=o.vb(0),c=o.I(),p=r.D(),f=o.Ja();n=n*Math.sqrt(2)*1.00001;var m=new h.l;if(o.A(m),m.X(n,n),m.contains(p)){n*=n,m=!1;for(var b=[],S=0;S<c;S++)b[S]=!1;for(S=0;S<c;S++){var M=a.read(2*S),T=a.read(2*S+1);(M-=p.x)*M+(T-=p.y)*T<=n&&(m=!0,b[S]=!0)}if(m)for(S=0;S<c;S++)b[S]||f.Gd(o,S,S+1);else f.Gd(o,0,c),f.add(r)}else f.Gd(o,0,c),f.add(r);return f},u.instance=null,u}(h.Ge);h.Jx=A}(q||(q={})),function(h){var A=function(){function w(u,o,r,n){this.vs=o==null,this.za=-1,this.Sd=u,this.vg=r,this.FT=o.next(),this.Vb=n}return w.prototype.next=function(){return this.vs?null:(u=this.Sd.next())!=null?(this.za=this.Sd.Ma(),h.Jx.fp(u,this.FT,this.vg,this.Vb)):null;var u},w.prototype.Ma=function(){return this.za},w.prototype.qe=function(){},w}();h.vL=A}(q||(q={})),function(h){var A=function(){function o(){}return o.prototype.Az=function(){this.Vy=null,this.zx=-1,this.uK=!1},o}(),w=function(){function o(){this.Ir=0,this.rj=[]}return o.prototype.jN=function(r){this.Ir+=r.zx,this.rj.push(r)},o.prototype.LV=function(){this.Ir-=this.rj[this.rj.length-1].zx,--this.rj.length},o.prototype.iy=function(){return this.rj[this.rj.length-1]},o.prototype.Nb=function(r){return r===this},o}(),u=function(){function o(r,n,a){this.za=-1,this.Jc=!1,this.uH=[!1,!1,!1,!1],this.wq=[0,0,0,0],this.eA=!1,this.Ak=-1,this.kq=0,this.co=-1,this.Eo=[],this.Sd=r,this.vg=n,this.Vb=a}return o.YD=function(r){var n=[],a=0;for(r=Object.keys(r);a<r.length;a++)n.push(Number(r[a]));return n.sort(function(c,p){return c-p}),n},o.prototype.$F=function(r){var n=this.Eo[r],a=o.YD(n)[0],c=n[a],p=c.iy().Vy;return c=c.iy().uK,delete n[a],c&&(p=h.$l.local().W(p,this.vg,!1,this.Vb),r==0&&p.K()==33&&(r=new h.de(p.description),p.B()||r.add(p),p=r)),p},o.prototype.next=function(){if(this.Jc&&this.co==this.Ak)return null;for(;!this.kK(););if(this.Ak==-1)return null;if(this.eA){for(this.co++;;){if(this.co>this.Ak||0>this.co)throw h.i.Ra();if(this.uH[this.co])break}return this.za++,this.$F(this.co)}return this.za=0,this.co=this.Ak,this.$F(this.Ak)},o.prototype.Ma=function(){return this.za},o.prototype.kK=function(){if(this.Jc)return!0;var r=null;if(this.Sd!=null&&(r=this.Sd.next())==null&&(this.Jc=!0,this.Sd=null),h.np.Bp(this.Vb),r!=null){var n=r.Eb();this.uH[n]=!0,n>=this.Ak&&!this.eA&&(this.GD(n,!1,r),n>this.Ak&&!this.eA&&this.rW(n))}if(0<this.kq)for(n=0;n<=this.Ak;n++)for(;1<this.wq[n]&&(r=this.zO(n)).length!=0;)r=h.Hg.PP(r,this.vg,this.Vb),this.GD(n,!0,r);return this.Jc},o.prototype.zO=function(r){for(var n=[],a=[],c=this.Eo[r],p=o.YD(c),f=0;f<p.length;f++){var m=p[f],b=c[m];if(this.Jc||1e4<b.Ir&&1<b.rj.length){for(this.wq[r]-=b.rj.length,this.kq-=b.rj.length;0<b.rj.length;)n.push(b.iy().Vy),b.LV();a.push(m)}}for(f=0;f<a.length;f++)delete c[a[f]];return n},o.prototype.rW=function(r){for(var n=0;n<r;n++)this.Eo[n]=[],this.kq-=this.wq[n],this.wq[n]=0},o.prototype.GD=function(r,n,a){var c=new A;if(c.Az(),c.Vy=a,a=o.YR(a),c.zx=a,a=o.WR(a),r+1>this.Eo.length)for(var p=0,f=Math.max(2,r+1);p<f;p++)this.Eo.push([]);(p=this.Eo[r][a])===void 0&&(p=new w,this.Eo[r][a]=p),c.uK=n,p.jN(c),this.wq[r]++,this.kq++,this.Ak=Math.max(this.Ak,r)},o.WR=function(r){return 0<r?h.P.truncate(Math.log(r)/Math.log(4)+.5):0},o.YR=function(r){var n=r.K();if(h.ba.zj(n))return r.I();if(n==33)return 1;if(n==197)return 4;if(h.ba.zd(n))return 2;throw h.i.Ra()},o.prototype.qe=function(){this.kK()},o}();h.xL=u}(q||(q={})),function(h){var A=function(w){function u(){return w!==null&&w.apply(this,arguments)||this}return gt(u,w),u.prototype.K=function(){return 1},u.prototype.W=function(o,r,n,a){return a===void 0?new h.xL(o,r,n):this.aQ(o,r,n,a)},u.prototype.aQ=function(o,r,n,a){return o=new h.$c([o,r]),this.W(o,n,a).next()},u.local=function(){return u.instance===null&&(u.instance=new u),u.instance},u.instance=null,u}(h.Ge);h.Ih=A}(q||(q={})),function(h){var A,w;(w=A||(A={}))[w.nextPath=0]="nextPath",w[w.nextSegment=1]="nextSegment",w[w.iterate=2]="iterate",A=function(){function u(o,r,n,a){this.Vs=new h.l,this.yT=o,this.zT=r,this.oq=a,this.vo=-1,this.tl=!1;var c=o.Cb;c!=null&&(c=a?c.Ao:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.pq=this.tl=!0,this.Yb=0,a?this.vo=r.ea():this.td=r.Ha()),this.tl||(c=r.Cb)!=null&&(c=a?c.Ao:c.Gb)!=null&&(this.Jc=!1,this.ra=n,this.Gb=c,this.zw=this.Gb.getIterator(),this.tl=!0,this.pq=!1,this.Yb=0,a?this.vo=o.ea():this.td=o.Ha()),this.tl||(this.ei=a?h.ta.gR(o,r,n,1<=o.qm(0),1<=r.qm(0)):h.ta.fR(o,r,n))}return u.prototype.next=function(){if(this.tl){if(this.Jc)return!1;for(var o=!0;o;)switch(this.Yb){case 0:o=this.pU();break;case 1:o=this.qU();break;case 2:o=this.Pz();break;default:throw h.i.ga("internal error")}return!this.Jc}return this.ei!=null&&this.ei.next()},u.prototype.pl=function(){return this.tl?this.pq?this.Gb.ka(this.Hs):this.oq?this.vo:this.td.xb():this.ei.pl(this.ei.Wf)},u.prototype.jl=function(){return this.tl?this.pq?this.oq?this.vo:this.td.xb():this.Gb.ka(this.Hs):this.ei.jl(this.ei.Bf)},u.prototype.oz=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Gb.AF(this.Hs):this.Vs:this.ei.oz(this.ei.Wf)},u.prototype.Wy=function(){if(!this.oq)throw h.i.ga("internal error");return this.tl?this.pq?this.Vs:this.Gb.AF(this.Hs):this.ei.Wy(this.ei.Bf)},u.prototype.pU=function(){return this.oq?--this.vo==-1?(this.Jc=!0,!1):(this.pq?this.zT.Tj(this.vo,this.Vs):this.yT.Tj(this.vo,this.Vs),this.zw.Zi(this.Vs,this.ra),this.Yb=2,!0):this.td.ab()?(this.Yb=1,!0):(this.Jc=!0,!1)},u.prototype.qU=function(){if(!this.td.Ia())return this.Yb=0,!0;var o=this.td.ia();return this.zw.Vo(o,this.ra),this.Yb=2,!0},u.prototype.Pz=function(){return this.Hs=this.zw.next(),this.Hs==-1&&(this.Yb=this.oq?0:1,!0)},u}(),h.am=A}(q||(q={})),function(h){(h=h.IL||(h.IL={}))[h.enumClosed=1]="enumClosed",h[h.enumHasNonlinearSegments=2]="enumHasNonlinearSegments",h[h.enumOGCStartPolygon=4]="enumOGCStartPolygon",h[h.enumCalcMask=4]="enumCalcMask"}(q||(q={})),function(h){h.KC=function(){function A(){}return A.ub=function(w,u,o,r,n,a,c,p,f){var m=[0,0,0],b=[0,0,0],S=[0,0,0],M=[0,0,0,0],T=new h.ha(0),k=new h.ha(0),C=new h.ha(0);if(c!=null||p!=null||f!=null)if(h.s.vi(u))h.$g.ub(w,o,r,n,a,c,p,f);else{n=h.F.ca(n),o=h.F.ca(o);var N=h.F.ca(n-o);if(h.s.$(r,a)&&(h.s.$(o,n)||h.s.$(h.s.R(r),1.570796326794897)))c!=null&&(c.u=0),p!=null&&(p.u=0),f!=null&&(f.u=0);else{if(h.s.$(r,-a)){if(h.s.$(h.s.R(r),1.570796326794897))return c!=null&&(c.u=2*h.F.Ch(w,u)),p!=null&&(p.u=0<r?h.F.ca(3.141592653589793-h.F.ca(n)):h.F.ca(n)),void(f!=null&&(f.u=0<r?h.F.ca(n):h.F.ca(3.141592653589793-h.F.ca(n))));h.s.$(h.s.R(N),3.141592653589793)&&(c!=null&&(c.u=2*h.F.Ch(w,u)),p!=null&&(p.u=0),f!=null&&(f.u=0))}else if(h.s.$(h.s.R(r),1.570796326794897)||h.s.$(h.s.R(a),1.570796326794897)||h.s.$(o,n)||h.s.$(h.s.R(N),3.141592653589793)||h.s.Dd(r))return void h.Yk.ub(w,u,o,r,n,a,c,p,f);var F=Math.sqrt(1-u);n=h.F.ca(n-o),o=0,h.F.el(1,u,r,o,0,T,k,C),m[0]=T.u,m[1]=k.u,m[2]=C.u,h.F.el(1,u,a,n,0,T,k,C),b[0]=T.u,b[1]=k.u,b[2]=C.u,S[0]=0,S[1]=0,S[2]=-1*u*h.F.n(1,u,r)*Math.sin(r),0>n?h.F.Yq(S,b,m,M,0):h.F.Yq(S,m,b,M,0),k=[0,0,0],C=[0,0,0];var D=[0,0,0];m=[0,0,0],T=[0,0,0];var j=Math.acos(M[2]/1),G=1-u,W=Math.tan(j),J=1+W*W/G,B=2*S[2]*W/G;for(G=(-B+(W=Math.sqrt(B*B-4*J*(S[2]*S[2]/G-1))))/(J*=2),B=(-B-W)/J,W=Math.tan(j),j=(G+B)/2,S=((J=W*G+S[2])+(W*B+S[2]))/2,W=h.F.hp(G-j,J-S),G=S/F*1.570796326794897,B=0;100>B&&(J=(J=h.F.w(u,G))*J/Math.cos(G)*(Math.sin(G)-S*J/(1-u)),!h.s.Dd(J));B++)G-=J;S=h.F.n(1,u,G)*Math.cos(G),W=1-W/(S=Math.sqrt((S-j)*(S+j))),W*=2-W,J=h.F.qn(k),j=h.F.qn(C),G=h.F.qn(D);var Q=h.F.Ut(D,k);B=h.F.Ut(D,C),h.F.yx(D,k,m),h.F.yx(D,C,T),k=Math.acos(Q/(G*J)),C=Math.acos(B/(G*j)),C*=h.s.Mb(1,h.F.Ut(m,T)),(1.570796326794897<=h.s.R(k)&&1.570796326794897<=h.s.R(C)||3.141592653589793<h.s.R(k-C))&&(k=(3.141592653589793-h.s.R(k))*h.s.Mb(1,k),C=(3.141592653589793-h.s.R(C))*h.s.Mb(1,C)),m=h.F.Sj(W,C),T=h.F.q(S,W,h.F.Sj(W,k)),m=h.F.q(S,W,m),m=h.s.R(m-T)*w,k=new h.ha(0),C=new h.ha(0),D=M[1]/1,D*=-h.s.Mb(1,N),T=Math.acos(D)*h.s.Mb(1,N),A.sf(w,u,o,r,m,T,k,C),h.s.$(n,k.u)&&h.s.$(a,C.u)||(W=h.F.hp(h.F.ca(n-k.u),a-C.u),A.sf(w,u,o,r,m,h.F.ca(T+3.141592653589793),k,C),(J=h.F.hp(h.F.ca(n-k.u),a-C.u))<W&&(T=h.F.ca(T+3.141592653589793))),k=[0,0,0,0],C=[0,0,0,0],W=[0,0,0],w=[0,0,0],o=[0,0,0],r=[0,0,0],D=[0,0,0],(S=[0,0,0])[0]=0,S[1]=0,S[2]=F,W[0]=0,W[1]=0,W[2]=0,h.F.Yq(W,S,b,k,0),h.s.Dd(a)?(w[0]=b[0],w[1]=b[1],w[2]=1,o[0]=1*Math.cos(n)-1*Math.sin(n),o[1]=1*Math.sin(n)+1*Math.cos(n)):(u=h.F.n(1,u,a)*Math.cos(a),w[0]=0,w[1]=0,b[2]+=Math.tan(1.570796326794897-h.s.R(a))*u*h.s.Mb(1,a),o[0]=u*Math.cos(n)-u*Math.sin(n),o[1]=u*Math.sin(n)+u*Math.cos(n)),o[2]=b[2],h.F.Yq(b,o,w,C,1),h.F.yx(C,k,r),h.F.yx(C,M,D),D=h.F.Ut(r,D)/(h.F.qn(r)*h.F.qn(D)),D*=h.s.Mb(1,N),n=Math.acos(D)*-h.s.Mb(1,N),(0<T&&0<n||0>T&&0>n)&&(n=h.F.ca(n+3.141592653589793)),c!=null&&(c.u=m),p!=null&&(p.u=T),f!=null&&(f.u=n)}}},A.sf=function(w,u,o,r,n,a,c,p){var f=[0,0,0],m=[0,0,0],b=[0,0,0],S=[0,0,0],M=[0,0,0],T=[0,0,0],k=[0,0,0],C=[0,0,0,0],N=new h.ha(0),F=new h.ha(0),D=new h.ha(0),j=new h.ha(0),G=new h.ha(0),W=new h.ha(0);if(c!=null&&p!=null)if(h.s.vi(u))h.$g.sf(w,o,r,n,a,c,p);else if(h.s.Dd(n))c!=null&&(c.u=o),p!=null&&(p.u=r);else if(a=h.F.ca(a),0>n&&(n=h.s.R(n),a=h.F.ca(a+3.141592653589793)),o=h.F.ca(o),r=h.F.ca(r),1.570796326794897<h.s.R(r)&&(o=h.F.ca(o+3.141592653589793),r=h.s.Mb(3.141592653589793,r)-r),h.s.$(h.s.R(r),1.570796326794897)||h.s.Dd(r)||h.s.Dd(a)||h.s.$(h.s.R(a),3.141592653589793))h.Yk.sf(w,u,o,r,n,a,c,p);else{var J=Math.sqrt(1-u);for(w=n/w,h.F.el(1,u,r,0,0,j,G,W),f[0]=j.u,f[1]=G.u,f[2]=G.u,k[0]=0,k[1]=0,k[2]=-1*u*h.F.n(1,u,r)*Math.sin(r),j=h.F.n(1,u,r),G=h.F.ca(1.570796326794897-a),W=Math.sin(G),n=Math.cos(r),r=Math.sin(r),M[0]=j*n-r*W,M[1]=Math.cos(G),M[2]=(1-u)*j*r+n*W,0>a?h.F.Yq(k,M,f,C,0):h.F.Yq(k,f,M,C,0),f=Math.acos(C[2]/1),C=Math.atan2(-C[1],-C[0]),r=1-u,G=1+(M=Math.tan(f))*M/r,r=(-(j=2*k[2]*M/r)+(M=Math.sqrt(j*j-4*G*(k[2]*k[2]/r-1))))/(G*=2),j=(-j-M)/G,M=Math.tan(f),f=(r+j)/2,k=((G=M*r+k[2])+(M*j+k[2]))/2,M=h.F.hp(r-f,G-k),J=k/J*1.570796326794897,r=0;100>r&&(j=(j=h.F.w(u,J))*j/Math.cos(J)*(Math.sin(J)-k*j/(1-u)),!h.s.Dd(j));r++)J-=j;J=h.F.n(1,u,J)*Math.cos(J),k=1-M/(J=Math.sqrt((J-f)*(J+f))),k*=2-k,T=Math.acos(h.F.Ut(T,m)/(h.F.qn(T)*h.F.qn(m))),T*=h.s.Mb(1,m[0]),a=(h.F.q(J,k,h.F.Sj(k,T))+w*h.s.Mb(1,a))/h.F.Ch(J,k),a=h.F.ca(1.570796326794897*a),a=h.F.Tq(k,a),h.F.n(J,k,a),M=h.F.ca(C+o),o=Math.cos(M),a=Math.sin(M),b[0]=S[0]*o+S[1]*-a,b[1]=S[0]*a+S[1]*o,b[2]=S[2],h.F.dO(u,b[0],b[1],b[2],D,F,N),c!=null&&(c.u=F.u),p!=null&&(p.u=D.u)}},A}()}(q||(q={})),function(h){var A=function(){function n(a){this.Za=null,this.xt=new h.h,this.yt=new h.h,this.g=a}return n.prototype.compare=function(a,c,p){return this.g.Hc(c,this.xt),this.g.Hc(a.ka(p),this.yt),this.xt.compare(this.yt)},n}(),w=function(){function n(a){this.Cf=new h.h,this.Ek=new h.h,this.g=a}return n.prototype.Fh=function(a){this.Cf.N(a)},n.prototype.compare=function(a,c){return this.g.Hc(a.ka(c),this.Ek),this.Cf.compare(this.Ek)},n}(),u=function(n){function a(c){var p=n.call(this,c.g,c.ra,!1)||this;return p.ib=c,p}return gt(a,n),a.prototype.compare=function(c,p,f){if(this.rg)return-1;var m=this.ib.Rd.Kn(this.ib.Th(p));c=c.ka(f);var b=this.ib.Rd.Kn(this.ib.Th(c));return this.Fm=f,this.LE(p,m,c,b)},a}(h.OC),o=function(n){function a(c){var p=n.call(this,c.g,c.ra)||this;return p.ib=c,p}return gt(a,n),a.prototype.compare=function(c,p){return this.rg?-1:(c=this.ib.Rd.Kn(this.ib.Th(c.ka(p))),this.Fm=p,this.ME(p,c))},a}(h.VL),r=function(){function n(){this.Nc=this.df=this.ko=this.Rd=this.nh=this.Ad=this.hb=this.g=null,this.Pg=!1,this.xh=this.Pm=this.ie=this.Hk=this.ph=this.Bk=this.Gf=this.ae=null,this.zh=this.Lq=this.OA=this.ra=0,this.Zv=this.Xn=!1,this.zo=new h.h,this.Ri=new h.h,this.hb=new h.ad(8),this.Ad=new h.ad(5),this.nh=new h.cu,this.Rd=new h.cu,this.Pg=!1,this.xh=new h.h,this.xh.na(0,0),this.ra=0,this.zh=-1,this.Xn=!1,this.g=null,this.df=new h.Zj,this.Nc=new h.Zj,this.ph=new h.ja(0),this.Hk=new h.NC,this.Gf=new h.ja(0),this.Bk=new h.ja(0),this.ko=new h.Ta}return n.prototype.HX=function(a,c){var p=new h.Ed;return p.UB(),a.Pc(p),this.gr(a),this.Xn=!1,this.ra=c,this.OA=c*c,c=this.dC(),a.Pc(p),c||(this.kQ(),c||this.dC()),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null,this.Xn},n.prototype.LX=function(a,c){this.gr(a),this.Xn=!1,this.ra=c,this.OA=c*c,this.Pg=!1,this.dC(),this.Pg||(this.Pg=a.Ip(c,!0,!1)==1),this.zh!=-1&&(this.g.Ud(this.zh),this.zh=-1),this.g=null},n.prototype.pg=function(a,c){return this.hb.U(a,0+c)},n.prototype.FB=function(a,c,p){this.hb.T(a,0+c,p)},n.prototype.Th=function(a){return this.hb.U(a,2)},n.prototype.QW=function(a,c){this.hb.T(a,2,c)},n.prototype.LF=function(a,c){return this.hb.U(a,3+c)},n.prototype.Rp=function(a){return this.hb.U(a,7)},n.prototype.Rl=function(a,c){this.hb.T(a,7,c)},n.prototype.Tp=function(a,c){return this.hb.U(a,3+this.Qp(a,c))},n.prototype.hr=function(a,c,p){this.hb.T(a,3+this.Qp(a,c),p)},n.prototype.GR=function(a,c){return this.hb.U(a,5+this.Qp(a,c))},n.prototype.jr=function(a,c,p){this.hb.T(a,5+this.Qp(a,c),p)},n.prototype.Ur=function(a){return this.Ad.U(a,0)},n.prototype.MW=function(a,c){this.Ad.T(a,0,c)},n.prototype.$y=function(a){return this.Ad.U(a,4)},n.prototype.er=function(a,c){this.Ad.T(a,4,c)},n.prototype.kl=function(a){return this.Ad.U(a,1)},n.prototype.nn=function(a,c){this.Ad.T(a,1,c)},n.prototype.Zy=function(a){return this.Ad.U(a,3)},n.prototype.Ft=function(a,c){this.Ad.T(a,3,c)},n.prototype.$m=function(a){var c=this.Ad.De(),p=this.nh.Rh();return this.MW(c,p),a!=-1?(this.nh.addElement(p,a),this.g.Sa(a,this.zh,c),this.er(c,this.g.Va(a))):this.er(c,-1),c},n.prototype.BP=function(a){this.Ad.kd(a)},n.prototype.ED=function(a,c){this.nh.addElement(this.Ur(a),c),this.g.Sa(c,this.zh,a)},n.prototype.ot=function(a){var c=this.hb.De(),p=this.Rd.Rh();return this.QW(c,p),a!=-1&&this.Rd.addElement(p,a),c},n.prototype.FD=function(a,c){this.Rd.addElement(this.Th(a),c)},n.prototype.Wu=function(a){this.hb.kd(a),0<=(a=this.ph.fF(a))&&this.ph.KV(a)},n.prototype.jj=function(a,c){if(this.pg(a,0)==-1)this.FB(a,0,c);else{if(this.pg(a,1)!=-1)throw h.i.Ra();this.FB(a,1,c)}this.gy(a,c)},n.prototype.gy=function(a,c){var p=this.kl(c);if(p!=-1){var f=this.Tp(p,c);this.jr(f,c,a),this.hr(a,c,f),this.hr(p,c,a),this.jr(a,c,p)}else this.jr(a,c,a),this.hr(a,c,a),this.nn(c,a)},n.prototype.Qp=function(a,c){return this.pg(a,0)==c?0:1},n.prototype.Zm=function(a,c){var p,f=this.Zy(c);if(f!=-1&&(this.df.wd(f,-1),this.Ft(c,-1)),(f=this.kl(c))!=-1){var m=p=f;do{var b=!1,S=this.Qp(p,c),M=this.LF(p,S);if(this.pg(p,S+1&1)==a){if(this.Zu(p),this.Rd.eh(this.Th(p)),this.Wu(p),p==M){f=-1;break}f==p&&(f=this.kl(c),m=M,b=!0)}p=M}while(p!=m||b);if(f!=-1){do S=this.Qp(p,c),M=this.LF(p,S),this.FB(p,S,a),p=M;while(p!=m);(p=this.kl(a))!=-1?(m=this.Tp(p,a),b=this.Tp(f,a),m==p?(this.nn(a,f),this.gy(p,a),this.nn(a,p)):b==f&&this.gy(f,a),this.hr(f,a,m),this.jr(m,a,f),this.hr(p,a,b),this.jr(b,a,p)):this.nn(a,f)}}for(f=this.Ur(a),p=this.Ur(c),m=this.nh.sc(p);m!=-1;m=this.nh.lb(m))this.g.Sa(this.nh.ka(m),this.zh,a);this.nh.Cy(f,p),this.BP(c)},n.prototype.MT=function(a,c){var p=this.pg(a,0),f=this.pg(a,1),m=this.pg(c,0),b=this.pg(c,1);this.Rd.Cy(this.Th(a),this.Th(c)),c==this.kl(p)&&this.nn(p,a),c==this.kl(f)&&this.nn(f,a),this.Zu(c),this.Wu(c),p==m&&f==b||f==m&&p==b||(this.In(p,this.zo),this.In(m,this.Ri),this.zo.rb(this.Ri)?(p!=m&&this.Zm(p,m),f!=b&&this.Zm(f,b)):(f!=m&&this.Zm(f,m),p!=b&&this.Zm(p,b)))},n.prototype.Zu=function(a){var c=this.pg(a,1);this.YE(a,this.pg(a,0)),this.YE(a,c)},n.prototype.YE=function(a,c){var p=this.Tp(a,c),f=this.GR(a,c),m=this.kl(c);p!=a?(this.hr(f,c,p),this.jr(p,c,f),m==a&&this.nn(c,p)):this.nn(c,-1)},n.prototype.QD=function(a,c,p){var f=this.Rd.sc(a),m=this.Rd.ka(f);a=this.Ie(m);var b=this.Ie(this.g.V(m));for(this.g.lr(m,c,p,!0),f=this.Rd.lb(f);f!=-1;f=this.Rd.lb(f)){m=this.Rd.ka(f);var S=this.Ie(m)==a;this.g.lr(m,c,p,S)}f=c.Xp(p,0).ac(),c=c.Xp(p,c.ql(p)-1).xc(),this.vK(a,f),this.vK(b,c)},n.prototype.TE=function(a,c,p){var f=this.Th(a),m=this.pg(a,0),b=this.pg(a,1),S=this.ot(-1);for(this.ph.add(S),this.Rl(S,-3),this.Gf.add(S),this.jj(S,m),a=1,c=c.ql(p);a<c;a++)p=this.$m(-1),this.Bk.add(p),this.Gf.add(p),this.jj(S,p),S=this.ot(-1),this.ph.add(S),this.Rl(S,-3),this.Gf.add(S),this.jj(S,p);for(this.jj(S,b),f=this.Rd.sc(f);f!=-1;f=this.Rd.lb(f))if(b=this.Rd.ka(f),this.Ie(b)==m){a=0;do 0<a&&(S=this.Gf.get(a-1),this.ED(S,b),this.$y(S)==-1&&this.er(S,this.g.Va(b))),S=this.Gf.get(a),a+=2,this.FD(S,b),b=this.g.V(b);while(a<this.Gf.size)}else{a=this.Gf.size-1;do a<this.Gf.size-2&&(S=this.Gf.get(a+1),this.ED(S,b),0>this.$y(S)&&this.er(S,this.g.Va(b))),S=this.Gf.get(a),a-=2,this.FD(S,b),b=this.g.V(b);while(0<=a)}this.Gf.clear(!1)},n.prototype.Ie=function(a){return this.g.Qa(a,this.zh)},n.prototype.MI=function(a,c,p){var f=this.pg(c,0),m=new h.h;this.In(f,m);var b=new h.h,S=this.pg(c,1);this.In(S,b);var M=p.ql(a),T=p.Xp(a,0),k=new h.h;if(T.$p(k),!m.rb(k)){if(!this.Pg){var C=m.compare(this.xh);0>C*(k=k.compare(this.xh))&&(this.Pg=!0)}this.pF(f,this.Gf),this.Bk.add(f)}for(!this.Pg&&1<M&&(C=m.compare(b),T=T.xc(),(m.compare(T)!=C||T.compare(b)!=C||0>T.compare(this.xh))&&(this.Pg=!0)),a=(T=p.Xp(a,M-1)).xc(),b.rb(a)||(this.Pg||0>(C=b.compare(this.xh))*(k=a.compare(this.xh))&&(this.Pg=!0),this.pF(S,this.Gf),this.Bk.add(S)),this.Gf.add(c),b=0,S=this.Gf.size;b<S;b++)a=this.Gf.get(b),p=this.Rp(a),h.ad.FG(p)&&(this.Nc.wd(p,-1),this.Rl(a,-1)),a!=c&&this.Rp(a)!=-3&&(this.ph.add(a),this.Rl(a,-3));this.Gf.clear(!1)},n.prototype.fO=function(a,c){this.ae.compare(this.Nc,this.Nc.ka(a),c),this.ae.rg&&(this.ae.Mr(),this.iF(a,c))},n.prototype.iF=function(a,c){this.Xn=!0,a=this.Nc.ka(a),c=this.Nc.ka(c);var p=this.Rd.Kn(this.Th(a)),f=this.Rd.Kn(this.Th(c)),m=this.g.cc(p);m==null&&(this.ie==null&&(this.ie=new h.zb),this.g.fd(p,this.ie),m=this.ie),(p=this.g.cc(f))==null&&(this.Pm==null&&(this.Pm=new h.zb),this.g.fd(f,this.Pm),p=this.Pm),this.Hk.Po(m),this.Hk.Po(p),this.Hk.Fa(this.ra,!0)&&(this.Pg=!0),this.bK(a,c,-1,this.Hk),this.Hk.clear()},n.prototype.AQ=function(a,c){this.Xn=!0,c=this.Nc.ka(c);var p=this.Rd.Kn(this.Th(c)),f=this.g.cc(p);f==null&&(this.ie==null&&(this.ie=new h.zb),this.g.fd(p,this.ie),f=this.ie),p=this.vF(a),this.Hk.Po(f),this.g.Xi(p,this.ko),this.Hk.Fz(this.ra,this.ko,!0),this.bK(c,-1,a,this.Hk),this.Hk.clear()},n.prototype.qS=function(){if(this.ph.size!=0)for(;this.ph.size!=0;){if(this.ph.size>Math.max(100,this.g.gd)){this.ph.clear(!1),this.Pg=!0;break}var a=this.ph.Gc();this.ph.Jf(),this.Rl(a,-1),this.OS(a)!=-1&&this.pS(a),this.Wn=!1}},n.prototype.pS=function(a){if(this.Wn){var c=this.Nc.Bu(this.GH,this.AH,a,!0);this.Wn=!1}else c=this.Nc.DD(a);c==-1?this.MT(this.Nc.ka(this.Nc.zF()),a):(this.Rl(a,c),this.ae.rg&&(this.ae.Mr(),this.iF(this.ae.Fm,c)))},n.prototype.OS=function(a){var c=this.pg(a,0);if(a=this.pg(a,1),this.In(c,this.zo),this.In(a,this.Ri),h.h.zc(this.zo,this.Ri)<=this.OA)return this.Pg=!0,-1;var p=this.zo.compare(this.xh),f=this.Ri.compare(this.xh);return 0>=p&&0<f?a:0>=f&&0<p?c:-1},n.prototype.iQ=function(){var a=new h.ja(0);a.Jb(this.g.gd);for(var c=this.g.$q(),p=c.next();p!=-1;p=c.next())this.g.Qa(p,this.zh)!=-1&&a.add(p);this.g.nx(a,a.size),this.jQ(a)},n.prototype.jQ=function(a){this.df.clear(),this.df.Ee(a.size),this.df.Wo(new A(this.g));var c=new h.h;c.Sc();for(var p=-1,f=new h.h,m=0,b=a.size;m<b;m++){var S=a.get(m);this.g.Hc(S,f),f.rb(c)?(S=this.g.Qa(S,this.zh),this.Zm(p,S)):(p=this.Ie(S),this.g.Hc(S,c),S=this.df.yn(S),this.Ft(p,S))}},n.prototype.kQ=function(){var a=new h.ja(0);a.Jb(this.g.gd);for(var c=this.df.sc(-1);c!=-1;c=this.df.lb(c))a.add(this.df.ka(c));this.df.clear(),this.g.nx(a,a.size),c=0;for(var p=a.size;c<p;c++){var f=a.get(c),m=this.Ie(f);f=this.df.yn(f),this.Ft(m,f)}},n.prototype.pF=function(a,c){var p=this.kl(a);if(p!=-1){var f=p;do h.ad.FG(this.Rp(f))&&c.add(f),f=this.Tp(f,a);while(f!=p)}},n.prototype.vK=function(a,c){for(a=this.nh.sc(this.Ur(a));a!=-1;a=this.nh.lb(a))this.g.mf(this.nh.ka(a),c)},n.prototype.bK=function(a,c,p,f){this.Zu(a),c!=-1&&this.Zu(c),this.MI(0,a,f),c!=-1&&this.MI(1,c,f),p!=-1&&(f.Cf.D(this.zo),this.In(p,this.Ri),this.Ri.rb(this.zo)||this.Bk.add(p)),p=0;for(var m=this.Bk.size;p<m;p++){var b=this.Bk.get(p),S=this.Zy(b);S!=-1&&(this.df.wd(S,-1),this.Ft(b,-1))}for(p=this.Th(a),m=c!=-1?this.Th(c):-1,this.QD(p,f,0),c!=-1&&this.QD(m,f,1),this.TE(a,f,0),c!=-1&&this.TE(c,f,1),this.Rd.eh(p),this.Wu(a),c!=-1&&(this.Rd.eh(m),this.Wu(c)),p=0,m=this.Bk.size;p<m;p++)(b=this.Bk.get(p))==this.Lq&&(this.Zv=!0),(S=this.Zy(b))==-1&&((S=this.df.DD(this.vF(b)))==-1?(a=this.Ie(this.df.ka(this.df.zF())),this.Zm(a,b)):this.Ft(b,S));this.Bk.clear(!1)},n.prototype.In=function(a,c){this.g.YF(this.$y(a),c)},n.prototype.vF=function(a){return this.nh.Kn(this.Ur(a))},n.prototype.dC=function(){this.Zv=!1,this.Lq=-1,this.ae==null&&(this.Nc.Tv=!1,this.ae=new u(this),this.Nc.$n=this.ae);var a=new h.ja(0),c=null,p=null;this.AH=this.GH=-1,this.Wn=!1;for(var f=this.df.sc(-1);f!=-1;){this.Wn=!1;var m=this.df.ka(f);this.Lq=this.Ie(m),this.g.Hc(m,this.xh),this.ae.UJ(this.xh.y,this.xh.x);var b=this.kl(this.Lq),S=b==-1;if(!S){m=b;do{var M=this.Rp(m);M==-1?(this.ph.add(m),this.Rl(m,-3)):M!=-3&&a.add(M),m=this.Tp(m,this.Lq)}while(m!=b)}if(0<a.size){for(this.Wn=a.size==1&&this.ph.size==1,S=0,b=a.size;S<b;S++)m=this.Nc.ka(a.get(S)),this.Rl(m,-2);var T=-2,k=-2;for(S=0,b=a.size;S<b;S++){if(M=a.get(S),T==-2){var C=this.Nc.xe(M);C!=-1?(m=this.Nc.ka(C),(m=this.Rp(m))!=-2&&(T=C)):T=-1}if(k==-2&&((M=this.Nc.lb(M))!=-1?(m=this.Nc.ka(M),(m=this.Rp(m))!=-2&&(k=M)):k=-1),T!=-2&&k!=-2)break}for(S=0,b=a.size;S<b;S++)M=a.get(S),m=this.Nc.ka(M),this.Nc.wd(M,-1),this.Rl(m,-1);a.clear(!1),this.GH=T!=-1?T:-1,this.AH=k!=-1?k:-1,T!=-1&&k!=-1?this.Wn||this.fO(T,k):T==-1&&k==-1&&(this.Wn=!1)}else S&&(c==null&&(c=new o(this)),c.Fh(this.xh),this.Nc.oJ(c),c.rg&&(c.Mr(),this.AQ(this.Lq,c.Fm)));this.qS(),this.Zv?(this.Zv=!1,p==null&&(p=new w(this.g)),p.Fh(this.xh),f=this.df.oJ(p)):f=this.df.lb(f)}return this.Xn},n.prototype.gr=function(a){for(this.g=a,this.zh=this.g.Hd(),this.hb.Ee(a.gd+32),this.Ad.Ee(a.gd),this.nh.Bt(a.gd),this.nh.hn(a.gd),this.Rd.Bt(a.gd+32),this.Rd.hn(a.gd+32),a=this.g.ld;a!=-1;a=this.g.ve(a))if(h.ba.Ic(this.g.jc(a)))for(M=this.g.Ob(a);M!=-1;M=this.g.Sb(M)){var c=this.g.Ka(M),p=this.g.Ya(M),f=this.$m(p),m=this.ot(p);for(this.jj(m,f),T=this.g.V(p),p=0,c-=2;p<c;p++){var b=this.g.V(T),S=this.$m(T);this.jj(m,S),m=this.ot(T),this.jj(m,S),T=b}this.g.ec(M)?(S=this.$m(T),this.jj(m,S),m=this.ot(T),this.jj(m,S),this.jj(m,f)):(S=this.$m(T),this.jj(m,S))}else for(var M=this.g.Ob(a);M!=-1;M=this.g.Sb(M)){var T=this.g.Ya(M);for(f=0,c=this.g.Ka(M);f<c;f++)this.$m(T),T=this.g.V(T)}this.iQ()},n}();h.LC=r}(q||(q={})),function(h){var A=function(w){function u(o,r,n){var a=w.call(this)||this;if(o!==void 0)if(n!==void 0){a.description=h.ee.og();var c=new h.Od;c.L(o,r,n),a.YB(c)}else if(r!==void 0)a.description=h.ee.og(),a.Db(o,r);else if(o instanceof h.ua)a.description=o;else if(o instanceof h.h)a.description=h.ee.og(),a.Db(o);else{if(!(o instanceof u))throw h.i.O();a.description=o.description,a.Db(o.Ng(),o.kh()),o.la!==null&&(a.la=o.la.slice(0))}else a.description=h.ee.og();return a}return gt(u,w),u.prototype.D=function(o){if(o===void 0){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return(o=new h.h).na(this.la[0],this.la[1]),o}if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");o.na(this.la[0],this.la[1])},u.prototype.Db=function(o,r){typeof o=="number"?(this.wc(),this.la==null&&this.up(),this.la[0]=o,this.la[1]=r):(this.wc(),this.Db(o.x,o.y))},u.prototype.xz=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");var o=new h.Od;return o.x=this.la[0],o.y=this.la[1],o.z=this.description.cG()?this.la[2]:h.ua.te(1),o},u.prototype.YB=function(o){this.wc();var r=this.hasAttribute(1);r||h.ua.xG(1,o.z)||(this.se(1),r=!0),this.la==null&&this.up(),this.la[0]=o.x,this.la[1]=o.y,r&&(this.la[2]=o.z)},u.prototype.Ng=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[0]},u.prototype.XB=function(o){this.setAttribute(0,0,o)},u.prototype.kh=function(){if(this.Bc())throw h.i.ga("This operation should not be performed on an empty geometry.");return this.la[1]},u.prototype.VJ=function(o){this.setAttribute(0,1,o)},u.prototype.VR=function(){return this.Vc(1,0)},u.prototype.oX=function(o){this.setAttribute(1,0,o)},u.prototype.tR=function(){return this.Vc(2,0)},u.prototype.ZW=function(o){this.setAttribute(2,0,o)},u.prototype.Fc=function(){return this.sF(3,0)},u.prototype.FJ=function(o){this.setAttribute(3,0,o)},u.prototype.Vc=function(o,r){var n=this.description.Qf(o);return 0<=n?this.la[this.description.ak(n)+r]:h.ua.te(o)},u.prototype.sF=function(o,r){var n=this.description.Qf(o);return 0<=n?this.la[this.description.ak(n)+r]:h.ua.te(o)},u.prototype.setAttribute=function(o,r,n){this.wc();var a=this.description.Qf(o);0>a&&(this.se(o),a=this.description.Qf(o)),this.la==null&&this.up(),this.la[this.description.ak(a)+r]=n},u.prototype.K=function(){return 33},u.prototype.Eb=function(){return 0},u.prototype.Pa=function(){this.wc(),this.la!=null&&(this.la[0]=NaN,this.la[1]=NaN)},u.prototype.un=function(o){if(this.la!=null){for(var r=h.ee.Kw(o,this.description),n=[],a=0,c=0,p=o.Ba;c<p;c++){var f=o.qd(c),m=h.ua.Wa(f);if(r[c]==-1){var b=h.ua.te(f);for(f=0;f<m;f++)n[a]=b,a++}else for(b=this.description.ak(r[c]),f=0;f<m;f++)n[a]=this.la[b],a++,b++}this.la=n}this.description=o},u.prototype.up=function(){this.fJ(this.description.Be.length),u.XD(this.description.Be,this.la,this.description.Be.length),this.la[0]=NaN,this.la[1]=NaN},u.prototype.Pc=function(o){if(o instanceof h.Ed){if(!this.Bc()){var r=this.D();o.Gh(r,r),this.Db(r)}}else this.Bc()||(this.se(1),r=this.xz(),this.YB(o.gp(r)))},u.prototype.copyTo=function(o){if(o.K()!=33)throw h.i.O();o.wc(),this.la==null?(o.Pa(),o.la=null,o.kg(this.description)):(o.kg(this.description),o.fJ(this.description.Be.length),u.XD(this.la,o.la,this.description.Be.length))},u.prototype.Ja=function(){return new u(this.description)},u.prototype.B=function(){return this.Bc()},u.prototype.Bc=function(){return this.la==null||isNaN(this.la[0])||isNaN(this.la[1])},u.prototype.dn=function(o){o.Pa(),this.description!=o.description&&o.kg(this.description),o.$b(this)},u.prototype.A=function(o){this.Bc()?o.Pa():(o.v=this.la[0],o.G=this.la[1],o.C=this.la[0],o.H=this.la[1])},u.prototype.Ro=function(o){if(this.Bc())o.Pa();else{var r=this.xz();o.v=r.x,o.G=r.y,o.Xe=r.z,o.C=r.x,o.H=r.y,o.Dg=r.z}},u.prototype.Vg=function(o,r){var n=new h.Oc;return this.Bc()?(n.Pa(),n):(o=this.Vc(o,r),n.pa=o,n.wa=o,n)},u.prototype.fJ=function(o){if(this.la==null)this.la=h.P.lg(o);else if(this.la.length<o){for(var r=this.la.slice(0),n=this.la.length;n<o;n++)r[n]=0;this.la=r}},u.XD=function(o,r,n){if(0<n)for(n=0;n<o.length;n++)r[n]=o[n]},u.prototype.Nb=function(o){if(o==this)return!0;if(!(o instanceof u)||this.description!=o.description)return!1;if(this.Bc())return!!o.Bc();for(var r=0,n=this.description.Be.length;r<n;r++)if(this.la[r]!=o.la[r])return!1;return!0},u.prototype.dc=function(){var o=this.description.dc();if(!this.Bc())for(var r=0,n=this.description.Be.length;r<n;r++){var a=this.la[r];a=h.P.truncate(a^a>>>32),o=h.P.Vh(a,o)}return o},u.prototype.mg=function(){return null},u}(h.ba);h.Ta=A}(q||(q={})),function(h){var A=function(){function w(u,o,r){u!==void 0&&(this.x=u,this.y=o,this.z=r)}return w.construct=function(u,o,r){var n=new w;return n.x=u,n.y=o,n.z=r,n},w.prototype.L=function(u,o,r){this.x=u,this.y=o,this.z=r},w.prototype.lx=function(){this.z=this.y=this.x=0},w.prototype.normalize=function(){var u=this.length();u==0&&(this.x/=u,this.y/=u,this.z/=u)},w.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},w.prototype.sub=function(u){return new w(this.x-u.x,this.y-u.y,this.z-u.z)},w.prototype.Ag=function(u){new w(this.x*u,this.y*u,this.z*u)},w.prototype.Sh=function(u){return this.x*u.x+this.y*u.y+this.z*u.z},w}();h.Od=A}(q||(q={})),function(h){var A=function(){function w(u,o,r){this.Iw=this.xA=null,this.Yf=o,this.xT=o.y-r,this.wT=o.y+r,this.Gw=0,this.Zz=u,this.ra=r,this.JT=r*r,this.$z=r!=0,this.Nv=!1}return w.prototype.result=function(){return this.Gw!=0?1:0},w.prototype.TM=function(u){return u=u.ic(u.fe(this.Yf,!1)),h.h.zc(u,this.Yf)<=this.JT},w.prototype.$E=function(u){if(!this.$z&&(this.Zz&&this.Yf.rb(u.ac())||this.Yf.rb(u.xc())))this.Nv=!0;else if(u.oa==this.Yf.y&&u.oa==u.ma){if(this.Zz&&!this.$z){var o=Math.max(u.sa,u.qa);this.Yf.x>Math.min(u.sa,u.qa)&&this.Yf.x<o&&(this.Nv=!0)}}else{var r=!1;if(o=Math.max(u.sa,u.qa),this.Yf.x>o?r=!0:this.Yf.x>=Math.min(u.sa,u.qa)&&(r=0<u.fq(!0,this.Yf.y,this.Iw,null)&&this.Iw[0]<=this.Yf.x),r){if(this.Yf.y==u.ac().y){if(this.Yf.y<u.xc().y)return}else if(this.Yf.y==u.xc().y&&this.Yf.y<u.ac().y)return;this.Gw=this.Zz?1^this.Gw:this.Gw+(u.ac().y>u.xc().y?1:-1)}}},w.prototype.LI=function(u){var o=u.Vg(0,1);if(o.pa>this.wT||o.wa<this.xT)return!1;if(this.$z&&this.TM(u))return!0;if(o.pa>this.Yf.y||o.wa<this.Yf.y)return!1;if(this.xA==null&&(this.xA=[null,null,null,null,null]),this.Iw==null&&(this.Iw=[0,0,0]),0<(o=u.ZF()))for(u=0;u<o;u++){var r=this.xA[u].get();if(this.$E(r),this.Nv)return!0}else if(this.$E(u),this.Nv)return!0;return!1},w.JM=function(u,o,r){for(o=new w(u.Jn()==0,o,r),u=u.Ha();u.ab();)for(;u.Ia();)if(r=u.ia(),o.LI(r))return-1;return o.result()},w.KM=function(u,o,r,n){var a=new h.l;u.yc(a),a.X(n,n);var c=new w(u.Jn()==0,r,n);u=u.Ha();var p=new h.l;for(p.L(a),p.C=r.x+n,p.G=r.y-n,p.H=r.y+n,n=(r=o.GF(p,n)).next();n!=-1;n=r.next())if(u.Wb(o.ka(n)),u.Ia()&&(n=u.ia(),c.LI(n)))return-1;return c.result()},w.ym=function(u,o,r){if(u.B())return 0;var n=new h.l;if(u.yc(n),n.X(r,r),!n.contains(o))return 0;if((n=u.Cb)!=null){var a=n.Gk;if(a!=null){if((a=a.To(o.x,o.y))==1)return 1;if(a==0)return 0}if((n=n.Gb)!=null)return w.KM(u,n,o,r)}return w.JM(u,o,r)},w.US=function(u,o,r){return o.B()?0:w.ym(u,o.D(),r)},w.Ol=function(u,o){return!(16>(u=u.I()))&&2*u+Math.log(u)/Math.log(2)*o<1*u*o},w}();h.Fg=A}(q||(q={})),function(h){var A=function(w){function u(o){return w.call(this,!0,o)||this}return gt(u,w),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 2},u.prototype.K=function(){return 1736},u.prototype.rG=function(o,r,n){this.CS(o,r,n)},u.prototype.jR=function(){this.zR()},u}(h.Wk);h.Ea=A}(q||(q={})),function(h){(function(A){A[A.PiPOutside=0]="PiPOutside",A[A.PiPInside=1]="PiPInside",A[A.PiPBoundary=2]="PiPBoundary"})(h.LL||(h.LL={})),h.jd=function(){function A(){}return A.EG=function(w,u,o){return(w=h.Fg.US(w,u,o))==0?0:w==1?1:2},A.Zd=function(w,u,o){return(w=h.Fg.ym(w,u,o))==0?0:w==1?1:2},A.OX=function(w,u,o,r,n){if(u.length<o||n.length<o)throw h.i.O();for(var a=0;a<o;a++)n[a]=A.Zd(w,u[a],r)},A.mK=function(w,u,o,r,n){if(w.K()==1736)A.OX(w,u,o,r,n);else{if(w.K()!=197)throw h.i.ga("invalid_call");var a=new h.l;w.A(a),A.UM(a,u,o,r,n)}},A.UM=function(w,u,o,r,n){if(u.length<o||n.length<o)throw h.i.O();if(w.B())for(r=0;r<o;r++)n[r]=0;else for(w.X(.5*-r,.5*-r),w.X(.5*r,.5*r),r=0;r<o;r++)w.contains(u[r])?n[r]=1:w.contains(u[r])?n[r]=2:n[r]=0},A.QX=function(w,u,o,r,n){for(var a=0;a<o;a++)n[a]=w.ss(u[a],r)?2:0},A.PX=function(w,u,o,r,n){var a=w.Cb,c=null;a!=null&&(c=a.Gk),a=o;for(var p=0;p<o;p++)if(n[p]=1,c!=null){var f=u[p];c.To(f.x,f.y)==0&&(n[p]=0,a--)}if(a!=0)for(w=w.Ha();w.ab()&&a!=0;)for(;w.Ia()&&a!=0;)for(c=w.ia(),p=0;p<o&&a!=0;p++)n[p]==1&&c.ss(u[p],r)&&(n[p]=2,a--);for(p=0;p<o;p++)n[p]==1&&(n[p]=0)},A.nK=function(w,u,o,r,n){var a=w.K();if(a==1607)A.PX(w,u,o,r,n);else{if(!h.ba.zd(a))throw h.i.ga("Invalid call.");A.QX(w,u,o,r,n)}},A}()}(q||(q={})),function(h){var A=function(w){function u(o,r){if(arguments.length==2){var n=w.call(this,!1,o.description)||this;n.nf(o),n.lineTo(r)}else n=w.call(this,!1,o)||this;return n}return gt(u,w),u.prototype.Ja=function(){return new u(this.description)},u.prototype.Eb=function(){return 1},u.prototype.K=function(){return 1607},u.prototype.rG=function(o,r,n){this.DS(o,r,n)},u}(h.Wk);h.Ua=A}(q||(q={})),function(h){var A=function(){function w(){}return w.prototype.progress=function(){return!0},w.Bp=function(u){if(u!=null&&!u.progress(-1,-1))throw h.i.QC()},w}();h.np=A}(q||(q={})),function(h){var A;(A=h.JK||(h.JK={}))[A.clipWithInputHorizon=1]="clipWithInputHorizon",A[A.clipWithOutputHorizon=2]="clipWithOutputHorizon";var w=function(){function r(){this.Mg=3,this.Xu=this.Lr=NaN}return r.prototype.HW=function(n){this.KB(1,n)},r.prototype.IW=function(n){this.KB(2,n)},r.prototype.aS=function(){return this.ks(1)},r.prototype.bS=function(){return this.ks(2)},r.prototype.KB=function(n,a){this.Mg=a?this.Mg|n:this.Mg&~n},r.prototype.ks=function(n){return(this.Mg&n)!=0},r.prototype.Pf=function(){var n=new r;return n.Lr=this.Lr,n.Xu=this.Xu,n.Mg=this.Mg,n},r}();h.sC=w,function(r){r[r.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon",r[r.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"}(h.KK||(h.KK={}));var u=function(){function r(){this.Mg=0}return r.prototype.KB=function(n,a){this.Mg=a?this.Mg|n:this.Mg&~n},r.prototype.ks=function(n){return(this.Mg&n)!=0},r.ig=function(n){var a=new r;return a.Mg=n.Mg,a},r.prototype.gM=function(n){this.Mg=n.Mg},r}();h.sY=u;var o=function(){function r(n,a,c){this.ef=n,this.Zf=a,this.Vf=new h.l,this.Vf.L(c),this.sT=n.dc()+a.dc()+this.Vf.dc().toString()}return r.prototype.dc=function(){return this.sT},r.prototype.Nb=function(n){return this==n||this.ef.Nb(n.ef)&&this.Zf.Nb(n.Zf)&&this.Vf.Nb(n.Vf)},r}();h.xY=o,o=function(){function r(){this.Zf=this.ef=null,this.lH=new w,this.mH=new u,this.yw=this.Xf=null,this.ow=this.Un=!0}return r.Pr=function(n,a,c,p){var f;p===void 0&&(p=null),f===void 0&&(f=null);var m=new r;return m.rp(n,a,c,p,f),m},r.prototype.rp=function(n,a,c,p,f){if(n==null||a==null)throw h.i.ga("invalidArgument");if(this.ef=n,this.Zf=a,this.ow=this.Un=!1,p!=null&&(this.lH=p.Pf()),f!=null&&this.mH.gM(f),f=!1,a.Tb()==1&&p!=null&&(p=p.Lr,isNaN(p)||p==0||(f=!0)),n==a)this.Un=!f,this.ow=!0;else{p=n.Tb();var m=a.Tb();if(p==0||m==0){if(c!=null)throw h.i.O();n.Id()!=null&&a.Id()!=null&&(this.Un=n.Id().Nb(a.Id()))}else p==3||m==3?this.Un=n.Nb(a):this.ef.dS(this.Zf)?this.Un=!f:this.Un=!1,this.Xf=c,this.Xf!=null&&this.Xf.ix(),this.ow=(this.Xf==null||this.Xf.count()==0)&&this.ef.tc().Nb(this.Zf.tc())}this.gY()},r.prototype.isIdentity=function(){return this.Un},r.prototype.hR=function(){return this.lH.Pf()},r.prototype.Nb=function(n){return n==this||!!(n instanceof r&&this.ef.Nb(n.ef)&&this.Zf.Nb(n.Zf))&&(this.Xf==n.Xf||!(this.Xf==null||n.Xf==null||!this.Xf.Nb(n.Xf)))},r.prototype.gY=function(){this.yw=new h.du(this)},r}(),h.xr=o}(q||(q={})),function(h){var A=function(){function w(){}return w.Ep=function(u){return u*w.gW},w.mx=function(u,o){return w.aP(o-u)},w.bP=function(u){return-360<=u&&720>u?(0>u?u+=360:360<=u&&(u-=360),u):(0>(u=h.mc.LK(u))&&(u+=360),u)},w.aP=function(u){return 180<(u=w.bP(u))&&(u-=360),u},w.gW=57.29577951308232,w}();h.sr=A,h.Jh=function(){function w(){}return w.nj=function(u,o){var r=new h.l;u.A(r);var n=h.cb.ih(o),a=new h.l;return a.L(n),a.v=r.v,a.C=r.C,a.X(.01*a.da(),0),o=h.ta.Xd(o,r,!1),a.contains(r)?u:h.Vd.clip(u,a,o,0)},w.ms=function(u,o,r,n,a){if(!h.cb.Xc(o))throw h.i.O();var c=h.ta.mj(o,u,!1),p=h.cb.ih(o),f=h.cb.tc(o),m=f.Id().ci,b=h.cb.xv(f);f=h.cb.gv(f),b*=2-b;var S=new h.Oc;p.en(S);var M=[[0,0],[0,0]];if(h.Gg.Tb(o)==2?n?(M[0][0]=w.an(a,S),M[0][1]=p.Lp(),h.cb.wt(),p=M[0][0]*m):(M[0][0]=p.hk(),M[0][1]=a,h.cb.wt(),p=M[0][1]*m):p=a*m,!n&&p!=0)throw h.i.O();var T=new h.ha,k=new h.hd;u=k.Ib(u);for(var C=[0],N=new h.h,F=new h.h,D=new h.h,j=new h.h,G=new h.h,W=new h.h,J=k.Ob(u);J!=-1;J=k.Sb(J)){var B=k.Ya(J);k.D(B,D);for(var Q=!1,ue=B=k.V(B);ue!=-1;ue=k.V(ue)){if(ue==B){if(Q)break;Q=!0}if(k.D(ue,j),n&&c<a-D.x&&j.x-a>c||c<a-j.x&&D.x-a>c||!n&&c<-D.y&&j.y>c||c<-j.y&&D.y>c)do if(!(Math.abs(D.x-j.x)>=.5*S.S())){if(h.Gg.Tb(o)==2?(M[0][0]=w.an(D.x,S),M[0][1]=D.y,M[1][0]=w.an(j.x,S),M[1][1]=j.y,h.cb.WV(),G.x=M[0][0]*m,G.y=M[0][1]*m,W.x=M[1][0]*m,W.y=M[1][1]*m):(G.x=D.x*m,G.y=D.y*m,W.x=j.x*m,W.y=j.y*m),W.x=6.283185307179586*(j.x-D.x)/S.S()+G.x,n){if(F.x=p,F.y=w.Iz(f,b,G,W,p,r),isNaN(F.y))break}else{if(F.x=w.Gz(f,b,G,W,r),isNaN(F.x))break;F.y=0}h.kb.xd(f,b,G.x,G.y,W.x,W.y,T,null,null,r);var ge=T.u;h.kb.xd(f,b,G.x,G.y,F.x,F.y,T,null,null,r);var ye=T.u;h.Gg.Tb(o)==2?(M[0][0]=F.x/m,M[0][1]=F.y/m,h.cb.WQ(),n?(N.y=M[0][1],N.x=a):(N.x=w.qs(M[0][0],D.x,j.x,S),N.y=a)):n?(N.x=a,N.y=F.y/m):(N.x=w.qs(F.x/m,D.x,j.x,S),N.y=a),C[0]=0<ge?h.P.Sk(ye/ge,0,1):.5,C[0]!=0&&C[0]!=1&&(ge=k.Na(ue),k.Wl(ge,C,1),k.Db(k.V(ge),N.x,N.y))}while(0);D.N(j)}}return k.Ke(u)},w.Gn=function(u,o,r,n,a){if(u.B())return u;var c=h.cb.bf(o);return w.Jp(u,r-180*c,360*c,o,n,a,!0)},w.Iz=function(u,o,r,n,a,c){if(3.141592653589793<=Math.abs(r.x-n.x)||!w.Tn(r.x,n.x,a))return NaN;if(r.x>n.x)var p=n;else p=r,r=n;n=new h.ha(0);var f=new h.ha(0),m=new h.ha(0);h.kb.xd(u,o,p.x,p.y,r.x,r.y,f,n,null,c);var b=f.u,S=0,M=1,T=new h.h;for(T.N(p);b*(M-S)>1e-12*u;){var k=.5*(S+M);if(h.kb.qj(u,o,p.x,p.y,b*k,n.u,f,m,c),T.x=f.u,T.y=m.u,T.x==a)break;if(w.Tn(p.x,T.x,a))M=k;else{if(!w.Tn(r.x,T.x,a))return NaN;S=k}}return T.y},w.Tn=function(u,o,r){return u=A.Ep(u),o=A.mx(u,A.Ep(o)),(r=A.mx(u,A.Ep(r)))==0||0<o&&0<r&&r<=o||0>o&&0>r&&r>=o},w.an=function(u,o){var r=o.wa-o.pa;return o.Kt(u-Math.floor((u-o.pa)/r)*r)},w.qs=function(u,o,r,n){var a=new h.Oc;for(a.L(o,r),r=n.S(),u=Math.floor((u-o)/r)*r+u,a=a.tf();Math.abs(u-a)>Math.abs(u+r-a);)u+=r;return u},w.Gz=function(u,o,r,n,a){if(r.y>n.y)var c=n;else c=r,r=n;if((n=new h.Oc).L(c.y,r.y),!n.contains(0)||3.141592653589793<=Math.abs(c.x-r.x))return NaN;if(c.x==r.x)return c.x;var p=new h.ha(0),f=new h.ha(0),m=new h.ha(0);h.kb.xd(u,o,c.x,c.y,r.x,r.y,f,p,null,a);var b=f.u,S=0,M=1,T=new h.h;for(T.N(c);b*(M-S)>1e-12*u;){var k=.5*(S+M);if(h.kb.qj(u,o,c.x,c.y,b*k,p.u,f,m,a),T.x=f.u,T.y=m.u,n.L(c.y,T.y),T.y==0)break;if(n.contains(0))M=k;else{if(n.L(r.y,T.y),!n.contains(0))return NaN;S=k}}return T.x},w.Jp=function(u,o,r,n,a,c,p){var f=new h.l;if(u.A(f),f.B())return u;var m=new h.Oc;f.en(m);var b=new h.Oc;if(b.L(o,o+r),b.contains(m)&&b.wa!=m.wa)return u;var S=new h.l;S.L(f);var M=u.K();if(M==33)return((f=(S=a?u:u.Pf()).Ng())<b.pa||f>=b.wa||p&&f==b.wa)&&(f+=Math.ceil((b.pa-f)/r)*r,f=b.Kt(f),S.XB(f)),S;if(M==550){for(n=(S=a?u:u.Pf()).vb(0),M=2*S.I(),u=!1,a=0;a<M;a+=2)((f=n.read(a))<b.pa||f>=b.wa||p&&f==b.wa)&&(u=!0,f+=Math.ceil((b.pa-f)/r)*r,f=b.Kt(f),n.write(a,f));return u&&S.Qc(1993),S}if(b.contains(m))return u;if(M==197)return r=a?u:u.Pf(),f.Fa(S),r.Yo(f),r;var T=.1*Math.max(f.da(),f.S());for(S.X(0,T),p=u,b=n.Yd(0),u=h.Ih.local(),a=new h.Ed;;){var k=Math.floor((m.pa-o)/r),C=Math.ceil((m.wa-o)/r);if(!(3<C-k))break;k=Math.floor(.5*(C+k)),S.v=f.v-T,S.C=o+r*k;var N=h.Vd.clip(p,S,b,c);S.v=S.C,S.C=f.C+T;var F=h.Vd.clip(p,S,b,c);a.gg((k-C)*r,0),F.Pc(a),M==1736?p=u.W(N,F,n,null):(p=N).add(F,!1),p.A(f),f.en(m)}for(S.v=o,S.C=o+r,(o=new h.l).L(S),o.X(b,0),(o=Math.floor((f.v-S.v)/r)*r)!=0?(S.move(o,0),a.gg(-o,0)):a.LB(),o=M==1607?new h.Ua(p.description):new h.Ea(p.description),c=new h.l,m=new h.l;f.C>S.v;)(T=h.Vd.clip(p,S,b,0)).A(m),(M==1607?!T.B()&&(m.S()>b||m.da()>b):!T.B()&&(M!=1736||m.S()>b))&&(T.Pc(a),T.A(m),o.A(c),c.X(b,b),c.isIntersecting(m)&&M==1736?o=u.W(o,T,n,null):o.add(T,!1)),S.move(r,0),a.shift(-r,0);return o},w.QI=function(u,o,r,n){var a=new h.de(r.description);a.Gd(r,0,-1),a=h.cb.Bh(a,u,o);var c=r.I();if(n.Pa(),!h.cb.Xc(u)||c!=a.I())return!1;var p=new h.l;r.A(p);var f=new h.l;if(a.A(f),p=p.S(),f=f.S(),p!=0&&f!=0){if(f/=p,u=h.cb.ih(o).S()/h.cb.ih(u).S(),1e-10<Math.abs(f/u-1))return!1}else if(p!=0||f!=0)return!1;for(n.add(r,!1),r=0;r<c;r++)u=a.Oa(r),n.Db(r,u);return!0},w.Jz=function(){throw h.i.Fe()},w}()}(q||(q={})),function(h){var A,w,u;(w=A=h.ui||(h.ui={}))[w.Clip=0]="Clip",w[w.DontClip=1]="DontClip",w[w.PannableFold=2]="PannableFold",function(o){o[o.Geodesic=0]="Geodesic",o[o.Loxodrome=1]="Loxodrome",o[o.GreatElliptic=2]="GreatElliptic",o[o.NormalSection=3]="NormalSection",o[o.ShapePreserving=4]="ShapePreserving"}(u=h.QK||(h.QK={})),h.Ab=function(){function o(){}return o.zv=function(r,n,a){if(a||0<n){for(r=r.toString(h.Tc.PE_STR_NAME_CANON|h.Tc.PE_STR_AUTH_NONE),n=[],a=0;a<r.length;a++)n[a]="a"<=r[a]&&"z">=r[a]?n[a]=r[a].toUpperCase():r[a];return n.join()}return r.toString(h.Tc.PE_STR_AUTH_TOP)},o.wr=function(r,n,a,c){var p=c.length,f=a.I();if(f!=0){var m=a.vb(0),b=Math.min(f,p),S=0,M=r.gh();isNaN(n)&&(n=0);for(var T=r.Xc(),k=179*(r=T?r.tc().Le().S():0)/360;0<f;){if(m.oB(S<<1,b,c),h.gj.projToGeogCenter(M,b,c,n),T)for(var C=0;C<b;C++){var N=c[C][0]-n,F=h.mc.sign(N),D=m.read(2*(S+C));0>F*h.mc.sign(D)&&Math.abs(N)>k&&(c[C][0]+=-F*r)}m.oC(S<<1,b,c),S+=b,f-=b,b=Math.min(f,p)}a.Qc(1993)}},o.CL=function(r,n,a,c){var p=0,f=r.gh();isNaN(p)&&(p=0);var m=r.Xc(),b=r.bf();r=360*b,b*=179;for(var S=c.length,M=0;M<a;){for(var T=M;T<a&&n[T].isNaN();++T)M++;var k=Math.min(S,a-M);if(0<k){T=1;for(var C=M+1;T<k;++T,++C)if(n[C].isNaN()){k=T;break}if(h.ta.Ey(c,n,M,k),h.gj.projToGeogCenter(f,k,c,p),m)for(T=0,C=M;T<k;++T,++C){var N=n[C].x,F=c[T][0]-p,D=h.mc.sign(F);0>D*h.mc.sign(N)&&Math.abs(F)>b&&(c[T][0]-=D*r)}h.ta.Dy(n,M,c,k),M+=k}}},o.Kx=function(r,n,a){var c=a.length,p=n.I();if(!(1>p)){var f=n.vb(0),m=Math.min(p,c),b=0,S=r.gh(),M=r.Xc(),T=M?r.Le().S():0,k=179*T/360,C=0;for(M&&(C=r.Bi());0<p;){if(f.oB(b<<1,m,a),h.gj.geogToProj(S,m,a),M)for(r=0;r<m;r++){var N=a[r][0],F=h.mc.sign(N),D=f.read(2*(b+r))-C;0>F*h.mc.sign(D)&&Math.abs(N)>k&&(a[r][0]+=-F*T)}f.oC(b<<1,m,a),b+=m,p-=m,m=Math.min(p,c)}n.Qc(1993)}},o.BL=function(r,n,a,c){if(a!=0){var p=r.gh(),f=r.Xc(),m=f?r.Le().S():0,b=179*m/360,S=0;for(f&&(S=r.Bi()),r=0;r<a;){for(var M=r;M<a&&n[M].isNaN();++M)r++;var T=Math.min(c.length,a-r);if(0<T){M=1;for(var k=r+1;M<T;++M,++k)if(n[k].isNaN()){T=M;break}if(h.ta.Ey(c,n,r,T),h.gj.geogToProj(p,T,c),f)for(M=0,k=r;M<T;M++){var C=c[M][0],N=h.mc.sign(C);0>N*h.mc.sign(n[k].x-S)&&Math.abs(C)>b&&(c[M][0]-=N*m)}h.ta.Dy(n,r,c,T),r+=T}}}},o.vr=function(r,n,a,c){var p=n.I();if(p!=0){var f=n.vb(0),m=r.ef,b=r.Zf,S=m.tc().Sp(),M=b.tc().Sp(),T=m.bf(),k=b.bf();if((r=r.Xf)==null||r.count()==0){for(a=S/M,c=(m.Wp()-b.Wp())*k,M=-90*T,r=90*T,S=!1,k=1,m=2*p;k<m;)T=f.get(k),(b=h.P.Sk(T,M,r))!=T&&(f.set(k,b),S=!0),k+=2;if(c!=0||a!=1)for(S=!0,M=new h.h,k=0;k<p;k++)f.uc(2*k,M),M.x*=a,M.x+=c,M.y*=a,f.Vt(2*k,M);S&&n.Qc(1993)}else{m=c.length,b=Math.min(p,m);var C=h.P.lg(b),N=null,F=0,D=NaN,j=NaN,G=360*k,W=k/T;a&&(j=90*k,D=89.9*T,N=h.P.lg(b));for(var J=!0,B=0;p!=0;){for(T=!1,f.oB(F<<1,b,c),k=0;k<b;k++)C[k]=c[k][0];if(a)for(k=0;k<b;k++){var Q=Math.abs(c[k][1])-D;0<Q&&(T=c[k][1],c[k][1]=h.mc.Dn(D,T),N[k]=h.mc.Dn(Q,T),T=!0)}for(k=c[0][0],r.transform(c,b,S,M),J&&(B=c[0][0]-W*k,J=!1),k=0;k<b;k++)Q=c[k][0]-C[k]*W-B,200<Math.abs(Q)&&(c[k][0]=0<Q?c[k][0]-G:c[k][0]+G);if(T){for(k=0;k<b;k++)N[k]!=0&&(c[k][1]+=W*N[k],c[k][1]>j?c[k][1]=j:c[k][1]<-j&&(c[k][1]=-j));for(T=0;T<b;T++)N[T]=0}f.oC(F<<1,b,c),F+=b,p-=b,b=Math.min(p,m)}n.Qc(1993)}}},o.AL=function(r,n,a,c){if(r.ow)c=90*r.ef.bf(),h.ta.YJ(n,a,-c,c);else{var p=r.Xf,f=r.ef,m=r.Zf;r=f.Zr();var b=m.Zr(),S=f.bf(),M=90*S,T=m.bf();if(p==null||p.count()==0){if(c=r/b,p=(f.Wp()-m.Wp())*T,h.ta.YJ(n,a,-M,M),p!=0||c!=1)for(T=0;T<a;T++)n[T].x*=c,n[T].x+=p,n[T].y*=c}else{f=Math.min(a,c.length),M=h.P.lg(f),m=360*T,S=T/S;for(var k=!0,C=0,N=0;a!=0;){for(T=0;T<f;T++)M[T]=n[T+N].x;for(T=n[0].x,h.ta.Ey(c,n,N,f),p.transform(c,f,r,b),h.ta.Dy(n,N,c,f),k&&(C=n[0].x-S*T,k=!1),T=0;T<f;T++){var F=n[N+T].x-M[T]*S-C;200<Math.abs(F)&&(n[N+T].x=0<F?n[N+T].x-m:n[N+T].x+m)}N+=f,a-=f,f=Math.min(a,c.length)}}}},o.fv=function(r,n){return r=r.ih(),isNaN(n)||r.Lu(n,0),r},o.OQ=function(r,n,a,c,p,f,m,b){for(var S=o.fv(c,p),M=S.S(),T=M/360,k=o.jE*T,C=r.vb(0),N=n.Xc(),F=N?M/n.Le().S():0,D=!1,j=new h.Ea(a.description),G=0,W=a.ea();G<W;++G){var J=N,B=new h.Ua(a.description);if(B.addPath(a,G,!0),m!=0){var Q=o.JD(!0,B,S.H-b,S.H,m);(D=D||Q)&&(J=!1)}var ue=-1;J&&(ue=r.Ca(G));var ge=B.vb(0),ye=B.I(),de=0,we=ge.read(0),je=0;Q=3*c.Yd(0);var Ve=!1,pt=new h.h;pt.Sc();var dt=new h.h;dt.Sc();for(var ai=!1,Ct=1;Ct<ye;++Ct){var ke=h.h.construct(ge.Bg(2*Ct),ge.Bg(2*Ct+1)),wt=ke.x,st=wt+de,Bt=st-we;if(ke.x=st,Math.abs(Bt)>k){if(J){var Dt=ue+(Ct+1<ye?Ct:0),fr=C.read(2*(ue+Ct-1));Dt=(C.read(2*Dt)-fr)*F,Math.abs(Bt-Dt)>1*T&&(J=!1)}J||(st=wt+(de-=h.mc.Dn(M,st-we)),++je,ai=de!=0,ke.x=st)}else Ve||h.ta.uG(dt,pt,ke,Q)&&(Ve=!0);ai&&ge.write(2*Ct,st),we=st,dt.N(pt),pt.N(ke)}0<je&&B.Qc(1993),J=B.Oa(0),ye=B.Oa(ye-1),B=h.h.ub(J,ye)<Q?o.oQ(B,c,p,f,Ve):o.pQ(r,G,B,c,p),j.add(B,!1)}return p=c.Yd(0),a=S.S()/180,o.Lt(j,S,.1*p,!1),j=j!=(p=h.ti.clip(j,S,p,a,f)),r=r.He(),m=0,0<(b=p.He())&&0>r?m=1:0>=b&&0<r&&(b==0?(b=NaN,n.Tb()==2?b=n.ol().He():n.Tb()==1&&(b=n.Le().qF()),r>.99*b&&(m=-1)):m=-1),m!=0&&((n=new h.Ea(p.description)).vp(S),(n=h.Zl.local().W(n,a,f)).add(p,!1),j=!0,p=n),j&&(p=h.$l.local().W(p,c,!1,f)),p},o.pQ=function(r,n,a,c,p){var f=a.I(),m=a.Oa(0),b=a.Oa(f-1);p=(c=o.fv(c,p)).S(),m=h.mc.sign(b.x-m.x);var S=new h.l;a.yc(S);var M=c.hk();if(b=M-p,M+=p,0<=m){var T=Math.ceil((b-S.v)/p);for(T*=p;b>S.v+T;)T+=p;for(;b<S.C+T;)T-=p;var k=T;720<S.S()&&(M=b+360*Math.ceil(S.S()/360))}else{for(T=Math.ceil((M-S.C)/p),T*=p;M<S.C+T;)T-=p;for(;M>S.v+T;)T+=p;k=T,720<S.S()&&(b=M-360*Math.ceil(S.S()/360))}T=m*p;var C=h.l.construct(S.v,S.G,S.C,S.H);C.move(k,0);var N=new h.Ed;N.gg(k,0),a.Pc(N),(S=new h.Ua(a.description)).add(a,!1),k=a.Oa(f-1),p=0;for(var F=S.Oa(0).x,D=0;0<m?C.C<M:C.v>b;)1024<=D&&(D=0),C.move(T,0),N.Lb=T,a.Pc(N),F+=T,c.v<=F&&c.C>=F&&(p=S.I()-1),a.Db(0,k),k=a.Oa(f-1),S.Fr(a,0,0,f-1,!1);return a=new h.Ea(S.description),f=0<r.Kr(n),a.add(S,!1),r=S.Oa(0),b=S.Oa(S.I()-1),n=a.ea()-1,(0>m?f:!f)?(m=h.h.construct(b.x,c.H),a.Ei(m),m=h.h.construct(c.hk(),c.H),a.Ei(m),c=h.h.construct(r.x,c.H)):(m=h.h.construct(b.x,c.G),a.Ei(m),m=h.h.construct(c.hk(),c.G),a.Ei(m),c=h.h.construct(r.x,c.G)),a.Ei(c),a.rG(0,n,0),a.eO(p),a},o.oQ=function(r,n,a,c,p){var f=new h.Ea(r.description);f.add(r,!1),f.xB(0,f.I()-1);var m=new h.l;f.yc(m);var b=(a=o.fv(n,a)).S(),S=Math.ceil((a.v-m.v)/b);for(S*=b;a.v>m.v+S;)S+=b;for(;a.v<m.C+S;)S-=b;if((S+=b)!=0){m.move(S,0);var M=new h.Ed;M.gg(S,0),f.Pc(M)}if(a.v<=m.v&&a.C>m.C)return p&&(p=f.He(),n=(f=h.$l.local().W(f,n,!0,c)).He(),(n=h.mc.sign(p)!=h.mc.sign(n))&&f.iJ()),f;for((r=new h.Ea(r.description)).add(f,!1),p=p||m.S()>b-n.Yd(0);m.v<a.C;)m.move(b,0),(M=new h.Ed).gg(b,0),f.Pc(M),r.add(f,!1);return p&&(p=r.He(),r.Zo(1),n=(r=h.$l.local().W(r,n,!0,c)).He(),(n=h.mc.sign(p)!=h.mc.sign(n))&&r.iJ()),r},o.JD=function(r,n,a,c,p){for(var f=n.vb(0),m=n.I(),b=!1,S=0;S<m;S++){var M=h.h.construct(f.Bg(2*S),f.Bg(2*S+1));if((1&p)!=0&&M.y>=a){b=!0;break}if((2&p)!=0&&M.y<=-a){b=!0;break}}if(!b)return!1;f=!1,r&&(f=n.On(0)),m=(r=new h.hd).Ib(n),b=r.Ob(m);var T=-1,k=!0,C=new h.h;C.Sc(),S=new h.Ta;for(var N=-1,F=r.Ya(b);F!=-1;F=r.V(F)){M=r.Oa(F);var D=(1&p)!=0&&90<=M.y?1:0;if(D|=(2&p)!=0&&M.y<=-a?2:0,0<T&&T!=D){if(C.x!=M.x){C.x=M.x,r.Xi(r.Na(F),S);var j=r.yj(b,F,S);r.mf(j,C)}if(f)for(N=N!=-1?r.V(N):r.Ya(b),j=r.Na(F);N!=j;)N=r.pd(N,!1);N=-1}0<D&&(M.y=h.mc.Dn(c,M.y),r.mf(F,M),k||T==D||(M.x!=C.x?(r.Xi(F,S),j=r.yj(b,F,S),r.Db(j,C.x,M.y),N=j):N=F)),T=D,C=M,k=!1}if(f){if(N!=-1)for(N=r.V(N);N!=-1;)N=r.pd(N,!1);a=r.Ya(b),r.hq(a,r.tj(b))||(r.Xi(a,S),r.yj(b,-1,S))}return r.Ke(m).copyTo(n),!0},o.Hz=function(r,n,a,c){var p=r;if(p.B()||a==A.DontClip)return p;var f=p.K();if(f==33)return p=[(c=p).D()],o.sG(p,1,n,a),p[0].isNaN()?c.Pa():c.Db(p[0]),r;var m=(r=n.tc()).bf(),b=90*m,S=180*m,M=360*m,T=n.Bi(),k=.5*m,C=new h.l;p.A(C);var N=n.Xr(),F=n.JQ(),D=N.K()==197;if(n=new h.l,N.A(n),a==A.PannableFold&&(a=r.Le().S(),n.v=T-.5*a,n.C=n.v+a),C.G<-b||C.H>b){if(new h.l().L(C.v-m,-b,C.C+m,b),(p=h.ti.Pu(p,n,r,NaN,0,c)).B())return p;p.A(C)}if(F&&(n.H<C.G||n.G>C.H))return p.Ja();if(C.S()>M&&(p=o.Jp(p,T-S,M,r,!0,0,!0,c)).A(C),(b=o.ZN(C.v,C.C,n.v,n.C,M))!=0&&C.move(b,0),C.C>n.C||C.v<n.v){if(C.C>n.C)for(;C.v>=n.C;)C.move(-M,0),b-=M;for(;C.v<n.C-M;)C.move(M,0),b+=M}if(a=h.ta.Ju(r,N),b!=0&&((m=new h.Ed).gg(b,0),p.Pc(m)),F){if(D&&n.contains(C))return p;for(F=[null,null],b=0;2>b;b++){if(D?m=h.ba.Ic(f)?h.ti.clip(p,n,a,k,c):h.ti.clip(p,n,a,0,c):(m=h.Xk.local().W(p,N,r,c))==N&&(m=h.ba.ig(m)),n.v<=C.v&&n.C>=C.C||n.v>=C.v&&n.C<=C.C)return m;F[b]=m,b==0&&(C.move(-M,0),(m=new h.Ed).gg(-M,0),p.Pc(m))}if(f==550)F[0].Gd(F[1],0,-1);else if(h.ba.Ic(f))F[0].add(F[1],!1);else{if(f!=33)throw h.i.ga("intersect_with_GCS_horizon: unexpected geometry type");F[0].B()&&(F[0]=F[1])}return F[0]}if(n.H<C.G||n.G>C.H)return p;for(f=0;!p.B()&&C.C>n.v;)f!=0&&((m=new h.Ed).gg(f,0),p.Pc(m)),h.fj.local().W(4,p,N,r,c)||N==(p=h.lp.local().W(p,N,r,c))&&(p=h.ba.ig(p)),f!=0&&((k=new h.Ed).gg(-f,0),p.Pc(k)),f-=M,C.move(-M,0);return p},o.sG=function(r,n,a,c){if(n!=0&&c!=A.DontClip)if(c==A.PannableFold){c=a.BR();for(var p=n,f=0;f<n;f++)(r[f].y>c.H||r[f].y<c.G)&&(r[f].Sc(),p--);p!=0&&o.cv(r,n,c.v,c.S())}else{var m=90*(c=a.bf()),b=180*c;for(c*=360,p=n,f=0;f<n;f++)(r[f].y>m||r[f].y<-m)&&(r[f].Sc(),p--);if(p!=0){(p=new h.l).bx(r,n),m=a.Xr();var S=a.kv();f=m.K()==197;var M=new h.l;if(m.A(M),!S||!(M.H<p.G||M.G>p.H))if(S)if(o.cv(r,n,M.hk()-b,c),p=n,f)for(f=0;f<n;f++)M.contains(r[f])||(r[f].Sc(),p--);else for(a=h.ta.Ju(a.tc(),m),f=0;f<n;f++)(b=h.jd.Zd(m,r[f],a)!=0)||(r[f].Sc(),p--);else for(o.cv(r,n,-b,c),p=n,a=h.ta.Ju(a.tc(),m),f=0;f<n;f++)(b=r[f]).isNaN()&&p--,S=o.nE(b.x,M.v,M.C,c),b.x+=S,(b=h.jd.Zd(m,b,a)!=0)&&(r[f].Sc(),p--)}}},o.Jp=function(r,n,a,c,p,f,m,b){var S=r.K(),M=n+a;if(S===33){var T=(c=p?r:r.Pf()).Ng();return(T<n||T>=M||m&&T==M)&&(T+=Math.ceil((n-T)/a)*a,T=h.P.Sk(T,n,M),c.XB(T)),c}if(r.B()||(T=new h.l,r.A(T),T.B()))return r;var k=new h.Oc;T.en(k);var C=new h.Oc;if(C.L(n,M),C.contains(k))return r;if((M=new h.l).L(T),S===550){for(b=(c=p?r:r.Pf()).vb(0),S=2*c.I(),M=!1,n=0;n<S;n+=2)((T=b.read(n))<C.pa||T>=C.wa||m&&T==C.wa)&&(M=!0,T+=Math.ceil((C.pa-T)/a)*a,T=C.Kt(T),b.write(n,T));return M&&c.Qc(1993),c}if(S==197)return a=p?r:r.Pf(),T.Fa(M),a.Yo(T),a;var N=.1*Math.max(T.da(),T.S());for(M.X(0,N),m=r,C=c.Yd(0),r=h.Ih.local(),p=new h.Ed;;){var F=Math.floor((k.pa-n)/a),D=Math.ceil((k.wa-n)/a);if(!(3<D-F))break;F=Math.floor(.5*(D+F)),M.v=T.v-N,M.C=n+a*F;var j=h.ti.clip(m,M,C,f,b);M.v=M.C,M.C=T.C+N;var G=h.ti.clip(m,M,C,f,b);p.gg((F-D)*a,0),G.Pc(p),S==1736?m=r.W(j,G,c,null):(m=j).add(G,!1),m.A(T),T.en(k)}for(M.v=n,M.C=n+a,(n=new h.l).L(M),n.X(C,0),(n=Math.floor((T.v-M.v)/a)*a)!=0?(M.move(n,0),p.gg(-n,0)):p.LB(),n=S==1607?new h.Ua(m.description):new h.Ea(m.description),f=new h.l,k=new h.l;T.C>M.v;)(N=h.ti.clip(m,M,C,0,b)).A(k),(S==1607?!N.B()&&(k.S()>C||k.da()>C):!N.B()&&(S!=1736||k.S()>C))&&(N.Pc(p),N.A(k),n.A(f),f.X(C,C),f.isIntersecting(k)&&S==1736?n=r.W(n,N,c,null):n.add(N,!1)),M.move(a,0),p.shift(-a,0);return n},o.cv=function(r,n,a,c){for(var p=a+c,f=0;f<n;f++){var m=r[f].x;a<=m&&m<p||!(m<a||m>p||m==p)||(m+=Math.ceil((a-m)/c)*c,m=h.P.Sk(m,a,p),r[f].x=m)}},o.Gn=function(r,n,a,c,p,f){if(!n.Xc())throw h.i.ga("fold_into_360_degree_range");if(r.B())return r;if(n.Tb()==2){a=n.rv();var m=n.qv()-a}else{var b=n.bf();m=360*b,a-=180*b}return o.Jp(r,a,m,n,c,p,!0,f)},o.kF=function(r,n,a,c){if(a.Tb()==2)c=a.rv(),a=a.qv()-c;else{var p=a.bf();a=360*p,c-=180*p}o.cv(r,n,c,a)},o.nj=function(r,n){var a=n.Le();if(r.K()==33){var c=r.kh();return a.G<=c&&c<=a.H?r:r.Ja()}c=new h.l,r.A(c);var p=new h.l;return p.L(a),p.v=c.v,p.C=c.C,p.X(.01*p.da(),0),a=h.ta.py(n,c),p.contains(c)?r:h.ti.clip(r,p,a,0,null)},o.kr=function(r,n,a){return r>n.C&&r-n.C<a?n.C:r<n.v&&n.v-r<a?n.v:r},o.xX=function(r,n,a,c){c.x=o.kr(r.x,n,a),c.y=r.y},o.wX=function(r,n,a,c){for(var p=0;p<n;p++)r[p].y<a.G||r[p].y>a.H?r[p].Sc():r[p].x=o.kr(r[p].x,a,c)},o.Lt=function(r,n,a,c){if(!r.B()){var p=r.K();if(!c||p!=1736)if(h.ba.zj(p)){c=r.vb(0),p=0;for(var f=r.I();p<f;p++){var m=c.read(2*p),b=o.kr(m,n,a);b!=m&&c.write(2*p,b)}r.Qc(1993)}else if(p==197)c=new h.l,r.A(c),c.v=o.kr(c.v,n,a),c.C=o.kr(c.C,n,a),r.Yo(c);else{if(p!=33)throw h.i.ga("internal error");r.XB(o.kr(r.Ng(),n,a))}}},o.nS=function(r,n,a,c){var p=new h.hd,f=p.Ib(r);return r=h.ta.Ju(n,r),o.ms(p,f,n,r,a,!0,c),p.Ke(f)},o.ms=function(r,n,a,c,p,f,m){if(!a.Xc())throw h.i.O("invalid call");var b=a.Le(),S=a.tc(),M=S.gh().getDatum().getSpheroid();S=S.Id().ci;var T=M.getFlattening();M=M.getAxis(),T*=2-T;var k=new h.Oc;b.en(k);var C=null,N=[[0,0],[0,0]];if(a.Tb()==2?(C=a.gh(),f?(N[0][0]=o.an(m,k),N[0][1]=b.Lp(),h.gj.projToGeog(C,1,N),b=N[0][0]*S):(N[0][0]=b.hk(),N[0][1]=m,h.gj.projToGeog(C,1,N),b=N[0][1]*S)):b=m*S,!f&&b!=0&&p!=u.GreatElliptic)throw h.i.ga("invalid argument");var F=new h.ha,D=[0],j=new h.h,G=new h.h,W=new h.h,J=[null,null],B=new h.h,Q=new h.h,ue=new h.h,ge=new h.h;for(n=r.Ob(n);n!=-1;n=r.Sb(n)){var ye=r.Ya(n);r.D(ye,B);for(var de=!1,we=ye=r.V(ye);we!=-1;we=r.V(we)){if(we==ye){if(de)break;de=!0}if(r.D(we,Q),f&&(c<m-B.x&&Q.x-m>c||c<m-Q.x&&B.x-m>c)||!f&&(m!=0||c<-B.y&&Q.y>c||c<-Q.y&&B.y>c))do if(!(Math.abs(B.x-Q.x)>=.5*k.S())){if(a.Tb()==2?(N[0][0]=o.an(B.x,k),N[0][1]=B.y,N[1][0]=o.an(Q.x,k),N[1][1]=Q.y,h.gj.projToGeogCenter(C,2,N,0),ue.x=N[0][0]*S,ue.y=N[0][1]*S,ge.y=N[1][1]*S):(ue.x=B.x*S,ue.y=B.y*S,ge.y=Q.y*S),ge.x=2*(Q.x-B.x)*Math.PI/k.S()+ue.x,f){if(G.x=b,G.y=o.Iz(M,T,ue,ge,b,p),isNaN(G.y))break;J[0]=G;var je=1}else if(p==u.GreatElliptic){var Ve=[0,0];if((je=h.Nx.Jz(T,ue,ge,b,Ve))==0)break;G.x=Ve[0],G.y=b,J[0]=G,je==2&&(W.x=Ve[1],W.y=b,J[1]=W)}else{if(G.x=o.Gz(M,T,ue,ge,p),isNaN(G.x))break;G.y=0,J[0]=G,je=1}var pt=-1;for(Ve=0;Ve<je;Ve++){h.kb.xd(M,T,ue.x,ue.y,ge.x,ge.y,F,null,null,p);var dt=F.u;h.kb.xd(M,T,ue.x,ue.y,J[Ve].x,J[Ve].y,F,null,null,p);var ai=F.u;if(a.Tb()==2?(N[0][0]=J[Ve].x/S,N[0][1]=J[Ve].y/S,h.gj.geogToProj(C,1,N),f?(j.y=N[0][1],j.x=m):(j.x=o.qs(N[0][0],B.x,Q.x,k),j.y=m)):f?(j.x=m,j.y=J[Ve].y/S):(j.x=o.qs(J[Ve].x/S,B.x,Q.x,k),j.y=m),D[0]=0<dt?h.P.Sk(ai/dt,0,1):.5,D[0]==0||D[0]==1)break;pt>D[0]||(pt=r.Na(we),r.Wl(pt,D,1),r.Db(r.V(pt),j.x,j.y),pt=D[0])}}while(0);B.N(Q)}}},o.an=function(r,n){var a=n.wa-n.pa;return n.Kt(r-Math.floor((r-n.pa)/a)*a)},o.qs=function(r,n,a,c){var p=new h.Oc;for(p.L(n,a),a=c.S(),r=Math.floor((r-n)/a)*a+r,p=p.tf();Math.abs(r-p)>Math.abs(r+a-p);)r+=a;return r},o.Tn=function(r,n,a){return r=h.sr.Ep(r),n=h.sr.mx(r,h.sr.Ep(n)),(a=h.sr.mx(r,h.sr.Ep(a)))==0||0<n&&0<a&&a<=n||0>n&&0>a&&a>=n},o.Iz=function(r,n,a,c,p,f){if(f==u.GreatElliptic)return h.Nx.KS(n,a,c,p);if(Math.abs(a.x-c.x)>=Math.PI||!o.Tn(a.x,c.x,p))return NaN;if(a.x>c.x)var m=c;else m=a,a=c;c=new h.ha;var b=new h.ha,S=new h.ha;h.kb.xd(r,n,m.x,m.y,a.x,a.y,b,c,null,f);var M=b.u,T=0,k=1,C=new h.h;for(C.N(m);M*(k-T)>1e-12*r;){var N=.5*(T+k);if(h.kb.qj(r,n,m.x,m.y,M*N,c.u,b,S,f),C.x=b.u,C.y=S.u,C.x==p)break;if(o.Tn(m.x,C.x,p))k=N;else{if(!o.Tn(a.x,C.x,p))return NaN;T=N}}return C.y},o.Gz=function(r,n,a,c,p){if(p==u.GreatElliptic)return r=[0,0],h.Nx.Jz(n,a,c,0,r),r[0];if(a.y>c.y)var f=c;else f=a,a=c;if((c=new h.Oc).L(f.y,a.y),!c.contains(0)||Math.abs(f.x-a.x)>=Math.PI)return NaN;if(f.x==a.x)return f.x;var m=new h.ha,b=new h.ha,S=new h.ha;h.kb.xd(r,n,f.x,f.y,a.x,a.y,b,m,null,p);var M=b.u,T=0,k=1,C=new h.h;for(C.N(f);M*(k-T)>1e-12*r;){var N=.5*(T+k);if(h.kb.qj(r,n,f.x,f.y,M*N,m.u,b,S,p),C.x=b.u,C.y=S.u,c.L(f.y,C.y),C.y==0)break;if(c.contains(0))k=N;else{if(c.L(a.y,C.y),!c.contains(0))return NaN;T=N}}return C.x},o.QI=function(r,n,a,c){if(!r.ef.Xc())return!1;var p=new h.de(n.description);if(p.Gd(n,0,-1),c=h.Gx.local().W(p,r,c),p=n.I(),a.Pa(),p!=c.I())return!1;var f=new h.l;n.A(f);var m=new h.l;if(c.A(m),f=f.S(),m=m.S(),f!=0&&m!=0){if(m/=f,r=r.Zf.ih().S()/r.ef.ih().S(),1e-10<Math.abs(m/r-1))return!1}else if(f!=0||m!=0)return!1;for(a.add(n,!1),n=new h.h,r=0;r<p;r++)c.D(r,n),a.Db(r,n);return!0},o.kN=function(r,n){return(r%=360*n)>=180*n&&(r-=360*n),r},o.NI=function(r,n,a,c){if(a==A.Clip){var p=n.ol();p.K()==197?(a=new h.l,p.A(a),p=h.ta.py(n,a),r=h.ti.clip(r,a,p,5e4*n.rm(),c)):h.fj.local().W(1,p,r,n,c)||(r=h.Xk.local().W(r,p,n,c))==p&&(r=h.Wk.ig(r))}else n.Xc()&&(c=new h.l,r.yc(c),n.Le().contains(c)||(o.Lt(r,n.Le(),n.Yd(0),!0),a==A.PannableFold&&(r=o.nj(r,n)),r=o.Gn(r,n,0,!0,1e5*n.rm(),null)));return r},o.RD=function(r,n,a){var c=n.Yr();if(c==null)return r;var p=(n=n.tc()).Le().S(),f=new h.l;r.yc(f);var m=new h.Oc;f.en(m),f=c.Ha(),c=null;for(var b=new h.Ed;f.ab();)for(;f.Ia();){var S=f.ia(),M=S.Vg(0,0),T=new h.Oc;for(T.L(M.pa,M.wa),M=0;T.wa>m.pa;)T.move(-p),--M;for(;T.pa<=m.wa;){if(T.isIntersecting(m)){c==null&&(c=new h.Ua);var k=h.zb.XO(S.ac(),S.xc());M!=0&&(b.gg(M*p,0),k.Pc(b)),c.oc(k,!0)}T.move(p),++M}}return c!=null?(n=h.ta.aO(n,c),n=h.ta.Gr(n),h.bu.fP(r,c,n,a)):r},o.ZN=function(r,n,a,c,p){return r>=a&&n<=c?0:o.nE(.5*(n+r),a,c,p)},o.nE=function(r,n,a,c){return h.mc.round((.5*(a+n)-r)/c)*c},o.PQ=function(r,n,a,c,p,f,m,b){var S=o.fv(c,p),M=S.S(),T=M/360,k=o.jE*T,C=r.vb(0),N=n.Xc(),F=N?M/n.Le().S():0;n=r.Ja();for(var D=0,j=a.ea();D<j;++D){var G=N,W=new h.Ua(a.description);W.addPath(a,D,!0);var J=a.ec(D);m!=0&&(J=o.JD(J,W,S.H-b,S.H,m))&&(G=!1);var B=-1;J=W.I();var Q=!1;G&&(B=r.Ca(D),Q=r.ec(D));var ue=W.vb(0),ge=0,ye=ue.read(0),de=0,we=3*c.Yd(0),je=!1,Ve=new h.h;Ve.Sc();var pt=new h.h;pt.Sc();for(var dt=!1,ai=1;ai<J;++ai){var Ct=h.h.construct(ue.Bg(2*ai),ue.Bg(2*ai+1)),ke=Ct.x,wt=ke+ge,st=wt-ye;if(Ct.x=wt,Math.abs(st)>k){if(G){var Bt=B+ai-1,Dt=B;(!Q||ai+1<J)&&(Dt+=ai),Bt=C.read(2*Bt),Dt=(C.read(2*Dt)-Bt)*F,Math.abs(st-Dt)>1*T&&(N=!1)}G||(wt=ke+(ge-=h.mc.Dn(M,wt-ye)),++de,dt=ge!=0,Ct.x=wt)}else je||h.ta.uG(Ve,pt,Ct,we)&&(je=!0);dt&&ue.write(2*ai,wt),ye=wt,Ve.N(pt),pt.N(Ct)}de!=0&&W.Qc(1993),G=W.Oa(0),J=W.Oa(J-1),h.h.ub(G,J),W=o.qQ(W,c,isNaN(p)?0:p,f),n.add(W,!1)}return r=c.Yd(0),a=S.S()/180,o.Lt(n,S,.1*r,!1),h.ti.clip(n,S,r,a,f)},o.qQ=function(r,n,a,c){return o.Gn(r,n,a,!0,0,c)},o.HS=function(r,n,a,c){var p=r.K();if(p==1736)for(n=n!=null?n.Yd(0):0,p=0;p<c;p++)h.jd.Zd(r,a[p],n)!=1&&a[p].Sc();else{if(p!=197)throw h.i.O();for(p=0;p<c;p++)r.YO(a[p])||a[p].Sc()}},o.bl=function(r,n,a,c){if(32>a)for(var p=new h.Ta,f=0;f<a;f++)p.Db(n[f]),r.bl(p,c).D(n[f]);else{var m=new h.de;for(m.se(3),m.BD(n,a),p=m.vb(3),f=0;f<a;f++)p.write(f,f);for(f=r.bl(m,c),r=f.vb(0),p=f.vb(3),c=h.h.construct(NaN,NaN),m=0;m<a;m++)n[m]=c;for(a=f.I(),f=0;f<a;f++)c=p.read(f),r.uc(2*f,n[c])}},o.al=function(r,n,a,c){if(32>a)for(var p=new h.Ta,f=0;f<a;f++)p.Db(n[f]),r.al(p,c).D(n[f]);else{var m=new h.de;for(m.se(3),m.BD(n,a),p=m.vb(3),f=0;f<a;f++)p.write(f,f);for(f=r.al(m,c),r=f.vb(0),p=f.vb(3),c=h.h.construct(NaN,NaN),m=0;m<a;m++)n[m]=c;for(a=f.I(),f=0;f<a;f++)c=p.read(f),r.uc(2*f,n[c])}},o.jE=210,o}()}(q||(q={})),function(h){var A;(A=h.OL||(h.OL={}))[A.rightSide=1]="rightSide";var w=function(){function u(o,r,n){this.Ds=new h.h,o===void 0?this.Jo=-1:(this.Ds.N(o),this.Jo=r,this.La=n,this.pw=0)}return u.prototype.QJ=function(o){this.pw=o?1|this.pw:-2&this.pw},u.prototype.B=function(){return 0>this.Jo},u.prototype.az=function(){if(this.B())throw h.i.ga("invalid call");return new h.Ta(this.Ds.x,this.Ds.y)},u.prototype.Va=function(){if(this.B())throw h.i.ga("invalid call");return this.Jo},u.prototype.cz=function(){if(this.B())throw h.i.ga("invalid call");return this.La},u.prototype.Nz=function(){return(1&this.pw)!=0},u.prototype.by=function(o,r,n,a){this.Ds.x=o,this.Ds.y=r,this.Jo=n,this.La=a},u}();h.bm=w}(q||(q={})),function(h){var A=function(){function u(){}return u.prototype.Vo=function(o,r){this.vh.resize(0),this.Ki.length=0,this.uk=-1,o.yc(this.Fk),this.Fk.X(r,r),this.Fk.isIntersecting(this.Gb.Da)?((this.xs=h.ba.zd(o.K()))?(this.NH=o.ac(),this.MH=o.xc(),this.ra=r):this.ra=NaN,this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf)):this.Ss=-1},u.prototype.Zi=function(o,r){this.vh.resize(0),this.Ki.length=0,this.uk=-1,this.Fk.L(o),this.Fk.X(r,r),this.ra=NaN,this.Fk.isIntersecting(this.Gb.Da)?(this.vh.add(this.Gb.kf),this.Ki.push(this.Gb.Da),this.Ss=this.Gb.Wr(this.Gb.kf),this.xs=!1):this.Ss=-1},u.prototype.next=function(){if(this.vh.size==0)return-1;this.uk=this.Ss;var o=null,r=null,n=null,a=null;this.xs&&(o=new h.h,r=new h.h,n=new h.l);for(var c=!1;!c;){for(;this.uk!=-1;){var p=this.Gb.Xy(this.Gb.hv(this.uk));if(p.isIntersecting(this.Fk)){if(!this.xs){c=!0;break}if(o.N(this.NH),r.N(this.MH),n.L(p),n.X(this.ra,this.ra),0<n.uy(o,r)){c=!0;break}}this.uk=this.Gb.pv(this.uk)}if(this.uk==-1){p=this.vh.Gc();var f=this.Ki[this.Ki.length-1];for(a==null&&((a=[])[0]=new h.l,a[1]=new h.l,a[2]=new h.l,a[3]=new h.l),w.yJ(f,a),this.vh.Jf(),--this.Ki.length,f=0;4>f;f++){var m=this.Gb.Np(p,f);if(m!=-1&&0<this.Gb.PR(m)&&a[f].isIntersecting(this.Fk))if(this.xs){if(o.N(this.NH),r.N(this.MH),n.L(a[f]),n.X(this.ra,this.ra),0<n.uy(o,r)){var b=new h.l;b.L(a[f]),this.vh.add(m),this.Ki.push(b)}}else(b=new h.l).L(a[f]),this.vh.add(m),this.Ki.push(b)}if(this.vh.size==0)return-1;this.uk=this.Gb.Wr(this.vh.get(this.vh.size-1))}}return this.Ss=this.Gb.pv(this.uk),this.uk},u.WO=function(o,r,n){var a=new u;return a.Gb=o,a.Fk=new h.l,a.vh=new h.ja(0),a.Ki=[],a.Vo(r,n),a},u.VO=function(o,r,n){var a=new u;return a.Gb=o,a.Fk=new h.l,a.vh=new h.ja(0),a.Ki=[],a.Zi(r,n),a},u.UO=function(o){var r=new u;return r.Gb=o,r.Fk=new h.l,r.vh=new h.ja(0),r.Ki=[],r},u}();h.yY=A;var w=function(){function u(o,r){this.jf=new h.ad(11),this.ai=new h.ad(5),this.ys=[],this.iw=new h.ja(0),this.Da=new h.l,this.Ok(o,r)}return u.prototype.reset=function(o,r){this.jf.oj(!1),this.ai.oj(!1),this.ys.length=0,this.iw.clear(!1),this.Ok(o,r)},u.prototype.xj=function(o,r){return this.Bv(o,r,0,this.Da,this.kf,!1,-1)},u.prototype.Ez=function(o,r,n){n=n==-1?this.kf:this.QF(n);var a=this.da(n),c=this.iR(n);return this.Bv(o,r,a,c,n,!1,-1)},u.prototype.ka=function(o){return this.dR(o)},u.prototype.AF=function(o){return this.Xy(this.hv(o))},u.prototype.da=function(o){return this.lv(o)},u.prototype.iR=function(o){var r=new h.l;r.L(this.Da);var n=this.lv(o);o=this.KF(o);for(var a=0;a<2*n;a+=2){var c=h.P.truncate(3&o>>a);c==0?(r.v=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):c==1?(r.C=.5*(r.v+r.C),r.G=.5*(r.G+r.H)):(c==2?r.C=.5*(r.v+r.C):r.v=.5*(r.v+r.C),r.H=.5*(r.G+r.H))}return r},u.prototype.PR=function(o){return this.vz(o)},u.prototype.oR=function(o,r){return A.WO(this,o,r)},u.prototype.GF=function(o,r){return A.VO(this,o,r)},u.prototype.getIterator=function(){return A.UO(this)},u.prototype.Ok=function(o,r){if(0>r||32<2*r)throw h.i.O("invalid height");this.tT=r,this.Da.L(o),this.kf=this.jf.De(),this.jx(this.kf,0),this.dx(this.kf,0),this.HJ(this.kf,0),this.EJ(this.kf,0)},u.prototype.Bv=function(o,r,n,a,c,p,f){if(!a.contains(r))return n==0?-1:this.Bv(o,r,0,this.Da,this.kf,p,f);if(!p)for(var m=c;m!=-1;m=this.CR(m))this.jx(m,this.vz(m)+1);(m=new h.l).L(a),a=c;var b=[];for(b[0]=new h.l,b[1]=new h.l,b[2]=new h.l,b[3]=new h.l;n<this.tT&&this.cO(a);n++){u.yJ(m,b);for(var S=!1,M=0;4>M;M++)if(b[M].contains(r)){S=!0;var T=this.Np(a,M);T==-1&&(T=this.lP(a,M)),this.jx(T,this.vz(T)+1),a=T,m.L(b[M]);break}if(!S)break}return this.lS(o,r,n,m,a,p,c,f)},u.prototype.lS=function(o,r,n,a,c,p,f,m){var b=this.HF(c);if(p){if(c==f)return m;this.MP(m),p=m}else p=this.nP(),this.HB(p,o),this.BW(this.hv(p),r);return this.dX(p,c),b!=-1?(this.hx(p,b),this.ex(b,p)):this.AJ(c,p),this.MB(c,p),this.dx(c,this.nv(c)+1),this.bO(c)&&this.GQ(n,a,c),p},u.prototype.MP=function(o){var r=this.QF(o),n=this.HF(r),a=this.HR(o),c=this.pv(o);this.Wr(r)==o?(c!=-1?this.hx(c,-1):this.MB(r,-1),this.AJ(r,c)):n==o?(this.ex(a,-1),this.MB(r,a)):(this.hx(c,a),this.ex(a,c)),this.hx(o,-1),this.ex(o,-1),this.dx(r,this.nv(r)-1)},u.yJ=function(o,r){var n=.5*(o.v+o.C),a=.5*(o.G+o.H);r[0].L(n,a,o.C,o.H),r[1].L(o.v,a,n,o.H),r[2].L(o.v,o.G,n,a),r[3].L(n,o.G,o.C,a)},u.prototype.bO=function(o){return this.nv(o)==8&&!this.aG(o)},u.prototype.GQ=function(o,r,n){var a=this.Wr(n);do{var c=this.hv(a),p=this.ai.U(a,0);c=this.Xy(c),this.Bv(p,c,o,r,n,!0,a),a=p=this.pv(a)}while(a!=-1)},u.prototype.cO=function(o){return 8<=this.nv(o)||this.aG(o)},u.prototype.aG=function(o){return this.Np(o,0)!=-1||this.Np(o,1)!=-1||this.Np(o,2)!=-1||this.Np(o,3)!=-1},u.prototype.lP=function(o,r){var n=this.jf.De();return this.GW(o,r,n),this.jx(n,0),this.dx(n,0),this.Qk(n,o),this.EJ(n,this.lv(o)+1),this.HJ(n,r<<2*this.lv(o)|this.KF(o)),n},u.prototype.nP=function(){var o=this.ai.De();if(0<this.iw.size){var r=this.iw.Gc();this.iw.Jf()}else r=this.ys.length,this.ys.push(new h.l);return this.DW(o,r),o},u.prototype.Np=function(o,r){return this.jf.U(o,r)},u.prototype.GW=function(o,r,n){this.jf.T(o,r,n)},u.prototype.Wr=function(o){return this.jf.U(o,4)},u.prototype.AJ=function(o,r){this.jf.T(o,4,r)},u.prototype.HF=function(o){return this.jf.U(o,5)},u.prototype.MB=function(o,r){this.jf.T(o,5,r)},u.prototype.KF=function(o){return this.jf.U(o,6)},u.prototype.HJ=function(o,r){this.jf.T(o,6,r)},u.prototype.nv=function(o){return this.jf.U(o,7)},u.prototype.vz=function(o){return this.jf.U(o,8)},u.prototype.dx=function(o,r){this.jf.T(o,7,r)},u.prototype.jx=function(o,r){this.jf.T(o,8,r)},u.prototype.CR=function(o){return this.jf.U(o,9)},u.prototype.Qk=function(o,r){this.jf.T(o,9,r)},u.prototype.lv=function(o){return this.jf.U(o,10)},u.prototype.EJ=function(o,r){this.jf.T(o,10,r)},u.prototype.dR=function(o){return this.ai.U(o,0)},u.prototype.HB=function(o,r){this.ai.T(o,0,r)},u.prototype.HR=function(o){return this.ai.U(o,1)},u.prototype.pv=function(o){return this.ai.U(o,2)},u.prototype.hx=function(o,r){this.ai.T(o,1,r)},u.prototype.ex=function(o,r){this.ai.T(o,2,r)},u.prototype.QF=function(o){return this.ai.U(o,3)},u.prototype.dX=function(o,r){this.ai.T(o,3,r)},u.prototype.hv=function(o){return this.ai.U(o,4)},u.prototype.DW=function(o,r){this.ai.T(o,4,r)},u.prototype.Xy=function(o){return this.ys[o]},u.prototype.BW=function(o,r){this.ys[o].L(r)},u}();h.fu=w}(q||(q={})),function(h){var A;(A=h.VK||(h.VK={}))[A.Outside=0]="Outside",A[A.Inside=1]="Inside",A[A.Border=2]="Border";var w=function(){function o(r,n){this.HT=n,this.Xh=r}return o.prototype.ax=function(r,n){this.cH!=n&&r.flush(),this.cH=n},o.prototype.aF=function(r,n){for(var a=0;a<n;)for(var c=r[a++],p=r[a++],f=r[a++]*this.HT;c<p;c++)this.Xh[f+(c>>4)]|=this.cH<<2*(15&c)},o}();h.zY=w;var u=function(){function o(r,n,a){this.Xh=null,this.MA=this.Jk=this.XH=this.VH=this.Gs=this.kH=this.Hf=this.Wm=0,this.Ti=this.Kk=this.xl=null,this.Az(r,n,a)}return o.create=function(r,n,a){if(!o.tE(r))throw h.i.O();return o.qP(r,n,a)},o.hW=function(r){switch(r){case 0:r=1024;break;case 1:r=16384;break;case 2:r=262144;break;default:throw h.i.ga("Internal Error")}return r},o.tE=function(r){return!(r.B()||r.K()!=1607&&r.K()!=1736)},o.prototype.lQ=function(r,n){n=n.Ha();for(var a=new h.h,c=new h.h;n.ab();)for(;n.Ia();){var p=n.ia();if(p.K()!=322)throw h.i.ga("Internal Error");r.Gh(p.ac(),a),r.Gh(p.xc(),c),this.Ti.fy(a.x,a.y,c.x,c.y)}this.Ti.cJ(h.Ox.Bx)},o.prototype.mQ=function(){throw h.i.ga("Internal Error")},o.prototype.My=function(r,n){for(var a=1;4>a;a++)r.fy(n[a-1].x,n[a-1].y,n[a].x,n[a].y);r.fy(n[3].x,n[3].y,n[0].x,n[0].y),this.Ti.cJ(h.Ox.Bx)},o.prototype.lK=function(r,n,a){for(var c=[null,null,null,null],p=0;p<c.length;p++)c[p]=new h.h;n=n.Ha(),a=this.Kk.WX(a)+1.5,p=new h.h;for(var f=new h.h,m=new h.h,b=new h.h,S=new h.h,M=new h.l,T=new h.h;n.ab();){var k=!1,C=!0;for(T.na(0,0);n.Ia();){var N=n.ia();if(b.x=N.sa,b.y=N.oa,S.x=N.qa,S.y=N.ma,M.Pa(),M.$b(b.x,b.y),M.Mk(S.x,S.y),this.xl.BG(M)){this.Kk.Gh(S,S),C?(this.Kk.Gh(b,b),T.N(b),C=!1):b.N(T),p.vc(S,b);var F=.5>(N=p.length());N==0?p.na(1,0):(F||T.N(S),p.scale(a/N),f.na(-p.y,p.x),m.na(p.y,-p.x),b.sub(p),S.add(p),c[0].add(b,f),c[1].add(b,m),c[2].add(S,m),c[3].add(S,f),F?k=!0:this.My(r,c))}else k&&(this.My(r,c),k=!1),C=!0}k&&this.My(r,c)}},o.prototype.mC=function(r){return h.P.truncate(r*this.kH+this.VH)},o.prototype.nC=function(r){return h.P.truncate(r*this.Gs+this.XH)},o.qP=function(r,n,a){return new o(r,n,a)},o.prototype.Az=function(r,n,a){this.Hf=Math.max(h.P.truncate(2*Math.sqrt(a)+.5),64),this.Wm=h.P.truncate((2*this.Hf+31)/32),this.xl=new h.l,this.Jk=n,a=0;for(var c=this.Hf,p=this.Wm;8<=c;)a+=c*p,c=h.P.truncate(c/2),p=h.P.truncate((2*c+31)/32);this.Xh=h.P.lg(a,0),this.Ti=new h.Ox,a=new w(this.Xh,this.Wm,this),this.Ti.sX(this.Hf,this.Hf,a),r.A(this.xl),this.xl.X(n,n),c=new h.l;var f=n*(p=h.l.construct(1,1,this.Hf-2,this.Hf-2)).S();switch(n*=p.da(),c.L(this.xl.tf(),Math.max(f,this.xl.S()),Math.max(n,this.xl.da())),this.MA=this.Jk,this.Kk=new h.Ed,this.Kk.iS(c,p),new h.Ed,r.K()){case 550:a.ax(this.Ti,2),this.mQ();break;case 1607:a.ax(this.Ti,2),this.lK(this.Ti,r,this.MA);break;case 1736:a.ax(this.Ti,1),this.lQ(this.Kk,r),a.ax(this.Ti,2),this.lK(this.Ti,r,this.MA)}this.kH=this.Kk.eb,this.Gs=this.Kk.bb,this.VH=this.Kk.Lb,this.XH=this.Kk.Qb,this.RN()},o.prototype.RN=function(){this.Ti.flush();for(var r=0,n=this.Hf*this.Wm,a=this.Hf,c=h.P.truncate(this.Hf/2),p=this.Wm,f=h.P.truncate((2*c+31)/32);8<a;){for(a=0;a<c;a++)for(var m=2*a,b=2*a+1,S=0;S<c;S++){var M=2*S,T=2*S+1,k=M>>4;M=2*(15&M);var C=T>>4;T=2*(15&T);var N=this.Xh[r+p*m+k]>>M&3;N|=this.Xh[r+p*m+C]>>T&3,N|=this.Xh[r+p*b+k]>>M&3,N|=this.Xh[r+p*b+C]>>T&3,this.Xh[n+f*a+(S>>4)]|=N<<2*(15&S)}a=c,p=f,r=n,c=h.P.truncate(a/2),f=h.P.truncate((2*c+31)/32),n=r+p*a}},o.prototype.To=function(r,n){return this.xl.contains(r,n)?(r=this.mC(r),n=this.nC(n),0>r||r>=this.Hf||0>n||n>=this.Hf||(n=this.Xh[this.Wm*n+(r>>4)]>>2*(15&r)&3)==0?0:n==1?1:2):0},o.prototype.So=function(r){if(!r.Fa(this.xl))return 0;var n=this.mC(r.v),a=this.mC(r.C),c=this.nC(r.G);if(r=this.nC(r.H),0>n&&(n=0),0>c&&(c=0),a>=this.Hf&&(a=this.Hf-1),r>=this.Hf&&(r=this.Hf-1),n>a||c>r)return 0;for(var p=Math.max(a-n,1)*Math.max(r-c,1),f=0,m=this.Wm,b=this.Hf,S=0;;){if(32>p||16>b){for(p=c;p<=r;p++)for(var M=n;M<=a;M++)if(1<(S=this.Xh[f+m*p+(M>>4)]>>2*(15&M)&3))return 2;if(S==0)return 0;if(S==1)return 1}f+=m*b,b=h.P.truncate(b/2),m=h.P.truncate((2*b+31)/32),n=h.P.truncate(n/2),c=h.P.truncate(c/2),a=h.P.truncate(a/2),r=h.P.truncate(r/2),p=Math.max(a-n,1)*Math.max(r-c,1)}},o.prototype.KR=function(){return this.Hf*this.Wm},o}();h.Mx=u}(q||(q={})),function(h){var A;(A=h.PL||(h.PL={}))[A.contains=1]="contains",A[A.within=2]="within",A[A.equals=3]="equals",A[A.disjoint=4]="disjoint",A[A.touches=8]="touches",A[A.crosses=16]="crosses",A[A.overlaps=32]="overlaps",A[A.unknown=0]="unknown",A[A.intersects=1073741824]="intersects";var w=function(){function o(){}return o.construct=function(r,n,a,c,p,f,m,b){var S=new o;return S.rw=r,S.Om=n,S.Mj=a,S.Ui=c,S.vH=p,S.KY=f,S.LY=m,S.MY=b,S},o}();h.Xt=function(){function o(){}return o.wD=function(r,n,a){if(o.ry(r)){var c=h.ta.mj(n,r,!1);n=!1,h.Vk.wE(r)&&(n=n||r.nu(c,a)),(c=r.K())!=1736&&c!=1607||!h.Vk.uE(r)||a==0||(n=n||r.hj(a)),c!=1736&&c!=1607||!h.Vk.vE(r)||a==0||n||r.bM()}},o.ry=function(r){return h.Vk.wE(r)||h.Vk.uE(r)||h.Vk.vE(r)},o}();var u=function(){function o(){this.th=[]}return o.tB=function(r,n,a,c,p){var f=r.K(),m=n.K();if(f==197){if(m==197)return o.lW(r,n,a,c);if(m==33)return c==2?c=1:c==1&&(c=2),o.bJ(n,r,a,c)}else if(f==33){if(m==197)return o.bJ(r,n,a,c);if(m==33)return o.nW(r,n,a,c)}if(r.B()||n.B())return c==4;var b=new h.l;r.A(b);var S=new h.l;n.A(S);var M=new h.l;if(M.L(b),M.$b(S),a=h.ta.Xd(a,M,!1),o.ek(b,S,a))return c==4;switch(b=!1,h.Wk.zd(f)&&((f=new h.Ua(r.description)).oc(r,!0),r=f,f=1607),h.Wk.zd(m)&&((m=new h.Ua(n.description)).oc(n,!0),n=m,m=1607),f!=197&&m!=197?(r.Eb()<n.Eb()||f==33&&m==550)&&(c==2?c=1:c==1&&(c=2)):f!=1736&&m!=197&&(c==2?c=1:c==1&&(c=2)),f){case 1736:switch(m){case 1736:b=o.st(r,n,a,c,p);break;case 1607:b=o.bn(r,n,a,c,p);break;case 33:b=o.rt(r,n,a,c);break;case 550:b=o.qt(r,n,a,c,p);break;case 197:b=o.AI(r,n,a,c,p)}break;case 1607:switch(m){case 1736:b=o.bn(n,r,a,c,p);break;case 1607:b=o.aB(r,n,a,c,p);break;case 33:b=o.ut(r,n,a,c,p);break;case 550:b=o.tt(r,n,a,c,p);break;case 197:b=o.GI(r,n,a,c)}break;case 33:switch(m){case 1736:b=o.rt(n,r,a,c);break;case 1607:b=o.ut(n,r,a,c,p);break;case 550:b=o.mt(n,r,a,c)}break;case 550:switch(m){case 1736:b=o.qt(n,r,a,c,p);break;case 1607:b=o.tt(n,r,a,c,p);break;case 550:b=o.TA(r,n,a,c,p);break;case 33:b=o.mt(r,n,a,c);break;case 197:b=o.bI(r,n,a,c)}break;case 197:switch(m){case 1736:b=o.AI(n,r,a,c,p);break;case 1607:b=o.GI(n,r,a,c);break;case 550:b=o.bI(n,r,a,c)}}return b},o.lW=function(r,n,a,c){if(r.B()||n.B())return c==4;var p=new h.l,f=new h.l,m=new h.l;switch(r.A(p),n.A(f),m.L(p),m.$b(f),r=h.ta.Xd(a,m,!1),c){case 4:return o.ek(p,f,r);case 2:return o.dF(f,p,r);case 1:return o.dF(p,f,r);case 3:return o.fk(p,f,r);case 8:return o.XP(p,f,r);case 32:return o.WP(p,f,r);case 16:return o.VP(p,f,r)}return!1},o.bJ=function(r,n,a,c){if(r.B()||n.B())return c==4;r=r.D();var p=new h.l,f=new h.l;switch(n.A(p),f.L(r),f.$b(p),n=h.ta.Xd(a,f,!1),c){case 4:return o.Tw(r,p,n);case 2:return o.ZA(r,p,n);case 1:return o.JU(r,p,n);case 3:return o.pI(r,p,n);case 8:return o.YA(r,p,n)}return!1},o.nW=function(r,n,a,c){if(r.B()||n.B())return c==4;r=r.D(),n=n.D();var p=new h.l;switch(p.L(r),p.$b(n),a=h.ta.Xd(a,p,!1),c){case 4:return o.KU(r,n,a);case 2:return o.oI(n,r,a);case 1:return o.oI(r,n,a);case 3:return o.qI(r,n,a)}return!1},o.st=function(r,n,a,c,p){switch(c){case 4:return o.cV(r,n,a);case 2:return o.Uw(n,r,a,p);case 1:return o.Uw(r,n,a,p);case 3:return o.fV(r,n,a);case 8:return o.nV(r,n,a);case 32:return o.iV(r,n,a,p)}return!1},o.bn=function(r,n,a,c,p){switch(c){case 4:return o.dV(r,n,a);case 1:return o.$A(r,n,a,p);case 8:return o.oV(r,n,a,p);case 16:return o.ZU(r,n,a)}return!1},o.rt=function(r,n,a,c){switch(c){case 4:return o.bV(r,n,a);case 1:return o.WU(r,n,a);case 8:return o.mV(r,n,a)}return!1},o.qt=function(r,n,a,c){switch(c){case 4:return o.aV(r,n,a);case 1:return o.VU(r,n,a);case 8:return o.lV(r,n,a);case 16:return o.YU(r,n,a)}return!1},o.AI=function(r,n,a,c,p){if(o.$U(r,n,a))return c==4;if(c==4)return!1;switch(c){case 2:return o.pV(r,n,a);case 1:return o.UU(r,n,a);case 3:return o.eV(r,n,a);case 8:return o.kV(r,n,a,p);case 32:return o.hV(r,n,a,p);case 16:return o.XU(r,n,a,p)}return!1},o.aB=function(r,n,a,c){switch(c){case 4:return o.yV(r,n,a);case 2:return o.EI(n,r,a);case 1:return o.EI(r,n,a);case 3:return o.AV(r,n,a);case 8:return o.HI(r,n,a);case 32:return o.EV(r,n,a);case 16:return o.FI(r,n,a)}return!1},o.ut=function(r,n,a,c){switch(c){case 4:return o.xV(r,n,a);case 1:return o.sV(r,n,a);case 8:return o.IV(r,n,a)}return!1},o.tt=function(r,n,a,c){switch(c){case 4:return o.wV(r,n,a);case 1:return o.rV(r,n,a);case 8:return o.HV(r,n,a);case 16:return o.uV(r,n,a)}return!1},o.GI=function(r,n,a,c){if(o.vV(r,n,a))return c==4;if(c==4)return!1;switch(c){case 2:return o.JV(r,n,a);case 1:return o.qV(r,n,a);case 3:return o.zV(r,n,a);case 8:return o.GV(r,n,a);case 32:return o.DV(r,n,a);case 16:return o.tV(r,n,a)}return!1},o.TA=function(r,n,a,c){switch(c){case 4:return o.ZT(r,n,a);case 2:return o.ZH(n,r,a);case 1:return o.ZH(r,n,a);case 3:return o.aU(r,n,a);case 32:return o.gU(r,n,a)}return!1},o.mt=function(r,n,a,c){switch(c){case 4:return o.$H(r,n,a);case 2:return o.kU(r,n,a);case 1:return o.WT(r,n,a);case 3:return o.Pw(r,n,a)}return!1},o.bI=function(r,n,a,c){switch(c){case 4:return o.YT(r,n,a);case 2:return o.jU(r,n,a);case 1:return o.VT(r,n,a);case 3:return o.$T(r,n,a);case 8:return o.iU(r,n,a);case 16:return o.XT(r,n,a)}return!1},o.fV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.fk(c,p,a)&&(c=o.qc(r,n,!1))!=4&&c!=1&&c!=2&&(!!o.YH(r,n,a)||(c=r.Rb(),p=n.Rb(),!(Math.abs(c-p)>4*Math.max(r.I(),n.I())*a)&&o.Rz(r,n,a,!0)))},o.cV=function(r,n,a){var c=o.qc(r,n,!0);return c==4||c!=1&&c!=2&&c!=1073741824&&o.yI(r,n,a)},o.nV=function(r,n,a){var c=o.qc(r,n,!1);return c!=4&&c!=1&&c!=2&&o.CI(r,n,a,null)},o.iV=function(r,n,a,c){var p=o.qc(r,n,!1);return p!=4&&p!=1&&p!=2&&o.zI(r,n,a,c)},o.Uw=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!!o.Ac(p,f,a)&&(p=o.qc(r,n,!1))!=4&&p!=2&&(p==1||o.vI(r,n,a,c))},o.dV=function(r,n,a){var c=o.qc(r,n,!0);return c==4||c!=1&&c!=1073741824&&o.yI(r,n,a)},o.oV=function(r,n,a,c){var p=o.qc(r,n,!1);return p!=4&&p!=1&&o.DI(r,n,a,c)},o.ZU=function(r,n,a){var c=o.qc(r,n,!1);return c!=4&&c!=1&&o.xI(r,n,a,null)},o.$A=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!!o.Ac(p,f,a)&&(p=o.qc(r,n,!1))!=4&&(p==1||o.wI(r,n,a,c))},o.bV=function(r,n,a){return h.jd.EG(r,n,a)==0},o.mV=function(r,n,a){return n=n.D(),o.BI(r,n,a)},o.WU=function(r,n,a){return n=n.D(),o.uI(r,n,a)},o.aV=function(r,n,a){var c=o.qc(r,n,!1);if(c==4)return!0;if(c==1)return!1;c=new h.l,r.A(c),c.X(a,a);for(var p=new h.h,f=0;f<n.I();f++)if(n.D(f,p),c.contains(p)){var m=h.jd.Zd(r,p,a);if(m==1||m==2)return!1}return!0},o.lV=function(r,n,a){var c=this.qc(r,n,!1);if(c==4||c==1)return!1;c=new h.l,r.A(c),c.X(a,a);for(var p=!1,f=r,m=!1,b=0;b<n.I();b++){var S=n.Oa(b);if(c.contains(S)){if((S=h.jd.Zd(f,S,a))==2)p=!0;else if(S==1)return!1}m||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?f=r:(f=new h.Ea,r.copyTo(f),f.hj(1)),m=!0)}return!!p},o.YU=function(r,n,a){var c=this.qc(r,n,!1);if(c==4||c==1)return!1;var p=new h.l;c=new h.l;var f=new h.l;r.A(p),n.A(f),c.L(p),c.X(a,a),f=p=!1;for(var m=r,b=!1,S=0;S<n.I();S++){var M=n.Oa(S);if(c.contains(M)?(M=h.jd.Zd(m,M,a))==0?f=!0:M==1&&(p=!0):f=!0,p&&f)return!0;b||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?m=r:(m=new h.Ea,r.copyTo(m),m.hj(1)),b=!0)}return!1},o.VU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!this.Ac(c,p,a)||(p=this.qc(r,n,!1))==4)return!1;if(p==1)return!0;p=!1;for(var f=r,m=!1,b=0;b<n.I();b++){var S=n.Oa(b);if(!c.contains(S))return!1;if((S=h.jd.Zd(f,S,a))==1)p=!0;else if(S==0)return!1;m||(!h.Fg.Ol(r,n.I()-1)||r.Cb!=null&&r.Cb.Gb!=null?f=r:(f=new h.Ea,r.copyTo(f),f.hj(1)),m=!0)}return p},o.eV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.fk(c,p,a)&&((c=new h.Ea).bd(n,!1),o.Rz(r,c,a,!0))},o.$U=function(r,n,a){var c=o.qc(r,n,!1);if(c==4)return!0;if(c==1||c==2)return!1;var p=new h.l;if(c=new h.l,r.A(p),n.A(c),o.Ac(c,p,a)||(p=new h.h,c.fn(p),(n=h.jd.Zd(r,p,a))!=0)||(c.UI(p),(n=h.jd.Zd(r,p,a))!=0)||(c.gn(p),(n=h.jd.Zd(r,p,a))!=0)||(c.XI(p),(n=h.jd.Zd(r,p,a))!=0))return!1;n=r.vb(0),(p=new h.l).L(c),p.X(a,a);for(var f=0,m=r.I();f<m;f++){var b=n.read(2*f),S=n.read(2*f+1);if(p.contains(b,S))return!1}return!o.MG(r,c,a)},o.kV=function(r,n,a,c){var p=o.qc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return r.A(p),n.A(f),!o.Ac(f,p,a)&&(f.S()<=a&&f.da()<=a?(n=n.Kp(),o.BI(r,n,a)):f.S()<=a||f.da()<=a?(p=new h.Ua,f=new h.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.DI(r,p,a,c)):((p=new h.Ea).bd(n,!1),o.CI(r,p,a,c)))},o.hV=function(r,n,a,c){var p=o.qc(r,n,!1);if(p==4||p==1||p==2)return!1;p=new h.l;var f=new h.l;return r.A(p),n.A(f),!(o.Ac(f,p,a)||f.S()<=a||f.da()<=a)&&((p=new h.Ea).bd(n,!1),o.zI(r,p,a,c))},o.pV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.Ac(p,c,a)},o.UU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.Ac(c,p,a)&&(c=o.qc(r,n,!1))!=4&&c!=2&&(c==1||(p.S()<=a&&p.da()<=a?(n=n.Kp(),o.uI(r,n,a)):p.S()<=a||p.da()<=a?(p=new h.Ua,c=new h.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.wI(r,p,a,null)):((p=new h.Ea).bd(n,!1),o.vI(r,p,a,null))))},o.XU=function(r,n,a,c){var p=new h.l,f=new h.l;return r.A(p),n.A(f),!(o.Ac(f,p,a)||f.da()>a&&f.S()>a||f.da()<=a&&f.S()<=a)&&(p=new h.Ua,f=new h.Ta,n.If(0,f),p.nf(f),n.If(2,f),p.lineTo(f),o.xI(r,p,a,c))},o.AV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.fk(c,p,a)||o.qc(r,n,!1)==4)&&(!!o.YH(r,n,a)||o.Rz(r,n,a,!1))},o.yV=function(r,n,a){return this.qc(r,n,!1)==4||!!new h.am(r,n,a,!0).next()&&!this.NG(r,n,a)},o.HI=function(r,n,a){if(o.qc(r,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(r,n,a,c)!=0)return!1;for(var p=new h.de,f=0;f<c.size;f+=2){var m=c.read(f),b=c.read(f+1);p.Du(m,b)}return r=r.mg(),n=n.mg(),r.Gd(n,0,n.I()),o.Ow(r,p,a)},o.FI=function(r,n,a){if(o.qc(r,n,!1)==4)return!1;var c=new h.ce(0);if(o.Sz(r,n,a,c)!=0)return!1;for(var p=new h.de,f=0;f<c.size;f+=2){var m=c.read(f),b=c.read(f+1);p.Du(m,b)}return r=r.mg(),n=n.mg(),r.Gd(n,0,n.I()),!o.Ow(r,p,a)},o.EV=function(r,n,a){return o.qc(r,n,!1)!=4&&o.PG(r,n,a)},o.EI=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,a)||o.qc(r,n,!1)==4)&&o.Am(n,r,a,!1)},o.xV=function(r,n,a){return o.qc(r,n,!1)==4||(n=n.D(),!o.Tz(r,n,a))},o.IV=function(r,n,a){return o.qc(r,n,!1)!=4&&(n=n.D(),o.Uz(r,n,a))},o.sV=function(r,n,a){return o.qc(r,n,!1)!=4&&(n=n.D(),o.LG(r,n,a))},o.wV=function(r,n,a){return o.qc(r,n,!1)==4||!o.OG(r,n,a,!1)},o.HV=function(r,n,a){if(this.qc(r,n,!1)==4)return!1;var c=r.Ha(),p=new h.l,f=new h.l,m=new h.l;r.A(p),n.A(f),p.X(a,a),f.X(a,a),m.L(p),m.Fa(f),p=null;var b=r.Cb;if(b!=null){var S=b.Gb;p=b.Ao,S==null&&(S=b=h.ta.lj(r,m))}else S=b=h.ta.lj(r,m);var M=S.getIterator(),T=null;p!=null&&(T=p.getIterator());var k=new h.h,C=new h.h,N=!1,F=a*a;for(p=new h.rn(n.I()),b=0;b<n.I();b++)p.write(b,0);for(b=0;b<n.I();b++)if(n.D(b,k),m.contains(k)){if(f.L(k.x,k.y,k.x,k.y),T!=null&&(T.Zi(f,a),T.next()==-1))continue;M.Zi(f,a);for(var D=M.next();D!=-1;D=M.next())if(c.Wb(S.ka(D)),(D=c.ia()).ic(D.fe(k,!1),C),h.h.zc(k,C)<=F){p.write(b,1),N=!0;break}}if(!N)return!1;for(r=r.mg(),c=new h.de,f=new h.h,b=0;b<n.I();b++)p.read(b)!=0&&(n.D(b,f),c.Du(f.x,f.y));return this.Ow(r,c,a)},o.uV=function(r,n,a){if(this.qc(r,n,!1)==4)return!1;var c=r.Ha(),p=new h.l,f=new h.l,m=new h.l;r.A(p),n.A(f),p.X(a,a),f.X(a,a),m.L(p),m.Fa(f),p=null;var b=r.Cb;if(b!=null){var S=b.Gb;p=b.Ao,S==null&&(S=b=h.ta.lj(r,m))}else S=b=h.ta.lj(r,m);var M=S.getIterator(),T=null;p!=null&&(T=p.getIterator());var k=new h.h,C=new h.h,N=!1,F=!1,D=a*a;for(p=new h.rn(n.I()),b=0;b<n.I();b++)p.write(b,0);for(b=0;b<n.I();b++)if(n.D(b,k),m.contains(k)){if(f.L(k.x,k.y,k.x,k.y),T!=null&&(T.Zi(f,a),T.next()==-1)){F=!0;continue}M.Zi(f,a);for(var j=!1,G=M.next();G!=-1;G=M.next())if(c.Wb(S.ka(G)),(G=c.ia()).ic(G.fe(k,!1),C),h.h.zc(k,C)<=D){p.write(b,1),j=N=!0;break}j||(F=!0)}else F=!0;if(!N||!F)return!1;for(r=r.mg(),c=new h.de,f=new h.h,b=0;b<n.I();b++)p.read(b)!=0&&(n.D(b,f),c.Du(f.x,f.y));return!this.Ow(r,c,a)},o.rV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,a)||o.qc(r,n,!1)==4||!o.OG(r,n,a,!0))&&(r=r.mg(),!o.aI(r,n,a))},o.zV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.da()>a&&p.S()>a)&&o.fk(c,p,a)},o.vV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!o.Ac(p,c,a)&&!o.MG(r,p,a)},o.GV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),p.da()<=a&&p.S()<=a)return p=n.Kp(),o.Uz(r,p,a);if(p.da()<=a||p.S()<=a)return p=new h.Ua,c=new h.Ta,n.If(0,c),p.nf(c),n.If(2,c),p.lineTo(c),o.HI(r,p,a);r=r.Ha(),n=new h.l,c=new h.l,n.L(p),c.L(p),n.X(-a,-a),c.X(a,a),p=!1;for(var f=new h.l,m=new h.l;r.ab();)for(;r.Ia();){if(r.ia().A(f),m.L(n),m.Fa(f),!m.B()&&(m.da()>a||m.S()>a))return!1;m.L(c),m.Fa(f),m.B()||(p=!0)}return p},o.DV=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(o.Ac(c,p,a)||o.Ac(p,c,a)||o.Ac(p,c,a)||p.da()>a&&p.S()>a||p.da()<=a&&p.S()<=a)&&(c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.PG(r,c,a))},o.JV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.Ac(p,c,a)||p.da()<=a&&p.S()<=a)return!1;if(p.da()<=a||p.S()<=a)return o.Ac(p,c,a);r=r.Ha(),(n=new h.l).L(p),n.X(-a,-a),p=!1,c=new h.l;for(var f=new h.l;r.ab();)for(;r.Ia();)r.ia().A(c),n.jm(c)?p=!0:(f.L(n),f.Fa(c),!f.B()&&(f.da()>a||f.S()>a)&&(p=!0));return p},o.qV=function(r,n,a){var c=new h.l,p=new h.l;return n.A(p),r.A(c),!(!o.Ac(c,p,a)||p.da()>a&&p.S()>a)&&(p.da()<=a&&p.S()<=a?(n=n.Kp(),o.LG(r,n,a)):(c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.Am(c,r,a,!1)))},o.tV=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,a)||p.da()<=a&&p.S()<=a)return!1;if(p.da()<=a||p.S()<=a)return c=new h.Ua,p=new h.Ta,n.If(0,p),c.nf(p),n.If(2,p),c.lineTo(p),o.FI(r,c,a);r=r.Ha(),n=new h.l,(c=new h.l).L(p),n.L(p),c.X(-a,-a),n.X(a,a);for(var f=p=!1,m=new h.l,b=new h.l;r.ab();)for(;r.Ia();)if(r.ia().A(m),f||n.contains(m)||(f=!0),p||(b.L(c),b.Fa(m),!b.B()&&(b.da()>a||b.S()>a)&&(p=!0)),p&&f)return!0;return!1},o.aU=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.fk(c,p,a)&&(!!o.bU(r,n,a)||o.SA(r,n,a,!1,!0,!1))},o.ZT=function(r,n,a){return!o.aI(r,n,a)},o.gU=function(r,n,a){return o.SA(r,n,a,!1,!1,!0)},o.ZH=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!!o.Ac(c,p,a)&&o.SA(n,r,a,!0,!1,!1)},o.Ow=function(r,n,a){a*=a;for(var c=new h.h,p=new h.h,f=0;f<n.I();f++){n.D(f,p);for(var m=!1,b=0;b<r.I();b++)if(r.D(b,c),h.h.zc(c,p)<=a){m=!0;break}if(!m)return!1}return!0},o.Pw=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),o.fk(c,p,a)},o.$H=function(r,n,a){return n=n.D(),o.lt(r,n,a)},o.kU=function(r,n,a){return o.Pw(r,n,a)},o.WT=function(r,n,a){return!o.$H(r,n,a)},o.$T=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(p.da()>a||p.S()>a)&&o.fk(c,p,a)},o.YT=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,a))return!1;for((n=new h.l).L(p),n.X(a,a),a=new h.h,p=0;p<r.I();p++)if(r.D(p,a),n.contains(a))return!1;return!0},o.iU=function(r,n,a){var c=new h.l,p=new h.l,f=new h.l;if(n.A(c),c.da()<=a&&c.S()<=a)return!1;if(c.da()<=a||c.S()<=a){n=new h.h;var m=!1;p.L(c),f.L(c),p.X(a,a),c.da()>a?f.X(0,-a):f.X(-a,0);for(var b=0;b<r.I();b++)if(r.D(b,n),p.contains(n)){if(c.da()>a){if(n.y>f.G&&n.y<f.H)return!1}else if(n.x>f.v&&n.x<f.C)return!1;m=!0}return m}for(p.L(c),f.L(c),p.X(a,a),f.X(-a,-a),n=new h.h,m=!1,b=0;b<r.I();b++)if(r.D(b,n),p.contains(n)){if(f.jm(n))return!1;m=!0}return m},o.jU=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),!o.Ac(p,c,a))return!1;if(p.da()<=a&&p.S()<=a)return o.fk(c,p,a);if(p.da()<=a||p.S()<=a){n=!1,c=new h.l;var f=new h.l;c.L(p),f.L(p),p.da()>a?c.X(0,-a):c.X(-a,0),f.X(a,a);for(var m=new h.h,b=0;b<r.I();b++){if(r.D(b,m),!f.contains(m))return!1;p.da()>a?m.y>c.G&&m.y<c.H&&(n=!0):m.x>c.v&&m.x<c.C&&(n=!0)}return n}for(n=!1,c=new h.l,f=new h.l,c.L(p),f.L(p),c.X(-a,-a),f.X(a,a),m=new h.h,b=0;b<r.I();b++){if(r.D(b,m),!f.contains(m))return!1;c.jm(m)&&(n=!0)}return n},o.VT=function(r,n,a){var c=new h.l,p=new h.l;return r.A(c),n.A(p),!(!o.Ac(c,p,a)||p.da()>a||p.S()>a)&&(n=n.Kp(),!o.lt(r,n,a))},o.XT=function(r,n,a){var c=new h.l,p=new h.l;if(r.A(c),n.A(p),o.Ac(p,c,a)||p.da()<=a&&p.S()<=a)return!1;if(p.da()<=a||p.S()<=a){n=new h.l,c=new h.l,n.L(p),p.da()>a?n.X(0,-a):n.X(-a,0),c.L(p),c.X(a,a);for(var f=new h.h,m=!1,b=!1,S=0;S<r.I();S++)if(r.D(S,f),m||(p.da()>a?f.y>n.G&&f.y<n.H&&(m=!0):f.x>n.v&&f.x<n.C&&(m=!0)),b||c.contains(f)||(b=!0),m&&b)return!0;return!1}for(n=new h.l,c=new h.l,n.L(p),n.X(-a,-a),c.L(p),c.X(a,a),f=new h.h,b=m=!1,S=0;S<r.I();S++)if(r.D(S,f),!m&&n.jm(f)&&(m=!0),b||c.contains(f)||(b=!0),m&&b)return!0;return!1},o.qI=function(r,n,a){return h.h.zc(r,n)<=a*a},o.KU=function(r,n,a){return h.h.zc(r,n)>a*a},o.oI=function(r,n,a){return o.qI(r,n,a)},o.pI=function(r,n,a){var c=new h.l;return c.L(r),o.fk(c,n,a)},o.Tw=function(r,n,a){var c=new h.l;return c.L(n),c.X(a,a),!c.contains(r)},o.YA=function(r,n,a){if(n.da()<=a&&n.S()<=a)return!1;var c=new h.l,p=new h.l;if(c.L(n),c.X(a,a),!c.contains(r))return!1;if(n.da()<=a||n.S()<=a){if(p.L(n),n.da()>a?p.X(0,-a):p.X(-a,0),n.da()>a){if(r.y>p.G&&r.y<p.H)return!1}else if(r.x>p.v&&r.x<p.C)return!1;return!0}return p.L(n),p.X(-a,-a),!p.jm(r)},o.ZA=function(r,n,a){if(n.da()<=a&&n.S()<=a)return!0;if(n.da()<=a||n.S()<=a){var c=new h.l;c.L(n),n.da()>a?c.X(0,-a):c.X(-a,0);var p=!1;return n.da()>a?r.y>c.G&&r.y<c.H&&(p=!0):r.x>c.v&&r.x<c.C&&(p=!0),p}return(c=new h.l).L(n),c.X(-a,-a),c.jm(r)},o.JU=function(r,n,a){return o.pI(r,n,a)},o.fk=function(r,n,a){return o.Ac(r,n,a)&&o.Ac(n,r,a)},o.ek=function(r,n,a){var c=new h.l;return c.L(n),c.X(a,a),!r.isIntersecting(c)},o.XP=function(r,n,a){if(r.da()<=a&&r.S()<=a){var c=r.tf();return o.YA(c,n,a)}if(n.da()<=a&&n.S()<=a)return c=n.tf(),o.YA(c,r,a);if(r.da()>a&&r.S()>a&&(n.da()<=a||n.S()<=a)?c=n:(c=r,r=n),c.da()<=a||c.S()<=a){if(r.da()<=a||r.S()<=a){n=new h.zb;var p=new h.zb,f=[0,0],m=[0,0],b=new h.h;return c.fn(b),n.Ec(b),c.gn(b),n.Rc(b),r.fn(b),p.Ec(b),r.gn(b),p.Rc(b),n.Fa(p,null,f,m,a),n.Fa(p,null,null,null,a)==1&&(f[0]==0||f[1]==1||m[0]==0||m[1]==1)}return n=new h.l,p=new h.l,n.L(r),n.X(-a,-a),p.L(n),p.Fa(c),!(!p.B()&&(p.da()>a||p.S()>a))}return r.X(a,a),(p=new h.l).L(c),p.Fa(r),!(p.B()||!p.B()&&p.da()>a&&p.S()>a)},o.WP=function(r,n,a){if(o.Ac(r,n,a)||o.Ac(n,r,a)||r.da()<=a&&r.S()<=a||n.da()<=a&&n.S()<=a)return!1;if(r.da()<=a||r.S()<=a){if(n.da()>a&&n.S()>a)return!1;var c=new h.zb,p=new h.zb,f=[0,0],m=[0,0],b=new h.h;return r.fn(b),c.Ec(b),r.gn(b),c.Rc(b),n.fn(b),p.Ec(b),n.gn(b),p.Rc(b),c.Fa(p,null,f,m,a),c.Fa(p,null,null,null,a)==2&&(0<f[0]||1>f[1])&&(0<m[0]||1>m[1])}return!(n.da()<=a||n.S()<=a)&&((c=new h.l).L(r),c.Fa(n),!(c.B()||c.da()<=a||c.S()<=a))},o.dF=function(r,n,a){if(!o.Ac(r,n,a))return!1;if(r.da()<=a&&r.S()<=a)return r=r.tf(),o.ZA(r,n,a);if(n.da()<=a&&n.S()<=a)return n=n.tf(),o.ZA(n,r,a);if(r.da()<=a||r.S()<=a)return o.Ac(r,n,a);if(n.da()<=a||n.S()<=a){var c=new h.l;return c.L(r),c.X(-a,-a),c.jm(n)?!0:((r=new h.l).L(c),r.Fa(n),!(r.B()||r.da()<=a&&r.S()<=a))}return o.Ac(r,n,a)},o.VP=function(r,n,a){if(o.Ac(r,n,a)||o.Ac(n,r,a)||r.da()<=a&&r.S()<=a||n.da()<=a&&n.S()<=a||n.da()>a&&n.S()>a&&r.da()>a&&r.S()>a)return!1;if(r.da()>a&&r.S()>a)var c=n;else c=r,r=n;if(r.da()>a&&r.S()>a){n=new h.l;var p=new h.l;return p.L(r),p.X(-a,-a),n.L(p),n.Fa(c),!(n.B()||n.da()<=a&&n.S()<=a)}n=new h.zb,p=new h.zb;var f=[0,0],m=[0,0],b=new h.h;return c.fn(b),n.Ec(b),c.gn(b),n.Rc(b),r.fn(b),p.Ec(b),r.gn(b),p.Rc(b),n.Fa(p,null,f,m,a),n.Fa(p,null,null,null,a)==1&&0<f[0]&&1>f[1]&&0<m[0]&&1>m[1]},o.yI=function(r,n,a){var c=new h.l,p=new h.l,f=new h.am(r,n,a,!0);if(!f.next())return!0;if(this.NG(r,n,a))return!1;var m=r,b=null;n.K()==1736&&(b=n);var S=!1,M=!1;do{var T=f.pl(),k=f.jl();if(k=n.Oa(n.Ca(k)),c.L(f.oz()),c.X(a,a),c.contains(k)&&(k=h.jd.Zd(m,k,0))!=0||n.K()==1736&&(T=r.Oa(r.Ca(T)),p.L(f.Wy()),p.X(a,a),p.contains(T)&&(k=h.jd.Zd(b,T,0))!=0))return!1;S||(!h.Fg.Ol(r,n.ea()-1)||r.Cb!=null&&r.Cb.Gb!=null?m=r:(m=new h.Ea,r.copyTo(m),m.hj(1)),S=!0),n.K()!=1736||M||(M=n,!h.Fg.Ol(M,r.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?b=n:(b=new h.Ea,M.copyTo(b),b.hj(1)),M=!0)}while(f.next());return!0},o.Ac=function(r,n,a){var c=new h.l;return c.L(r),c.X(a,a),c.contains(n)},o.ns=function(r,n,a){var c=new h.l;return c.L(n),c.X(a,a),n=new h.h,r.fn(n),!c.contains(n)||(r.UI(n),!c.contains(n)||(r.XI(n),!c.contains(n)||(r.gn(n),!c.contains(n))))},o.YH=function(r,n,a){if(r.ea()!=n.ea()||r.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;a*=a;for(var m=0;m<r.ea();m++){if(r.Wc(m)!=n.Wc(m)){f=!1;break}for(var b=r.Ca(m);b<n.Wc(m);b++)if(r.D(b,c),n.D(b,p),h.h.zc(c,p)>a){f=!1;break}if(!f)break}return!!f},o.bU=function(r,n,a){if(r.I()!=n.I())return!1;var c=new h.h,p=new h.h,f=!0;a*=a;for(var m=0;m<r.I();m++)if(r.D(m,c),n.D(m,p),h.h.zc(c,p)>a){f=!1;break}return!!f},o.SA=function(r,n,a,c,p,f){var m=!1;if(r.I()>n.I()){c&&(c=!1,m=!0);var b=n}else b=r,r=n;if(n=null,p||f||m){n=new h.rn(r.I());for(var S=0;S<r.I();S++)n.write(S,0)}S=new h.l;var M=new h.l,T=new h.l;b.A(S),r.A(M),S.X(a,a),M.X(a,a),T.L(S),T.Fa(M),M=new h.h;for(var k=new h.h,C=!0,N=h.ta.iE(r,T),F=N.getIterator(),D=a*a,j=0;j<b.I();j++)if(b.D(j,M),T.contains(M)){var G=!1;S.L(M.x,M.y,M.x,M.y),F.Zi(S,a);for(var W=F.next();W!=-1&&(W=N.ka(W),r.D(W,k),!(h.h.zc(M,k)<=D&&((p||f||m)&&n.write(W,1),G=!0,c)));W=F.next());if(!G&&(C=!1,p||c))return!1}else{if(p||c)return!1;C=!1}if(f&&C)return!1;if(c)return!0;for(S=0;S<r.I();S++)if(n.read(S)==1){if(f)return!0}else if(p||m)return!1;return!f},o.aI=function(r,n,a){if(r.I()>n.I())var c=n;else c=r,r=n;n=new h.l;var p=new h.l,f=new h.l;c.A(n),r.A(p),n.X(a,a),p.X(a,a),f.L(n),f.Fa(p),p=new h.h;for(var m=new h.h,b=a*a,S=h.ta.iE(r,f),M=S.getIterator(),T=0;T<c.I();T++)if(c.D(T,p),f.contains(p)){n.L(p.x,p.y,p.x,p.y),M.Zi(n,a);for(var k=M.next();k!=-1;k=M.next())if(r.D(S.ka(k),m),h.h.zc(p,m)<=b)return!0}return!1},o.Rz=function(r,n,a,c){return o.Am(r,n,a,c)&&o.Am(n,r,a,c)},o.Am=function(r,n,a,c){function p(de,we){return k.KE(de,we)}var f,m=!0,b=[0,0],S=[0,0],M=0,T=new h.ja(0),k=new o,C=new h.l,N=new h.l,F=new h.l;r.A(C),n.A(N),C.X(a,a),N.X(a,a),F.L(C),F.Fa(N),r=r.Ha(),N=n.Ha();var D=null,j=D=null,G=n.Cb;for(G!=null?(D=G.Gb,j=G.Ao,D==null&&(D=h.ta.lj(n,F))):D=h.ta.lj(n,F),n=D.getIterator(),G=null,j!=null&&(G=j.getIterator());r.ab();)for(;r.Ia();){var W=!1,J=r.ia();if(J.A(C),!C.isIntersecting(F)||G!=null&&(G.Zi(C,a),G.next()==-1))return!1;for(j=J.Rb(),n.Vo(J,a),f=n.next();f!=-1;f=n.next()){N.Wb(D.ka(f)),f=N.ia();var B=J.Fa(f,null,b,S,a);if(B==2&&(!c||S[0]<=S[1])){B=b[0];var Q=b[1],ue=S[0],ge=S[1];if(B*j<=a&&(1-Q)*j<=a){W=!0,M=0,T.resize(0),k.th.length=0;var ye=r.xb();for(ue=!0;ue;){if(r.Ia()){if(j=(J=r.ia()).Rb(),(B=J.Fa(f,null,b,S,a))==2&&(!c||S[0]<=S[1])&&(B=b[0],Q=b[1],B*j<=a&&(1-Q)*j<=a)){ye=r.xb();continue}if(N.Ia()&&(f=N.ia(),(B=J.Fa(f,null,b,S,a))==2&&(!c||S[0]<=S[1])&&(B=b[0],Q=b[1],B*j<=a&&(1-Q)*j<=a))){ye=r.xb();continue}}ue=!1}ye!=r.xb()&&(r.Wb(ye),r.ia());break}ye=r.xb(),f=w.construct(ye,r.gb,B,Q,N.xb(),N.gb,ue,ge),k.th.push(f),T.add(T.size)}}if(!W){if(M==k.th.length)return!1;for(1<T.size-M&&T.Wd(M,T.size,p),W=0;M<k.th.length;M++)if(!((f=k.th[T.get(M)]).Mj<W&&f.Ui<W)){if(j*(f.Mj-W)>a)return!1;if(j*(1-(W=f.Ui))<=a||W==1)break}if(j*(1-W)>a)return!1;M=0,T.resize(0),k.th.length=0}}return m},o.PG=function(r,n,a){if(1>o.Sz(r,n,a,null))return!1;var c=new h.l,p=new h.l;r.A(c),n.A(p);var f=o.ns(c,p,a);return c=o.ns(p,c,a),!(!f||!c)||(f&&!c?!o.Am(n,r,a,!1):c&&!f?!o.Am(r,n,a,!1):!o.Am(r,n,a,!1)&&!o.Am(n,r,a,!1))},o.Sz=function(r,n,a,c){function p(pt,dt){return C.KE(pt,dt)}if(r.sz()>n.sz())var f=n,m=r;else f=r,m=n;r=f.Ha(),n=m.Ha();var b=[0,0],S=[0,0],M=-1,T=0,k=new h.ja(0),C=new o,N=new h.l,F=new h.l,D=new h.l;f.A(N),m.A(F),N.X(a,a),F.X(a,a),D.L(N),D.Fa(F),f=null,c!=null&&(f=new h.h);var j=F=F=null,G=m.Cb;for(G!=null?(F=G.Gb,j=G.Ao,F==null&&(F=h.ta.lj(m,D))):F=h.ta.lj(m,D),m=F.getIterator(),G=null,j!=null&&(G=j.getIterator());r.ab();)for(j=0;r.Ia();){var W=r.ia();if(W.A(N),N.isIntersecting(D)){if(G!=null&&(G.Zi(N,a),G.next()==-1))continue;var J=W.Rb();m.Vo(W,a);for(var B=m.next();B!=-1;B=m.next()){var Q=F.ka(B);n.Wb(Q);var ue=n.ia(),ge=ue.Rb(),ye=W.Fa(ue,null,b,S,a);if(0<ye){B=b[0],M=S[0];var de=ye==2?b[1]:NaN,we=ye==2?S[1]:NaN;if(ye==2){if(J*(de-B)>a)return 1;var je=J*(de-B);if(n.Ia()){if(ue=n.ia(),(ye=W.Fa(ue,null,b,null,a))==2){ye=b[0];var Ve=b[1];if(je+(ye=J*(Ve-ye))>a)return 1}n.Wb(Q),n.ia()}if(!n.xm()){if(n.ni(),ue=n.ni(),(ye=W.Fa(ue,null,b,null,a))==2&&(ye=b[0],je+(ye=J*((Ve=b[1])-ye))>a))return 1;n.Wb(Q),n.ia()}if(r.Ia()){if(Q=r.xb(),(ye=(W=r.ia()).Fa(ue,null,b,null,a))==2&&(ye=b[0],je+(ye=J*((Ve=b[1])-ye))>a))return 1;r.Wb(Q),r.ia()}if(!r.xm()){if(Q=r.xb(),r.ni(),(ye=(W=r.ni()).Fa(ue,null,b,null,a))==2&&(ye=b[0],je+(ye=ge*((Ve=b[1])-ye))>a))return 1;r.Wb(Q),r.ia()}ue=w.construct(r.xb(),r.gb,B,de,n.xb(),n.gb,M,we),C.th.push(ue),k.add(k.size)}M=0,c!=null&&(W.ic(B,f),c.add(f.x),c.add(f.y))}}if(T<C.th.length){for(k.Wd(T,k.size,p),W=0,B=C.th[k.get(T)].Om;T<C.th.length;T++)if(!((ue=C.th[k.get(T)]).Mj<W&&ue.Ui<W))if(J*(ue.Mj-W)>a)j=J*(ue.Ui-ue.Mj),W=ue.Ui,B=ue.Om;else{if(ue.Om!=B?(j=J*(ue.Ui-ue.Mj),B=ue.Om):j+=J*(ue.Ui-ue.Mj),j>a)return 1;if((W=ue.Ui)==1)break}J*(1-W)>a&&(j=0),T=0,k.resize(0),C.th.length=0}}}return M},o.NG=function(r,n,a){var c=r.Ha(),p=n.Ha();for(r=new h.am(r,n,a,!1);r.next();){n=r.pl();var f=r.jl();if(c.Wb(n),p.Wb(f),n=c.ia(),0<p.ia().Fa(n,null,null,null,a))return!0}return!1},o.OG=function(r,n,a,c){var p=r.Ha(),f=new h.l,m=new h.l,b=new h.l;r.A(f),n.A(m),f.X(a,a),f.contains(m),m.X(a,a),b.L(f),b.Fa(m),(f=r.Cb)!=null?(f=f.Gb)==null&&(f=h.ta.lj(r,b)):f=h.ta.lj(r,b),r=f.getIterator();for(var S=new h.h,M=new h.h,T=a*a,k=0;k<n.I();k++)if(n.D(k,S),b.contains(S)){m.L(S.x,S.y,S.x,S.y),r.Zi(m,a);for(var C=!1,N=r.next();N!=-1;N=r.next())if(p.Wb(f.ka(N)),(N=p.ia()).ic(N.fe(S,!1),M),h.h.zc(M,S)<=T){C=!0;break}if(c){if(!C)return!1}else if(C)return!0}return!!c},o.Tz=function(r,n,a){var c=new h.h,p=a*a,f=r.Ha();if((r=r.Cb)!=null&&(r=r.Gb)!=null){var m=new h.l;for(m.L(n),m=(a=r.GF(m,a)).next();m!=-1;m=a.next())if(f.Wb(r.ka(m)),f.Ia()){var b=(m=f.ia()).fe(n,!1);if(m.ic(b,c),h.h.zc(n,c)<=p)return!0}return!1}for(r=new h.l;f.ab();)for(;f.Ia();)if((m=f.ia()).A(r),r.X(a,a),r.contains(n)&&(b=m.fe(n,!1),m.ic(b,c),h.h.zc(n,c)<=p))return!0;return!1},o.LG=function(r,n,a){return o.Tz(r,n,a)&&!o.Uz(r,n,a)},o.Uz=function(r,n,a){return r=r.mg(),!o.lt(r,n,a)},o.MG=function(r,n,a){if(r.vm()){var c=new h.zb(n.v,n.G,n.v,n.H),p=new h.zb(n.v,n.H,n.C,n.H),f=new h.zb(n.C,n.H,n.C,n.G);for(n=new h.zb(n.C,n.G,n.v,n.G),r=r.Ha();r.ab();)for(;r.Ia();){var m=r.ia();if(m.isIntersecting(c,a)||m.isIntersecting(p,a)||m.isIntersecting(f,a)||m.isIntersecting(n,a))return!0}}else{(c=new h.l).L(n),c.X(a,a),a=r.vb(0),p=new h.h,f=new h.h,n=new h.h,m=new h.h;for(var b=0,S=r.ea();b<S;b++)for(var M=!0,T=r.Ca(b),k=r.Wc(b);T<k;T++)if(M)a.uc(2*T,f),M=!1;else{if(a.uc(2*T,p),n.N(f),m.N(p),c.uy(n,m)!=0)return!0;f.N(p)}}return!1},o.qc=function(r,n,a){var c=r.K(),p=n.K();if(h.ba.zj(c)){var f=r.Cb;if(f!=null&&(f=f.Gk)!=null)if(p==33){var m=n.D();if((m=f.To(m.x,m.y))==1)return 1;if(m==0)return 4}else{if(m=new h.l,n.A(m),(m=f.So(m))==1)return 1;if(m==0)return 4;if(a&&h.ba.zj(p)&&o.BE(n,f))return 1073741824}}if(h.ba.zj(p)&&(f=n.Cb)!=null&&(f=f.Gk)!=null)if(c==33){if(r=r.D(),(m=f.To(r.x,r.y))==1)return 2;if(m==0)return 4}else{if(n=new h.l,r.A(n),(m=f.So(n))==1)return 2;if(m==0)return 4;if(a&&h.ba.zj(c)&&o.BE(r,f))return 1073741824}return 0},o.BE=function(r,n){for(var a=r.I(),c=new h.h,p=0;p<a;p++)if(r.D(p,c),n.To(c.x,c.y)==1)return!0;return!1},o.CI=function(r,n,a,c){for(var p=1<=r.qm(0)&&1<=n.qm(0),f=r.Ha(),m=n.Ha(),b=[0,0],S=[0,0],M=new h.am(r,n,a,!1),T=!1;M.next();){var k=M.pl(),C=M.jl();if(f.Wb(k),m.Wb(C),k=f.ia(),(C=m.ia().Fa(k,null,S,b,a))==2){if(T=b[0],C=b[1],k=k.Rb(),p&&(C-T)*k>a)return!1;T=!0}else if(C!=0){if(T=b[0],k=S[0],0<T&&1>T&&0<k&&1>k)return!1;T=!0}}return!!T&&(f=new h.l,m=new h.l,p=new h.l,r.A(f),n.A(m),f.X(1e3*a,1e3*a),m.X(1e3*a,1e3*a),p.L(f),p.Fa(m),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,a,0),n.B()))&&h.cm.st(r,n,a,"F********",c))},o.zI=function(r,n,a,c){var p=1<=r.qm(0)&&1<=n.qm(0),f=new h.l,m=new h.l,b=new h.l;r.A(f),n.A(m);for(var S=!1,M=o.ns(f,m,a),T=o.ns(m,f,a),k=r.Ha(),C=n.Ha(),N=[0,0],F=[0,0],D=new h.am(r,n,a,!1);D.next();){var j=D.pl(),G=D.jl();if(k.Wb(j),C.Wb(G),G=k.ia(),(j=C.ia().Fa(G,null,F,N,a))==2){j=N[0];var W=N[1];if(G=G.Rb(),p&&(W-j)*G>a&&(S=!0,M&&T))return!0}else if(j!=0&&(j=N[0],G=F[0],0<j&&1>j&&0<G&&1>G))return!0}if(p=new h.l,k=new h.l,p.L(f),p.X(1e3*a,1e3*a),k.L(m),k.X(1e3*a,1e3*a),b.L(p),b.Fa(k),f="",f=S?f+"**":f+"T*",M){if(10<n.I()&&(n=h.Vd.clip(n,b,a,0)).B())return!1;f+="****"}else f+="T***";if(T){if(10<r.I()&&(r=h.Vd.clip(r,b,a,0)).B())return!1;f+="***"}else f+="T**";return h.cm.st(r,n,a,f.toString(),c)},o.vI=function(r,n,a,c){var p=[!1],f=o.tI(r,n,a,p);return p[0]?f:(p=new h.l,n.A(p),p.X(1e3*a,1e3*a),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B()))&&h.cm.Uw(r,n,a,c))},o.tI=function(r,n,a,c){c[0]=!1;for(var p=r.Ha(),f=n.Ha(),m=[0,0],b=[0,0],S=new h.am(r,n,a,!1),M=!1;S.next();){var T=S.pl(),k=S.jl();if(p.Wb(T,-1),f.Wb(k,-1),T=p.ia(),(T=f.ia().Fa(T,null,b,m,a))!=0&&(M=!0,T==1&&(T=m[0],k=b[0],0<T&&1>T&&0<k&&1>k)))return c[0]=!0,!1}if(!M){for(c[0]=!0,m=new h.l,r.A(m),m.X(a,a),S=r,M=!1,b=new h.l,c=0,p=n.ea();c<p;c++)if(0<n.Ka(c)){if(n.Tj(c,b),!m.isIntersecting(b)||(f=n.Oa(n.Ca(c)),(f=h.Fg.ym(S,f,0))==0))return!1;M||(!h.Fg.Ol(r,n.ea()-1)||r.Cb!=null&&r.Cb.Gb!=null?S=r:(f=new h.Ea,r.copyTo(f),f.hj(1),S=f),M=!0)}if(r.ea()==1||n.K()==1607)return!0;for(m=new h.l,n.A(m),m.X(a,a),b=n,S=!1,a=new h.l,c=0,p=r.ea();c<p;c++)if(0<r.Ka(c)){if(r.Tj(c,a),m.isIntersecting(a)&&(f=r.Oa(r.Ca(c)),(f=h.Fg.ym(b,f,0))==1))return!1;S||(!h.Fg.Ol(n,r.ea()-1)||n.Cb!=null&&n.Cb.Gb!=null?b=n:(f=new h.Ea,n.copyTo(f),f.hj(1),b=f),S=!0)}return!0}return!1},o.DI=function(r,n,a,c){for(var p=r.Ha(),f=n.Ha(),m=[0,0],b=[0,0],S=new h.am(r,n,a,!1),M=!1;S.next();){var T=S.pl(),k=S.jl();if(p.Wb(T),f.Wb(k),T=p.ia(),(T=f.ia().Fa(T,null,b,m,a))==2)M=!0;else if(T!=0){if(M=m[0],T=b[0],0<M&&1>M&&0<T&&1>T)return!1;M=!0}}return!!M&&(f=new h.l,m=new h.l,p=new h.l,r.A(f),n.A(m),f.X(1e3*a,1e3*a),m.X(1e3*a,1e3*a),p.L(f),p.Fa(m),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,a,0),n.B()))&&h.cm.bn(r,n,a,"F********",c))},o.xI=function(r,n,a,c){for(var p=r.Ha(),f=n.Ha(),m=[0,0],b=[0,0],S=new h.am(r,n,a,!1),M=!1;S.next();){var T=S.pl(),k=S.jl();if(p.Wb(T),f.Wb(k),T=p.ia(),(T=f.ia().Fa(T,null,b,m,a))==2)M=!0;else if(T!=0){if(M=m[0],T=b[0],0<M&&1>M&&0<T&&1>T)return!0;M=!0}}return!!M&&(f=new h.l,m=new h.l,b=new h.l,S=new h.l,p=new h.l,r.A(f),n.A(m),o.ns(m,f,a)?(b.L(f),b.X(1e3*a,1e3*a),S.L(m),S.X(1e3*a,1e3*a),p.L(b),p.Fa(S),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B())||10<n.I()&&(n=h.Vd.clip(n,p,a,0),n.B()))&&(a=h.cm.bn(r,n,a,"T********",c))):a=h.cm.bn(r,n,a,"T*****T**",c))},o.wI=function(r,n,a,c){var p=[!1],f=o.tI(r,n,a,p);return p[0]?f:(p=new h.l,n.A(p),p.X(1e3*a,1e3*a),!(10<r.I()&&(r=h.Vd.clip(r,p,a,0),r.B()))&&h.cm.$A(r,n,a,c))},o.uI=function(r,n,a){return h.jd.Zd(r,n,a)==1},o.BI=function(r,n,a){return h.jd.Zd(r,n,a)==2},o.lt=function(r,n,a){var c=new h.h;a*=a;for(var p=0;p<r.I();p++)if(r.D(p,c),h.h.zc(c,n)<=a)return!1;return!0},o.prototype.KE=function(r,n){return r=this.th[r],n=this.th[n],r.Om<n.Om||r.Om==n.Om&&(r.rw<n.rw||r.rw==n.rw&&(r.Mj<n.Mj||r.Mj==n.Mj&&(r.Ui<n.Ui||r.Ui==n.Ui&&r.vH<n.vH)))?-1:1},o}();h.vd=u}(q||(q={})),function(h){var A,w,u;(w=A||(A={}))[w.InteriorInterior=0]="InteriorInterior",w[w.InteriorBoundary=1]="InteriorBoundary",w[w.InteriorExterior=2]="InteriorExterior",w[w.BoundaryInterior=3]="BoundaryInterior",w[w.BoundaryBoundary=4]="BoundaryBoundary",w[w.BoundaryExterior=5]="BoundaryExterior",w[w.ExteriorInterior=6]="ExteriorInterior",w[w.ExteriorBoundary=7]="ExteriorBoundary",w[w.ExteriorExterior=8]="ExteriorExterior",function(o){o[o.AreaAreaPredicates=0]="AreaAreaPredicates",o[o.AreaLinePredicates=1]="AreaLinePredicates",o[o.LineLinePredicates=2]="LineLinePredicates",o[o.AreaPointPredicates=3]="AreaPointPredicates",o[o.LinePointPredicates=4]="LinePointPredicates",o[o.PointPointPredicates=5]="PointPointPredicates"}(u||(u={})),A=function(){function o(){this.le=0,this.j=new h.ku,this.J=[0,0,0,0,0,0,0,0,0],this.$a=[0,0,0,0,0,0,0,0,0],this.fa=[!1,!1,!1,!1,!1,!1,!1,!1,!1],this.Um=this.xw=-1}return o.sB=function(r,n,a,c,p){if(c.length!=9)throw h.i.ga("relation string length has to be 9 characters");for(var f=0;9>f;f++){var m=c.charAt(f);if(m!="*"&&m!="T"&&m!="F"&&m!="0"&&m!="1"&&m!="2")throw h.i.ga("relation string")}if((f=this.FR(c,r.Eb(),n.Eb()))!=0)return h.vd.tB(r,n,a,f,p);f=new h.l,r.A(f),m=new h.l,n.A(m);var b=new h.l;if(b.L(f),b.$b(m),a=h.ta.Xd(a,b,!1),r=this.QE(r,a),n=this.QE(n,a),r.B()||n.B())return this.mW(r,n,c);switch(f=n.K(),m=!1,r.K()){case 1736:switch(f){case 1736:m=this.st(r,n,a,c,p);break;case 1607:m=this.bn(r,n,a,c,p);break;case 33:m=this.rt(r,n,a,c);break;case 550:m=this.qt(r,n,a,c,p)}break;case 1607:switch(f){case 1736:m=this.bn(n,r,a,this.aq(c),p);break;case 1607:m=this.aB(r,n,a,c,p);break;case 33:m=this.ut(r,n,a,c,p);break;case 550:m=this.tt(r,n,a,c,p)}break;case 33:switch(f){case 1736:m=this.rt(n,r,a,this.aq(c));break;case 1607:m=this.ut(n,r,a,this.aq(c),p);break;case 33:m=this.SU(r,n,a,c);break;case 550:m=this.mt(n,r,a,this.aq(c))}break;case 550:switch(f){case 1736:m=this.qt(n,r,a,this.aq(c),p);break;case 1607:m=this.tt(n,r,a,this.aq(c),p);break;case 550:m=this.TA(r,n,a,c,p);break;case 33:m=this.mt(r,n,a,c)}break;default:m=!1}return m},o.st=function(r,n,a,c,p){var f=new o;f.$i(),f.dj(c),f.rJ();var m=new h.l,b=new h.l;return r.A(m),n.A(b),c=!1,h.vd.ek(m,b,a)&&(f.Eu(r,n),c=!0),c||((m=h.vd.qc(r,n,!1))==4?(f.Eu(r,n),c=!0):m==1?(f.hy(n),c=!0):m==2&&(f.TD(r),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.Dp(r,n),f.j.Wg()),o.fg(f.J,f.Yc)},o.Uw=function(r,n,a,c){var p=new o;p.$i(),p.dj("T*****F**"),p.rJ();var f=new h.l,m=new h.l;r.A(f),n.A(m);var b=!1;return h.vd.ek(f,m,a)&&(p.Eu(r,n),b=!0),b||((f=h.vd.qc(r,n,!1))==4?(p.Eu(r,n),b=!0):f==1?(p.hy(n),b=!0):f==2&&(p.TD(r),b=!0)),b?this.fg(p.J,p.Yc):(r=(b=new h.hd).Ib(r),f=b.Ib(n),h.Uk.W(b,a,c,!1),a=b.Ke(f).mg(),b.Ip(0,!0,!0),h.tn.W(b,r,-1,!1,c),b.I(r)!=0&&(h.tn.W(b,f,-1,!1,c),p.gr(b,c),(n=b.I(f)==0)||(p.Dp(r,f),p.j.Wg(),f=this.fg(p.J,p.Yc))?(r=b.Ke(r),r=(b=new h.hd).Ib(r),f=b.Ib(a),p.gr(b,c),p.le=0,p.$i(),p.dj(n?"T*****F**":"******F**"),p.CB(),p.Dp(r,f),p.j.Wg(),this.fg(p.J,p.Yc)):f))},o.bn=function(r,n,a,c,p){var f=new o;f.$i(),f.dj(c),f.CB();var m=new h.l,b=new h.l;return r.A(m),n.A(b),c=!1,h.vd.ek(m,b,a)&&(f.Fu(r,n),c=!0),c||((m=h.vd.qc(r,n,!1))==4?(f.Fu(r,n),c=!0):m==1&&(f.UD(n),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.mh=f.j.Fp(),o.Lw(n,f.j,f.mh),f.Dp(r,n),f.j.Gp(f.mh),f.j.Wg()),o.fg(f.J,f.Yc)},o.$A=function(r,n,a,c){var p=new o;p.$i(),p.dj("T*****F**"),p.CB();var f=new h.l,m=new h.l;r.A(f),n.A(m);var b=!1;return h.vd.ek(f,m,a)&&(p.Fu(r,n),b=!0),b||((f=h.vd.qc(r,n,!1))==4?(p.Fu(r,n),b=!0):f==1&&(p.UD(n),b=!0)),b?this.fg(p.J,p.Yc):(r=(b=new h.hd).Ib(r),n=b.Ib(n),p.Xo(b,a,c),b.I(r)!=0&&(p.Dp(r,n),p.j.Wg(),this.fg(p.J,p.Yc)))},o.qt=function(r,n,a,c,p){var f=new o;f.$i(),f.dj(c),f.sJ();var m=new h.l,b=new h.l;return r.A(m),n.A(b),c=!1,h.vd.ek(m,b,a)&&(f.Gu(r),c=!0),c||((m=h.vd.qc(r,n,!1))==4?(f.Gu(r),c=!0):m==1&&(f.tN(),c=!0)),c||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.By(r,n),f.j.Wg()),o.fg(f.J,f.Yc)},o.aB=function(r,n,a,c,p){var f=new o;f.$i(),f.dj(c),f.WW(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var b=!1;return h.vd.ek(c,m,a)&&(f.JG(r,n),b=!0),b||h.vd.qc(r,n,!1)!=4||(f.JG(r,n),b=!0),b||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.$h=f.j.Fp(),f.mh=f.j.Fp(),o.Lw(r,f.j,f.$h),o.Lw(n,f.j,f.mh),f.Dp(r,n),f.j.Gp(f.$h),f.j.Gp(f.mh),f.j.Wg()),o.fg(f.J,f.Yc)},o.tt=function(r,n,a,c,p){var f=new o;f.$i(),f.dj(c),f.GJ(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var b=!1;return h.vd.ek(c,m,a)&&(f.Qz(r),b=!0),b||h.vd.qc(r,n,!1)!=4||(f.Qz(r),b=!0),b||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.$h=f.j.Fp(),o.Lw(r,f.j,f.$h),f.By(r,n),f.j.Gp(f.$h),f.j.Wg()),o.fg(f.J,f.Yc)},o.TA=function(r,n,a,c,p){var f=new o;f.$i(),f.dj(c),f.LJ(),c=new h.l;var m=new h.l;r.A(c),n.A(m);var b=!1;return h.vd.ek(c,m,a)&&(f.sI(),b=!0),b||(r=(c=new h.hd).Ib(r),n=c.Ib(n),f.Xo(c,a,p),f.By(r,n),f.j.Wg()),o.fg(f.J,f.Yc)},o.rt=function(r,n,a,c){var p=new o;p.$i(),p.dj(c),p.sJ();var f=new h.l;r.A(f),n=n.D();var m=!1;return h.vd.Tw(n,f,a)&&(p.Gu(r),m=!0),m||((a=h.jd.Zd(r,n,a))==1?(p.J[0]=0,p.J[2]=2,p.J[3]=-1,p.J[5]=1,p.J[6]=-1):a==2?(p.J[6]=-1,r.He()!=0?(p.J[0]=-1,p.J[3]=0,p.J[2]=2,p.J[5]=1):(p.J[0]=0,p.J[3]=-1,p.J[5]=-1,a=new h.l,r.A(a),p.J[2]=a.da()==0&&a.S()==0?-1:1)):p.Gu(r)),this.fg(p.J,c)},o.ut=function(r,n,a,c,p){var f=new o;f.$i(),f.dj(c),f.GJ();var m=new h.l;r.A(m),c=n.D();var b=!1;if(h.vd.Tw(c,m,a)&&(f.Qz(r),b=!0),!b){m=null;var S=b=!1;(f.fa[0]||f.fa[6])&&(h.vd.Tz(r,c,a)?(f.fa[0]&&(m=h.si.im(r,p),S=!h.vd.lt(m,c,a),b=!0,f.J[0]=S?-1:0),f.J[6]=-1):(f.J[0]=-1,f.J[6]=0)),f.fa[3]&&(m!=null&&m.B()?f.J[3]=-1:(b||(m==null&&(m=h.si.im(r,p)),S=!h.vd.lt(m,c,a),b=!0),f.J[3]=S?0:-1)),f.fa[5]&&(m!=null&&m.B()?f.J[5]=-1:b&&!S?f.J[5]=0:(m==null&&(m=h.si.im(r,p)),p=h.vd.Pw(m,n,a),f.J[5]=p?-1:0)),f.fa[2]&&(r.Rb()!=0?f.J[2]=1:((p=new h.de(r.description)).Gd(r,0,r.I()),r=h.vd.Pw(p,n,a),f.J[2]=r?-1:0))}return this.fg(f.J,f.Yc)},o.mt=function(r,n,a,c){var p=new o;p.$i(),p.dj(c),p.LJ();var f=new h.l;r.A(f),n=n.D();var m=!1;if(h.vd.Tw(n,f,a)&&(p.sI(),m=!0),!m){f=!1,m=!0,a*=a;for(var b=0;b<r.I();b++){var S=r.Oa(b);if(h.h.zc(S,n)<=a?f=!0:m=!1,f&&!m)break}f?(p.J[0]=0,p.J[2]=m?-1:0,p.J[6]=-1):(p.J[0]=-1,p.J[2]=0,p.J[6]=0)}return o.fg(p.J,c)},o.SU=function(r,n,a,c){r=r.D(),n=n.D();for(var p=[],f=0;9>f;f++)p[f]=-1;return h.h.zc(r,n)<=a*a?p[0]=0:(p[2]=0,p[6]=0),p[8]=2,o.fg(p,c)},o.fg=function(r,n){for(var a=0;9>a;a++)switch(n.charAt(a)){case"T":if(r[a]==-1)return!1;break;case"F":if(r[a]!=-1)return!1;break;case"0":if(r[a]!=0)return!1;break;case"1":if(r[a]!=1)return!1;break;case"2":if(r[a]!=2)return!1}return!0},o.mW=function(r,n,a){var c=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(r.B()&&n.B()){for(var p=0;9>p;p++)c[p]=-1;return this.fg(c,a)}return p=!1,r.B()&&(r=n,p=!0),c[0]=-1,c[1]=-1,c[3]=-1,c[4]=-1,c[6]=-1,c[7]=-1,c[8]=2,n=r.K(),h.ba.Ic(n)?n==1736?r.He()!=0?(c[2]=2,c[5]=1):(c[5]=-1,n=new h.l,r.A(n),c[2]=n.da()==0&&n.S()==0?0:1):(n=r.Rb()!=0,c[2]=n?1:0,c[5]=h.si.cq(r)?0:-1):(c[2]=0,c[5]=-1),p&&this.pK(c),this.fg(c,a)},o.FR=function(r,n,a){return o.YP(r)?3:o.OP(r)?4:o.VX(r,n,a)?8:o.wP(r,n,a)?16:o.ZO(r)?1:o.wU(r,n,a)?32:0},o.YP=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="F"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="F"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.OP=function(r){return r.charAt(0)=="F"&&r.charAt(1)=="F"&&r.charAt(2)=="*"&&r.charAt(3)=="F"&&r.charAt(4)=="F"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.VX=function(r,n,a){return(n!=0||a!=0)&&((n!=2||a!=2)&&(r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="T"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"||n==1&&a==1&&r.charAt(0)=="F"&&r.charAt(1)=="T"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")||a!=0&&r.charAt(0)=="F"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="T"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*")},o.wP=function(r,n,a){return n>a?r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*":n==1&&a==1&&r.charAt(0)=="0"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="*"&&r.charAt(7)=="*"&&r.charAt(8)=="*"},o.ZO=function(r){return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="*"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="F"&&r.charAt(7)=="F"&&r.charAt(8)=="*"},o.wU=function(r,n,a){if(n==a){if(n!=1)return r.charAt(0)=="T"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*";if(r.charAt(0)=="1"&&r.charAt(1)=="*"&&r.charAt(2)=="T"&&r.charAt(3)=="*"&&r.charAt(4)=="*"&&r.charAt(5)=="*"&&r.charAt(6)=="T"&&r.charAt(7)=="*"&&r.charAt(8)=="*")return!0}return!1},o.Lw=function(r,n,a){r=n.Ma(r);for(var c=n.Oe;c!=-1;c=n.Sf(c))if((n.yd(c)&r)!=0){var p=n.Je(c);if(p==-1)n.pn(c,a,0);else{var f=p,m=0;do(n.fh(f)&r)!=0&&m++,f=n.kc(n.ya(f));while(f!=p);n.pn(c,a,m)}}},o.aq=function(r){var n=""+r.charAt(0);return n+=r.charAt(3),n+=r.charAt(6),n+=r.charAt(1),n+=r.charAt(4),n+=r.charAt(7),n+=r.charAt(2),(n+=r.charAt(5))+r.charAt(8)},o.prototype.$i=function(){for(var r=0;9>r;r++)this.J[r]=-2,this.$a[r]=-2},o.pK=function(r){var n=r[1],a=r[2],c=r[5];r[1]=r[3],r[2]=r[6],r[5]=r[7],r[3]=n,r[6]=a,r[7]=c},o.prototype.dj=function(r){for(this.Yc=r,r=0;9>r;r++)this.Yc.charAt(r)!="*"?(this.fa[r]=!0,this.le++):this.fa[r]=!1},o.prototype.OJ=function(){for(var r=0;9>r;r++)this.fa[r]&&this.J[r]==-2&&(this.J[r]=-1,this.fa[r]=!1)},o.prototype.pc=function(r){return this.J[r]!=-2&&(this.J[r]==-1?(this.fa[r]=!1,this.le--,!0):this.Yc.charAt(r)!="T"&&this.Yc.charAt(r)!="F"?!(this.J[r]<this.$a[r])&&(this.fa[r]=!1,this.le--,!0):(this.fa[r]=!1,this.le--,!0))},o.prototype.rJ=function(){this.xw=0,this.$a[0]=2,this.$a[1]=1,this.$a[2]=2,this.$a[3]=1,this.$a[4]=1,this.$a[5]=1,this.$a[6]=2,this.$a[7]=1,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.CB=function(){this.xw=1,this.Um=3,this.$a[0]=1,this.$a[1]=0,this.$a[2]=2,this.$a[3]=1,this.$a[4]=0,this.$a[5]=1,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.WW=function(){this.xw=2,this.Um=4,this.$a[0]=1,this.$a[1]=0,this.$a[2]=1,this.$a[3]=0,this.$a[4]=0,this.$a[5]=0,this.$a[6]=1,this.$a[7]=0,this.$a[8]=2,this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.sJ=function(){this.Um=3,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=2,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.GJ=function(){this.Um=4,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=1,this.$a[3]=0,this.$a[4]=-1,this.$a[5]=0,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.LJ=function(){this.Um=5,this.$a[0]=0,this.$a[1]=-1,this.$a[2]=0,this.$a[3]=-1,this.$a[4]=-1,this.$a[5]=-1,this.$a[6]=0,this.$a[7]=-1,this.$a[8]=2,this.fa[1]&&(this.J[1]=-1,this.fa[1]=!1,this.le--),this.fa[3]&&(this.J[3]=-1,this.fa[3]=!1,this.le--),this.fa[4]&&(this.J[4]=-1,this.fa[4]=!1,this.le--),this.fa[5]&&(this.J[5]=-1,this.fa[5]=!1,this.le--),this.fa[7]&&(this.J[7]=-1,this.fa[7]=!1,this.le--),this.fa[8]&&(this.J[8]=2,this.fa[8]=!1,this.le--)},o.prototype.rN=function(r,n,a){var c=!0;return this.fa[0]&&(this.vS(r,n,a),c=c&&this.pc(0)),this.fa[1]&&(this.mG(r,n,1),c=c&&this.pc(1)),this.fa[2]&&(this.nG(r,n,a,2),c=c&&this.pc(2)),this.fa[3]&&(this.mG(r,a,3),c=c&&this.pc(3)),this.fa[4]&&(this.vN(r,n,a),c=c&&this.pc(4)),this.fa[5]&&(this.ZD(r,a,5),c=c&&this.pc(5)),this.fa[6]&&(this.nG(r,a,n,6),c=c&&this.pc(6)),this.fa[7]&&(this.ZD(r,n,7),c=c&&this.pc(7)),c},o.prototype.Eu=function(r,n){this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5)),this.Hr(n,this.fa[6]?6:-1,this.Yc.charAt(6),this.fa[7]?7:-1,this.Yc.charAt(7))},o.prototype.Hr=function(r,n,a,c,p){n==-1&&c==-1||((a!="T"&&a!="F"&&n!=-1||p!="T"&&p!="F"&&c!=-1)&&r.He()==0?(c!=-1&&(this.J[c]=-1),n!=-1&&(a=new h.l,r.A(a),this.J[n]=a.da()==0&&a.S()==0?0:1)):(n!=-1&&(this.J[n]=2),c!=-1&&(this.J[c]=1)))},o.prototype.hy=function(r){this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1,this.Hr(r,this.fa[0]?0:-1,this.Yc.charAt(0),this.fa[1]?1:-1,this.Yc.charAt(1))},o.prototype.TD=function(r){this.hy(r),o.pK(this.J)},o.prototype.Fu=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[6]){var a=this.Yc.charAt(6);a=a=="T"||a=="F"||n.Rb()!=0,this.J[6]=a?1:0}this.fa[7]&&(n=h.si.cq(n),this.J[7]=n?0:-1),this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.UD=function(r){if(this.fa[0]){var n=this.Yc.charAt(0);n=n=="T"||n=="F"||r.Rb()!=0,this.J[0]=n?1:0}this.fa[1]&&(r=h.si.cq(r),this.J[1]=r?0:-1),this.J[2]=2,this.J[3]=-1,this.J[4]=-1,this.J[5]=1,this.J[6]=-1,this.J[7]=-1},o.prototype.Gu=function(r){this.J[0]=-1,this.J[3]=-1,this.J[6]=0,this.Hr(r,this.fa[2]?2:-1,this.Yc.charAt(2),this.fa[5]?5:-1,this.Yc.charAt(5))},o.prototype.tN=function(){this.J[0]=0,this.J[2]=2,this.J[3]=-1,this.J[5]=1,this.J[6]=-1},o.prototype.JG=function(r,n){if(this.J[0]=-1,this.J[1]=-1,this.J[3]=-1,this.J[4]=-1,this.fa[2]){var a=this.Yc.charAt(2);a=a=="T"||a=="F"||r.Rb()!=0,this.J[2]=a?1:0}this.fa[5]&&(r=h.si.cq(r),this.J[5]=r?0:-1),this.fa[6]&&(a=(a=this.Yc.charAt(6))=="T"||a=="F"||n.Rb()!=0,this.J[6]=a?1:0),this.fa[7]&&(n=h.si.cq(n),this.J[7]=n?0:-1)},o.prototype.Qz=function(r){if(this.J[0]=-1,this.J[3]=-1,this.fa[2]){var n=this.Yc.charAt(2);n=n=="T"||n=="F"||r.Rb()!=0,this.J[2]=n?1:0}this.fa[5]&&(r=h.si.cq(r),this.J[5]=r?0:-1),this.J[6]=0},o.prototype.sI=function(){this.J[0]=-1,this.J[2]=0,this.J[6]=0},o.prototype.sN=function(r,n,a){var c=!0;return this.fa[0]&&(this.wS(r,n),c=c&&this.pc(0)),this.fa[1]&&(this.sS(r,n,a,this.mh),c=c&&this.pc(1)),this.fa[2]&&(this.tS(r,n),c=c&&this.pc(2)),this.fa[3]&&(this.zN(r,n,a,this.mh),c=c&&this.pc(3)),this.fa[4]&&(this.wN(r,n,a,this.mh),c=c&&this.pc(4)),this.fa[5]&&(this.xN(r,n,a),c=c&&this.pc(5)),this.fa[6]&&(this.fQ(r,n),c=c&&this.pc(6)),this.fa[7]&&(this.eQ(r,n,a,this.mh),c=c&&this.pc(7)),c},o.prototype.eT=function(r,n,a){var c=!0;return this.fa[0]&&(this.zS(r,n,a,this.$h,this.mh),c=c&&this.pc(0)),this.fa[1]&&(this.oG(r,n,a,this.$h,this.mh,1),c=c&&this.pc(1)),this.fa[2]&&(this.pG(r,n,a,2),c=c&&this.pc(2)),this.fa[3]&&(this.oG(r,a,n,this.mh,this.$h,3),c=c&&this.pc(3)),this.fa[4]&&(this.BN(r,n,a,this.$h,this.mh),c=c&&this.pc(4)),this.fa[5]&&(this.$D(r,a,this.$h,5),c=c&&this.pc(5)),this.fa[6]&&(this.pG(r,a,n,6),c=c&&this.pc(6)),this.fa[7]&&(this.$D(r,n,this.mh,7),c=c&&this.pc(7)),c},o.prototype.VD=function(r,n,a){var c=!0;return this.fa[0]&&(this.xS(r,n),c=c&&this.pc(0)),this.fa[2]&&(this.uS(r,n),c=c&&this.pc(2)),this.fa[3]&&(this.AN(r,n,a),c=c&&this.pc(3)),this.fa[5]&&(this.yN(r,n),c=c&&this.pc(5)),this.fa[6]&&(this.gQ(r,n),c=c&&this.pc(6)),c},o.prototype.KG=function(r,n,a){var c=!0;return this.fa[0]&&(this.AS(r,n,a,this.$h),c=c&&this.pc(0)),this.fa[2]&&(this.yS(r,a),c=c&&this.pc(2)),this.fa[3]&&(this.DN(r,n,a,this.$h),c=c&&this.pc(3)),this.fa[5]&&(this.CN(r,n,a,this.$h),c=c&&this.pc(5)),this.fa[6]&&(this.hQ(r,n,a),c=c&&this.pc(6)),c},o.prototype.RU=function(r,n,a){var c=!0;return this.fa[0]&&(this.BS(r,n,a),c=c&&this.pc(0)),this.fa[2]&&(this.qG(r,n,a,2),c=c&&this.pc(2)),this.fa[6]&&(this.qG(r,a,n,6),c=c&&this.pc(6)),c},o.prototype.vS=function(r,n,a){this.J[0]!=2&&((r=this.j.af(r))&n)!=0&&(r&a)!=0&&(this.J[0]=2)},o.prototype.mG=function(r,n,a){if(this.J[a]!=1){var c=this.j.af(this.j.ya(r));(this.j.af(r)&n)!=0&&(c&n)!=0&&(this.J[a]=1)}},o.prototype.nG=function(r,n,a,c){this.J[c]!=2&&((r=this.j.af(r))&n)!=0&&(r&a)==0&&(this.J[c]=2)},o.prototype.vN=function(r,n,a){if(this.J[4]!=1){var c=this.j.fh(r);(c&n)!=0&&(c&a)!=0?this.J[4]=1:this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&((r=this.j.yd(this.j.vf(r)))&n)!=0&&(r&a)!=0&&(this.J[4]=0)}},o.prototype.ZD=function(r,n,a){if(this.J[a]!=1){var c=this.j.af(this.j.ya(r));(this.j.af(r)&n)==0&&(c&n)==0&&(this.J[a]=1)}},o.prototype.wS=function(r,n){if(this.J[0]!=1){var a=this.j.af(this.j.ya(r));(this.j.af(r)&n)!=0&&(a&n)!=0&&(this.J[0]=1)}},o.prototype.sS=function(r,n,a,c){if(this.J[1]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r),f=this.j.yd(p);(f&n)==0&&(this.j.af(r)&n)!=0&&(r=this.j.ng(p,c),(f&a)!=0&&r%2!=0&&(this.J[1]=0))}},o.prototype.tS=function(r,n){this.J[2]!=2&&(this.j.fh(r)&n)!=0&&(this.J[2]=2)},o.prototype.zN=function(r,n,a,c){if(this.J[3]!=1){var p=this.j.fh(r);(p&n)!=0&&(p&a)!=0?this.J[3]=1:this.J[3]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(p=this.j.vf(r),((r=this.j.yd(p))&n)!=0&&(n=this.j.ng(p,c),(r&a)!=0&&n%2==0&&(this.J[3]=0)))}},o.prototype.wN=function(r,n,a,c){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r);((r=this.j.yd(p))&n)!=0&&(n=this.j.ng(p,c),(r&a)!=0&&n%2!=0&&(this.J[4]=0))}},o.prototype.xN=function(r,n,a){this.J[5]!=1&&((r=this.j.fh(r))&n)!=0&&(r&a)==0&&(this.J[5]=1)},o.prototype.fQ=function(r,n){if(this.J[6]!=1){var a=this.j.af(this.j.ya(r));(this.j.af(r)&n)==0&&(a&n)==0&&(this.J[6]=1)}},o.prototype.eQ=function(r,n,a,c){if(this.J[7]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){var p=this.j.vf(r),f=this.j.yd(p);(f&n)==0&&(this.j.af(r)&n)==0&&(r=this.j.ng(p,c),(f&a)!=0&&r%2!=0&&(this.J[7]=0))}},o.prototype.zS=function(r,n,a,c,p){if(this.J[0]!=1){var f=this.j.fh(r);(f&n)!=0&&(f&a)!=0?this.J[0]=1:this.J[0]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(r=this.j.vf(r),((f=this.j.yd(r))&n)!=0&&(f&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2==0&&p%2==0&&(this.J[0]=0)))}},o.prototype.oG=function(r,n,a,c,p,f){if(this.J[f]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){r=this.j.vf(r);var m=this.j.yd(r);(m&n)!=0&&(m&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2==0&&p%2!=0&&(this.J[f]=0))}},o.prototype.pG=function(r,n,a,c){this.J[c]!=1&&((r=this.j.fh(r))&n)!=0&&(r&a)==0&&(this.J[c]=1)},o.prototype.BN=function(r,n,a,c,p){if(this.J[4]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1){r=this.j.vf(r);var f=this.j.yd(r);(f&n)!=0&&(f&a)!=0&&(n=this.j.ng(r,c),p=this.j.ng(r,p),n%2!=0&&p%2!=0&&(this.J[4]=0))}},o.prototype.$D=function(r,n,a,c){this.J[c]!=0&&this.j.Bb(this.j.ue(this.j.ya(r)),this.Wi)!=1&&(r=this.j.vf(r),(this.j.yd(r)&n)==0&&this.j.ng(r,a)%2!=0&&(this.J[c]=0))},o.prototype.xS=function(r,n){this.J[0]!=0&&(this.j.yd(r)&n)==0&&(this.j.ik(this.j.Yy(r))&n)!=0&&(this.J[0]=0)},o.prototype.uS=function(r,n){this.J[2]!=2&&(this.j.yd(r)&n)!=0&&(this.J[2]=2)},o.prototype.AN=function(r,n,a){this.J[3]!=0&&((r=this.j.yd(r))&n)!=0&&(r&a)!=0&&(this.J[3]=0)},o.prototype.yN=function(r,n){this.J[5]!=1&&(this.j.yd(r)&n)!=0&&(this.J[5]=1)},o.prototype.gQ=function(r,n){this.J[6]!=0&&(this.j.yd(r)&n)==0&&(this.j.ik(this.j.Yy(r))&n)==0&&(this.J[6]=0)},o.prototype.AS=function(r,n,a,c){if(this.J[0]!=0){var p=this.j.yd(r);(p&n)!=0&&(p&a)!=0&&this.j.ng(r,c)%2==0&&(this.J[0]=0)}},o.prototype.yS=function(r,n){this.J[2]!=1&&(this.j.Je(r)!=-1?this.J[2]=1:this.J[2]!=0&&(this.j.yd(r)&n)==0&&(this.J[2]=0))},o.prototype.DN=function(r,n,a,c){if(this.J[3]!=0){var p=this.j.yd(r);(p&n)!=0&&(p&a)!=0&&this.j.ng(r,c)%2!=0&&(this.J[3]=0)}},o.prototype.CN=function(r,n,a,c){if(this.J[5]!=0){var p=this.j.yd(r);(p&n)!=0&&(p&a)==0&&this.j.ng(r,c)%2!=0&&(this.J[5]=0)}},o.prototype.hQ=function(r,n,a){this.J[6]!=0&&((r=this.j.yd(r))&n)==0&&(r&a)!=0&&(this.J[6]=0)},o.prototype.BS=function(r,n,a){this.J[0]!=0&&((r=this.j.yd(r))&n)!=0&&(r&a)!=0&&(this.J[0]=0)},o.prototype.qG=function(r,n,a,c){this.J[c]!=0&&((r=this.j.yd(r))&n)!=0&&(r&a)==0&&(this.J[c]=0)},o.prototype.Dp=function(r,n){var a=!1;r=this.j.Ma(r),n=this.j.Ma(n),this.Wi=this.j.bh();for(var c=this.j.Oe;c!=-1;c=this.j.Sf(c)){var p=this.j.Je(c);if(p==-1){if(this.Um!=-1)switch(this.Um){case 3:a=this.VD(c,r,n);break;case 4:a=this.KG(c,r,n);break;default:throw h.i.ga("internal error")}}else{var f=p;do{var m=f;if(this.j.Bb(m,this.Wi)!=1)do{switch(this.xw){case 0:a=this.rN(m,r,n);break;case 1:a=this.sN(m,r,n);break;case 2:a=this.eT(m,r,n);break;default:throw h.i.ga("internal error")}if(a)break;this.j.Kb(m,this.Wi,1),m=this.j.kc(m)}while(m!=f&&!a);if(a)break;f=this.j.kc(this.j.ya(m))}while(f!=p);if(a)break}}a||this.OJ(),this.j.Lg(this.Wi)},o.prototype.By=function(r,n){var a=!1;r=this.j.Ma(r),n=this.j.Ma(n);for(var c=this.j.Oe;c!=-1;c=this.j.Sf(c)){switch(this.Um){case 3:a=this.VD(c,r,n);break;case 4:a=this.KG(c,r,n);break;case 5:a=this.RU(c,r,n);break;default:throw h.i.Ra()}if(a)break}a||this.OJ()},o.prototype.gr=function(r,n){this.j.fr(r,n)},o.prototype.Xo=function(r,n,a){this.SP(r,n,a),this.gr(r,a)},o.prototype.SP=function(r,n,a){for(h.Uk.W(r,n,a,!1),r.Ip(0,!0,!0),n=r.ld;n!=-1;n=r.ve(n))r.jc(n)==1736&&h.tn.W(r,n,-1,!1,a)},o.QE=function(r,n){var a=r.K();return h.ba.zd(a)?((n=new h.Ua(r.description)).oc(r,!0),n):a==197?(a=new h.l,r.A(a),a.da()<=n&&a.S()<=n?(n=new h.Ta(r.description),r.tf(n),n):a.da()<=n||a.S()<=n?(n=new h.Ua(r.description),a=new h.Ta,r.If(0,a),n.nf(a),r.If(2,a),n.lineTo(a),n):((n=new h.Ea(r.description)).bd(r,!1),n)):r},o}(),h.cm=A}(q||(q={})),function(h){var A=function(){function o(r){this.Gm=new h.ja(0),this.fw=new h.ja(0),this.xt=new h.h,this.yt=new h.h,this.g=r,this.Js=-1}return o.prototype.cc=function(r){return this.g.cc(this.uz(r))},o.prototype.Dv=function(r){var n=this.dz(r);if(r=this.BF(r),this.g.Na(n)==r){var a=n;n=r,r=a}return this.g.Hc(n,this.xt),this.g.Hc(r,this.yt),this.xt.y<this.yt.y},o.prototype.uz=function(r){var n=this.dz(r);return r=this.BF(r),this.g.V(n)==r?n:r},o.prototype.dz=function(r){return this.Gm.get(r)},o.prototype.BF=function(r){return this.fw.get(r)},o.prototype.lF=function(r){this.Gm.set(r,this.Js),this.Js=r},o.prototype.hI=function(r){if(this.Js!=-1){var n=this.Js;return this.Js=this.Gm.get(n),this.Gm.set(n,r),this.fw.set(n,this.g.V(r)),n}return this.Gm==null&&(this.Gm=new h.ja(0),this.fw=new h.ja(0)),n=this.Gm.size,this.Gm.add(r),this.fw.add(this.g.V(r)),n},o.prototype.mz=function(r){return this.g.cd(this.dz(r))},o}();h.qY=A;var w=function(){function o(r){this.Ce=r,this.ie=new h.zb,this.Pm=new h.zb,this.wH=0,this.Bo=null,this.sA=-1}return o.prototype.compare=function(r,n,a){a=r.ka(a);var c=this.Ce.hb;if(this.sA==n)var p=this.wH;else this.Bo=c.cc(n),this.Bo==null?((r=c.g).fd(c.uz(n),this.ie),this.Bo=this.ie,p=this.ie.Me(this.Ce.Ah,0)):p=this.Bo.Me(this.Ce.Ah,0),this.wH=p,this.sA=n;if((r=c.cc(a))==null){(r=c.g).fd(c.uz(a),this.Pm),r=this.Pm;var f=this.Pm.Me(this.Ce.Ah,0)}else f=r.Me(this.Ce.Ah,0);return p==f&&(n=c.Dv(n),a=c.Dv(a),(n=.5*((a=Math.min(n?this.Bo.ma:this.Bo.oa,a?r.ma:r.oa))+this.Ce.Ah))==this.Ce.Ah&&(n=a),p=this.Bo.Me(n,0),f=r.Me(n,0)),p<f?-1:p>f?1:0},o.prototype.reset=function(){this.sA=-1},o}(),u=function(){function o(){this.Ym=this.Il=null,this.fb=new h.Zj,this.fb.LP(),this.ae=new w(this),this.fb.Wo(this.ae)}return o.prototype.BQ=function(){var r=!1;if(this.hw&&(r=this.CQ()),this.g.ea(this.Y)==1){var n=this.g.Ob(this.Y);return r=this.g.qz(n),this.g.JB(n,!0),0>r&&(r=this.g.Ya(n),this.g.jJ(r),this.g.Yg(n,this.g.Na(r)),!0)}for(this.Gl=this.g.Fy(),this.xo=this.g.Fy(),n=this.g.Ob(this.Y);n!=-1;n=this.g.Sb(n))this.g.ir(n,this.Gl,0),this.g.ir(n,this.xo,-1);n=new h.ja(0),this.Ah=NaN;var a=new h.h;this.ft=this.g.ea(this.Y),this.so=this.g.Hd(),this.Ts=this.g.Hd();for(var c=this.Il.sc(this.Il.je);c!=-1;c=this.Il.lb(c)){var p=this.Il.getData(c);if(this.g.Hc(p,a),a.y!=this.Ah&&n.size!=0&&(r=this.vt(n)||r,this.ae.reset(),n.clear(!1)),n.add(p),this.Ah=a.y,this.ft==0)break}for(0<this.ft&&(r=this.vt(n)||r,n.clear(!1)),this.g.Ud(this.so),this.g.Ud(this.Ts),n=this.g.Ob(this.Y);n!=-1;)if(this.g.uj(n,this.Gl)==3){for(this.g.JB(n,!0),a=n,n=this.g.uj(n,this.xo);n!=-1;)c=this.g.uj(n,this.xo),this.g.RT(this.Y,this.g.Sb(a),n),a=n,n=c;n=this.g.Sb(a)}else this.g.JB(n,!1),n=this.g.Sb(n);return this.g.wB(this.Gl),this.g.wB(this.xo),r},o.prototype.vt=function(r){return this.SV(r)},o.prototype.SV=function(r){var n=!1;this.hb==null&&(this.hb=new A(this.g)),this.Ym==null?(this.Ym=new h.ja(0),this.Ym.Jb(16)):this.Ym.clear(!1),this.RV(r);for(var a=0,c=r.size;a<c;a++){var p=r.get(a);p!=-1&&this.iG(p,-1)}for(a=0;a<this.Ym.size&&0<this.ft;a++)if(r=this.Ym.get(a),p=this.hb.mz(this.fb.ka(r)),c=-1,this.g.uj(p,this.Gl)==0){p=this.fb.xe(r);for(var f,m=r;p!=-1;){var b=this.fb.ka(p),S=this.hb.mz(b),M=this.g.uj(S,this.Gl);if(M!=0){c=S;break}m=p,p=this.fb.xe(p)}p==-1?(f=!0,p=m):(b=this.fb.ka(p),f=this.hb.Dv(b),p=this.fb.lb(p),f=!f);do{if(b=this.fb.ka(p),S=this.hb.mz(b),(M=this.g.uj(S,this.Gl))==0&&(f!=this.hb.Dv(b)&&(n=this.g.Ya(S),this.g.jJ(n),this.g.Yg(S,this.g.Na(n)),n=!0),this.g.ir(S,this.Gl,f?3:2),f||(m=this.g.uj(c,this.xo),this.g.ir(c,this.xo,S),this.g.ir(S,this.xo,m)),this.ft--,this.ft==0))return n;c=S,m=p,p=this.fb.lb(p),f=!f}while(m!=r)}return n},o.prototype.RV=function(r){for(var n=0,a=r.size;n<a;n++){var c=r.get(n),p=this.g.Qa(c,this.so),f=this.g.Qa(c,this.Ts);if(p!=-1){var m=this.fb.ka(p);this.hb.lF(m),this.g.Sa(c,this.so,-1)}f!=-1&&(m=this.fb.ka(f),this.hb.lF(m),this.g.Sa(c,this.Ts,-1)),m=-1,p!=-1&&f!=-1?(this.fb.wd(p,-1),this.fb.wd(f,-1),r.set(n,-1)):m=p!=-1?p:f,m!=-1&&(this.iG(c,m)||this.fb.wd(m,-1),r.set(n,-1))}},o.prototype.iG=function(r,n){var a=new h.h,c=new h.h;this.g.Hc(r,a);var p=this.g.V(r);this.g.Hc(p,c);var f=!1;if(a.y<c.y){f=!0;var m=this.hb.hI(r);if(n==-1)var b=this.fb.addElement(m,-1);else b=n,this.fb.Uj(b,m);(m=this.g.Qa(p,this.so))==-1?this.g.Sa(p,this.so,b):this.g.Sa(p,this.Ts,b),p=this.g.cd(r),this.g.uj(p,this.Gl)==0&&this.Ym.add(b)}return p=this.g.Na(r),this.g.Hc(p,c),a.y<c.y&&(f=!0,m=this.hb.hI(p),n==-1?b=this.fb.addElement(m,-1):(b=n,this.fb.Uj(b,m)),(m=this.g.Qa(p,this.so))==-1?this.g.Sa(p,this.so,b):this.g.Sa(p,this.Ts,b),p=this.g.cd(r),this.g.uj(p,this.Gl)==0&&this.Ym.add(b)),f},o.W=function(r,n,a,c){var p=new o;return p.g=r,p.Y=n,p.Il=a,p.hw=c,p.BQ()},o.prototype.CQ=function(){var r=new h.ja(0),n=new h.ja(0),a=-1,c=-1,p=new h.h;p.Sc();for(var f=-1,m=-1,b=-1,S=new h.h,M=this.Il.sc(this.Il.je);M!=-1;M=this.Il.lb(M)){var T=this.Il.getData(M);this.g.Hc(T,S);var k=this.g.cd(T);p.rb(S)&&m==k?(c==-1&&(a=this.g.Fy(),c=this.g.Hd()),b==-1&&(b=n.size,this.g.Sa(f,c,b),n.add(1),this.g.uj(k,a)==-1&&(this.g.ir(k,a,f),r.add(k))),this.g.Sa(T,c,b),n.TW(n.Gc()+1)):(b=-1,p.N(S)),f=T,m=k}if(r.size==0)return!1;for(p=new h.ja(0),f=new h.ja(0),m=0,b=r.size;m<b;m++){k=r.get(m);var C=this.g.uj(k,a);for(T=this.g.Qa(C,c),p.clear(!1),f.clear(!1),p.add(C),f.add(T),T=this.g.V(C);T!=C;T=this.g.V(T)){var N=T;if((S=this.g.Qa(N,c))!=-1)if(f.size==0)f.add(S),p.add(N);else if(f.Gc()==S){M=p.Gc();var F=this.g.V(M);C=this.g.V(N),this.g.Cc(M,C),this.g.Dc(C,M),this.g.Cc(N,F),this.g.Dc(F,N),N=[!1],F=this.g.hG(this.Y,F,this.g.Ya(k),N),this.g.Sa(T,c,-1),N[0]&&this.g.Kf(k,C),T=this.g.Ka(k),T-=C=this.g.Ka(F),this.g.Xj(k,T),n.set(S,n.get(S)-1),n.get(S)==1&&(n.set(S,0),f.Jf(),p.Jf()),T=C=M}else p.add(T),f.add(S)}}return this.g.wB(a),this.g.Ud(c),!0},o}();h.QL=u}(q||(q={})),function(h){var A=function(){function w(){}return w.prototype.hg=function(){this.JA=this.tb=null},w.prototype.get=function(){return this.JA},w.prototype.set=function(u){if(this.JA=u,u!=null)throw u.K()==322&&(this.tb=u),h.i.Ra()},w.prototype.create=function(u){if(u!=322)throw h.i.ga("Not Implemented");this.Qr()},w.prototype.Qr=function(){this.tb==null&&(this.tb=new h.zb),this.JA=this.tb},w}();h.hg=A}(q||(q={})),function(h){(h=h.RL||(h.RL={}))[h.enumLineSeg=1]="enumLineSeg",h[h.enumBezierSeg=2]="enumBezierSeg",h[h.enumArcSeg=4]="enumArcSeg",h[h.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask",h[h.enumSegmentMask=7]="enumSegmentMask",h[h.enumDensified=8]="enumDensified"}(q||(q={})),function(h){var A=function(u){this.bj=u,this.kC=this.lC=1,this.mB=this.lB=this.nB=0},w=function(){function u(){this.Hq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Ck=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.Cf=new h.Ta,this.ra=this.Ew=0,this.no=[],this.bt=[],this.Aw=[],this.Kq=[],this.GA=[]}return u.prototype.qB=function(o){if(o!=null){for(var r=0,n=o.length;r<n;r++)this.jW(o[r]);o.length=0}},u.prototype.jW=function(o){o.bj=null,this.Kq.push(o)},u.prototype.Qw=function(o){if(this.Kq.length===0)var r=new A(o);else(r=this.Kq[this.Kq.length-1]).bj=o,--this.Kq.length;return r},u.prototype.LR=function(o,r){return o==0?this.bt[r]:this.Aw[r]},u.prototype.VA=function(){this.Ew>=this.GA.length&&this.GA.push(new h.hg);var o=this.GA[this.Ew];return this.Ew++,o},u.prototype.clear=function(){this.qB(this.no),this.qB(this.bt),this.qB(this.Aw),this.Ew=0},u.prototype.Po=function(o){this.no.push(this.Qw(o))},u.prototype.ql=function(o){return o==0?this.bt.length:this.Aw.length},u.prototype.Xp=function(o,r){return this.LR(o,r).bj},u.prototype.Fa=function(o,r){if(this.no.length!=2)throw h.i.Ra();this.ra=o;var n=h.mc.ox(.01*o),a=!1,c=this.no[0],p=this.no[1];if(r||(5&c.bj.Br(p.bj,o,!0))!=0){if(c.bj.K()==322){var f=c.bj;if(p.bj.K()==322){r=p.bj;var m=h.zb.Yx(f,r,null,this.Hq,this.Ck,o);if(m==0)throw h.zb.Yx(f,r,null,this.Hq,this.Ck,o),h.i.Ra();o=Array(9),h.P.bv(o,null);for(var b=0;b<m;b++){var S=this.Hq[b],M=this.Ck[b],T=c.mB,k=1;S==0?(T=c.nB,k=c.lC):S==1&&(T=c.lB,k=c.kC);var C=p.mB,N=1;M==0?(C=p.nB,N=p.lC):M==1&&(C=p.lB,N=p.kC);var F=new h.h;T==C?(T=new h.h,f.ic(S,T),S=new h.h,r.ic(M,S),N/=M=k+N,h.mc.IG(T,S,N,F),h.h.zc(F,T)+h.h.zc(F,S)>n&&(a=!0)):T>C?(f.ic(S,F),S=new h.h,r.ic(M,S),h.h.zc(F,S)>n&&(a=!0)):(r.ic(M,F),T=new h.h,f.ic(S,T),h.h.zc(F,T)>n&&(a=!0)),o[b]=F}for(c=0,p=-1,b=0;b<=m;b++)(N=b<m?this.Hq[b]:1)!=c&&(n=this.VA(),f.dh(c,N,n),p!=-1&&n.get().Ec(o[p]),b!=m&&n.get().Rc(o[b]),c=N,this.bt.push(this.Qw(n.get()))),p=b;for(f=[0,0,0,0,0,0,0,0,0],b=0;b<m;b++)f[b]=b;for(1<m&&this.Ck[0]>this.Ck[1]&&(N=this.Ck[0],this.Ck[0]=this.Ck[1],this.Ck[1]=N,b=f[0],f[0]=f[1],f[1]=b),c=0,p=-1,b=0;b<=m;b++)(N=b<m?this.Ck[b]:1)!=c&&(n=this.VA(),r.dh(c,N,n),p!=-1&&(c=f[p],n.get().Ec(o[c])),b!=m&&(c=f[b],n.get().Rc(o[c])),c=N,this.Aw.push(this.Qw(n.get()))),p=b;return a}}throw h.i.Ra()}return!1},u.prototype.Fz=function(o,r,n){if(r.copyTo(this.Cf),this.no.length!=1)throw h.i.Ra();this.ra=o;var a=this.no[0];if(n||a.bj.tu(r.D(),o,!0)){if(a.bj.K()!=322)throw h.i.Ra();var c=(o=a.bj).fe(r.D(),!1);this.Hq[0]=c;var p=a.mB;for(n=1,c==0?(p=a.nB,n=a.lC):c==1&&(p=a.lB,n=a.kC),a=new h.h,p==0?(p=new h.h,o.ic(c,p),r=r.D(),h.mc.IG(p,r,1/(n+1),a)):0<p?(a=new h.h,o.ic(c,a)):a=r.D(),n=0,c=-1,p=0;1>=p;p++){if((r=1>p?this.Hq[p]:1)!=n){var f=this.VA();o.dh(n,r,f),c!=-1&&f.get().Ec(a),p!=1&&f.get().Rc(a),n=r,this.bt.push(this.Qw(f.get()))}c=p}this.Cf.Db(a)}},u}();h.NC=w}(q||(q={})),function(h){var A=function(){function w(u){this.Fs=this.sk=this.tb=null,this.bg=0,this.Bm=!1,this.Af=-1,this.El=this.Kd=0,this.gb=-1,this.ib=u,this.bg=this.Vx(this.El),this.Bm=!1,this.sk=null,this.Fs=new h.h}return w.prototype.tW=function(u){if(this.ib!=u.ib)throw h.i.Hb();this.Af=u.Af,this.Kd=u.Kd,this.gb=u.gb,this.El=u.El,this.bg=u.bg,this.Bm=u.Bm,this.sk=null},w.prototype.ia=function(){if(this.Af!=this.Kd&&this.vD(),this.Bm)this.Kd=(this.Kd+1)%this.bg;else{if(this.Kd==this.bg)throw h.i.re();this.Kd++}return this.sk},w.prototype.ni=function(){if(this.Bm)this.Kd=(this.bg+this.Kd-1)%this.bg;else{if(this.Kd==0)throw h.i.re();this.Kd--}return this.Kd!=this.Af&&this.vD(),this.sk},w.prototype.uW=function(){this.Af=-1,this.Kd=0},w.prototype.vW=function(){this.Kd=this.bg,this.Af=-1},w.prototype.Wb=function(u,o){if(o===void 0&&(o=-1),0<=this.gb&&this.gb<this.ib.ea()){var r=this.CM();if(u>=r&&u<this.ib.Wc(this.gb))return this.Af=-1,void(this.Kd=u-r)}o=0<=o&&o<this.ib.ea()&&u>=this.ib.Ca(o)&&u<this.ib.Wc(o)?o:this.ib.nz(u),this.El=o+1,this.gb=o,this.Af=-1,this.Kd=u-this.ib.Ca(o),this.bg=this.Vx(o),this.ib.Ca(this.gb),this.ib.ec(this.gb)},w.prototype.ab=function(){return this.gb=this.El,!(this.gb>=this.ib.ea())&&(this.Af=-1,this.Kd=0,this.bg=this.Vx(this.gb),this.ib.Ca(this.gb),this.ib.ec(this.gb),this.El++,!0)},w.prototype.aj=function(){this.bg=this.Kd=this.Af=-1,this.El=0,this.gb=-1},w.prototype.Vx=function(u){if(this.ib.Bc())return 0;var o=1;return this.ib.ec(u)&&(o=0),this.ib.Ka(u)-o},w.prototype.Pn=function(){return this.Af==this.bg-1&&this.ib.ec(this.gb)},w.prototype.DB=function(){this.Bm=!0},w.prototype.xb=function(){return this.ib.nb.o[this.gb]+this.Af},w.prototype.CM=function(){return this.ib.Ca(this.gb)},w.prototype.jk=function(){return this.Pn()?this.ib.Ca(this.gb):this.xb()+1},w.prototype.xm=function(){return this.Af==0},w.prototype.Rn=function(){return this.Af==this.bg-1},w.prototype.Ia=function(){return this.Kd<this.bg},w.prototype.zz=function(){return 0<this.Kd},w.prototype.Pf=function(){var u=new w(this.ib);return u.Af=this.Af,u.Kd=this.Kd,u.bg=this.bg,u.gb=this.gb,u.El=this.El,u.ib=this.ib,u.Bm=this.Bm,u},w.prototype.vD=function(){if(0>this.Kd||this.Kd>=this.bg)throw h.i.re();this.Af=this.Kd;var u=this.xb();this.ib.rc();var o=this.ib.Se,r=1;switch(o!=null&&(r=7&o.read(u)),o=this.ib.description,r){case 1:this.tb==null&&(this.tb=new h.zb),this.sk=this.tb;break;case 2:throw h.i.ga("internal error");default:throw h.i.Ra()}this.sk.kg(o),r=this.jk(),this.ib.Hc(u,this.Fs),this.sk.Ec(this.Fs),this.ib.Hc(r,this.Fs),this.sk.Rc(this.Fs);for(var n=1,a=o.Ba;n<a;n++)for(var c=o.qd(n),p=h.ua.Wa(c),f=0;f<p;f++){var m=this.ib.Vc(c,u,f);this.sk.SB(c,f,m),m=this.ib.Vc(c,r,f),this.sk.IB(c,f,m)}},w.prototype.SS=function(){return this.gb==this.ib.ea()-1},w.prototype.Qn=function(){var u=this.ib.OR();return u!=null&&(7&u.read(this.Af))!=1},w}();h.SL=A}(q||(q={})),function(h){var A=function(){function w(u){u instanceof h.ba?(this.rH=u,this.za=-1,this.Gi=1):(this.mT=u.slice(0),this.za=-1,this.Gi=u.length)}return w.prototype.Ma=function(){return this.za},w.prototype.next=function(){return this.za<this.Gi-1?(this.za++,this.rH!=null?this.rH:this.mT[this.za]):null},w.prototype.qe=function(){},w}();h.$c=A}(q||(q={})),function(h){var A=function(){this.next=null},w=function(){function u(){this.Vq=this.Mw=this.Nw=0,this.eF=!1,this.aK=0,this.jn=this.Lf=this.Yl=this.Lh=null,this.Ql=0,this.qy=null,this.rl=this.ri=-1}return u.prototype.sX=function(o,r,n){this.ri=o,this.rl=r,this.Lh=this.Yl=null,this.Vq=0,this.qy=n,this.jn==null&&(this.jn=h.P.lg(384,0)),this.hK()},u.prototype.S=function(){return this.ri},u.prototype.da=function(){return this.rl},u.prototype.flush=function(){0<this.Ql&&(this.qy.aF(this.jn,this.Ql),this.Ql=0)},u.prototype.hK=function(){if(0<this.Vq){for(var o=0;o<this.rl;o++){for(var r=this.Yl[o];r!=null;){var n=r;r=r.next,n.next=null}this.Yl[o]=null}this.Lh=null}this.Nw=this.rl,this.Mw=-1,this.Vq=0},u.prototype.cJ=function(o){for(this.eF=o==u.Bx,o=this.Nw;o<=this.Mw;o++)this.mN(),this.fN(o),this.TP();this.hK()},u.prototype.fy=function(o,r,n,a){if(r!=a){var c=1;if(r>a&&(c=o,o=n,n=c,c=r,r=a,a=c,c=-1),!(0>a||r>=this.rl)){0>o&&0>n?n=o=-1:o>=this.ri&&n>=this.ri&&(n=o=this.ri);var p=(n-o)/(a-r);a>this.rl&&(n=p*((a=this.rl)-r)+o),0>r&&(o=p*(0-r)+o,r=0);var f=Math.max(this.ri+1,8388607);-8388607>o?(r=(0-o)/p+r,o=0):o>f&&(r=(this.ri-o)/p+r,o=this.ri),-8388607>n?a=(0-o)/p+r:n>f&&(a=(this.ri-o)/p+r),(r=h.P.truncate(r))!=(a=h.P.truncate(a))&&((n=new A).x=h.P.truncate(4294967296*o),n.y=r,n.H=a,n.QP=h.P.truncate(4294967296*p),n.dir=c,this.Yl==null&&(this.Yl=h.P.lg(this.rl,null)),n.next=this.Yl[n.y],this.Yl[n.y]=n,n.y<this.Nw&&(this.Nw=n.y),n.H>this.Mw&&(this.Mw=n.H),this.Vq++)}}},u.prototype.mN=function(){if(this.Lh!=null){for(var o=!1,r=null,n=this.Lh;n!=null;)if(n.y++,n.y==n.H){var a=n;n=n.next,r!=null?r.next=n:this.Lh=n,a.next=null}else n.x+=n.QP,r!=null&&r.x>n.x&&(o=!0),r=n,n=n.next;o&&(this.Lh=this.$J(this.Lh))}},u.prototype.fN=function(o){if(!(o>=this.rl)){var r=this.Yl[o];if(r!=null){this.Yl[o]=null,r=this.$J(r),this.Vq-=this.aK,o=this.Lh;for(var n=!0,a=r,c=null;o!=null&&a!=null;)o.x>a.x?(n&&(this.Lh=a),n=a.next,a.next=o,c!=null&&(c.next=a),c=a,a=n):(n=o.next,o.next=a,c!=null&&(c.next=o),c=o,o=n),n=!1;this.Lh==null&&(this.Lh=r)}}},u.ZJ=function(o,r){return 0>o?0:o>r?r:o},u.prototype.TP=function(){if(this.Lh!=null){for(var o=0,r=this.Lh,n=h.P.truncate(h.P.QG(r.x)),a=r.next;a!=null;a=a.next)if(o=this.eF?1^o:o+a.dir,a.x>r.x){var c=h.P.truncate(h.P.QG(a.x));o!=0&&(r=u.ZJ(n,this.ri),(n=u.ZJ(c,this.ri))>r&&r<this.ri&&(this.jn[this.Ql++]=r,this.jn[this.Ql++]=n,this.jn[this.Ql++]=a.y,this.Ql==this.jn.length&&(this.qy.aF(this.jn,this.Ql),this.Ql=0))),r=a,n=c}}},u.prototype.$J=function(o){for(var r=0,n=o;n!=null;n=n.next)r++;if(this.aK=r,r==1)return o;this.Lf==null?this.Lf=h.P.lg(Math.max(r,16),null):this.Lf.length<r&&(this.Lf=h.P.lg(Math.max(r,2*this.Lf.length),null));var a=0;for(n=o;n!=null;n=n.next)this.Lf[a++]=n;for(r==2?this.Lf[0].x>this.Lf[1].x&&(o=this.Lf[0],this.Lf[0]=this.Lf[1],this.Lf[1]=o):u.uN(this.Lf,r,function(c,p){return c==p?0:c.x<p.x?-1:c.x>p.x?1:0}),o=this.Lf[0],this.Lf[0]=null,n=o,a=1;a<r;a++)n.next=this.Lf[a],n=this.Lf[a],this.Lf[a]=null;return n.next=null,o},u.uN=function(o,r,n){if(r==o.length)o.sort(n);else{var a=o.slice(0,0),c=o.slice(r);r=o.slice(0,r).sort(n),o.length=0,o.push.apply(o,a.concat(r).concat(c))}},u.Bx=0,u}();h.Ox=w}(q||(q={})),function(h){var A=function(){function w(){}return w.prototype.wi=function(u,o){var r=this.g.Qa(u,this.Rq);if(this.Fl==r&&(this.Fl=this.oe.lb(this.Fl)),this.io==r&&(this.io=this.oe.lb(this.io)),this.oe.kd(this.LA,r),this.ck(u),o&&(o=this.g.cd(u))!=-1&&this.g.Ya(o)==u){var n=this.g.V(u);if(n!=u){if((r=this.g.cd(n))==o)return void this.g.Kf(o,n);if((n=this.g.Na(u))!=u&&(r=this.g.cd(n))==o)return void this.g.Kf(o,n)}this.g.Kf(o,-1),this.g.Yg(o,-1)}},w.prototype.jD=function(){for(var u=!1,o=new h.h;;){this.Yh==null?(this.Yh=new h.ja(0),this.Bs=new h.ja(0),this.ye=new h.ja(0)):(this.Yh.clear(!1),this.Bs.clear(!1),this.ye.clear(!1));for(var r=this.io,n=0,a=!0;r!=this.Fl;){var c=this.oe.getData(r),p=new h.h;this.g.Hc(c,p),a&&(this.g.Hc(c,o),a=!1),p=this.g.Na(c);var f=this.g.V(c);this.g.Qa(p,this.zg)!=-559038737&&(this.Yh.add(p),this.g.Sa(p,this.zg,-559038737),this.Bs.add(c),this.ye.add(n++)),this.g.Qa(f,this.zg)!=-559038737&&(this.Yh.add(f),this.g.Sa(f,this.zg,-559038737),this.Bs.add(c),this.ye.add(n++)),r=this.oe.lb(r)}if(2>this.Yh.size)break;var m=this;for(this.ye.Wd(0,this.ye.size,function(b,S){return m.jM(b,S)}),r=0,n=this.ye.size;r<n;r++)a=this.ye.get(r),a=this.Yh.get(a),this.g.Sa(a,this.zg,r),p=new h.h,this.g.Hc(a,p);for(p=this.NM(o),r=0,n=this.ye.size;r<n;r++)(a=this.ye.get(r))!=-1&&(a=this.Yh.get(a),this.g.Sa(a,this.zg,-1));if(!p)break;u=!0}return u},w.prototype.NM=function(u){for(var o=!1,r=!0;r;){r=!1;var n=0;this.ye.get(n)==-1&&(n=this.em(n));for(var a=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&a!=-1&&n!=a;c++){var f=this.ye.get(n);a=this.ye.get(a),f=this.Yh.get(f),a=this.Yh.get(a);var m=this.g.V(f);this.g.Fv(m,u)||(m=this.g.Na(f));var b=this.g.V(a);this.g.Fv(b,u)||(b=this.g.Na(a));var S=this.ru(m,f),M=this.ru(b,a),T=S?this.g.Na(m):this.g.V(m),k=M?this.g.Na(b):this.g.V(b),C=!1;(this.tp(m)||this.tp(b)||this.tp(f)||this.tp(a)||this.tp(T)||this.tp(k))&&(C=!0),!C&&this.g.hq(f,a)&&(C=!0,this.nD(S,M,m,f,b,a)),!C&&this.g.hq(T,k)&&(C=!0,this.nD(!S,!M,m,T,b,k)),C&&(o=!0),r=r||C,n=this.em(n),a=this.em(n)}}if(!o)for(n=0,this.ye.get(n)==-1&&(n=this.em(n)),a=this.em(n),c=0,p=this.ye.size;c<p&&n!=-1&&a!=-1&&n!=a;c++)f=this.ye.get(n),a=this.ye.get(a),f=this.Yh.get(f),a=this.Yh.get(a),m=this.g.V(f),this.g.Fv(m,u)||(m=this.g.Na(f)),b=this.g.V(a),this.g.Fv(b,u)||(b=this.g.Na(a)),S=this.ru(m,f),M=this.ru(b,a),T=S?this.g.Na(m):this.g.V(m),k=M?this.g.Na(b):this.g.V(b),this.xM(S,M,f,m,T,a,b,k)&&(o=!0),n=this.em(n),a=this.em(n);return o},w.prototype.RM=function(){this.g.jc(this.Y)==1736&&this.g.Jn(this.Y)==1&&new h.Hg().EU(this.hw,this.g,this.Y,this.nd);var u=!1,o=!0;this.zg=this.Rq=-1;var r=this.g.I(this.Y),n=new h.ja(0);n.Jb(r);for(var a=this.g.Ob(this.Y);a!=-1;a=this.g.Sb(a))for(var c=this.g.Ya(a),p=0,f=this.g.Ka(a);p<f;p++)n.add(c),c=this.g.V(c);var m=this.g.ud.o,b=this.g.ud.Mf;this.g.wb.rc();var S=this.g.wb.Aa[0].o;for(n.Wd(0,r,function(T,k){var C=m[b*T],N=m[b*k],F=S[2*C];C=S[2*C+1];var D=S[2*N];return(F=C<(N=S[2*N+1])?-1:C>N?1:F<D?-1:F>D?1:0)==0&&(F=(T=m[b*T+3])<(k=m[b*k+3])?-1:T==k?0:1),F}),this.Rq=this.g.Hd(),this.oe=new h.kp,this.LA=this.oe.Rh(0),this.oe.hn(r),a=0;a<r;a++)c=n.get(a),p=this.oe.addElement(this.LA,c),this.g.Sa(c,this.Rq,p);for(this.zg=this.g.Hd(),this.Fl=-1,this.XC()&&(u=!0);o;){o=!1,r=0,n=!1;do{n=!1,this.io=-1,f=0,a=new h.h,p=new h.h;for(var M=this.oe.sc(this.LA);M!=-1;)c=this.oe.getData(M),this.io!=-1?(this.g.Hc(c,p),a.rb(p)?f++:(a.N(p),this.Fl=M,0<f&&(c=this.jD())&&(n=!0,this.Fl!=-1&&(c=this.oe.getData(this.Fl),this.g.Hc(c,a))),this.io=M=this.Fl,f=0)):(this.io=M,this.g.Hc(this.oe.getData(M),a),f=0),M!=-1&&(M=this.oe.lb(M));if(this.Fl=-1,0<f&&(c=this.jD())&&(n=!0),10<r++)throw h.i.Ra();n&&this.AM(),this.XC()&&(n=!0),o=o||n&&!1,u=u||n}while(n)}return this.g.Ud(this.Rq),this.g.Ud(this.zg),h.QL.W(this.g,this.Y,this.oe,this.hw)||u},w.prototype.ru=function(u,o){return this.g.V(o)!=u},w.prototype.xM=function(u,o,r,n,a,c,p,f){if(n==p)return this.ck(r),this.ck(c),!1;var m=this.g.Qa(r,this.zg),b=this.g.Qa(a,this.zg),S=this.g.Qa(c,this.zg),M=this.g.Qa(f,this.zg),T=[0,0,0,0];for((r=[0,0,0,0,0,0,0,0])[0]=0,T[0]=m,r[1]=0,T[1]=b,r[2]=1,T[2]=S,r[3]=1,T[3]=M,m=1;4>m;m++){for(b=T[m],S=r[m],M=m-1;0<=M&&T[M]>b;)T[M+1]=T[M],r[M+1]=r[M],M--;T[M+1]=b,r[M+1]=S}return T=0,r[0]!=0&&(T|=1),r[1]!=0&&(T|=2),r[2]!=0&&(T|=4),r[3]!=0&&(T|=8),(T==5||T==10)&&(u==o?u?(this.g.Cc(f,n),this.g.Dc(n,f),this.g.Cc(a,p),this.g.Dc(p,a)):(this.g.Dc(f,n),this.g.Cc(n,f),this.g.Dc(a,p),this.g.Cc(p,a)):u?(this.g.Dc(n,c),this.g.Cc(c,n),this.g.Dc(p,a),this.g.Cc(a,p)):(this.g.Cc(n,c),this.g.Dc(c,n),this.g.Cc(p,a),this.g.Dc(a,p)),!0)},w.prototype.nD=function(u,o,r,n,a,c){this.EY?this.PM():this.OM(u,o,r,n,a,c)},w.prototype.PM=function(){throw h.i.ga("not implemented.")},w.prototype.OM=function(u,o,r,n,a,c){if(u!=o)u?(this.g.Cc(r,a),this.g.Dc(a,r),this.g.Cc(c,n),this.g.Dc(n,c),this.wn(a,r),this.wi(a,!0),this.g.oi(a,!0),this.ck(r),this.wn(c,n),this.wi(c,!0),this.g.oi(c,!1)):(this.g.Cc(a,r),this.g.Dc(r,a),this.g.Cc(n,c),this.g.Dc(c,n),this.wn(a,r),this.wi(a,!0),this.g.oi(a,!1),this.ck(r),this.wn(c,n),this.wi(c,!0),this.g.oi(c,!0)),this.ck(n);else{var p=u?r:n,f=o?a:c;for(u=u?n:r,o=o?c:a,a=!1,this.g.Cc(p,f),this.g.Cc(f,p),this.g.Dc(u,o),this.g.Dc(o,u),c=o;c!=f;)r=this.g.Na(c),n=this.g.V(c),this.g.Dc(c,n),this.g.Cc(c,r),a=a||c==p,c=n;a||(r=this.g.Na(f),n=this.g.V(f),this.g.Dc(f,n),this.g.Cc(f,r)),this.wn(f,p),this.wi(f,!0),this.g.oi(f,!1),this.ck(p),this.wn(o,u),this.wi(o,!0),this.g.oi(o,!1),this.ck(u)}},w.prototype.XC=function(){for(var u=!1,o=this.g.Ob(this.Y);o!=-1;){for(var r=this.g.Ya(o),n=0,a=this.g.Ka(o);n<a&&1<a;){var c=this.g.Na(r),p=this.g.V(r);this.g.hq(c,p)?(u=!0,this.wi(r,!1),this.g.pd(r,!0),this.wi(p,!1),this.g.pd(p,!0),r=c,n=0,a=this.g.Ka(o)):(r=p,n++)}if(2>this.g.Ka(o)){for(u=this.g.Ya(o),n=0,a=this.g.Ka(o);n<a;n++)this.wi(u,!1),u=this.g.V(u);o=this.g.ar(o),u=!0}else o=this.g.Sb(o)}return u},w.prototype.tp=function(u){for(var o=!1;;){var r=this.g.V(u),n=this.g.Na(u);if(r==u)return this.wi(u,!0),this.g.oi(u,!1),!0;if(!this.g.hq(r,n)||(o=!0,this.ck(n),this.ck(r),this.wi(u,!0),this.g.oi(u,!1),this.wn(r,n),this.wi(r,!0),this.g.oi(r,!0),r==n))break;u=n}return o},w.prototype.AM=function(){for(var u=0,o=this.oe.sc(this.oe.je);o!=-1;o=this.oe.lb(o)){var r=this.oe.getData(o);this.g.cj(r,-1)}for(var n=0,a=this.g.Ob(this.Y);a!=-1;)if((o=this.g.Ya(a))==-1||this.g.cd(o)!=-1)r=a,a=this.g.Sb(a),this.g.br(r);else{this.g.cj(o,a);var c=1;for(r=this.g.V(o);r!=o;r=this.g.V(r))this.g.cj(r,a),c++;this.g.ep(a,!1),this.g.Xj(a,c),this.g.Yg(a,this.g.Na(o)),n+=c,u++,a=this.g.Sb(a)}for(o=this.oe.sc(this.oe.je);o!=-1;o=this.oe.lb(o))r=this.oe.getData(o),this.g.cd(r)==-1&&(a=this.g.hG(this.Y,r,r,null),n+=this.g.Ka(a),u++);for(this.g.Tl(this.Y,u),this.g.Vj(this.Y,n),u=0,n=this.g.ld;n!=-1;n=this.g.ve(n))u+=this.g.I(n);this.g.WB(u)},w.prototype.em=function(u){for(var o=0,r=this.ye.size-1;o<r;o++)if(u=(u+1)%this.ye.size,this.ye.get(u)!=-1)return u;return-1},w.prototype.wn=function(u,o){var r=this.g.Qa(o,this.Rq),n=this.g.Qa(o,this.zg);this.g.fC(u,o),this.g.Sa(o,this.Rq,r),this.g.Sa(o,this.zg,n)},w.prototype.ck=function(u){var o=this.g.Qa(u,this.zg);o!=-1&&(this.ye.set(o,-1),this.g.Sa(u,this.zg,-1))},w.W=function(u,o,r,n,a){var c=new w;return c.g=u,c.Y=o,c.rA=r,c.hw=n,c.nd=a,c.RM()},w.prototype.jM=function(u,o){var r=this.Yh.get(u),n=new h.h;this.g.Hc(r,n),r=new h.h;var a=this.Yh.get(o);return this.g.Hc(a,r),n.rb(r)?0:(a=this.Bs.get(u),u=new h.h,this.g.Hc(a,u),a=this.Bs.get(o),o=new h.h,this.g.Hc(a,o),(a=new h.h).vc(n,u),(n=new h.h).vc(r,o),h.h.pu(a,n))},w}();h.tn=A}(q||(q={})),function(h){var A;(A=h.UL||(h.UL={}))[A.Local=0]="Local",A[A.Geographic=1]="Geographic",A[A.Projected=2]="Projected",A[A.Image=3]="Image",A[A.Unknown=4]="Unknown",function(u){u[u.Integer32=0]="Integer32",u[u.Integer64=1]="Integer64",u[u.FloatingPoint=2]="FloatingPoint"}(h.NL||(h.NL={}));var w=function(){function u(){this.qp="",this.uu=null,this.eg=0,this.TH=this.Io=-1,this.yh=null}return u.prototype.Fc=function(){return this.eg},u.prototype.PF=function(){return 1},u.prototype.Yd=function(){var o=.001;return this.eg!=0?o=h.yr.wQ(this.eg):this.yh!=null&&(o=h.RC.xQ(this.yh)),o},u.prototype.wz=function(){return this.yh},u.prototype.Id=function(){return this.eg!=0?h.Uc.ah(h.yr.Ny(this.eg)):this.yh!=null?h.RC.yQ(this.yh):void 0},u.Tb=function(o){if(o.eg!=0){if(h.yr.RS(o.eg)===!0)return 1;if(h.yr.TS(o.eg)===!0)return 2}return 4},u.prototype.cs=function(){var o=this.Fc();return this.Io!=-1?this.Io:(this.Io=h.yr.zK(o),this.Io!=-1?this.Io:o)},u.create=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var r=new u;return r.eg=o,r},u.kP=function(o){if(o==null||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var r=new u;return r.yh=o,r},u.prototype.Nb=function(o){return this==o||o!=null&&this.constructor==o.constructor&&this.eg==o.eg&&(this.eg!=0||this.yh===o.yh)},u.prototype.toString=function(){return"[ tol: "+this.Ln()+"; wkid: "+this.Fc()+"; wkt: "+this.wz()+"]"},u.prototype.dc=function(){if(this.qp!=="")return this.qp;var o=this.toString();if(Array.prototype.reduce)return this.qp="S"+o.split("").reduce(function(a,c){return(a=(a<<5)-a+c.charCodeAt(0))&a},0);var r=0;if(o.length===0)return"";for(var n=0;n<o.length;n++)r=(r<<5)-r+o.charCodeAt(n),r&=r;return this.qp="S"+r},u.prototype.Ln=function(){return this.Yd(0)},u.prototype.hh=function(){return this.uu!==null?this.uu:this.uu=h.iu.sP(this)},u.TN=2147483645,u.UN=9007199254740990,u}();h.Gg=w}(q||(q={})),function(h){var A=function(w){function u(){var o=w!==null&&w.apply(this,arguments)||this;return o.Li=null,o.KT=null,o.Jq=new h.TL,o.Fo=null,o.lw=null,o}return gt(u,w),u.sP=function(o){var r=new u;if(r.eg=o.eg,r.Io=o.Io,r.TH=o.TH,r.yh=o.yh,r.yh!==""&&r.yh!==null){o=u.eM(r.yh);var n=u.cM(r.yh);r.Jq.Wx(o,n,h.ju.Integer64),r.ay(o),r.cy(n),r.eg=o.cs()}else o=u.dM(r.eg),r.ay(o),r.cy(null),r.Jq.Wx(o,null,h.ju.Integer64);return r},u.prototype.Yd=function(o){return this.Jq.Ln(o)},u.cM=function(o){if(0>=o.length)throw h.i.O();var r=null;try{r=h.HC.fromString(o)}catch{r=null}return r==null?null:u.WC(r,!0)},u.prototype.ay=function(o){this.Ld=o,this.Fo=this.Ld.Id()},u.prototype.cy=function(o){this.EH=o,this.KT=this.EH!=null?this.EH.Fo:null},u.prototype.Xc=function(){return this.Tb()!=0&&this.Tb()!=3&&this.Ld.Xc()},u.prototype.CG=function(){return this.Tb()!=0&&(this.Tb()==3?this.Li.gk().Xc():this.Ld.Xc())},u.prototype.gh=function(){return this.Ld!=null?this.Ld.Re:null},u.prototype.rm=function(){return this.Ld.rm()},u.prototype.bf=function(){return this.Ld.bf()},u.prototype.jh=function(){return this.Ld!=null?this.Ld.uw:NaN},u.prototype.Wp=function(){return this.Ld.Wp()},u.prototype.Yr=function(){return this.Ld.Yr()},u.prototype.lk=function(){return this.Ld.lk()},u.prototype.dS=function(o){return h.IC.Ky(this.Ld,o.Ld)},u.prototype.ol=function(){return this.Ld.ol()},u.prototype.Xr=function(){return this.Ld.Xr()},u.prototype.Bi=function(){return this.Tb()==3?this.Li.gk().Bi():this.Ld.Bi()},u.prototype.ih=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.ih(o),o},u.prototype.Le=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.to},u.prototype.BR=function(){if(!this.Xc())throw h.i.O("!isPannable()");var o=new h.l;return this.Ld.AR(o),o},u.prototype.rv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.rv()},u.prototype.qv=function(){if(!this.Xc())throw h.i.O("!isPannable()");return this.Ld.qv()},u.prototype.Zr=function(){return this.Li!=null?this.Li.gk().Zr():this.Ld.Zr()},u.prototype.JQ=function(){return this.Ld.kv()},u.prototype.Sp=function(){return this.Fo.getUnitFactor()},u.prototype.pz=function(o){return this.Jq.pz(o)},u.prototype.tc=function(){var o=this.Tb();if(o==1)return this;if(o==3)return this.Li.gk().tc();if(o==0||o===4)throw h.i.ga("invalid call");if(this.lw!==null)return this.lw;if((o=this.gh().getGeogcs())==null)throw h.i.Ra();return this.lw=u.WE(o,this.Jq.PF())},u.WE=function(o,r){if(o==null)throw h.i.O("null pointer.");var n=new u;return o=u.ou(o,!0),n.Jq.Wx(o,null,r),n.ay(o),n.cy(null),n.eg=o.cs(),n},u.prototype.Tb=function(){var o=this.gh();if(o!=null)switch(o.getType()){case h.Tc.PE_TYPE_GEOGCS:return 1;case h.Tc.PE_TYPE_PROJCS:return 2}return 4},u.prototype.kv=function(){return this.Ld.kv()},u.ou=function(o,r){var n=o.getCode();if(0>=n&&0<(n=h.qf.getCode(o))){if((o=h.qf.coordsys(n))==null)throw h.i.O("Text to wkid mapping had failed: "+n);return u.ou(o,r)}if(r&&0<n&&(r=u.qx[n]))return r;r=h.Ab.zv(o,n,!1);var a=u.fK[r];return a||(o=0>=n?o:h.qf.coordsys(n),o=new h.IC(o),u.fK[r]=o,0<n&&(u.qx[n]=o),o)},u.dM=function(o){if(0>=o)throw h.i.O("Invalid or unsupported wkid: "+o);var r=u.qx[o];if(r!=null)return r;if((r=h.qf.coordsys(o))==null)throw h.i.O("Invalid or unsupported wkid: "+o);return(r=u.ou(r,!1)).cs()!=o&&(u.qx[o]=r),r},u.eM=function(o){if(o==null||o===void 0||o.length==0)throw h.i.O("Cannot create SpatialReference from null or empty text.");var r=null;try{r=h.qf.fromString(h.Tc.PE_TYPE_COORDSYS,o)}catch(n){throw h.i.O("Cannot create SpatialReference from text. "+n.message)}if(r===null)throw h.i.O("Cannot create SpatialReference from text. ");return u.ou(r,!0)},u.WC=function(o,r){var n,a=o.getCode();if(0>=a&&0<(a=h.qf.getCode(o))){if((a=h.qf.vertcs(a))===null)throw h.i.O();return u.WC(a,r)}if(r&&0<a&&(r=u.eK[a])||(o=h.Ab.zv(o,a,!1),r=u.gK[o]))return r;if(0>=a||(n=h.qf.vertcs(a)),n===null)throw h.i.O();return n=new h.JL(n),u.gK[o]=n,0<a&&(u.eK[a]=n),n},u.mI=function(o,r){if(r===null||r.B())return null;var n=new h.l;if(r!==null&&o.Tb()!=1){var a=o.tc(),c=a.gh();o=h.xr.Pr(o,a,null,null),(r=h.Gx.local().W(r,o,null)).A(n)}else c=o.gh(),r.A(n);return r=c.getPrimem().getLongitude(),c=c.getUnit().getUnitFactor(),new h.FC(n.v,n.G,n.C,n.H,r,c)},u.fD=function(o){var r={name:"",steps:[],_pt:null,_entry:null},n=0;for(o=o.getEntries();n<o.length;n++){var a=o[n],c={DY:!1,RY:"",QY:-1,geogtran:null};a.getDirection()===0?c.isInverse=!1:c.isInverse=!0;var p=a.getGeogtran().getCode();-1<p?c.wkid=p:c.wkt=a.getGeogtran().toString(),r.steps.push(c)}return r},u.QR=function(o,r,n,a){return n===void 0&&(n=null),n=u.mI(a,n),o=h.mp.getGTlist(o.gh(),r.gh(),2,h.mp.PE_GTLIST_OPTS_COMMON,n,1),r=null,o&&0<o.length&&(r=this.fD(o[0]),h.Lx.destroy(o)),n!==null&&n.destroy(),r},u.RR=function(o,r,n,a){var c;if(n===void 0&&(n=null),a===void 0&&(a=null),c===void 0&&(c=30),n=u.mI(a,n),o=h.mp.getGTlist(o.gh(),r.gh(),2,h.mp.PE_GTLIST_OPTS_COMMON,n,c),r=[],o&&0<o.length){for(c=0;c<o.length;c++)r.push(this.fD(o[c]));h.Lx.destroy(o)}return n!==null&&n.destroy(),r},u.qx={},u.fK={},u.eK={},u.gK={},u}(h.Gg);h.iu=A}(q||(q={})),function(h){var A,w;(w=A=h.ju||(h.ju={}))[w.Integer32=0]="Integer32",w[w.Integer64=1]="Integer64",w[w.FloatingPoint=2]="FloatingPoint";var u=function(){function o(){this.rp()}return o.prototype.assign=function(r){this.Hm=r.Hm,this.Im=r.Im,this.Rj=r.Rj,this.mA=r.mA,this.Go=r.Go,this.lA=r.lA,this.Jk=r.Jk,this.Oq=r.Oq,this.Nq=r.Nq,this.Tm=r.Tm},o.prototype.PF=function(){return this.Tm},o.prototype.rp=function(){this.Im=this.Hm=0,this.Rj=1,this.mA=0,this.Go=1,this.lA=0,this.Nq=this.Oq=this.Jk=2220446049250313e-29,this.Tm=A.FloatingPoint},o.prototype.Wx=function(r,n,a){if(this.rp(),this.Tm=a,a!=A.FloatingPoint){var c=new h.l;r.bR(c),this.Hm=c.v,this.Im=c.G}else this.Im=this.Hm=-17976931348623157e292;(c=r.Re.getType())==h.Tc.PE_TYPE_GEOGCS?(c=(a==A.Integer64?1e-9:1/18e5)*r.bf(),this.Rj=1/c):c==h.Tc.PE_TYPE_PROJCS&&(c=(a==A.Integer64?1e-4:.001)*r.rm(),this.Rj=1/c),n!=null?(c=(a==A.Integer32?.001:1e-4)*n.CH,this.Go=1/c):this.Go=1e4,this.SM(),this.Jk=r.uw,this.Oq=n!=null?.001*n.CH:.001,this.Nq=2220446049250313e-29},o.prototype.SM=function(){if(this.Tm!=A.FloatingPoint){var r=this.Tm==A.Integer64?h.Gg.UN:h.Gg.TN,n=r/this.Rj,a=this.Hm+n,c=h.P.truncate((a-this.Hm)*this.Rj);c>r&&(this.Rj=r/(a-this.Hm)),n=this.Im+n,(c=h.P.truncate((n-this.Im)*this.Rj))>r&&(this.Rj=r/(n-this.Im))}},o.prototype.VB=function(r){switch(r){case 0:this.Jk=void 0;case 1:this.Oq=void 0;case 2:this.Nq=void 0}},o.prototype.Ln=function(r){switch(r){case 0:return this.Jk;case 1:return this.Oq;case 2:return this.Nq}return 0},o.prototype.pz=function(r){if(this.Tm==A.FloatingPoint)return 0;switch(r){case 0:return 1/this.Rj;case 1:case 2:return 1/this.Go;default:return 0}},o.prototype.toString=function(){var r="SRPD [m_toleranceXY: "+this.Jk.toString();return(r=(r=(r=(r=(r=(r=(r=(r=(r=r+";m_falseX: "+this.Hm.toString())+";m_falseY: "+this.Im.toString())+";m_unitsXY: "+this.Rj.toString())+";m_falseZ: "+this.mA.toString())+";m_unitsZ: "+this.Go.toString())+";m_falseM: "+this.lA.toString())+";m_toleranceZ: "+this.Oq.toString())+";m_toleranceM: "+this.Nq.toString())+";m_precision: "+this.Tm.toString())+"] "},o}();h.TL=u}(q||(q={})),function(h){function A(a,c){return 89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c*=.017453292519943,[111319.49079327169*a,31890685e-1*Math.log((1+Math.sin(c))/(1-Math.sin(c)))]}function w(a,c,p){return a=a/6378137*57.29577951308232,p?[a,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]:[a-360*Math.floor((a+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*c/6378137)))]}function u(a,c,p){var f=a.Pf();if(a.K()===33)c=c(f.Ng(),f.kh()),f.Db(c[0],c[1]);else if(a.K()===197){var m=c(a.gs(),a.js(),p);c=c(a.fs(),a.hs(),p),f.L(m[0],m[1],c[0],c[1])}else for(m=new h.h,a=0;a<f.I();a++){f.D(a,m);var b=c(m.x,m.y,p);m.na(b[0],b[1]),f.Db(a,m)}return f}function o(a){return u(a,w,!0)}function r(a){return u(a,A,!0)}var n=Math.PI/180;h.OK=function(){function a(){}return a.xu=function(c){var p=Math.sqrt(.006694379990197414),f=Math.sin(c.y*n);return h.h.construct(6378137*c.x*n,3.1677196636462314e6*(f/(1-.006694379990197414*f*f)-1/(2*p)*Math.log((1-p*f)/(1+p*f))))},a.Ux=function(c,p,f,m){var b=.0033528106647474805,S=Math.sin(f);f=Math.cos(f);var M=(1-b)*Math.tan(c),T=M*(c=1/Math.sqrt(1+M*M)),k=Math.atan2(M,f),C=(M=c*S)*M,N=1-C,F=27233160610754688e-5*N/4040829998466145e-2,D=1+F/16384*(4096+F*(F*(320-175*F)-768)),j=F/1024*(256+F*(F*(74-47*F)-128));F=m/(635675231424518e-8*D);for(var G,W,J,B=2*Math.PI;1e-12<Math.abs(F-B);)J=Math.cos(2*k+F),B=F,F=m/(635675231424518e-8*D)+j*(G=Math.sin(F))*(J+j/4*((W=Math.cos(F))*(2*J*J-1)-j/6*J*(4*G*G-3)*(4*J*J-3)));return m=T*G-c*W*f,N=b/16*N*(4+b*(4-3*N)),h.h.construct((p+(Math.atan2(G*S,c*W-T*G*f)-(1-N)*b*M*(F+N*G*(J+N*W*(2*J*J-1)))))/n,Math.atan2(T*W+c*G*f,(1-b)*Math.sqrt(C+m*m))/n)},a.GM=function(c,p,f,m){var b=.0033528106647474805,S=m-p,M=Math.atan((1-b)*Math.tan(c)),T=Math.atan((1-b)*Math.tan(f)),k=Math.sin(M);M=Math.cos(M);var C=Math.sin(T);T=Math.cos(T);var N=S,F=1e3;do{var D=Math.sin(N),j=Math.cos(N),G=Math.sqrt(T*D*T*D+(M*C-k*T*j)*(M*C-k*T*j));if(G===0)return 0;j=k*C+M*T*j;var W=Math.atan2(G,j),J=M*T*D/G,B=1-J*J;D=j-2*k*C/B,isNaN(D)&&(D=0);var Q=b/16*B*(4+b*(4-3*B)),ue=N;N=S+(1-Q)*b*J*(W+Q*G*(D+Q*j*(2*D*D-1)))}while(1e-12<Math.abs(N-ue)&&0<--F);return F===0?(k=m-p,{azimuth:Math.atan2(Math.sin(k)*Math.cos(f),Math.cos(c)*Math.sin(f)-Math.sin(c)*Math.cos(f)*Math.cos(k)),geodesicDistance:6371008771415059e-9*Math.acos(Math.sin(c)*Math.sin(f)+Math.cos(c)*Math.cos(f)*Math.cos(m-p))}):(p=(c=27233160610754688e-5*B/4040829998466145e-2)/1024*(256+c*(c*(74-47*c)-128)),{azimuth:Math.atan2(T*Math.sin(N),M*C-k*T*Math.cos(N)),SQ:635675231424518e-8*(1+c/16384*(4096+c*(c*(320-175*c)-768)))*(W-p*G*(D+p/4*(j*(2*D*D-1)-p/6*D*(4*G*G-3)*(4*D*D-3)))),PY:Math.atan2(M*Math.sin(N),M*C*Math.cos(N)-k*T)})},a.dQ=function(c){var p=c.hasAttribute(1),f=c.hasAttribute(2),m=[],b=c.ea(),S=null,M=null;p&&(S=c.vb(1)),f&&(M=c.vb(2));for(var T=new h.h,k=0;k<b;k++){for(var C=c.Ca(k),N=c.Ka(k),F=0,D=0,j=NaN,G=NaN,W=NaN,J=NaN,B=c.ec(k),Q=[],ue=C;ue<C+N;ue++){c.D(ue,T),J=W=NaN;var ge=[T.x,T.y];p&&(W=S.get(ue),ge.push(W)),f&&(b=M.get(ue),ge.push(J)),ue==C&&B&&(F=T.x,D=T.y,j=W,G=J),Q.push(ge)}!B||F==T.x&&D==T.y&&(!p||isNaN(j)&&isNaN(W)||j==W)&&(!f||isNaN(G)&&isNaN(J)||G==J)||Q.push(Q[0].slice(0)),m.push(Q)}return m},a.Ry=function(c,p){c=a.dQ(c),637.100877141506>p&&(p=637.100877141506);for(var f,m=[],b=0;b<c.length;b++){var S,M,T=c[b];m.push(f=[]),f.push([T[0][0],T[0][1]]);var k=T[0][0]*n,C=T[0][1]*n;for(S=0;S<T.length-1;S++){var N=T[S+1][0]*n,F=T[S+1][1]*n;if(k!==N||C!==F){N=(F=a.GM(C,k,F,N)).azimuth;var D=(F=F.SQ)/p;if(1<D){for(M=1;M<=D-1;M++){var j=a.Ux(C,k,N,M*p);f.push([j.x,j.y])}M=a.Ux(C,k,N,(F+Math.floor(D-1)*p)/2),f.push([M.x,M.y])}C=a.Ux(C,k,N,F),f.push([C.x,C.y]),k=C.x*n,C=C.y*n}}}return{kJ:m}},a.RQ=function(c){for(var p=[],f=0;f<c.length;f++){var m=c[f];m=a.Ry(m,1e4),p.push(m)}c=[];for(var b=0;b<p.length;b++){m=p[b];var S=0;for(f=0;f<m.kJ.length;f++){var M,T=m.kJ[f],k=a.xu(h.h.construct(T[0][0],T[0][1])),C=a.xu(h.h.construct(T[T.length-1][0],T[T.length-1][1])),N=C.x*k.y-k.x*C.y;for(M=0;M<T.length-1;M++)k=a.xu(h.h.construct(T[M+1][0],T[M+1][1])),N+=(C=a.xu(h.h.construct(T[M][0],T[M][1]))).x*k.y-k.x*C.y;S+=N}S/=1,c.push(S/-2)}return c},a}(),h.cb=function(){function a(){}return a.rB=function(c,p,f,m,b,S,M){a.aD[c.dc()]=p,isNaN(f)==0&&(a.gD[c.dc()]=f),isNaN(m)==0&&(a.tD[c.dc()]=m),isNaN(b)==0&&(a.VC[c.dc()]=b),a.hD[c.dc()]=S,M!==null&&(a.iD[c.dc()]=M)},a.Yw=function(c,p,f){a.mD[c.dc()+"-"+p.dc()]=f},a.tc=function(c){if((c=a.aD[c.dc()])==null)throw h.i.Fe();return c},a.bf=function(c){if((c=a.gD[c.dc()])==null)throw h.i.Fe();return c},a.xv=function(c){if((c=a.tD[c.dc()])==null)throw h.i.Fe();return c},a.gv=function(c){if((c=a.VC[c.dc()])==null)throw h.i.Fe();return c},a.ih=function(c){if((c=a.iD[c.dc()])==null)throw h.i.Fe();return h.l.construct(c[0],c[1],c[2],c[3])},a.Xc=function(c){if((c=a.hD[c.dc()])==null)throw h.i.Fe();return c},a.Bh=function(c,p,f){if(p.Nb(f))return c;var m=a.mD[p.dc()+"-"+f.dc()];if(m!==void 0)return m(c,p,f);throw h.i.Fe()},a.wt=function(){throw h.i.Fe()},a.WQ=function(){throw h.i.Fe()},a.WV=function(){throw h.i.Fe()},a.ol=function(){throw h.i.Fe()},a.kW=function(){var c=h.Gg.create(102100),p=h.Gg.create(3857),f=h.Gg.create(4326);h.cb.rB(c,f,NaN,NaN,NaN,!1,null),h.cb.rB(f,f,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]),h.cb.rB(p,f,NaN,NaN,NaN,!1,null),h.cb.Yw(c,f,o),h.cb.Yw(f,c,r),h.cb.Yw(p,f,o),h.cb.Yw(f,p,r)},a.aD=[],a.gD=[],a.tD=[],a.VC=[],a.hD=[],a.iD=[],a.mD=[],a}()}(q||(q={})),q.cb.kW(),function(h){var A=function(){function w(u){this.o=new Int32Array(0),this.jo=-1,this.Jg=this.size=this.Dl=0,this.Mf=u}return w.prototype.kd=function(u){u<this.Dl?(this.o[u*this.Mf]=this.jo,this.jo=u):this.Dl--,this.size--},w.prototype.U=function(u,o){return this.o[u*this.Mf+o]},w.prototype.T=function(u,o,r){this.o[u*this.Mf+o]=r},w.prototype.De=function(){var u=this.jo;if(u==-1){if(this.Dl==this.Jg){if(2147483647<(u=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(u=2147483647),u==this.Jg)throw h.i.re();this.yz(u)}u=this.Dl,this.Dl++}else this.jo=this.o[u*this.Mf];this.size++;for(var o=u*this.Mf;o<u*this.Mf+this.Mf;o++)this.o[o]=-1;return u},w.prototype.Nl=function(u){var o=this.jo;if(o==-1){if(this.Dl==this.Jg){if(2147483647<(o=this.Jg!=0?h.P.truncate(3*(this.Jg+1)/2):1)&&(o=2147483647),o==this.Jg)throw h.i.re();this.yz(o)}o=this.Dl,this.Dl++}else this.jo=this.o[o*this.Mf];this.size++;for(var r=o*this.Mf,n=0;n<u.length;n++)this.o[r+n]=u[n];return o},w.prototype.oj=function(u){this.jo=-1,this.size=this.Dl=0,u&&(this.o=null,this.Jg=0)},w.prototype.Ee=function(u){u>this.Jg&&this.yz(u)},w.prototype.sx=function(u,o){u*=this.Mf,o*=this.Mf;for(var r=0;r<this.Mf;r++){var n=this.o[o+r];this.o[o+r]=this.o[u+r],this.o[u+r]=n}},w.prototype.aC=function(u,o,r){var n=this.o[this.Mf*o+r];this.o[this.Mf*o+r]=this.o[this.Mf*u+r],this.o[this.Mf*u+r]=n},w.FG=function(u){return 0<=u},w.prototype.yz=function(u){this.o==null&&(this.o=new Int32Array(0));var o=new Int32Array(this.Mf*u);o.set(this.o,0),this.o=o,this.Jg=u},w}();h.ad=A}(q||(q={})),function(h){var A,w;(w=A||(A={}))[w.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",w[w.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate",w[w.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding",w[w.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon";var u=function(){function r(n){this.Ce=n,this.Ah=NaN,this.ZG=new h.hg,this.$G=new h.hg,this.os=new h.Oc,this.ps=new h.Oc}return r.prototype.compare=function(n,a,c){if(n=n.ka(c),this.Ce.jB(a,this.ZG),this.Ce.jB(n,this.$G),a=this.ZG.get(),n=this.$G.get(),this.os.L(a.sa,a.qa),this.ps.L(n.sa,n.qa),this.os.wa<this.ps.pa)return-1;if(this.os.pa>this.ps.wa)return 1;c=a.oa==a.ma;var p=n.oa==n.ma;if(c||p){if(c&&p)return 0;if(a.oa==n.oa&&a.sa==n.sa)return c?1:-1;if(a.ma==n.ma&&a.qa==n.qa)return c?-1:1}return(c=a.Me(this.Ah,this.os.pa))==(p=n.Me(this.Ah,this.ps.pa))&&((p=.5*((c=Math.min(a.ma,n.ma))+this.Ah))==this.Ah&&(p=c),c=a.Me(p,this.os.pa),p=n.Me(p,this.ps.pa)),c<p?-1:c>p?1:0},r.prototype.VJ=function(n){this.Ah=n},r}(),o=function(){function r(n){this.ib=n,this.QH=new h.hg,this.Cf=new h.h,this.qA=new h.Oc}return r.prototype.bX=function(n){this.Cf.N(n)},r.prototype.compare=function(n,a){return this.ib.jB(n.ka(a),this.QH),n=this.QH.get(),this.qA.L(n.sa,n.qa),this.Cf.x<this.qA.pa?-1:this.Cf.x>this.qA.wa?1:(n=n.Me(this.Cf.y,this.Cf.x),this.Cf.x<n?-1:this.Cf.x>n?1:0)},r}();A=function(){function r(){this.bH=this.Fi=this.Ii=this.fA=this.Zn=this.ze=this.Lc=this.lh=this.ge=null,this.Ho=this.xg=-1,this.aH=!0,this.jA=!1,this.gA=NaN,this.Pi=new h.Nd,this.WN=2147483647,this.VN=h.P.truncate(-2147483648),this.dg=this.be=this.Jl=this.Eq=this.Em=this.Dq=this.Qs=this.Oe=-1,this.xa=0}return r.prototype.ty=function(n){this.gA=n},r.prototype.$m=function(){this.ge==null&&(this.ge=new h.ad(8));var n=this.ge.De();return this.ge.T(n,1,0),n},r.prototype.nU=function(){this.Lc==null&&(this.Lc=new h.ad(8));var n=this.Lc.De();this.Lc.T(n,2,0),this.Lc.T(n,3,0);var a=this.Lc.De();return this.Lc.T(a,2,0),this.Lc.T(a,3,0),this.DJ(n,a),this.DJ(a,n),n},r.prototype.gI=function(){this.ze==null&&(this.ze=new h.ad(8));var n=this.ze.De();return this.ze.T(n,2,0),n},r.prototype.LW=function(n,a){this.ge.T(n,7,a)},r.prototype.on=function(n,a){this.ge.T(n,2,a)},r.prototype.KW=function(n,a){this.ge.T(n,1,a)},r.prototype.cX=function(n,a){this.ge.T(n,3,a)},r.prototype.$W=function(n,a){this.ge.T(n,4,a)},r.prototype.er=function(n,a){this.ge.T(n,5,a)},r.prototype.ZQ=function(n){return this.ge.U(n,5)},r.prototype.JW=function(n,a){this.ge.T(n,6,a)},r.prototype.XM=function(n,a){this.JW(a,n)},r.prototype.CJ=function(n,a){this.Lc.T(n,1,a)},r.prototype.DJ=function(n,a){this.Lc.T(n,4,a)},r.prototype.Vl=function(n,a){this.Lc.T(n,5,a)},r.prototype.Ul=function(n,a){this.Lc.T(n,6,a)},r.prototype.RW=function(n,a){this.Lc.T(n,2,a)},r.prototype.cx=function(n,a){this.Lc.T(n,3,a)},r.prototype.FF=function(n){return this.Lc.U(n,3)},r.prototype.Ht=function(n,a){this.Lc.T(n,7,a)},r.prototype.yK=function(n,a){if(this.om(n)!=-1)for(a=a?-1:n,n=this.om(n);n!=-1;n=this.ls(n))this.g.Sa(this.vj(n),this.Eq,a)},r.prototype.xx=function(n,a){n!=-1&&(this.yK(n,a),this.yK(this.ya(n),a))},r.prototype.Et=function(n,a){this.ze.T(n,1,a)},r.prototype.Xg=function(n,a){this.ze.T(n,2,a)},r.prototype.ln=function(n,a){this.ze.T(n,3,a),this.FW(n,this.YQ(a)),this.EW(a,n)},r.prototype.EW=function(n,a){this.ze.T(n,4,a)},r.prototype.FW=function(n,a){this.ze.T(n,5,a)},r.prototype.xJ=function(n,a){this.ze.T(n,6,a)},r.prototype.vJ=function(n,a){this.ze.T(n,7,a)},r.prototype.uJ=function(n,a){this.Zn.write(n,a)},r.prototype.wJ=function(n,a){this.fA.write(n,a)},r.prototype.cY=function(n){var a=0,c=0,p=this.uF(n),f=new h.h,m=new h.h,b=new h.h;this.$r(p,f),m.N(f);var S=p;do this.nm(S,b),c+=h.h.ub(m,b),this.$e(this.ya(S))!=n&&(a+=(b.x-f.x-(m.x-f.x))*(b.y-f.y+(m.y-f.y))*.5),m.N(b),S=this.kc(S);while(S!=p);this.Zn.write(n,a),this.fA.write(n,c)},r.prototype.HU=function(n,a){var c=new u(this),p=new h.Zj;p.Ee(h.P.truncate(this.xa/2)),p.Wo(c);for(var f=new h.ja(0),m=this.bh(),b=null,S=0,M=new h.h,T=this.Oe;T!=-1;T=this.Sf(T)){if((255&++S)==0&&a!=null&&!a.progress(-1,-1))throw h.i.QC();var k=this.Je(T);if(k!=-1){if(f.Dh(0),!this.ZX(p,m,f,k)){this.D(T,M),c.VJ(M.y);var C=k;do{var N=this.Bb(C,m);N!=-1&&(p.wd(N,-1),this.Kb(C,m,-2)),C=this.kc(this.ya(C))}while(k!=C);C=k;do(N=this.Bb(C,m))==-1&&(N=p.addElement(C,-1),f.add(N)),C=this.kc(this.ya(C));while(k!=C)}for(k=f.size-1;0<=k;k--)N=f.get(k),C=p.ka(N),this.Kb(this.ya(C),m,N),this.GU(p,N,n)}else this.Yy(T)==-1&&(b==null&&(b=new o(this)),this.D(T,M),b.bX(M),C=p.zW(b),k=this.Jl,C!=-1&&(N=p.ka(C),this.$e(N)==this.$e(this.ya(N))&&(N=this.IF(p,C)),N!=-1&&(k=this.$e(N))),this.XM(k,T))}this.Lg(m)},r.prototype.GU=function(n,a,c){var p=n.ka(a),f=this.$e(p);if(this.Hn(f)==-1){var m=this.IF(n,a),b=this.ya(p),S=this.$e(b);this.Mp(f),this.Mp(S);var M=this.Hn(f),T=this.Hn(S);if(m==-1&&M==-1&&(S==f?(this.ln(S,this.Jl),M=T=this.Jl):(T==-1&&(this.ln(S,this.Jl),T=this.Jl),this.ln(f,S),M=S)),m!=-1){var k=this.$e(m);T==-1&&(0>=this.Mp(k)?(T=this.Hn(k),this.ln(S,T)):(this.ln(S,k),T=k),S==f&&(M=T))}M==-1&&this.$X(f,S),c==0?this.bW(n,a,p,m,f,S):c==5?this.cW(n,a,p,b,f,S):c==4&&this.aW(p,m,f,S)}},r.prototype.bW=function(n,a,c,p,f,m){var b=this.ik(f);if(p!=-1){var S=this.ik(m),M=this.ik(this.$e(p));p=b&S&M,M^=M&this.fh(c),(M|=p)!=0&&(this.Xg(m,S|M),this.Xg(f,M|b),b=b||M)}for(a=n.lb(a);a!=-1&&(p=n.ka(a),c=this.$e(this.ya(p)),f=this.ik(c),m=this.fh(p),S=this.$e(p),p=f&(M=this.ik(S))&b,b^=b&m,(b|=p)!=0);a=n.lb(a))this.Xg(c,f|b),this.Xg(S,M|b)},r.prototype.cW=function(n,a,c,p,f,m){if(f!=m){c=this.Bb(c,this.dg),c+=this.Bb(p,this.dg),p=0;var b=new h.ja(0),S=new h.ja(0);S.add(0);for(var M=n.sc(-1);M!=a;M=n.lb(M)){var T=n.ka(M),k=this.ya(T),C=this.$e(T),N=this.$e(k);if(C!=N){if(T=this.Bb(T,this.dg),p+=T+=this.Bb(k,this.dg),k=!1,b.size!=0&&b.Gc()==N&&(S.Jf(),b.Jf(),k=!0),this.Hn(N)==-1)throw h.i.Ra();k&&this.Hn(N)==C||(S.add(p),b.add(C))}}p+=c,b.size!=0&&b.Gc()==m&&(S.Jf(),b.Jf()),p!=0?S.Gc()==0&&(n=this.g.ld,n=this.Ma(n),this.Xg(f,n)):S.Gc()!=0&&(n=this.g.ld,n=this.Ma(n),this.Xg(f,n))}},r.prototype.aW=function(n,a,c,p){var f=this.Ma(this.g.ld);if(a==-1)this.Xg(p,this.Ho),(1&(n=this.Bb(n,this.xg)))!=0?this.Xg(c,f):this.Xg(c,this.Ho);else{var m=this.ik(p);m==0?(m=this.ik(this.$e(a)),this.Xg(p,m),(1&(n=this.Bb(n,this.xg)))!=0?this.Xg(c,m==f?this.Ho:f):this.Xg(c,m)):(1&(n=this.Bb(n,this.xg)))!=0?this.Xg(c,m==f?this.Ho:f):this.Xg(c,m)}},r.prototype.ZX=function(n,a,c,p){var f=p,m=-1,b=-1,S=0;do{if(S==2)return!1;var M=this.Bb(f,a);if(M!=-1){if(m!=-1)return!1;m=M}else{if(b!=-1)return!1;b=f}S++,f=this.kc(this.ya(f))}while(p!=f);return b!=-1&&m!=-1&&(this.Kb(n.ka(m),a,-2),n.Uj(m,b),c.add(m),!0)},r.prototype.$X=function(n,a){var c=this.Mp(n);if(c!=0){var p=this.Mp(a);0<c&&0>p||0>c&&0<p?this.ln(n,a):(a=this.Hn(a))!=-1&&this.ln(n,a)}},r.prototype.pP=function(n,a){this.Eq=this.g.Hd();for(var c=0,p=a.size;c<p;c++){var f=a.get(c),m=this.g.Qa(f,this.Em),b=this.g.Rf(this.g.cd(f)),S=this.g.jc(b);if(h.ba.Ic(S)){var M=this.g.V(f);if(M!=-1){var T=this.g.Qa(M,this.Em);if(m!=T){var k=this.nU(),C=this.ya(k),N=this.lh.De();this.lh.T(N,0,f),this.lh.T(N,1,-1),this.Ht(k,N),this.CJ(k,m),(N=this.Je(m))==-1?(this.on(m,k),this.Vl(k,C),this.Ul(C,k)):(m=this.ue(N),this.Vl(N,C),this.Ul(C,N),this.Ul(m,k),this.Vl(k,m)),this.CJ(C,T),(m=this.Je(T))==-1?(this.on(T,C),this.Ul(k,C),this.Vl(C,k)):(T=this.ue(m),this.Vl(m,k),this.Ul(k,m),this.Ul(T,C),this.Vl(C,T)),b=this.Ma(b),n==0?(this.Kb(C,this.be,0),this.Kb(k,this.be,S==1736?b:0)):n==5?(T=new h.h,this.g.D(f,T),f=new h.h,this.g.D(M,f),m=M=0,0>T.compare(f)?M=1:m=-1,this.Kb(C,this.be,0),this.Kb(k,this.be,0),this.Kb(k,this.dg,M),this.Kb(C,this.dg,m)):n==7?(this.Kb(C,this.be,this.Ho),this.Kb(k,this.be,S==1736?b:0)):n==4&&(this.Kb(C,this.be,0),this.Kb(k,this.be,0),this.Kb(k,this.xg,1),this.Kb(C,this.xg,1)),S=S==1736?this.VN:0,this.cx(k,b|S),this.cx(C,b|S)}}}}},r.prototype.NT=function(n,a){var c=this.om(a);if(c!=-1){var p=this.om(n);this.lh.T(c,1,p),this.Ht(n,c),this.Ht(a,-1)}n=this.ya(n),a=this.ya(a),(c=this.om(a))!=-1&&(p=this.om(n),this.lh.T(c,1,p),this.Ht(n,c),this.Ht(a,-1))},r.prototype.AX=function(n){function a(W,J){return p.BO(W,J)}var c=new h.ja(0);c.Jb(10);for(var p=this,f=this.Oe;f!=-1;f=this.Sf(f)){c.clear(!1);var m=this.Je(f);if(m!=-1){var b=m;do c.add(b),b=this.kc(this.ya(b));while(b!=m);if(1<c.size){if(b=!0,2<c.size)c.Wd(0,c.size,a),c.add(c.get(0));else if(0<this.AO(c.get(0),c.get(1))){var S=c.get(0);c.set(0,c.get(1)),c.set(1,S)}else b=!1;for(var M=S=c.get(0),T=this.vf(M),k=this.ya(M),C=-1,N=1,F=c.size;N<F;N++){var D=c.get(N),j=this.ya(D),G=this.kk(j);if(G==T&&D!=M){if(n==0)C=this.FF(M)|this.FF(D),this.cx(M,C),this.cx(k,C),this.Kb(M,this.be,this.Bb(M,this.be)|this.Bb(D,this.be)),this.Kb(k,this.be,this.Bb(k,this.be)|this.Bb(j,this.be));else if(this.dg!=-1)C=this.Bb(M,this.dg)+this.Bb(D,this.dg),j=this.Bb(k,this.dg)+this.Bb(j,this.dg),this.Kb(M,this.dg,C),this.Kb(k,this.dg,j);else{if(n==7)return void(this.Pi=new h.Nd(5,f,-1));this.xg!=-1&&(C=this.Bb(M,this.xg)+this.Bb(D,this.xg),j=this.Bb(k,this.xg)+this.Bb(j,this.xg),this.Kb(M,this.xg,C),this.Kb(k,this.xg,j))}this.NT(M,D),this.Gy(D),C=M,c.set(N,-1),D==S&&(c.set(0,-1),S=-1)}else this.xx(C,!1),C=-1,M=D,T=G,k=j}if(this.xx(C,!1),C=-1,b){for(S=-1,N=0,F=c.size;N<F;N++)if((D=c.get(N))!=-1){if(S==-1)M=S=D,T=this.vf(M),k=this.ya(M);else if(D!=M&&(j=this.ya(D),G=this.kk(j),this.Ul(k,D),this.Vl(D,k),M=D,T=G,k=j,n==7&&(this.Bb(D,this.be)|this.Bb(this.ue(D),this.be))==(1|this.Ho)))return void(this.Pi=new h.Nd(5,f,-1))}this.on(f,S)}else{for(S=-1,N=0,F=c.size;N<F;N++)if((D=c.get(N))!=-1){S=D;break}m!=S&&this.on(f,S)}}}}},r.prototype.QN=function(){for(var n=-1,a=this.bh(),c=this.Oe;c!=-1;c=this.Sf(c)){var p=this.Je(c);if(p!=-1){var f=p;do{if(this.Bb(f,a)!=1){var m=this.gI();this.Et(m,f),this.vJ(m,n),n!=-1&&this.xJ(n,m),n=m;var b=0,S=f;do b|=this.Bb(S,this.be),this.RW(S,m),this.Kb(S,a,1),S=this.kc(S);while(S!=f);this.Xg(m,b)}f=this.kc(this.ya(f))}while(f!=p)}}m=this.gI(),this.Et(m,-1),this.vJ(m,n),n!=-1&&this.xJ(n,m),this.Jl=m,this.Zn=h.ce.rf(this.ze.size,NaN),this.fA=h.ce.rf(this.ze.size,NaN),this.uJ(this.Jl,1/0),this.wJ(this.Jl,1/0),this.Lg(a)},r.prototype.lR=function(n,a,c){if((a=a!=-1?a:this.Je(n))==-1)return-1;for(n=a;;){if(this.Bb(a,c)!=1)return a;if((a=this.kc(this.ya(a)))==n)return-1}},r.prototype.qW=function(){for(var n=this.bh(),a=this.Oe;a!=-1;a=this.Sf(a))for(var c=-1;;){var p=this.lR(a,c,n);if(p==-1)break;c=this.kc(this.ya(p));for(var f=p;;){var m=this.kc(f),b=this.ue(f),S=this.ya(f);if(b==S){if(this.CP(f),c!=f&&c!=S||(c=-1),f==p||b==p){if(f==(p=m)||b==p)break;f=m;continue}}else this.Kb(f,n,1);if((f=m)==p)break}}this.Lg(n)},r.prototype.GB=function(n,a,c,p,f){this.Wg(),this.aH=f,this.g=n,this.Dq=this.g.VE(),(n=new h.ja(0)).Jb(c!=null?this.g.I(c.get(0)):this.g.gd);var m=0,b=1,S=c!=null?c.get(0):this.g.ld;for(f=1;S!=-1;){this.g.BJ(S,this.Dq,b),b<<=1;for(var M=this.g.Ob(S);M!=-1;M=this.g.Sb(M))for(var T=this.g.Ya(M),k=0,C=this.g.Ka(M);k<C;k++)n.add(T),T=this.g.V(T);h.ba.Sn(this.g.jc(S))||(m+=this.g.ea(S)),c!=null?(S=f<c.size?c.get(f):-1,f++):S=this.g.ve(S)}for(this.Ho=b,this.xa=n.size,this.g.nx(n,this.xa),this.lh==null&&(this.lh=new h.ad(2),this.ge=new h.ad(8),this.Lc=new h.ad(8),this.ze=new h.ad(8)),this.lh.Ee(this.xa),h.np.Bp(p),this.ge.Ee(this.xa+10),this.Lc.Ee(2*this.xa+32),this.ze.Ee(Math.max(32,m)),this.Em=this.g.Hd(),c=new h.h,f=0,m=new h.h,c.Sc(),b=0;b<=this.xa;b++)if(b<this.xa?(T=n.get(b),this.g.D(T,m)):m.Sc(),!c.rb(m)){if(f<b){for(T=this.$m(),C=k=-1;f<b;f++)C=n.get(f),this.g.Sa(C,this.Em,T),S=this.lh.De(),this.lh.T(S,0,C),this.lh.T(S,1,k),k=S,M=this.g.cd(C),S=this.g.Rf(M),S=this.Ma(S),this.KW(T,this.yd(T)|S);this.LW(T,k),this.er(T,this.g.Va(C)),this.Qs!=-1&&this.$W(this.Qs,T),this.cX(T,this.Qs),this.Qs=T,this.Oe==-1&&(this.Oe=T)}f=b,c.N(m)}h.np.Bp(p),this.be=this.bh(),a==5&&(this.dg=this.bh()),a==4&&(this.xg=this.bh()),this.pP(a,n),this.Pi.Lj==0&&(this.AX(a),this.Pi.Lj==0&&(isNaN(this.gA)||this.rO()?(this.QN(),this.Pi.Lj==0&&(this.Lg(this.be),this.be=-1,this.aH&&this.HU(a,p))):this.jA=!0))},r.prototype.Gy=function(n){var a=this.kc(n),c=this.ue(n),p=this.ya(n),f=this.kc(p),m=this.ue(p);a!=p&&(this.Ul(m,a),this.Vl(a,m)),c!=p&&(this.Ul(c,f),this.Vl(f,c)),c=this.kk(n),this.Je(c)==n&&(f!=n?this.on(c,f):this.on(c,-1)),f=this.kk(p),this.Je(f)==p&&(a!=p?this.on(f,a):this.on(f,-1)),this.Lc.kd(n),this.Lc.kd(p)},r.prototype.IF=function(n,a){for(;;){if((a=n.xe(a))==-1)return-1;var c=n.ka(a);if(this.$e(c)!=this.$e(this.ya(c)))return c}},r.prototype.fr=function(n,a){var c;c===void 0&&(c=!0),this.GB(n,0,null,a,c)},r.prototype.pJ=function(n,a,c){var p=new h.ja(0);p.add(a),this.GB(n,4,p,c,n.jc(a)==1736)},r.prototype.qJ=function(n,a,c){var p=new h.ja(0);p.add(a),this.GB(n,5,p,c,!0)},r.prototype.Wg=function(){this.g!=null&&(this.Dq!=-1&&(this.g.pW(this.Dq),this.Dq=-1),this.Em!=-1&&(this.g.Ud(this.Em),this.Em=-1),this.Eq!=-1&&(this.g.Ud(this.Eq),this.Eq=-1),this.be!=-1&&(this.Lg(this.be),this.be=-1),this.dg!=-1&&(this.Lg(this.dg),this.dg=-1),this.xg!=-1&&(this.Lg(this.xg),this.xg=-1),this.g=null,this.ge.oj(!0),this.lh.oj(!0),this.Qs=this.Oe=-1,this.Lc!=null&&this.Lc.oj(!0),this.Ii!=null&&(this.Ii.length=0),this.Fi!=null&&(this.Fi.length=0),this.bH!=null&&(this.bH.length=0),this.ze!=null&&this.ze.oj(!0),this.Jl=-1,this.Zn=null)},r.prototype.Je=function(n){return this.ge.U(n,2)},r.prototype.D=function(n,a){this.g.YF(this.ZQ(n),a)},r.prototype.yd=function(n){return this.ge.U(n,1)},r.prototype.Sf=function(n){return this.ge.U(n,4)},r.prototype.Yy=function(n){return this.ge.U(n,6)},r.prototype.mm=function(n){return this.ge.U(n,7)},r.prototype.ls=function(n){return this.lh.U(n,1)},r.prototype.vj=function(n){return this.lh.U(n,0)},r.prototype.ng=function(n,a){return(a=this.Fi[a]).size<=n?-1:a.read(n)},r.prototype.pn=function(n,a,c){(a=this.Fi[a]).size<=n&&a.resize(this.ge.size,-1),a.write(n,c)},r.prototype.Fp=function(){this.Fi==null&&(this.Fi=[]);for(var n=h.ja.rf(this.ge.Jg,-1),a=0,c=this.Fi.length;a<c;a++)if(this.Fi[a]==null)return this.Fi[a]=n,a;return this.Fi.push(n),this.Fi.length-1},r.prototype.Gp=function(n){this.Fi[n]=null},r.prototype.kk=function(n){return this.Lc.U(n,1)},r.prototype.vf=function(n){return this.kk(this.ya(n))},r.prototype.ya=function(n){return this.Lc.U(n,4)},r.prototype.ue=function(n){return this.Lc.U(n,5)},r.prototype.kc=function(n){return this.Lc.U(n,6)},r.prototype.$e=function(n){return this.Lc.U(n,2)},r.prototype.af=function(n){return this.ik(this.Lc.U(n,2))},r.prototype.om=function(n){return this.Lc.U(n,7)},r.prototype.$r=function(n,a){this.D(this.kk(n),a)},r.prototype.nm=function(n,a){this.D(this.vf(n),a)},r.prototype.fh=function(n){return this.Lc.U(n,3)&this.WN},r.prototype.Bb=function(n,a){return(a=this.Ii[a]).size<=n?-1:a.read(n)},r.prototype.Kb=function(n,a,c){(a=this.Ii[a]).size<=n&&a.resize(this.Lc.size,-1),a.write(n,c)},r.prototype.bh=function(){this.Ii==null&&(this.Ii=[]);for(var n=h.ja.rf(this.Lc.Jg,-1),a=0,c=this.Ii.length;a<c;a++)if(this.Ii[a]==null)return this.Ii[a]=n,a;return this.Ii.push(n),this.Ii.length-1},r.prototype.Lg=function(n){this.Ii[n]=null},r.prototype.CP=function(n){var a=this.$e(n),c=this.ya(n),p=this.kc(n);p==c&&(p=this.kc(p))==n&&(p=-1);var f=this.uF(a);f!==n&&f!=c||this.Et(a,p),c=this.Zn.read(a),isNaN(c)||(this.uJ(a,NaN),this.wJ(a,NaN)),this.xx(n,!0),this.Gy(n)},r.prototype.DP=function(n){for(var a=0,c=n.size;a<c;a++){var p=n.get(a),f=this.$e(this.ya(p));this.Et(this.$e(p),-1),this.Et(f,-1),this.xx(p,!0),this.Gy(p)}},r.prototype.uF=function(n){return this.ze.U(n,1)},r.prototype.ik=function(n){return this.ze.U(n,2)},r.prototype.Hn=function(n){return this.ze.U(n,3)},r.prototype.YQ=function(n){return this.ze.U(n,4)},r.prototype.Mp=function(n){var a=this.Zn.read(n);return isNaN(a)&&(this.cY(n),a=this.Zn.read(n)),a},r.prototype.Ma=function(n){return this.g.EF(n,this.Dq)},r.prototype.Ie=function(n){return this.g.Qa(n,this.Em)},r.prototype.nR=function(n){return this.g.Qa(n,this.Eq)},r.prototype.mR=function(n,a){var c=this.Je(n);if(c==-1)return-1;var p=c,f=-1,m=-1;do{if(this.vf(p)==a)return p;if(f==-1){if((f=this.Je(a))==-1)break;m=f}if(this.vf(m)==n)return this.ya(m);p=this.kc(this.ya(p)),m=this.kc(this.ya(m))}while(p!=c&&m!=f);return-1},r.prototype.jB=function(n,a){a.Qr(),a=a.get();var c=new h.h;this.$r(n,c),a.Ec(c),this.nm(n,c),a.Rc(c)},r.prototype.BO=function(n,a){if(n==a)return 0;var c=new h.h;this.nm(n,c);var p=new h.h;return this.nm(a,p),c.rb(p)?0:(a=new h.h,this.$r(n,a),(n=new h.h).vc(c,a),(c=new h.h).vc(p,a),h.h.pu(n,c))},r.prototype.AO=function(n,a){if(n==a)return 0;var c=new h.h;this.nm(n,c);var p=new h.h;return this.nm(a,p),c.rb(p)?0:(a=new h.h,this.$r(n,a),(n=new h.h).vc(c,a),(c=new h.h).vc(p,a),0<=c.y&&0<n.y?h.h.pu(n,c):0)},r.prototype.rO=function(){for(var n=h.mc.ox(this.gA),a=new h.h,c=new h.h,p=new h.h,f=new h.h,m=new h.h,b=this.Oe;b!=-1;b=this.Sf(b)){var S=this.Je(b);if(S!=-1){var M=S;this.$r(M,a),this.nm(M,c),m.vc(c,a);var T=m.Tk();do{var k=M;if((M=this.kc(this.ya(M)))!=k){this.nm(M,p),f.vc(p,a),k=f.Tk();var C=f.yi(m);if(C*C/(k*T)*Math.min(k,T)<=n)return!1;m.N(f),T=k,c.N(p)}}while(M!=S)}}return!0},r}(),h.ku=A}(q||(q={})),function(h){var A=function(){function w(){this.j=null,this.iH=new h.h,this.jH=new h.h,this.Ij=null,this.Ov=!1,this.vl=-1}return w.prototype.cf=function(u){return u<this.Ij.length&&this.Ij[u]},w.prototype.fl=function(u,o,r,n){var a=h.ba.uf(this.j.g.jc(r));if(h.ba.uf(this.j.g.jc(o))!=2||a!=1)throw h.i.Ra();this.zP(u,o,r,n)},w.prototype.fr=function(u,o){this.j==null&&(this.j=new h.ku),this.j.fr(u,o)},w.prototype.Gt=function(u,o,r){for(h.Uk.W(u,o,r,!0),o=u.ld;o!=-1;o=u.ve(o))u.jc(o)==1736&&h.tn.W(u,o,-1,this.Ov,r);this.fr(u,r)},w.prototype.GE=function(u,o,r,n,a){var c=this.j.g;if(c.jc(u)==1736)for(u=c.Ob(u);u!=-1;u=c.Sb(u)){var p=c.Ya(u);this.j.Ie(p),this.j.Ie(c.V(p));var f=this.j.nR(p);if(f!=-1){var m=this.j.Bb(f,r);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){this.j.Kb(f,r,1),m=c.wf(o,-1);var b=f,S=this.j.Ie(p),M=1;do{var T=this.um(p,a);c.kj(m,T),n!=-1&&this.j.pn(S,n,1),this.j.Kb(b,r,1),b=this.j.kc(b);do var k=(T=M==1?c.V(p):c.Na(p))!=-1?this.j.Ie(T):-1;while(k==S);var C=this.j.kk(b);if(C!=k){do k=(T=M==1?c.Na(p):c.V(p))!=-1?this.j.Ie(T):-1;while(k==S);C!=k?(k=C,T=this.j.vj(this.j.mm(k))):M=-M}S=k,p=T}while(b!=f);c.mn(m,!0)}else this.j.Kb(f,r,2)}}},w.prototype.ZE=function(){for(var u=this.j.bh(),o=new h.ja(0),r=this.j.Oe;r!=-1;r=this.j.Sf(r)){var n=this.j.Je(r),a=n;if(n!=-1)do{if(this.j.Bb(a,u)!=1){var c=this.j.ya(a);this.j.Kb(c,u,1),this.j.Kb(a,u,1),this.cf(this.j.af(a))&&this.cf(this.j.af(c))&&o.add(a)}a=this.j.kc(this.j.ya(a))}while(a!=n)}this.j.Lg(u),this.j.DP(o)},w.prototype.um=function(u,o){return o==-1?u:this.UR(u,o)},w.prototype.UR=function(u,o){var r=this.j.g,n=this.j.mm(this.j.Ie(u));do{var a=this.j.vj(n);if(r.Rf(r.cd(a))==o)return a;n=this.j.ls(n)}while(n!=-1);return u},w.prototype.Qt=function(u,o,r){this.ZE();var n=this.j.g,a=n.Kg(1736),c=this.j.bh();return this.oK(u,o,a,r,c,-1),this.j.Lg(c),h.tn.W(n,a,1,this.Ov,null),a},w.prototype.oK=function(u,o,r,n,a,c){for(this.GE(u,r,a,c,n),o!=-1&&this.GE(o,r,a,c,n),u=this.j.g,o=this.j.Oe;o!=-1;o=this.j.Sf(o)){var p=this.j.Je(o);if(p!=-1){var f=p;do{var m=this.j.Bb(f,a);if(m!=1&&m!=2)if(this.cf(this.j.af(f))){m=u.wf(r,-1);var b=f;do{var S=this.j.om(b);S!=-1?S=this.j.vj(S):(S=this.j.vj(this.j.om(this.j.ya(b))),S=this.j.g.V(S)),S=this.um(S,n),u.kj(m,S),this.j.Kb(b,a,1),c!=-1&&(S=this.j.Ie(S),this.j.pn(S,c,1)),b=this.j.kc(b)}while(b!=f);u.mn(m,!0)}else this.j.Kb(f,a,2);f=this.j.kc(this.j.ya(f))}while(f!=p)}}},w.prototype.TX=function(u,o,r){var n=this.j.g,a=n.Kg(1736),c=n.Kg(1607),p=n.Kg(550);this.ZE();var f=-1,m=this.j.bh(),b=this.j.Fp();for(this.oK(u,o,a,r,m,b),u=this.j.Oe;u!=-1;u=this.j.Sf(u))if((o=this.j.Je(u))!=-1){var S=o;do{var M=this.j.Bb(S,m),T=this.j.Bb(this.j.ya(S),m);if((M|=T)==2)if(M=this.j.fh(S),this.cf(M)){var k=n.wf(c,-1),C=S;M=this.$w(u,n),M=this.um(M,r),n.kj(k,M),this.j.pn(u,b,1);do{if(M=this.j.vf(C),T=this.$w(M,n),T=this.um(T,r),n.kj(k,T),this.j.Kb(C,m,1),this.j.Kb(this.j.ya(C),m,1),this.j.pn(M,b,1),C=this.j.kc(C),M=this.j.Bb(C,m),(M|=T=this.j.Bb(this.j.ya(C),m))!=2)break;if(M=this.j.fh(C),!this.cf(M)){this.j.Kb(C,m,1),this.j.Kb(this.j.ya(C),m,1);break}}while(C!=S)}else this.j.Kb(S,m,1),this.j.Kb(this.j.ya(S),m,1);S=this.j.kc(this.j.ya(S))}while(S!=o)}for(u=this.j.Oe;u!=-1;u=this.j.Sf(u))(M=this.j.ng(u,b))!=1&&(M=this.j.yd(u),this.cf(M)&&(f==-1&&(f=n.wf(p,-1)),(o=this.j.mm(u))!=-1&&(o=this.j.vj(o),M=this.um(o,r),n.kj(f,M))));return this.j.Gp(b),this.j.Lg(m),h.tn.W(n,a,1,this.Ov,null),(r=[])[0]=p,r[1]=c,r[2]=a,r},w.prototype.$w=function(u,o){var r=-1;for(u=this.j.mm(u);u!=-1;u=this.j.ls(u)){var n=this.j.vj(u);r==-1&&(r=n);var a=this.j.Ma(o.Rf(o.cd(n)));if(this.cf(a)){r=n;break}}return r},w.prototype.fB=function(u,o){for(var r=this.ll(o),n=this.j.kk(o),a=this.j.vf(o),c=0,p=0,f=this.j.mm(n);f!=-1;f=this.j.ls(f)){var m=this.j.vj(f),b=u.cd(m),S=this.j.Ma(u.Rf(b));b=u.Ya(b),(S=(S&r)!=0)&&b==m&&(this.vl=o);var M=u.V(m);M!=-1&&this.j.Ie(M)==a?(c++,S&&(this.vl===-1&&b==M&&(m=this.j.kc(o),this.cf(this.ll(m))&&(this.vl=m)),p++)):(m=u.Na(m))!=-1&&this.j.Ie(m)==a&&(c--,S&&(this.vl===-1&&b===m&&(m=this.j.kc(o),this.cf(this.ll(m))&&(this.vl=m)),p--))}return this.j.D(n,this.iH),this.j.D(a,this.jH),(p!=0?p:c)*(u=h.h.ub(this.iH,this.jH))},w.prototype.ll=function(u){return this.j.fh(u)|this.j.af(u)|this.j.af(this.j.ya(u))},w.prototype.rK=function(u){for(var o=this.j.ya(this.j.ue(u)),r=-1;o!=u;){if(this.cf(this.ll(o))){if(r!=-1)return-1;r=o}o=this.j.ya(this.j.ue(o))}return r!=-1?this.j.ya(r):-1},w.prototype.sK=function(u){for(var o=this.j.ya(this.j.kc(u)),r=-1;o!=u;){if(this.cf(this.ll(o))){if(r!=-1)return-1;r=o}o=this.j.ya(this.j.kc(o))}return r!=-1?this.j.ya(r):-1},w.prototype.gJ=function(u,o,r,n,a){var c=this.j.g,p=u,f=this.j.ya(p);this.j.Kb(p,r,1),this.j.Kb(f,r,1),this.vl=-1;for(var m=this.fB(c,p),b=p,S=-1,M=!1,T=1;;){var k=this.j.ue(p);if(k==f)break;if(f=this.j.kc(f),this.j.ya(k)!=f){if((p=this.rK(p))==-1){M=!0;break}f=this.j.ya(p)}else p=k;if(p==u){S=u;break}if(k=this.ll(p),!this.cf(k))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),b=p,m+=this.fB(c,p),T++}if(S==-1)for(p=u,f=this.j.ya(p),S=p;(u=this.j.kc(p))!=f;){if(f=this.j.ue(f),this.j.ya(u)!=f){if((p=this.sK(p))==-1){M=!0;break}f=this.j.ya(p)}else p=u;if(k=this.ll(p),!this.cf(k))break;this.j.Kb(p,r,1),this.j.Kb(f,r,1),S=p,m+=this.fB(c,p),T++}else if(this.vl!=-1&&(b=this.vl,S=this.j.ue(this.vl),this.j.ya(S)!=this.j.kc(this.j.ya(b))&&(S=this.rK(b))==-1))throw h.i.Ra();for(0<=m||(p=S,S=this.j.ya(b),b=this.j.ya(p)),r=c.wf(o,-1),p=b,b=this.j.kk(b),M=this.j.vf(S)==b&&M,m=this.$w(b,c),m=this.um(m,a),c.kj(r,m),n!=-1&&this.j.pn(b,n,1),b=0,T=M?h.P.truncate((T+1)/2):-1;u=this.j.vf(p),m=this.$w(u,c),m=this.um(m,a),c.kj(r,m),b++,n!=-1&&this.j.pn(u,n,1),M&&b==T&&(r=c.wf(o,-1),c.kj(r,m)),p!=S;)if(u=this.j.kc(p),this.j.ue(this.j.ya(p))!=this.j.ya(u)){if((p=this.sK(p))==-1)throw h.i.Ra()}else p=u},w.prototype.Rt=function(u){for(var o=this.j.g.Kg(1607),r=this.j.bh(),n=this.j.Oe;n!=-1;n=this.j.Sf(n)){var a=this.j.Je(n),c=a;do this.j.Bb(c,r)!=1&&this.cf(this.ll(c))&&this.gJ(c,o,r,-1,u),c=this.j.kc(this.j.ya(c));while(c!=a)}return this.j.Lg(r),o},w.prototype.UX=function(u){for(var o=this.j.g,r=o.Kg(1607),n=o.Kg(550),a=this.j.bh(),c=this.j.Fp(),p=-1,f=this.j.Oe;f!=-1;f=this.j.Sf(f)){var m=this.j.Je(f),b=m;do{var S=this.j.Bb(b,a);S!=1&&(S=this.ll(b),this.cf(S)&&this.gJ(b,r,a,c,u)),b=this.j.kc(this.j.ya(b))}while(b!=m)}for(f=this.j.Oe;f!=-1;f=this.j.Sf(f))(S=this.j.ng(f,c))!=1&&(S=this.j.yd(f),this.cf(S)&&(p==-1&&(p=o.wf(n,-1)),(m=this.j.mm(f))!=-1&&(m=this.j.vj(m),m=this.um(m,u),o.kj(p,m))));return this.j.Lg(a),this.j.Gp(c),(u=[])[0]=n,u[1]=r,u},w.prototype.pr=function(){for(var u=this.j.g,o=u.Kg(550),r=u.wf(o,-1),n=this.j.Oe;n!=-1;n=this.j.Sf(n))if(this.cf(this.j.yd(n))){for(var a=-1,c=this.j.mm(n);c!=-1;c=this.j.ls(c)){var p=this.j.vj(c);a==-1&&(a=p);var f=this.j.Ma(u.Rf(u.cd(p)));if(this.cf(f)){a=p;break}}u.kj(r,a)}return o},w.prototype.eq=function(u){this.Ij=[];for(var o=0;o<u;o++)this.Ij[o]=!1},w.TV=function(u,o,r){var n=u.Ja(),a=Array(1e3);h.P.bv(a,null);var c=h.P.lg(1e3,0),p=u.I(),f=!0,m=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();for(var b=0;b<p;){var S=h.P.truncate(u.dW(a,b)-b);m?h.jd.mK(o,a,S,r,c):h.jd.nK(o,a,S,r,c);for(var M=0,T=0;T<S;T++)c[T]==0&&(f&&(f=!1,n.Gd(u,0,b)),M!=T&&n.Gd(u,b+M,b+T),M=T+1);f||M==S||n.Gd(u,b+M,b+S),b+=S}return f?u:n},w.tG=function(u,o,r){return u instanceof h.de?w.TV(u,o,r):o instanceof h.Ta?u.B()||o.B()?u.Ja():h.Uk.rU(r,u,o)?h.Uk.wO(u,o):u.Ja():w.UV(u,o,r)},w.Cv=function(u,o,r,n){var a=new h.l;u.A(a);var c=new h.l;o.A(c);var p=new h.l;if(p.L(a),p.$b(c),r=h.ta.Xd(r,p,!0),(p=new h.l).L(c),c=h.ta.Gr(r),p.X(c,c),!a.isIntersecting(p)){if(u.Eb()<=o.Eb())return w.mi(w.Ue(u.Ja()),u,"&");if(u.Eb()>o.Eb())return w.mi(w.Ue(o.Ja()),u,"&")}return c=new w,p=(a=new h.hd).Ib(w.Ue(u)),o=a.Ib(w.Ue(o)),c.Gt(a,r,n),n=c.Cv(p,o),u=w.mi(a.Ke(n),u,"&"),h.ba.Ic(u.K())&&(u.Eh(2,r),u.K()==1736&&u.hm()),u},w.UV=function(u,o,r){if(u.B()||o.B())return u.Ja();var n=[null],a=[0],c=o.Eb()==2;if(o.Eb()!=1&&o.Eb()!=2)throw h.i.Ra();return n[0]=u.D(),c?h.jd.mK(o,n,1,r,a):h.jd.nK(o,n,1,r,a),a[0]==0?u.Ja():u},w.prototype.DU=function(u,o,r,n,a){if(u.B())return u;var c=new h.hd;return u=c.Ib(u),this.Nk(c,u,o,r,n,a)},w.prototype.FU=function(u,o,r,n,a,c){if(a&&u.jc(o)!=550){var p=new h.LC;p.LX(u,r),p.Pg?(h.Uk.W(u,r,c,!0),a=!1):this.j.ty(r)}else h.Uk.W(u,r,c,!0),a=!1;if(n&&u.jc(o)!=550?this.j.qJ(u,o,c):this.j.pJ(u,o,c),this.j.jA)return this.j.Wg(),this.j=null,this.Nk(u,o,r,n,!1,c);if(this.j.ty(NaN),c=this.j.Ma(o),this.eq(c+1),this.Ij[c]=!0,u.jc(o)==1736||n&&u.jc(o)!=550)return u.Zo(o,0),o=this.Qt(o,-1,-1),(u=u.Ke(o)).Zo(0),a?u.Eh(1,0):(u.Eh(2,r),u.hm()),u;if(u.jc(o)==1607)return o=this.Rt(-1),u=u.Ke(o),a||u.Eh(2,r),u;if(u.jc(o)==550)return o=this.pr(),u=u.Ke(o),a||u.Eh(2,r),u;throw h.i.Ra()},w.prototype.Nk=function(u,o,r,n,a,c){this.j=new h.ku;try{return this.FU(u,o,r,n,a,c)}finally{this.j.Wg()}},w.Nk=function(u,o,r,n,a){return new w().DU(u,o,r,n,a)},w.prototype.EU=function(u,o,r,n){this.Ov=u,this.j=new h.ku,u=o.Jn(r);var a=o.jc(r);if(u!=1||a==550?this.j.pJ(o,r,n):this.j.qJ(o,r,n),!this.j.jA)if(this.j.ty(NaN),n=this.j.Ma(r),this.eq(n+1),this.Ij[n]=!0,o.jc(r)==1736||u==1&&o.jc(r)!=550)o.Zo(r,0),n=this.Qt(r,-1,-1),o.bC(n,r),o.vB(n);else if(o.jc(r)==1607)n=this.Rt(-1),o.bC(n,r),o.vB(n);else{if(o.jc(r)!=550)throw h.i.ga("internal error");n=this.pr(),o.bC(n,r),o.vB(n)}},w.prototype.km=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o));if(r>n)return u;var a=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(a|c)),this.Ij[this.j.Ma(u)]=!0,r==2&&n==2)return this.Qt(u,o,-1);if(r==1&&n==2||r==1&&n==1)return this.Rt(-1);if(r==0)return this.pr();throw h.i.Ra()},w.prototype.Cv=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),a=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(a|c)),this.Ij[this.j.Ma(u)|this.j.Ma(o)]=!0,a=-1,1<this.j.g.it.Ba&&(a=u),r==2&&n==2)return this.Qt(u,o,a);if(r==1&&0<n||n==1&&0<r)return this.Rt(a);if(r==0||n==0)return this.pr();throw h.i.Ra()},w.prototype.Kz=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),a=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(a|c)),this.Ij[this.j.Ma(u)|this.j.Ma(o)]=!0,a=-1,1<this.j.g.it.Ba&&(a=u),r==2&&n==2)return this.TX(u,o,a);if(r==1&&0<n||n==1&&0<r)return this.UX(a);if(r==0||n==0)return(u=[])[0]=this.pr(),u;throw h.i.Ra()},w.prototype.fp=function(u,o){var r=h.ba.uf(this.j.g.jc(u)),n=h.ba.uf(this.j.g.jc(o)),a=this.j.Ma(u),c=this.j.Ma(o);if(this.eq(1+(a|c)),this.Ij[this.j.Ma(u)]=!0,this.Ij[this.j.Ma(o)]=!0,r==2&&n==2)return this.Qt(u,o,-1);if(r==1&&n==1)return this.Rt(-1);if(r==0&&n==0)return this.pr();throw h.i.Ra()},w.Ue=function(u){var o=u.K();return o==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):o==33?(o=new h.de(u.description),u.B()||o.add(u),o):o==322?(o=new h.Ua(u.description),u.B()||o.oc(u,!0),o):u},w.mi=function(u,o,r){var n=u.K();return n==197?(o=new h.Ea(u.description),u.B()||o.bd(u,!1),o):n!=33||r!="|"&&r!="^"?n==322?(o=new h.Ua(u.description),u.B()||o.oc(u,!0),o):n==33&&r=="-"&&o.K()==33||n==550&&r=="&"&&o.K()==33?(o=new h.Ta(u.description),u.B()||u.we(0,o),o):u:(o=new h.de(u.description),u.B()||o.add(u),o)},w.km=function(u,o,r,n){if(u.B()||o.B()||u.Eb()>o.Eb())return w.mi(w.Ue(u),u,"-");var a=new h.l;u.A(a);var c=new h.l;if(o.A(c),!a.isIntersecting(c))return w.mi(w.Ue(u),u,"-");var p=new h.l;return p.L(a),p.$b(c),r=h.ta.Xd(r,p,!0),c=new w,p=(a=new h.hd).Ib(w.Ue(u)),o=a.Ib(w.Ue(o)),c.Gt(a,r,n),n=c.km(p,o),n=a.Ke(n),u=w.mi(n,u,"-"),h.ba.Ic(u.K())&&(u.Eh(2,r),u.K()==1736&&u.hm()),u},w.PP=function(u,o,r){if(2>u.length)throw h.i.O("not enough geometries to dissolve");for(var n=0,a=0,c=u.length;a<c;a++)n=Math.max(u[a].Eb(),n);var p=new h.l;p.Pa();var f=new h.hd,m=-1,b=0,S=-1;for(a=0,c=u.length;a<c;a++)if(u[a].Eb()==n)if(u[a].B())S==-1&&(S=a);else{S=a,m==-1?m=f.Ib(w.Ue(u[a])):f.oN(m,w.Ue(u[a]));var M=new h.l;u[a].yc(M),p.$b(M),b++}return 2>b?w.Ue(u[S]):(u=n==2,o=h.ta.Xd(n==0?o:null,p,!0),new w().Nk(f,m,o,u,!0,r))},w.Kz=function(u,o,r,n){var a=[null,null,null],c=new h.l;u.A(c);var p=new h.l;o.A(p);var f=new h.l;if(f.L(c),f.$b(p),r=h.ta.Xd(r,f,!0),(f=new h.l).L(p),p=h.ta.Gr(r),f.X(p,p),!c.isIntersecting(f)){if(u.Eb()<=o.Eb())return a[(u=w.mi(w.Ue(u.Ja()),u,"&")).Eb()]=u,a;if(u.Eb()>o.Eb())return a[(u=w.mi(w.Ue(o.Ja()),u,"&")).Eb()]=u,a}for(p=new w,f=(c=new h.hd).Ib(w.Ue(u)),o=c.Ib(w.Ue(o)),p.Gt(c,r,n),n=p.Kz(f,o),o=0;o<n.length;o++)p=w.mi(c.Ke(n[o]),u,"&"),h.ba.Ic(p.K())&&(p.Eh(2,r),p.K()==1736&&p.hm()),a[p.Eb()]=p;return a},w.fp=function(u,o,r,n){if(u.Eb()>o.Eb())return w.mi(w.Ue(u),u,"^");if(u.Eb()<o.Eb()||u.B())return w.mi(w.Ue(o),u,"^");if(o.B())return w.mi(w.Ue(u),u,"^");var a=new h.l;u.A(a);var c=new h.l;o.A(c);var p=new h.l;return p.L(a),p.$b(c),r=h.ta.Xd(r,p,!0),c=new w,p=(a=new h.hd).Ib(w.Ue(u)),o=a.Ib(w.Ue(o)),c.Gt(a,r,n),n=c.fp(p,o),u=w.mi(a.Ke(n),u,"^"),h.ba.Ic(u.K())&&(u.Eh(2,r),u.K()==1736&&u.hm()),u},w.prototype.FQ=function(u,o){var r=this.j.g;u=r.wf(u,-1);for(var n=o.size,a=0;a<n;a++){var c=o.get(a);r.kj(u,c)}r.mn(u,!0)},w.prototype.SW=function(u,o){for(var r=this.j.g,n=r.ld;n!=-1;n=r.ve(n))if(n==o)for(var a=r.Ob(n);a!=-1;a=r.Sb(a)){var c=r.Ya(a);if(c!=-1)for(var p=r.V(c);p!=-1;){c=this.j.Ie(c);var f=this.j.Ie(p);(c=this.j.mR(c,f))!=-1&&(f=this.j.ya(c),this.j.Kb(c,u,1),this.j.Kb(f,u,2)),c=p,p=r.V(c)}}},w.prototype.VV=function(u,o,r,n){r=this.j.Ma(r),n=this.j.Ma(n);var a=new h.ja(0);a.Jb(256);for(var c=this.j.g,p=this.j.bh(),f=this.j.Oe;f!=-1;f=this.j.Sf(f)){var m=this.j.Je(f);if(m!=-1){var b=m;do{if(this.j.Bb(b,p)!=1){var S=b,M=b,T=!1,k=0;do{if(this.j.Kb(S,p,1),!T){var C=this.j.fh(S);(C&n)!=0&&(this.j.af(S)&r)!=0&&(M=S,T=!0)}T&&(a.add(this.j.vj(this.j.mm(this.j.kk(S)))),u!=-1&&((C=this.j.fh(S))&n)!=0&&(k|=C=this.j.Bb(S,u))),S=this.j.kc(S)}while(S!=M);T&&0<this.j.Mp(this.j.$e(M))&&(S=c.Kg(1736),this.FQ(S,a),o!=-1&&c.BJ(S,o,k)),a.clear(!1)}b=this.j.kc(this.j.ya(b))}while(b!=m)}}this.j.Lg(p)},w.prototype.zP=function(u,o,r,n){this.j.qW();var a=-1;u!=-1&&(a=this.j.bh(),this.SW(a,r)),this.VV(a,u,o,r),a!=-1&&(this.j.Lg(a),a=-1);var c=this.j.g;for(u=0,a=c.ld;a!=-1;a=c.ve(a))a!=o&&a!=r&&(n.add(a),u++);n.Wd(0,u,function(p,f){return(p=c.qz(c.Ob(p)))<(f=c.qz(c.Ob(f)))?-1:p==f?0:1})},w.prototype.Wg=function(){this.j!=null&&(this.j.Wg(),this.j=null)},w}();h.Hg=A}(q||(q={})),function(h){var A=function(){function w(u){u!==void 0?this.Jt(u):this.LB()}return w.prototype.lx=function(){this.Qb=this.Lb=this.qb=this.jb=this.bb=this.eb=0},w.prototype.Nb=function(u){return this==u||u instanceof w&&this.eb==u.eb&&this.jb==u.jb&&this.Lb==u.Lb&&this.qb==u.qb&&this.bb==u.bb&&this.Qb==u.Qb},w.prototype.dc=function(){return h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj(),h.P.wj()},w.prototype.Gh=function(u,o){var r=this.qb*u.x+this.bb*u.y+this.Qb;o.x=this.eb*u.x+this.jb*u.y+this.Lb,o.y=r},w.prototype.XX=function(u,o,r){for(var n=0;n<o;n++){var a=u[n].x,c=u[n].y,p=this.eb*a+this.jb*c+this.Lb;a=this.qb*a+this.bb*c+this.Qb,r[n]!=null?r[n].na(p,a):r[n]=h.h.construct(p,a)}},w.prototype.multiply=function(u){w.multiply(this,u,this)},w.multiply=function(u,o,r){var n=u.eb*o.eb+u.qb*o.jb,a=u.jb*o.eb+u.bb*o.jb,c=u.Lb*o.eb+u.Qb*o.jb+o.Lb,p=u.eb*o.qb+u.qb*o.bb,f=u.jb*o.qb+u.bb*o.bb;u=u.Lb*o.qb+u.Qb*o.bb+o.Qb,r.eb=n,r.jb=a,r.Lb=c,r.qb=p,r.bb=f,r.Qb=u},w.prototype.Pf=function(){var u=new w;return u.eb=this.eb,u.jb=this.jb,u.Lb=this.Lb,u.qb=this.qb,u.bb=this.bb,u.Qb=this.Qb,u},w.prototype.gC=function(u){if(!u.B()){for(var o=[],r=0;4>r;r++)o[r]=new h.h;u.hB(o),this.YX(o,o),u.bx(o,4)}},w.prototype.YX=function(u,o){for(var r=0;r<u.length;r++){var n=new h.h,a=u[r];n.x=this.eb*a.x+this.jb*a.y+this.Lb,n.y=this.qb*a.x+this.bb*a.y+this.Qb,o[r]=n}},w.prototype.iS=function(u,o){u.B()||o.B()||u.S()==0||u.da()==0?this.lx():(this.jb=this.qb=0,this.eb=o.S()/u.S(),this.bb=o.da()/u.da(),this.Lb=o.v-u.v*this.eb,this.Qb=o.G-u.G*this.bb)},w.prototype.WX=function(u){var o=new h.h,r=new h.h;o.na(this.eb,this.qb),r.na(this.jb,this.bb),o.sub(o);var n=.5*o.Tk();return o.na(this.eb,this.qb),r.na(this.jb,this.bb),o.add(r),u*(n>(o=.5*o.Tk())?Math.sqrt(n):Math.sqrt(o))},w.prototype.LB=function(){this.eb=1,this.qb=this.Lb=this.jb=0,this.bb=1,this.Qb=0},w.prototype.isIdentity=function(u){if(u!==void 0){var o=h.h.construct(0,1);return this.Gh(o,o),o.sub(h.h.construct(0,1)),o.Tk()>u*u?!1:(o.na(0,0),this.Gh(o,o),!(o.Tk()>u*u)&&(o.na(1,0),this.Gh(o,o),o.sub(h.h.construct(1,0)),o.Tk()<=u*u))}return this.eb==1&&this.bb==1&&this.jb==0&&this.Lb==0&&this.qb==0&&this.Qb==0},w.prototype.Di=function(u){return Math.abs(this.eb*this.bb-this.qb*this.jb)<=2*u*(Math.abs(this.eb*this.bb)+Math.abs(this.qb*this.jb))},w.prototype.gg=function(u,o){this.eb=1,this.jb=0,this.Lb=u,this.qb=0,this.bb=1,this.Qb=o},w.prototype.Jt=function(u,o){o!==void 0?(this.eb=u,this.qb=this.Lb=this.jb=0,this.bb=o,this.Qb=0):this.Jt(u,u)},w.prototype.UB=function(){this.eb=0,this.jb=1,this.Lb=0,this.qb=1,this.Qb=this.bb=0},w.prototype.gX=function(u){this.hX(Math.cos(u),Math.sin(u))},w.prototype.hX=function(u,o){this.eb=u,this.jb=-o,this.Lb=0,this.qb=o,this.bb=u,this.Qb=0},w.prototype.shift=function(u,o){this.Lb+=u,this.Qb+=o},w.prototype.scale=function(u,o){this.eb*=u,this.jb*=u,this.Lb*=u,this.qb*=o,this.bb*=o,this.Qb*=o},w.prototype.flipX=function(u,o){this.eb=-this.eb,this.jb=-this.jb,this.Lb=u+o-this.Lb},w.prototype.flipY=function(u,o){this.qb=-this.qb,this.bb=-this.bb,this.Qb=u+o-this.Qb},w.prototype.rotate=function(u){var o=new w;o.gX(u),this.multiply(o)},w.prototype.inverse=function(u){if(u!==void 0){var o=this.eb*this.bb-this.jb*this.qb;o==0?u.lx():(o=1/o,u.Lb=(this.jb*this.Qb-this.Lb*this.bb)*o,u.Qb=(this.Lb*this.qb-this.eb*this.Qb)*o,u.eb=this.bb*o,u.jb=-this.jb*o,u.qb=-this.qb*o,u.bb=this.eb*o)}else this.inverse(this)},w}();h.Ed=A}(q||(q={})),function(h){var A=function(){function w(){}return w.prototype.lx=function(){this.Cg=this.Qb=this.Lb=this.Ze=this.We=this.Ve=this.Ye=this.bb=this.jb=this.pf=this.qb=this.eb=0},w.prototype.Jt=function(u,o){this.eb=u,this.jb=this.pf=this.qb=0,this.bb=o,this.We=this.Ve=this.Ye=0,this.Ze=void 0,this.Cg=this.Qb=this.Lb=0},w.prototype.translate=function(u,o,r){this.Lb+=u,this.Qb+=o,this.Cg+=r},w.prototype.gC=function(u){if(!u.B()){for(var o=new h.Od[8],r=0;8>r;r++)o[r]=new h.Od;u.hB(o),this.transform(o,8,o),u.bx(o)}},w.prototype.transform=function(u,o,r){for(var n=0;n<o;n++){var a=new h.Od,c=u[n];a.x=this.eb*c.x+this.jb*c.y+this.Ve*c.z+this.Lb,a.y=this.qb*c.x+this.bb*c.y+this.We*c.z+this.Qb,a.z=this.pf*c.x+this.Ye*c.y+this.Ze*c.z+this.Cg,r[n]=a}},w.prototype.gp=function(u){var o=new h.Od;return o.x=this.eb*u.x+this.jb*u.y+this.Ve*u.z+this.Lb,o.y=this.qb*u.x+this.bb*u.y+this.We*u.z+this.Qb,o.z=this.pf*u.x+this.Ye*u.y+this.Ze*u.z+this.Cg,o},w.prototype.Ag=function(u){w.multiply(this,u,this)},w.multiply=function(u,o,r){var n=u.eb*o.eb+u.qb*o.jb+u.pf*o.Ve,a=u.eb*o.qb+u.qb*o.bb+u.pf*o.We,c=u.eb*o.pf+u.qb*o.Ye+u.pf*o.Ze,p=u.jb*o.eb+u.bb*o.jb+u.Ye*o.Ve,f=u.jb*o.qb+u.bb*o.bb+u.Ye*o.We,m=u.jb*o.pf+u.bb*o.Ye+u.Ye*o.Ze,b=u.Ve*o.eb+u.We*o.jb+u.Ze*o.Ve,S=u.Ve*o.qb+u.We*o.bb+u.Ze*o.We,M=u.Ve*o.pf+u.We*o.Ye+u.Ze*o.Ze,T=u.Lb*o.eb+u.Qb*o.jb+u.Cg*o.Ve+o.Lb,k=u.Lb*o.qb+u.Qb*o.bb+u.Cg*o.We+o.Qb;u=u.Lb*o.pf+u.Qb*o.Ye+u.Cg*o.Ze+o.Cg,r.eb=n,r.qb=a,r.pf=c,r.jb=p,r.bb=f,r.Ye=m,r.Ve=b,r.We=S,r.Ze=M,r.Lb=T,r.Qb=k,r.Cg=u},w.inverse=function(u,o){var r=u.eb*(u.bb*u.Ze-u.Ye*u.We)-u.qb*(u.jb*u.Ze-u.Ye*u.Ve)+u.pf*(u.jb*u.We-u.bb*u.Ve);if(r==0)throw h.i.ga("math singularity");var n=1/r;r=(u.bb*u.Ze-u.Ye*u.We)*n;var a=-(u.jb*u.Ze-u.Ye*u.Ve)*n,c=(u.jb*u.We-u.bb*u.Ve)*n,p=-(u.qb*u.Ze-u.We*u.pf)*n,f=(u.eb*u.Ze-u.pf*u.Ve)*n,m=-(u.eb*u.We-u.qb*u.Ve)*n,b=(u.qb*u.Ye-u.pf*u.bb)*n,S=-(u.eb*u.Ye-u.pf*u.jb)*n;n*=u.eb*u.bb-u.qb*u.jb;var M=-(u.Lb*r+u.Qb*a+u.Cg*c),T=-(u.Lb*p+u.Qb*f+u.Cg*m);u=-(u.Lb*b+u.Qb*S+u.Cg*n),o.eb=r,o.qb=p,o.pf=b,o.jb=a,o.bb=f,o.Ye=S,o.Ve=c,o.We=m,o.Ze=n,o.Lb=M,o.Qb=T,o.Cg=u},w.prototype.Pf=function(){var u=new w;return u.eb=this.eb,u.qb=this.qb,u.pf=this.pf,u.jb=this.jb,u.bb=this.bb,u.Ye=this.Ye,u.Ve=this.Ve,u.We=this.We,u.Ze=this.Ze,u.Lb=this.Lb,u.Qb=this.Qb,u.Cg=this.Cg,u},w}();h.BY=A}(q||(q={})),function(h){var A=function(u){function o(r){if(r!==void 0)r=u.call(this,r.dc(),r)||this;else{(r=u.call(this)||this).cg=[],r.cg[0]=0,r.Ba=1,r.wh=[];for(var n=0;10>n;n++)r.wh[n]=-1;r.wh[r.cg[0]]=0}return r.lq=!0,r}return gt(o,u),o.prototype.se=function(r){this.hasAttribute(r)||(this.wh[r]=0,this.dD())},o.prototype.removeAttribute=function(r){if(r==0)throw h.i.O("Position attribue cannot be removed");this.hasAttribute(r)&&(this.wh[r]=-1,this.dD())},o.prototype.reset=function(){this.cg[0]=0,this.Ba=1;for(var r=0;r<this.wh.length;r++)this.wh[r]=-1;this.wh[this.cg[0]]=0,this.lq=!0},o.prototype.yF=function(){return w.fz().add(this)},o.og=function(){return w.fz().TR()},o.prototype.nM=function(){var r=this.dc();return new h.ua(r,this)},o.prototype.dD=function(){for(var r=this.Ba=0,n=0;10>r;r++)0<=this.wh[r]&&(this.cg[n]=r,this.wh[r]=n,n++,this.Ba++);this.lq=!0},o.prototype.dc=function(){return this.lq&&(this.yl=this.Bn(),this.lq=!1),this.yl},o.prototype.Nb=function(r){if(r==null)return!1;if(r==this)return!0;if(!(r instanceof o)||r.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.cg[n]!=r.cg[n])return!1;return this.lq==r.lq},o.prototype.AG=function(r){if(r.Ba!=this.Ba)return!1;for(var n=0;n<this.Ba;n++)if(this.cg[n]!=r.cg[n])return!1;return!0},o.Kw=function(r,n){for(var a=[],c=0;c<r.Ba;c++)a[c]=-1;c=0;for(var p=r.Ba;c<p;c++)a[c]=n.Qf(r.qd(c));return a},o.vR=function(r,n){return(r=new o(r)).se(n),r.yF()},o.wR=function(r,n){for(var a=null,c=0;10>c;c++)!r.hasAttribute(c)&&n.hasAttribute(c)&&(a==null&&(a=new o(r)),a.se(c));return a!=null?a.yF():r},o}(h.ua);h.ee=A;var w=function(){function u(){this.map=[];var o=new A;this.add(o),(o=new A).se(1),this.add(o)}return u.fz=function(){return u.WK},u.prototype.TR=function(){return u.gt},u.prototype.add=function(o){var r=o.dc();if(u.gt!=null&&u.gt.dc()==r&&o.AG(u.gt))return u.gt;if(u.Fw!=null&&u.Fw.dc()==r&&o.AG(u.Fw))return u.Fw;var n=null;return this.map[r]!==void 0&&(n=this.map[r]),n==null&&((n=o.nM()).Ba==1?u.gt=n:n.Ba==2&&n.qd(1)==1?u.Fw=n:this.map[r]=n),n},u.WK=new u,u}()}(q||(q={}));var _1={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},ad={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},qh=new(function(){function h(){this.LM=50,this.op=new Map,this.ij=[]}return h.prototype.clear=function(){this.ij.length=0,this.op.clear()},h.prototype.delete=function(A){return!!this.op.delete(A)&&(this.ij.splice(this.ij.indexOf(A),1),!0)},h.prototype.get=function(A){var w=this.op.get(A);if(w!==void 0)return this.ij[0]!==A&&(this.ij.splice(this.ij.indexOf(A),1),this.ij.unshift(A)),w},h.prototype.has=function(A){return this.op.has(A)},h.prototype.set=function(A,w){return this.get(A)!==void 0&&this.delete(A),this.ij.unshift(A),this.op.set(A,w),this.iM(),this},h.prototype.iM=function(){for(;this.ij.length&&this.ij.length>this.LM;){var A=this.ij.pop();this.op.delete(A)}},h}()),xe=((_i={}).convertJSONToGeometry=function(h){return q.bc.$O(h)},_i.hasM=function(h){return h.hasAttribute(q.Kh.M)},_i.hasZ=function(h){return h.hasAttribute(q.Kh.Z)},_i.getPointX=function(h){return h.Ng()},_i.getPointY=function(h){return h.kh()},_i.getPointZ=function(h){return h.VR()},_i.getPointM=function(h){return h.tR()},_i.getXMin=function(h){return h.gs()},_i.getYMin=function(h){return h.js()},_i.getXMax=function(h){return h.fs()},_i.getYMax=function(h){return h.hs()},_i.getZExtent=function(h){return h.Vg(q.Kh.Z,0)},_i.getMExtent=function(h){return h.Vg(q.Kh.M,0)},_i.exportPaths=function(h){var A=[],w=h.ea(),u=null,o=null,r=h.hasAttribute(q.Kh.Z),n=h.hasAttribute(q.Kh.M);r&&(u=h.vb(q.Kh.Z)),n&&(o=h.vb(q.Kh.M));for(var a=new q.h,c=0;c<w;c++){for(var p=h.Ca(c),f=h.Ka(c),m=0,b=0,S=NaN,M=NaN,T=NaN,k=NaN,C=h.ec(c),N=[],F=p;F<p+f;F++){h.D(F,a),k=T=NaN;var D=[a.x,a.y];r&&(T=u.get(F),D.push(T)),n&&(k=o.get(F),D.push(k)),F==p&&C&&(m=a.x,b=a.y,S=T,M=k),N.push(D)}!C||m==a.x&&b==a.y&&(!r||isNaN(S)&&isNaN(T)||S==T)&&(!n||isNaN(M)&&isNaN(k)||M==k)||N.push(N[0].slice(0)),A.push(N)}return A},_i.exportPathsFlat=function(){},_i.exportPoints=function(h){var A=h.hasAttribute(q.Kh.Z),w=h.hasAttribute(q.Kh.M),u=null,o=null;A&&(u=h.vb(q.Kh.Z)),w&&(o=h.vb(q.Kh.M));for(var r=new q.h,n=h.I(),a=[],c=0;c<n;c++){h.D(c,r);var p=[r.x,r.y];A&&p.push(u.get(c)),w&&p.push(o.get(c)),a.push(p)}return a},_i.exportPointsFlat=function(){},_i);return function(){function h(){}return h.buffer=ir,h.clip=P,h.contains=L,h.convexHull=Re,h.crosses=z,h.cut=R,h.densify=g1,h.difference=De,h.disjoint=ne,h.distance=V,h.equals=K,h.extendedSpatialReferenceInfo=O,h.generalize=M2,h.geodesicArea=v1,h.geodesicBuffer=Xt,h.geodesicDensify=I2,h.geodesicLength=A2,h.intersect=qe,h.intersects=ee,h.isSimple=Se,h.nearestCoordinate=Xr,h.nearestVertex=$2,h.nearestVertices=m1,h.offset=zt,h.overlaps=ae,h.planarArea=T2,h.planarLength=E2,h.relate=Ie,h.simplify=Pe,h.symmetricDifference=Le,h.touches=se,h.union=Oe,h.within=oe,h.rotate=q.Dx.rotate,h.flipHorizontal=q.Dx.DQ,h.flipVertical=q.Dx.EQ,h.ExtendedParams=q.sC,h._enableProjection=k2,h._project=P2,h._getTransformation=O2,h._getTransformationBySuitability=C2,h}()}var s=i();s!==void 0&&(e.exports=s)})(Dx);const yt=Dx.exports,Dce=Fce({__proto__:null,default:yt},[Dx.exports]);var zce=Object.freeze(Object.defineProperty({__proto__:null,G:yt,g:Dce},Symbol.toStringTag,{value:"Module"}));const It={convertToGEGeometry:Vce,exportPoint:Gce,exportPolygon:qce,exportPolyline:Uce,exportMultipoint:Bce,exportExtent:Hce};function Vce(e,t){if(t==null)return null;let i="cache"in t?t.cache._geVersion:void 0;return i==null&&(i=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=i)),i}function Gce(e,t,i){const s=e.hasZ(t),l=e.hasM(t),d=new He({x:e.getPointX(t),y:e.getPointY(t),spatialReference:i});return s&&(d.z=e.getPointZ(t)),l&&(d.m=e.getPointM(t)),d.cache._geVersion=t,d}function qce(e,t,i){const s=new gs({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return s.cache._geVersion=t,s}function Uce(e,t,i){const s=new $r({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:i});return s.cache._geVersion=t,s}function Bce(e,t,i){const s=new Nh({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:i});return s.cache._geVersion=t,s}function Hce(e,t,i){const s=e.hasZ(t),l=e.hasM(t),d=new xt({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:i});if(s){const y=e.getZExtent(t);d.zmin=y.vmin,d.zmax=y.vmax}if(l){const y=e.getMExtent(t);d.mmin=y.vmin,d.mmax=y.vmax}return d.cache._geVersion=t,d}var Wce=Object.freeze(Object.defineProperty({__proto__:null,hydratedAdapter:It},Symbol.toStringTag,{value:"Module"}));function Et(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function Jce(e){return yt.extendedSpatialReferenceInfo(e)}function Kce(e,t){return yt.clip(It,Et(e),e,t)}function Yce(e,t){return yt.cut(It,Et(e),e,t)}function Xce(e,t){return yt.contains(It,Et(e),e,t)}function Zce(e,t){return yt.crosses(It,Et(e),e,t)}function Bj(e,t,i){return yt.distance(It,Et(e),e,t,i)}function Qce(e,t){return yt.equals(It,Et(e),e,t)}function epe(e,t){return yt.intersects(It,Et(e),e,t)}function tpe(e,t){return yt.touches(It,Et(e),e,t)}function ipe(e,t){return yt.within(It,Et(e),e,t)}function rpe(e,t){return yt.disjoint(It,Et(e),e,t)}function spe(e,t){return yt.overlaps(It,Et(e),e,t)}function npe(e,t,i){return yt.relate(It,Et(e),e,t,i)}function ope(e){return yt.isSimple(It,Et(e),e)}function ape(e){return yt.simplify(It,Et(e),e)}function lpe(e,t=!1){return yt.convexHull(It,Et(e),e,t)}function upe(e,t){return yt.difference(It,Et(e),e,t)}function hpe(e,t){return yt.symmetricDifference(It,Et(e),e,t)}function cpe(e,t){return yt.intersect(It,Et(e),e,t)}function ppe(e,t=null){return yt.union(It,Et(e),e,t)}function dpe(e,t,i,s,l,d){return yt.offset(It,Et(e),e,t,i,s,l,d)}function fpe(e,t,i,s=!1){return yt.buffer(It,Et(e),e,t,i,s)}function ype(e,t,i,s,l,d){return yt.geodesicBuffer(It,Et(e),e,t,i,s,l,d)}function mpe(e,t,i=!0){return yt.nearestCoordinate(It,Et(e),e,t,i)}function gpe(e,t){return yt.nearestVertex(It,Et(e),e,t)}function vpe(e,t,i,s){return yt.nearestVertices(It,Et(e),e,t,i,s)}function zx(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent.center:null}function wpe(e,t,i){if(e==null)throw new Error("Illegal Argument Exception");const s=e.spatialReference;if((i=i!=null?i:zx(e))==null)throw new Error("Illegal Argument Exception");const l=e.constructor.fromJSON(yt.rotate(e,t,i));return l.spatialReference=s,l}function bpe(e,t){if(e==null)throw new Error("Illegal Argument Exception");const i=e.spatialReference;if((t=t!=null?t:zx(e))==null)throw new Error("Illegal Argument Exception");const s=e.constructor.fromJSON(yt.flipHorizontal(e,t));return s.spatialReference=i,s}function _pe(e,t){if(e==null)throw new Error("Illegal Argument Exception");const i=e.spatialReference;if((t=t!=null?t:zx(e))==null)throw new Error("Illegal Argument Exception");const s=e.constructor.fromJSON(yt.flipVertical(e,t));return s.spatialReference=i,s}function xpe(e,t,i,s){return yt.generalize(It,Et(e),e,t,i,s)}function Spe(e,t,i){return yt.densify(It,Et(e),e,t,i)}function $pe(e,t,i,s=0){return yt.geodesicDensify(It,Et(e),e,t,i,s)}function Mpe(e,t){return yt.planarArea(It,Et(e),e,t)}function Ipe(e,t){return yt.planarLength(It,Et(e),e,t)}function Tpe(e,t,i){return yt.geodesicArea(It,Et(e),e,t,i)}function Epe(e,t,i){return yt.geodesicLength(It,Et(e),e,t,i)}var Jfe=Object.freeze(Object.defineProperty({__proto__:null,buffer:fpe,clip:Kce,contains:Xce,convexHull:lpe,crosses:Zce,cut:Yce,densify:Spe,difference:upe,disjoint:rpe,distance:Bj,equals:Qce,extendedSpatialReferenceInfo:Jce,flipHorizontal:bpe,flipVertical:_pe,generalize:xpe,geodesicArea:Tpe,geodesicBuffer:ype,geodesicDensify:$pe,geodesicLength:Epe,intersect:cpe,intersects:epe,isSimple:ope,nearestCoordinate:mpe,nearestVertex:gpe,nearestVertices:vpe,offset:dpe,overlaps:spe,planarArea:Mpe,planarLength:Ipe,relate:npe,rotate:wpe,simplify:ape,symmetricDifference:hpe,touches:tpe,union:ppe,within:ipe},Symbol.toStringTag,{value:"Module"}));const Ape=(e,t,i)=>{let s=t-e;return i&&(s>i/2?s=-s+i:s<-i/2&&(s=s+i)),s},Hu=(e,t,i,s,l)=>{if(!s)s=1;else if(s===0)throw new Error("Can not interpolate between two values where the distance is 0");const d=Ape(e,t,l),y=i/s;return e+d*y},Hj=(e,t,i,s,l)=>{if(e.declaredClass&&e.declaredClass===t.declaredClass){if(e.declaredClass==="esri.Camera"){const d=e,y=t;return new DO({heading:Hu(d.heading,y.heading,i,s,360),position:Hj(d.position,y.position,i,s),tilt:Hu(d.tilt,y.tilt,i,s)})}else if(e.declaredClass==="esri.geometry.Point"){const d=e,y=t,g=d.spatialReference;return new He({spatialReference:g,x:Hu(d.x,y.x,i,s,l),y:Hu(d.y,y.y,i,s,l),z:Hu(d.z,y.z,i,s,l)})}}throw new Error("Values a and b do not have compatible types for interpolation")},kpe=(e,t,i,s,l)=>{if(e.length===t.length)return e.map((d,y)=>Wj(d,t[y],i,s,l));throw new Error("Value arrays must have same length for interpolation")},_I=e=>e&&Object.prototype.toString.call(e)==="[object Date]"&&!isNaN(e),Ope=(e,t,i,s)=>{const l=e.getTime(),d=t.getTime();return new Date(Hu(l,d,i,s))},Wj=(e,t,i,s,l)=>{const d=typeof e;if(typeof t===d){if(d==="number")return Hu(e,t,i,s,l);if(d==="object")return Array.isArray(e)&&Array.isArray(t)?kpe(e,t,i,s,l):_I(e)&&_I(t)?Ope(e,t,i,s):Hj(e,t,i,s);if(e===void 0)return}throw new Error("Values a and b do not have compatible types for interpolation")};class Cpe{constructor(t){this.xs=[],this.dxs=[],this.points=[],this.createPolyline=l=>{const d=this.xs,y=d.length,g=y?d[0]:0,x=y?d[y-1]:0,$=g+(x-g)*l,E=this.spatialReference,O=[];if(2<=y){let P=0;for(O.push(this.points[0]);P<d.length-1&&$>d[P+1];)P++,O.push(this.points[P]);const R=this.dxs[P],L=this.points[P],z=this.points[P+1];O.push(Wj(L,z,$-d[P],R)||[])}return new $r({paths:[O],spatialReference:E})},this.newPoint=l=>{const d=l[0],y=l[1],g=l[2];return new He({spatialReference:this.spatialReference,x:d,y,z:g})};const i=t.paths.length?t.paths[0]:[];this.spatialReference=t.spatialReference;let s=null;i.forEach((l,d)=>{this.points.push([].concat(l));const y=this.newPoint(l);if(d===0)this.xs.push(0);else{const g=Bj(s,y,void 0);this.dxs.push(g),this.xs.push(g+this.xs[d-1])}s=y})}}var Ppe=Object.defineProperty,Npe=Object.getOwnPropertyDescriptor,Jj=(e,t,i,s)=>{for(var l=s>1?void 0:s?Npe(t,i):t,d=e.length-1,y;d>=0;d--)(y=e[d])&&(l=(s?y(t,i,l):y(l))||l);return s&&l&&Ppe(t,i,l),l};const cv="_line_objectid",Rpe=e=>{let t=e.renderer;t&&(t=eH(t.toJSON()));let i=e.elevationInfo;i&&typeof i.clone=="function"&&(i=i.clone());const s=[new Ih({name:"OBJECTID",type:"oid"}),new Ih({name:cv,type:"long"})];return e.fields.forEach(l=>{l.type!=="oid"&&l.name!=="OBJECTID"&&l.name!==cv&&s.push(l)}),new f2({fields:s,geometryType:"polyline",labelingInfo:e.labelingInfo?e.labelingInfo.map(l=>l.clone()):void 0,labelsVisible:e.labelsVisible,legendEnabled:e.legendEnabled,listMode:e.listMode,maxScale:e.maxScale,minScale:e.maxScale,objectIdField:"OBJECTID",opacity:e.opacity,outFields:["*"],popupEnabled:e.popupEnabled,popupTemplate:e.popupTemplate?e.popupTemplate.clone():void 0,renderer:t,source:[],spatialReference:e.spatialReference,title:e.title})};let pv=class extends ze{constructor(){super(...arguments),this.resolveAnimationLayer=null,this.rejectAnimationLayer=null,this.animationLayerPromise=new Promise((e,t)=>{this.resolveAnimationLayer=e,this.rejectAnimationLayer=t}),this.animationGraphics=new Map,this.sections=new Map,this.seekGraphicDebounce=xv((e,t)=>this.seekGraphicSequencial(e,t)),this.queryLineGraphic=e=>{const t=this.sourceLayer;return t?t.queryFeatures({objectIds:[e],outFields:["*"],returnGeometry:!0}).then(i=>{if(i.features.length)return i.features[0];throw new Error("No such graphic with objectId `{objectId}`")}):Promise.reject("No source layer assigned")},this.getAnimationGraphic=e=>{if(this.animationGraphics.has(e)){const t=this.animationGraphics.get(e);return Promise.resolve(t)}else return this.queryLineGraphic(e).then(t=>t.clone()).then(t=>{const i=t.attributes[this.sourceLayer.objectIdField];return t.attributes[cv]=i,this.animationGraphics.set(e,t),t})},this.initializeAnimationLayer=()=>this.sourceLayer.load().then(e=>{if(e.geometryType!=="polyline"){const i=new Error('`lineLayer` must have `geometryType` "polyline"');throw this.rejectAnimationLayer(i),i}const t=Rpe(e);this.resolveAnimationLayer(t)})}get sourceLayer(){return this._get("sourceLayer")}set sourceLayer(e){const t=this._get("sourceLayer");if(t){if(t===e)return;throw new Error("The `sourceLayer` property cannot be changed once a layer has been assigned")}e&&(this._set("sourceLayer",e),this.initializeAnimationLayer())}getLineGraphic(e){const t=e.attributes[cv];return this.queryLineGraphic(t)}whenAnimatedLayer(){return this.animationLayerPromise}seek(e,t){return this.seekGraphicDebounce(e,t)}seekGraphicSequencial(e,t){return this.getAnimationGraphic(t).then(i=>{const s={addFeatures:[],updateFeatures:[]};let l=this.sections.get(t);l?s.updateFeatures=[i]:(l=new Cpe(i.geometry),this.sections.set(t,l),s.addFeatures=[i]);const d=l.createPolyline(e);return i.geometry=d,this.whenAnimatedLayer().then(y=>{y.applyEdits(s)})})}};Jj([_()],pv.prototype,"sourceLayer",1);pv=Jj([H("animations.layers.LineLayerAnimation")],pv);var jpe=pv;const S2=new Lce({portalItem:{id:"02bae9c8de294eabaa91972b14394ecc"}}),Lpe=new Ghe({container:"viewDiv",map:S2,ui:{components:[]},navigation:{browserTouchPanEnabled:!1,mouseWheelZoomEnabled:!1}}),Kj=new T6({url:"./data/points.geojson",renderer:new t1({symbol:new ya({color:[255,165,0,1],size:8,style:"circle",outline:{width:8,color:[255,165,0,.3]}})}),labelingInfo:[new Yp({labelExpressionInfo:{expression:"$feature.name"},labelPlacement:"center-right",symbol:new jh({color:[255,165,0,1],haloSize:2,haloColor:[255,255,255,1],font:{size:10}})})]});S2.add(Kj);const Fpe=e=>{Kj.featureEffect=new pO({filter:new cO({where:e}),excludedEffect:"grayscale(100%) opacity(30%)"})},Dpe=e=>{if(e){Fpe(`id = '${e}'`);const t=S2.bookmarks.filter(i=>i.name===e).getItemAt(0);t&&Lpe.goTo(t.viewpoint,{duration:1500})}},Yj=new T6({url:"./data/tracks.geojson",renderer:new t1({symbol:new _s({width:3,color:[252,169,3],style:"solid",cap:"round",join:"round"})})}),Q5={};Yj.queryFeatures({where:"1=1",outFields:["*"]}).then(e=>{e.features.forEach(t=>{Q5[t.attributes.id]=t.attributes.__OBJECTID})});const Xj=new jpe({sourceLayer:Yj});Xj.whenAnimatedLayer().then(e=>{S2.add(e)});let Zo=null,xI=null;const zpe=document.querySelectorAll("section"),Vpe=Array.from(zpe);function Gpe(e){const t=e.getBoundingClientRect(),i=t.top,s=.65*window.innerHeight||document.documentElement.clientHeight;return Math.min(Math.max(s-i,.01),t.height)/t.height}const qpe=e=>{if(typeof e!="undefined"&&Zo){const t=Gpe(document.getElementById(Zo));Xj.seek(t,e)}},Vx=()=>{const e=window.innerHeight||document.documentElement.clientHeight;Vpe.forEach(t=>{t.getBoundingClientRect().top/e<.7&&(Zo=t.id)}),Zo!==xI?(xI=Zo,Dpe(Zo)):Zo&&Q5[Zo]&&qpe(Q5[Zo])};window.onscroll=Vx;window.onload=Vx;window.onresize=Vx;export{Kr as $,vt as A,Gi as B,rA as C,uj as D,bo as E,Fm as F,jE as G,Ale as H,Tle as I,aj as J,y1 as K,mP as L,O5 as M,N4 as N,Fl as O,Gp as P,ho as Q,dv as R,c4 as S,vj as T,Vt as U,yp as V,bv as W,Te as X,Ot as Y,Bfe as Z,qfe as _,Hfe as a,Ox as a$,Li as a0,dk as a1,Fh as a2,z6 as a3,v as a4,_ as a5,H as a6,ze as a7,Al as a8,Ur as a9,WD as aA,S4 as aB,NP as aC,vfe as aD,K8 as aE,CP as aF,_4 as aG,Kde as aH,Tr as aI,ov as aJ,nfe as aK,Yde as aL,Gde as aM,gde as aN,kv as aO,mhe as aP,NG as aQ,RG as aR,Ye as aS,Uf as aT,tE as aU,fde as aV,x4 as aW,q0e as aX,U0e as aY,G0e as aZ,oj as a_,R4 as aa,zE as ab,Zi as ac,He as ad,Ws as ae,w2 as af,Vde as ag,ZR as ah,LR as ai,QR as aj,di as ak,Zae as al,Dfe as am,ule as an,Ff as ao,zfe as ap,fe as aq,Or as ar,bT as as,y0e as at,An as au,Pl as av,gs as aw,Dp as ax,cfe as ay,uh as az,Me as b,Y8 as b$,Cp as b0,Mn as b1,hR as b2,dR as b3,pR as b4,Tne as b5,uo as b6,jf as b7,y2 as b8,qde as b9,Sx as bA,XB as bB,N0e as bC,ZB as bD,C0e as bE,Ui as bF,fi as bG,Up as bH,P0e as bI,GH as bJ,qH as bK,UH as bL,Nn as bM,wB as bN,_de as bO,Ee as bP,bk as bQ,Zc as bR,OU as bS,xse as bT,lte as bU,ha as bV,FP as bW,yfe as bX,pfe as bY,kee as bZ,_fe as b_,Pn as ba,mo as bb,Hde as bc,Rde as bd,Je as be,nO as bf,WW as bg,JW as bh,NF as bi,T0e as bj,vh as bk,iy as bl,fP as bm,yde as bn,nh as bo,Jc as bp,F0 as bq,RK as br,pr as bs,dr as bt,Ly as bu,WS as bv,Gr as bw,xfe as bx,dfe as by,_t as bz,xL as c,ase as c$,HB as c0,Jpe as c1,Kpe as c2,oK as c3,Bae as c4,Ele as c5,ate as c6,LP as c7,nj as c8,Rd as c9,mx as cA,Kg as cB,ii as cC,nse as cD,El as cE,ur as cF,rse as cG,Js as cH,Zre as cI,Jre as cJ,Wre as cK,Ph as cL,us as cM,qN as cN,fa as cO,Pte as cP,Vre as cQ,Ure as cR,rt as cS,GN as cT,ds as cU,sse as cV,Qre as cW,zb as cX,Vh as cY,m4 as cZ,ose as c_,Qf as ca,$g as cb,$t as cc,i4 as cd,Bf as ce,tt as cf,zl as cg,mt as ch,ce as ci,qi as cj,sne as ck,Op as cl,Lc as cm,L5 as cn,lI as co,jl as cp,qse as cq,f0e as cr,BI as cs,_r as ct,xr as cu,Ki as cv,Jr as cw,xo as cx,Sm as cy,Rf as cz,ede as d,Pp as d$,$r as d0,Nh as d1,lse as d2,xt as d3,fx as d4,hse as d5,use as d6,cse as d7,X4 as d8,Nf as d9,Qse as dA,r1 as dB,Wpe as dC,vf as dD,$e as dE,d2 as dF,yO as dG,Sf as dH,nY as dI,tde as dJ,Vg as dK,hde as dL,lh as dM,_u as dN,wq as dO,$0e as dP,xp as dQ,U0 as dR,Y3 as dS,uue as dT,Vfe as dU,Gfe as dV,Mh as dW,Eh as dX,Kf as dY,gg as dZ,Pb as d_,Lre as da,ise as db,ese as dc,Kre as dd,bse as de,gse as df,mse as dg,Cfe as dh,vse as di,wse as dj,Yre as dk,Xre as dl,tse as dm,fse as dn,rx as dp,Rfe as dq,qre as dr,Gre as ds,Bre as dt,Hre as du,Uk as dv,Rp as dw,fL as dx,Kse as dy,bO as dz,Hpe as e,yi as e$,pO as e0,cO as e1,z0e as e2,nE as e3,xde as e4,kF as e5,Yi as e6,ca as e7,Ede as e8,Sde as e9,kg as eA,PK as eB,ale as eC,Iv as eD,vA as eE,dP as eF,si as eG,Y2 as eH,F4 as eI,M7 as eJ,vde as eK,Qde as eL,o0e as eM,Ll as eN,kr as eO,s4 as eP,g7 as eQ,vee as eR,gee as eS,S0e as eT,ct as eU,Ude as eV,H0e as eW,DT as eX,HI as eY,Mp as eZ,tr as e_,Mde as ea,$de as eb,Ide as ec,pf as ed,Hs as ee,Oz as ef,xv as eg,s1 as eh,Tf as ei,Tde as ej,Vp as ek,eH as el,t1 as em,IA as en,$p as eo,Ef as ep,nf as eq,mG as er,Ah as es,kh as et,Dh as eu,Rl as ev,w_ as ew,Jt as ex,v_ as ey,__ as ez,Zpe as f,wo as f$,hh as f0,Fe as f1,Wle as f2,BB as f3,Uu as f4,Sh as f5,CI as f6,m0e as f7,HO as f8,b0e as f9,Es as fA,uM as fB,Wr as fC,Cr as fD,le as fE,Lo as fF,I_ as fG,uP as fH,LI as fI,wf as fJ,Ml as fK,p0e as fL,kn as fM,Rv as fN,Np as fO,cs as fP,v0e as fQ,mD as fR,k0e as fS,DB as fT,Yr as fU,SU as fV,$U as fW,yt as fX,jre as fY,wz as fZ,j0e as f_,Jee as fa,h0e as fb,w0e as fc,GZ as fd,gP as fe,R_ as ff,Xee as fg,G_ as fh,D_ as fi,ry as fj,$n as fk,Zee as fl,CF as fm,vs as fn,jse as fo,R0e as fp,Xi as fq,Yee as fr,Kee as fs,Uhe as ft,v2 as fu,Nd as fv,Lx as fw,Qpe as fx,f2 as fy,Wfe as fz,ws as g,Mv as g$,gD as g0,Xde as g1,n0e as g2,wfe as g3,Mk as g4,zH as g5,M0e as g6,ps as g7,Vs as g8,VG as g9,Lde as gA,RV as gB,bV as gC,LE as gD,VE as gE,Pde as gF,UV as gG,QE as gH,hW as gI,oW as gJ,sW as gK,tW as gL,MV as gM,_0e as gN,K0e as gO,eO as gP,o1 as gQ,RW as gR,PV as gS,NW as gT,Zz as gU,_le as gV,Sle as gW,IV as gX,pde as gY,cde as gZ,$v as g_,IR as ga,PI as gb,RI as gc,HQ as gd,Ade as ge,QT as gf,wde as gg,mde as gh,PD as gi,zD as gj,Tv as gk,dde as gl,JU as gm,LT as gn,bfe as go,ufe as gp,RP as gq,AP as gr,Xpe as gs,Bue as gt,uV as gu,m3 as gv,ide as gw,rde as gx,y3 as gy,UE as gz,pe as h,xl as h$,Rle as h0,Ule as h1,nW as h2,Sp as h3,Ps as h4,et as h5,qV as h6,BV as h7,XV as h8,iG as h9,Cde as hA,kde as hB,Fde as hC,Ih as hD,j0 as hE,Wee as hF,Vee as hG,q8 as hH,xP as hI,gfe as hJ,fH as hK,O0e as hL,PF as hM,Tw as hN,Ew as hO,aL as hP,Ut as hQ,ofe as hR,Ype as hS,Yue as hT,ffe as hU,o2 as hV,sde as hW,TV as hX,Ft as hY,op as hZ,AU as h_,ZE as ha,YE as hb,XE as hc,tG as hd,aG as he,lG as hf,VV as hg,_l as hh,sfe as hi,e4 as hj,tR as hk,afe as hl,mfe as hm,_P as hn,Bde as ho,ife as hp,rfe as hq,Wde as hr,ua as hs,up as ht,TO as hu,m6 as hv,L0e as hw,hfe as hx,T4 as hy,Ode as hz,bL as i,Noe as i$,GE as i0,_V as i1,gV as i2,qE as i3,Gv as i4,Jp as i5,cW as i6,Dde as i7,sg as i8,Uae as i9,IO as iA,MO as iB,D0e as iC,Sg as iD,LO as iE,kJ as iF,jk as iG,Xv as iH,jO as iI,Er as iJ,yoe as iK,sA as iL,kX as iM,zse as iN,$x as iO,V0e as iP,gO as iQ,vO as iR,Use as iS,vx as iT,Hse as iU,Wse as iV,Y4 as iW,$h as iX,WH as iY,Doe as iZ,Loe as i_,eV as ia,EB as ib,yL as ic,ade as id,fq as ie,J4 as ig,lde as ih,b4 as ii,Sr as ij,Jde as ik,n2 as il,jG as im,tfe as io,Z0e as ip,Q0e as iq,Y0e as ir,kC as is,YX as it,efe as iu,X0e as iv,t0e as iw,a0e as ix,l0e as iy,aO as iz,Ge as j,M4 as j$,g5 as j0,cr as j1,cf as j2,mO as j3,_s as j4,Dv as j5,ya as j6,Vl as j7,Be as j8,J0 as j9,bf as jA,qhe as jB,vl as jC,ys as jD,Eq as jE,jv as jF,g0e as jG,ni as jH,nde as jI,lL as jJ,L7 as jK,D4 as jL,e0e as jM,Zde as jN,hv as jO,r4 as jP,hc as jQ,tne as jR,Yp as jS,i1 as jT,I6 as jU,rg as jV,mM as jW,jh as jX,dO as jY,xO as jZ,cg as j_,Nb as ja,Iw as jb,YL as jc,Gs as jd,EO as je,lO as jf,rne as jg,Wp as jh,ZA as ji,ik as jj,nee as jk,uB as jl,oee as jm,gk as jn,$k as jo,_g as jp,c6 as jq,ode as jr,XA as js,xg as jt,Bse as ju,W0e as jv,Fp as jw,rT as jx,gv as jy,Jf as jz,Nde as k,jq as k$,RO as k0,m_ as k1,Zv as k2,fO as k3,R6 as k4,vo as k5,fo as k6,$E as k7,SA as k8,Bpe as k9,hO as kA,Pfe as kB,Mfe as kC,$fe as kD,Ife as kE,Tfe as kF,Afe as kG,zre as kH,P$ as kI,Efe as kJ,pse as kK,p2 as kL,BN as kM,HN as kN,A0e as kO,Ufe as kP,J0e as kQ,B4 as kR,tV as kS,E0e as kT,M6 as kU,bde as kV,pa as kW,Cl as kX,kO as kY,O4 as kZ,gL as k_,Lk as ka,Il as kb,DS as kc,gf as kd,PJ as ke,CJ as kf,jp as kg,KA as kh,jfe as ki,Lp as kj,On as kk,u0e as kl,MA as km,OJ as kn,Lfe as ko,hD as kp,l7 as kq,U as kr,x0e as ks,Ofe as kt,O$ as ku,Sfe as kv,k$ as kw,dse as kx,kfe as ky,Nfe as kz,Upe as l,jde as l0,i0e as l1,r0e as l2,jW as l3,Uv as l4,rv as l5,Qz as l6,s0e as l7,DE as l8,c0e as l9,pW as la,RE as lb,d0e as lc,zde as ld,Xq as le,I0e as lf,F0e as lg,B0e as lh,lfe as li,Ffe as lj,Jfe as lk,ie as m,H4 as n,wi as o,Cb as p,dh as q,Y as r,te as s,he as t,pi as u,Rn as v,ude as w,bs as x,bi as y,fj as z};
